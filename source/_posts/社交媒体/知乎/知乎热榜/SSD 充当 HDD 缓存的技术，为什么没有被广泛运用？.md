
---
title: 'SSD 充当 HDD 缓存的技术，为什么没有被广泛运用？'
categories: 
 - 社交媒体
 - 知乎
 - 知乎热榜
headimg: 'https://pic1.zhimg.com/v2-27d315ca0851942b6b1e6edf1ed72220_1440w.jpg?source=b1748391'
author: 知乎
comments: false
date: Mon, 05 Sep 2022 09:35:44 GMT
thumbnail: 'https://pic1.zhimg.com/v2-27d315ca0851942b6b1e6edf1ed72220_1440w.jpg?source=b1748391'
---

<div>   
木头龙的回答<br><br><h2>很简单，普及速度赶不上SSD价格下降的速度。</h2><p data-pid="EtTaJL_P">首先要说的是SSD给HDD当缓存其实是很有效的。以现代文件系统的数据组织结构，小容量闪存对于提升机械硬盘的随机文件访问速度的确是非常有帮助的。原理在于大部分文件系统是树型结构，要访问一个具体文件的物理存储位置，往往需要七八次甚至十数次的单线程单队列4K随机访问。因为机械硬盘的机械结构，定位到一个具体扇区平均需要10ms甚至更长时间的延迟，导致访问一个文件需要0.1秒甚至更多。而闪存因为是全电子操作，这个定位延迟可以缩短到数十μs甚至数μs，几百倍的性能提升。如果把文件系统结构相关的元数据(Metadata)存储在闪存上作为机械硬盘的缓存，访问一个文件只需要定位一次，也可以获得十多倍的性能提升。更详细的解释，可以参看我之前写过的文章：</p><a data-draft-node="block" data-draft-type="link-card" href="https://zhuanlan.zhihu.com/p/93032287" data-size="small" data-image="https://picx.zhimg.com/v2-a2c50a7b6a03f6f42a8fa520e9afeed6_720w.jpg?source=b1748391" data-entity-type="article" class="internal">为什么说固态硬盘的4K性能很重要？</a><p><br></p><p data-pid="rWmHrOPs">比较普及的用闪存作为机械硬盘缓存的技术，我认为应该是2007年Windows Vista推出时的ReadyBoost。不过ReadyBoost用的闪存设备是U盘，一方面当时只有USB 2.0（USB 3.0在2008年才发布，支持USB 3.0的Sandy Bridge平台2011年才上市），持续写入速度还没硬盘快；另一方面ReadyBoost要求的4K随机读取2.5 MB/s，十多年能符合这个要求的U盘可不便宜。所以ReadyBoost从来没有真正普及过。</p><p><br></p><p data-pid="JTmh9lHs">而支持USB 3.0的Sandy Bridge平台上市时，Z68就支持Smart Respones Technology(SRT，智能响应技术)。但Z68主板的高昂价格对SRT普及造成了障碍；到了Ivy Bridge平台也只是下放到次高端的H77主板，直到Haswell平台最主流的B85才支持SRT，此时已经是2013年了。</p><p><br></p><p data-pid="iNMJHSsx">然鹅SSD的NAND闪存，2010年三星开始量产TLC闪存，2013年上市了TLC的840 evo，2014年上市了3D V-NAND的850系列。TLC和3D V-NAND这两个技术大幅降低了SSD的成本，TLC + 3D V-NAND的850 evo在2015年上市，240~256 GB型号价格迅速降低到主流价位（500~600），二线品牌甚至有不到400的。例如太平洋电脑2015年底的一份入门级SSD评测中<sup data-draft-node="inline" data-draft-type="reference" data-numero="1" data-text="入门级SSD大乱斗!10款240/256G SSD大横评_游戏年度横评2015_太平洋电脑网PConline" data-url="http://pingce.pconline.com.cn/733/7337545_all.html#content_page_1">[1]</sup>，参测产品型号及参考价格如下：</p><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-27d315ca0851942b6b1e6edf1ed72220_1440w.jpg?source=b1748391" data-rawwidth="1216" data-rawheight="1784" data-size="normal" data-caption data-default-watermark-src="https://pic1.zhimg.com/v2-67efff056677fc89f022096cd1a658c9_720w.jpg?source=b1748391" class="origin_image zh-lightbox-thumb" data-original="https://pic1.zhimg.com/v2-27d315ca0851942b6b1e6edf1ed72220_r.jpg?source=b1748391" referrerpolicy="no-referrer"></figure><p data-pid="toP1OYk1">256G SSD成为主流后，主流电脑用户就没必要采用SSD缓存技术了——一般用户系统+应用程序也就占100G不到的存储空间，加上一些经常访问的常用文件也就占200不到。需要更大固态容量的大型软件、游戏用户，上480~512G的型号价格大概在800~1200，也并非无法接受。机械硬盘就用来存储一些很少访问的冷数据如备份文件、归档项目文件等，或者占用存储空间大但又不太需要性能（尤其是随机访问性能）的多媒体文件，例如音乐、视频、照片等。</p><p><br></p><h2>SRT的不足</h2><p data-pid="6kn04f_m">除了因为SSD价格快速下降外，Intel的SRT未能普及还有几个SRT本身的原因。</p><p><br></p><p data-pid="7sqC2ppa">首先是缓存的容量。SRT只能支持最大64GB的缓存分区，主流用户应该是足够的，但对于需要数TB存储空间的用户来说，可能不太足够。一旦缓存容量不足，需要频繁替换缓存数据的话，加速效果会很差。</p><p><br></p><p data-pid="dKUVOwtT">其次是启用SRT的步骤过于呆板。启用SRT需要在Windows环境下使用Intel RST（Rapid Storage Technology，快速存储技术，不要和SRT混淆）的客户端操作，并且要求SSD上没有任何分区。</p><p data-pid="1dUbifkK">所以如果新装机，SSD容量在120G以上，为了不浪费SSD的容量和性能，想把系统和应用安装到剩余的SSD空间会很麻烦。用户需要：</p><ol><li data-pid="7GqugLel">在机械硬盘上安装Windows；</li><li data-pid="rdkjgqoC">安装RST，在RST界面中启用SRT，用固态给机械硬盘加速；</li><li data-pid="7Jzt9vCU">在SSD的剩余空间中建立分区，安装Windows；</li><li data-pid="bryFfjBa">在SSD上的Windows中安装RST；</li><li data-pid="zTSYFzdY">删除HDD上的Windows（可选）。</li></ol><p data-pid="3eDwAAMF">一旦SRT出现错误，需要停止并重新启用的话就更麻烦了——你需要先备份SSD上系统盘中的数据，清除所有SSD上的分区，然后重复上述操作…</p><p><br></p><p data-pid="x22YIQ_Q">从Skylake开始，Intel开始主推傲腾加速方案，SRT在后续平台上相当于被废掉了。和SSD方案相比，傲腾虽然性能更好，也无需TRIM和GC加速效果更好，但因为介质成本高，接受程度就更差了。</p><p><br></p><p data-pid="bA0a8mGk">最后就是，SSD给HDD缓存在一些同时需要大容量存储空间和读写性能的场景中其实很常见。例如高端NAS、混合磁盘阵列等。如果是电脑需要类似的混合存储，可以考虑Windows自带的存储空间建立分层存储池。</p><a data-draft-node="block" data-draft-type="link-card" href="http://link.zhihu.com/?target=https%3A//support.microsoft.com/zh-cn/windows/%25E5%25AD%2598%25E5%2582%25A8%25E7%25A9%25BA%25E9%2597%25B4-windows-b6c8b540-b8d8-fb8a-e7ab-4a75ba11f9f2%23WindowsVersion%3DWindows_" class=" wrap external" target="_blank" rel="nofollow noreferrer">存储空间 Windows</a><p><br></p><p data-pid="S5rXU9w0">能接受200块钱的软件许可费用话，个人推荐使用PrimoCache，使用上灵活很多，可以用SSD上的一个分区来加速机械硬盘、加速机械硬盘上的多个分区或者多块机械硬盘；也支持用内存给SSD加速；可以选择多种写入策略。</p><a data-draft-node="block" data-draft-type="link-card" href="http://link.zhihu.com/?target=https%3A//www.romexsoftware.com/zh-cn/primo-cache/index.html" data-image="https://pic2.zhimg.com/v2-0a6124f5405ad1122d42dd6a25eb8c44.jpg?source=b1748391" data-image-width="380" data-image-height="271" class=" wrap external" target="_blank" rel="nofollow noreferrer">PrimoCache - 加速各种存储设备的缓存软件</a><p></p>  
</div>
            