
---
title: '7 月 13 日晚 B 站、A 站、豆瓣、晋江等多家网络服务疑似宕机，可能是哪些技术原因导致的？'
categories: 
 - 社交媒体
 - 知乎
 - 知乎热榜
headimg: 'https://picsum.photos/400/300?random=2238'
author: 知乎
comments: false
date: Tue, 13 Jul 2021 15:59:30 GMT
thumbnail: 'https://picsum.photos/400/300?random=2238'
---

<div>   
黄珏珅的回答<br><br><p>谢邀。正准备刷视频，发现上不了，结果害我反复开关WiFi n次。</p><hr><p>盲猜一下吧，我觉得应该是etcd挂了。</p><p>因为表现上是B站全部的业务都挂了，而且是几乎在一瞬间。服务器返回的错误大多数是502（Bad Gateway）。也就是前端的reverse proxy无法访问到upstream的服务器。</p><p>通常来说，能造成几乎所有请求都502的，要不就是前端和后端之间的网络通路全挂了，要不就是后端的服务全都挂了。</p><p>那么现在的大型互联网公司的基础设施是怎样的呢，大多数使用了kubernetes，实现全国各地的数据中心的容器编排、网络虚拟化等。</p><p>而kubernetes的设计上，网络插件和pod编排又是相对独立的。</p><p>如果只是网络插件出问题了，那么部分服务器上的网络插件的缓存还在，一定有部分用户还能正常使用。</p><p>如果只是pod编排除了问题，也是一样的道理。</p><p>现在所有的都挂了，那只能是etcd挂掉，导致反向代理无法通过etcd找到对应的pod的虚拟ip，有无法通过网络插件与对应的pod通信。</p>  
</div>
            