
---
title: '你见过最烂代码是什么_'
categories: 
 - 社交媒体
 - 知乎
 - 知乎热榜
headimg: 'https://pic1.zhimg.com/v2-d9934147e1e08a9863620a3ba0af9194_720w.jpg?source=b1748391'
author: 知乎
comments: false
date: Fri, 10 Jun 2022 01:47:16 GMT
thumbnail: 'https://pic1.zhimg.com/v2-d9934147e1e08a9863620a3ba0af9194_720w.jpg?source=b1748391'
---

<div>   
withYou的回答<br><br><p data-pid="GzerQvdl">GitHub上有个特别的项目，主要是教授你如何写出一个”让人窒息“的代码。这样在别人接手你的项目代码时，可以充分恶心一下他。<br> <br></p><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-d9934147e1e08a9863620a3ba0af9194_720w.jpg?source=b1748391" data-rawwidth="400" data-rawheight="181" data-size="normal" data-caption class="content_image" referrerpolicy="no-referrer"></figure><p data-pid="RgsWlV-M"><br><br>这个项目截止到目前为止，已经有2.5K的星星数。看来很多人都在努力学习，如何写出令人狗血不止的亮眼代码了。<br> <br><br><br></p><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-e6c295c3fa6c55717c2dd51dda8532c6_1440w.jpg?source=b1748391" data-rawwidth="679" data-rawheight="137" data-size="normal" data-caption class="origin_image zh-lightbox-thumb" data-original="https://pic1.zhimg.com/v2-e6c295c3fa6c55717c2dd51dda8532c6_r.jpg?source=b1748391" referrerpolicy="no-referrer"></figure><p data-pid="D9x2Zg5G"><br>该项目一共提供了19个准则，项目地址如下，读者们可以根据自己的实际情况看看自己是否有中招了。<br><a href="http://link.zhihu.com/?target=https%3A//github.com/trekhleb/state-of-the-art-shitcode" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">github.com/trekhleb/sta</span><span class="invisible">te-of-the-art-shitcode</span><span class="ellipsis"></span></a><br><br>| <b>变量命名越少字越好</b><br><br><br><br></p><p data-pid="-F5YdW4g">如果我们在编写代码的时候输入的东西越少，那么就有越多的时间去思考代码逻辑等问题。其中Good表示写出了好代码。</p><p data-pid="zMbYzu4Z">Good  </p><div class="highlight"><pre><code class="language-text"><span>let a = 42;
</span></code></pre></div><p data-pid="q3FSRWta">Bad  </p><div class="highlight"><pre><code class="language-text"><span>let age = 42;
</span></code></pre></div><p data-pid="UPXe6Bpx"><b>| 变量/函数混合命名风格</b></p><p data-pid="N4kTL7Jn">变量和函数命名时进行混搭，把多种命名法混合在一起，显示自己的学识渊博。</p><p data-pid="PJYgz21h">Good  </p><div class="highlight"><pre><code class="language-text"><span>let wWidth = 640;
</span></code></pre></div><p data-pid="A1_MZXfR">Bad  </p><div class="highlight"><pre><code class="language-text"><span>let windowWidth = 640;
</span></code></pre></div><p data-pid="RO2KvBYY"><b>| 不要写注释</b></p><p data-pid="hSzvDZGM">没人看你的注释，为什么要多此一举呢？</p><p data-pid="FNcPHfs4">Good  </p><div class="highlight"><pre><code class="language-text"><span>const cdr = 700;
</span></code></pre></div><p data-pid="JVTAK49b">Bad  </p><p data-pid="x7wP69oK">更多时候，评论应该包含一些“为什么”，而不是一些“是什么”。如果“什么”在代码中不清楚，那么代码可能太混乱了。</p><div class="highlight"><pre><code class="language-python3"><span><span class="o">//</span> <span class="mi">700</span><span class="n">ms的数量是根据UX</span> <span class="n">A</span><span class="o">/</span><span class="n">B测试结果进行经验计算的</span><span class="err">。</span>
<span class="o">//</span> <span class="nd">@查看</span><span class="p">:</span> <span class="o"><</span><span class="n">详细解释700的一个链接</span><span class="o">></span>
<span class="n">const</span> <span class="n">callbackDebounceRate</span> <span class="o">=</span> <span class="mi">700</span><span class="p">;</span>
</span></code></pre></div><p data-pid="eF3m5lt7"><b>| 使用母语写注释</b></p><p data-pid="wgWEPOSi">如果的一定要写注释，尽量使用母语作为注释，比如可以使用阿拉伯语，法语等作为注释</p><p data-pid="UK5XE1ER">Good  </p><div class="highlight"><pre><code class="language-text"><span>// Закриваємо модальне віконечко при виникненні помилки
toggleModal(false);
</span></code></pre></div><p data-pid="4v3PEWgJ">Bad   </p><div class="highlight"><pre><code class="language-text"><span>// 隐藏错误弹窗
toggleModal(false);
</span></code></pre></div><p data-pid="JAEDcupS"><b>| 尽可能混合不同的格式</b></p><p data-pid="M6rd4B8C">混合多种不同的格式，比如可以使用多个双引号，打乱读者的阅读逻辑</p><p data-pid="n7vj7Phh">Good   </p><div class="highlight"><pre><code class="language-text"><span>let i = ['tomato', 'onion', 'mushrooms'];

let d = [ "ketchup", "mayonnaise" ];
</span></code></pre></div><p data-pid="NMJbovUQ">Bad   </p><div class="highlight"><pre><code class="language-text"><span>let ingredients = ['tomato', 'onion', 'mushrooms'];

let dressings = ['ketchup', 'mayonnaise'];
</span></code></pre></div><p data-pid="TI5KrJd-"><b>| 尽可能把代码写成一行</b></p><p data-pid="mK1IjvYI">代码有多长写多长，这样能够充分说明你写代码的时候“文思泉涌”</p><p data-pid="ucWWnQPS">Good   </p><div class="highlight"><pre><code class="language-text"><span>document.location.search.replace(/(^\?)/,'').split('&').reduce(function(o,n)&#123;n=n.split('=');o[n[0]]=n[1];return o&#125;,&#123;&#125;)
</span></code></pre></div><p data-pid="xZj91Ssy">Bad   </p><div class="highlight"><pre><code class="language-text"><span>document.location.search
  .replace(/(^\?)/, '')
  .split('&')
  .reduce((searchParams, keyValuePair) => &#123;
    keyValuePair = keyValuePair.split('=');
    searchParams[keyValuePair[0]] = keyValuePair[1];
    return searchParams;
  &#125;,
  &#123;&#125;
)
</span></code></pre></div><p data-pid="GzoO1IwB"><b>| 不要处理错误</b></p><p data-pid="SurZ3VF1">不需要让别人发现代码的错误，只要没有错误，就没有bug。</p><p data-pid="x4gqQo3m">Good   </p><div class="highlight"><pre><code class="language-text"><span>try &#123;
  // 意料之外的情况。
&#125; catch (error) &#123;
  // tss...  
&#125;
</span></code></pre></div><p data-pid="UuEFPOh4">Bad   </p><div class="highlight"><pre><code class="language-text"><span>try &#123;
  // 意料之外的情况。
&#125; catch (error) &#123;
  setErrorMessage(error.message);
  // and/or
  logError(error);
&#125;
</span></code></pre></div><p data-pid="mRMxyssI"><b>| 广泛使用全局变量</b></p><p data-pid="vzOiXQD5">使用全局变量，让你的代码更加适应全球化</p><p data-pid="ul2CkkVm">Good   </p><div class="highlight"><pre><code class="language-text"><span>let x = 5;

function square() &#123;
  x = x ** 2;
&#125;

square(); // 现在x是25
</span></code></pre></div><p data-pid="vAKECttE">Bad   </p><div class="highlight"><pre><code class="language-text"><span>let x = 5;

function square(num) &#123;
  return num ** 2;
&#125;

x = square(x); // 现在x是25
</span></code></pre></div><p data-pid="synCg2n8"><b>| 创建你不会使用的变量</b></p><p data-pid="7DFb7nve">多创建几个变量，以防万一你会使用到它，这样的代码才叫做未雨绸缪</p><p data-pid="tHGSrIr9">Good   </p><div class="highlight"><pre><code class="language-text"><span>function sum(a, b, c) &#123;
  const timeout = 1300;
  const result = a + b;
  return a + b;
&#125;
</span></code></pre></div><p data-pid="PAkUUllJ">Bad   </p><div class="highlight"><pre><code class="language-text"><span>function sum(a, b) &#123;
  return a + b;
&#125;
</span></code></pre></div><p data-pid="iI-ldncS"><b>| 如果语言允许，不要指定类型和/或不执行类型检查。</b></p><p data-pid="0zdIbSFs">如果对自己的代码有信心，就不需要去检查变量的类型，这充分说明了你的胸有成竹。</p><p data-pid="63G1L_Ni">Good   </p><div class="highlight"><pre><code class="language-text"><span>function sum(a, b) &#123;
  return a + b;
&#125;

// 在这里享受没有注释的快乐
const guessWhat = sum([], &#123;&#125;); // -> "[object Object]"
const guessWhatAgain = sum(&#123;&#125;, []); // -> 0
</span></code></pre></div><p data-pid="-UWsTNZD">Bad   </p><div class="highlight"><pre><code class="language-text"><span>function sum(a: number, b: number): ?number &#123;
  // 当我们在JS中不做置换和/或流类型检查时，覆盖这种情况。
  if (typeof a !== 'number' && typeof b !== 'number') &#123;
    return undefined;
  &#125;
  return a + b;
&#125;

// 这个应该在转换/编译期间失败。
const guessWhat = sum([], &#123;&#125;); // -> undefined
</span></code></pre></div><p data-pid="0cV40deS"><b>| 有存在不执行的代码函数</b></p><p data-pid="S5ZXrWdM">多构造不需要执行的函数，者能充分说明你有多个plan b。</p><p data-pid="srRo8y5y">Good   </p><div class="highlight"><pre><code class="language-text"><span>function square(num) &#123;
  if (typeof num === 'undefined') &#123;
    return undefined;
  &#125;
  else &#123;
    return num ** 2;
  &#125;
  return null; // 这就是我的"Plan B".
&#125;
</span></code></pre></div><p data-pid="6RUOGW8k">Bad   </p><div class="highlight"><pre><code class="language-text"><span>function square(num) &#123;
  if (typeof num === 'undefined') &#123;
    return undefined;
  &#125;
  return num ** 2;
&#125;
</span></code></pre></div><p data-pid="_oXeWXfX"><b>| 三角法则</b></p><p data-pid="2BKefuUk">多嵌套条件语句，写起来就很顺手</p><p data-pid="1WPJZupy">Good   </p><div class="highlight"><pre><code class="language-text"><span>function someFunction() &#123;
  if (condition1) &#123;
    if (condition2) &#123;
      asyncFunction(params, (result) => &#123;
        if (result) &#123;
          for (;;) &#123;
            if (condition3) &#123;
            &#125;
          &#125;
        &#125;
      &#125;)
    &#125;
  &#125;
&#125;
</span></code></pre></div><p data-pid="t5wbVvYD">Bad   </p><div class="highlight"><pre><code class="language-text"><span>async function someFunction() &#123;
  if (!condition1 || !condition2) &#123;
    return;
  &#125;
  
  const result = await asyncFunction(params);
  if (!result) &#123;
    return;
  &#125;
  
  for (;;) &#123;
    if (condition3) &#123;
    &#125;
  &#125;
&#125;
</span></code></pre></div><p data-pid="MWwuGN8w"><b>| 混合缩进</b></p><p data-pid="Ok7FrLkp">避免缩进，因为它们会使复杂的代码在编辑器中占用更多的空间。这样代码会变得不简洁</p><p data-pid="r0MbCITx">Good   </p><div class="highlight"><pre><code class="language-text"><span>const fruits = ['apple',
  'orange', 'grape', 'pineapple'];
  const toppings = ['syrup', 'cream', 
                    'jam', 
                    'chocolate'];
const desserts = [];
fruits.forEach(fruit => &#123;
toppings.forEach(topping => &#123;
    desserts.push([
fruit,topping]);
    &#125;);&#125;)
</span></code></pre></div><p data-pid="wYC2x6Ri">Bad   </p><div class="highlight"><pre><code class="language-text"><span>const fruits = ['apple', 'orange', 'grape', 'pineapple'];
const toppings = ['syrup', 'cream', 'jam', 'chocolate'];
const desserts = [];

fruits.forEach(fruit => &#123;
  toppings.forEach(topping => &#123;
    desserts.push([fruit, topping]); 
  &#125;);
&#125;)
</span></code></pre></div><p data-pid="nbo7ABKD"><b>不要锁住你的依赖项</b></p><p data-pid="U6Lo7OoD">频繁更新依赖项，为什么坚持使用过去的版本，让我们使用最先进的库版本。</p><p data-pid="V7VlzxWN">Good  </p><div class="highlight"><pre><code class="language-text"><span>$ ls -la
package.json
</span></code></pre></div><p data-pid="oZQcfsMW">Bad   </p><div class="highlight"><pre><code class="language-text"><span>$ ls -la
package.json
package-lock.json
</span></code></pre></div><p data-pid="kHkfQXZD"><b>| 函数长的比短的好</b></p><p data-pid="0jQpxNRw">代码写得越长，说明你的逻辑思维能力也越厉害。所以不要把程序逻辑分成可读的部分。</p><ul><li data-pid="1-u17gxv">一个文件中10000行代码是OK的。</li><li data-pid="ddxm1ivv">一个函数体有1000行代码是OK的。</li></ul><p data-pid="cyILzYul"><b>| 不要测试你的代码</b></p><p data-pid="2pAqNcNB">测试你的代码是很愚蠢的动作，说明你对自己的代码没有信心</p><p data-pid="6eZhW1H5"><b>| 避免代码风格统一</b></p><p data-pid="0D2UJiEn">编写您想要的代码，风格不一定要统一，特别是在一个团队中有多个开发人员的情况下。这是“自由”的味道。</p><p data-pid="_itvuuQS"><b>| 构建新项目不需要 README 文档</b></p><p data-pid="U9rYkqWA">不需要readme文档，只需要看代码内容就知道功能了。这样会使得项目更加简洁。</p><p data-pid="z7YmBVo2"><b>| 保存不必要的代码</b></p><p data-pid="Xrqqtvdg">不需要的代码，肯定是需要删除的，不然会占空间</p><p><br></p><p data-pid="OZKSrXXb">一夜之间收到这么多赞，受宠若惊。</p><p data-pid="9g3hgGXP">另外我自己开了公众号，更多的精彩内容，可以关注我的公众号：<b>算法一只狗</b></p>  
</div>
            