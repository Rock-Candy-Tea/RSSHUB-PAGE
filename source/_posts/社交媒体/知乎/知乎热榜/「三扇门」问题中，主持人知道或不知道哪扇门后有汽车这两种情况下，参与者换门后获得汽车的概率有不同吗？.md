
---
title: '「三扇门」问题中，主持人知道或不知道哪扇门后有汽车这两种情况下，参与者换门后获得汽车的概率有不同吗？'
categories: 
 - 社交媒体
 - 知乎
 - 知乎热榜
headimg: 'https://www.zhihu.com/equation?tex=i'
author: 知乎
comments: false
date: Fri, 31 Dec 2021 04:49:47 GMT
thumbnail: 'https://www.zhihu.com/equation?tex=i'
---

<div>   
强化不学习的回答<br><br><p data-pid="ZTb4kLK8">我们假设初始情况下车在第 <img src="https://www.zhihu.com/equation?tex=i" alt="i" eeimg="1" referrerpolicy="no-referrer"> 扇门后的概率为 <img src="https://www.zhihu.com/equation?tex=p_i" alt="p_i" eeimg="1" referrerpolicy="no-referrer"> ，则有 <img src="https://www.zhihu.com/equation?tex=p_1%2Bp_2%2Bp_3%3D1" alt="p_1+p_2+p_3=1" eeimg="1" referrerpolicy="no-referrer"> ，记事件 <img src="https://www.zhihu.com/equation?tex=C_i" alt="C_i" eeimg="1" referrerpolicy="no-referrer"> <i>为车在第</i> <img src="https://www.zhihu.com/equation?tex=i" alt="i" eeimg="1" referrerpolicy="no-referrer"> <i>扇门后，事件</i> <img src="https://www.zhihu.com/equation?tex=D_i" alt="D_i" eeimg="1" referrerpolicy="no-referrer"> 为主持人打开第 <img src="https://www.zhihu.com/equation?tex=i" alt="i" eeimg="1" referrerpolicy="no-referrer"> 扇门，事件 <img src="https://www.zhihu.com/equation?tex=++++O_i" alt="    O_i" eeimg="1" referrerpolicy="no-referrer"> 为参与者首次选择第 <img src="https://www.zhihu.com/equation?tex=i" alt="i" eeimg="1" referrerpolicy="no-referrer"> 扇门，事件 <img src="https://www.zhihu.com/equation?tex=W" alt="W" eeimg="1" referrerpolicy="no-referrer"> 为更换门后赢得汽车。</p><p data-pid="_jViJ-BQ">如果主持人知道汽车在哪扇门后:<img src="https://www.zhihu.com/equation?tex=%5Cbegin%7Baligned%7D+%26P%28O_1%2CD_2%2C%5Cbar%7BC_2%7D%7CC_1%29+%3D+P%28O_1%2CD_2%7CC_1%29+%3D+P%28D_2%7CO_1%2CC_1%29P%28O_1%7CC_1%29%3D%5Cfrac%7B1%7D%7B2%7D%5Ccdot+%5Cfrac%7B1%7D%7B3%7D%3D%5Cfrac%7B1%7D%7B6%7D%5C%5C+%26P%28O_1%2CD_2%2C%5Cbar%7BC_2%7D%7CC_2%29+%3D+0%5C%5C+%26P%28O_1%2CD_2%2C%5Cbar%7BC_2%7D%7CC_3%29+%3D+P%28O_1%2CD_2%7CC_3%29+%3D+P%28D_2%7CO_1%2CC_3%29P%28O_1%7CC_3%29%3D1%5Ccdot+%5Cfrac%7B1%7D%7B3%7D%3D%5Cfrac%7B1%7D%7B3%7D+%5Cend%7Baligned%7D" alt="\begin&#123;aligned&#125; &P(O_1,D_2,\bar&#123;C_2&#125;|C_1) = P(O_1,D_2|C_1) = P(D_2|O_1,C_1)P(O_1|C_1)=\frac&#123;1&#125;&#123;2&#125;\cdot \frac&#123;1&#125;&#123;3&#125;=\frac&#123;1&#125;&#123;6&#125;\\ &P(O_1,D_2,\bar&#123;C_2&#125;|C_2) = 0\\ &P(O_1,D_2,\bar&#123;C_2&#125;|C_3) = P(O_1,D_2|C_3) = P(D_2|O_1,C_3)P(O_1|C_3)=1\cdot \frac&#123;1&#125;&#123;3&#125;=\frac&#123;1&#125;&#123;3&#125; \end&#123;aligned&#125;" eeimg="1" referrerpolicy="no-referrer"> </p><p data-pid="T9vw8z5c">根据全概率公式 ：</p><p data-pid="B61yU5La"><img src="https://www.zhihu.com/equation?tex=%5Cbegin%7Baligned%7D+P%28W%7CO_1%2CD_2%2C%5Cbar%7BC_2%7D%29%3D%26P%28W%7CC_1%2CO_1%2CD_2%2C%5Cbar%7BC_2%7D%29P%28C_1%7CO_1%2CD_2%2C%5Cbar%7BC_2%7D%29%2BP%28W%7CC_2%2CO_1%2CD_2%2C%5Cbar%7BC_2%7D%29P%28C_2%7CO_1%2CD_2%2C%5Cbar%7BC_2%7D%29%2BP%28W%7CC_3%2CO_1%2CD_2%2C%5Cbar%7BC_2%7D%29P%28C_3%7CO_1%2CD_2%2C%5Cbar%7BC_2%7D%29%5C%5C+%3D%260%2B0%2B1%5Ccdot+%5Cfrac%7BP%28O_1%2CD_2%2C%5Cbar%7BC_2%7D%7CC_3%29P%28C_3%29%7D%7BP%28O_1%2CD_2%2C%5Cbar%7BC_2%7D%29%7D%5C%5C+%3D%26%5Cfrac%7BP%28O_1%2CD_2%2C%5Cbar%7BC_2%7D%7CC_3%29P%28C_3%29%7D%7BP%28O_1%2CD_2%2C%5Cbar%7BC_2%7D%7CC_1%29P%28C_1%29%2BP%28O_1%2CD_2%2C%5Cbar%7BC_2%7D%7CC_2%29P%28C_2%29%2BP%28O_1%2CD_2%2C%5Cbar%7BC_2%7D%7CC_3%29P%28C_3%29%7D%5C%5C+%3D%26%5Cfrac%7B%5Cfrac%7B1%7D%7B3%7D+%5Ccdot+p_3%7D%7B%5Cfrac%7B1%7D%7B6%7Dp_1%2B0%2B%5Cfrac%7B1%7D%7B3%7D+%5Ccdot+p_3%7D+%3D+%5Cfrac%7B2p_3%7D%7Bp_1%2B2p_3%7D+%5Cend%7Baligned%7D" alt="\begin&#123;aligned&#125; P(W|O_1,D_2,\bar&#123;C_2&#125;)=&P(W|C_1,O_1,D_2,\bar&#123;C_2&#125;)P(C_1|O_1,D_2,\bar&#123;C_2&#125;)+P(W|C_2,O_1,D_2,\bar&#123;C_2&#125;)P(C_2|O_1,D_2,\bar&#123;C_2&#125;)+P(W|C_3,O_1,D_2,\bar&#123;C_2&#125;)P(C_3|O_1,D_2,\bar&#123;C_2&#125;)\\ =&0+0+1\cdot \frac&#123;P(O_1,D_2,\bar&#123;C_2&#125;|C_3)P(C_3)&#125;&#123;P(O_1,D_2,\bar&#123;C_2&#125;)&#125;\\ =&\frac&#123;P(O_1,D_2,\bar&#123;C_2&#125;|C_3)P(C_3)&#125;&#123;P(O_1,D_2,\bar&#123;C_2&#125;|C_1)P(C_1)+P(O_1,D_2,\bar&#123;C_2&#125;|C_2)P(C_2)+P(O_1,D_2,\bar&#123;C_2&#125;|C_3)P(C_3)&#125;\\ =&\frac&#123;\frac&#123;1&#125;&#123;3&#125; \cdot p_3&#125;&#123;\frac&#123;1&#125;&#123;6&#125;p_1+0+\frac&#123;1&#125;&#123;3&#125; \cdot p_3&#125; = \frac&#123;2p_3&#125;&#123;p_1+2p_3&#125; \end&#123;aligned&#125;" eeimg="1" referrerpolicy="no-referrer"></p><p data-pid="7O1RX0Og">如果主持人不知道汽车在哪扇门后:</p><p data-pid="UZIZt6ho"><img src="https://www.zhihu.com/equation?tex=%5Cbegin%7Baligned%7D+%26P%28O_1%2CD_2%2C%5Cbar%7BC_2%7D%7CC_1%29+%3D+P%28O_1%2CD_2%7CC_1%29+%3D+P%28D_2%7CO_1%2CC_1%29P%28O_1%7CC_1%29%3D%5Cfrac%7B1%7D%7B2%7D%5Ccdot+%5Cfrac%7B1%7D%7B3%7D%3D%5Cfrac%7B1%7D%7B6%7D%5C%5C+%26P%28O_1%2CD_2%2C%5Cbar%7BC_2%7D%7CC_2%29+%3D+0%5C%5C+%26P%28O_1%2CD_2%2C%5Cbar%7BC_2%7D%7CC_3%29+%3D+P%28O_1%2CD_2%7CC_3%29+%3D+P%28D_2%7CO_1%2CC_3%29P%28O_1%7CC_3%29%3D%5Cfrac%7B1%7D%7B2%7D%5Ccdot+%5Cfrac%7B1%7D%7B3%7D%3D%5Cfrac%7B1%7D%7B6%7D+%5Cend%7Baligned%7D" alt="\begin&#123;aligned&#125; &P(O_1,D_2,\bar&#123;C_2&#125;|C_1) = P(O_1,D_2|C_1) = P(D_2|O_1,C_1)P(O_1|C_1)=\frac&#123;1&#125;&#123;2&#125;\cdot \frac&#123;1&#125;&#123;3&#125;=\frac&#123;1&#125;&#123;6&#125;\\ &P(O_1,D_2,\bar&#123;C_2&#125;|C_2) = 0\\ &P(O_1,D_2,\bar&#123;C_2&#125;|C_3) = P(O_1,D_2|C_3) = P(D_2|O_1,C_3)P(O_1|C_3)=\frac&#123;1&#125;&#123;2&#125;\cdot \frac&#123;1&#125;&#123;3&#125;=\frac&#123;1&#125;&#123;6&#125; \end&#123;aligned&#125;" eeimg="1" referrerpolicy="no-referrer"> </p><p data-pid="1ALidx4n">根据全概率公式 ：</p><p data-pid="Mvx0jEhc"><img src="https://www.zhihu.com/equation?tex=%5Cbegin%7Baligned%7D+P%28W%7CO_1%2CD_2%2C%5Cbar%7BC_2%7D%29%3D%26P%28W%7CC_1%2CO_1%2CD_2%2C%5Cbar%7BC_2%7D%29P%28C_1%7CO_1%2CD_2%2C%5Cbar%7BC_2%7D%29%2BP%28W%7CC_2%2CO_1%2CD_2%2C%5Cbar%7BC_2%7D%29P%28C_2%7CO_1%2CD_2%2C%5Cbar%7BC_2%7D%29%2BP%28W%7CC_3%2CO_1%2CD_2%2C%5Cbar%7BC_2%7D%29P%28C_3%7CO_1%2CD_2%2C%5Cbar%7BC_2%7D%29%5C%5C+%3D%260%2B0%2B1%5Ccdot+%5Cfrac%7BP%28O_1%2CD_2%7CC_3%29P%28C_3%29%7D%7BP%28O_1%2CD_2%2C%5Cbar%7BC_2%7D%29%7D%5C%5C+%3D%26%5Cfrac%7BP%28O_1%2CD_2%2C%5Cbar%7BC_2%7D%7CC_3%29P%28C_3%29%7D%7BP%28O_1%2CD_2%2C%5Cbar%7BC_2%7D%7CC_1%29P%28C_1%29%2BP%28O_1%2CD_2%2C%5Cbar%7BC_2%7D%7CC_2%29P%28C_2%29%2BP%28O_1%2CD_2%7CC_3%2C%5Cbar%7BC_2%7D%29P%28C_3%29%7D%5C%5C+%3D%26%5Cfrac%7B%5Cfrac%7B1%7D%7B6%7D+%5Ccdot+p_3%7D%7B%5Cfrac%7B1%7D%7B6%7Dp_1%2B0%2B%5Cfrac%7B1%7D%7B6%7D+%5Ccdot+p_3%7D+%3D+%5Cfrac%7Bp_3%7D%7Bp_1%2Bp_3%7D+%5Cend%7Baligned%7D" alt="\begin&#123;aligned&#125; P(W|O_1,D_2,\bar&#123;C_2&#125;)=&P(W|C_1,O_1,D_2,\bar&#123;C_2&#125;)P(C_1|O_1,D_2,\bar&#123;C_2&#125;)+P(W|C_2,O_1,D_2,\bar&#123;C_2&#125;)P(C_2|O_1,D_2,\bar&#123;C_2&#125;)+P(W|C_3,O_1,D_2,\bar&#123;C_2&#125;)P(C_3|O_1,D_2,\bar&#123;C_2&#125;)\\ =&0+0+1\cdot \frac&#123;P(O_1,D_2|C_3)P(C_3)&#125;&#123;P(O_1,D_2,\bar&#123;C_2&#125;)&#125;\\ =&\frac&#123;P(O_1,D_2,\bar&#123;C_2&#125;|C_3)P(C_3)&#125;&#123;P(O_1,D_2,\bar&#123;C_2&#125;|C_1)P(C_1)+P(O_1,D_2,\bar&#123;C_2&#125;|C_2)P(C_2)+P(O_1,D_2|C_3,\bar&#123;C_2&#125;)P(C_3)&#125;\\ =&\frac&#123;\frac&#123;1&#125;&#123;6&#125; \cdot p_3&#125;&#123;\frac&#123;1&#125;&#123;6&#125;p_1+0+\frac&#123;1&#125;&#123;6&#125; \cdot p_3&#125; = \frac&#123;p_3&#125;&#123;p_1+p_3&#125; \end&#123;aligned&#125;" eeimg="1" referrerpolicy="no-referrer"> </p><p data-pid="sPn9B0s9">假设 <img src="https://www.zhihu.com/equation?tex=p_1%3Dp_2%3Dp_3%3D%5Cfrac%7B1%7D%7B3%7D" alt="p_1=p_2=p_3=\frac&#123;1&#125;&#123;3&#125;" eeimg="1" referrerpolicy="no-referrer"> ，则主持人知道车在哪扇门后，更换门赢得汽车的概率为 <img src="https://www.zhihu.com/equation?tex=%5Cfrac%7B2%7D%7B3%7D" alt="\frac&#123;2&#125;&#123;3&#125;" eeimg="1" referrerpolicy="no-referrer"> ，主持人不知道车在哪扇门后更换门赢得汽车的概率为 <img src="https://www.zhihu.com/equation?tex=%5Cfrac%7B1%7D%7B2%7D" alt="\frac&#123;1&#125;&#123;2&#125;" eeimg="1" referrerpolicy="no-referrer"> ，故主持人知道车在哪扇门后应该更换选择，主持人不知道车在哪扇门后更换与不更换获得车的概率相同。</p><p data-pid="q1Kgme_v">同时写了个模拟这个场景的代码，如下：</p><div class="highlight"><pre><code class="language-python3"><span><span class="kn">import</span> <span class="nn">random</span>

<span class="k">class</span> <span class="nc">Doors</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">probabilities</span> <span class="o">=</span> <span class="s1">'default'</span><span class="p">):</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">num</span> <span class="o">=</span> <span class="n">num</span>
        <span class="k">if</span> <span class="n">probabilities</span> <span class="o">==</span> <span class="s1">'default'</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">probabilities</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="n">num</span><span class="p">]</span> <span class="o">*</span> <span class="n">num</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">probabilities</span><span class="p">)</span><span class="o">!=</span><span class="n">num</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">probabilities</span> <span class="o">=</span> <span class="p">[</span><span class="n">prob</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span><span class="n">probabilities</span><span class="p">)</span> <span class="k">for</span> <span class="n">prob</span> <span class="ow">in</span> <span class="n">probabilities</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">door_probabilities</span> <span class="o">=</span> <span class="p">&#123;&#125;</span>
        <span class="n">now</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">index</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">probability</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">probabilities</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">door_probabilities</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">now</span>
            <span class="n">now</span> <span class="o">=</span> <span class="n">now</span> <span class="o">+</span> <span class="n">probability</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">door_probabilities</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="c1">#randomly decide where the car will be</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">num</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">>=</span><span class="bp">self</span><span class="o">.</span><span class="n">door_probabilities</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">and</span> <span class="n">p</span><span class="o"><</span><span class="bp">self</span><span class="o">.</span><span class="n">door_probabilities</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">car_door</span> <span class="o">=</span> <span class="n">i</span>


<span class="k">class</span> <span class="nc">Player</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">doors</span><span class="p">,</span> <span class="n">chosen_door</span> <span class="o">=</span> <span class="s1">'default'</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">chosen_door</span> <span class="o">==</span> <span class="s1">'default'</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">chosen</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">doors</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">chosen</span> <span class="o">=</span> <span class="n">chosen_door</span>

    <span class="k">def</span> <span class="nf">switch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">doors</span><span class="p">,</span> <span class="n">monty</span><span class="p">,</span> <span class="n">switch_door</span> <span class="o">=</span> <span class="s1">'default'</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">switch_door</span> <span class="o">==</span> <span class="s1">'default'</span> <span class="ow">or</span> <span class="n">switch_door</span> <span class="ow">in</span> <span class="n">monty</span><span class="o">.</span><span class="n">opend_door</span> <span class="ow">or</span> <span class="n">switch_door</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">chosen</span><span class="p">:</span>
            <span class="n">switch_door</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">while</span> <span class="n">switch_door</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">temp</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">doors</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">temp</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chosen</span> <span class="ow">and</span> <span class="n">temp</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">monty</span><span class="o">.</span><span class="n">opened_door</span><span class="p">:</span>
                    <span class="n">switch_door</span> <span class="o">=</span> <span class="n">temp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chosen</span> <span class="o">=</span> <span class="n">switch_door</span>

    <span class="k">def</span> <span class="nf">notswitch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">get_ans</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">doors</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chosen</span> <span class="o">==</span> <span class="n">doors</span><span class="o">.</span><span class="n">car_door</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>


<span class="k">class</span> <span class="nc">Monty</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">doors</span><span class="p">,</span> <span class="n">player</span><span class="p">,</span> <span class="n">knowthecar</span> <span class="p">,</span> <span class="n">opennum</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">opened_door</span> <span class="o">=</span> <span class="p">[]):</span>
        <span class="k">if</span> <span class="n">opened_door</span> <span class="o">==</span> <span class="p">[]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">opened_door</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">opened_door</span><span class="p">)</span> <span class="o"><</span> <span class="n">opennum</span><span class="p">:</span>
                <span class="n">p</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">doors</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>
                <span class="k">if</span> <span class="p">((</span><span class="n">p</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">opened_door</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">p</span> <span class="o">!=</span> <span class="n">player</span><span class="o">.</span><span class="n">chosen</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">knowthecar</span> <span class="ow">and</span> <span class="p">(</span><span class="n">p</span> <span class="o">!=</span> <span class="n">doors</span><span class="o">.</span><span class="n">car_door</span><span class="p">)):</span><span class="c1">#if know where the car is, monty will not open the door where the car is </span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">opened_door</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="ow">not</span> <span class="n">knowthecar</span><span class="p">:</span><span class="c1">#if not know where the car is, monty may open the door where the car is </span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">opened_door</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
                            
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">opened_door</span> <span class="o">=</span> <span class="n">opened_door</span>

    

        
<span class="k">def</span> <span class="nf">Simulate</span><span class="p">(</span><span class="n">simulationstime</span><span class="p">):</span>
    <span class="n">unswitch_success_know</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">switch_success_know</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">unswitch_success_unknow</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">switch_success_unknow</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">simulationstime</span><span class="p">):</span>
        <span class="n">doors</span> <span class="o">=</span> <span class="n">Doors</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">player</span> <span class="o">=</span><span class="n">Player</span><span class="p">(</span><span class="n">doors</span><span class="p">)</span>
        <span class="n">monty</span> <span class="o">=</span> <span class="n">Monty</span><span class="p">(</span><span class="n">doors</span><span class="p">,</span> <span class="n">player</span><span class="p">,</span> <span class="n">knowthecar</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">opennum</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">player</span><span class="o">.</span><span class="n">notswitch</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">player</span><span class="o">.</span><span class="n">get_ans</span><span class="p">(</span><span class="n">doors</span><span class="p">)</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">unswitch_success_know</span> <span class="o">+=</span> <span class="mi">1</span>
    
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">simulationstime</span><span class="p">):</span>
        <span class="n">doors</span> <span class="o">=</span> <span class="n">Doors</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">player</span> <span class="o">=</span><span class="n">Player</span><span class="p">(</span><span class="n">doors</span><span class="p">)</span>
        <span class="n">monty</span> <span class="o">=</span> <span class="n">Monty</span><span class="p">(</span><span class="n">doors</span><span class="p">,</span> <span class="n">player</span><span class="p">,</span> <span class="n">knowthecar</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">opennum</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">player</span><span class="o">.</span><span class="n">switch</span><span class="p">(</span><span class="n">doors</span><span class="p">,</span> <span class="n">monty</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">player</span><span class="o">.</span><span class="n">get_ans</span><span class="p">(</span><span class="n">doors</span><span class="p">)</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">switch_success_know</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="n">valid_open1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">simulationstime</span><span class="p">):</span>
        <span class="n">doors</span> <span class="o">=</span> <span class="n">Doors</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">player</span> <span class="o">=</span><span class="n">Player</span><span class="p">(</span><span class="n">doors</span><span class="p">)</span>
        <span class="n">monty</span> <span class="o">=</span> <span class="n">Monty</span><span class="p">(</span><span class="n">doors</span><span class="p">,</span> <span class="n">player</span><span class="p">,</span> <span class="n">knowthecar</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">opennum</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">doors</span><span class="o">.</span><span class="n">car_door</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">monty</span><span class="o">.</span><span class="n">opened_door</span><span class="p">:</span><span class="c1">#since monty luckily opens the door without car</span>
            <span class="n">valid_open1</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">player</span><span class="o">.</span><span class="n">notswitch</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">player</span><span class="o">.</span><span class="n">get_ans</span><span class="p">(</span><span class="n">doors</span><span class="p">)</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">unswitch_success_unknow</span> <span class="o">+=</span> <span class="mi">1</span>
    
    <span class="n">valid_open2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">simulationstime</span><span class="p">):</span>
        <span class="n">doors</span> <span class="o">=</span> <span class="n">Doors</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">player</span> <span class="o">=</span><span class="n">Player</span><span class="p">(</span><span class="n">doors</span><span class="p">)</span>
        <span class="n">monty</span> <span class="o">=</span> <span class="n">Monty</span><span class="p">(</span><span class="n">doors</span><span class="p">,</span> <span class="n">player</span><span class="p">,</span> <span class="n">knowthecar</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">opennum</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">doors</span><span class="o">.</span><span class="n">car_door</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">monty</span><span class="o">.</span><span class="n">opened_door</span><span class="p">:</span><span class="c1">#since monty luckily opens the door without car</span>
            <span class="n">player</span><span class="o">.</span><span class="n">switch</span><span class="p">(</span><span class="n">doors</span><span class="p">,</span> <span class="n">monty</span><span class="p">)</span>
            <span class="n">valid_open2</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">player</span><span class="o">.</span><span class="n">get_ans</span><span class="p">(</span><span class="n">doors</span><span class="p">)</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">switch_success_unknow</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">"Probability of Win if Player Don't Switch(Monty Konws where the Car is): "</span><span class="p">,</span> <span class="n">unswitch_success_know</span><span class="o">/</span><span class="n">simulationstime</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Theory probability: "</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Probability of Win if Player Switch(Monty Konws where the Car is): "</span><span class="p">,</span> <span class="n">switch_success_know</span><span class="o">/</span><span class="n">simulationstime</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Theory probability: "</span><span class="p">,</span> <span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Probability of Win if Player Don't Switch(Monty doesn't Konw where the Car is): "</span><span class="p">,</span> <span class="n">unswitch_success_unknow</span><span class="o">/</span><span class="n">valid_open1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Theory probability: "</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Probability of Win if Player Switch(Monty doesn't Konw where the Car is): "</span><span class="p">,</span> <span class="n">switch_success_unknow</span><span class="o">/</span><span class="n">valid_open2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Theory probability: "</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
    <span class="n">Simulate</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
</span></code></pre></div><p data-pid="zo6rsMK3">10000次模拟的结果如下：</p><div class="highlight"><pre><code class="language-text"><span>Probability of Win if Player Don't Switch(Monty Konws where the Car is):  0.3336
Theory probability:  0.3333333333333333
Probability of Win if Player Switch(Monty Konws where the Car is):  0.6567
Theory probability:  0.6666666666666666
Probability of Win if Player Don't Switch(Monty doesn't Konw where the Car is):  0.5029748283752861
Theory probability:  0.5
Probability of Win if Player Switch(Monty doesn't Konw where the Car is):  0.49295558958652375
Theory probability:  0.5
</span></code></pre></div><p></p>  
</div>
            