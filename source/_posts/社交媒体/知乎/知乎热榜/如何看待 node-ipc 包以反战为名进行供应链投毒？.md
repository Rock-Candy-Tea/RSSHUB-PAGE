
---
title: '如何看待 node-ipc 包以反战为名进行供应链投毒？'
categories: 
 - 社交媒体
 - 知乎
 - 知乎热榜
headimg: 'https://pic3.zhimg.com/v2-b9ea6ae3211a2b0f052b9dc8e6c69f19_1440w.jpg?source=b1748391'
author: 知乎
comments: false
date: Wed, 16 Mar 2022 05:35:13 GMT
thumbnail: 'https://pic3.zhimg.com/v2-b9ea6ae3211a2b0f052b9dc8e6c69f19_1440w.jpg?source=b1748391'
---

<div>   
贺师俊的回答<br><br><p data-pid="7syTMaKE">如果说，往所有依赖了这个包的应用的最终用户的桌面和OneDrive目录里写个文本文件，是激进的反战宣传；那么这个comment <a href="http://link.zhihu.com/?target=https%3A//github.com/RIAEvangelist/node-ipc/issues/233%23issuecomment-1068182278" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">github.com/RIAEvangelis</span><span class="invisible">t/node-ipc/issues/233#issuecomment-1068182278</span><span class="ellipsis"></span></a> 所发现的，就是彻底的恶意攻击了。</p><p data-pid="KuXSDmOu">原始评论已经被该repo的owner删除，但我恰好做了截屏：</p><figure data-size="normal"><img src="https://pic3.zhimg.com/v2-b9ea6ae3211a2b0f052b9dc8e6c69f19_1440w.jpg?source=b1748391" data-caption data-size="normal" data-rawwidth="929" data-rawheight="609" data-default-watermark-src="https://pic1.zhimg.com/v2-e9c6708d0ac725ae6a45a68e696920a5_720w.jpg?source=b1748391" class="origin_image zh-lightbox-thumb" data-original="https://pic3.zhimg.com/v2-b9ea6ae3211a2b0f052b9dc8e6c69f19_r.jpg?source=b1748391" referrerpolicy="no-referrer"></figure><figure data-size="normal"><img src="https://pic1.zhimg.com/v2-b56b82ed4ebd0b5f99d727c6768a7f15_1440w.jpg?source=b1748391" data-caption data-size="normal" data-rawwidth="864" data-rawheight="617" data-default-watermark-src="https://pic2.zhimg.com/v2-529dc19c306cfa1e57af40345509875b_720w.jpg?source=b1748391" class="origin_image zh-lightbox-thumb" data-original="https://pic1.zhimg.com/v2-b56b82ed4ebd0b5f99d727c6768a7f15_r.jpg?source=b1748391" referrerpolicy="no-referrer"></figure><p data-pid="xYHdMwOG">攻击源码在 <a href="http://link.zhihu.com/?target=https%3A//github.com/RIAEvangelist/node-ipc/blob/847047cf7f81ab08352038b2204f0e7633449580/dao/ssl-geospec.js" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">github.com/RIAEvangelis</span><span class="invisible">t/node-ipc/blob/847047cf7f81ab08352038b2204f0e7633449580/dao/ssl-geospec.js</span><span class="ellipsis"></span></a> 。源码经过压缩，并简单地将一些关键字符串进行了base64编码。其行为是，利用第三方服务探测用户IP，针对俄罗斯和白俄罗斯IP，会尝试覆盖当前目录、父目录和根目录的所有文件。</p><p data-pid="Q2rsfi7F">也许是「良知未泯」，或者意识到这种行为已经是严重犯罪，又也许只是「误提交」，该库的owner随后删除了这段的攻击代码（<a href="http://link.zhihu.com/?target=https%3A//github.com/RIAEvangelist/node-ipc/commit/cc282c2b06c98eb0a01543639ac8d117476dc4c8" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">github.com/RIAEvangelis</span><span class="invisible">t/node-ipc/commit/cc282c2b06c98eb0a01543639ac8d117476dc4c8</span><span class="ellipsis"></span></a>），半天后改为了现在这种更为「和平」的往桌面上写个反战宣传的做法。</p><p data-pid="a7bIN7IN">但这仍然是一种恶劣的供应链投毒。这里，具体的动机不重要，无论其动机多么良好（更不用说，很多人可能并不同意其政治倾向和道德立场），这样的行为都严重破坏了开源生态中的信任。</p><p data-pid="Vu3n84Sj">这一事件也再次显示了JS/node/npm生态的脆弱，要解决或缓解这一问题，应该考虑在JS语言和JS运行时层面引入一些机制，比如说针对包级别的权限管理（deno那样粗粒度的应用级别的权限管理并不足以解决供应链投毒问题），在更多的API中引入类似TrustedType的机制等。而这显然已经超出了库、框架或工程管控的层面。这也是为什么我一直说国内头部大厂应该要投入资源去参与语言标准、引擎和平台实现。</p><p data-pid="xEEOBPko">【更新】进行供应链投毒的<a href="http://link.zhihu.com/?target=https%3A//github.com/RIAEvangelist" class=" wrap external" target="_blank" rel="nofollow noreferrer">Brandon Nozaki Miller</a>在删除了其repo下揭露其潜在的恶意代码的评论后，在vue-cli的相关issue <a href="http://link.zhihu.com/?target=https%3A//github.com/vuejs/vue-cli/issues/7054" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">github.com/vuejs/vue-cl</span><span class="invisible">i/issues/7054</span><span class="ellipsis"></span></a> 下还狡辩说，这段代码并不会真正工作，然而我的实测表明该段代码确实会覆盖用户文件，然后他又说（用来检测IP位置的服务的）API key是失效的，但被最早发现该代码的用户<a href="http://link.zhihu.com/?target=https%3A//github.com/MidSpike" class=" wrap external" target="_blank" rel="nofollow noreferrer">MidSpike</a>揭穿——当时该API key是有效的，所以应该是Brandon Nozaki Miller在被发现后reset了API key。</p><figure data-size="normal"><img src="https://pica.zhimg.com/v2-175e4f78ffa355d808eba0a960554532_1440w.jpg?source=b1748391" data-caption data-size="normal" data-rawwidth="967" data-rawheight="694" data-default-watermark-src="https://pic2.zhimg.com/v2-f42171e958663ff2a3fd5b75fef9c622_720w.jpg?source=b1748391" class="origin_image zh-lightbox-thumb" data-original="https://pica.zhimg.com/v2-175e4f78ffa355d808eba0a960554532_r.jpg?source=b1748391" referrerpolicy="no-referrer"></figure><figure data-size="normal"><img src="https://pica.zhimg.com/v2-dd175758b68f952423df9900197c6614_1440w.jpg?source=b1748391" data-caption data-size="normal" data-rawwidth="961" data-rawheight="682" data-default-watermark-src="https://pic2.zhimg.com/v2-c1c8e2177a5a2f409df743589bc4ffca_720w.jpg?source=b1748391" class="origin_image zh-lightbox-thumb" data-original="https://pica.zhimg.com/v2-dd175758b68f952423df9900197c6614_r.jpg?source=b1748391" referrerpolicy="no-referrer"></figure><p data-pid="N1Uw4tzA">如果说一开始他的行为勉强有借口，在被发现潜在的恶意行为之后，不仅不反省，还通过reset API key、删除评论等举动妄图隐瞒自己的不当行为，至此，该人的信用可谓完全破产。</p><p data-pid="BmP3-wbg">我认为这样的人是开源社区的害群之马，应该果断地全面封杀。</p><p data-pid="5TvZ6VjL">根据 <a class="member_mention" href="http://www.zhihu.com/people/9d9f94035b55b89236c232b15c7d9190" data-hash="9d9f94035b55b89236c232b15c7d9190" data-hovercard="p$b$9d9f94035b55b89236c232b15c7d9190">@天猪</a> 的评论，npmmirror（原taobao npm镜像）已经将node-ipc包列入黑名单，不会同步任何新版本。<b>进一步的，我强烈建议 npmmirror 将该人标记为不受信任的用户，将所有由其发布的包都进行锁定。我同时强烈建议所有开发者和所有开源项目行动起来，检查该人发布的所有库，如在项目中有引用，应立即锁定版本并开始寻找替代品。同时如果有其他项目授予了该人提交权限，应立即收回。</b></p><p data-pid="Ud6zN39k">以上。</p><p></p>  
</div>
            