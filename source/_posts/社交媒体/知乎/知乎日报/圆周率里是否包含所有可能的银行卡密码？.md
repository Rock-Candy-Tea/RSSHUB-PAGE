
---
title: '圆周率里是否包含所有可能的银行卡密码？'
categories: 
 - 社交媒体
 - 知乎
 - 知乎日报
headimg: 'https://pic3.zhimg.com/v2-8bec9d5bd4a7b338b2b91d0ce1e70ee3_l.jpg?source=8673f162'
author: 知乎
comments: false
date: 2021-07-10 08:07:52
thumbnail: 'https://pic3.zhimg.com/v2-8bec9d5bd4a7b338b2b91d0ce1e70ee3_l.jpg?source=8673f162'
---

<div>   
<div class="main-wrap content-wrap">
<div class="headline">

<div class="img-place-holder">



</div>

<div class="content-inner">




<div class="question">


<div class="answer">

<strong>
<img class="avatar" src="https://pic3.zhimg.com/v2-8bec9d5bd4a7b338b2b91d0ce1e70ee3_l.jpg?source=8673f162" referrerpolicy="no-referrer">
<span class="author">酱紫君，</span><span class="bio">QQ群1014125</span>
<a href="https://www.zhihu.com/question/23419402/answer/329851843" class="originUrl" hidden>查看知乎原文</a>
</strong>

<div class="content">
<p>电话号, 生日, QQ 号可能运算量比较大, 但是 6 位的银行卡密码还是没问题的</p>
<p>题目本身和 Pi 是不是正规数没关系</p>
<p>但假如承认 Pi 是个正规数会有帮助</p>
<p>这相当于问一个产生六位随机数的发生器多久能生成所有六位数?</p>
<p>这是 <a class="internal" href="https://www.zhihu.com/people/GalAster/answers/by_votes">赠券收集问题</a> , 那么期望就是</p>
<p><img class="content-image" src="https://www.zhihu.com/equation?tex=10%5E6+H%2810%5E6%29%5Capprox+14%5C+392%5C+726" alt referrerpolicy="no-referrer"></p>
<p>, H 是调和级数</p>
<p>所以我算这么多大概就能搜索到所有的可能</p>
<figure><img class="content-image" src="https://pic1.zhimg.com/v2-bfc47442049c3b79c7d091c76f4fd43f_720w.jpg?source=8673f162" alt referrerpolicy="no-referrer"></figure><p>嗯, 真的把十万个个全部搜出来了</p>
<div class="highlight">
<pre><code class="language-text">max=10.^6HarmonicNumber[10.^6]//IntegerPart
dts=First@RealDigits[Pi,10,max,-1];//TT
all=DeleteDuplicates@Partition[dts,6,1];//TT
all//Length
</code></pre>
</div>
<p>加起来也就一分钟就不另外放下载了, 自己跑一遍就行</p>
<hr><p>当然你说要是没搜到怎么办?</p>
<p>这倒是有可能的,但是还是根据赠券收集原理</p>
<p><img class="content-image" src="https://www.zhihu.com/equation?tex=p_c%28n%29+%3D+%5Cfrac%7Bc%21%7D%7Bc%5En%7DS_2%28n+-1%2Cc-1%29" alt referrerpolicy="no-referrer"></p>
<p>搞定的概率只有:</p>
<p><img class="content-image" src="https://www.zhihu.com/equation?tex=57%5C%25" alt referrerpolicy="no-referrer"></p>
<figure><img class="content-image" src="https://pic2.zhimg.com/v2-47f46a668bbfcdc96112e693d992f801_720w.jpg?source=8673f162" alt referrerpolicy="no-referrer"><figcaption>我在想这个数好眼熟....</figcaption></figure><p>[^1 更新]: 这个数是</p>
<p><img class="content-image" src="https://www.zhihu.com/equation?tex=e%5E%7B-e%5E%7B-%5Cgamma+%7D%7D%5Capprox0.570376" alt referrerpolicy="no-referrer"></p>
<p>如果要以一半概率找到生日的话需要计算 3.51 亿位, 如果要找手机号要计算 4606 亿位</p>
<figure><img class="content-image" src="https://pic3.zhimg.com/v2-a27f6715b5f9d836db07e14ee61a3db0_720w.jpg?source=8673f162" alt referrerpolicy="no-referrer"></figure><p>查了下现在的记录是 22,459,157,718,361(224591 亿位), 那么找到手机号的几率>99.9%</p>
<p><a class=" wrap external" href="http://link.zhihu.com/?target=http%3A//www.numberworld.org/digits/Pi/%23Download" target="_blank" rel="nofollow noreferrer">numberworld/Pi/#Download</a></p>
<p>另外很多网站都提供这个服务</p>
<figure><img class="content-image" src="https://pic3.zhimg.com/v2-11f6852da3c29b423963d37324f1de30_720w.jpg?source=8673f162" alt referrerpolicy="no-referrer"></figure><hr><p>当然一个非超越无理数以概率 1 是个正规数, 那么同样适用这样的推理</p>
<blockquote>我的生日是你的生日开平方后 351084058 位开始 8 个数字<br>我的手机是你的手机号开立方后 460653489114 位开始 11 个数字<br></blockquote>
<hr><p>算法竞赛时间: 给出一段代码尽快的算出 6 位数的映射表, 语言不限</p>
<p><a class=" wrap external" href="http://link.zhihu.com/?target=https%3A//github.com/GalAster/Deus/issues/3" target="_blank" rel="nofollow noreferrer">计算π并返回一个列表, 其中包含一串数字的首次出现位置 · Issue #3 · GalAster/Deus</a></p>
<hr><p>[^1 更新]57% 怎么推导出来呢?</p>
<p><img class="content-image" src="https://www.zhihu.com/equation?tex=%5Csum_%7Bn%3D0%7D%5E%7BcH%28c%29%7D+%5Cfrac%7Bc%21%7D%7Bc%5En%7DS_2%28n+-1%2Cc-1%29%5Capprox+57%5C%25" alt referrerpolicy="no-referrer"></p>
<p>但是有个问题, 斯特林数有精细结构没法给出渐进表达式</p>
<p>那么考虑非均匀赠券收集问题</p>
<p>记事件</p>
<p><img class="content-image" src="https://www.zhihu.com/equation?tex=A_%7Bn%2Ci%7D" alt referrerpolicy="no-referrer"></p>
<p>为第$n$次选取后第$i$个样本未被选中的情形,于是概率即为相应情形之并.</p>
<p>然后依容斥原理展开:</p>
<p><img class="content-image" src="https://www.zhihu.com/equation?tex=%5Cbegin%7Baligned%7D+P%28X%3En%29+%26%3D+P%5Cbiggl%28%5Cbigcup_%7B1%5Cleq+i%5Cleq+n%7D+A_%7Bn%2Ci%7D%5Cbiggr%29%5C%5C+%26%3D%5Csum_%7B1%5Cleq+i%5Cleq+n%7DP%28A_%7Bn%2Ci%7D%29+-+%5Csum_%7B1%5Cleq+i+%3C+j%5Cleq+n%7DP%28A_%7Bn%2Ci%7D%5Ccap+A_%7Bn%2Cj%7D%29+%2B+%5Csum_%7B1%5Cleq+i+%3C+j+%3C+k%5Cleq+n%7DP%28A_%7Bn%2Ci%7D%5Ccap+A_%7Bn%2Cj%7D%5Ccap+A_%7Bn%2Ck%7D%29+%2B+%5Ccdots%5C%5C+%26%3D+%5Csum_%7BJ+%5Csubseteq+%5C%7B1%2C+...%2C+n%5C%7D%7D%5E%7BJ+%5Cne+%5Cphi%7D%28-1%29%5E%7B%7CJ%7C+%2B+1%7D%5Cleft%281+-+%5Csum_%7Bj+%5Cin+J%7D+p_j%5Cright%29%5E%7Bn%7D%5C%5C+%5Cend%7Baligned%7D" alt referrerpolicy="no-referrer"></p>
<p>其中,$J$代表一种选法集合,</p>
<p><img class="content-image" src="https://www.zhihu.com/equation?tex=%7CJ%7C%3D%5Cmathrm%7Bcard%7D%28J%29" alt referrerpolicy="no-referrer"></p>
<p>, 即集合$J$中元素的数量.</p>
<p>其概率生成函数为:</p>
<p><img class="content-image" src="https://www.zhihu.com/equation?tex=%5Cmathcal%7BP%7D%28z%29%3D1%2B%28z-1%29%5Csum_%7BJ+%5Csubseteq+%5C%7B1%2C+...%2C+n%5C%7D%7D%5E%7BJ+%5Cne+%5Cphi%7D+%5Cfrac%7B%28-1%29%5E%7B%7CJ%7C%2B1%7D%7D%7Bz-1%2B%5Csum_%7Bj+%5Cin+J+%7Dp_j%7D" alt referrerpolicy="no-referrer"></p>
<p>接下来对于期望而言:</p>
<p><img class="content-image" src="https://www.zhihu.com/equation?tex=%5Cbegin%7Baligned%7D+E%28n%29%3D%26%5Cfrac%7Bd%7D%7Bdz%7D%5Cmathcal%7BP%7D%28z%29%5Cbiggl%7C_%7Bz%3D1%5E-%7D%5C%5C+%3D%26%5Csum_%7BJ+%5Csubseteq+%5C%7B0%2C+1%2C+...%2C+n-1%5C%7D%7D%5E%7BJ+%5Cne+%5Cphi%7D+%5Cfrac%7B%28-1%29%5E%7B%7CJ%7C%2B1%7D%7D%7B%5Csum_%7Bj+%5Cin+J+%7Dp_j%7D%5C%5C+%3D%26%5Csum_%7Bi%3D1%7D%5En+%28-1%29%5E%7Bi%2B1%7D%5Csum_%7B1%5Cleq+j_1+%3C+%5Ccdots+%3C+j_i%5Cleq+n%7D+%28-1%29%5E%7Bi%2B1%7D%5Cfrac%7B1%7D%7Bp_%7Bj_1%7D%2B%5Ccdots+%2B+p_%7Bj_i%7D%7D+%5C%5C+%3D%26%5Csum_%7Bi%3D1%7D%5En+%5Cfrac%7B1%7D%7Bp_i%7D+-+%5Csum_%7B1%5Cleq+j_1%3Cj_2%5Cleq+n%7D%5Cfrac%7B1%7D%7Bp_%7Bj_1%7D+%2B+p_%7Bj_2%7D%7D+%2B+%5Ccdots+%5Cend%7Baligned%7D" alt referrerpolicy="no-referrer"></p>
<p>注意到</p>
<p><img class="content-image" src="https://www.zhihu.com/equation?tex=%5Cdisplaystyle+%5Cint_0%5E%5Cinfty+e%5E%7B-px%7Ddx%3D%5Cfrac%7B1%7D%7Bp%7D%2C%5C%2C+p%3E0" alt referrerpolicy="no-referrer"></p>
<p>所以上式可以进一步可以写成:</p>
<p><img class="content-image" src="https://www.zhihu.com/equation?tex=%5Cbegin%7Baligned%7D+E%28n%29%3D%26%5Csum_%7Bi%3D1%7D%5En+%5Cint_0%5E%5Cinfty+e%5E%7B-p_ix%7Ddx-+%5Csum_%7B1%5Cleq+j_1%3Cj_2%5Cleq+n%7D%5Cint_0%5E%5Cinfty+e%5E%7B-%28p_%7Bj_1%7D+%2B+p_%7Bj_2%7D%29x%7Ddx+%2B+%5Ccdots%5C%5C+%3D%26%5Cint_0%5E%5Cinfty1-%5Cprod_%7Bi%3D1%7D%5En%281-e%5E%7Bp_ix%7D%29dx+%5Cend%7Baligned%7D" alt referrerpolicy="no-referrer"></p>
<p>另一方面从累积分布而言:</p>
<p><img class="content-image" src="https://www.zhihu.com/equation?tex=E%28n%29%3D%5Cint_0%5E%5Cinfty1-%5Cmathrm%7BCDF%7D%28x%29dx" alt referrerpolicy="no-referrer"></p>
<p>于是令</p>
<p><img class="content-image" src="https://www.zhihu.com/equation?tex=%5Cmathrm%7BCDF%7D%28x%29%5Csim+%5Cprod_%7Bi%3D1%7D%5En%281-e%5E%7Bp_ix%7D%29" alt referrerpolicy="no-referrer"></p>
<p><img class="content-image" src="https://www.zhihu.com/equation?tex=%5Cfrac%7Bn%21%7D%7Bn%5Ek%7D+%5Cmathcal%7BS%7D_2%28k+-+1%2C+n+-+1%29%5Csim%5Cfrac%7B%5Cpartial+%7D%7B%5Cpartial+n%7D%5Cleft%281-e%5E%7B-%5Cfrac%7Bn%7D%7Bk%7D%7D%5Cright%29%5Ek%3De%5E%7B-%5Cfrac%7Bn%7D%7Bk%7D%7D+%5Cleft%281-e%5E%7B-%5Cfrac%7Bn%7D%7Bk%7D%7D%5Cright%29%5E%7Bk-1%7D" alt referrerpolicy="no-referrer"></p>
<p>我们成功把问题转化为连续情形:</p>
<p><img class="content-image" src="https://www.zhihu.com/equation?tex=f%28t%29%3D%5Cint_0%5Et+e%5E%7B-%5Cfrac%7Bx%7D%7Bn%7D%7D+%5Cleft%281-e%5E%7B-%5Cfrac%7Bx%7D%7Bn%7D%7D%5Cright%29%5E%7Bn-1%7D+%5C%2C+%5Cmathrm%7Bd%7Dx%3D%5Cleft%281-e%5E%7B-%5Cfrac%7Bt%7D%7Bn%7D%7D%5Cright%29%5En" alt referrerpolicy="no-referrer"></p>
<p>其中 n 为规模, t 为计算的位数</p>
<p>其一阶近似就是 n H(n)</p>
<p><img class="content-image" src="https://www.zhihu.com/equation?tex=%5Clim_%7Bn%5Cto%5Cinfty%7D%5Cleft%281-e%5E%7B-%5Cfrac%7BnH%28n%29%7D%7Bn%7D%7D%5Cright%29%5En%3De%5E%7B-e%5E%7B-%5Cgamma%7D%7D%5Capprox+0.57" alt referrerpolicy="no-referrer"></p>
<p>这也是临界情况, 加一个微扰全部找到的概率就是 1, 减一个微扰概率就是 0.</p>
<figure><img class="content-image" src="https://pic1.zhimg.com/v2-ab68a60882478532fe7baeefbdc3af70_720w.jpg?source=8673f162" alt referrerpolicy="no-referrer"><figcaption>算 10 亿位还找不全的概率几乎为 0</figcaption></figure>
</div>
</div>


<div class="view-more"><a href="https://www.zhihu.com/question/23419402">查看知乎讨论<span class="js-question-holder"></span></a></div>

</div>


</div>
</div></div>  
</div>
            