
---
title: '《宝箱大师》开发日志 01'
categories: 
 - 游戏
 - Indienova
 - indienova 文章
headimg: 'https://hive.indienova.com/farm/blog/2021/05/u-33924624271991Wn.gif'
author: Indienova
comments: false
date: 2021-06-07 11:50:13
thumbnail: 'https://hive.indienova.com/farm/blog/2021/05/u-33924624271991Wn.gif'
---

<div>   
<h4>引子</h4><p>距离上次写文章已经过去一年多了，回想过去的 2020，真是五味杂陈。我相信应该也有人和我一样，被疫情打乱了原有的计划，对这不平凡的一年，也一定感触良多。因为封城，2020 的头半年，感觉每一天过得都很慢。可能是因为 19 年末，我终止了自己耗了几年的项目，使我跳出了多年来的生活模式。我的注意力无处安放了，整日发呆。但这段百无聊赖的日子，反而给了一个可以在新的角度重新审视自己的机会。</p><p>反省后获得的收获里，其中之一就是觉得，应该时不时的把自己每个阶段的想法记录下来。过段时间回看，也许能更好的发现一些问题，避免因为太过专注在一件事情上，反而迷失了方向。再就是，也许能促进一下交流学习，获得一些新的观点与视角。</p><p><img alt="这是这篇文章的重点，但请允许我先铺垫一下" class="fr-fin fr-dib" src="https://hive.indienova.com/farm/blog/2021/05/u-33924624271991Wn.gif" title="这是这篇文章的重点，但请允许我先铺垫一下" referrerpolicy="no-referrer"></p><div class="text-center image-caption"><small>这是这篇文章的重点，但请允许我先铺垫一下</small></div><h4>补齐短板</h4><p>按我的计划，2020 年后就打算准备一下，然后去应聘的。但是因为疫情，以及随之而来的各种琐事让我没法抽身。封城的那段时间，我也了解了一下，发现游戏行业还是希望应聘者能熟练使用 Unity 或 UE4。可是我自己做游戏那几年，选的是 iOS 平台的 sprite kit（没听过很正常，我遇到问题了，上 google 都找不到多少页面），肯定是不符合人家的要求的。当时封城还没结束，我心里想，反正哪也去不了，与其发呆，不如就趁这个时间学习一下吧。</p><p>开始的时候还挺忐忑的，怕自己一时半会学不会。结果不看不要紧，一看发现，Unity 不仅比我想象的友好，而且要比之前使用的引擎高效。比如，sprite kit 在很长一段时间里没有摄影机功能，要自己写方法，计算人物的位置，然后移动 Scene（场景），从而让人物待在屏幕范围内，来实现摄像机的功能。再就是 2d 引擎，如果涉及到前后位置的关系，比如两张图片哪个在上，哪个在下，就得调整 zposiotn 或者 z 值。那如果是个 2.5d 的游戏（我那个游戏就是），觉得不断计算人物与 npc 或场景物品的相对 y 值，然后不断调整这个 z 值，来实现前后遮挡的效果。还有就是 sprite kit 有播放帧动画的功能，但是切换动画的状态机得自己写。</p><p>结果到 Unity，这些功能在菜单里点几个按钮就行。完事儿了！我看官方文档时候我都惊了！</p><p>起初选择 sprite kit，一方面是因为当时刚好在学 iOS，再加上 sprite kit 是苹果自己出的引擎，适配上不会有问题，又是同一种语言，没考虑太多就用了。另一方面，那个时候也我对游戏开发的全貌并不了解（我觉得没完整的做过游戏的话，是没法了解的吧），对于引擎适不适合项目这件事情根本没概念（天呐，那个时候自己能做成什么样都不知道呢）。多种原因，导致我在引擎使用上，花费了大量精力与时间。也许早几年换引擎，自己也不会那么累了。</p><p>总之，Unity 的学习历程算是开始了。</p><h4>灵感</h4><p>Unity 熟悉的差不多了，我就想做个小玩意儿练练手。本来也是在准备应聘，所以打算选择一个市面上流行的类型。但是，问题来了：说实话，我平时手游玩的不多，要做个有趣的开箱游戏，我一时不知该从何入手。最主要是，有趣这个事情，我怎么也找不到灵感。我做游戏，每次都是从自己觉得有趣的那个方向开始。如果找不到有趣的点，就很难动手去做。</p><p>冥思苦想了好几天，心想干脆算了，还是选别的类型吧。但又觉得，了解开箱游戏又是必要的。来来回回，很是纠结。直到有一天，看到了一些手游业界大佬在网上分享的经验，以及，又重新看了一遍吹哥在核聚变上的演讲，就一下子茅塞顿开，获得了一个灵感。</p><h4>这游戏玩什么</h4><p>游戏里的故事发生在一个并不甚特别的奇幻大陆，与其他陈词滥调一样，有精灵，人类，矮人，半兽人，恶魔，半身人等等不同种族。在创世之后，各种族根据不同的信仰，文化以及起源，分成了光明与黑暗，两个不同的阵营，并开始了永无止境的相互征战。但玩家在游戏里扮演的并非光明阵营的勇者或者黑暗阵营里的不死族，而是在一家叫宝箱大师的企业上班的雇员。(详细设定在文章后半段)</p><p><br></p><p>作为宝箱大师的员工，要牢记一条：我们是勇者的最忠实伙伴。</p><p>每一个工作周期，会有总部派发给各个员工 12 个宝箱，员工的工作就是将这 12 个宝箱置换到有需要的勇者手中。每置换完成 12 个宝箱，一个工作周期结束，会有总部的人员来收取置换过来的宝箱，并派发新的 12 个宝箱到员工手中。新的工作周期开始，由此往复。而完成这样的工作，需要一种技能，该技能也是本游戏的核心玩法：   <strong>讲价。</strong></p><p><img class="fr-fin fr-dib" src="https://hive.indienova.com/farm/blog/2021/05/u-33924624273940b3.gif" referrerpolicy="no-referrer"></p><div class="text-center image-caption"><small>需要阅读表情，判断勇者的意图，从而选择合适的讲价策略（压缩成 gif 之后画面失真严重）</small></div><p>工作中有一条关键的规则，员工从勇者置换过来的宝箱总价值，要<strong>大于</strong>公司派发的宝箱的总价值，这一阶段的工作才能算合格，否则就会扣该员工的绩效。</p><p>比如说，公司派发的 12 个宝箱总价值：1000。而员工用这些宝箱从勇者手中换过来的 12 个宝箱总价值为：1100，则该员工本阶段工作合格，反之则不合格。另外，如果宝箱丢失，或私自打开宝箱，一经发现，将会面临最严重的的处罚。根据合约，宝箱大师有权在员工损失商铺财产时采取特定行为，包括且不限于将员工灵魂禁锢，使其无偿工作至特定（无限制）期限为止。</p><p><img class="fr-fin fr-dib" src="https://hive.indienova.com/farm/blog/2021/05/u-3392462427428808.gif" referrerpolicy="no-referrer"></p><div class="text-center image-caption"><small>如果勇者开箱成功，就会露出幸福的笑容</small></div><p>每一个季度，总部会进行考核，并评选出优秀员工。收益最高的员工，会受到奖励，并提拔至讨伐活动更活跃的地区，履行更高的职能。说到盈利，有人会觉得这损害了勇者的利益，与公司主旨：做勇者最忠实的伙伴，相悖。</p><p>“其实不然，《宝箱大师》商铺自创立以来，多次拒绝了王国的财政扶持，至今依然是自负盈亏。获取的利润仅仅是为了让《宝箱大师》持续运营，毕竟只有我们继续运作下去，才能继续帮助勇者们免受开箱所带来的风险以及各种问题。” 宝箱大师的公关主管说道。</p><p>贪婪并不能帮助勇者，所以作为《宝箱大师》的员工，应该在鉴定时引导勇者。这就需要一些讲价技巧了。</p><p>一般，你作为员工会遇到三种情况：勇者不知道宝箱价值，勇者知道宝箱价值但想换个高价宝箱，以及勇者知道宝箱价值并想换一个相同价值的宝箱。而即使相同的心态，每一个勇者的态度也是不同的。勇者的精神状态数值，取决于其在讨伐过程的遭遇。获胜的次数多，就会变得老练和自信，装备也就越好。失败的次数多就会没有耐心，衣衫褴褛。不同情况需要阅读勇者的表情和其装备，判断其职业和级别，审时度势，区别应对。比如有些勇者经验丰富，并不容易说服。</p><p><img class="fr-fin fr-dib" src="https://hive.indienova.com/farm/blog/2021/05/u-3392462427735HmI.gif" referrerpolicy="no-referrer"></p><p>这就需要一些特殊技巧了 而有些勇者，可能因为在讨伐的过程中消耗太剧烈，不是那么好说话。</p><p><img class="fr-fin fr-dib" src="https://hive.indienova.com/farm/blog/2021/05/u-3392462427752Zk9.gif" referrerpolicy="no-referrer"></p><div class="text-center image-caption"><small>所以这种情况，要格外注意砍价的力度</small></div><p>所有这些情况以及各种未知的挑战，都需要你想办法去应对，从而完成每个周期的工作任务。</p><p>本来你的工作还算顺利，直到遇到一个突发情况：宝箱无故丢失，导致无法完成工作周期，并将面临严重处罚。</p><p>就在这个时候，上一位员工遗留在工位上的奇怪图鉴，仿佛拥有灵魂，开始自己说话。这个图鉴告诉你，如何打开宝箱，如何使用黑魔法炼成宝箱，施加宝箱保险咒，最后的成品与勇者们在讨伐过程中获得战利品宝箱，并无二致。当然，价值上就差一些了，毕竟你没有什么财宝往里面放，也没必要。</p><p><img class="fr-fin fr-dib" src="https://hive.indienova.com/farm/blog/2021/05/u-3392462427796tw0.gif" referrerpolicy="no-referrer"></p><p>图鉴里包含各类材料，装备及魔物的资料 你用这个炼成的宝箱蒙混过关，却从此一发不可收拾。这本图鉴不但告诉你如何炼成宝箱，还教会你如何用宝箱里的其他材料复活魔物。</p><p>图鉴还给了你一个新的启发：你可以先私自打开宝箱，获取里面的材料用于炼成包括宝箱在内的物品，或者复活魔物。然后用你高超的讲价技巧，把价格压到理想范围内之后（炼成的宝箱价值不会太高，为避免投诉，只能尽全力压低价格），再拿你炼成的普通宝箱去换勇者手里货真价实的珍贵宝箱，以此获取更好的材料，进行更高级别的炼成。</p><p><img class="fr-fin fr-dib" src="https://hive.indienova.com/farm/blog/2021/05/u-3392462427813H0l.gif" referrerpolicy="no-referrer"></p><div class="text-center image-caption"><small>勇者不一定能获得他想要的东西</small></div><p><img class="fr-fin fr-dib" src="https://hive.indienova.com/farm/blog/2021/05/u-33924624278393Bd.gif" referrerpolicy="no-referrer"></p><div class="text-center image-caption"><small>但你从他手里获取的都是宝贵的材料</small></div><p><img class="fr-fin fr-dib" src="https://hive.indienova.com/farm/blog/2021/05/u-3392462427858Vys.gif" referrerpolicy="no-referrer"></p><div class="text-center image-caption"><small>然后通过这些材料，你可用炼成你想要的东西或复活魔物</small></div><p>虽然每天都有新的勇者们到你这来鉴定，置换，他们的朝气让你相信王国终会在这永无止境的战争中获胜。但魔物们告诉你，黑暗阵营早在三千年前那场大战中战败了，战争早就结束了。魔物们非但不是穷凶极恶，反而一个个都非常干练，叫你老板。</p><p>你甚至可以通过法阵，联系那些魔物据点，用一些宝箱里开出来的特殊物品承包该据点，指派魔物，调整据点的防御策略，让勇者们能更简单的，或更难的，或更加刺激的进行讨伐。（不用担心据点里魔物的安危，它们可以复活，所以不在意死亡，反而都认真地完成你指派的“工作”）</p><p><img class="fr-fin fr-dib" src="https://hive.indienova.com/farm/blog/2021/05/u-3392462427887Cjc.gif" referrerpolicy="no-referrer"></p><div class="text-center image-caption"><small>指派魔物到承包的据点去</small></div><p>于是在你的经营之下，勇者们开始流传小道消息，说在你这个区域的据点，会获得更好的宝箱，于是你负责的这片区域变得火热，来讨伐的勇者越来越多，来鉴定的勇者也越来也多，你获得的宝箱也越来越多，你开箱获得物品也也越来越多，能复活的魔物级别越来越高，承包的据点也也越来越多，于是区域变的更火热……</p><p>而勇者越多，就越会产生不同类型的勇者和宝箱。因为在游戏中，勇者的行为是实时模拟的。他们会不断遵循游戏内的逻辑，在探索-讨伐-城镇-交易之间循环往复，并根据各自的数值以及随机遭遇，比如讨伐成功与否，获得不同的心理状态和数值成长，进而在讲价的过程中产生多种不同的反应。</p><p><img class="fr-fin fr-dib" src="https://hive.indienova.com/farm/blog/2021/05/u-33924624279178mO.gif" referrerpolicy="no-referrer"></p><div class="text-center image-caption"><small>魔法地图会显示，勇者们在这片区域里的各种活动</small></div><p>和这个图鉴相处的时间越长，就越觉得这个图鉴的神秘莫测。随着你能力的提高，这图鉴能呈现的法术也越多，甚至，如果这片区域已经发展失衡，无法维持下去的时候，这本图鉴还能提供给你一个法术，让这片区域的所有勇者瞬间失忆，让他们像一个新来的勇者那样从头历练。</p><p>最后，这本图鉴会和你一起慢慢揭开藏在这片大陆下的种种秘密：为什么史书记载精灵是金发，而如今精灵多是棕发；白王冠消失的真相；魔法师公会的秘密；勇者们讨伐的背后意义；魔物们的追求；恶魔的踪迹……</p><h4>游戏的基础设定</h4><p>游戏里的故事发生在一个并不甚特别的奇幻大陆，有精灵，人类，矮人，半兽人，恶魔，半身人等等不同种族。在创世之后，各种族根据不同的信仰，文化以及起源，分成了光明与黑暗，两个不同的阵营，并开始了永无止境的相互征战。直到三千年前的神魔大战，两方势力两败俱伤，战事才有所缓和，但战争远未结束。</p><p>至今仍不断有黑暗阵营占领村庄，城市，田野或山地要塞，向光明阵营的聚居点渗透。而光明阵营的主要势力——王国，则不断的组织勇者去这些被占领的据点进行讨伐。胜利归来的勇者会在讨伐的过程中获得历练，名誉甚至财宝，以及能使他们更好的进行讨伐的各种装备和宝物。王国内部虽然也有精英阶层的骑士集团，法师公会，但奉行一种英雄不问出处的信条，只要你相应号召参加讨伐，你就是勇者。实际上，每年都有不少曾经默默无闻的年轻人，流民甚至乞丐在参加讨伐后，获得了常人难以想象的名誉，地位以及财富。这样的环境导致勇者们前仆后继，永不停歇。</p><p> 但从有历史以来，黑暗与光明就从未停止战争，既然勇者无穷无尽，为何黑暗势力依然不倒？因为信仰黑暗力量的魔物，没有死亡的概念，只要有残骸留下，它们就可以通过仪式复活。死亡对于它们来说只是一种历练，它们并不排斥死亡，也不在意将死亡带给其他种族，毕竟它们无法理解死亡的恐惧。</p><p>黑暗阵营里主要是恶魔，以及其仆从半兽人，不死族，或其他仆从种族和其仆从。不过现在黑暗阵营里只剩下一些仆从种族了（统称魔物），三千年前的神魔大战中，绝大多数的恶魔都被消灭殆尽了。而光明阵营这边也付出了巨大代价，包括创世神的仆人——精灵王本尊。</p><p>说到精灵，这是个很有意思的种族。他们的寿命很长，除了王族，平均都在千年以上。他们不会衰老，即使是到了一千岁的年纪，也只像人类四十岁的样子。他们的死亡也不是留下一个躯壳任其腐烂，即使是被杀死，尸体也只会变成一缕光辉消失不见。只过不性格上都非常固执，文化上有点教条主义。相比来说，人类就显得没那么起眼了，平均只有两百年的寿命。传说精灵的祖先与人类的祖先有血缘关系，所以一直以来两个种族关系都算不错。事实上，王国这个势力，就是由三千年前神魔大战时缔结的同盟，发展而来的。当时人类的国王与精灵的国王相互嘱托，谁如果陨落了，就由另一方暂时统御其人民，直到新王诞生。但精灵王在战死时，象征王权的白王冠丢失，再加上其本身的教条主义文化，致使到今天，也没有新的精灵王登基。由此，同盟变成了联邦，联邦变成了王国。</p><p>而矮人是一群与世无争的农民，他们无法接受黑暗阵营的死亡洗礼，毕竟矮人的寿命比人类都短，只有 80 年左右，所以只能依附于王国。但矮人里参加讨伐，成为勇者的人不多，多数做的都是后勤工作。再加上一些在各方势力间游走，做行脚生意的半身人，基本就是王国内部的全部种族了。</p><p>基础设定大概就是这样，但玩家在游戏里扮演的并非光明阵营的勇者或者黑暗阵营里的不死族，而是在一家叫宝箱大师的企业上班的雇员。</p><h4>宝箱经济与宝箱大师的诞生</h4><p>因为黑暗阵营的魔物可以复活，所以为了保证自己复活之后依旧能持有之前收集的财产，魔物们自古就流行一种宝箱保险咒。这个法术究竟是由谁发明已不可考，但这法术历史相当悠久，自黑暗文明懵懂时期流传下来的神话故事里就有提及。并随着历史进程，被无数黑魔法师完善，修改，产生了数不清的变种。不过操作上大同小异：要先找到一个合适的宝箱，然后将心爱的物品放进去，最后把宝箱封上再施加咒语就行了。这样这个宝箱就不会损坏，除施术者设定的开箱方法以外，不会被打开。</p><p>听起来万无一失，但永无止境的战争，使得王国的勇者们经常能以战利品的方式获得这样的宝箱。起初，光明阵营这边并不太在意这些奇怪的箱子，大多只是丢掉一旁。直到一位人类法师，偶然用魔法强行打开了宝箱，获得了里面残存的强力装备与财宝。于是，一传十，十传百。由法师们传到战士们，由战士们传到商人们，再由商人们传遍整个王国。从此两个阵营陷入了癫狂的互相屠戮，一方为了获得宝箱的财宝，另一方为了夺回自己的心爱之物。</p><p>可能是因为宝箱保险咒有非常多的变种，光明阵营这边总结的强行打开宝箱的方法，也是多如牛毛，不近相同。而且并不具备普适性，往往是同样的方法在这个宝箱好用，在那个宝箱就会爆炸伤人。最重要的是，即使是最确定的开箱方案，也不能保证百分之百开箱。事实上只有黑暗阵营的种族在知道确切开箱方式的情况下，才能做到百分之百开箱。强行开箱的方式最多只有百分之八十的概率：也就是说，仍有百分之二十的概率损坏宝箱，一无所得。</p><p>还有一个问题，假设一个勇者是骑士，他成功讨伐了一个擅长魔法的怪物，那么获得的宝箱大概率存放的是魔法类的物品，该物品对这位勇者本身的用处不大。当遇到类似的情况，勇者们就不倾向冒着风险开箱，然后再把开出的物品拿去交易，而是更倾向于直接拿宝箱去和其他勇者交换。但这种朴实的默契经不住利益的诱惑，很有可能换过来的也是不匹配职业，甚至更低级的宝箱，互相欺诈是家常便饭，直到伟大的宝箱大师——鸠·霞彼岸勋爵的出现。</p><blockquote>鸠·霞彼岸勋爵早年是一位行脚商人，常年深入战事一线，深知勇者们的疾苦以及迫切的期望。凭着其多年的行商经验，他摸索出了一个独具特色的鉴定方法论。他本人可以通过宝箱的材质，成色，形状，获取的位置以及怪物的种类，大致判断出宝箱内的物品类型，施加的宝箱保险咒种类和开箱几率。凭借这位伟人的天纵奇才，王国对宝箱总的开箱几率由百分之二十提高到了百分之五十。由于其卓越的贡献，被国王封为勋爵。他还为了更好的帮助勇者，解决他们在开箱上的困难，成立了宝箱大师商铺，并向雇员们传授他独家的鉴定方法论，开创了一种新的商业模式。勇者们不必自己亲身去进行宝箱交换，而是可以全权委托给宝箱大师。在这里，勇者们不用在宝箱与自己职业不匹配时，承担开箱失败的风险，不用再忍受小人的尔虞我诈。在这里，勇者们能享受快捷，专业的宝箱鉴定，置换与自己职业准确匹配的宝箱。同时宝箱大师也会明确告知每一个宝箱的确切开箱几率，能使自己冒着生命危险进行的讨伐获得更好的回报。宝箱大师，勇者们最忠实的伙伴。详情请咨询您所在地区的《宝箱大师》网点。 ——宝箱大师的广告</blockquote><p><br></p><p>未完待续</p><p>虽然游戏的模式和故事架构已经确定了，但是只做了基础功能，如果要做成 demo 的话，还有非常多的工作要做（好烦），就先这样吧。先拿出来给大家分享一下，听听各位的意见。</p><p><br></p><div class="promo promo-border promo-white bottommargin topmargin"><h3>宝箱大师</h3><span>@indienova</span>
<a class="button button-dark button-xlarge button-border button-rounded" href="https://indienova.com/g/chestmaster" target="_blank"><i class="icon-display"></i> 去看看</a></div>
              
</div>
            