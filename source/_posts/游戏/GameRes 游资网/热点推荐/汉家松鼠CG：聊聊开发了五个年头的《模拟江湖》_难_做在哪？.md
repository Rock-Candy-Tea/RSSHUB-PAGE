
---
title: '汉家松鼠CG：聊聊开发了五个年头的《模拟江湖》_难_做在哪？'
categories: 
 - 游戏
 - GameRes 游资网
 - 热点推荐
headimg: 'https://di.gameres.com/attachment/forum/202203/03/091821bazv1zkv7iiivt4v.jpg'
author: GameRes 游资网
comments: false
date: Invalid Date
thumbnail: 'https://di.gameres.com/attachment/forum/202203/03/091821bazv1zkv7iiivt4v.jpg'
---

<div>   
<div align="center">
<img aid="1032394" zoomfile="https://di.gameres.com/attachment/forum/202203/03/091821bazv1zkv7iiivt4v.jpg" data-original="https://di.gameres.com/attachment/forum/202203/03/091821bazv1zkv7iiivt4v.jpg" width="600" id="aimg_1032394" inpost="1" src="https://di.gameres.com/attachment/forum/202203/03/091821bazv1zkv7iiivt4v.jpg" referrerpolicy="no-referrer">
</div><font size="2"><font color="#808080">作者：CG 汉家松鼠CEO,本文首发“汉家松鼠”公众号</font></font><br>
<br>
大家好，《模拟江湖》从立项到现在已经第五个年头了。<br>
<br>
我们内部开会的时候开玩笑说：五年！读个大学加去英国读一年研究生都毕业了，一个游戏怎么还没做出来？<br>
<br>
带着这种一半自我戏谑一半伤感的情绪，我们实在是应该坐下来好好思考和反思一下，这个游戏到底难做在哪？<br>
<br>
说实话模拟江湖立项的时候，想法特别简单，因为我们玩了一款游戏叫王权。觉得这种向左滑、向右滑来决策游戏事件走向的玩法特别有趣。也适合模拟很多武侠剧情中的经典取舍，毕竟很多时候武侠的经典也是来源于选择，善恶一念间。<br>
<br>
<div align="center"><font size="2"><font color="#808080">
<img aid="1032395" zoomfile="https://di.gameres.com/attachment/forum/202203/03/091821gva9qn085ljqwila.jpg" data-original="https://di.gameres.com/attachment/forum/202203/03/091821gva9qn085ljqwila.jpg" width="600" id="aimg_1032395" inpost="1" src="https://di.gameres.com/attachment/forum/202203/03/091821gva9qn085ljqwila.jpg" referrerpolicy="no-referrer">
</font></font></div><div align="center"><font size="2"><font color="#808080">《王权》</font></font></div><br>
这样的设计其实是典型的内容消耗型设计，所有的玩家可以游玩内容来源于游戏设计师的手动填写，所以我们第一版做出来的手机版模拟江湖也是充分的体现了这一点：在新手村体验相当不错，是游戏设计者一个字一个字的设计，每个任务如何串接、不同任务中的逻辑是怎样都是经过精心设计。<br>
<br>
而到了门派养成阶段，就相对来说欠缺可玩性，因为内容供给不足，加上游戏通过时间推进的核心机制设计比较简单。<br>
<br>
<div align="center"><font size="2"><font color="#808080">
<img aid="1032396" zoomfile="https://di.gameres.com/attachment/forum/202203/03/091821qky4wekktbh6c6bx.jpg" data-original="https://di.gameres.com/attachment/forum/202203/03/091821qky4wekktbh6c6bx.jpg" width="600" id="aimg_1032396" inpost="1" src="https://di.gameres.com/attachment/forum/202203/03/091821qky4wekktbh6c6bx.jpg" referrerpolicy="no-referrer">
</font></font></div><div align="center"><font size="2"><font color="#808080">《模拟江湖》老版本</font></font></div><br>
当然，如果这样做下去，把门派养成阶段做好，后续再加入更多的可体验的“新手村”级的内容，做更多的可选主角，这样会是一个好游戏吗？<br>
<br>
毋庸置疑的，这会是一个不错的游戏。<br>
<br>
如果是这样持续去完成游戏的话，我们可以简单的把这个游戏归结为典型的《侠客风云传》式的游戏：有限的章节式的开放地图+时间推进养成玩法。实际在测试中获得一部分玩家好评的新手村体验，也可以称之为侠客风云传/武林群侠传的新手村翻版。<br>
<br>
<div align="center"><font size="2"><font color="#808080">
<img aid="1032397" zoomfile="https://di.gameres.com/attachment/forum/202203/03/091822utdz21e25xe3ij49.jpg" data-original="https://di.gameres.com/attachment/forum/202203/03/091822utdz21e25xe3ij49.jpg" width="600" id="aimg_1032397" inpost="1" src="https://di.gameres.com/attachment/forum/202203/03/091822utdz21e25xe3ij49.jpg" referrerpolicy="no-referrer">
</font></font></div><div align="center"><font size="2"><font color="#808080">《侠客风云传》</font></font></div><br>
我们根据测试结果测算和评估，遇到一个比较尴尬的情况。这种玩法在手机平台上做的话，喜爱的玩家会比较小众，无论是做内购式的付费还是一次性买断，如果不做比较大的调整都大概率回不了本。而如果在PC平台发布的话，美术品质和游戏性又和主流的武侠单机有一定差距。<br>
<br>
基于市场考虑的原因，我们还是忍痛决定重新开发模拟江湖整个游戏。虽然汉家松鼠并不是一个以盈利为第一目标的游戏公司，但一款游戏是否在市场上正向循环，对项目团队和整个工作室都是至关重要的。<br>
<br>
在这时候，其实我们还是有相当多的灵感和想法，只是之前并没有那么大的勇气和信心去立一个复杂度更高的PC游戏。<br>
<br>
<div align="center"><font size="2"><font color="#808080">
<img aid="1032398" zoomfile="https://di.gameres.com/attachment/forum/202203/03/091822m4gzg1t1a0agadgk.jpg" data-original="https://di.gameres.com/attachment/forum/202203/03/091822m4gzg1t1a0agadgk.jpg" width="600" id="aimg_1032398" inpost="1" src="https://di.gameres.com/attachment/forum/202203/03/091822m4gzg1t1a0agadgk.jpg" referrerpolicy="no-referrer">
</font></font></div><div align="center"><font size="2"><font color="#808080">《部落与弯刀》</font></font></div><br>
但《部落与弯刀》的成果其实一定程度提升了我们做PC游戏的信心，它虽然是一次相对比较浅的PC游戏开发尝试，但我们内部还是愿意把它定义为比较成功的游戏。这个“成功”是指整个团队从来没有涉足过开发PC游戏，没有steam开发和发行经验的情况下，我们做出了一个还不错的市场成绩，以及初步探索了“规则驱动”世界（规则驱动对比的是由金X、汉家江湖等为代表的“人工开放”世界）的设计。<br>
<br>
虽然部落与弯刀中也有相当多的被玩家诟病的地方，比如主线剧情文案略显小学生、战斗节奏杂乱、开局难后期平推等等。但毋庸置疑这款游戏的复杂度，可扩展度是我们所有制作的游戏从未去探索过的高地。<br>
<br>
可能会有同学问，看起来部落与弯刀也不复杂啊，这游戏做起来哪难了？<br>
<br>
部落与弯刀首先是一个开放世界，它存在背后的运算逻辑，整个世界的演化是动态的。也就是说，没有玩家参与的情况下，世界背后的逻辑也是在计算的。比如什么部落出兵攻打其他人了，比如哪个英雄加入哪个部落了，抑或哪几个英雄路上遭遇了互相结仇等等。<br>
<br>
我们开发这款游戏有相当长一段时间，就是添加各种规则然后“看海”。<br>
<br>
有玩过P社游戏的同学可能会有这种体验，就是你找一个开局，然后直接推进时间，什么都不干，你会发现世界会发生很多有意思的演化。<br>
<br>
<div align="center"><font size="2"><font color="#808080">
<img aid="1032399" zoomfile="https://di.gameres.com/attachment/forum/202203/03/091822tdzhbieibpgkgpkb.jpg" data-original="https://di.gameres.com/attachment/forum/202203/03/091822tdzhbieibpgkgpkb.jpg" width="600" id="aimg_1032399" inpost="1" src="https://di.gameres.com/attachment/forum/202203/03/091822tdzhbieibpgkgpkb.jpg" referrerpolicy="no-referrer">
</font></font></div><div align="center"><font size="2"><font color="#808080">P社游戏《十字军之王3》</font></font></div><br>
我们觉得这种体验蛮有意思的，这一方向的玩法前景也非常诱人：给一个世界注入一堆规则，让这个世界能够逻辑自洽的跑起来，玩家可以由此参与其中。甚至说得更远一点，这或许是炒得比较热的“元宇宙”的一种形态吧。<br>
<br>
《部落与弯刀》在开发中由于时间、精力、团队经验不足，我们有非常多的取舍和简化，所以说针对规则驱动世界我们仅仅是浅尝辄止，但在这一个方向，我们认为可以继续进行尝试。<br>
<br>
我们很容易展开一些美好的想象：如果是一个带着各种规则的江湖，侠客、门派、市井都是动态变化，能够通过世界规则演算演化出来一些经典场景，比如金庸先生笔下《倚天屠龙记》中的六大派围剿光明顶、《笑傲江湖》的辟邪剑谱路线和阴谋等等，那岂不是妙哉？<br>
<br>
怀着这样美好的憧憬，我们步入了一个深坑。。<br>
<br>
理科生做游戏的方法论，说起来特别好理解：我们总是希望定义一套“公理”，然后在“公理”上可以推导出各种“定理”，继而再生长出整个游戏的内容。<br>
<br>
当我们开始思考整个世界如何搭建的时候，那么如何在数学层面去抽象整个世界，变得很重要：一方面是它是整个游戏设计的“内功心法”，另一方面它也是如何去落地整个系统的重要参考。<br>
<br>
我们可以很自然去拆解一个典型的侠客在AI世界中的行为路径的问题。比如“林平之”的一个人生目标是最终要获得“辟邪剑谱”，所以他可能需要先收集剑谱的线索。该线索可能分布在江湖几处，获得每个线索的条件各不相同，比如有的需要战胜某个角色、有的需要“观察力”大于多少、有的可能需要等某个时机守备松懈了偷偷摸进去…… 而要达到以上条件，“林平之”需要分别提升武功、观察力、去找夜行衣等等。最终整个游戏的各种边界条件和玩家可以执行的行为，可以构成一张巨大的网络，“林平之”需要在已知的各种条件下去寻找一个相对最优解完成他的这个人生目标。<br>
<br>
而“林平之”可能有若干个人生目标，江湖上有无数个“林平之”，他们在达成各自的人生目标会产生交互（互相结交、对抗或者仇杀等），那么整个江湖各个侠客在去达成自己的人生目标时，就可以生动起来。<br>
<br>
听起来只要行为可枚举，那么当下最有路径一定是存在的。于是我们翻阅各种论文，选择用GOAP算法来做一个简单的demo。<br>
<br>
<div align="center"><font size="2"><font color="#808080">
<img aid="1032400" zoomfile="https://di.gameres.com/attachment/forum/202203/03/091823tgb83ohpzno8ybo2.jpg" data-original="https://di.gameres.com/attachment/forum/202203/03/091823tgb83ohpzno8ybo2.jpg" width="600" id="aimg_1032400" inpost="1" src="https://di.gameres.com/attachment/forum/202203/03/091823tgb83ohpzno8ybo2.jpg" referrerpolicy="no-referrer">
</font></font></div><div align="center"><font size="2"><font color="#808080">GOAP算法示例</font></font></div><br>
做出来的结果是，回合制走格子的情况下，玩家每走一格需要卡5-10秒……而且这还是行为相当有限的情况下。<br>
<br>
<div align="center"><font size="2"><font color="#808080">
<img aid="1032401" zoomfile="https://di.gameres.com/attachment/forum/202203/03/091823wdpr1gosnlp19sry.jpg" data-original="https://di.gameres.com/attachment/forum/202203/03/091823wdpr1gosnlp19sry.jpg" width="600" id="aimg_1032401" inpost="1" src="https://di.gameres.com/attachment/forum/202203/03/091823wdpr1gosnlp19sry.jpg" referrerpolicy="no-referrer">
</font></font></div><div align="center"><font size="2"><font color="#808080">《模拟江湖》开发中DEMO</font></font></div><br>
Emmm，说到这里，其实做这种类型游戏AI有一种比较取巧的方法（也可以在一定情况下获得好的结果），就是把行为概率化。比如我们可以在构建行为搜索树的时候向下搜索若干层，将结果作为“导向”来决定选取更优结果的概率。<br>
<br>
举个通俗的例子：比如张三现在目标是想“赚钱”，那么发现去A地可以赚300块钱，去B地可以赚100块钱。但由于我不确定后续哪个地方更“赚钱”（因为后续计算过于复杂，当下计算深度不够），那么我们可以选择3/4的概率去A地，1/4的概率去B地，这样可能可以模拟出来看起来还不错的结果。<br>
<br>
毫不避讳的说，部落与弯刀使用的就是类似的算法。但这样的结果我们已经基本验证过，最终看起来也只是一堆人在地图上随意跑动，比较难在演算中发生有前后逻辑连接的故事。（当然，严格来说也未尝不可行，理论上如果逻辑能够连续一大段时间，还是可以由算法生成人和人之间相关的故事的。）<br>
<br>
进一步想，我们能否通过机器深度学习建立起离线模型来实现呢？为此我们拜访了国内做游戏机器学习最好的团队，我们认为还是有相当的可能性做出来。但还是需要一套更合理的底层数学评估函数，来定量的描述侠客的“人生目标”——为这块我们投入了不少的研发精力，用以来搭建一个比较理想可行的规则驱动开放世界AI底层。<br>
<br>
好了，以上只是举一个例子说明我们在《模拟江湖》2020年夏重制以来我们的一些陷入的思考。这种类型的创意和尝试我们在这两年过程中进行了非常多，我们自己反思和总结，这也是一个理想主义的团队做创新的必经之路。因为创新很多时候不是灵光一现，而是你对99种方法做了尝试，最后选了第100种可行的方法来落地。<br>
<br>
比如地图的展开模式我们有尝试回合制/实时制，比如总体游戏体验我们尝试过是偏向CRPG还是偏向SLG/RTS，比如游戏中的演出我们尝试过是否使用更精彩的偏向日式的AVG等等……<br>
<br>
有趣的是，我们在开发过程中研究了相当多的游戏。我们发现作为玩家和作为开发者视角，很多游戏开发思路和玩法呈现是完全不一样的，比如我们在思考AI势力和玩家势力，甚至玩家为AI势力打工的情况下，大世界的演化典型游戏《太阁立志传》，发现他的玩家为AI打工的各种任务派发体系居然完全是不和世界演化数据相关的，而是策划凭空硬K出来的。<br>
<br>
<div align="center"><font size="2"><font color="#808080">
<img aid="1032402" zoomfile="https://di.gameres.com/attachment/forum/202203/03/091823ul3v3r3ritt2sx8y.jpg" data-original="https://di.gameres.com/attachment/forum/202203/03/091823ul3v3r3ritt2sx8y.jpg" width="600" id="aimg_1032402" inpost="1" src="https://di.gameres.com/attachment/forum/202203/03/091823ul3v3r3ritt2sx8y.jpg" referrerpolicy="no-referrer">
</font></font></div><div align="center"><font size="2"><font color="#808080">《太阁立志传5》</font></font></div><br>
好了，不扯远了。所幸的是，目前我们已经完全确定了游戏的最终形态和完成路径。虽然它的样子距离我们最初的理想已经不是那么一样，中间开放世界规则部分和实际提供给玩家的玩法内核部分有不少取舍。但我还是可以很负责任的说，它会是一款我们心中好的游戏。<br>
<br>
<div align="center"><font size="2"><font color="#808080">
<img aid="1032403" zoomfile="https://di.gameres.com/attachment/forum/202203/03/091823enemb9l5e0e5xf7f.jpg" data-original="https://di.gameres.com/attachment/forum/202203/03/091823enemb9l5e0e5xf7f.jpg" width="600" id="aimg_1032403" inpost="1" src="https://di.gameres.com/attachment/forum/202203/03/091823enemb9l5e0e5xf7f.jpg" referrerpolicy="no-referrer">
</font></font></div><div align="center"><font size="2"><font color="#808080">《模拟江湖》开发中版本</font></font></div><br>
好了，今天先聊到这里，如果大家有什么更多想知道的也可以留言，我将持续给大家保持同步我们的最新开发进展。游戏已经在收尾阶段，我们会在不久的时间内展开玩家测试，另外也敬请期待我们的Steam官网上线。<br>
<br>
<font size="2"><font color="#808080"></font></font><br>
  
</div>
            