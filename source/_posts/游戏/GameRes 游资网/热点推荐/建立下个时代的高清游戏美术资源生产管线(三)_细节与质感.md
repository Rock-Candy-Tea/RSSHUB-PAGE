
---
title: '建立下个时代的高清游戏美术资源生产管线(三)_细节与质感'
categories: 
 - 游戏
 - GameRes 游资网
 - 热点推荐
headimg: 'https://di.gameres.com/attachment/forum/202112/23/093708o0dq0ti8i1oot88j.jpg'
author: GameRes 游资网
comments: false
date: Thu, 23 Dec 2021 00:00:00 GMT
thumbnail: 'https://di.gameres.com/attachment/forum/202112/23/093708o0dq0ti8i1oot88j.jpg'
---

<div>   
<div align="center">
<img id="aimg_1025679" aid="1025679" zoomfile="https://di.gameres.com/attachment/forum/202112/23/093708o0dq0ti8i1oot88j.jpg" data-original="https://di.gameres.com/attachment/forum/202112/23/093708o0dq0ti8i1oot88j.jpg" width="600" inpost="1" src="https://di.gameres.com/attachment/forum/202112/23/093708o0dq0ti8i1oot88j.jpg" referrerpolicy="no-referrer">
</div><br>
<font color="#808080">首发知乎：https://zhuanlan.zhihu.com/p/441174803</font><br>
<br>
<a href="https://www.gameres.com/888548.html" target="_blank">上篇文章写到了模型与贴图精度对画面表现的影响</a>，但是统一精度只是游戏美术规范的最基础的内容之一，要表现更出色的画面效果，还有两个不可忽视的重点，细节与质感。<br>
<br>
<strong><font color="#de5650">什么是细节？</font></strong><br>
<br>
在我看来，细节主要体现在3个方面：<br>
<br>
<strong>1，对物体微观表面的呈现</strong><br>
<br>
在生活中我我们都具备这样的常识，不同的材料的物体，它的表面纹理是不一样的。例如金属，皮革，木头，布料，这些常见的材料，我们不用区分他们的外形，也能看出它属于那种材料。<br>
<br>
<div align="center">
<img id="aimg_1025680" aid="1025680" zoomfile="https://di.gameres.com/attachment/forum/202112/23/093709mu9dg9g9slo2skjp.jpg" data-original="https://di.gameres.com/attachment/forum/202112/23/093709mu9dg9g9slo2skjp.jpg" width="600" inpost="1" src="https://di.gameres.com/attachment/forum/202112/23/093709mu9dg9g9slo2skjp.jpg" referrerpolicy="no-referrer">
</div><br>
<div align="center">
<img id="aimg_1025681" aid="1025681" zoomfile="https://di.gameres.com/attachment/forum/202112/23/093709lmrrlsymksymxvra.jpg" data-original="https://di.gameres.com/attachment/forum/202112/23/093709lmrrlsymksymxvra.jpg" width="600" inpost="1" src="https://di.gameres.com/attachment/forum/202112/23/093709lmrrlsymksymxvra.jpg" referrerpolicy="no-referrer">
</div><br>
<strong>2，环境对物体的影响</strong><br>
<br>
环境中的物体不可能是独立存在的，在不同的环境中物体会受到不同的影响，比如会长青苔，发霉，积灰等等，画面细节表现应该包括这些效果，美术资源才会显得生动<br>
<br>
<div align="center">
<img id="aimg_1025682" aid="1025682" zoomfile="https://di.gameres.com/attachment/forum/202112/23/093709uodhz4bx61n1x9wi.jpg" data-original="https://di.gameres.com/attachment/forum/202112/23/093709uodhz4bx61n1x9wi.jpg" width="600" inpost="1" src="https://di.gameres.com/attachment/forum/202112/23/093709uodhz4bx61n1x9wi.jpg" referrerpolicy="no-referrer">
</div><br>
<strong>3，时间对物体的影响</strong><br>
<br>
随着时间的偏移，物体会呈现各种老化反应，比如生锈，脱漆，磨损，腐蚀等等。<br>
<br>
<div align="center">
<img id="aimg_1025683" aid="1025683" zoomfile="https://di.gameres.com/attachment/forum/202112/23/093709tu669x3953oro55o.jpg" data-original="https://di.gameres.com/attachment/forum/202112/23/093709tu669x3953oro55o.jpg" width="600" inpost="1" src="https://di.gameres.com/attachment/forum/202112/23/093709tu669x3953oro55o.jpg" referrerpolicy="no-referrer">
</div><br>
<strong><font color="#de5650">什么是质感？</font></strong><br>
<br>
以前美术资源制作流程中，质感靠美术人员手绘控制。主要在本世代，pbr的引入已经大大改善了实时渲染中的质感问题，大部分现实生活中的材质都有对应的参数。我们只要把参数调对，基本都能实现正确效果。这方面的相关文章很多，就不啰嗦了。<br>
<br>
<div align="center">
<img id="aimg_1025684" aid="1025684" zoomfile="https://di.gameres.com/attachment/forum/202112/23/093710i9cf7km59rzmxckl.jpg" data-original="https://di.gameres.com/attachment/forum/202112/23/093710i9cf7km59rzmxckl.jpg" width="600" inpost="1" src="https://di.gameres.com/attachment/forum/202112/23/093710i9cf7km59rzmxckl.jpg" referrerpolicy="no-referrer">
</div><br>
美术资产决定画面效果的下限，shader规范决定美术资源生产管线。确定了我们需要的效果后，shader就需要根据效果来定制美术资源管线。通常我们会根据材质类型来区分，比如把shader分为丝绸，毛发，玻璃，金属，塑料，棉布，石头，皮肤，橡胶等等等等，也就是还原质感。个人感觉这样的分类方式更接近渲染管线向，也是很多图形向TA负责的内容。但是要做出更生动的画面效果，shader还需要考虑到细节表现的需求，根据美术资产的用途和做法，把shader规划为地面，建筑，道具，车辆，角色，服装，特效等等，他们与渲染管线的材质类型并不是并列关系，而是包含与被包含的关系。举例来说，一个石头材质的建筑，和一个石头材质的桌子，它的做法是完全不一样的。这方面往往是美术向TA来把控。<br>
<br>
可以说，渲染管线决定底层效果，美术生产管线决定上层质量，两方面结合，才能实现高品质的画面效果。目前国内大部分TA能做到还原质感，但是结合美术资源的生产管线来实现对细节的表现做的并不是很到位，这也是国内生产环节脱节，跨部门协同不足导致的。老毛病了属于是。<br>
<br>
那么如何规划一个符合项目需求的资源生产管线呢？我们来看几种常见的手法。<br>
<br>
<strong>1，完全交给美术控制</strong><br>
<br>
TA提供基础的shader，其他完全交给美术，效果好坏全靠美术发挥，这是国内最普遍采用的流程，也是相当初级和粗放的生产流程。<br>
<br>
这个流程不能说是错的，但是它的弊端很多。一个美术资源的标准生产流程就是制作模型，制作贴图，根据需求再做点碰撞LOD什么的，然后导进引擎。一个模型对应一套贴图（固有色、法线、粗糙度、金属度、AO），shader决定质感，细节全靠贴图表现。下图就是这种做法的典型范例，可以看到模型上所有的细节效果，泥土，青苔等都是画在贴图上的。这种做法流程简单，效果比较可控，如果想做流程升级也简单，就是上扫描。参考我第一篇系列文章<<a href="https://www.gameres.com/883388.html" target="_blank">建立下个时代的高清游戏美术资源生产管线(一)：摄影测量建模</a>><br>
<br>
但是这种做法也有几个明显的弊端，首先因为一个shader不可能包含所有的着色模型，只能表达一个主体着色模型，虽然我们可以通过调整粗糙度，金属度/高光或者光泽度的方式稍微区分一下不同材质的效果，但是始终是有缺陷的。材质效果不够准确。<br>
<br>
其次贴图的承载能力受分辨率限制，虽然我们可以通过规划贴图精度的做法来压榨贴图精度上限，但是贴图数量和分辨率不能无限增加，为了提升精度只能拆分贴图；而为每个模型都分配独立贴图会导致显存爆炸，也不符合游戏资产的标准。虚幻5的nanite和虚拟纹理可以部分解决这个问题，但因为nanite支持的材质类型有限，现阶段还无法成为主流做法。<br>
<br>
<div align="center">
<img id="aimg_1025685" aid="1025685" zoomfile="https://di.gameres.com/attachment/forum/202112/23/093711jeizmfdid0narboe.jpg" data-original="https://di.gameres.com/attachment/forum/202112/23/093711jeizmfdid0narboe.jpg" width="600" inpost="1" src="https://di.gameres.com/attachment/forum/202112/23/093711jeizmfdid0narboe.jpg" referrerpolicy="no-referrer">
</div><br>
<div align="center">
<img id="aimg_1025686" aid="1025686" zoomfile="https://di.gameres.com/attachment/forum/202112/23/093711jgu2lg00q2d9fbdu.jpg" data-original="https://di.gameres.com/attachment/forum/202112/23/093711jgu2lg00q2d9fbdu.jpg" width="600" inpost="1" src="https://di.gameres.com/attachment/forum/202112/23/093711jgu2lg00q2d9fbdu.jpg" referrerpolicy="no-referrer">
</div><br>
如果把这个做法放大到整个关卡甚至项目层面，更能充分感受到其优劣对比<br>
<br>
以虚幻官方提供的quixel免费案例AbandonedFactory为例，下图整个关卡完全使用扫描资产搭建，可以看出贴图细节非常丰富，效果很真实。<br>
<br>
<div align="center">
<img id="aimg_1025687" aid="1025687" zoomfile="https://di.gameres.com/attachment/forum/202112/23/093712vqxzjxxjmzf3mmnw.jpg" data-original="https://di.gameres.com/attachment/forum/202112/23/093712vqxzjxxjmzf3mmnw.jpg" width="600" inpost="1" src="https://di.gameres.com/attachment/forum/202112/23/093712vqxzjxxjmzf3mmnw.jpg" referrerpolicy="no-referrer">
</div><br>
<div align="center">
<img id="aimg_1025688" aid="1025688" zoomfile="https://di.gameres.com/attachment/forum/202112/23/093713ruqgpgwxppez33wq.jpg" data-original="https://di.gameres.com/attachment/forum/202112/23/093713ruqgpgwxppez33wq.jpg" width="600" inpost="1" src="https://di.gameres.com/attachment/forum/202112/23/093713ruqgpgwxppez33wq.jpg" referrerpolicy="no-referrer">
</div><br>
但是如果我们把视角拉的再近一点，就能看出很多明显问题，比如贴图拉伸，贴图精度不足导致肉眼可见的大量马赛克等。<br>
<br>
<div align="center">
<img id="aimg_1025689" aid="1025689" zoomfile="https://di.gameres.com/attachment/forum/202112/23/093713rl4tatqo4qfqnfwf.jpg" data-original="https://di.gameres.com/attachment/forum/202112/23/093713rl4tatqo4qfqnfwf.jpg" width="600" inpost="1" src="https://di.gameres.com/attachment/forum/202112/23/093713rl4tatqo4qfqnfwf.jpg" referrerpolicy="no-referrer">
</div><br>
打开资产我们可以看到单张贴图尺寸已经不小，都是4096精度，但是4K精度要表现一个7。8米高的厂房还是很吃力，4096=512*8，相当一平方米的贴图精度不足512，平铺8次，大概也就是一个手游标准，放在PC上是不够看的。并且贴图中相似内容太多，有大量重复制作，以游戏资产的标准来看是不合规的。游戏资产非常在意重用率，如果某个非重要资源在项目中只出现一次，那这个资源最好砍掉。尤其是贴图层面。<br>
<br>
<div align="center">
<img id="aimg_1025690" aid="1025690" zoomfile="https://di.gameres.com/attachment/forum/202112/23/093713lry66a22n0falaza.jpg" data-original="https://di.gameres.com/attachment/forum/202112/23/093713lry66a22n0falaza.jpg" width="600" inpost="1" src="https://di.gameres.com/attachment/forum/202112/23/093713lry66a22n0falaza.jpg" referrerpolicy="no-referrer">
</div><br>
为什么单独在这个范例上花费这么大篇幅呢。我在帮很多公司和团队进行美术效果优化的时候，最常遇到的问题就是美术资源生产缺乏规范，拿到需求就开工了，最后资源量爆炸，一个关卡能干出几百张贴图来。而国内技术美术体系尚不成熟，很多团队技美很少直接介入资源生产环节，最后优化的时候就无从下手，TA通常具备一个大的优化概念，也知道落地需要的技术细节，但是很难执行到美术层面上。举例说明就是知道需要减少贴图数量，降低drawcall，减少贴图对显存的占用，但是哪张贴图该砍哪张不该砍，TA无法判断，教给美术团队去做主更不靠谱，他们要是有这个概念就不会做成这样了。这种情况也很难优化。重新规划资源制作方式等于大部分美术资产重做，这会造成极大的成本浪费。毕竟游戏里的美术资源大改一次就是几百万上千万没了。所以老板要么就只能选择咬牙忍着，项目质量差点就差点，要么就是咬牙重做，打落牙往肚里吞。<br>
<br>
quixel这个案例就是一个比较典型的情况。当然这个关卡只是为了展示作用，人家也不是按游戏美术规格做的。但是如果各位TA或者美术想练习优化，不妨用这个关卡练手，在不影响画面效果的情况下，把整个关卡的贴图数量控制在10套以内(大概40张)，且贴图大小总和加起来不超过2张8192。shader控制在5个左右(不算instance)。<br>
<br>
<strong>2，建立材质库，使用混合材质制作</strong><br>
<br>
这种做法的宏观思路就是把模型，贴图，材质实现一定程度的解耦，在制作流程上互不干涉，可以并行推进。第一步还是先建立材质库，定义好项目需要的材质种类效果规范，然后建立纹理库，同过各种无缝纹理的混合，实现比较丰富的变化。美术只需要标记mask和ID贴图，配合贴花，就可以实现丰富的材质和纹理效果。<br>
<br>
<div align="center">
<img id="aimg_1025691" aid="1025691" zoomfile="https://di.gameres.com/attachment/forum/202112/23/093714bd4cdj8c61ybegdd.jpg" data-original="https://di.gameres.com/attachment/forum/202112/23/093714bd4cdj8c61ybegdd.jpg" width="600" inpost="1" src="https://di.gameres.com/attachment/forum/202112/23/093714bd4cdj8c61ybegdd.jpg" referrerpolicy="no-referrer">
</div><br>
<div align="center">
<img id="aimg_1025692" aid="1025692" zoomfile="https://di.gameres.com/attachment/forum/202112/23/093715a4012gg4nhgixm1y.jpg" data-original="https://di.gameres.com/attachment/forum/202112/23/093715a4012gg4nhgixm1y.jpg" width="600" inpost="1" src="https://di.gameres.com/attachment/forum/202112/23/093715a4012gg4nhgixm1y.jpg" referrerpolicy="no-referrer">
</div><br>
<div align="center">
<img id="aimg_1025693" aid="1025693" zoomfile="https://di.gameres.com/attachment/forum/202112/23/093715c0pff6u0sxm07pzz.jpg" data-original="https://di.gameres.com/attachment/forum/202112/23/093715c0pff6u0sxm07pzz.jpg" width="600" inpost="1" src="https://di.gameres.com/attachment/forum/202112/23/093715c0pff6u0sxm07pzz.jpg" referrerpolicy="no-referrer">
</div><br>
<div align="center">
<img id="aimg_1025694" aid="1025694" zoomfile="https://di.gameres.com/attachment/forum/202112/23/093715mkvd7nz2y76e242e.jpg" data-original="https://di.gameres.com/attachment/forum/202112/23/093715mkvd7nz2y76e242e.jpg" width="600" inpost="1" src="https://di.gameres.com/attachment/forum/202112/23/093715mkvd7nz2y76e242e.jpg" referrerpolicy="no-referrer">
</div><br>
<div align="center">
<img id="aimg_1025695" aid="1025695" zoomfile="https://di.gameres.com/attachment/forum/202112/23/093716epmrhit0dt77idpt.jpg" data-original="https://di.gameres.com/attachment/forum/202112/23/093716epmrhit0dt77idpt.jpg" width="600" inpost="1" src="https://di.gameres.com/attachment/forum/202112/23/093716epmrhit0dt77idpt.jpg" referrerpolicy="no-referrer">
</div><br>
这也是目前业内的主流做法。具体可以参考这篇文章：<br>
<br>
FreddyHu：从Paragon来分析工业化纹理制作Pipeline<br>
<https://zhuanlan.zhihu.com/p/364638972><br>
<br>
这种做法的好处在于：<br>
<br>
一定程度的打断了模型，贴图，材质的关联性，各个部分可以并行推进制作，大大提升了制作效率。<br>
<br>
通过建立材质库和纹理库，可以有效的在项目初期就规划好总的美术资源生产量，避免同类材质的重复制作，增加效率，减少内耗。<br>
<br>
细节表现更加丰富，各种效果可以灵活调整。<br>
<br>
坏处是，增加了美术的学习成本，无法直观在DCC软件中查看最终效果，可能有部分美术难以理解这种制作思路。如果美术不能熟练使用引擎很难调出正确的效果。<br>
<br>
消耗增加，贴图多层混合会增加采样成本，不过从宏观角度讲，项目中总的贴图数量是大大减少的。<br>
<br>
在移动平台上使用限制极大。<br>
<br>
<strong>3，从资源生产源头解耦</strong><br>
<br>
我们都知道，大多数情况下，面数并不是性能瓶颈。在当前硬件环境下，哪怕是移动平台，引擎对面数也有很好的支持，配合LOD，视距裁剪，遮挡剔除等优化手段，运行平台对同屏面数一般都有比较大的宽容度。贴图，骨骼，动画资源，光影才是比较难做优化的地方。那么最有效的优化手段，就是从生产环节源头下手减少贴图尺寸和数量。<br>
<br>
其实一般游戏项目中出现的材质类型也就十几种到几十种，如果整个项目都是基于这些基础材质类型制作，那么项目中的贴图数量会大大减少，优化压力也小很多。而一般游戏中，世界观设定都是稳定统一的，也就是意味着表现游戏世界的美术资源，其对细节和质感的要求也是统一的，那么我们可以在资源制作规划上，把这种统一性从shader到贴图层面就做好，这样可以就实现模型和贴图的解耦。<br>
<br>
通俗的解释就是，我们做项目资源规划的时候，就把细节和质感绑定在贴图与材质上。然后通过拆分模型和UV的方式，实现对这些资源的重复使用。<br>
<br>
死亡空间是这方面比较典型(极端)的范例<br>
<br>
<div align="center">
<img id="aimg_1025696" aid="1025696" zoomfile="https://di.gameres.com/attachment/forum/202112/23/093716xq9210sp00oqtsq0.jpg" data-original="https://di.gameres.com/attachment/forum/202112/23/093716xq9210sp00oqtsq0.jpg" width="600" inpost="1" src="https://di.gameres.com/attachment/forum/202112/23/093716xq9210sp00oqtsq0.jpg" referrerpolicy="no-referrer">
</div><br>
在死亡空间的美术资源中，基本不存在为特定模型制作的独立贴图，所有的模型和贴图都是可以随意组合拼接的。这就意味着可以用很小尺寸的贴图实现丰富的效果。<br>
<br>
死亡空间单个关卡中使用的贴图，最大尺寸不超过512，大部分为256甚至128，整个关卡贴图加起来不超过15M。这已经比很多手游规格都低了，而这还是一款主机和PC平台的游戏。实际上，单从贴图来看，你很难看出这张贴图属于哪个模型。它可能用在墙上，地面上，天花板上，甚至飞船的某个零件上。为了实现最大程度的贴图复用，甚至游戏中的lightmap也是美术手动创建。这样处于同样光照环境下的同类物体不会产生多余的lightmap。最终在游戏中的表现你完全看不出来是以极低的资源规格制作的游戏。<br>
<br>
<div align="center">
<img id="aimg_1025697" aid="1025697" zoomfile="https://di.gameres.com/attachment/forum/202112/23/093716nq15zyoq5oqyppls.jpg" data-original="https://di.gameres.com/attachment/forum/202112/23/093716nq15zyoq5oqyppls.jpg" width="514" inpost="1" src="https://di.gameres.com/attachment/forum/202112/23/093716nq15zyoq5oqyppls.jpg" referrerpolicy="no-referrer">
</div><br>
一个关卡的贴图也就这么多，资源量被限制得死死的。<br>
<br>
<div align="center">
<img id="aimg_1025698" aid="1025698" zoomfile="https://di.gameres.com/attachment/forum/202112/23/093717cofzc6do6ahoooyf.jpg" data-original="https://di.gameres.com/attachment/forum/202112/23/093717cofzc6do6ahoooyf.jpg" width="600" inpost="1" src="https://di.gameres.com/attachment/forum/202112/23/093717cofzc6do6ahoooyf.jpg" referrerpolicy="no-referrer">
</div><br>
通过建立统一的美术风格，在项目顶层规划上便实现模型和贴图的解耦。从而减少整体美术制作量和材质复杂程度，而前期规划又可以更好的推动美术风格的统一，传统的美术生产流程是原画---模型---贴图---材质。而解耦后的生产流程则是贴图----材质----原画----模型。模型生产被放到了最后，这样也可以大幅度减少美术资源修改带来的影响。<br>
<br>
<div align="center">
<img id="aimg_1025699" aid="1025699" zoomfile="https://di.gameres.com/attachment/forum/202112/23/093717f55m3vi0uyme5hyz.jpg" data-original="https://di.gameres.com/attachment/forum/202112/23/093717f55m3vi0uyme5hyz.jpg" width="600" inpost="1" src="https://di.gameres.com/attachment/forum/202112/23/093717f55m3vi0uyme5hyz.jpg" referrerpolicy="no-referrer">
</div><br>
<div align="center">
<img id="aimg_1025700" aid="1025700" zoomfile="https://di.gameres.com/attachment/forum/202112/23/093717xbbviog9brbkivzk.jpg" data-original="https://di.gameres.com/attachment/forum/202112/23/093717xbbviog9brbkivzk.jpg" width="600" inpost="1" src="https://di.gameres.com/attachment/forum/202112/23/093717xbbviog9brbkivzk.jpg" referrerpolicy="no-referrer">
</div><br>
这种做法的好处在于：<br>
<br>
优化方便，整体效果可控。美术品质和制作人员水平几乎完全脱钩。适合量产。工业化到极致了属于是。<br>
<br>
缺点在于：<br>
<br>
需要美术总监对整体效果有极强把控能力。<br>
<br>
制作过程繁琐，非常折磨美术，除了美术总监几乎没人知道最终效果啥样。<br>
<br>
比较吃项目类型，项目类型对制作流程影响很大<br>
<br>
当然在实际项目开发中，美术资源的生产方式不可能死用一套流程，一般都是这几种做法混用，由美术总监做整体把控根据需求选择不同的做法。通过我这几篇文章，大家可以看出，我很少写某个具体效果的实现，更多的是从方法论的角度出发，宏观的去分析项目需要的生产管线，这也是我写这个系列的主题，去分析做事的思路，方向定了，再解决细节问题。如果做事的方向错了，那么微观上的问题处理得再漂亮，对整个项目的品质和走向也于事无补。<br>
<br>
<font size="2"><font color="#808080"></font></font><br>
<br>
  
</div>
            