
---
title: '如何拥有最丝滑流畅的游戏体验：再谈帧率、刷新率、输入延迟等'
categories: 
 - 游戏
 - 小黑盒
 - 游戏新闻
headimg: 'https://imgheybox.max-c.com/bbs/2021/09/23/9ca97c8d5aa665b78764fd00c2cd26b9/thumb.jpeg'
author: 小黑盒
comments: false
date: Thu, 23 Sep 2021 17:57:49 GMT
thumbnail: 'https://imgheybox.max-c.com/bbs/2021/09/23/9ca97c8d5aa665b78764fd00c2cd26b9/thumb.jpeg'
---

<div>   
<p>本文内容源半搬运半整理自油管up主Battle(non)sense的视频。此up主非常硬核且专业，测试的方法科学，数据准确，结果可信。有条件的可以去油管关注他给他点赞。</p><hr><p>本文的目的主要有两个：降低输入延迟+消除屏幕撕裂，以达到最丝滑最稳定的游戏体验。</p><p>本文涵盖了多个知识点，例如G-Sync、Nvidia Reflex、垂直同步、GPU瓶颈、帧率限制、屏幕撕裂等，涉及到up主的多个视频，详细论证每一项的测试过程和结果太复杂了，我这里就直接先放上结论，然后用问答的形式尽量解释各个知识点和解答大家可能产生的疑问。没耐心的小伙伴可以直接抄作业，有兴趣的不妨耐心看完，你一定会有所收获。</p><h2>先放结论</h2><p>三套设置如图。大部分玩家可以对所有游戏使用<b>基本</b>或<b>丝滑</b>的设置，即可保证画面流畅丝滑无撕裂+低且稳定可控的输入延迟。</p><p><img class="lazy" data-height="1128" src="https://imgheybox.max-c.com/bbs/2021/09/23/9ca97c8d5aa665b78764fd00c2cd26b9/thumb.jpeg" data-width="2005" referrerpolicy="no-referrer"></p><p>简单解释几点：</p><ul><li>基本方案中的缺点指的是当你的显卡不能维持稳定的帧率时候，例如你使用144Hz显示器，帧率限制在140fps，然而游戏中你很多时候或压根就跑不到140fps，那这个时候帧率限制实际上是没有作用的，就会进入GPU瓶颈状态，输入延迟会显著提升。但如果你所有游戏都可以稳稳的跑到140fps，那这个方案对你来说就是最简单且最优的。</li><li>丝滑方案中的缺点指的是你需要根据不同游戏寻找一个合适的帧率限制，例如你用144Hz显示器玩Apex，绝大部分情况下帧率都在120fps以上，那你就把Apex的帧率限制在120fps。玩战地大部分时间跑到130+，那你就把战地帧率限制为130fps。这样能够获得最低且稳定的输入延迟，同时画面流畅无撕裂，是最优解，唯一缺点就是要自己花时间研究。</li><li>个人建议是全局按照基本设置，个别游戏针对性的进行丝滑设置。</li></ul><p>如果游戏支持Nvidia Reflex低延迟技术，那么可以做以下调整。</p><p><img class="lazy" data-height="1128" src="https://imgheybox.max-c.com/bbs/2021/09/23/e69ae3570849bc940b337a97b5ccd24e/thumb.jpeg" data-width="2005" referrerpolicy="no-referrer"></p><h4 class="img-desc">当游戏支持Nvidia Reflex时做出的一点调整</h4><p>接下来我会解答一些可以预见的疑问或争议。上面的结论看不明白的地方你也可能在下文找到答案。</p><h2>1. 你居然开启垂直同步？睿智吧？ </h2><p>垂直同步干两件事情，一是把帧率锁定在显示器最高刷新率，避免显卡输出多余显示器能处理的帧率；二是阻止显卡在显示器更新完当前帧之前输出新的帧给显示器，显示器处理完这一帧了，显卡才会给显示器下一帧。这样能够完全消除屏幕撕裂，但会带来很高的输入延迟，因为你的操作不会及时的反应到画面上。</p><p>然而在基本和丝滑方案里，帧率被限制在显示器刷新率以下，此时垂直同步实际上不起作用的，不会带来输入延迟。</p><p>那你可能又要问了，我都开启G-Sync并且限制帧率了，垂直同步不是不起作用呢？为什么还要开呢？那是因为如果不开，G-Sync生效状态下，屏幕底部仍然偶尔会出现撕裂。</p><p><img class="lazy" data-height="1437" src="https://imgheybox.max-c.com/bbs/2021/09/23/4cfd49b8a5ff8f9603a95be2d5e4c4c5/thumb.png" data-width="2556" referrerpolicy="no-referrer"></p><h4 class="img-desc">G-Sync开启，FPS限制开启，垂直同步关闭：底部依然会出现撕裂</h4><p><img class="lazy" data-height="1438" src="https://imgheybox.max-c.com/bbs/2021/09/23/173f71e2b8b425a23d1a3e43de4a4949/thumb.png" data-width="2552" referrerpolicy="no-referrer"></p><h4 class="img-desc">垂直同步开启：每一帧都是完美无撕裂的</h4><p>此时的垂直同步只会为G-Sync起到稳定帧时的作用，是一种帧补偿机制，避免帧时的并不会带来的屏幕撕裂。细说的话太技术向，这里就不谈了。总之，<b>开启G-Sync+垂直同步+限制帧率低于显示器最高刷新率4帧 = 最优解</b>。</p><p>下面放一些测试数据：</p><p><img class="lazy" data-height="1113" src="https://imgheybox.max-c.com/bbs/2021/09/23/c631871defdd5b7e799d2f9b65fb0897/thumb.png" data-width="1992" referrerpolicy="no-referrer"></p><h4 class="img-desc">144Hz显示器，游戏内置帧率限制为139fps，开启G-Sync。开启和关闭垂直同步状态下，输入延迟没有变化</h4><h2>2. FPS不是越高越好么？为什么要限制帧率？GPU瓶颈是什么？<br></h2><p>是也不是，限制帧率的原因有两点。</p><p>一是为了消除屏幕撕裂。当帧率大于显示器刷新率时就会带来屏幕撕裂，不管你是不是G-Sync的显示器。另外G-Sync在这个时候是不起作用的。</p><p>二是为了降低输入延迟。尽管几乎所有人都认为FPS越高就代表着系统延迟越低，但实测结果却出乎意料。实际情况帧数较高而GPU满载时的输入延迟要显著高于帧数较低而GPU非满载时。具体看以下测试数据。</p><p><img class="lazy" data-height="1126" src="https://imgheybox.max-c.com/bbs/2021/09/23/ac55f54f06c7cd19b8de34ff0a56de94/thumb.png" data-width="2001" referrerpolicy="no-referrer"></p><p>这组数据我们重点看上下红框数据的对比。（其他数据在比较当时A卡推出的Anti-Lag和N卡的低延时模式的效果，这是另外一个话题，而且情况有变，我们先不谈。）</p><p>可以看到，当GPU负载率在75%左右的时候，尽管此时的帧数比上面要低20多帧，输入延迟依然比GPU满载的时候降低了40%。提高帧率限制到仅比满载时低个几帧，GPU占用率为97%以下时，输入延迟仍然比满载的时候要低了很多。</p><p><img class="lazy" data-height="1124" src="https://imgheybox.max-c.com/bbs/2021/09/23/48acf43ddbffdda42e7e741214dd1640/thumb.png" data-width="1996" referrerpolicy="no-referrer"></p><p>我们降低以下渲染分辨率，把帧率拉高，看看高帧率下的表现。结果依然是非满载状态下的输入延迟显著低于满载状态下的输入延迟。</p><p><img class="lazy" data-height="1125" src="https://imgheybox.max-c.com/bbs/2021/09/23/c67f18de4044424ba96ec733786f150d/thumb.png" data-width="2003" referrerpolicy="no-referrer"></p><p>看下别的游戏中，结果也是一样。稍微限制一下帧率，保证GPU不满载，即可降低输入延迟。</p><p>这是为什么呢？原因是当GPU满载时，就会进入GPU瓶颈，此时CPU跑在GPU前面，发给GPU的渲染任务不能被及时完成，就会堆积在渲染序列。当渲染序列满了，CPU就得等GPU完成任务之后，再安排新的任务，由此造成延迟。</p><p><img class="lazy" data-height="833" src="https://imgheybox.max-c.com/bbs/2021/09/23/7d7345a6f44cd0cef16c53f8f6235f98/thumb.png" data-width="1599" referrerpolicy="no-referrer"></p><p>一个好的帧率限制工具做的事情就是通过限制帧率来创造一个类似CPU瓶颈的场景。CPU不会跑在显卡前面，渲染序列一直是空的，显卡坐等渲染，来一帧渲一帧，完全应付的过来。这样就不会造成渲染延迟。</p><p><img class="lazy" data-height="839" src="https://imgheybox.max-c.com/bbs/2021/09/23/21dbab59e32e8a5c5704a30fecc3e9fd/thumb.png" data-width="1579" referrerpolicy="no-referrer"></p><p>这里插一句，整个系统延迟分为很多部分，每一部分都会影响到我们对延迟的感受。下面分享一张图，就不展开来说了，说不完。</p><p><img class="lazy" data-height="1818" src="https://imgheybox.max-c.com/bbs/2021/09/23/57605b1ee52281292164087ca0b8839f/thumb.png" data-width="3840" referrerpolicy="no-referrer"></p><h2>3. 用什么工具来限制帧率？</h2><p>只要游戏支持，就优先使用游戏自带的设置，因为他是从引擎级别限制的，带来的输入延迟最低。</p><p>其他游戏推荐使用RTSS或N卡控制面板，他们的优势是帧时极其稳定，画面最丝滑流畅。</p><p><img class="lazy" data-height="1440" src="https://imgheybox.max-c.com/bbs/2021/09/23/74c3ab9adabf8212f6a787fb4cc2f3d6/thumb.png" data-width="2554" referrerpolicy="no-referrer"></p><h4 class="img-desc">不同帧率限制方式的延迟对比，可以看到游戏内置设置的延迟最低</h4><h2>4. Nvidia Reflex是什么，能聊聊么？</h2><p>基于问题3中所说的机制，Nvidia Reflex使得开发者能够让游戏引擎更好的处理CPU和GPU之间的关系，保证CPU给的每一帧GPU都能及时渲染，从不堆积渲染序列。</p><p>你可以把它简单理解为一个进化版的帧率限制器，而且是一个动态的帧率限制器，启用Reflex就不需要限制帧率了。它能够让你享受最大帧率的同时，还能避免进入GPU瓶颈而导致系统延迟增加。</p><p>你无需做什么，这是游戏开发者干的事，只要游戏支持，你开启那个选项就好了。很多FPS游戏都支持Reflexl了，如Apex英雄和COD。</p><p><img class="lazy" data-height="1352" src="https://imgheybox.max-c.com/bbs/2021/09/23/22d00f64e18ff679e3ee1e0c64eb72a0/thumb.png" data-width="2399" referrerpolicy="no-referrer"></p><p>可以看到，开启Reflex后，仅仅损失了1fps，输入延迟却降低到与CPU不满载时差不多。</p><p>如果没有GPU瓶颈的问题，例如你FPS限制为140，GPU无压力，从来不满载，你的输入延迟已经是最低了，开启Reflex没用但也没有任何负面影响。</p><h2>5. 帧率、屏幕刷新率与输入延迟的关系到底是怎样的？</h2><p>还是看图说话吧。作者分别在60Hz、144Hz、240Hz和360Hz的显示器上测试了不同帧率下的输入延迟情况。</p><p><img class="lazy" data-height="1437" src="https://imgheybox.max-c.com/bbs/2021/09/23/f7b53c4c24235c304f478a733c567d84/thumb.png" data-width="2557" referrerpolicy="no-referrer"></p><p>看数据我们几个有趣的发现：</p><ul><li>确实FPS越高，输入延迟越低，但越往后提升越不明显。</li><li>同样是运行144FPS，用144Hz的显示器比用60Hz不光平均输入延迟显著降低，标准差也降低，即更加稳定。所以，换掉你的60Hz古董显示器吧！</li><li>用144Hz显示器跑240FPS甚至360FPS，输入延迟降低的就微乎其微了，与其追求那点无关紧要的输入延迟，不如限制帧率在140FPS，启用G-Sync，让画面更加丝滑流畅无撕裂更加有价值。</li><li>如果你能跑到240FPS甚至360FPS，那么换240Hz或360Hz的显示器还是可以那么一点点提升的，钱也不白花doge.</li><li>如果你是60Hz显示器，那就不要考虑消除撕裂了，忍着吧，输入延迟影响更大。</li></ul><h2>6. 什么是屏幕撕裂？能具体说说么？</h2><p>我们都知道，当显示器显示一帧画面时，它实际上是从顶部逐行刷新到底部的。读取的是显卡前台缓存中的内容。只不过这个过程很快，我们肉眼分辨不出来。60Hz下，就是16.6ms刷一屏的内容。</p><p><img class="lazy" data-height="1440" src="https://imgheybox.max-c.com/bbs/2021/09/23/4905bdfbca2a42b01f56d2ae0e3c9bb5/thumb.png" data-width="2546" referrerpolicy="no-referrer"></p><h4 class="img-desc">正在更新帧A</h4><p>当帧率大于显示器刷新率时，显示器还没更新完帧A，显卡把帧B渲染好送过来了，然后显卡接着往下刷新的时候刷出来其实是帧B的内容。</p><p><img class="lazy" data-height="1440" src="https://imgheybox.max-c.com/bbs/2021/09/23/54510a742147b4648ce3fb8bac6b347b/thumb.png" data-width="2554" referrerpolicy="no-referrer"></p><h4 class="img-desc">正在更新帧B</h4><p>还没刷到底呢，显卡又把帧C送过来了。</p><p><img class="lazy" data-height="1440" src="https://imgheybox.max-c.com/bbs/2021/09/23/0ad3be7cece0878aa3701140f248cc95/thumb.png" data-width="2555" referrerpolicy="no-referrer"></p><h4 class="img-desc">屏幕撕裂</h4><p>此时屏幕上就会出现撕裂，随着帧率超过刷新率越多，撕裂处也就越多。尽管这个时候系统延迟不高，我们移动鼠标还是非常跟手，但是屏幕的严重撕裂会让画面看起来很糟糕，而且并不流畅。</p><p>前面提到，垂直同步消除撕裂的机制是让显卡等着，显示器刷完一屏后再从显卡那里拿新的一帧。这样保证了画面的完整无撕裂，但是代价是输入延迟。</p><p>而G-Sync和FreeSync的原理就是显示器是可变刷新率，在支持的帧率范围内，刷新率根据帧率变化而实时变化，做到画面刷新的即时且完整无撕裂。为了使这个技术生效，我们要把帧率限制在显示器支持的最大帧率以下，例如使用144Hz显示器就把帧率限制为140fps。</p><p>其实还有个快速垂直同步，那个体验很差，就不提了，感兴趣可以自己搜索一下。</p><hr><p><b>尾巴：</b>整理起来比我预想的要累，为了谈某一点又不得不谈及其他几点，很难三言两语讲全讲清楚。结尾想再总结一下知识点，但有点理不清楚。索性分享一下我的使用实例，希望能够帮到大家。<br></p><p>我的显示器买的早，华硕PG348Q，3440*1440分辨率，刷新率只有100Hz。</p><p>显卡是3080 Ti，绝大部分游戏都可以跑满100fps，还能拉高渲染比例。个别画质拉满跑不到100fps的游戏也不是那种对输入延迟要求高的游戏，所以不用考虑。</p><p>于是，我在N卡控制面板中设置全局最大帧率设为96，垂直同步设为应用程序控制，并在游戏内开启。我喜欢锐利的画面，于是还开了0.5的图像锐化。</p><p>针对竞技类FPS游戏，我在单独程序设置里把最大帧率停用，然后在游戏内限制最大帧数为96。</p><p>这样几乎所有的游戏都可以流畅无撕裂运行，切输入延迟低，体验完美。</p><p>以后可能会考虑换更高刷新率的屏幕，毕竟对于竞技类FPS游戏，100Hz还是低了点。</p><p><b>完。</b></p>  
</div>
            