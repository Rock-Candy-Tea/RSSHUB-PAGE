
---
title: '我们在构建微服务时犯的最大错误'
categories: 
 - 编程
 - Dockone
 - 周报
headimg: 'https://picsum.photos/400/300?random=7853'
author: Dockone
comments: false
date: 2021-08-10 06:09:13
thumbnail: 'https://picsum.photos/400/300?random=7853'
---

<div>   
<br>悲剧分三段<br>
<br>​   在网上引起批评的最快方法是撰写有关微服务的文章。每个人都有意见，不管你是支持它还是批评它，总有人会找到你并告诉你你错了。我就很喜欢这样。我最近有幸写了几篇关于这个主题的热门文章，评论总是滑稽和智慧的完美结合，但它们对于提醒我真正的错误特别有用。<br>
<br>​   让我们面对现实：构建分布式系统可能会变得复杂。公平地说，构建单体系统也可能很复杂。但不同的是，我们大多数人选择了比我们需要的更复杂的分布式。任何有经验的开发人员或架构师都会告诉你，大多数人实际上并不需要完全接受微服务。我所说过的所有都暗示了两种情况的融合，并且仅在绝对必要的情况下。<br>
<br>​   但这不像我的团队，当时我有那种智慧。所以我们先跳了进去，并且犯了书中的每一个错误。如下是一些比较严重的错误。<br>
<br><h4>1.定制化构建太多</h4>​   服务之间的通信是微服务领域的一个大问题。有人会说这是最大的问题，都是由于分布式事务的原因。在电子商务应用程序的经典示例中，创建新订单的过程可能涉及在多个不同服务中发生的操作，例如订单和客户服务。在单体应用中，这只是一个函数调用，但是对于微服务，这并不是那么简单。您可以使用saga来处理多服务事务，但这可能让你感到毛骨悚然，sagas实现起来并不容易。<br>
<br>​   尽管如此，我们并不知道更好的方法，所以我们使用基于编排的sagas来解决这个问题，好处是我们定制了每个服务使用的消息代理来通信和执行这些sagas。使用Redis流和Go来构建它，最终结果是整洁的，建造过程也超级有趣。但是在我们实现这一目标的过程中，我们本可以将整个应用程序打造为一个整体，大多数开始就失败了。<br>
<br><h4>2.不限制复杂性</h4>​   这归结为经验：从技术上讲，有些技术路线不应该使用。在给定的项目时间表和具有特定能力的特定团队下，有些技术路线您不应该探索。而我们的问题是认为微服务是万能的。<br>
<br>​   这种认知是不正确的。在某些时候，您意识到仅仅因为在YouTube主题演讲中有些事情听起来可行，并不意味着它对您的项目可行。如果我们对愿意处理的复杂性设置一个上限，就会为自己节省一些不必要的时间。我想你可以用另一种方式来说明这个错误，就是”我们给了自己太多时间“。如果我们有更短的截止日期，这些问题就会自动消除。<br>
<br>​   重复一遍，这里有一条大道可以走。将复杂度限制设置的太低，你最终会驾驶一架由筷子组成的飞机，但是把它设置的太高，你永远不会离开跑道。无论哪种情况，你都被搞砸了。知道如何切馅饼通常来自经验。所以我建议做出最好的猜测并在medium上广播，以吸引更聪明的工程师的注意，他们会让你直截了当。<br>
<br><h4>3.松散的定义</h4>​   最后，一个东西可以解决我们的大部分问题。归根结底，分布式架构的存在就是来解决这个问题。因此，在决定使用它前，您需要知道问题是什么。而且您还需要了解您的问题，以确定它的匹配程度，而我们都不知道。<br>
<br>​   因为谁会一开始就花几天的时间来定义问题？这种纪律是罕见的，尤其是在需要立即构建的环境中。现在，我知道您“失去”正确定义问题的时间可以通过更专注的实现来节省出来。换句话说，你花更少的时间构建错误的东西，时间少多了。因此，明智的做法是确保您正在构建的内容是正确的。<br>
<br>​   然而，我们没有。我们的弯路不仅耗费了时间和金钱，他们最终也变得毫无意义。我们建造并修复了我们不需要的东西。完成后，我们没有使用它们。在开发期间，我们还不如一直在办公室玩英雄联盟，也可能会鼓舞士气。因此，清楚的了解您的问题和解决方案并不是一个糟糕的主意。<br>
<br>​   话说回来，这有什么好玩的？在我看来，你也可能会浪费大量时间构建错误的东西，在这个过程中收集经验来写文章，然后在网上抱怨。这对我们有用。我的意思是，我们还活着讲述了这个故事。<br>
<br>原文链接：<a href="https://medium.com/codex/the-biggest-mistakes-we-made-building-microservices-10b555d80dae">The Biggest Mistakes We Made Building Microservices</a> (翻译：xiebo)
                                
                                                              
</div>
            