
---
title: '2020 年 CNCF 中国云原生调查报告'
categories: 
 - 编程
 - Dockone
 - 周报
headimg: 'https://cors.zfour.workers.dev/?http://dockone.io/uploads/article/20210429/2e67bfb55a73dc9b416586ea73095d0e.jpg'
author: Dockone
comments: false
date: 2021-05-01 04:04:10
thumbnail: 'https://cors.zfour.workers.dev/?http://dockone.io/uploads/article/20210429/2e67bfb55a73dc9b416586ea73095d0e.jpg'
---

<div>   
<br>CNCF 定期进行社区调研，以便更好地了解开源技术和云原生技术的应用情况。本次是在中国进行的第四次云原生调查，以期更加深入地掌握中国云原生实施的步伐和速度。本次调查于 2020 年 12 月和 2021 年 1 月完成，调查对象 439 人中 91% 来自亚洲。<br>
<br>中国云原生调查的主要结论：<br>
<ul><li>容器持续迅猛增长。68% 的机构在生产过程中使用容器，比去年增长了 39%，相比 2 年前增长 240%。</li><li>Kubernetes 已经无处不在，生产中使用 Kubernetes 的比例已从去年的 72% 增长到了 82%。</li><li>公有云重回榜首，46% 的调查对象都使用公有云，比去年的 36%高， 但比 2018 年的 51%低。</li><li>自动化程度持续提高。30% 调查对象生产使用自动化发布周期，73% 运行 CI/CD 流水线。</li><li>可观察性工具被广泛使用。95% 的单位使用监控工具，94% 使用日志，85% 使用分布式追踪。</li></ul><br>
<br><h3>容器 Containers</h3>容器使用量持续大幅度增长。今年容器使用在所有应用类别中都有增长，包括测试、概念验证（POC）、开发和生产。目前，94% 的调查对象至少在一个阶段使用容器。在使用容器的调查对象中，68% 在生产中使用，比上年增长 39%。自我们 2018 年开始对中国社区进行调查起，生产阶段使用容器的比例已经增长了 240%。<br>
<br>测试环境中使用容器的单位相比去年，已经增长了 150%，意味着开发和生产中容器的使用将会持续增长。开发阶段使用容器的单位已经从去年的 34% 跃升至 72%，POC 阶段的容器用户也已由 21% 增长到 60%。<br>
<div class="aw-upload-img-list active">
<a href="http://dockone.io/uploads/article/20210429/2e67bfb55a73dc9b416586ea73095d0e.jpg" target="_blank" data-fancybox-group="thumb" rel="lightbox"><img src="https://cors.zfour.workers.dev/?http://dockone.io/uploads/article/20210429/2e67bfb55a73dc9b416586ea73095d0e.jpg" class="img-polaroid" title="1.jpg" alt="1.jpg" referrerpolicy="no-referrer"></a>
</div>
<br>
各单位容器使用的数量也在增加。去年，31% 的调查对象称其所在单位使用的容器数量不足 50 个。这种情况今年发生了变化，31% 的人称其单位的容器使用量已经超过了 5,000 个。总体约有一半（48%）的单位使用 1,000 个或更多容器。<br>
<br>在容器带来的问题中，运行中使用和部署容器的复杂性第三年位居榜首。在用户寻求部署过程更高的自动化程度时，CI/CD 成为仅次于复杂性的第二大问题。<br>
<div class="aw-upload-img-list active">
<a href="http://dockone.io/uploads/article/20210429/9ba092db8c484c8aac09ca2ac94eed7d.jpg" target="_blank" data-fancybox-group="thumb" rel="lightbox"><img src="https://cors.zfour.workers.dev/?http://dockone.io/uploads/article/20210429/9ba092db8c484c8aac09ca2ac94eed7d.jpg" class="img-polaroid" title="2.jpg" alt="2.jpg" referrerpolicy="no-referrer"></a>
</div>
<br>
<h3>Kubernetes</h3>在中国，Kubernetes 已经成为约定俗成的容器编排器。82% 的单位在生产中使用 Kubernetes，和上一次调查的 72%相比有所增长。<br>
<div class="aw-upload-img-list active">
<a href="http://dockone.io/uploads/article/20210429/765d8cc1c27dfa31266bd5d5be7b7c7c.jpg" target="_blank" data-fancybox-group="thumb" rel="lightbox"><img src="https://cors.zfour.workers.dev/?http://dockone.io/uploads/article/20210429/765d8cc1c27dfa31266bd5d5be7b7c7c.jpg" class="img-polaroid" title="3.jpg" alt="3.jpg" referrerpolicy="no-referrer"></a>
</div>
<br>
各单位使用 Kubernetes 集群的数量也在增加。调查对象最倾向于选择 2-5 个 Kubernetes 生产集群，今年和去年 35% 的用户都选择了 2-5 个的生产集群配置。使用 50 个以上容器的单位数量也有增长，从 2019 年的 13% 增长到 21%，比 2018 年增长了 320%。<br>
<div class="aw-upload-img-list active">
<a href="http://dockone.io/uploads/article/20210429/e8e1eb533ff606fab9cd6755e4c47cbd.jpg" target="_blank" data-fancybox-group="thumb" rel="lightbox"><img src="https://cors.zfour.workers.dev/?http://dockone.io/uploads/article/20210429/e8e1eb533ff606fab9cd6755e4c47cbd.jpg" class="img-polaroid" title="4.jpg" alt="4.jpg" referrerpolicy="no-referrer"></a>
</div>
<br>
<h4>分隔 Kubernetes 应用程序 Separating Kubernetes Applications</h4>在使用 Kubernetes 的单位中，84% 使用命名空间分隔应用程序，比 2019 年的 71%增加了。58% 使用分隔集群，比 2019 年的 42% 增加了。26% 仅使用标签，数量与去年持平。<br>
<br>有多个团队的机构中，80% 使用命名空间分隔 Kubernetes 应用程序，比去年的 68%有所增加。60% 使用分隔集群，比去年的 46% 有所增加；还有 22% 仅用标签，比去年的 25% 有所减少。<br>
<h4>打包 Packaging</h4>Helm 再次成为最受欢迎的打包 Kubernetes 的方法，成为 64% 的用户选择，比去年的 54%有所增长。<br>
<h4>Kubernetes 环境 Kubernetes Environments</h4>在本地容器开发期间，37% 的调查对象称他们愿意选择 Docker Kubernetes。与去年相比，这一数字比去年的 42%有所下降。云供应商管理的 Kubernetes 成为 28% 调查对象的选择，比去年的 14%有增长，且超过了去年排名第二的 Minikube，今年选择 Minikube 的用户占 21%，排名第三。<br>
<h4>工作负载自动伸缩 Autoscaling Workloads</h4>在计划伸缩 Kubernetes 工作负载的用户中，69% 期望自动伸缩无状态应用，比去年的 54% 有所增长；35% 计划伸缩任务/队列处理，比去年的 26% 有增长；34% 计划自动伸缩有状态应用，比去年的 23% 有增长。<br>
<br>在没有使用 Kubernetes 自动伸缩功能的用户中，31% 已经建立了自己的解决方案，28% 使用第三方解决方案。在上一次调查中，28% 的用户不希望自动伸缩任何工作，但随着越来越多的单位在生产中使用 Kubernetes，这一数字已经下降到了 13%。<br>
<h3>云和代码 Cloud and Code</h3>各单位提交代码更加频繁。43% 的调查对象称其所在单位一天数次提交代码，比去年的 35% 有增加。31% 一周数次提交代码，比去年的 43% 有所减少。也就是说将近 3/4 的单位现在至少每周都要几次提交代码。<br>
<div class="aw-upload-img-list active">
<a href="http://dockone.io/uploads/article/20210429/677b5cfa0f167f16ec07d843705c81e8.jpg" target="_blank" data-fancybox-group="thumb" rel="lightbox"><img src="https://cors.zfour.workers.dev/?http://dockone.io/uploads/article/20210429/677b5cfa0f167f16ec07d843705c81e8.jpg" class="img-polaroid" title="5.jpg" alt="5.jpg" referrerpolicy="no-referrer"></a>
</div>
<br>
各单位发布周期更加频繁。每天都要发布的单位或发布更加频繁的单位从去年的 18% 增加到 27%。将近 2/3 （62%）的用户每周都会发布软件，甚至更为频繁。<br>
<div class="aw-upload-img-list active">
<a href="http://dockone.io/uploads/article/20210429/7023ba4e7c8ab87e06eb22b2dafd06b4.jpg" target="_blank" data-fancybox-group="thumb" rel="lightbox"><img src="https://cors.zfour.workers.dev/?http://dockone.io/uploads/article/20210429/7023ba4e7c8ab87e06eb22b2dafd06b4.jpg" class="img-polaroid" title="6.jpg" alt="6.jpg" referrerpolicy="no-referrer"></a>
</div>
<br>
自动和混合发布周期越来越受欢迎。使用手动发布周期的用户已经从去年的 31% 下降到 17%。<br>
<br>少于半数的单位使用最受欢迎的混合发布周期，该方法相比去年的 46% 略有增加。使用自动发布周期的用户从 21% 增长到了 30%。随着越来越多的单位继续使用 CI/CD 工具，预期会有后续会有更多用户使用自动发布周期。<br>
<div class="aw-upload-img-list active">
<a href="http://dockone.io/uploads/article/20210429/7a3f8be01511d45a8d8b3eebc62cfd63.jpg" target="_blank" data-fancybox-group="thumb" rel="lightbox"><img src="https://cors.zfour.workers.dev/?http://dockone.io/uploads/article/20210429/7a3f8be01511d45a8d8b3eebc62cfd63.jpg" class="img-polaroid" title="7.jpg" alt="7.jpg" referrerpolicy="no-referrer"></a>
</div>
<br>
公有云重回榜首，混合云和多云蓄势待发。公有云使用排名第一，46% 的调查对象将其作为首选数据中心类别。这个数字比去年的 36% 有所增长，但仍然低于 2018 年 51% 的水平。另有 45% 的用户使用私有云，42% 使用混合云，两项均比去年小幅增长。本次调查首次了解了“多云”的使用情况，结果显示 22% 调查对象选择了多云。未来随着越来越多的单位寻求使用最佳解决方案，混合云和多云有望实现使用增长。<br>
<div class="aw-upload-img-list active">
<a href="http://dockone.io/uploads/article/20210429/4212b8659b3648fe7a182155fdc1aae5.jpg" target="_blank" data-fancybox-group="thumb" rel="lightbox"><img src="https://cors.zfour.workers.dev/?http://dockone.io/uploads/article/20210429/4212b8659b3648fe7a182155fdc1aae5.jpg" class="img-polaroid" title="8.jpg" alt="8.jpg" referrerpolicy="no-referrer"></a>
</div>
<br>
使用超过 5,000 台机器的用户增加。但用户使用最多的数量为 6-100 台，今年这个区间的用户占 47%，去年为 44%。仅有 15% 的单位使用 5,000 台以上机器，但这一比例比去年的 10% 有所增长。<br>
<h3>云原生工具 Cloud Native Tools</h3>建立云原生基础设施能带来很多益处，调查对象对云原生工具的益处进行了排名：<br>
<ol><li>部署时间更短（59%）</li><li>可伸缩性得到了改善（55%）</li><li>云的可移植性（50%）</li><li>开发者生产率提高（49%）</li><li>可用性提高（47%）</li></ol><br>
<br><h4>CNCF 项目 CNCF Projects</h4>中国社区的 CNCF 项目使用持续提高。<br>
<br>去年，毕业 CNCF 项目的使用量增长了 64%，有几个项目在生产中的使用呈现出跨越式增长。<br>
<ul><li>生产中使用 Prometheus 的用户从 57% 增加到 75%，增长 32%。</li><li>CoreDNS 使用从 35% 增加到 64%，增长 83%。</li><li>etcd 使用量从 37% 增加到 77%，增长 108%。</li><li>来自中国的第一个毕业项目 Harbor 从 27% 增加到 47%，增长 75%。目前已有 2 个来自中国的项目毕业：Harbor 和 TiKV。</li></ul><br>
<br><div class="aw-upload-img-list active">
<a href="http://dockone.io/uploads/article/20210429/42277704f0c12b70f1950b027e8339f6.jpg" target="_blank" data-fancybox-group="thumb" rel="lightbox"><img src="https://cors.zfour.workers.dev/?http://dockone.io/uploads/article/20210429/42277704f0c12b70f1950b027e8339f6.jpg" class="img-polaroid" title="9.jpg" alt="9.jpg" referrerpolicy="no-referrer"></a>
</div>
<br>
从去年开始，孵化项目的使用已经增长了 94%。成长最快的项目包括：<br>
<ul><li>CNI 增长 141%，在生产中使用该项目的调查对象已由 22% 增长到 53%。</li><li>生产使用 gRPC 已由 29% 增长到 47%，增长量达 62%。</li><li>生产中使用 OpenTracing 和 CRIO-O 两个项目的调查对象也占到了 23%。</li></ul><br>
<br><div class="aw-upload-img-list active">
<a href="http://dockone.io/uploads/article/20210429/2912a746640f5cee01d416e9f91a288a.jpg" target="_blank" data-fancybox-group="thumb" rel="lightbox"><img src="https://cors.zfour.workers.dev/?http://dockone.io/uploads/article/20210429/2912a746640f5cee01d416e9f91a288a.jpg" class="img-polaroid" title="10.jpg" alt="10.jpg" referrerpolicy="no-referrer"></a>
</div>
<br>
因 Contour、Cortex、emissary-ingress 和 Operator Framework 在调查开始之后加入，本次调查遗漏了上述几个项目的数据。<br>
<br>自上次报告之后，TOC 改变了接受沙箱项目的流程，至此我们已经看到大量项目加入。目前，我们拥有 50 个沙箱项目！部分项目在生产中的使用已经达到了两位数。<br>
<ul><li>有 18% 的调查对象已经在生产中使用 Virtual Kubelet，使其成为使用最多的沙箱项目。</li><li>2 个服务网格项目紧随其后，Network Service Mesh 赢得了 15% 用户，Service Mesh Interface 赢得了 13% 用户。</li></ul><br>
<br><div class="aw-upload-img-list active">
<a href="http://dockone.io/uploads/article/20210429/4a3f032c18481dd6637a33564fb89ad8.jpg" target="_blank" data-fancybox-group="thumb" rel="lightbox"><img src="https://cors.zfour.workers.dev/?http://dockone.io/uploads/article/20210429/4a3f032c18481dd6637a33564fb89ad8.jpg" class="img-polaroid" title="11.jpg" alt="11.jpg" referrerpolicy="no-referrer"></a>
</div>
<br>
<h4>CI/CD</h4>如前所述，越来越多的单位使用自动发布周期。73% 的调查对象在生产中运行 CI/CD 流水线，另有 19% 调查对象在评估，还有 15% 计划在未来 12 个月中使用。<br>
<br>中国社区中，最受欢迎的 CI/CD 工具是 Jenkins，拥有 52% 的用户；此外还有 35% 使用 GitLab，17% 使用孵化项目 Argo。<br>
<div class="aw-upload-img-list active">
<a href="http://dockone.io/uploads/article/20210429/4e39eebd9a5929e42cf87b6f15963804.jpg" target="_blank" data-fancybox-group="thumb" rel="lightbox"><img src="https://cors.zfour.workers.dev/?http://dockone.io/uploads/article/20210429/4e39eebd9a5929e42cf87b6f15963804.jpg" class="img-polaroid" title="12.jpg" alt="12.jpg" referrerpolicy="no-referrer"></a>
</div>
<br>
<h4>监控、日志和追踪 Monitoring, Logging, and Tracing</h4>随着部署日益复杂，可见性比以往任何时候都更关键。各单位越来越多意识到云原生可观测性的重要意义，也就越来越倾向于在部署过程中进行监控、日志和追踪工具。<br>
<br>95% 的单位使用监控工具，94% 使用日志，86% 使用追踪。在使用工具的单位中，大多数都会选择在自己的基础设施上本地运行，不会通过远程服务的方式使用托管服务。<br>
<div class="aw-upload-img-list active">
<a href="http://dockone.io/uploads/article/20210429/22d7c54763824f2e43edea154492243e.jpg" target="_blank" data-fancybox-group="thumb" rel="lightbox"><img src="https://cors.zfour.workers.dev/?http://dockone.io/uploads/article/20210429/22d7c54763824f2e43edea154492243e.jpg" class="img-polaroid" title="13.jpg" alt="13.jpg" referrerpolicy="no-referrer"></a>
</div>
<br>
<h4>无服务器 Serverless</h4>无服务器仍有增长空间，预计增长趋势会在未来持续。目前，31% 的单位在生产中使用无服务器，41% 在评估，12% 计划在未来 12 个月使用。<br>
<br>在使用无服务器的用户中，45% 使用托管平台，20% 使用可安装软件。<br>
<br>在通过“托管平台”使用无服务器的单位中，阿里云函数计算仍旧是最受欢迎的解决方案，受到了 35% 用户的青睐，另有 19% 的用户使用 AWS Lambda。总体来说，随着新的解决方案出现，用户会更多选择无服务器。<br>
<div class="aw-upload-img-list active">
<a href="http://dockone.io/uploads/article/20210429/a7cf1f66632ebd58f1ffaa73b584433b.jpg" target="_blank" data-fancybox-group="thumb" rel="lightbox"><img src="https://cors.zfour.workers.dev/?http://dockone.io/uploads/article/20210429/a7cf1f66632ebd58f1ffaa73b584433b.jpg" class="img-polaroid" title="14.jpg" alt="14.jpg" referrerpolicy="no-referrer"></a>
</div>
<br>
通过可安装软件使用无服务器的机构中，31% 会使用 Knative，比上次调查的 22% 有所增长。Knative 超过 Kubeless，Kubeless 的使用量从 29% 下降到 11%。沙箱项目 Virtual Kubelet 以 9% 的份额位居第三。<br>
<div class="aw-upload-img-list active">
<a href="http://dockone.io/uploads/article/20210429/ece62c149fb2bb2596ac79dbfb080a0f.jpg" target="_blank" data-fancybox-group="thumb" rel="lightbox"><img src="https://cors.zfour.workers.dev/?http://dockone.io/uploads/article/20210429/ece62c149fb2bb2596ac79dbfb080a0f.jpg" class="img-polaroid" title="15.jpg" alt="15.jpg" referrerpolicy="no-referrer"></a>
</div>
<br>
<h4>服务网格 Service Mesh</h4>服务网格非常流行，38% 的单位在生产中使用服务网格，但其复杂性仍然有待降低。42% 的调查对象在评估服务网格，11% 计划在未来 12 个月使用，因此预计在未来年份中，服务网格会成为一个增长领域。<br>
<br>在使用服务网格的用户中，最受欢迎的工具包括：<br>
<div class="aw-upload-img-list active">
<a href="http://dockone.io/uploads/article/20210429/77ad037fd4b7c32ed39d8b63ebb1ab67.jpg" target="_blank" data-fancybox-group="thumb" rel="lightbox"><img src="https://cors.zfour.workers.dev/?http://dockone.io/uploads/article/20210429/77ad037fd4b7c32ed39d8b63ebb1ab67.jpg" class="img-polaroid" title="16.jpg" alt="16.jpg" referrerpolicy="no-referrer"></a>
</div>
<br>
<h4>服务代理 Service Proxy</h4>目前大多数（56%）单位在生产中使用服务代理。另有 26% 在做评估，还有 7% 计划在未来 12 个月中使用。随着服务网格用量的增加，入口工具因可以控制往返服务网格的流量，使用有望实现增长。<br>
<br>NGINX （F5）再次成为最受欢迎的工具，但使用量却从 54% 减少到 39%。去年排名第四的 Envoy，超过 F5 和 HAProxy 从 15% 的份额增长到 29%。<br>
<div class="aw-upload-img-list active">
<a href="http://dockone.io/uploads/article/20210429/80f4b7bf21db9716d877708053614153.jpg" target="_blank" data-fancybox-group="thumb" rel="lightbox"><img src="https://cors.zfour.workers.dev/?http://dockone.io/uploads/article/20210429/80f4b7bf21db9716d877708053614153.jpg" class="img-polaroid" title="17.jpg" alt="17.jpg" referrerpolicy="no-referrer"></a>
</div>
<br>
<h4>存储 Storage</h4>云原生存储工具人气也非常之高，将近 2/3（64%）的单位在生产中使用有状态应用程序。另有 21% 正在评估，5% 计划在未来 12 个月使用。<br>
<br>云原生存储中，31% 的用于选择 Ceph，26% 使用 CSI，15% 使用 Gluster，15% 使用 Minio。<br>
<div class="aw-upload-img-list active">
<a href="http://dockone.io/uploads/article/20210429/365a9361715eb15a886780eb60171b29.jpg" target="_blank" data-fancybox-group="thumb" rel="lightbox"><img src="https://cors.zfour.workers.dev/?http://dockone.io/uploads/article/20210429/365a9361715eb15a886780eb60171b29.jpg" class="img-polaroid" title="18.jpg" alt="18.jpg" referrerpolicy="no-referrer"></a>
</div>
<br>
<h3>中国的云原生社区 The Cloud Native Community in China</h3>目前 CNCF 在中国有 60 个会员，占到全部会员总数的 8% 以上。继美国和德国之后，中国是 CNCF 项目第三大贡献者基地（贡献者和提交者）。在所有会员中，PingCAP 和华为分别以将近 85,000 项和超过 66,000 项贡献，位列第六和第八大贡献者。<br>
<br>CNCF 已有 11 个来自中国的项目：BFE（百度）、 Chaos Mesh （PingCAP）、 ChubaoFS（京东）、CNI-Genie（华为）、Dragonfly （阿里巴巴）、 Harbor（VMware 中国）、 KubeEdge（华为）、 OpenKruise（阿里巴巴）、OpenYurt（阿里巴巴）、TiKV（PingCAP）和 Volcano（华为）。<br>
<br>中国的云原生社区中，94% 的会员称会推荐 CNCF 项目和技术。
                                                                <div class="aw-upload-img-list">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </div>
                                
                                                                <ul class="aw-upload-file-list">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </ul>
                                                              
</div>
            