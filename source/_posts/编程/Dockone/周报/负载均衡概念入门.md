
---
title: '负载均衡概念入门'
categories: 
 - 编程
 - Dockone
 - 周报
headimg: 'https://picsum.photos/400/300?random=2465'
author: Dockone
comments: false
date: 2021-05-10 00:03:46
thumbnail: 'https://picsum.photos/400/300?random=2465'
---

<div>   
<br>当个人电脑刚刚开始走进人们工作和生活领域时，一个家庭通常最多只有1台电脑。孩子们白天使用电脑玩游戏，而大人们晚上通过电脑在论坛上灌水。但现如今只有一台电脑的家庭很容易出现每个人在同一时间都需要使用电脑的情况。这或多或少与IT行业发生的情况相同。因为计算机已经变得越来越普遍了，对服务和服务器的需求已经增加到它们可能因为过度使用而宕机的程度。幸运的是，我们现在有负载均衡的概念来帮助我们处理这一需求。<br>
<br><h2>什么是负载均衡？</h2>负载均衡是一个通用的术语，指的是为了确保你所管理的资源得到有效分配而做的任何事情。对于网络服务器的系统管理员来说，负载均衡通常意味着确保网络服务器软件（如Nginx）配置了足够的worker节点以处理激增的访客。换句话说，如果一个网站突然变得非常受欢迎，其访客数量在几分钟之内翻了几倍，运行服务器的软件必须能够对这一情况做出反应，而不会让用户感到访问变得不流畅。对于简单的站点来说，只需要进行简单的配置即可，但对于具有动态内容并且每个用户几个数据库查询的复杂站点，这可能是一个难以处理的问题。<br>
<br>这个问题本应随着云计算的发展而解决，但是，当一个网络应用遇到意外的激增时，也有可能无法及时进行扩容。<br>
<br>当谈及负载均衡的时候，请记住一点分布式资源并不意味着均匀分配。并不是所有任务都一直需要所有可用的资源。一个智能的负载均衡策略应该只在合适的时候为用户和任何提供资源。当然，这通常是开发工程师处理而不是IT基础架构部门的工作。异步应用可以当用户短暂离开时而不在服务器上占用有价值的资源。<br>
<br><h2>负载均衡的工作原理</h2>负载均衡通过在多个计算节点上分布工作负载而避免了瓶颈。那些节点可能是数据中心的物理服务器、云端中的容器、面向边缘计算场景设置的服务器、在复杂应用程序框架中的Java虚拟机（Java Virtual Machines）或者运行在单个Linux服务器上的daemon。<br>
<br>具体实现原理是将大问题拆分成若干个小任务，并为每个任务分配指定计算机。例如，对于需要用户登录的网页，网页可能被托管在Server A上，与此同时登陆页面以及所有身份验证lookups被托管在Server B上。这种部署方式可以使得一个新用户登录到账号上时无需从其他活跃用户处使用资源。<br>
<br><strong>云端负载均衡</strong><br>
<br>云计算使用容器，所以通常没有独立的物理服务器来处理不同的任务（实际上，有许多独立的服务器，但它们被集中在一起，作为一个计算 "大脑"）。相反，一个 "pod "是由几个容器创建的。当一个pod由于其用户或任务负载而开始耗尽资源时，会生成一个相同的pod。Pod之间共享存储和网络资源，每个pod在创建时被分配到一个计算节点。pod可以根据负载的需要创建或销毁，这样，无论有多少用户，用户都能体验到一致的服务质量。<br>
<br><strong>边缘计算</strong><br>
<br>边缘计算在进行负载均衡时需要考虑到物理世界。云是一个分布式系统，但在实际上，云的节点通常集中在几个数据中心。用户离运行云的数据中心越远，他们就必须克服更多的物理障碍以获得最佳服务。即使有光纤连接和适当的负载均衡，位于3000公里外的服务器的响应时间也可能比300公里外的服务器响应时间更长。<br>
<br>边缘计算将计算节点带到云的“边缘”以试图弥合地理鸿沟，从而形成一种用于云端的卫星网络，所以它在良好的负载均衡中也发挥了作用。<br>
<br><h2>什么是负载均衡算法？</h2>负载均衡有很多策略，它们的复杂程度取决于所涉及的技术和需求的不同。负载均衡不一定很复杂，即使使用Kubernetes或Keepalived这样的专业软件，也要从一开始就进行负载均衡。<br>
<br>当你的应用程序可以自己采取简单的预防措施时，不要依赖容器来均衡负载。如果你从一开始就把你的应用程序设计成模块化且短暂的，那么你就会从巧妙的网络设计、容器编排以及未来的任何技术所带来的负载均衡机会中受益。<br>
<br>一些流行的算法可以指导你作为一个应用开发者或网络工程师的工作，包括：<br>
<ul><li>将任务按顺序分配给服务器（这通常被称为轮询调度 round-robin）</li><li>将任务分配给目前最不繁忙的服务器</li><li>将任务分配到响应时间最好的服务器上</li><li>随机地分配任务</li></ul><br>
<br>这些原则可以结合或加权，例如，在分配特别复杂的任务时，偏向于一个组中最强大的服务器。编排是常用的，这样管理员就不必为负载均衡鼓捣出完美的算法或策略，尽管有时要由管理员来选择使用哪种负载均衡方案的组合。<br>
<br><h2>期待意外的发生</h2>负载均衡并不是真正要确保你的所有资源在整个网络中得到均匀使用。负载均衡是指即使在意外情况发生时也要确保可靠的用户体验。良好的基础架构可以承受计算机宕机、应用程序过载、网络流量的猛烈攻击和用户错误。你可以开始思考如何让服务具有弹性，并从头开始设计相应的负载均衡。<br>
<blockquote><br>原文链接：<br>
  <a href="https://opensource.com/article/21/4/load-balancing" rel="nofollow" target="_blank">https://opensource.com/article/21/4/load-balancing</a></blockquote>
                                
                                                              
</div>
            