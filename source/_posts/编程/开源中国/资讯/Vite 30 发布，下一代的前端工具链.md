
---
title: 'Vite 3.0 发布，下一代的前端工具链'
categories: 
 - 编程
 - 开源中国
 - 资讯
headimg: 'https://oscimg.oschina.net/oscnet/up-0477982b82d83da00f79ab151f624b95223.png'
author: 开源中国
comments: false
date: Fri, 15 Jul 2022 07:02:00 GMT
thumbnail: 'https://oscimg.oschina.net/oscnet/up-0477982b82d83da00f79ab151f624b95223.png'
---

<div>   
<div class="content">
                                                                    
                                                        <p><span style="color:#000000"><span style="background-color:#ffffff">距离 v2 发布 16 个月后，</span>Vite 3.0 现已正式<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvitejs.dev%2Fblog%2Fannouncing-vite3.html" target="_blank">发布</a>。公告指出，去年 2 月 Vite 2 发布以来，其采用率就在不断增长；每周 npm 下载量超过 100 万次，迅速形成了庞大的生态系统。Vite 正在推动 Web 框架的新一轮创新竞赛。</span></p> 
<p><span style="color:#000000">“我们决定至少每年发布一个新的 Vite 主要版本，以配合 Node.js 的 EOL，并借此机会定期审查 Vite 的 API，为生态系统中的项目提供简短的迁移路径。”</span></p> 
<p><img alt height="250" src="https://oscimg.oschina.net/oscnet/up-0477982b82d83da00f79ab151f624b95223.png" width="500" referrerpolicy="no-referrer"></p> 
<p><span style="color:#000000">Vite 3.0 </span>更新内容主要包括：</p> 
<h4><strong><span><span><span><span><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>新文档</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></h4> 
<p style="margin-left:0; margin-right:0; text-align:start"><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>可前往 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvitejs.dev%2F" target="_blank">vitejs.dev</a> 使用新的 v3 文档。Vite 现在使用新的 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvitepress.vuejs.org%2F" target="_blank">VitePress</a> 默认主题，在其他 features 之间具有一个 Dark 模式。</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<p style="margin-left:0; margin-right:0; text-align:start"><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span><img alt height="185" src="https://oscimg.oschina.net/oscnet/up-52d383ba81ee211b88c45433e07e88cc837.png" width="500" referrerpolicy="no-referrer"></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<p style="margin-left:0; margin-right:0; text-align:start"><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>生态系统中的几个项目已经迁移到这里（参见 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvitest.dev%2F" target="_blank">Vitest</a>、<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvite-plugin-pwa.netlify.app%2F" target="_blank">vite-plugin-pwa</a> 和 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvitepress.vuejs.org%2F" target="_blank">VitePress</a> 本身）。</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>如果你需要访问 Vite 2 文档，它们将保留在 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fv2.vitejs.dev%2F" target="_blank">v2.vitejs.dev</a>。还有一个新的 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmain.vitejs.dev%2F" target="_blank">main.vitejs.dev</a> 子域，其中对 Vite 主分支的每个提交都是自动部署的。这在测试 beta 版本或为核心开发做出贡献时很有用。</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<p style="margin-left:0; margin-right:0; text-align:start"><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>以及添加了一个正式的西班牙语翻译：</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<ul> 
 <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fcn.vitejs.dev%2F" target="_blank">简体中文</a></li> 
 <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fja.vitejs.dev%2F" target="_blank">日本语</a></li> 
 <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fes.vitejs.dev%2F" target="_blank">西班牙文</a></li> 
</ul> 
<h4><strong><span><span><span><span><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>创建 Vite Starter Templates</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></h4> 
<p style="margin-left:0; margin-right:0; text-align:start"><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvitejs.dev%2Fguide%2F%23trying-vite-online" target="_blank">create-vite</a> 模板是一个很好的工具，可以用你最喜欢的框架快速测试 Vite。在 Vite 3 中，所有的模板都有一个与新文档一致的新主题。在线打开它们并立即开始使用 Vite 3：</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<p style="margin-left:0; margin-right:0; text-align:start"><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvite.new%2F" target="_blank"><img height="81" src="https://oscimg.oschina.net/oscnet/up-0ec710cd857043cf1c46b089536df4268da.png" width="100" referrerpolicy="no-referrer"></a><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvite.new%2Fvue" target="_blank"><img height="81" src="https://oscimg.oschina.net/oscnet/up-73e12571180dd73bce0d483b78a61c927ff.png" width="108" referrerpolicy="no-referrer"></a><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvite.new%2Fsvelte" target="_blank"><img height="81" src="https://oscimg.oschina.net/oscnet/up-3e57e9fe71ebccb943f74c79c507012d572.png" width="94" referrerpolicy="no-referrer"></a><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvite.new%2Freact" target="_blank"><img height="81" src="https://oscimg.oschina.net/oscnet/up-ff019de90dff7a4bb48fa3cd871f8432b82.png" width="90" referrerpolicy="no-referrer"></a><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvite.new%2Fpreact" target="_blank"><img height="81" src="https://oscimg.oschina.net/oscnet/up-3e93ad0e18dcab33bc3d418e23f37298b5f.png" width="90" referrerpolicy="no-referrer"></a><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvite.new%2Flit" target="_blank"><img height="81" src="https://oscimg.oschina.net/oscnet/up-8cd4c14e09ae6f6ebf64d80b69a3da37d62.png" width="90" referrerpolicy="no-referrer"></a></p> 
<p style="margin-left:0; margin-right:0; text-align:start">现在所有模板都共享这个主题。对于更完整的解决方案，包括 linting、测试设置和其他功能；有一些框架的官方 Vite-powered 模板，如 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fvuejs%2Fcreate-vue" target="_blank">create-vue</a> 和 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fsveltejs%2Fkit" target="_blank">create-svelte</a>。在 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fvitejs%2Fawesome-vite%23templates" target="_blank">Awesome Vite</a> 有一个由社区维护的模板列表。</p> 
<h4><strong><span><span><span><span><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>开发改进</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></h4> 
<p style="margin-left:0px; margin-right:0px; text-align:start"><strong><span><span><span><span><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>Vite CLI</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></p> 
<pre>  <span style="color:lightgreen"><strong>VITE</strong></span> <span style="color:lightgreen">v3.0.0</span>  <span style="color:gray">ready in <strong>320</strong> ms</span>

  <span style="color:lightgreen"><strong>➜</strong></span>  <span style="color:white"><strong>Local</strong>:</span>   <span style="color:cyan">http://127.0.0.1:5173/</span>
  <span style="color:green"><strong>➜</strong></span>  <span style="color:gray"><strong>Network</strong>: use --host to expose</span></pre> 
<p style="margin-left:0; margin-right:0; text-align:start"><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>除了 CLI 的美学改进之外，默认的开发服务器端口现在是 5173，预览服务器监听端口是 4173。此更改将确保 Vite 将避免与其他工具发生冲突。</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<p style="margin-left:0px; margin-right:0px; text-align:start"><strong><span><span><span><span><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>改进的 WebSocket 连接策略</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></p> 
<p style="margin-left:0; margin-right:0; text-align:start"><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>Vite 2 的痛点之一是在代理后面运行时配置服务器。Vite 3 更改了默认的连接方案，因此它在大多数情况下都是开箱即用的。所有这些设置现在都通过<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fsapphi-red%2Fvite-setup-catalogue" target="_blank"><code>vite-setup-catalogue</code></a>作为 Vite Ecosystem CI 的一部分进行测试。</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<p style="margin-left:0px; margin-right:0px; text-align:start"><strong><span><span><span><span><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>冷启动改进</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></p> 
<p style="margin-left:0; margin-right:0; text-align:start"><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>Vite 现在可以避免在冷启动期间，当插件在抓取初始静态导入的模块时注入导入时完全重新加载（<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fvitejs%2Fvite%2Fissues%2F8869" target="_blank">#8869</a>）。</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<p style="margin-left:0; margin-right:0; text-align:start"><img height="466" src="https://oscimg.oschina.net/oscnet/up-df195d64fb23269657f8fbc345750bda30b.png" width="500" referrerpolicy="no-referrer"></p> 
<p><strong>import.meta.glob</strong></p> 
<p style="margin-left:0; margin-right:0; text-align:start"><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span><code>import.meta.glob</code>支持被重写。可阅读 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvitejs.dev%2Fguide%2Ffeatures.html%23glob-import" target="_blank">Glob Import Guide</a> 中的新功能：</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<p style="margin-left:0; margin-right:0; text-align:start"><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvitejs.dev%2Fguide%2Ffeatures.html%23multiple-patterns" target="_blank">多个模式</a>可以作为数组传递</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<pre><span><span><span><span style="background-color:var(--vp-code-block-bg)"><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><code><span><span><span style="color:#89ddff"><em>import</em></span></span><span><span style="color:#89ddff">.</span></span><span><span style="color:#a6accd">meta</span></span><span><span style="color:#89ddff">.</span></span><span><span style="color:#82aaff">glob</span></span><span><span style="color:#a6accd">([</span></span><span><span style="color:#89ddff">'</span></span><span><span style="color:#c3e88d">./dir/*.js</span></span><span><span style="color:#89ddff">'</span></span><span><span style="color:#89ddff">,</span></span> <span><span style="color:#89ddff">'</span></span><span><span style="color:#c3e88d">./another/*.js</span></span><span><span style="color:#89ddff">'</span></span><span><span style="color:#a6accd">])</span></span></span> </code></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre> 
<p style="margin-left:0; margin-right:0; text-align:start"><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>现在支持 </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvitejs.dev%2Fguide%2Ffeatures.html%23negative-patterns" target="_blank">Negative Patterns</a><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>（以<code>!</code>为前缀）以忽略某些特定文件</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<pre><span><span><span><span style="background-color:var(--vp-code-block-bg)"><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><code><span><span><span style="color:#89ddff"><em>import</em></span></span><span><span style="color:#89ddff">.</span></span><span><span style="color:#a6accd">meta</span></span><span><span style="color:#89ddff">.</span></span><span><span style="color:#82aaff">glob</span></span><span><span style="color:#a6accd">([</span></span><span><span style="color:#89ddff">'</span></span><span><span style="color:#c3e88d">./dir/*.js</span></span><span><span style="color:#89ddff">'</span></span><span><span style="color:#89ddff">,</span></span> <span><span style="color:#89ddff">'</span></span><span><span style="color:#c3e88d">!**/bar.js</span></span><span><span style="color:#89ddff">'</span></span><span><span style="color:#a6accd">])</span></span></span> </code></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre> 
<p style="margin-left:0; margin-right:0; text-align:start"><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>可以指定 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvitejs.dev%2Fguide%2Ffeatures.html%23named-imports" target="_blank">Named Imports 以改进 tree-shaking</a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<pre><span><span><span><span style="background-color:var(--vp-code-block-bg)"><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><code><span><span><span style="color:#89ddff"><em>import</em></span></span><span><span style="color:#89ddff">.</span></span><span><span style="color:#a6accd">meta</span></span><span><span style="color:#89ddff">.</span></span><span><span style="color:#82aaff">glob</span></span><span><span style="color:#a6accd">(</span></span><span><span style="color:#89ddff">'</span></span><span><span style="color:#c3e88d">./dir/*.js</span></span><span><span style="color:#89ddff">'</span></span><span><span style="color:#89ddff">,</span></span> <span><span style="color:#89ddff">&#123;</span></span> <span><span style="color:#f07178">import</span></span><span><span style="color:#89ddff">:</span></span> <span><span style="color:#89ddff">'</span></span><span><span style="color:#c3e88d">setup</span></span><span><span style="color:#89ddff">'</span></span> <span><span style="color:#89ddff">&#125;</span></span><span><span style="color:#a6accd">)</span></span></span> </code></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre> 
<p style="margin-left:0; margin-right:0; text-align:start"><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>可以通过<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvitejs.dev%2Fguide%2Ffeatures.html%23custom-queries" target="_blank">自定义查询以 attach metadata</a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<pre><span><span><span><span style="background-color:var(--vp-code-block-bg)"><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><code><span><span><span style="color:#89ddff"><em>import</em></span></span><span><span style="color:#89ddff">.</span></span><span><span style="color:#a6accd">meta</span></span><span><span style="color:#89ddff">.</span></span><span><span style="color:#82aaff">glob</span></span><span><span style="color:#a6accd">(</span></span><span><span style="color:#89ddff">'</span></span><span><span style="color:#c3e88d">./dir/*.js</span></span><span><span style="color:#89ddff">'</span></span><span><span style="color:#89ddff">,</span></span> <span><span style="color:#89ddff">&#123;</span></span> <span><span style="color:#f07178">query</span></span><span><span style="color:#89ddff">:</span></span> <span><span style="color:#89ddff">&#123;</span></span> <span><span style="color:#f07178">custom</span></span><span><span style="color:#89ddff">:</span></span> <span><span style="color:#89ddff">'</span></span><span><span style="color:#c3e88d">data</span></span><span><span style="color:#89ddff">'</span></span> <span><span style="color:#89ddff">&#125;</span></span> <span><span style="color:#89ddff">&#125;</span></span><span><span style="color:#a6accd">)</span></span></span> </code></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre> 
<p style="margin-left:0; margin-right:0; text-align:start"><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvitejs.dev%2Fguide%2Ffeatures.html%23glob-import" target="_blank">Eager Imports</a> 现在作为一个 flag 传递</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<pre><span><span><span><span style="background-color:var(--vp-code-block-bg)"><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><code><span><span><span style="color:#89ddff"><em>import</em></span></span><span><span style="color:#89ddff">.</span></span><span><span style="color:#a6accd">meta</span></span><span><span style="color:#89ddff">.</span></span><span><span style="color:#82aaff">glob</span></span><span><span style="color:#a6accd">(</span></span><span><span style="color:#89ddff">'</span></span><span><span style="color:#c3e88d">./dir/*.js</span></span><span><span style="color:#89ddff">'</span></span><span><span style="color:#89ddff">,</span></span> <span><span style="color:#89ddff">&#123;</span></span> <span><span style="color:#f07178">eager</span></span><span><span style="color:#89ddff">:</span></span> <span><span style="color:#ff9cac">true</span></span> <span><span style="color:#89ddff">&#125;</span></span><span><span style="color:#a6accd">)</span></span></span> </code></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre> 
<p style="margin-left:0px; margin-right:0px; text-align:start"><strong><span><span><span><span><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>使 WASM Import 与 Future Standards 保持一致</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></p> 
<p style="margin-left:0; margin-right:0; text-align:start"><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>WebAssembly </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>Import</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span> API 已经过修订，以避免与 </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>Future Standards </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>发生冲突并使其更加灵活：</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<pre><code><span><em>import</em><span style="color:#a6accd"> init </span><em>from</em><span style="color:#a6accd"> </span><span style="color:#89ddff">'</span><span style="color:#c3e88d">./example.wasm?init</span><span style="color:#89ddff">'</span></span>

<span><span style="color:#82aaff">init</span><span style="color:#a6accd">()</span><span style="color:#89ddff">.</span><span style="color:#82aaff">then</span><span style="color:#a6accd">(</span><span style="color:#89ddff">(</span><span style="color:#a6accd">instance</span><span style="color:#89ddff">)</span><span style="color:#a6accd"> </span><span style="color:#c792ea">=></span><span style="color:#a6accd"> </span><span style="color:#89ddff">&#123;</span></span>
<span><span style="color:#f07178">  </span><span style="color:#a6accd">instance</span><span style="color:#89ddff">.</span><span style="color:#a6accd">exports</span><span style="color:#89ddff">.</span><span style="color:#82aaff">test</span><span style="color:#f07178">()</span></span>
<span><span style="color:#89ddff">&#125;</span><span style="color:#a6accd">)</span></span>
</code></pre> 
<p style="color:#213547; margin-left:0; margin-right:0; text-align:start">在<span> </span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvitejs.dev%2Fguide%2Ffeatures.html%23webassembly" target="_blank">WebAssembly guide</a> 中了解更多信息。</p> 
<h4><strong><span><span><span><span><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>构建改进</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></h4> 
<p style="margin-left:0px; margin-right:0px; text-align:start"><strong><span><span><span><span><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>ESM SSR 默认构建</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></p> 
<p style="margin-left:0; margin-right:0; text-align:start"><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>生态系统中的大多数 SSR 框架已经在使用 ESM 构建。因此，Vite 3 使 ESM 成为 SSR 构建的默认格式。这使得可以简化以前的 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvitejs.dev%2Fguide%2Fssr.html%23ssr-externals" target="_blank">SSR 外部化启发式方法</a>，默认情况下外部化依赖项。</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<p style="margin-left:0px; margin-right:0px; text-align:start"><strong><span><span><span><span><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>改进的 Relative Base 支持</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></p> 
<p style="margin-left:0; margin-right:0; text-align:start"><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>Vite 3 现在正确支持 relative base（使用<code>base: ''</code>），允许将构建的资产部署到不同的 bases 而无需重新构建。这在构建时不知道 base 的情况下非常有用，例如在部署到 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fipfs.io%2F" target="_blank">IPFS</a> 等内容可寻址网络时。</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<h4><strong><span><span><span><span><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>减少捆绑包大小</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></h4> 
<p style="margin-left:0px; margin-right:0px; text-align:start"><span style="background-color:#ffffff; color:#213547">Vite 捆绑了它的大部分依赖项，并尽可能地尝试使用现代轻量级替代方案。</span>Vite 3 的发布大小比 V2 小了 30%。</p> 
<p style="margin-left:0px; margin-right:0px; text-align:start"><img height="176" src="https://oscimg.oschina.net/oscnet/up-1531fc6135ec675f458e7a80b28ae292e9a.png" width="300" referrerpolicy="no-referrer"></p> 
<h4><strong><span><span><span><span><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>错误修复</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></h4> 
<p>在过去的三个月里，Vite 的 open issues 从 770 个减少到了 400 个。</p> 
<p><img height="264" src="https://oscimg.oschina.net/oscnet/up-8390e1f3b7b69d55472ab3ba63e7dc12fd4.png" width="500" referrerpolicy="no-referrer"> <img height="265" src="https://oscimg.oschina.net/oscnet/up-fc2dad28e0a64040fc19fe401dac269ee21.png" width="500" referrerpolicy="no-referrer"></p> 
<h4><strong><span><span><span><span><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>兼容性说明</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></h4> 
<ul> 
 <li>Vite 不再支持已达到 EOL 的 Node.js 12。现在需要 Node.js 14.18+。</li> 
 <li>Vite 现在以 ESM 的形式发布，为了兼容，在 ESM entry 中加入了 CJS 代理。</li> 
 <li>Modern Browser Baseline 现在针对支持<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fcaniuse.com%2Fes6-module" target="_blank">原生 ES 模块</a>、<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fcaniuse.com%2Fes6-module-dynamic-import" target="_blank">原生 ESM 动态导入</a>和特性的浏览器以支持<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fcaniuse.com%2Fes6-module" target="_blank">原生 ES 模块</a>、<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fcaniuse.com%2Fes6-module-dynamic-import" target="_blank">原生 ESM 动态导入</a>和<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fcaniuse.com%2Fmdn-javascript_statements_import_meta" target="_blank"><code>import.meta</code></a>功能的浏览器为目标。</li> 
 <li>SSR 和 library 模式下的 JS 文件扩展名现在使用有效的扩展名（js、mjs 或 cjs）来输出基于其格式和包类型的JS entries 和 chunks。</li> 
</ul> 
<p style="margin-left:0; margin-right:0; text-align:start"><span><span><span><span style="color:#213547"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>在<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvitejs.dev%2Fguide%2Fmigration.html" target="_blank">迁移指南</a>中了解更多信息。</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<p><strong>更多内容可<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvitejs.dev%2Fblog%2Fannouncing-vite3.html" target="_blank">查看</a><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fvitejs%2Fvite%2Fblob%2Fmain%2Fpackages%2Fvite%2FCHANGELOG.md" target="_blank"> Changelog</a>。</strong></p>
                                        </div>
                                      
</div>
            