
---
title: '木兰语言 0.0.18 补完所有内置函数，悬赏任务合作顺利'
categories: 
 - 编程
 - 开源中国
 - 资讯
headimg: 'https://oscimg.oschina.net/oscnet/up-6135b2ad34bda58160fce82a6df4032c2ea.png'
author: 开源中国
comments: false
date: Wed, 19 May 2021 10:52:00 GMT
thumbnail: 'https://oscimg.oschina.net/oscnet/up-6135b2ad34bda58160fce82a6df4032c2ea.png'
---

<div>   
<div class="content">
                                                                    
                                                        <p>在 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgitee.com%2Fgitee_reward" target="_blank">Gitee Reward</a> 发布的下列悬赏任务已经顺利完成：</p> 
<ul> 
 <li>￥100 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgitee.com%2FMulanRevive%2Fmulan-rework%2Fissues%2FI3QHKV" target="_blank">【新人优先】重现一个内置函数——bytes</a></li> 
 <li>￥128 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgitee.com%2FMulanRevive%2Fmulan-rework%2Fissues%2FI3QHXU" target="_blank">【进阶】补完余下三十多个内置函数</a></li> 
</ul> 
<p>合作过程交流顺畅、效率颇高、成果符合预期。</p> 
<p>因为之前个人一直主要在 mac 下开发，而合作者在 win10 下开发，在新人任务过程中就暴露了不少之前忽视了的跨平台问题，如 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgitee.com%2FMulanRevive%2Fmulan-rework%2Fissues%2FI3RNBQ%253Ffrom%253Dproject-issue" target="_blank">win 下部分测试不过</a>。</p> 
<p>另一个暴露的困惑已久的问题——<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgitee.com%2FMulanRevive%2Fmulan-rework%2Fissues%2FI3RH19%253Ffrom%253Dproject-issue" target="_blank">Windows 下两种测试方式输出相差 \r</a>，很惊喜地，合作者很快指出了问题所在。</p> 
<p>在第二个悬赏任务中，在标识符命名中文化时，头一次发现内部函数 <code>_线程__运行</code> 的命名与类名相关，原因还待研究。</p> 
<p><img alt height="399" src="https://oscimg.oschina.net/oscnet/up-6135b2ad34bda58160fce82a6df4032c2ea.png" width="778" referrerpolicy="no-referrer"></p> 
<p>另发觉 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgitee.com%2FMulanRevive%2Fmulan-rework%2Fissues%2FI3RPWK%253Ffrom%253Dproject-issue" target="_blank">locals() 功能设计意图仍待揣摩</a>。</p> 
<p>总之，悬赏任务的收获多多，很期待后续。</p> 
<p>此外，如 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F372021884" target="_blank">上文</a> 打算的，已发布了 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fpypi.org%2Fproject%2Frply-ulang%2F" target="_blank">rply 木兰定制版</a>，以规避 | 问题；还添加了 shift/reduce 歧义的调试信息，详见 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F369268306" target="_blank">前文</a>。</p> 
<hr> 
<h3><em><strong>附：代码量统计</strong></em></h3> 
<p>主要部分的代码行数统计，格式为：上次->现在。</p> 
<ul> 
 <li>木兰代码量 3096 -> 3157 
  <ul> 
   <li>运行环境，实现与测试大部为木兰代码：582</li> 
   <li>木兰测试用例，包括部分实用小程序（如井字棋）：2514 -> 2575</li> 
  </ul> </li> 
</ul> 
<p> </p> 
<ul> 
 <li>Python 代码量（木兰实现、测试框架、语法树生成木兰中的 Python 测试代码）：3436 -> 3612 
  <ul> 
   <li><code>环境.py</code>，定义全局方法： 175 -> 275</li> 
   <li><code>生成/木兰.py</code>：213 -> 239</li> 
   <li><code>测试/期望值表.py</code>：144 -> 173</li> 
   <li><code>交互.py</code>，交互环境（REPL）：148 -> 150</li> 
   <li><code>测试/运行所有.py</code>，检验所有木兰测试代码片段：71 -> 75</li> 
   <li>未变 
    <ul> 
     <li><code>分析器/语法分析器.py</code>：1055</li> 
     <li><code>分析器/语法树.py</code>：225</li> 
     <li><code>分析器/词法分析器.py</code>：216</li> 
     <li><code>功用/反馈信息.py</code>：175</li> 
     <li><code>测试/unittest/报错.py</code>：124</li> 
     <li><code>分析器/语法树处理.py</code>：114</li> 
     <li><code>中.py</code>，主程序：95</li> 
     <li><code>分析器/语法成分.py</code>，从语法分析器中提取出来的枚举常量：85</li> 
     <li><code>测试/unittest/生成.py</code>，语法树生成木兰源码相关测试：60</li> 
     <li><code>测试/unittest/语法树.py</code>，确保生成的语法树与原始版本一致，拆分报错部分：58</li> 
     <li><code>功用/调试辅助.py</code>，：57</li> 
     <li><code>setup.py</code>, 34</li> 
     <li><code>测试/unittest/交互.py</code>，交互环境相关测试：28</li> 
     <li><code>分析器/错误.py</code>：28</li> 
     <li><code>测试/unittest/所有用例.py</code>：24</li> 
    </ul> </li> 
  </ul> </li> 
</ul>
                                        </div>
                                      
</div>
            