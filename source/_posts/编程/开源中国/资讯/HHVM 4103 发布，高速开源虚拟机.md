
---
title: 'HHVM 4.103 发布，高速开源虚拟机'
categories: 
 - 编程
 - 开源中国
 - 资讯
headimg: 'https://picsum.photos/400/300?random=2595'
author: 开源中国
comments: false
date: Sun, 04 Apr 2021 07:21:00 GMT
thumbnail: 'https://picsum.photos/400/300?random=2595'
---

<div>   
<div class="content">
                                                                                            <p>HHVM 4.103 已经正式发布了，这个版本的发布就标志着对 4.97 的支持已经结束了。HHVM 4.98-4.101 以及 4.56 LTS、4.80 LTS 和 4.102 LTS 版本仍然受到支持。</p> 
<h3>亮点</h3> 
<ul> 
 <li>隐式/无返回的函数现在被认为是返回 <code>mixed</code> 或 <code>dynamic</code> 函数的一个子类型；例如，现在可以传递 <code>()==> &#123; echo "hello"; &#125;</code> 作为一个 <code>(function(): mixed)</code></li> 
 <li>改进了对枚举类的自动完成支持；</li> 
 <li>减少大型类（包括具有许多继承成员的小型类）的类型检查器内存使用量；</li> 
 <li>现在默认启用枚举类；</li> 
 <li>增加了 <code>HH/EnumClassAttribute</code> 接口，允许为枚举类定义用户属性；</li> 
 <li>现在许多内置模块被标记为纯模块。</li> 
</ul> 
<h3><strong>重大变化</strong></h3> 
<ul> 
 <li>Hack 阵列和旧式阵列被统一了；由于此更改的潜在范围，因此将 4.102 进行了计划外的 LTS 发布，以留出更多时间来确定迁移路径。 
  <ul> 
   <li><code>varrayvec</code>现在是 <code>vec</code> 的别名</li> 
   <li><code>darray</code> 现在是 <code>dict</code> 的别名</li> 
   <li>现在，Shapes 现在在运行时由 <code>dict</code> 支持；这通常仍被视为实现细节，但在处理未类型化的数据（例如解码的 JSON）时会有所帮助。</li> 
   <li>现在，Tuples 在运行时由 <code>vec</code> 支持，这也是一个实现细节。</li> 
  </ul> </li> 
 <li>删除了对 PHP 样式的静态匿名函数的运行时支持；自 2020 年 5 月起，默认情况下已禁用这些功能，并且类型检查器未正确处理这些功能。</li> 
 <li>对于类常量的一些循环定义，现在会引发Typechecker错误。这是一项正在进行的工作，我们希望在将来的版本中可以检测到更多的循环定义。</li> 
 <li><code>apc_prime.so</code> 支持已被删除；该功能将允许提供 C++ 库以在 HHVM 启动时预填充 APC；</li> 
 <li>如果 XHP 类声明两个具有相同名称的属性，现在会引发 typechecker 错误；</li> 
 <li>PowerPC64 支持已被删除；它已经无法使用一段时间了，而且我们没有支持它的必要 CI 基础结构。</li> 
</ul> 
<h3><strong>未来的变化</strong></h3> 
<ul> 
 <li>HHVM 仍然使用 <code>hh_single_compile</code>，然而解析器和发射器也是内嵌的，我们期望去除对 <code>hh_single_compile</code> 的依赖，并有可能在未来删除可执行文件。嵌入式编译器可以通过 <code>hhvm.hack_compiler_use_compiler_pool=false</code> INI 设置来测试；</li> 
 <li>我们预计在不久的将来会移除对 macOS 10.14 (Mojave) 的支持。</li> 
</ul> 
<p>更多详情可查看：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fhhvm.com%2Fblog%2F2021%2F03%2F31%2Fhhvm-4.103.html" target="_blank">https://hhvm.com/blog/2021/03/31/hhvm-4.103.html</a></p>
                                        </div>
                                      
</div>
            