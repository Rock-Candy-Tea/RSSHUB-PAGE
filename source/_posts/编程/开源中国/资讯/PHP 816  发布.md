
---
title: 'PHP 8.1.6  发布'
categories: 
 - 编程
 - 开源中国
 - 资讯
headimg: 'https://picsum.photos/400/300?random=3134'
author: 开源中国
comments: false
date: Fri, 13 May 2022 07:24:00 GMT
thumbnail: 'https://picsum.photos/400/300?random=3134'
---

<div>   
<div class="content">
                                                                    
                                                        <p>PHP 8.1.6 现已<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.php.net%2Farchive%2F2022.php%232022-05-12-2" target="_blank">发布</a>，这是一个错误修复版本；官方鼓励所有 PHP 8.1 用户升级到此版本。具体更新内容如下：</p> 
<ul> 
 <li><span style="background-color:#ffffff; color:#333333">Core</span>： 
  <ul> 
   <li>修复了错误<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fphp%2Fphp-src%2Fissues%2F8310" target="_blank">#8310</a>（不再识别注册表设置）。</li> 
   <li>修复了资源 ID 分配期间的潜在 race condition。</li> 
   <li>修复了错误<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fphp%2Fphp-src%2Fissues%2F8133" target="_blank">#8133</a>（预加载包含枚举数组的常量时出现故障）。</li> 
   <li>修复 Haiku ZTS 构建。</li> 
  </ul> </li> 
 <li>Date： 
  <ul> 
   <li>修复了错误<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fphp%2Fphp-src%2Fissues%2F7752" target="_blank">#7752</a>（DateTimeZone::getTransitions() 返回的数据不足）。</li> 
   <li>修复了错误<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fphp%2Fphp-src%2Fissues%2F8108" target="_blank">#8108</a>（时区无法按预期工作）。</li> 
   <li>修复了错误<a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fbugs.php.net%2F81660" target="_blank">#81660</a>（DateTimeZone::getTransitions() 返回无效数据）。</li> 
   <li>修复了错误<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fphp%2Fphp-src%2Fissues%2F8289" target="_blank">#8289</a>（从迭代器产生的异常不会重新抛出到生成器中）。</li> 
  </ul> </li> 
 <li>FFI： 
  <ul> 
   <li>修复了错误<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fphp%2Fphp-src%2Fissues%2F8433" target="_blank">#8433</a>（在 FFI 中向结构体分配函数指针会泄露）。</li> 
  </ul> </li> 
 <li>FPM： 
  <ul> 
   <li>修复了错误<a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fbugs.php.net%2F76003" target="_blank">#76003</a>（FPM /status 报告错误的活动进程数）。</li> 
   <li>修复了错误<a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fbugs.php.net%2F77023" target="_blank">#77023</a>（FPM 无法关闭进程）。</li> 
   <li>修复了 kqueue 删除回调日志消息中的注释。</li> 
  </ul> </li> 
 <li>Hash： 
  <ul> 
   <li>修复了错误<a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fbugs.php.net%2F81714" target="_blank">#81714</a>（序列化最终 HashContext 时的 segfault）。</li> 
  </ul> </li> 
 <li>Iconv： 
  <ul> 
   <li>修复了错误<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fphp%2Fphp-src%2Fissues%2F8218" target="_blank">#8218</a>（ob_end_clean 不会重置 Content-Encoding header）。</li> 
  </ul> </li> 
 <li>Intl： 
  <ul> 
   <li>修复了错误<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fphp%2Fphp-src%2Fissues%2F8364" target="_blank">#8364</a>（msgfmt_format $values 可能不支持引用）。</li> 
  </ul> </li> 
 <li>MB字符串： 
  <ul> 
   <li>为无效 UTF-8 文本发出的错误标记数与 WHATWG 规范匹配。这是对 PHP 8.0 及更早版本行为的回归。</li> 
  </ul> </li> 
 <li>MySQLi： 
  <ul> 
   <li>修复了错误<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fphp%2Fphp-src%2Fissues%2F8267" target="_blank">#8267</a>（MySQLi 在 Windows 上使用不受支持的 format specifier）。</li> 
  </ul> </li> 
 <li>SPL： 
  <ul> 
   <li>修复了错误<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fphp%2Fphp-src%2Fissues%2F8366" target="_blank">#8366</a>（调用 __construct() 时 ArrayIterator 可能会泄漏）。</li> 
   <li>修复了错误<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fphp%2Fphp-src%2Fissues%2F8273" target="_blank">#8273</a>（SplFileObject：key() 返回错误值）。</li> 
  </ul> </li> 
 <li>Streams： 
  <ul> 
   <li>修复了 php://temp 切换到临时文件时不保留文件位置的问题。</li> 
  </ul> </li> 
 <li>zlib： 
  <ul> 
   <li>修复了错误<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fphp%2Fphp-src%2Fissues%2F8218" target="_blank">#8218</a>（ob_end_clean 不会重置 Content-Encoding header）。</li> 
  </ul> </li> 
</ul> 
<p>更新说明：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.php.net%2FChangeLog-8.php%238.1.6" target="_blank">https://www.php.net/ChangeLog-8.php#8.1.6</a></p>
                                        </div>
                                      
</div>
            