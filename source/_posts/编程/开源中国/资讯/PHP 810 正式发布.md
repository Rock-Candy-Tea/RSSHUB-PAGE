
---
title: 'PHP 8.1.0 正式发布'
categories: 
 - 编程
 - 开源中国
 - 资讯
headimg: 'https://oscimg.oschina.net/oscnet/up-0c6d5c1c28157952b153111421fddf434b1.png'
author: 开源中国
comments: false
date: Fri, 26 Nov 2021 07:16:00 GMT
thumbnail: 'https://oscimg.oschina.net/oscnet/up-0c6d5c1c28157952b153111421fddf434b1.png'
---

<div>   
<div class="content">
                                                                    
                                                        <p><span style="background-color:#ffffff; color:#333333">PHP 8.1.0 现已发布，该版本带来了许多改进和新功能。</span></p> 
<h4>枚举</h4> 
<p>使用枚举而不是一组常量并立即进行验证。</p> 
<p><img alt height="416" src="https://oscimg.oschina.net/oscnet/up-0c6d5c1c28157952b153111421fddf434b1.png" width="1009" referrerpolicy="no-referrer"></p> 
<h4>只读属性</h4> 
<p>只读属性不能在初始化后更改，比如，在为它们分配值后。它们可以用于对值对象和数据传输对象建模。</p> 
<p><img alt height="659" src="https://oscimg.oschina.net/oscnet/up-f248085e5efa34ff2c94aa469d24fb86c0e.png" width="1007" referrerpolicy="no-referrer"></p> 
<h4>First-class 可调用语法</h4> 
<p>现在可以获得对任何函数的引用。</p> 
<p><img alt height="258" src="https://oscimg.oschina.net/oscnet/up-6712a268a431ca04947d8176d852a8f2e28.png" width="1012" referrerpolicy="no-referrer"></p> 
<h4>新的初始化器</h4> 
<p>对象现在可以用作默认参数值、静态变量和全局常量，以及属性参数，这有效地使使用嵌套属性成为可能。</p> 
<p><img alt height="499" src="https://oscimg.oschina.net/oscnet/up-b76eec4dbccb2654218905d1f54ed97badb.png" width="998" referrerpolicy="no-referrer"></p> 
<h4>纯交集类型</h4> 
<p>当一个值需要同时满足多个类型约束时，使用交集类型。注意，目前无法将交集和联合类型混合在一起，例如 A&B|C。</p> 
<p><img alt height="547" src="https://oscimg.oschina.net/oscnet/up-7f694b147a0eb29376b204d7d42bd172274.png" width="1016" referrerpolicy="no-referrer"></p> 
<h4>Never 返回类型</h4> 
<p>使用 never 类型声明的函数或方法表示它不会返回值，并且会抛出异常或通过调用 die()、exit()、trigger_error() 或类似的东西来结束脚本的执行。</p> 
<p><img alt height="476" src="https://oscimg.oschina.net/oscnet/up-4f32b14d3b3aa4b3510a1a4da871c79591b.png" width="1020" referrerpolicy="no-referrer"></p> 
<h4>Final 类常量</h4> 
<p>可以声明 final 类常量，以禁止它们在子类中被重写。</p> 
<p><img alt height="479" src="https://oscimg.oschina.net/oscnet/up-a9960e8ffb584f6d3388d33189dcaaac203.png" width="1011" referrerpolicy="no-referrer"></p> 
<h4>显式八进制数字表示法</h4> 
<p>现在可以使用显式 0o 前缀写入八进制数。</p> 
<p><img alt height="251" src="https://oscimg.oschina.net/oscnet/up-71b02bcece3f8e49e3e514cbe31fc8547d8.png" width="1013" referrerpolicy="no-referrer"></p> 
<h4>纤程</h4> 
<p>Fibers 是用于实现轻量级协作并发的原语。它们是一种创建可以像生成器一样暂停和恢复的代码块的方法，但可以从堆栈中的任何位置进行。Fibers 本身并没有提供并发性，仍然需要一个事件循环。但是，它们允许通过阻塞和非阻塞实现共享相同的 API。Fibers 允许摆脱以前在 Promise::then() 或基于生成器的协程中看到的样板代码。库通常会围绕 Fiber 构建进一步的抽象，因此无需直接与它们交互。</p> 
<p><img alt height="405" src="https://oscimg.oschina.net/oscnet/up-23ea70226d4bb82f6262c6268407e332b61.png" width="999" referrerpolicy="no-referrer"></p> 
<h4>对字符串键控数组的数组解包支持</h4> 
<p>PHP 以前支持通过扩展运算符在数组内部解包，但前提是数组具有整数键。现在也可以使用字符串键解包数组。</p> 
<p><img alt height="364" src="https://oscimg.oschina.net/oscnet/up-ee83d869e59c6261bdd15679fecf3cde9b1.png" width="1000" referrerpolicy="no-referrer"></p> 
<h4>性能优化</h4> 
<p>PHP 8.1 在性能方面也有一些改动，包括：</p> 
<ul> 
 <li>ARM64 的 JIT 后端 (AArch64)</li> 
 <li>继承缓存（避免在每个请求中重新链接类）</li> 
 <li>快速类名解析（避免小写和哈希查找）</li> 
 <li>timelib 和 ext/date 性能改进</li> 
 <li>SPL 文件系统迭代器改进</li> 
 <li>序列化/反序列化优化</li> 
 <li>一些内部函数优化（get_declared_classes()、explode()、strtr()、strnatcmp()、dechex()）</li> 
 <li>JIT 改进和修复</li> 
</ul> 
<p><img alt height="470" src="https://oscimg.oschina.net/oscnet/up-c6d50aaa074ead3bc4cc74cc69cfb8f7c48.png" width="1017" referrerpolicy="no-referrer"></p> 
<p>更多详细内容，请查看<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.php.net%2Findex.php%23id2021-11-25-1" target="_blank">更新公告</a>。</p>
                                        </div>
                                      
</div>
            