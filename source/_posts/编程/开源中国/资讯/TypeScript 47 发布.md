
---
title: 'TypeScript 4.7 发布'
categories: 
 - 编程
 - 开源中国
 - 资讯
headimg: 'https://oscimg.oschina.net/oscnet/up-b43c3d9eca5bdcbaf393a851b6d7b0653e0.gif'
author: 开源中国
comments: false
date: Tue, 24 May 2022 23:54:00 GMT
thumbnail: 'https://oscimg.oschina.net/oscnet/up-b43c3d9eca5bdcbaf393a851b6d7b0653e0.gif'
---

<div>   
<div class="content">
                                                                    
                                                        <p>TypeScript 4.7 现已正式<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdevblogs.microsoft.com%2Ftypescript%2Fannouncing-typescript-4-7%2F" target="_blank">发布。</a></p> 
<p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><strong>新特性概览</strong></p> 
<ul> 
 <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdevblogs.microsoft.com%2Ftypescript%2Fannouncing-typescript-4-7%2F%23esm-nodejs" target="_blank">Node.js 中的 ECMAScript 模块支持</a></li> 
 <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdevblogs.microsoft.com%2Ftypescript%2Fannouncing-typescript-4-7%2F%23control-over-module-detection" target="_blank">模块检测控制</a></li> 
 <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdevblogs.microsoft.com%2Ftypescript%2Fannouncing-typescript-4-7%2F%23control-flow-analysis-for-element-access" target="_blank">括号内元素访问的控制流分析</a></li> 
 <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdevblogs.microsoft.com%2Ftypescript%2Fannouncing-typescript-4-7%2F%23improved-function-inference-in-objects-and-methods" target="_blank">改进的对象和方法中的函数推理</a></li> 
 <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdevblogs.microsoft.com%2Ftypescript%2Fannouncing-typescript-4-7%2F%23instantiation-expressions" target="_blank">实例化表达式</a></li> 
 <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdevblogs.microsoft.com%2Ftypescript%2Fannouncing-typescript-4-7%2F%23extends-constraints-on-infer-type-variables" target="_blank"><code><span>infer</span></code>类型变量的</a> <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdevblogs.microsoft.com%2Ftypescript%2Fannouncing-typescript-4-7%2F%23extends-constraints-on-infer-type-variables" target="_blank"><code><span>extends</span></code><span> </span>Constraints</a></li> 
 <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdevblogs.microsoft.com%2Ftypescript%2Fannouncing-typescript-4-7%2F%23optional-variance-annotations-for-type-parameters" target="_blank">类型参数的 Optional Variance Annotations</a></li> 
 <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdevblogs.microsoft.com%2Ftypescript%2Fannouncing-typescript-4-7%2F%23resolution-customization-with-modulesuffixes" target="_blank">Resolution Customization with moduleSuffixes</a></li> 
 <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdevblogs.microsoft.com%2Ftypescript%2Fannouncing-typescript-4-7%2F%23resolution-mode" target="_blank"><code><span>resolution</span><span>-</span><span>mode</span></code></a></li> 
 <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdevblogs.microsoft.com%2Ftypescript%2Fannouncing-typescript-4-7%2F%23go-to-source-definition" target="_blank">转到源定义</a></li> 
 <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdevblogs.microsoft.com%2Ftypescript%2Fannouncing-typescript-4-7%2F%23group-aware-organize-imports" target="_blank">Groups-Aware 组织导入</a></li> 
 <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdevblogs.microsoft.com%2Ftypescript%2Fannouncing-typescript-4-7%2F%23object-method-snippet-completions" target="_blank">对象方法片段完成</a></li> 
 <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdevblogs.microsoft.com%2Ftypescript%2Fannouncing-typescript-4-7%2F%23breaking-changes" target="_blank">Breaking Changes</a></li> 
</ul> 
<p><strong style="color:#333333"><span><span><span><span><span><span style="color:#333333"><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>自 Beta 版以来有什么新变化？</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong> </p> 
<p style="text-align:left"><span><span><span><span><span style="color:#333333"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>开发团队在 beta 版本中宣布了 Node ESM 支持的 </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="background-color:#ffffff; color:#333333">stable target</span><span><span><span><span><span style="color:#333333"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>，为<code><span>node12</span></code>；但是，鉴于 Node.js 12 不再处于维护状态，所以现在开始转向<code><span>node16</span></code>。这应该会提供来自 Node.js 的较新的 ES 模块功能（如 </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fnodejs%2Fnode%2Fpull%2F39635" target="_blank">pattern trailers</a><span style="background-color:#ffffff; color:#333333">)</span><span><span><span><span><span style="color:#333333"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>），同时还将 TypeScript 默认为支持 top-level await 的 higher target。</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<p style="text-align:left"><span><span><span><span><span style="color:#333333"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>自 beta 版以来，<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdevblogs.microsoft.com%2Ftypescript%2Fannouncing-typescript-4-7%2F%23resolution-mode" target="_blank"><code><span>resolution</span><span>-</span><span>mode</span></code></a>语法仍然适用于<code><span>/// <reference types="..." /></span></code>指令；但是，官方收到了一些关于<code><span>import</span><span> type</span></code>的反馈，并希望重新考虑该功能的需求和设计。在 TypeScript 的 nightly 版本中，<code><span>resolution</span><span>-</span><span>mode</span></code>只在<code><span>import</span><span> type</span></code>中实验性地可用。</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<p style="text-align:left"><span><span><span><span><span style="color:#333333"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>在 beta 之后，开发团队意识到<code><span>#private</span></code>字段的<code><span>typeof</span></code>存在 API 兼容性问题。因此，该功能不会出现在 TypeScript 4.7 中。</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<p style="text-align:left"><span><span><span><span><span style="color:#333333"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdevblogs.microsoft.com%2Ftypescript%2Fannouncing-typescript-4-7%2F%23go-to-source-definition" target="_blank">此版本还包括一个用于转到源定义</a>的新预览编辑器命令。在普通的 Go to Definition 命令把你带到一个声明文件而不是实际的 JavaScript 或 TypeScript 源的情况下会很有帮助。 </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<p style="text-align:left"><span><span><span><span><span style="color:#333333"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>自 beta 以来的还有一些 </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdevblogs.microsoft.com%2Ftypescript%2Fannouncing-typescript-4-7%2F%23breaking-changes" target="_blank">breaking changes</a><span><span><span><span><span style="color:#333333"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>，</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span><span><span><span style="color:#333333"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>包括在<code><span>strictNullChecks</span></code>和 arrow function parsing 中围绕更严格的类型参数约束的规则已经被取消了。但一些看似无害的变化已经引入了围绕 JSX ...spreads 和模板字符串中使用的泛型的更严格的规则。</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<p style="margin-left:0px; margin-right:0px; text-align:left"><strong>转到源定义（Go to Source Definition）</strong></p> 
<p style="color:#333333; margin-left:0; margin-right:0; text-align:left">TypeScript 4.7 包含对名为 Go To Source Definition 的新实验性编辑器命令的支持。它类似于 Go To Definition，但从不在声明文件中返回结果。相反，它会尝试找到相应的实现文件（比如 .js 或者 .ts 文件）并在其中找到定义 —— 即使这些文件通常被隐藏。</p> 
<p style="color:#333333; margin-left:0; margin-right:0; text-align:left">当你需要查看从库中导入的函数的实现，而不是<code><span>d</span><span>.</span><span>ts</span></code>文件中的类型声明时，该功能通常会派上用场。</p> 
<p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><img alt height="334" src="https://oscimg.oschina.net/oscnet/up-b43c3d9eca5bdcbaf393a851b6d7b0653e0.gif" width="500" referrerpolicy="no-referrer"></p> 
<p style="margin-left:0px; margin-right:0px; text-align:left"><strong>对象方法片段完成（Object Method Snippet Completions）</strong></p> 
<p style="color:#333333; margin-left:0; margin-right:0; text-align:left">TypeScript 现在为对象方法提供片段完成。当完成对象中的 members 时，TypeScript 将为方法的名称提供一个典型的 completion entry，并为完整的方法定义提供一个单独的 completion entry。</p> 
<p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><img alt height="218" src="https://oscimg.oschina.net/oscnet/up-695eee01c7e20d5cc2a008733bd055aee17.gif" width="500" referrerpolicy="no-referrer"></p> 
<p style="color:#333333; margin-left:0; margin-right:0; text-align:left">更多<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdevblogs.microsoft.com%2Ftypescript%2Fannouncing-typescript-4-7" target="_blank">详情可查看发布公告</a><span style="background-color:#ffffff; color:#333333">。</span></p>
                                        </div>
                                      
</div>
            