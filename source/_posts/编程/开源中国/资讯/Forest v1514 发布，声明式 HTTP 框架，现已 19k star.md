
---
title: 'Forest v1.5.14 å‘å¸ƒï¼Œå£°æ˜å¼ HTTP æ¡†æ¶ï¼Œç°å·² 1.9k star'
categories: 
 - ç¼–ç¨‹
 - å¼€æºä¸­å›½
 - èµ„è®¯
headimg: 'https://oscimg.oschina.net/oscnet/up-e095709750cf803e835235b2f549ef278f6.png'
author: å¼€æºä¸­å›½
comments: false
date: Thu, 09 Dec 2021 15:51:00 GMT
thumbnail: 'https://oscimg.oschina.net/oscnet/up-e095709750cf803e835235b2f549ef278f6.png'
---

<div>   
<div class="content">
                                                                    
                                                        <p style="margin-left:0; margin-right:0"><img height="248" src="https://oscimg.oschina.net/oscnet/up-e095709750cf803e835235b2f549ef278f6.png" width="400" referrerpolicy="no-referrer"></p> 
<p style="margin-left:0; margin-right:0"><strong>Forestå·²å‚åŠ 2021å¹´åº¦OSCä¸­å›½å¼€æºé¡¹ç›®è¯„é€‰æ´»åŠ¨ï¼Œå¦‚æœæ‚¨å–œæ¬¢Forestæˆ–å¯¹Forestæ„Ÿå…´è¶£ï¼Œè¯·æŠ•ä¸Šæ‚¨å®è´µçš„ä¸€ç¥¨ï¼Œæ„Ÿè°¢ï¼</strong></p> 
<p style="margin-left:0em; margin-right:0em">ç‚¹å‡»æŠ•ç¥¨ğŸ‘‰<span>Â </span><a href="https://gitee.com/link?target=https%3A%2F%2Fwww.oschina.net%2Fproject%2Ftop_cn_2021%2F%3Fid%3D573" target="_blank">æŠ•ç¥¨</a></p> 
<h2 style="margin-left:0; margin-right:0; text-align:left"><strong>Forestä»‹ç»</strong></h2> 
<p style="color:#333333; margin-left:0; margin-right:0; text-align:left">Forest æ˜¯ä¸€ä¸ªå¼€æºçš„ Java HTTP å®¢æˆ·ç«¯æ¡†æ¶ï¼Œå®ƒèƒ½å¤Ÿå°† HTTP çš„æ‰€æœ‰è¯·æ±‚ä¿¡æ¯ï¼ˆåŒ…æ‹¬ URLã€Header ä»¥åŠ Body ç­‰ä¿¡æ¯ï¼‰ç»‘å®šåˆ°æ‚¨è‡ªå®šä¹‰çš„ Interface æ–¹æ³•ä¸Šï¼Œèƒ½å¤Ÿé€šè¿‡è°ƒç”¨æœ¬åœ°æ¥å£æ–¹æ³•çš„æ–¹å¼å‘é€ HTTP è¯·æ±‚</p> 
<h3 style="margin-left:0; margin-right:0; text-align:left">ç°å·² 1.9k star</h3> 
<p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><img src="https://chart.giteye.net/gitee/dromara/forest/NURRL346.png" referrerpolicy="no-referrer"></p> 
<p style="color:#333333; margin-left:0; margin-right:0; text-align:left">Â </p> 
<h3 style="margin-left:0; margin-right:0; text-align:left">Forest å¦‚ä½•ä½¿ç”¨</h3> 
<p style="color:#333333; margin-left:0; margin-right:0; text-align:left">Forest ä¸éœ€è¦æ‚¨ç¼–å†™å…·ä½“çš„ HTTP è°ƒç”¨è¿‡ç¨‹ï¼Œåªéœ€è¦æ‚¨å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œç„¶åé€šè¿‡ Forest æ³¨è§£å°† HTTP è¯·æ±‚çš„ä¿¡æ¯æ·»åŠ åˆ°æ¥å£çš„æ–¹æ³•ä¸Šå³å¯ã€‚è¯·æ±‚å‘é€æ–¹é€šè¿‡è°ƒç”¨æ‚¨å®šä¹‰çš„æ¥å£ä¾¿èƒ½è‡ªåŠ¨å‘é€è¯·æ±‚å’Œæ¥å—è¯·æ±‚çš„å“åº”</p> 
<h3 style="margin-left:0; margin-right:0; text-align:left">Forest çš„å·¥ä½œåŸç†</h3> 
<p style="color:#333333; margin-left:0; margin-right:0; text-align:left">Forest ä¼šå°†æ‚¨å®šä¹‰å¥½çš„æ¥å£é€šè¿‡åŠ¨æ€ä»£ç†çš„æ–¹å¼ç”Ÿæˆä¸€ä¸ªå…·ä½“çš„å®ç°ç±»ï¼Œç„¶åç»„ç»‡ã€éªŒè¯ HTTP è¯·æ±‚ä¿¡æ¯ï¼Œç»‘å®šåŠ¨æ€æ•°æ®ï¼Œè½¬æ¢æ•°æ®å½¢å¼ï¼ŒSSL éªŒè¯ç­¾åï¼Œè°ƒç”¨åç«¯ HTTP API(httpclient ç­‰ API)æ‰§è¡Œå®é™…è¯·æ±‚ï¼Œç­‰å¾…å“åº”ï¼Œå¤±è´¥é‡è¯•ï¼Œè½¬æ¢å“åº”æ•°æ®åˆ° Java ç±»å‹ç­‰è„æ´»ç´¯æ´»éƒ½ç”±è¿™åŠ¨æ€ä»£ç†çš„å®ç°ç±»ç»™åŒ…äº†ã€‚ è¯·æ±‚å‘é€æ–¹è°ƒç”¨è¿™ä¸ªæ¥å£æ—¶ï¼Œå®é™…ä¸Šå°±æ˜¯åœ¨è°ƒç”¨è¿™ä¸ªå¹²è„æ´»ç´¯æ´»çš„å®ç°ç±»</p> 
<h3 style="margin-left:0; margin-right:0; text-align:left">æ–‡æ¡£å’Œç¤ºä¾‹</h3> 
<ul style="list-style-type:disc; margin-left:0; margin-right:0"> 
 <li><a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fforest.dtflyx.com%2F" target="_blank">é¡¹ç›®å®˜ç½‘</a></li> 
 <li><a href="https://apidoc.gitee.com/dt_flys/forest/">JavaDoc</a></li> 
 <li><a href="https://gitee.com/dt_flys/forest-example">Demoå·¥ç¨‹</a></li> 
</ul> 
<h2 style="margin-left:0; margin-right:0; text-align:start">é‡ç‚¹æ›´æ–°å†…å®¹</h2> 
<h4 style="margin-left:0; margin-right:0; text-align:start">è‡ªå®šä¹‰<code>hostnameVerifier</code></h4> 
<p style="color:#40485b; margin-left:0; margin-right:0; text-align:start">å®šä¹‰ä¸€ä¸ªå®ç° HostnameVerifier æ¥å£çš„ç±»</p> 
<div style="text-align:start"> 
 <pre><code><span>/**
 * è‡ªå®šä¹‰SSLä¸»æœºå/åŸŸåéªŒè¯å™¨
 */</span>
<strong style="color:#333333">public</strong> <span><strong style="color:#333333">class</strong> <strong style="color:#445588">MyHostnameVerifier</strong> <strong style="color:#333333">implements</strong> <strong style="color:#445588">HostnameVerifier</strong> </span>&#123;
    <span>@Override</span>
    <span><strong style="color:#333333">public</strong> <strong style="color:#333333">boolean</strong> <strong style="color:#990000">verify</strong><span>(String s, SSLSession sslSession)</span> </span>&#123;
        <strong style="color:#333333">if</strong> (<span style="color:#dd1144">"gitee.com"</span>.equals(s)) &#123;
            <strong style="color:#333333">return</strong> <strong style="color:#333333">true</strong>;
        &#125;
        <strong style="color:#333333">return</strong> <strong style="color:#333333">false</strong>;
    &#125;
&#125;
</code></pre> 
 <div style="text-align:center">
  Â 
 </div> 
</div> 
<p style="color:#40485b; margin-left:0; margin-right:0; text-align:start">å°†è‡ªå®šä¹‰çš„SSLä¸»æœºåéªŒè¯å™¨é…ç½®åˆ° Forest çš„<code>KeyStore</code>ä¸­</p> 
<p>åœ¨Springbooté¡¹ç›®çš„<code>application.yml</code>æ–‡ä»¶ä¸­é…ç½®</p> 
<div style="text-align:start"> 
 <pre><code><span style="color:#dd1144">forest:</span>
  ssl-key-<span style="color:#dd1144">stores:</span>
    - <span style="color:#dd1144">id:</span> keystore1
      hostname-<span style="color:#dd1144">verifier:</span> your.site.MyHostnameVerifier
</code></pre> 
 <div style="text-align:center">
  Â 
 </div> 
</div> 
<p style="color:#40485b; margin-left:0; margin-right:0; text-align:start">åœ¨æ¥å£ä¸­ç»‘å®š</p> 
<div style="text-align:start"> 
 <pre><code><span>@Post</span>(url = <span style="color:#dd1144">"/something"</span>, keyStore = <span style="color:#dd1144">"keystore1"</span>)
<span>String <strong style="color:#990000">postSomething</strong><span>(@Body body)</span></span>;
</code></pre> 
 <div style="text-align:center">
  Â 
 </div> 
</div> 
<h4 style="margin-left:0; margin-right:0; text-align:start"><code>@SSLHostnameVerifier</code>æ³¨è§£</h4> 
<p style="color:#40485b; margin-left:0; margin-right:0; text-align:start">é™¤äº†åœ¨å…¨å±€é…ç½®æ–‡ä»¶ä¸­çš„<code>keyStore</code>ä¸­é…ç½®å¤–, ä¹Ÿå¯ä»¥é€šè¿‡ç›¸å…³æ³¨è§£ç›´æ¥åœ¨æ¥å£ä¸Šç»‘å®š</p> 
<div style="text-align:start"> 
 <pre><code><strong style="color:#333333">public</strong> <span><strong style="color:#333333">class</strong> <strong style="color:#445588">MyHostnameVerifier</strong> <strong style="color:#333333">implements</strong> <strong style="color:#445588">HostnameVerifier</strong> </span>&#123;
    <span>@Override</span>
    <span><strong style="color:#333333">public</strong> <strong style="color:#333333">boolean</strong> <strong style="color:#990000">verify</strong><span>(String hostname, SSLSession session)</span> </span>&#123;
        <em>// åªé€šè¿‡åŸŸåä¸º gitee.com çš„è¯·æ±‚</em>
        <strong style="color:#333333">if</strong> (<span style="color:#dd1144">"gitee.com"</span>.equals(hostname)) &#123;
            <strong style="color:#333333">return</strong> <strong style="color:#333333">true</strong>;
        &#125;
        <strong style="color:#333333">return</strong> <strong style="color:#333333">false</strong>;
    &#125;
&#125;
</code></pre> 
 <div style="text-align:center">
  Â 
 </div> 
</div> 
<p style="color:#40485b; margin-left:0; margin-right:0; text-align:start">é€šè¿‡<code>@SSLHostnameVerifier</code>æ³¨è§£ç»‘å®šåˆ°æ¥å£</p> 
<div style="text-align:start"> 
 <pre><code><span>@Post</span>(url = <span style="color:#dd1144">"/something"</span>)
<span>@SSLHostnameVerifier</span>(TrustAnyHostnameVerifier.class)
<span>String <strong style="color:#990000">postSomething</strong><span>(@Body body)</span></span>;
</code></pre> 
 <div style="text-align:center">
  Â 
 </div> 
</div> 
<h4 style="margin-left:0; margin-right:0; text-align:start"><code>@SSLSocketFactoryBuilder</code>æ³¨è§£</h4> 
<p style="color:#40485b; margin-left:0; margin-right:0; text-align:start">åŒç† SSLSocketFactory ä¹Ÿä¸€æ ·å¯ä»¥è‡ªå®šä¹‰ï¼ŒåŒæ—¶ç”±<code>@SSLSocketFactoryBuilder</code>æ³¨è§£æ¥ç»‘å®š</p> 
<div style="text-align:start"> 
 <pre><code><strong style="color:#333333">public</strong> <span><strong style="color:#333333">class</strong> <strong style="color:#445588">MySSLSocketFactoryBuilder</strong> <strong style="color:#333333">implements</strong> <strong style="color:#445588">SSLSocketFactoryBuilder</strong> </span>&#123;

    <span>@Override</span>
    <span><strong style="color:#333333">public</strong> SSLSocketFactory <strong style="color:#990000">getSSLSocketFactory</strong><span>(ForestRequest request, String protocol)</span> <strong style="color:#333333">throws</strong> Exception </span>&#123;
        SSLContext sslContext = SSLContext.getInstance(<span style="color:#dd1144">"SSL"</span>);
        sslContext.init(<strong style="color:#333333">null</strong>,
                <strong style="color:#333333">new</strong> TrustManager[] &#123; <strong style="color:#333333">new</strong> TrustAllManager() &#125;,
                <strong style="color:#333333">new</strong> SecureRandom());
        System.out.println(<span style="color:#dd1144">"do MySSLSocketFactoryBuilder"</span>);
        <strong style="color:#333333">return</strong> sslContext.getSocketFactory();
    &#125;
&#125;
</code></pre> 
 <div style="text-align:center">
  Â 
 </div> 
</div> 
<p style="color:#40485b; margin-left:0; margin-right:0; text-align:start">ç»‘å®šåˆ°æ¥å£</p> 
<div style="text-align:start"> 
 <pre><code><span>@Post</span>(url = <span style="color:#dd1144">"/something"</span>)
<span>@SSLSocketFactoryBuilder</span>(MySSLSocketFactoryBuilder.class)
<span>String <strong style="color:#990000">postSomething</strong><span>(@Body body)</span></span>;</code></pre> 
</div> 
<div style="text-align:start"> 
 <div> 
  <div style="text-align:left"> 
   <div style="text-align:start"> 
    <div style="text-align:left"> 
     <h3 style="margin-left:0; margin-right:0">æœ¬æ¬¡æ›´æ–°</h3> 
     <blockquote> 
      <div style="text-align:start"> 
       <div style="text-align:start"> 
        <div style="text-align:start"> 
         <h4 style="margin-left:0; margin-right:0; text-align:start">æ–°å¢ç‰¹æ€§</h4> 
         <ul> 
          <li>feat: è‡ªå®šä¹‰ hostnameVerifier å’Œ SSLSocketFactoryBuilder (<a href="https://gitee.com/dromara/forest/issues/I4LGW8">#I4LGW8:è‡ªå®šä¹‰ hostnameVerifier å’Œ SSLSocketFactoryBuilder<span>Â </span></a>)</li> 
          <li>feat: æ ¹æ®Responseçš„Content-Encodingè‡ªåŠ¨è¯†åˆ«æ˜¯å¦ä¸ºgzipå‹ç¼©æ•°æ®ï¼Œå¹¶è‡ªåŠ¨è§£å‹</li> 
         </ul> 
         <h4 style="margin-left:0; margin-right:0; text-align:start">ä¿®å¤é—®é¢˜</h4> 
         <ul> 
          <li>fix: é‡å®šå‘åURLçš„Queryå‚æ•°ä¼šé‡å¤å¢åŠ  (<a href="https://gitee.com/dromara/forest/issues/I4LPGU">#I4LPGU:é‡å®šå‘åURLçš„Queryå‚æ•°ä¼šé‡å¤å¢åŠ </a>)</li> 
          <li>fix: ä¿®å¤content-encodingå¯¼è‡´çš„å­—ç¬¦ç¼–ç è½¬æ¢å¼‚å¸¸ (<a href="https://gitee.com/dromara/forest/issues/I4LJ3X">#I4LJ3X:åœ¨è¿”å›å‹ç¼©æ•°æ®æ—¶,å¦‚æœ å“åº”å¤´content-type æ²¡æœ‰charset ForestResponse.byteToString æ–¹æ³•å¼‚å¸¸</a>)</li> 
          <li>fix: ä¿®å¤å­—ç¬¦ç¼–ç åˆ¤æ–­çš„BUG</li> 
         </ul> 
         <h4 style="margin-left:0; margin-right:0; text-align:start">ä»£ç æ›´æ–°</h4> 
         <ul> 
          <li>add: @SSLHostnameVerifier æ³¨è§£</li> 
          <li>add: @SSLSocketFactoryBuilder æ³¨è§£</li> 
         </ul> 
         <h2 style="margin-left:0; margin-right:0; text-align:start">é¸£è°¢</h2> 
         <p style="color:#40485b; margin-left:0; margin-right:0; text-align:start">æœ¬æ¬¡æ›´æ–°æœ‰<span>Â </span><a href="https://gitee.com/designer">@AlexShi<span>Â </span></a>å°ä¼™ä¼´å‚ä¸è´¡çŒ®ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼</p> 
        </div> 
       </div> 
      </div> 
     </blockquote> 
    </div> 
   </div> 
  </div> 
 </div> 
</div> 
<div style="text-align:start"> 
 <h2 style="margin-left:0; margin-right:0">2021å¹´åº¦OSCä¸­å›½å¼€æºé¡¹ç›®è¯„é€‰</h2> 
 <p style="margin-left:0; margin-right:0"><strong>Forestå·²å‚åŠ 2021å¹´åº¦OSCä¸­å›½å¼€æºé¡¹ç›®è¯„é€‰æ´»åŠ¨ï¼Œå¦‚æœæ‚¨å–œæ¬¢Forestæˆ–å¯¹Forestæ„Ÿå…´è¶£ï¼Œè¯·æŠ•ä¸Šæ‚¨å®è´µçš„ä¸€ç¥¨ï¼Œæ„Ÿè°¢ï¼</strong></p> 
 <p style="margin-left:0em; margin-right:0em">ç‚¹å‡»æŠ•ç¥¨ğŸ‘‰<span>Â </span><a href="https://gitee.com/link?target=https%3A%2F%2Fwww.oschina.net%2Fproject%2Ftop_cn_2021%2F%3Fid%3D573" target="_blank">æŠ•ç¥¨</a></p> 
</div>
                                        </div>
                                      
</div>
            