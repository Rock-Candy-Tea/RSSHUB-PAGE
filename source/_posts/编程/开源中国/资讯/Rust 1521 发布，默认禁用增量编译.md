
---
title: 'Rust 1.52.1 发布，默认禁用增量编译'
categories: 
 - 编程
 - 开源中国
 - 资讯
headimg: 'https://picsum.photos/400/300?random=9306'
author: 开源中国
comments: false
date: Wed, 12 May 2021 08:02:00 GMT
thumbnail: 'https://picsum.photos/400/300?random=9306'
---

<div>   
<div class="content">
                                                                    
                                                        <p>Rust 1.52.1 已发布，Rust 团队称此版本主要是解决增量编译中存在的 bug，该 bug 在 1.52.0 中会导致编译器错误。同时，团队建议所有 Rust 用户，包括目前使用 1.52.0 之前的稳定版本的用户，升级到 1.52.1 或禁用增量编译。</p> 
<p>据介绍，编译器错误的报错信息如下所示，关键部分是"found unstable fingerprints"。</p> 
<pre><code>thread 'rustc' panicked at 'assertion failed: `(left == right)`
  left: `Some(Fingerprint(4565771098143344972, 7869445775526300234))`,
  right: `Some(Fingerprint(14934403843752251060, 623484215826468126))`: found unstable fingerprints for <massive text describing rustc internals elided>

error: internal compiler error: unexpected panic

note: the compiler unexpectedly panicked. this is a bug.</code></pre> 
<p>这是由内部一致性检查引起的错误，并且如诊断中所述，它会产生“内部编译器错误”（或称为 ICE）。换句话说，它表示了 Rust 编译器自身内部的错误。在这种情况下，此项检测机制测出了在 1.52.0 版本发布之前，增量编译被启用后存在的错误，如果未发现它，可能会导致错误编译。</p> 
<p>由于 Rust 团队所发布的版本在构建时已默认关闭增量编译，所以不会对生产环境造成很大影响。当然，如果已开启增量编译，请及时禁用。</p> 
<p>这个 bug 很久之前就一直存在，所以回退版本也不能解决问题，并且 Rust 团队在 1.52.1 中也没真正解决问题，主要是提供了临时解决方案：</p> 
<ul> 
 <li>禁用 Rust 编译器中的增量编译（如果有特殊场景需要开启，设置环境变量<code>RUSTC_FORCE_INCREMENTAL=1</code>）</li> 
 <li>对于启用了增量编译的场景，改进了用于新验证的诊断输出，指示了如何通过清除增量状态或禁用增量来解决错误</li> 
</ul> 
<p>目前 Rust 编译器团队正在积极处理 bug，可能会发布 1.52.2 将这些修复补丁移植到 stable channel。</p>
                                        </div>
                                      
</div>
            