
---
title: 'Milvus 2.0 GA ：专为 AI 打造的云原生向量数据库'
categories: 
 - 编程
 - 开源中国
 - 资讯
headimg: 'https://static.oschina.net/uploads/space/2022/0210/103238_qg1g_4252687.png'
author: 开源中国
comments: false
date: Thu, 10 Feb 2022 10:34:00 GMT
thumbnail: 'https://static.oschina.net/uploads/space/2022/0210/103238_qg1g_4252687.png'
---

<div>   
<div class="content">
                                                                                            <p><span><span><span><span><span><span><span>近日，获得</span></span></span><span><span><span> AI </span></span></span><span><span><span>开发者广泛关注（</span></span></span><span><span><span>Github star </span></span></span><span><span><span>数</span></span></span><span><span><span> 9000+</span></span></span><span><span><span>）的</span></span></span><span><span><span>“</span></span></span><span><span><span>AI </span></span></span><span><span><span>神鸟项目</span></span></span><span><span><span>” Milvus </span></span></span><span><span><span>向量数据库（</span></span></span><span><span><span>Milvus </span></span></span><span><span><span>在英文中指鸢），正式宣布</span></span></span><span><span><span>2.0 </span></span></span><span><span><span>版本的</span></span></span><span><span><span> GA</span></span></span><span><span><span>。全新的</span></span></span><span><span><span> Milvus </span></span></span><span><span><span>向量数据库具备支持大规模生产环境的能力，帮助开发者在构建深度学习、机器视觉、语义学习等大规模系统时，能够快速构建起</span></span></span><strong><span><span><span><strong>高可靠、高性能、高检索效率、运维管理友好</strong></span></span></span></strong><span><span><span>的向量数据（</span></span></span><span><span><span>embedding vector</span></span></span><span><span><span>）处理平台。</span></span></span></span></span></span></span></p> 
<p style="margin-left:.0001pt; margin-right:0"><span><span><span><span><strong><span><span><span><strong>“</strong></span></span></span></strong><strong><span><span><span><strong>这不是一次简单的版本升级，而是一次全面重构</strong></span></span></span></strong><span><span><span>，也是我们过去三年在向量数据库领域探索之后的集大成之作。在经过对架构进行全面重新设计，及</span></span></span><span><span><span> 9 </span></span></span><span><span><span>个</span></span></span><span><span><span> RC </span></span></span><span><span><span>版本的迭代后，我们正式宣布</span></span></span><span><span><span> Milvus 2.0 </span></span></span><span><span><span>的</span></span></span><span><span><span> GA。 Milvus </span></span></span><span><span><span>的用户将由此能够获得生产级可用的开源向量数据库系统，它可以部署在任意云基础设施上，使用更加便利，性能更加强大，整体成本也更为优化。</span></span></span><span><span><span>”</span></span></span><span><span><span>Milvus </span></span></span><span><span><span>工程总监栾小凡如此描述此次</span></span></span> <span><span><span>GA </span></span></span><span><span><span>对</span></span></span><span><span><span> Milvus </span></span></span><span><span><span>项目的意义。</span></span></span></span></span></span></span></p> 
<p style="margin-left:.0001pt; margin-right:0"><span><span><span><span><span><span><span>“</span></span></span><span><span><span>我们在迭代了</span></span></span><span><span><span> 19 </span></span></span><span><span><span>个版本后发布了</span></span></span><span><span><span> Milvus </span></span></span><span><span><span>的</span></span></span><span><span><span> 1.0 </span></span></span><span><span><span>版本，并获得了全球近</span></span></span><span><span><span> 1000 </span></span></span><span><span><span>家用户的实践验证。但我们依然看到了它的很多局限性，比如实时性与效率的冲突，成本的高昂，可扩展性和弹性的不足。于是我们开始了</span></span></span><span><span><span> 2.0 </span></span></span><span><span><span>版本的重构</span></span></span><span><span><span>。</span></span></span><span><span><span>”</span></span></span>  <span><span><span>栾小凡提及的这些局限，充分说明目前</span></span></span><span><span><span> AI </span></span></span><span><span><span>系统开发者在面对生产落地时，在算法和模型之外，也同样面临更为切实的权衡：</span></span></span></span></span></span></span></p> 
<ul> 
 <li><span><span><span><span><span><span><span>非结构化数据相比传统结构化数据，已经占据压倒性地位；</span></span></span></span></span></span></span></li> 
 <li><span><span><span><span><span><span><span>数据新鲜度非常重要，数据科学家们更希望能够拥有实时处理能力，而非忍受对</span></span></span><span><span><span> T+1 </span></span></span><span><span><span>的妥协</span></span></span><span><span><span>；</span></span></span></span></span></span></span></li> 
 <li><span><span><span><span><span><span><span>面对生产实践环境，数据处理的成本和性能更加重要，但现有的方案却仍然与需求存在距离；</span></span></span></span></span></span></span></li> 
 <li><span><span><span><span><span><span><span>数据平台能够自如的部署在各种云基础设施之上，全面云原生化势在必行。</span></span></span></span></span></span></span></li> 
</ul> 
<p style="margin-left:.0001pt; margin-right:0"><span><span><span><span><span><span><span>的确，随着</span></span></span><span><span><span> AI </span></span></span><span><span><span>应用的大规模快速普及，一套</span></span></span><span><span><span> AI </span></span></span><span><span><span>系统需要应对的业务数据量呈几何级数增长。这其中以图形、视频、音频为代表的非结构化数据为主。目前业务处理这类非结构化数据的主流的做法是将数据通过算法先转化成向量（embedding</span></span></span> <span><span><span>vector），之后通过向量数据库平台进行向量近似性搜索，以实现对这些数据的搜索查询等需求。在最近的人工智能顶会</span></span></span> <span><span><span>NeurIPS </span></span></span><span><span><span>上，</span></span></span><span><span><span>Google</span></span></span><span><span><span>、</span></span></span><span><span><span>Facebook </span></span></span><span><span><span>及</span></span></span> <span><span><span>Microsoft </span></span></span><span><span><span>的</span></span></span><span><span><span> AI </span></span></span><span><span><span>团队向业界公开了数个全新的</span></span></span><strong><span><span><span><strong> 10 </strong></span></span></span></strong><strong><span><span><span><strong>亿级向量数据包</strong></span></span></span></strong><span><span><span>，而这些数据全部基于真实的业务场景产生。面对这些这些真正意义上的</span></span></span><span><span><span>“</span></span></span><span><span><span>大规模</span></span></span><span><span><span>”</span></span></span><span><span><span>并且仍在高速增长的海量数据，是否有更好的向量数据库解决方案，能在</span></span></span><strong><span><span><span><strong>更高的效率、更好的成本收益比，更稳定可靠的平台支持，更方便的运维管理之间取得取舍均衡</strong></span></span></span></strong><span><span><span>，是业界的焦点所在。</span></span></span></span></span></span></span></p> 
<p style="margin-left:.0001pt; margin-right:0"><span><span><span><span><span><span><span>Milvus 2.0 </span></span></span><span><span><span>正是为</span></span></span><strong><span><span><span><strong>应对这种大规模生产级场景而设计的向量数据库系统</strong></span></span></span></strong><span><span><span>，综合考虑了架构稳定性、工程可靠性、性能、成本、功能、用户体验等多种因素，并全面拥抱云原生技术。</span></span></span></span></span></span></span></p> 
<p style="margin-left:.0001pt; margin-right:0"><span><span><span><span><span><span><span>Milvus 2.0 </span></span></span><span><span><span>围绕三个理念，重新定义了新一代云原生向量数据库：</span></span></span></span></span></span></span></p> 
<ul> 
 <li><span><span><span><span><strong><span><span><span><strong>云原生优先：</strong></span></span></span></strong><span><span><span>存储计算分离的架构更能发挥云的弹性，以实现按需扩容的模式。</span></span></span> <span><span><span>而</span></span></span><span><span><span> Milvus 2.0 </span></span></span><span><span><span>采取了读写分离、实时离线分离、计算瓶颈</span></span></span><span><span><span>/</span></span></span><span><span><span>内存瓶颈</span></span></span><span><span><span>/IO</span></span></span><span><span><span>瓶颈分离的微服务化设计模式，这有助于面对复杂的工作负载选择最佳的资源配比。</span></span></span></span></span></span></span></li> 
 <li><span><span><span><span><strong><span><span><span><strong>日志即数据：</strong></span></span></span></strong><span><span><span>Milvus 2.0 </span></span></span><span><span><span>引入消息存储作为系统的骨架，数据的插入修改只通过消息存储交互，执行节点通过订阅消息流来执行数据库的增删改查操作。这一设计的优势在于降低了系统的复杂度，将数据库关键的持久化和闪回等能力都下钻到存储层；另一方面，日志订阅机制提供了极大的灵活性，为系统未来的拓展奠定了基础。</span></span></span></span></span></span></span></li> 
 <li><span><span><span><span><strong><span><span><span><strong>批流一体：</strong></span></span></span></strong><span><span><span>Milvus 2.0 </span></span></span><span><span><span>实现了</span></span></span><span><span><span> unified Lambda </span></span></span><span><span><span>流式处理架构，增量数据和离线数据一体化处理。相比</span></span></span> <span><span><span>Kappa </span></span></span><span><span><span>架构，</span></span></span><span><span><span>Milvus </span></span></span><span><span><span>引入对日志流的批量计算将日志快照和构建索引存入对象存储，这大大提高了故障恢复速度和查询效率。为了将无界的流式数据拆分成有界的窗口，</span></span></span><span><span><span>Milvus </span></span></span><span><span><span>采用</span></span></span><span><span><span> watermark </span></span></span><span><span><span>机制，通过写入时间（也可以是事件发生时间）将数据切分为多个小的处理单元，并维护了一条时间轴便于用户基于某个时间点进行查询。</span></span></span></span></span></span></span></li> 
</ul> 
<p style="margin-left:.0001pt; margin-right:0"><img alt height="353" src="https://static.oschina.net/uploads/space/2022/0210/103238_qg1g_4252687.png" width="500" referrerpolicy="no-referrer"></p> 
<p style="margin-left:0.0001pt; margin-right:0px"><em><span><span><span><span><span><span><span>Milvus 2.0 </span></span></span><span><span><span>架构概览</span></span></span></span></span></span></span></em></p> 
<p style="margin-left:.0001pt; margin-right:0"><span><span><span><span><span><span><span>基于上述的理念及架构设计，</span></span></span><span><span><span>Milvus 2.0 </span></span></span><span><span><span>可以支持：</span></span></span><strong> </strong><strong><span><span><span><strong>百亿规模的向量数据扩展能力，增量数据毫秒级实时可见的数据可见性，存储计算的秒级扩缩容能力，</strong></span></span></span></strong><strong><span><span><span><strong>10 </strong></span></span></span></strong><strong><span><span><span><strong>毫秒级查询延时性能，分钟级的故障恢复能力，动态负载均衡能力</strong></span></span></span></strong><span><span><span>；提供完善的面向向量数据的增删改查功能，数据压缩压缩功能，动态加载索引功能，及图形化</span></span></span><span><span><span> GUI </span></span></span><span><span><span>及命令行管理工具，提供</span></span></span><span><span><span> PyMilvus</span></span></span><span><span><span>、</span></span></span><span><span><span>Node.js</span></span></span><span><span><span>、</span></span></span><span><span><span>Java and Go </span></span></span><span><span><span>等多语言语言</span></span></span><span><span><span> SDK</span></span></span><span><span><span>。目前，</span></span></span><span><span><span>Milvus 2.0 </span></span></span><span><span><span>无论在性能、功能、稳定性、可扩展性及易用性方面，均到达业绩领先水平，重新定义了向量数据库的标杆。</span></span></span></span></span></span></span></p> 
<p style="margin-left:.0001pt; margin-right:0"><span><span><span><span><span><span><span>“</span></span></span><span><span><span>基于大数据</span></span></span><span><span><span> + AI </span></span></span><span><span><span>的应用架构依然过于复杂，简化非结构化数据处理一直是</span></span></span><span><span><span> Milvus </span></span></span><span><span><span>社区努力的方向。</span></span></span><span><span><span>”</span></span></span> <span><span><span>谈及</span></span></span><span><span><span> Milvus </span></span></span><span><span><span>项目未来的发展路线图时，栾小凡这样表示。接下来的</span></span></span><span><span><span> Milvus </span></span></span><span><span><span>项目会重点关注以下几个方向：</span></span></span></span></span></span></span></p> 
<ul> 
 <li><span><span><span><span><strong><span><span><span><strong>DB for AI</strong></span></span></span></strong><span><span><span>：</span></span></span><span><span><span>作为一款数据库，除了基本的</span></span></span><span><span><span> CRUD </span></span></span><span><span><span>功能之外，</span></span></span><span><span><span>Milvus </span></span></span><span><span><span>必然还需要更强大的数据查询能力、更智能的查询优化器、更全的数据管理功能等。下一阶段将重点补齐</span></span></span><span><span><span> Milvus 2.0 </span></span></span><span><span><span>目前还不支持的</span></span></span><span><span><span> DML </span></span></span><span><span><span>功能和数据类型，比如删除、更新操作和支持</span></span></span><span><span><span> string </span></span></span><span><span><span>数据类型。</span></span></span></span></span></span></span></li> 
 <li><span><span><span><span><strong><span><span><span><strong>AI for DB：</strong></span></span></span></strong><span><span><span>向量索引类型、索引参数、用户工作负载、硬件类型、成本性能等的约束构成了一个非常庞大的</span></span></span><span><span><span> tradeoff</span></span></span><span><span><span>，尽可能避免手动调优有助于降低使用复杂度。我们已经着手分析系统负载，收集访问热度的数据，后续将引入自动参数调优工作以降低用户的理解成本。</span></span></span></span></span></span></span></li> 
 <li><span><span><span><span><strong><span><span><span><strong>成本优化：</strong></span></span></span></strong><span><span><span>向量召回的最大挑战是需要在限定时间内处理海量数据，这项工作既是计算密集型，也是访存密集型。在物理执行层引入</span></span></span><span><span><span> GPU</span></span></span><span><span><span>、</span></span></span><span><span><span>FPGA </span></span></span><span><span><span>等异构硬件加速可以大幅降低</span></span></span> <span><span><span>CPU </span></span></span><span><span><span>开销。我们正在开发磁盘内存混合的</span></span></span> <span><span><span>ANN </span></span></span><span><span><span>索引算法，可以在有限的内存下实现海量向量的高性能查询。于此同时，我们也在评估开源的</span></span></span> <span><span><span>ScaNN</span></span></span><span><span><span>、</span></span></span><span><span><span>NGT </span></span></span><span><span><span>等向量索引算法的性能。</span></span></span></span></span></span></span></li> 
 <li><span><span><span><span><strong><span><span><span><strong>易用性：</strong></span></span></span></strong><span><span><span>Milvus </span></span></span><span><span><span>易用性的提升体现在集群管理工具、多语言</span></span></span><span><span><span> SDK</span></span></span><span><span><span>、部署工具、运维工具等许多方面，</span></span></span><span><span><span>Milvus </span></span></span><span><span><span>将在这些方向持续迭代完善</span></span></span><span><span><span>。</span></span></span><span><span><span>同时</span></span></span><span><span><span>，Milvus </span></span></span><span><span><span>的设计理念是可以在任何平台运行，在接下来的几个版本更新中，</span></span></span><span><span><span> Milvus </span></span></span><span><span><span>将支持</span></span></span><span><span><span> MacOS </span></span></span><span><span><span>系统（</span></span></span><span><span><span>M1 </span></span></span><span><span><span>芯片及</span></span></span><span><span><span>x86 </span></span></span><span><span><span>芯片）以及</span></span></span> <span><span><span>ARM </span></span></span><span><span><span>架构。</span></span></span></span></span></span></span></li> 
</ul> 
<p style="margin-left:.0001pt; margin-right:0"><span><span><span><span>在接下来的几个版本更新中，</span></span><span><span> Milvus </span></span><span><span>将支持</span></span><span><span> MacOS </span></span><span><span>系统（</span></span><span><span>M1 </span></span><span><span>芯片及</span></span><span><span>x86 </span></span><span><span>芯片）以及</span></span> <span><span>ARM </span></span><span><span>架构。</span></span></span></span></p>
                                        </div>
                                      
</div>
            