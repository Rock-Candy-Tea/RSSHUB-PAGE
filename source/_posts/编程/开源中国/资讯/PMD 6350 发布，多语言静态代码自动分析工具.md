
---
title: 'PMD 6.35.0 发布，多语言静态代码自动分析工具'
categories: 
 - 编程
 - 开源中国
 - 资讯
headimg: 'https://picsum.photos/400/300?random=3366'
author: 开源中国
comments: false
date: Tue, 01 Jun 2021 07:30:00 GMT
thumbnail: 'https://picsum.photos/400/300?random=3366'
---

<div>   
<div class="content">
                                                                    
                                                        <p>PMD 是一个代码分析器，能够帮助发现常见的编程问题，比如未使用的变量、空的 catch 块、不必要的对象创建等等。最初仅支持 Java 代码，目前还可支持 JavaScript、<a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fsalesforce.com%2F">Salesforce.com</a> Apex 和 Visualforce、PLSQL、Apache Velocity、XML 和 XSL 。</p> 
<p>PMD 6.35.0 正式发布，本次更新内容如下：</p> 
<p><strong>Javascript 模块现在至少需要 Java 8：</strong></p> 
<p>我们使用了最新版本的 JavaScript 实现 Rhino 用于解析 JavaScript 代码，至少需要 Java 8。因此我们决定将 pmd-javascript 模块也升级到 Java 8。这意味着，从现在开始，需要一个 Java 8 或更高版本的运行时，以便来分析 JavaScript 代码。PMD 核心仍然只需要 Java 7。</p> 
<p><strong>新规则：</strong></p> 
<p>此版本附带 3 个新的 Java 规则：</p> 
<ul> 
 <li> <p><code>[JUnit5TestShouldBePackagePrivate](<https://pmd.github.io/pmd-6.35.0/pmd_rules_java_bestpractices.html#junit5testshouldbepackageprivate>)</code> 强制执行以下约定：JUnit 5 测试应该具有最小的可见性。您可以像下面这样尝试此规则：</p> <p><code><rule ref="category/java/bestpractices.xml/JUnit5TestShouldBePackagePrivate" /></code></p> </li> 
 <li> <p><code>[CognitiveComplexity](<https://pmd.github.io/pmd-6.35.0/pmd_rules_java_design.html#cognitivecomplexity>)</code> 使用 cognitive complexity 指标来查找过于复杂的代码。该度量标准以多种方式改进了类似的循环复杂性，可以像下面这样尝试此规则：</p> <p><code><rule ref="category/java/design.xml/CognitiveComplexity" /></code></p> </li> 
 <li> <p><code>[MutableStaticState](<https://pmd.github.io/pmd-6.35.0/pmd_rules_java_design.html#mutablestaticstate>)</code> 查找非最终的非私有静态字段。这些字段破坏了封装，因为可以</p> <p>在程序中的任何位置修改这些字段。可以像下面这样尝试此规则：</p> <p><code><rule ref="category/java/design.xml/MutableStaticState" /></code></p> </li> 
</ul> 
<p><strong>修改后的规则：</strong></p> 
<ul> 
 <li>Java 规则 <code>CompareObjectsWithEquals</code> 现在有一个新属性 <code>typesThatCompareByReference</code>。通过这个属性，你可以配置应该通过引用进行比较被列入白名单的类型。默认情况下，java.lang.Enum 和 java.lang.Class 是允许的，但是你可以在这里添加自定义类型。 此外，现在还允许对常量进行比较；</li> 
</ul> 
<p><strong>废弃的规则：</strong></p> 
<ul> 
 <li>Java 规则 DefaultPackage 已经被弃用，取而代之的是 CommentDefaultAccessModifier；</li> 
 <li>Java 规则 CloneThrowsCloneNotSupportedException 已被弃用，没有替换；</li> 
</ul> 
<p><strong>修复的问题：</strong></p> 
<ul> 
 <li>apex 
  <ul> 
   <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fpmd%2Fpmd%2Fissues%2F3183" target="_blank">#3183</a>: [apex] ApexUnitTestMethodShouldHaveIsTestAnnotation 在帮助方法中出现误报；</li> 
   <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fpmd%2Fpmd%2Fpull%2F3243" target="_blank">#3243</a>: [apex] 遍历 AST 时正确处理 findBoundary 核心；</li> 
  </ul> </li> 
 <li>core 
  <ul> 
   <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fpmd%2Fpmd%2Fissues%2F2639" target="_blank">#2639</a>: [core] 如果路径中的目录不存在，则不创建 PMD CLI 输出文件；</li> 
   <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fpmd%2Fpmd%2Fissues%2F3196" target="_blank">#3196</a>: [core] 废弃 ThreadSafeReportListener；</li> 
  </ul> </li> 
 <li>doc 
  <ul> 
   <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fpmd%2Fpmd%2Fissues%2F3230" target="_blank">#3230</a>: [doc] 删除语言索引页的 "Edit me" 按钮；</li> 
  </ul> </li> 
 <li>dist 
  <ul> 
   <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fpmd%2Fpmd%2Fissues%2F2466" target="_blank">#2466</a>: [dist] 分发存档不包括所有批处理脚本；</li> 
  </ul> </li> 
 <li>java 
  <ul> 
   <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fpmd%2Fpmd%2Fpull%2F3269" target="_blank">#3269</a>: [java] 修复 MethodTypeResolution 中的 NPE；</li> 
  </ul> </li> 
 <li>java-design 
  <ul> 
   <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fpmd%2Fpmd%2Fissues%2F2780" target="_blank">#2780</a>: [java] 文档中的 DataClass 例子导致了错误的漏报；</li> 
   <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fpmd%2Fpmd%2Fissues%2F2987" target="_blank">#2987</a>: [java] 新规则：公共和受保护的静态字段必须是最终的；</li> 
   <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fpmd%2Fpmd%2Fissues%2F2329" target="_blank">#2329</a>: [java] Java 的 Cognitive complexity 规则；</li> 
  </ul> </li> 
 <li>javascript： 
  <ul> 
   <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fpmd%2Fpmd%2Fissues%2F699" target="_blank">#699</a>: [javascript] 更新 Rhino 库至 1.7.13；</li> 
   <li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fpmd%2Fpmd%2Fissues%2F2081" target="_blank">#2081</a>: [javascript] 解析 Javascript 文件时出现 OutOfMemoryError 故障；</li> 
   <li>……</li> 
  </ul> </li> 
</ul> 
<p>更多详情可查看：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fpmd%2Fpmd%2Freleases%2Ftag%2Fpmd_releases%252F6.35.0" target="_blank">https://github.com/pmd/pmd/releases/tag/pmd_releases%2F6.35.0</a></p>
                                        </div>
                                      
</div>
            