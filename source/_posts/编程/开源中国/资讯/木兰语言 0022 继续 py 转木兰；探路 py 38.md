
---
title: '木兰语言 0.0.22 继续 py 转木兰；探路 py 3.8'
categories: 
 - 编程
 - 开源中国
 - 资讯
headimg: 'https://oscimg.oschina.net/oscnet/up-14dc1f1f1fff933199c69bea39dde4faa02.png'
author: 开源中国
comments: false
date: Mon, 19 Jul 2021 15:33:00 GMT
thumbnail: 'https://oscimg.oschina.net/oscnet/up-14dc1f1f1fff933199c69bea39dde4faa02.png'
---

<div>   
<div class="content">
                                                                    
                                                        <p>之前复现了一部分由 Python 自动转换为木兰代码的功能，运行如下命令就能输出木兰代码：<code>$ 木兰 -兰 某某.py</code>，但尚缺失一些基本语法支持，该功能尚未达到实用程度。</p> 
<p>这两天将插入和冒泡排序算法为目标，按需复原了相关部分，达成效果如下（左 Python 右木兰）：</p> 
<p><img alt height="325" src="https://oscimg.oschina.net/oscnet/up-14dc1f1f1fff933199c69bea39dde4faa02.png" width="942" referrerpolicy="no-referrer"></p> 
<p><img alt height="434" src="https://oscimg.oschina.net/oscnet/up-828b9607bdf19c73ca5622ec1a3ababf4bb.png" width="913" referrerpolicy="no-referrer"></p> 
<p>下面打算以 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgitee.com%2FMulanRevive%2Fmulan-rework%2Fblob%2Fmaster%2F%2525E6%2525B5%25258B%2525E8%2525AF%252595%2F%2525E6%252589%25258B%2525E5%2525B7%2525A5%2525E6%2525B5%25258B%2525E8%2525AF%252595%2F%2525E5%252591%2525BD%2525E4%2525BB%2525A4%2525E8%2525A1%25258C.ul" target="_blank">猜数字例程</a> 为目标继续补完转换功能。</p> 
<p>另外，前几天有位在项目首页加了 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fmybinder.org%2Fv2%2Fgit%2Fhttps%25253A%25252F%25252Fgitee.com%25252FMulanRevive%25252Fmulan-rework%2FHEAD" target="_blank">binder 在线环境</a>，这才知道有这样的免费服务：</p> 
<p><img alt height="241" src="https://oscimg.oschina.net/oscnet/up-4fc5168893c903eecb9338c56a029248b08.png" width="776" referrerpolicy="no-referrer"></p> 
<p>还干了件闲事。木兰重现项目伊始时，就确认了按原始实现基于 python3.7，毕竟离 2023 年还有段时间。不过，现在积攒了这么些测试用例，忍不住想看看如果以后需要升级到 Python 3.8 的话有多大工作量。结果是 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgitee.com%2FMulanRevive%2Fmulan-rework%2Fcommit%2F5758d173b1b45e94f7c7ac43dc6bf4d76c34456c" target="_blank">添了一处代码</a>，就通过了语法功能部分的测试用例，不过有下面几个语法树相关报警待研究：</p> 
<p><img alt height="326" src="https://oscimg.oschina.net/oscnet/up-4d765aa921baf85c17d202e98ce7c75ee52.png" width="870" referrerpolicy="no-referrer"></p> 
<p>每年应付一次 Python 大版本升级导致的语法树变动，似乎还可以接受。先搁着，需要的话再说吧。</p> 
<hr> 
<h3><em><strong>附：代码量统计</strong></em></h3> 
<p>主要部分的代码行数统计，格式为：上次->现在。</p> 
<ul> 
 <li>木兰代码量 3206 -> 3259 
  <ul> 
   <li>运行环境，实现与测试大部为木兰代码：582</li> 
   <li>木兰测试用例，包括部分实用小程序（如井字棋）：2624 -> 2677</li> 
  </ul> </li> 
 <li>Python 代码量（木兰实现、测试框架、语法树生成木兰中的 Python 测试代码）：3711 -> 3867 
  <ul> 
   <li><code>生成/木兰.py</code>：242 -> 350</li> 
   <li>其他似乎没怎么变</li> 
  </ul> </li> 
</ul> 
<p> </p> 
<p>嗯，每次都要手动统计忒二了，用木兰写个自动统计的脚本吧~</p>
                                        </div>
                                      
</div>
            