
---
title: 'Zx 3.0.0 正式发布，谷歌开源的脚本工具'
categories: 
 - 编程
 - 开源中国
 - 资讯
headimg: 'https://picsum.photos/400/300?random=110'
author: 开源中国
comments: false
date: Mon, 23 Aug 2021 08:07:00 GMT
thumbnail: 'https://picsum.photos/400/300?random=110'
---

<div>   
<div class="content">
                                                                    
                                                        <p>zx 是一个更方便、更友好地帮助开发者写脚本的工具，由谷歌开源和负责维护。</p> 
<p><strong>简介</strong></p> 
<p>虽然 Bash 十分好用，但在编写脚本的时候，大家通常会选择一种更方便的编程语言，例如 JavaScript 就是一个很完美的方案。不过标准的 Node.js 库在使用之前需要许多额外的操作，比如安装、导入库等，zx 为<code>child_process</code>提供了封装器，用于转义参数并提供切合实际的默认值。</p> 
<pre><code class="language-javascript">#!/usr/bin/env zx

await $`cat package.json | grep name`

let branch = await $`git branch --show-current`
await $`dep deploy --branch=$&#123;branch&#125;`

await Promise.all([
  $`sleep 1; echo 1`,
  $`sleep 2; echo 2`,
  $`sleep 3; echo 3`,
])

let name = 'foo bar'
await $`mkdir /tmp/$&#123;name&#125;`
</code></pre> 
<p><strong>新变化</strong></p> 
<p>zx 3.0.0 于上周正式发布，主要变化如下：</p> 
<ul> 
 <li>使用继承的标准输入而不是管道</li> 
 <li>对测试文件和示例文件进行分离</li> 
 <li>为支持解析正确的脚本扩展名，修复了修剪查询字符串方法</li> 
 <li>添加退出代码信息</li> 
 <li>修复在 question() 调用处的中断</li> 
 <li>在 TS compile 添加错误打印操作</li> 
 <li>如果已经解决错误，<code>pipe()</code>会抛出异常</li> 
 <li>在- <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fgoogle%2Fzx%2Fcommit%2F479ca794808a5903d849529a3e073551ffb7f64f" target="_blank">Markdown</a> 脚本中添加对 bash 代码块的支持</li> 
 <li>修复引用和替换错误</li> 
 <li>修复 JS 堆栈的拆分正则表达式问题</li> 
</ul> 
<p>详情查看<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fgoogle%2Fzx%2Freleases%2Ftag%2F3.0.0" target="_blank"> release note</a>。（BTW，目前最新的版本是 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fgoogle%2Fzx%2Freleases%2Ftag%2F3.1.0" target="_blank">3.1.0</a>）</p>
                                        </div>
                                      
</div>
            