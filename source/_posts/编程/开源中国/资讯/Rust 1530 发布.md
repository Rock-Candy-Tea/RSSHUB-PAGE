
---
title: 'Rust 1.53.0 发布'
categories: 
 - 编程
 - 开源中国
 - 资讯
headimg: 'https://picsum.photos/400/300?random=3653'
author: 开源中国
comments: false
date: Sat, 19 Jun 2021 07:53:00 GMT
thumbnail: 'https://picsum.photos/400/300?random=3653'
---

<div>   
<div class="content">
                                                                    
                                                        <p>Rust 1.53.0 版本现已<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fblog.rust-lang.org%2F2021%2F06%2F17%2FRust-1.53.0.html" target="_blank">发布</a>。此版本包含了几个新的 language features 和许多新的 library features，包括期待已久的数组 IntoIterator 的实现。</p> 
<h4>IntoIterator for arrays</h4> 
<p>这是第一个让数组实现 IntoIterator 特性的 Rust 版本，意味着你现在可以通过 value 来迭代数组了：</p> 
<pre><code>for i in [1, 2, 3] &#123;
    ..
&#125;
</code></pre> 
<p>同样，你现在可以将数组传递给需要<code>T: IntoIterator</code>的 methods：</p> 
<pre><code>let set = BTreeSet::from_iter([1, 2, 3]);
</code></pre> 
<pre><code>for (a, b) in some_iterator.chain([1]).zip([1, 2, 3]) &#123;
    ..
&#125;
</code></pre> 
<p>从这个版本开始，数组在实现 IntoIterator 时有一个小小的变通，以避免破坏代码。编译器将继续把 array.into_iter() 解析为 (&array).into_iter()，就像该 trait 实现不存在一样。这只适用于 .into_iter() 方法的调用语法，并不影响任何其他语法，如 for e in [1, 2, 3], iter.zip([1, 2, 3]) 或 IntoIterator::into_iter([1, 2, 3]) ，它们都能正常编译。</p> 
<p>官方表示，由于 .into_iter() 的这种特殊情况只是为了避免破坏现有的代码而需要的，所以其在今年晚些时候发布的新版本 Rust 2021 中将被删除。更多信息可参见<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fblog.rust-lang.org%2F2021%2F05%2F11%2Fedition-2021.html%23intoiterator-for-arrays" target="_blank">版本公告</a>。</p> 
<h4>Or patterns</h4> 
<p>Pattern syntax 已扩展为支持<code>|</code>嵌套在 pattern 中的任何位置。这使得你可以编写<code>Some(1 | 2)</code>，而不是<code>Some(1) | Some(2)</code></p> 
<pre><code>match result &#123;
     Ok(Some(1 | 2)) => &#123; .. &#125;
     Err(MyError &#123; kind: FileNotFound | PermissionDenied, .. &#125;) => &#123; .. &#125;
     _ => &#123; .. &#125;
&#125;
</code></pre> 
<h4>Unicode 标识符</h4> 
<p>标识符现在可以包含 non-ascii 字符。<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Funicode.org%2Freports%2Ftr31%2F" target="_blank">UAX #31</a> 中定义的 Unicode 中的所有有效标识符字符。这包括来自许多不同脚本和语言的字符，但不包括表情符号。</p> 
<p>编译器会对涉及不同脚本的潜在混淆情况提出警告。例如，使用看起来非常相似的标识符将导致一个警告。</p> 
<pre><code>warning: identifier pair considered confusable between `ｓ` and `s`
</code></pre> 
<h4><strong>在 Cargo 中支持 HEAD 分支名称</strong></h4> 
<p>Cargo 不再假定 git 仓库的默认 HEAD 被命名为 master。这意味着你不再需要为来自默认分支为 main 的仓库的 git 依赖项指定<code>branch = "main"</code> 。</p> 
<h4><strong>默认情况下增量编译保持关闭</strong></h4> 
<p>增量编译在稳定版 Rust release channel 上已经默认关闭。该功能在 beta 版和 nightly release channels 上仍然可用。对于 1.53.0 稳定版，重新启用增量的方法与 1.52.1 相比没有变化。</p> 
<p>有关更多信息，可参见<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Frust-lang%2Frust%2Fblob%2Fmaster%2FRELEASES.md%23version-1530-2021-06-17" target="_blank">详细的发行说明</a>。</p>
                                        </div>
                                      
</div>
            