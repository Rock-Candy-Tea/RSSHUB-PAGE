
---
title: '淘票票首次公开小程序开发秘籍，踩过坑才知道怎么走！'
categories: 
 - 编程
 - segmentfault
 - 用户
headimg: 'https://segmentfault.com/img/bVcRhOh'
author: segmentfault
comments: false
date: 2021-04-16 08:08:50
thumbnail: 'https://segmentfault.com/img/bVcRhOh'
---

<div>   
<p>简介： 在2019年，阿里巴巴文娱的淘票票几乎涉足了当时市面上所有的小程序。在不少平台上，淘票票是阿里“第一批吃螃蟹”的技术团队。回顾过往，阿里文娱做过很多尝试，也踩过很多坑。《小程序 大世界》总结了淘票票过去 2 年在各大主流平台上的小程序实战经验，带你重新认识万亿市场规模的小程序实践！<br>2018年是小程序爆发的一年，从国内手机厂商到BAT，再到新兴的头条抖音，纷纷推出或者推广自家的小程序平台。为什么各家如此热衷小程序？每个平台的特点是什么，价值在哪里？这么多小程序我们该如何涉足？相信大家或多或少都有过这些疑问。</p><p>在2019年，阿里巴巴文娱的淘票票几乎涉足了当时市面上所有的小程序。其中在不少平台上，淘票票是阿里第一批吃螃蟹的技术团队。回顾过往，阿里文娱做过很多尝试，也踩过很多坑。现在阿里文娱将这些实战经验整理出来，为大家分享淘票票小程序实战之路。</p><p><strong>小程序核心：场景融和</strong></p><p>小程序跟传统H5有什么区别？从产品和业务角度来说，小程序的核心特点在于“场景融合”。无论是手机厂商，还是支付宝、手淘、微信、头条、抖音、百度等第三方应用，每个平台都有着既定的用户和使用场景。例如，支付宝就是生活服务类场景，头条是内容资讯类场景。每个小程序要思考的，就是如何将自己的产品功能嵌入到平台的使用场景中，实现场景融合。对于小程序本身来说，能够借助于平台的流量和用户做大做强；对于平台来说，则可以借助各种小程序，丰富使用场景，增加平台的用户粘性，最终实现双赢的结果。这也解释了为什么各家都如此热衷于小程序平台的搭建。</p><p><strong>场景定制</strong></p><p>场景融合另一个层面意味着场景定制，支付宝跟抖音的产品定位跟使用场景差别很大，各自平台上的小程序也需要有所差异。这也给我们产品技术层面带来了很大的挑战。如何通过有限的人力，同时支持这么多小程序成了我们面临的重要问题。对此，我们主要做了这么几件事：</p><p>1、区分出各个渠道的优先级和重要性，确定重点投入的渠道；</p><p>2、将主要渠道和次要渠道做了归类，产品形态上进行聚合，减小差异。例如，在支付宝和手淘这两个主要渠道上，我们主要是对标淘票票客户端，提供相对丰富的功能和玩法；而在其他渠道上，我们做了功能精简，仅保留核心的购票功能，并且产品形态上趋同；</p><p>3、技术架构方面，对各个平台的DSL进行分层优化，将业务逻辑跟界面展示分离，抽取出通用业务逻辑和Util方法，提高代码的复用度。之后的技术篇会有详细的介绍；</p><p>4、为了缩短开发周期，采用DSL+H5混合应用的方式开发，将UV较高的页面用DSL实现，以便提供较好的用户体验；UV较低的页面采用原有的H5页面，以便减少开发量。后续将根据实际情况，调整DSL和H5的比例；</p><p>5、终端全栈模式，打破传统Android、iOS、H5技术分工的界限，让Natvie同学也能够开发小程序。小程序整体语法较简单，学习难度相比传统H5较低。实际开发中，更有两位服务端同学通过两周的学习和培训，也参与到小程序的开发中。</p><p><strong>场景运营</strong></p><p>上线了这么多平台的小程序，我们有个很深切的体会：小程序相比传统App需要更多的细分场景运营，需要产品技术和运营一起探索分场景的运营策略。例如，通常我们会通过活动、优惠等形式做运营推广，以便增加流量。但是我们发现在头条和抖音平台上，主要流量不是来自于固定入口，而是来自于优秀内容推荐。好的内容往往会带来比平时多数倍甚至数十倍的流量。因此，在头条抖音平台上，内容运营的重要性就大大增强了。<br><span class="img-wrap"><img class="lazy" src="https://segmentfault.com/img/bVcRhOh" alt="image.png" title="image.png" referrerpolicy="no-referrer"></span><br><span class="img-wrap"><img class="lazy" src="https://segmentfault.com/img/bVcRhOi" alt="image.png" title="image.png" referrerpolicy="no-referrer"></span></p><p>（文中图片来自于淘票票小程序截图，仅作为技术应用场景示意，如有侵权我们将立即处理）</p><p>另外，由于每个渠道小程序平台能力和成熟度不一样，实际工作中会遇到诸多问题。因此在团队组织上，可以采用业务、产品、技术“铁三角”的小闭环模式，小步快跑，快速调研，快速反馈，快速上线。这样在小程序上线初期能够极大地提高整体效能。</p><p>6 大主流平台的小程序进阶之路</p><p>回顾淘票票的小程序矩阵的搭建过程，我们走了一条“进击之路”。接下来我会简单介绍淘票票在各个平台上小程序，之后的系列文章会详细介绍每个平台的场景、实现、遇到的问题以及沉淀的经验。</p><p><strong>支付宝小程序</strong></p><p>在支付宝平台上，淘票票从最初Natvie版本、H5版本，最终转变为小程序版本。支付宝的生活服务类场景跟淘票票是最契合的，平台的用户心智也是最稳健的。2018年4月份，我们正式启动支付宝小程序项目，期间经历了基础购票版本，视频Feed流版本，春节五福版本等数个版本迭代，最终形成淘票票小程序矩阵中功能最丰富的一支。其中视频Feed流是我们跟支付宝小程序团队共同推进的，支付宝方面为我们提供了功能丰富的视频组件，使得小程序的Feed流功能成为可能。如果有这方面需求的团队，可以在支付宝小程序平台上尝试。​</p><p><span class="img-wrap"><img class="lazy" src="https://segmentfault.com/img/bVcRhOl" alt="image.png" title="image.png" referrerpolicy="no-referrer"></span></p><p><strong>手淘轻应用</strong></p><p>2018年底，我们启动了手淘轻应用项目，用两个月时间，经历两个版本迭代。在春节档，手淘平台给淘票票贡献了大量的流量。在手淘轻应用项目中，我们遇到的主要问题是技术选型。手淘轻应用技术实现方案有几种选择：Rax、SFC、AppX，其中Rax应用最广泛，也最成熟，上线的小程序多数采用这个实现方案。然而因为我们已经开发完支付宝小程序，使用的是AppX，当时手淘容器对于AppX的支持相对较弱，最终为了保证赶上春节档，我们决定采用Rax来实现。随着Rax不断发展，能力也越来越强，我们近期也在研究基于Rax的统一小程序技术体系。</p><p><span class="img-wrap"><img class="lazy" src="https://segmentfault.com/img/bVcRhOB" alt="image.png" title="image.png" referrerpolicy="no-referrer"></span></p><p><strong>快应用</strong></p><p>在快应用正式发布前，我们就一直关注着快应用的发展，因为这是小程序矩阵中唯一不依赖于第三方应用安装，就能直接触达用户的平台。2018年初，在快应用SDK公开不久，我们就着手预研。当时还没有明确的使用场景，于是我们启动了创新孵化类项目，由技术主导，边探索边开发，最终推动产品上线。快应用也是淘票票小程序矩阵中唯一创新孵化类产品，为我们探索新技术的创新落地积累了经验。另外值得一提的是，目前快应用可以直接使用淘宝账号登录，我们也正在跟阿里其他团队一起探索快应用的联动。</p><p><strong>字节跳动小程序</strong></p><p>头条和抖音是近几年发展迅猛的App，2018年10月也推出了自己的小程序平台。头条的场景是内容资讯，抖音的场景是内容娱乐，从场景上说跟淘票票的购票场景相距较远。但是我们依然决定要进入这个小程序平台，因为对于阿里文娱来说，有一块很重要的业务是电影宣发。头条和抖音这两个场景在电影宣发领域有这比较大的价值。</p><p>我们从2018年9月份开始与头条、抖音方面沟通，10月正式启动项目。这个项目过程中的坎坷也很多，面临内部外部各方面的问题。我们自身方面，项目周期跟淘票票的春节档重合，研发资源冲突很大。而春节档是我们极为重要的档期，这相当于电影人的“双11”。阿里内部共建方面，我们面临了类似于微信小程序的问题，账号和交易部分需要集团业务平台团队提供协助。但是项目周期跟集团的“双11”、“双12”重合，于是又遇到资源冲突问题，整体推进困难重重。不过经过各方努力，项目还是顺利上线。</p><p><strong>百度小程序</strong></p><p>在头条小程序项目的同期，我们又并行了百度小程序的项目。从技术方面讲，有前面多个小程序作为基础，同时我们又通过Taro进行小程序统一化改造，整体效率相对较高。值得提一点的是，在百度App的各个子场景中，贴吧的入口很值得去运营。跟小程序本身功能关联大的贴吧能够带来不错的流量。</p><p><strong>微信小程序</strong></p><p>这是我们最早启动调研的一个小程序，但是却是上线最晚的。2017年8月份，我们开始进行微信小程序调研，然而技术方案上却遇到了巨大的阻碍。主要问题集中在账号、交易、支付等环节。直到2019年6月，我们磨练了两年的微信小程序终于上线。2019年底，我们又为影院定制了一套面向影城的小程序方案，帮助影院进行微信渠道的私域运营。</p><p>回顾这条“进击之路”，其中的坎坷和苦痛也许只有自己知道。在最紧张的时候，淘票票有四个平台的小程序并行，然而作为阿里技术人，我们不惧艰辛，不惧挑战！用技术和热情，披荆斩棘，勇攀高峰！<br><a href="https://developer.aliyun.com/article/764853?utm_content=g_1000263272" rel="nofollow">原文链接</a><br>本文为阿里云原创内容，未经允许不得转载。</p>  
</div>
            