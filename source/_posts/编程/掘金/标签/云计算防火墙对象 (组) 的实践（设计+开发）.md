
---
title: '云计算防火墙对象 (组) 的实践（设计+开发）'
categories: 
 - 编程
 - 掘金
 - 标签
headimg: 'https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/863bde6feb4a41e399a183e9fc97ea17~tplv-k3u1fbpfcp-watermark.image'
author: 掘金
comments: false
date: Fri, 02 Jul 2021 01:14:49 GMT
thumbnail: 'https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/863bde6feb4a41e399a183e9fc97ea17~tplv-k3u1fbpfcp-watermark.image'
---

<div>   
<div class="markdown-body"><style>@charset "UTF-8";@keyframes spin&#123;0%&#123;transform:rotate(0)&#125;to&#123;transform:rotate(1turn)&#125;&#125;.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#36ace1;background-image:linear-gradient(90deg,rgba(217,234,251,.25) 3%,transparent 0),linear-gradient(1turn,rgba(217,234,251,.25) 3%,transparent 0);background-size:20px 20px;background-position:50%&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;color:#36ace1&#125;.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before&#123;content:"";display:block;position:absolute;left:0;top:0;bottom:0;margin:auto;background-image:url(data:image/png;base64,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);animation:spin 2s linear 1s infinite&#125;.markdown-body h1&#123;position:relative;font-size:30px;padding:12px 38px;margin:30px 0&#125;.markdown-body h1:before&#123;width:30px;height:30px;background-size:30px 30px&#125;.markdown-body h2&#123;position:relative;font-size:24px;padding:12px 36px;margin:28px 0&#125;.markdown-body h2:before&#123;width:28px;height:28px;background-size:28px 28px&#125;.markdown-body h3&#123;position:relative;font-size:18px;padding:4px 32px;margin:26px 0&#125;.markdown-body h3:before&#123;width:24px;height:24px;background-size:24px 24px&#125;.markdown-body h4&#123;position:relative;padding:4px 28px;font-size:16px;margin:22px 0&#125;.markdown-body h4:before&#123;width:20px;height:20px;background-size:20px 20px&#125;.markdown-body h5&#123;position:relative;padding:4px 26px;font-size:15px;margin:20px 0&#125;.markdown-body h5:before&#123;width:18px;height:18px;background-size:18px 18px&#125;.markdown-body h6&#123;position:relative;padding:4px 22px;font-size:14px;margin:16px 0&#125;.markdown-body h6:before&#123;width:16px;height:16px;background-size:16px 16px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#36ace1,#dff0fe,#36ace1);overflow:visible&#125;.markdown-body hr:after&#123;content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:50px;height:24px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAEgElEQVRIS72Va0xbZRjH/z2FcimbchEQFDYRCIRAAWFQ2MaCXBwmUxYDLGGEcRFkH9wmk04zG0Bo2dwNIisERANqhjqdEmhd4nRbuwpsXDYWLLoRgeG4Chu9QHvMOQ0dpTAKH3y/tDnv8/5/z/Oc//scBv6nxdgoJ14gVYPEuITHdTdHY12gRIH0T0KljlqwthqUFHGtzAEsxqwLtPvkdc+FeeI3BgMeAMEhdOqR1mM7xswBrgmKE8pfIUhtm7fbZsft/i7wc98MtrUFxmbU6ByYgFwxjtFp5Q+WpF1mCy9wajXoqqD4E91saOf603e+5B7t99xTkyZJEiKJAl2DE9Xio1HvrBS8IuhVwVUP503swdJ9QWAw1izaoDs6pQT/655BMS9yy3KYiUoM/7adu7NmtnQfx5zWm8Q8Ui3gyGcddyU8rv/STRNQouDGP5/mhTubX4dpPv3DMzh1qS9LwuPWr+i63WVyn5QYj/4d/i4bqmbpoQ+auvBlQYghX6PE4wTSOzV5EUYlb5Q4MDqLk9/3cMRF27spDSNQamUnWZ4ebNB+OKNCyYVeFCZ5wZ5tiePN/UiP2YoQL0cUX+iFt4sNUiLdcaVvHJLecQiWnKVE8s5LvxAXRWeYgHLre0hecgAN0sxr0XBZgbJUP6OiLnaM4ivZCBrzOWBZEIY9rY5E8pl2nM0KMzzLq5aPiXmRzgbQm2VyR8KGGK/ICAFB6IusbvsDwhRf+n/jtSHc/nsGgjR9V6/1TyLa1wGU+FtnO1CbHQTHTSzIFJOYJ1jwcGLTccMTcyhp7oW4KFJ/SV4/IScrc55kQj07WNuOn94Lpw8kCm/Qv3W5HLjbWxsyfuNUO1TzWjAJBloKt2FBS+Jz6ShiA12NupBdLWugQcmn28lPMkONNql3U5cTSD9Lq+qEUqPFt++G0aKL687wDAqb+pAU7IKCuK2493AOPQ9UCNpib6T1tkg+RZ9KKJcNn8sJc1vac8o16jklLWLuOiDqwvHUIKPw7vtTON+iCDKkl/Cx9FeSYET5um1mHt6jN0Dz9ftwYjORudNjTdaBmi7kxvvA1d6Gjs0X/Q5Sp3tMEMSHre9HnDEZAPFCWUNVdliGJVPvqEP1Hbh4yPj9LadSY6fu6gPsCX+B3mq7NYLv2od8fj4aoViMNQGFijos/XVMTXGavgUisQIle71hwVx9KFEutLVjw8GORTuxoEbeJS7iPrmQyy/sIj2hQpqYHO7ZGs95nnZS4y8K8Pfqrb58UZ+IlKqbqNgfQm8da+pC9xjLqo8foFkau2qaCeXSyvzXfA9SDrp1bxJ/DU/jSJKXEWdBR2J/9U0UpwXTFZ/+8S76h/71FvO4A8sTeuqQThDKalOiPLN3BbhiYlaNsm964elkCztrC4xMqeDqYIus2JdB3cbS5l4MTag44qJt9GxbF4gKThRKY59lW13+KCUQ1pZMEwHKviKx4pFSqXzxCn/X9Gr2NO+zw+cTiTbxmUyCqH3GlsWg2kRNhOnHmhlrFkIvHTZt1borWvMCmRnwH4usn58STiycAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center&#125;.markdown-body del&#123;color:#36ace1&#125;.markdown-body code&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#282c34;color:#4ec9b0;padding:.24em .46em;margin:0 4px&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace;font-size:12px;border-radius:10px;padding:15px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#4ec9b0;background:#282c34&#125;.markdown-body a&#123;text-decoration:none;color:#409eff;border-bottom:1px solid #409eff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#007bff;border-bottom:1px solid #007bff&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;position:relative;padding:8px 26px;background-color:rgba(54,172,225,.75);margin:16px 0;border-left:4px solid #409eff;border-radius:5px&#125;.markdown-body blockquote:before&#123;content:"❝";top:10px;left:8px;color:#409eff;font-size:20px;line-height:1;font-weight:700;position:absolute;opacity:.7&#125;.markdown-body blockquote:after&#123;content:"❞";font-size:20px;position:absolute;right:8px;bottom:0;color:#409eff;opacity:.7&#125;.markdown-body blockquote>p&#123;color:#fff&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><p>「本文已参与好文召集令活动，点击查看：<a href="https://juejin.cn/post/6978685539985653767" target="_blank">后端、大前端双赛道投稿，2万元奖池等你挑战！</a>」</p>
<h1 data-id="heading-0">1、为什么要引入防火墙对象(组)的概念？</h1>
<p>在目前的云计算中，虚拟化防火墙已经成为了主流，其不但可以节省资源，还可以按序创建。SaaF（Soft As A Firewall）已经成为未来的防火墙形态，但是针对繁杂的ACL，传统的五元组就显得有些笨拙了，此时更加灵活的对象组应运而生，专门用来解决这些繁杂的问题。</p>
<h2 data-id="heading-1">1.1、对象(组)的优势</h2>
<ol>
<li>
<p>减少配置访问策略的条目</p>
</li>
<li>
<p>如果需要添加或删除某一个对象的策略时，只需要在对象组中操作就可以了</p>
</li>
<li>
<p>使我们的访问策略更有可读性</p>
</li>
<li>
<p>对象组使得策略用途简单明了</p>
</li>
<li>
<p>可以在对象中定义NAT</p>
</li>
</ol>
<h1 data-id="heading-2">2、对象(组)和规则的关系</h1>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/863bde6feb4a41e399a183e9fc97ea17~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer">
以上，对象组分为服务对象组和IP对象组，服务对象组中包含服务对象，IP对象组中包含IP对象。其中服务对象为协议和端口的组合，IP对象为单个IP、CIDR和连续的IP段。规则中包含3个对象，分别为源IP对象，目的IP对象和服务对象，这样一来对象组和传统的五元组就实现了功能对齐，而且可以实现更加详细的规则策略。</p>
<p>使用对象组的防火墙层次：对象-->对象组-->规则-->策略-->防火墙</p>
<h1 data-id="heading-3">3、对象(组)数据表设计</h1>
<h2 data-id="heading-4">3.1、详细设计</h2>
<h3 data-id="heading-5">3.1.1、对象的详细定义</h3>
<p>对象组分为IPv4地址对象组、IPv6地址对象组、服务对象组。这些对象组可以被对象策略、ACL引用，作为报文匹配的条件。</p>
<p>IPv4地址对象组内可以配置IPv4地址对象，地址对象与IPv4地址或用户绑定，用于匹配报文中的IPv4地址或报文所属的用户。</p>
<p>IPv6地址对象组内可以配置IPv6地址对象，地址对象与IPv6地址或用户绑定，用于匹配报文中的IPv6地址或报文所属的用户。</p>
<p>服务对象组内可以配置服务对象，服务对象与协议类型以及协议的特性绑定（协议特性如TCP或UDP的源端口/目的端口、ICMP协议的消息类型/消息码等），用于匹配报文中的可承载的上层协议，其中端口与协议端口号绑定，用于匹配报文中的协议端口号。</p>
<h2 data-id="heading-6">3.2、对象表结构</h2>
<pre><code class="copyable">MariaDB [neutron]> desc firewall_object;
+-------------------+---------------+------+-----+---------+-------+
| Field             | Type          | Null | Key | Default | Extra |
+-------------------+---------------+------+-----+---------+-------+
| id                | varchar(36)   | NO   | PRI | NULL    |       |
| name              | varchar(255)  | YES  |     | NULL    |       |
| project_id        | varchar(255)  | YES  | MUL | NULL    |       |
| description       | varchar(1024) | YES  |     | NULL    |       |
| object_group_type | varchar(36)   | YES  |     | NULL    |       |
| protocol          | varchar(40)   | YES  |     | NULL    |       |
| ip_version        | int(11)       | YES  |     | NULL    |       |
| source_port       | varchar(255)  | YES  |     | NULL    |       |
| destination_port  | varchar(255)  | YES  |     | NULL    |       |
| ip_address        | varchar(255)  | YES  |     | NULL    |       |
| object_group_id   | varchar(36)   | YES  |     | NULL    |       |
+-------------------+---------------+------+-----+---------+-------+
11 rows in set (0.00 sec)
<span class="copy-code-btn">复制代码</span></code></pre>
<blockquote>
<p>以上，防火墙相关表都属于neutron库，根据object_group_type类型来确定对象的类型，比如服务对象组中的对象只有protocol、source_port、destination_port这几个关键属性，IP对象组的对象有ip_version、ip_address两个关键属性，project_id、name、id、description属于公共属性。</p>
</blockquote>
<h2 data-id="heading-7">3.3、对象组表结构</h2>
<pre><code class="copyable">MariaDB [neutron]> desc firewall_object_group;
+-------------------+---------------+------+-----+---------+-------+
| Field             | Type          | Null | Key | Default | Extra |
+-------------------+---------------+------+-----+---------+-------+
| id                | varchar(36)   | NO   | PRI | NULL    |       |
| name              | varchar(255)  | YES  |     | NULL    |       |
| description       | varchar(1024) | YES  |     | NULL    |       |
| project_id        | varchar(255)  | YES  | MUL | NULL    |       |
| ip_version        | int(11)       | YES  |     | NULL    |       |
| object_group_type | varchar(36)   | YES  |     | NULL    |       |
| rule_id           | varchar(36)   | YES  |     | NULL    |       |
+-------------------+---------------+------+-----+---------+-------+
7 rows in set (0.00 sec)
<span class="copy-code-btn">复制代码</span></code></pre>
<blockquote>
<p>以上，对象组是对象的集合，其中object_group_type表明了对象组的类型，rule_id表明了此对象组关联的规则，当对象组关联了规则时无法被删除，ip_version表明了IP对象组的ip版本，建议使用IPv4，IPv6这种样式。</p>
</blockquote>
<h2 data-id="heading-8">3.4、接口定义</h2>
<h3 data-id="heading-9">3.4.1、创建对象组</h3>
<ul>
<li>
<p>method：POST</p>
</li>
<li>
<p>uri：/v2.0/firewall/object_group</p>
</li>
<li>
<p>Code：202、404</p>
</li>
<li>
<p>body：</p>
</li>
</ul>
<pre><code class="copyable">&#123;
"object_groups": &#123;
  "name": "x",
    "description": "xx",
    "project_id": "xxx",
    "ip_version": "IPv4",
    "object_group_type": "IPv4",
    "rule_id": "dsds"
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<p><strong>字段解释：</strong></p>
<ul>
<li>
<p>name：对象组名称（必填）</p>
</li>
<li>
<p>description：对象组描述（选填）</p>
</li>
<li>
<p>project_id：对象组所属项目ID（必填）</p>
</li>
<li>
<p>ip_version：IP独享的IP版本（当对象组类型为IP是必填）</p>
</li>
<li>
<p>object_group_type：对象组的类型（枚举：IPv4、IPv6、Service）</p>
</li>
<li>
<p>rule_id：对象组关联规则的ID（选填，可以在创建对象的时候关联规则，也可后续关联）</p>
</li>
</ul>
<p><strong>响应示例：</strong></p>
<pre><code class="copyable">&#123;
"object_groups": &#123;
  "id": "dsdsdsdfrrgdg-gfdgdfgdgfd"
  "name": "x",
    "description": "xx",
    "project_id": "xxx",
    "ip_version": "IPv4",
    "object_group_type": "IPv4",
    "rule_id": "dsds",
    "created_at": "2021-4-2 22:20:37"
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<blockquote>
<p>以上，初始定义的对象组表结构中没有定义创建时间created_at，在响应体中我想到了这个，所以添加了，你可以选在在设计表结构的时间增加他。这样我们就可以得到这个资源的创建时间，在以后的审计中会很有用。</p>
</blockquote>
<h3 data-id="heading-10">3.4.2、修改对象组</h3>
<ul>
<li>
<p>method：PUT</p>
</li>
<li>
<p>uri：/v2.0/firewall/object_group</p>
</li>
<li>
<p>Code：200、409</p>
</li>
<li>
<p>body：</p>
</li>
</ul>
<pre><code class="copyable">&#123;
"object_groups": &#123;
  "name": "x",
    "description": "xx"
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<blockquote>
<p>鉴于对象组的特殊性，涉及到数据切换，所以暂时设计只支持名称name和描述description的修改。</p>
</blockquote>
<p><strong>字段解释：</strong></p>
<ul>
<li>
<p>name：对象组名称（必填）</p>
</li>
<li>
<p>description：对象组描述（选填）</p>
</li>
</ul>
<p><strong>响应示例：</strong></p>
<pre><code class="copyable">&#123;
"object_groups": &#123;
  "id": "dsdsdsdfrrgdg-gfdgdfgdgfd"
  "name": "x",
    "description": "xx",
    "project_id": "xxx",
    "ip_version": "IPv4",
    "object_group_type": "IPv4",
    "rule_id": "dsds",
    "created_at": "2021-4-2 22:20:37",
    "update_at": "2021-4-2 22:25:57"
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<blockquote>
<p>以上，我在修改对象组的接口中又想到了更新时间这个字段，可以记录我们最近一次修改对象组的时间，你可以在表结构中增加这个字段。</p>
</blockquote>
<h3 data-id="heading-11">3.4.3、查询对象组</h3>
<ul>
<li>
<p>method：GET</p>
</li>
<li>
<p>uri：/v2.0/firewall/object_group</p>
</li>
<li>
<p>Code：200、404</p>
</li>
<li>
<p>响应示例：同创建</p>
</li>
</ul>
<h3 data-id="heading-12">3.4.4、删除对象组</h3>
<ul>
<li>
<p>method：DELETE</p>
</li>
<li>
<p>uri：/v2.0/firewall/object_group/&#123;object_group_id&#125;</p>
</li>
<li>
<p>Code: 201、409</p>
</li>
<li>
<p>响应示例：</p>
</li>
</ul>
<pre><code class="copyable">&#123;
"res": 0
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-13">3.4.5、CRUD对象</h3>
<p>关于对象的CRUD和对象组类似，只是在对象组的基础上，增加了所属对象组ID，IP，协议，源目的端口这几个属性，而且你依然可以为其增加创建时间和修改时间两个时间属性。</p>
<h1 data-id="heading-14">4、原型</h1>
<h2 data-id="heading-15">4.1、对象组的原型</h2>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/10870ce25726445483b96d1702875e30~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-16">4.2、对象的原型</h2>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/43b79399f40e4c9280b2642f772e0bdf~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-17">4.3、补充解释</h2>
<p>关于以上原型，只是大概的介绍，还有很多的不足，比如分页和查询，以及单条记录的快捷操作。请大家见谅，其中在规则的创建中我们可以选择数据来源为五元组或者对象组，如果为对象组，则我们需要为规则指定源地址对象组，目的地址对象组和服务对象组。</p>
<h1 data-id="heading-18">5、对象组和防火墙的联动</h1>
<p>我们创建规则可以关联对象组，同时将规则关联到策略，之后策略关联防火墙的时候，Neutron会将策略通过防火墙的插件下发到虚墙，实际使用的源地址，目的地址，协议和端口会使用对象定义的数据。而且当我们需要修改源地址等对象的时候，只需要修改对象的数据，Neutron依然可以通过防火墙的插件将变更更新到虚墙。这样可以实现更加灵活的策略变更。</p>
<h1 data-id="heading-19">6、使用场景</h1>
<ul>
<li>
<p>复杂的访问策略场景</p>
</li>
<li>
<p>高频的权限更改</p>
</li>
<li>
<p>追加的IP</p>
</li>
<li>
<p>端口的频繁变更</p>
</li>
</ul>
<h1 data-id="heading-20">7、附</h1>
<h2 data-id="heading-21">7.1、防火墙的规则是什么？</h2>
<p>防火墙的规则描述了允许或拒绝五元组或者对象组的组合。比如：允许源地址为全零的段使用ICMP协议去访问目的地址为192.168.1.1的IP，端口范围为0-255。其中的源（目的）地址可以为五元组中的IP段，也可以是IP对象组。协议和端口可以是五元组组中的协议和端口范围，也可以是对象组中的服务对象。</p>
<h2 data-id="heading-22">7.2、防火墙的策略是什么？</h2>
<p>防火墙的策略实际上市规则的集合，用来描述一组复杂的规则，从而实现类似iptables的多条ACL。比如可以允许服务器的80端口通过TCP对外提供服务，也可以允许指定IP对服务器使用ICMP协议进行访问。</p></div>  
</div>
            