
---
title: '聊聊软件架构与前端架构'
categories: 
 - 编程
 - 掘金
 - 标签
headimg: 'https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9eb6880008fc46f8b5690646c9c24261~tplv-k3u1fbpfcp-watermark.image'
author: 掘金
comments: false
date: Fri, 30 Apr 2021 02:50:01 GMT
thumbnail: 'https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9eb6880008fc46f8b5690646c9c24261~tplv-k3u1fbpfcp-watermark.image'
---

<div>   
<div class="markdown-body"><style>@charset "UTF-8";.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:#353535&#125;.markdown-body h1&#123;padding-bottom:4px;font-size:30px&#125;.markdown-body h1,.markdown-body h2&#123;margin-top:36px;margin-bottom:10px;line-height:1.5;color:#005bb7&#125;.markdown-body h2&#123;position:relative;padding-left:16px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h2:before&#123;content:"「";position:absolute;top:-6px;left:-10px&#125;.markdown-body h2:after&#123;content:"」";position:absolute;top:6px;right:auto&#125;.markdown-body h3&#123;position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:#005bb7;padding-left:6px&#125;.markdown-body h3:before&#123;content:"»";padding-right:6px;color:#2196f3&#125;.markdown-body h4&#123;margin-top:24px;font-size:16px&#125;.markdown-body h4,.markdown-body h5&#123;padding-bottom:0;margin-bottom:10px;line-height:1.5;color:#005bb7;padding-left:6px&#125;.markdown-body h5&#123;margin-top:18px;font-size:14px&#125;.markdown-body h6&#123;padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:#005bb7;padding-left:6px&#125;.markdown-body p&#123;line-height:inherit;margin-top:16px;margin-bottom:16px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#007fff,rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),#007fff);border-width:0;overflow:visible&#125;.markdown-body hr:after&#123;content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center&#125;.markdown-body code&#123;padding:.065em .4em;font-size:.87em;color:#c2185b;word-break:break-word;overflow-x:auto;background-color:#fff4f4;border-radius:2px&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8&#125;.markdown-body pre>code::-webkit-scrollbar&#123;width:4px;height:4px&#125;.markdown-body pre>code::-webkit-scrollbar-track&#123;background-color:#bedcff&#125;.markdown-body pre>code::-webkit-scrollbar-thumb&#123;background-color:#2196f3;border-radius:10px&#125;.markdown-body a&#123;position:relative;text-decoration:none;color:#3da8f5;border-bottom:1px solid #bedcff&#125;.markdown-body a:hover&#123;color:#007fff;border-bottom-color:#007fff&#125;.markdown-body a:active&#123;color:#007fff&#125;.markdown-body a:after&#123;position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid #bedcff;transition:top .3s,opacity .3s;transform:translateZ(0)&#125;.markdown-body a:hover:after&#123;top:0;opacity:1;border-bottom-color:#007fff&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #c3e0fd;border-spacing:0;border-collapse:collapse&#125;.markdown-body table thead&#123;color:#000;text-align:left;font-size:14px;background:#f6f6f6&#125;.markdown-body table tr:nth-child(2n)&#123;background-color:#f7fbff&#125;.markdown-body table tr:hover&#123;background-color:#e0edf7&#125;.markdown-body table td,.markdown-body table th&#123;padding:12px 8px;line-height:24px;border:1px solid #c3e0fd&#125;.markdown-body table th&#123;color:#005bb7;background-color:#dff0ff&#125;.markdown-body table td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#8c8c8c;border-left:4px solid #2196f3;background-color:#f0fdff;padding:1px 20px;margin:22px 0&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body b,.markdown-body blockquote>b,.markdown-body blockquote>strong,.markdown-body strong&#123;color:#2196f3&#125;.markdown-body em,.markdown-body i&#123;color:#4fc3f7&#125;.markdown-body del&#123;color:#ccc&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:4px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body details>summary&#123;outline:none;color:#005bb7;font-size:20px;font-weight:bolder;border-bottom:1px solid #bedcff;cursor:pointer&#125;.markdown-body details>p&#123;padding:10px 20px;margin:10px 0 0;color:#666;background-color:#f0fdff;border:2px dashed #2196f3&#125;.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection&#123;color:#005bb7;background-color:rgba(160,200,255,.15)&#125;.markdown-body p::selection&#123;color:#c80000&#125;.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection&#123;background-color:transparent&#125;.markdown-body code::selection&#123;background-color:#ffeaeb&#125;.markdown-body pre>code::selection&#123;background-color:rgba(160,200,255,.25)&#125;.markdown-body ol ::selection,.markdown-body ul ::selection&#123;background-color:rgba(160,200,255,.15)&#125;.markdown-body .contains-task-list&#123;padding-left:14px;list-style:none&#125;.markdown-body .contains-task-list input[type=checkbox]&#123;position:relative&#125;.markdown-body .contains-task-list input[type=checkbox]:before&#123;content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1&#125;.markdown-body .contains-task-list input[type=checkbox]:checked:after&#123;content:"✓";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><p>在软件开发行业中，我们经常能够听到架构，架构师。前端架构师, 听起来就是个很高大上的 Title, 每个初入行的前端工程师在面试时, 被问到你未来的方向是什么? 我们或许都会很顺口的回答, "嗯, 朝着架构方向走吧..."。</p>
<p>在我们前端工程师的视角中，前端架构师可能是一个：</p>
<ol>
<li>技术很赞, 编写代码的能力较强</li>
<li>对当前正在运行的业务有着较高的把握</li>
<li>工作时不经常写代码，更多的时间是在画架构图PPT等</li>
<li>对项目运行来说，看的更加长远能够考虑到后续维护</li>
</ol>
<p>前端架构师主要搞的就是整体的项目架构，对整体项目有一个把控。</p>
<p>那么软件架构到底是什么？前端架构又是什么？</p>
<p>在下面让我给大家一一道来我对软件架构和前端架构上的一些理解。</p>
<h2 data-id="heading-0">我理解的软件架构</h2>
<p>在软件行业，对于什么是架构，都有很多的争论，每个人都有自己的理解。</p>
<p>而软件架构有如下几个概念：<strong>系统与子系统</strong>，<strong>模块与组件</strong>，<strong>框架与架构</strong>。</p>
<p>对于我个人的理解来说：</p>
<h3 data-id="heading-1">系统与子系统：</h3>
<blockquote>
<p>比如说前端，后端，它们是有关联的个体，各自根据自己的框架规则范式，共同完成独特的功能。</p>
</blockquote>
<p><strong>系统</strong>：一个整体的完整的事物，比方说，前端目前情况能脱离后端独立运行吗？后端不使用View层的情况下能脱离前端运行吗? 很显然不能。那么他们单独拎出来就不能说是一个大系统。当然，你如果对前端后端内部进行细分，其实还是可以分出来很多很多系统。类似比如登录系统，登陆系统内会有很多小系统来支撑登录的功能运行。而你将前端和后端之间打通一个桥梁，前端作为展示数据，后端作为传输数据，操作数据。他俩组合起来才能够运行，这我称之为一个系统。</p>
<p><strong>子系统</strong>：子系统与系统的定义其实是一致的，只不过是观察的角度有差异，一个系统可能是另一个更大系统的子系统。类似于在前端系统中，有登录系统，用户管理系统。而在登录系统中，包含了账号密码登录，第三方账号登陆，手机号登录等等子系统。</p>
<h3 data-id="heading-2">模块与组件：</h3>
<blockquote>
<p>模块和组件都是系统的组成部分，只是从不同的角度拆分系统而已。</p>
</blockquote>
<p><strong>模块</strong>：比如说后端开发中的模块，我们分为了controllers(控制器）models(数据模型) config（配置）等等诸多模块，再比如说前端中，小到一个登录函数，大到我们的翻译适用，都能称之为是一个模块。</p>
<p><strong>组件</strong>：又比如说前端开发中的视图组件，我们分为了基础组件库（iview/element),全局基础组件，二次封装组件，领域特定组件，业务相关组件，页面级组件，而我们也可以将函数作为一个组件，因为组件是独立并且可替换，在多个维度都可以使用的。</p>
<h3 data-id="heading-3">框架与架构：</h3>
<blockquote>
<p>框架是基于某种标准约定提供基础功能的软件产品，而架构则是立与框架之上的，约束框架结构的。</p>
</blockquote>
<p><strong>框架</strong>：比如说我们前端开发的（Vue,React,Angular)，又比如我们后端开发的（Python的Django,PHP的CodeIgniter)等等更多.这些框架除了提供一些基础功能之外，它还对我们的后续的代码编写有控制，你需要按照这些框架的一定的约定来编写代码。例如： Vue的Options API,要求你按它的约定来编写代码。</p>
<p><strong>架构</strong>：架构是我们这些框架，模块组件，系统子系统的顶层结构，比如说利用文件夹将逻辑分层，等等...。又或是我们使用的框架，它的内部是有调度和渲染的，这就是框架的架构。</p>
<h2 data-id="heading-4">划定软件架构层次（分层架构）</h2>
<p>设计架构的层次要素（架构金字塔）</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9eb6880008fc46f8b5690646c9c24261~tplv-k3u1fbpfcp-watermark.image" alt="ebb535ab-add9-4027-a06f-9e2612a70e6b.jpg" loading="lazy" referrerpolicy="no-referrer">
为此，我们划定了架构的四个层级 + 基础设施层：</p>
<p><strong>系统级</strong>；即应用在整个系统内的关系，如与后台服务如何通讯，与第三方系统如何集成。（传统MVC架构，前后端分离）</p>
<p><strong>应用级</strong>；即单个应用的整体架构，及其与系统内单个应用的关系等。(单页应用程序，多页应用程序，微前端）</p>
<p><strong>模块级</strong>；即应用内部的模块架构，如代码的模块化、数据和状态的管理等。（WebPack，ESModule, 双向数据绑定（v-model 语法糖)，单向数据流（Vuex，Redux) ）</p>
<p><strong>代码级</strong>；即从代码级别的基础设施保障架构。（Eslint，Prettier，husky，lint-staged)</p>
<h2 data-id="heading-5">我对前端四层架构理解</h2>
<h3 data-id="heading-6">前后端未分离阶段/前后端未完全分离阶段/前后端分离阶段（系统级）</h3>
<h4 data-id="heading-7">前后端未分离阶段：</h4>
<p>在前后端未分离阶段，页面逻辑处理以及页面渲染全部由后端完成。比如最具代表性的MVC三层框架。用户发起请求致服务端控制层（controller)，控制层通过调用模型处理器（model）以及渲染视图（view）并将最终页面返回给客户端。
<img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4b64fa8f65b34f099ec722f7175bea37~tplv-k3u1fbpfcp-watermark.image" alt="ebb535ab-add9-4027-a06f-9e2612a70e6b.jpg" loading="lazy" referrerpolicy="no-referrer">
在这个阶段，前端几乎没有什么话语权，也就是说，当时是以后端为主的开发情况，而且这种架构需要后端关注前端的html、css代码。并且前端无法独立的去调试，也不可能单独开发前端应用。无法并行开发，开发效率极其低，后期维护成本较高。</p>
<h4 data-id="heading-8">前后端未完全分离阶段：</h4>
<p>在前后端未完全分离阶段，后端根据restful风格的API接口（通俗的讲，即传输json数据的http api接口）。前端通过AJAX请求调用后端Http API接口，并完成页面数据的绑定，最终由客户端浏览器完成页面的渲染。这种架构看起来是已经做到了前后端分完全分离。其实不然，后端接口仍需要关注前端的UI展示，后端需要为前端做接口定制化。而对于多终端的场景来说，后端就需要实现多套API接口，前后端数据以及业务耦合比较紧密。</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f7a4521519a44000819cd9d11383c776~tplv-k3u1fbpfcp-watermark.image" alt="d69dcb351e8ab43909256741b617fc81.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>这个阶段的架构使得前后端代码分离开来，并且可以独立部署上线，开发效率相比前后端未分离时有了显著的提升。</p>
<p>但是这种架构的缺点是，前端并没有掌握数据的控制逻辑，数据的控制逻辑仍然是在后端代码中实现的，致使后端代码需要过多的关注于前端业务逻辑定制API接口。客户端也需要根据接口的数据返回做大量的js处理。</p>
<h4 data-id="heading-9">前后端完全分离阶段：</h4>
<p>在前后端完全分离阶段，前端引入了NodeJs作为服务桥接层（BFF中间层），NodeJs由前端工程师负责搭建完成。通过NodeJs服务器在服务器端运行JS脚本，可以让前端人员快速入门搭建自己的服务器。引入了NodeJs后可以预选在服务端的环境中完成大量前端逻辑计算，提升前端的访问性能。</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7be599ddaa91446c9b02933d02f5cea1~tplv-k3u1fbpfcp-watermark.image" alt="微信图片_20210430183852.png" loading="lazy" referrerpolicy="no-referrer">
这种架构使得前端可以承接部分后端的逻辑处理，在前端NodeJs部分可以做接口的聚合、适配、裁剪，以便适应多端的需求。因，后台服务现有的接口从设计到实现都是与PC端桌面UI展示需求强关联，无法适应移动端等等其他端的展示需求，需要的接口字段也都不是相同的。这时就需要在BFF层，对每个端的数据进行重新的聚合适配。</p>
<p>缺点就是</p>
<ul>
<li>前端开发工程师需要同时维护前端应用与他对应的BFF层，开发成本增加。</li>
<li>需要维护各种BFF应用，以往前端也不需要关心并发等，现在并发压力集中在了BFF中。</li>
<li>链路复杂了，BFF引入后，要同时走前端、服务端的开发流程，流程更繁琐</li>
</ul>
<h3 data-id="heading-10">前端多页面架构（应用级）</h3>
<p>在我们前端应用级，目前我司前端后台管理系统使用了Vue多页面应用程序的方案。因为每个应用其实都是互相没有太大的关联性，所以这时候利用Vue多页面+良好的文件夹管理，即可划分出一个非常易读的项目结构。</p>
<p>同时，每个应用都是独立的一个Vue实例，也都有自身的接口文件，路由文件。这使得维护的难易度下降了一个量级。</p>
<p>并且每个应用内部挂载的插件可能是不一样的，这样可以准确的区分出每个应用的作用，按需引用应用所需要的插件。</p>
<h3 data-id="heading-11">前端组件化架构（模块级）</h3>
<p>通过利用文件夹区分多页面多层架构，可以来明显的划分我们前端不同作用下的组件。</p>
<p>可以通过目录，来将我们的组件分为。</p>
<ol>
<li><strong>全局基础组件</strong>（即为Src之外的目录内的组件，例如：node_modules，xxx-design)</li>
<li><strong>全局应用组件</strong>（Src目录内的component，例如：面包屑组件）</li>
<li><strong>应用组件</strong>（项目应用目录内的component，每个业务独立的组件）</li>
</ol>
<p>通过目录的划分，我们可以很明显的看到所定义的组件的作用域。（即为可能使用它的地方）</p>
<h3 data-id="heading-12">前端代码规范架构（代码级）</h3>
<p>在我们前端代码级架构中，我们在内部的wiki中制定了开发流程，代码规范。</p>
<p>但是可能有人不会完美的去执行我们指定的代码规范，这时候就需要一个强制性的约定，在我们的开发工具上。</p>
<p>对于团队而言，eslint/prettier/husky/lint-staged,这些工具都是至关重要的，对于强制约定规则，来保证代码的严谨性。</p>
<p>可以在如下三个阶段中，利用上诉工具来限制不严谨的代码产生。</p>
<p><strong>编码阶段</strong>：需要统一IDE配置以及插件安装</p>
<p>其次可以在保存代码文件时自动的用prettier来格式化书写有误的代码，部分不可自动修复的代码需要你手动改进。通过使用eslint限制代码书写规范，如果你在开发过程中书写了错误的代码，那么应用它有可能不能正常构建成功。
<img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/03d4aff8df4e473cb8af7e40dcc12bfb~tplv-k3u1fbpfcp-watermark.image" alt="微信图片_20210430184617.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p><strong>代码提交阶段</strong>：必须安装项目依赖才可以生效</p>
<p>通过husky监听git操作，比如commit，push。首先commit阶段可以利用commitizen来检测commit规范如正确通过，使用lint-staged在当前暂存区中，检查暂存区内文件代码是否符合规范，如果有某个文件不符合某条规则，弹出git操作需要改正后才可正常提交。</p>
<p><strong>CI持续集成阶段</strong>：需要熟悉并可使用CI相关应用</p>
<p>在这个阶段中，当代码被push或合并请求被提交时，可以在这个阶段运行代码的质量规范检查。因为husky是可以被跳过的，而在CI阶段中，这时候代码错误就无法被合并到测试分支/线上分支。</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a3c2ba88025d4410a3806a16bfd2e73c~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-13">写在最后</h2>
<p>第一次发文章，文章内容如有不正确不准确，欢迎在评论区指正。
如果这篇文章帮到了你，欢迎点赞和关注😊 谢谢</p>
<h2 data-id="heading-14">参考文章</h2>
<p><a href="https://www.infoq.cn/article/mNfTT4UBk5PQl3JpNt6M" target="_blank" rel="nofollow noopener noreferrer">前后端分离技术体系</a>
<a href="https://blog.csdn.net/qq_43081826/article/details/105091661" target="_blank" rel="nofollow noopener noreferrer">如何深度理解整体架构设计？</a></p></div>  
</div>
            