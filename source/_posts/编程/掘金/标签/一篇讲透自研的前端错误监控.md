
---
title: 'ä¸€ç¯‡è®²é€è‡ªç ”çš„å‰ç«¯é”™è¯¯ç›‘æ§'
categories: 
 - ç¼–ç¨‹
 - æ˜é‡‘
 - æ ‡ç­¾
headimg: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8d3f4a2bc5c745c09a05fa0368bed0bf~tplv-k3u1fbpfcp-zoom-1.image'
author: æ˜é‡‘
comments: false
date: Thu, 22 Jul 2021 01:35:33 GMT
thumbnail: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8d3f4a2bc5c745c09a05fa0368bed0bf~tplv-k3u1fbpfcp-zoom-1.image'
---

<div>   
<div class="markdown-body"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><h1 data-id="heading-0">â—‹ ä¸€ã€èƒŒæ™¯</h1>
<h2 data-id="heading-1">ç—›ç‚¹</h2>
<blockquote>
<p>æŸâ¼€å¤©äº§å“ï¼šxxxâ¼´å‘Šä¸»åé¦ˆæˆ‘ä»¬çš„â»šâ¾¯æ³¨å†Œä¸äº†ï¼
â¼œâ¼€å¤©è¿è¥ï¼šè¿™ä¸ªæ´»åŠ¨åœ¨xxxåª’ä½“ä¸ŠæŒ‚æ‰äº†ï¼</p>
</blockquote>
<p>åœ¨æˆ‘å¸çº¿ä¸Šè¿è¡Œçš„æ˜¯è¿‘äº¿çº§åˆ«çš„å¹¿å‘Šé¡µé¢ï¼Œè¿™æ ·çº¿ä¸Šå¦‚æœè£¸å¥”ï¼Œå‡ºç°äº†ä»€ä¹ˆé—®é¢˜ä¸çŸ¥é“ï¼Œåç½®åœ¨ä¸šåŠ¡ç«¯å‘ç°ï¼Œè¢«ä¸šåŠ¡æ–¹è¯¢é—®ï¼Œè¿™ç§åœºæ™¯å¾ˆå°´å°¬ã€‚</p>
<h2 data-id="heading-2">é€‰æ‹©</h2>
<p>å…¬å¸å­˜åœ¨å››ä¸ªäº‹ä¸šéƒ¨ï¼Œè€Œæ¯ä¸ªäº‹ä¸šéƒ¨ä¸ä¸‹äº3ä¸ªé¡¹ç›®ï¼Œè¿™é‡Œè‡³å°‘12ä¸ªé¡¹ç›®ï¼Œè¿™é‡Œä½œä¸ºä¼ç¬”ï¼Œä¸šåŠ¡çº¿å¤šã€‚</p>
<p>æˆ‘ä»¬æ˜¯é€‰æ‹©è‡ªå·±åšå‘¢ï¼Œè¿˜æ˜¯é€‰ç¬¬ä¸‰æ–¹çš„å‘¢ã€‚æˆ‘ä»¬æ¯”è¾ƒä¸€é¡¹å‡ æ¬¾å¸¸è§ç¬¬ä¸‰æ–¹ã€‚</p>
<ul>
<li>Fundebugï¼šä»˜è´¹ç‰ˆ 159å…ƒ/æœˆèµ·ï¼Œæ•°æ®å­˜åœ¨ç¬¬ä¸‰æ–¹ï¼Œè€Œæ•°æ®è‡ªæˆ‘ä¿å­˜éœ€è¦ 30 ä¸‡/å¹´ã€‚è¿˜æ˜¯å¾ˆè´µçš„ã€‚</li>
<li>FrontJSï¼ŒFrontJS é«˜çº§ç‰ˆ 899/æœˆï¼Œä¸“ä¸šç‰ˆæ˜¯ 2999/æœˆã€‚</li>
<li>Sentryï¼Œ80 ç¾é‡‘/æœˆã€‚</li>
</ul>
<p>ä»¥Sentryä¸ºè®¡è´¹ï¼Œå¯¹è¿™12ä¸ªé¡¹ç›®è®¡ç®—ä¸€ä¸‹ã€‚12ä¸ªé¡¹ç›®ä¸€å¹´å°†è¿‘10ä¸‡ã€‚è€Œå¤§è‡´ä¼°ç®—è¿‡éœ€è¦2äºº1.5æœˆå³90äººæ—¥ï¼Œèƒ½å®ŒæˆMVPç‰ˆæœ¬ï¼ŒæŒ‰æ¯äºº1.5ä¸‡å·¥èµ„/æœˆè®¡ç®—ï¼Œæ€»å…±èŠ±è´¹4.5ä¸‡ï¼Œè€Œä¸”æ˜¯ä¸€åŠ³æ°¸é€¸çš„ã€‚</p>
<p>å› æ­¤ä»æˆæœ¬è§’åº¦æˆ‘ä»¬ä¼šé€‰æ‹©è‡ªç ”ï¼Œä½†é™¤äº†æˆæœ¬å¤–ï¼Œè¿˜æœ‰å…¶ä»–åŸå› ã€‚ä¾‹å¦‚æˆ‘ä»¬ä¼šåŸºäºè¿™å¥—ç³»ç»Ÿåšä¸€äº›è‡ªå®šä¹‰åŠŸèƒ½ï¼Œä¸å…¬å¸æƒé™ç”¨æˆ·ç³»ç»Ÿæ‰“é€šï¼Œå†é’ˆå¯¹ç”¨æˆ·è¿›è¡ŒTodoç®¡ç†ï¼Œå¯¹ç”¨æˆ·è¿›è¡Œé”™è¯¯æ’è¡Œç­‰ã€‚</p>
<p>è¿˜æœ‰åŸºäºä¸šåŠ¡æ•°æ®çš„å®‰å…¨ï¼Œæˆ‘ä»¬å¸Œæœ›è‡ªæˆ‘æ­å»ºä¸€ä¸ªç³»ç»Ÿã€‚</p>
<p>æ‰€ä»¥ä»æˆæœ¬ã€å®‰å…¨ã€æ‰©å±•æ€§è§’åº¦ï¼Œæˆ‘ä»¬é€‰æ‹©äº†è‡ªå·±ç ”å‘ã€‚</p>
<h1 data-id="heading-3">â—‹ äºŒã€äº§å“è®¾è®¡</h1>
<blockquote>
<p>æˆ‘ä»¬è¦ä»€ä¹ˆæ ·çš„ä¸€ä¸ªäº§å“å‘¢ï¼Œæ ¹æ®ç¬¬ä¸€æ€§åŸç†ï¼Œè§£å†³å…³é”®é—®é¢˜â€œæ€ä¹ˆå®šä½é—®é¢˜â€ã€‚
é€šè¿‡5W1Hæ³•æˆ‘ä»¬æ¥åˆ†æï¼Œæˆ‘ä»¬æƒ³è¦çŸ¥é“äº›ä»€ä¹ˆä¿¡æ¯å‘¢ï¼Ÿ</p>
</blockquote>
<h2 data-id="heading-4">é”™è¯¯ä¿¡æ¯</h2>
<p>å…¶å®é”™è¯¯ç›‘æ§è¯´ç®€å•å°±ä¸€å¥è¯å¯ä»¥æè¿°ï¼Œæœé›†é¡µé¢é”™è¯¯ï¼Œè¿›è¡Œä¸ŠæŠ¥ï¼Œç„¶åå¯¹ç—‡åˆ†æã€‚</p>
<p>æŒ‰ç…§5W1Hæ³•åˆ™è¿›è¡Œåˆ†æè¿™å¥è¯ï¼Œå¯ä»¥å‘ç°æœ‰å‡ é¡¹éœ€è¦æˆ‘ä»¬å…³æ³¨ã€‚</p>
<ol>
<li>Whatï¼Œå‘â½£äº†ä»€ä¹ˆé”™è¯¯ï¼šé€»è¾‘é”™è¯¯ã€æ•°æ®é”™è¯¯ã€â½¹ç»œé”™è¯¯ã€è¯­æ³•é”™è¯¯ç­‰ã€‚</li>
<li>Whenï¼Œå‡ºç°çš„æ—¶é—´æ®µï¼Œå¦‚æ—¶é—´æˆ³ã€‚</li>
<li>Whoï¼Œå½±å“äº†å¤šå°‘ç”¨æˆ·ï¼ŒåŒ…æ‹¬æŠ¥é”™äº‹ä»¶æ•°ã€IPã€è®¾å¤‡ä¿¡æ¯ã€‚</li>
<li>Whereï¼Œå‡ºç°çš„é¡µé¢æ˜¯å“ªäº›ï¼ŒåŒ…æ‹¬é¡µé¢ã€å¹¿å‘Šä½ï¼ˆæˆ‘å¸ï¼‰ã€åª’ä½“ï¼ˆæˆ‘å¸ï¼‰ã€‚</li>
<li>Whyï¼Œé”™è¯¯çš„åŸå› æ˜¯ä¸ºä»€ä¹ˆï¼ŒåŒ…æ‹¬é”™è¯¯å †æ ˆã€â¾åˆ—ã€SourceMapã€‚</li>
<li>Howï¼Œæ€ä¹ˆå®šä½è§£å†³é—®é¢˜ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ”¶é›†ç³»ç»Ÿç­‰ä¿¡æ¯ã€‚</li>
</ol>
<h2 data-id="heading-5">æ¶æ„å±‚æ¬¡</h2>
<blockquote>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦æ¢³ç†ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›å“ªäº›åŠŸèƒ½ã€‚</p>
</blockquote>
<p>é‚£æˆ‘ä»¬æ€ä¹ˆå¾—åˆ°ä¸Šé¢çš„ä¿¡æ¯è¿›è¡Œæœ€ç»ˆé”™è¯¯çš„å®šä½å‘¢ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬è‚¯å®šéœ€è¦å¯¹é”™è¯¯è¿›è¡Œæœé›†ï¼Œç„¶åç”¨æˆ·è®¾å¤‡é¡µé¢ç«¯çš„é”™è¯¯æˆ‘ä»¬æ€ä¹ˆæ‰èƒ½æ„ŸçŸ¥åˆ°å‘¢ï¼Œè¿™å°±éœ€è¦è¿›è¡Œä¸ŠæŠ¥ã€‚é‚£ä¹ˆç¬¬ä¸€å±‚å°±å±•ç°å‡ºæ¥äº†ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæœé›†ä¸ŠæŠ¥ç«¯ã€‚</p>
<p>é‚£æ€ä¹ˆæ‰èƒ½è¿›è¡Œä¸ŠæŠ¥å‘¢ï¼Œå’Œåç«¯åä½œé‚£ä¹ˆä¹…ï¼Œè‚¯å®šçŸ¥é“çš„å§ğŸ™ƒ ï¼Œä½ éœ€è¦ä¸€ä¸ªæ¥å£ã€‚é‚£å°±éœ€è¦ä¸€ä¸ªæœåŠ¡å™¨æ¥è¿›è¡Œå¯¹äºä¸ŠæŠ¥çš„é”™è¯¯è¿›è¡Œé‡‡é›†ï¼Œå¯¹äºé”™è¯¯è¿›è¡Œç­›é€‰èšåˆã€‚é‚£ä¹ˆç¬¬äºŒå±‚ä¹ŸçŸ¥é“äº†å•Šï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªé‡‡é›†èšåˆç«¯ã€‚</p>
<p>æˆ‘ä»¬æœé›†åˆ°äº†æˆ‘ä»¬è¶³å¤Ÿçš„ç‰©æ–™ä¿¡æ¯äº†ï¼Œé‚£æ¥ä¸‹æ¥è¦æ€ä¹ˆç”¨èµ·æ¥å‘¢ï¼Œæˆ‘ä»¬éœ€è¦æŠŠå®ƒä»¬æŒ‰ç…§æˆ‘ä»¬çš„è§„åˆ™è¿›è¡Œæ•´ç†ã€‚å¦‚æœæ¯æ¬¡åˆæ˜¯é€šè¿‡å†™ç±»SQLè¿›è¡Œæ•´ç†æŸ¥è¯¢æ•ˆç‡ä¼šå¾ˆä½ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¯è§†åŒ–çš„å¹³å°è¿›è¡Œå±•ç¤ºã€‚å› æ­¤æœ‰äº†ç¬¬ä¸‰å±‚ï¼Œå¯è§†åŒ–åˆ†æç«¯ã€‚</p>
<p>æ„Ÿè§‰å¥½åƒåšå®Œå•¦ï¼Œæƒ³å¿…å¤§å®¶éƒ½è¿™ä¹ˆæƒ³ï¼Œä¸€ä¸ªé”™è¯¯ç›‘æ§å¹³å°åšå®Œäº†ï¼ŒğŸ™… ã€‚å¦‚æœæ˜¯è¿™æ ·ä½ ä¼šå‘ç°ä¸€ä¸ªç°è±¡ï¼Œæ¯æ¬¡ä¸Šçº¿å’Œä¸Šçº¿åä¸€æ®µæ—¶é—´ï¼Œå¼€å‘åŒå­¦éƒ½ä¸€ç›´ç›¯ç€å±å¹•çœ‹ï¼Œè¿™æ˜¯åœ¨å¹²å˜›ï¼Œäººå½¢çœ¼åŠ¨è§‚å¯Ÿè€…æ¨¡å¼å—ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦é€šè¿‡ä»£ç å»è§£å†³ï¼Œè‡ªç„¶è€Œç„¶ï¼Œç¬¬å››å±‚ï¼Œç›‘æ§å‘Šè­¦ç«¯åº”è¿è€Œç”Ÿã€‚</p>
<p>æ‰€ä»¥è¯·å¤§å£°è¯´å‡ºæ¥æˆ‘ä»¬éœ€è¦ä»€ä¹ˆğŸ™ˆ ï¼Œæœé›†ä¸ŠæŠ¥ç«¯ï¼Œé‡‡é›†èšåˆç«¯ï¼Œå¯è§†åˆ†æç«¯ï¼Œç›‘æ§å‘Šè­¦ç«¯ã€‚</p>
<h1 data-id="heading-6">â—‹ ä¸‰ã€ç³»ç»Ÿè®¾è®¡</h1>
<blockquote>
<p>å¦‚å‡½æ•°ä¸€æ ·ï¼Œå®šä¹‰å¥½æ¯ä¸ªç¯èŠ‚çš„è¾“å…¥å’Œè¾“å‡ºï¼Œä¸”æ ¸å¿ƒéœ€è¦å¤„ç†çš„åŠŸèƒ½ã€‚</p>
</blockquote>
<p>ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹ä¸Šè¿°æ‰€è¯´çš„å››ä¸ªç«¯æ€ä¹ˆå»å®ç°å‘¢ã€‚</p>
<h2 data-id="heading-7">æœé›†ä¸ŠæŠ¥ç«¯ï¼ˆSDKï¼‰</h2>
<blockquote>
<p>è¿™ä¸ªç¯èŠ‚ä¸»è¦è¾“å…¥æ˜¯æ‰€æœ‰é”™è¯¯ï¼Œè¾“å‡ºæ˜¯æ•è·ä¸ŠæŠ¥é”™è¯¯ã€‚æ ¸å¿ƒæ˜¯å¤„ç†ä¸åŒç±»å‹é”™è¯¯çš„æœé›†å·¥ä½œã€‚å…¶ä»–æ˜¯ä¸€äº›éæ ¸å¿ƒä½†å¿…è¦çš„å·¥ä½œã€‚</p>
</blockquote>
<h3 data-id="heading-8">é”™è¯¯ç±»å‹</h3>
<p>â€‹</p>
<p>å…ˆçœ‹çœ‹æˆ‘ä»¬éœ€è¦å¤„ç†å“ªäº›é”™è¯¯ç±»å‹ã€‚</p>
<p><strong>å¸¸è§JSæ‰§è¡Œé”™è¯¯</strong></p>
<ol>
<li>SyntaxError</li>
</ol>
<blockquote>
<p>è§£ææ—¶å‘ç”Ÿè¯­æ³•é”™è¯¯</p>
</blockquote>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-comment">// æ§åˆ¶å°è¿è¡Œ</span>
<span class="hljs-keyword">const</span> xx,
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>window.onerroræ•è·ä¸åˆ°SyntxErrorï¼Œä¸€èˆ¬SyntaxErroråœ¨æ„å»ºé˜¶æ®µï¼Œç”šè‡³æœ¬åœ°å¼€å‘é˜¶æ®µå°±ä¼šè¢«å‘ç°ã€‚</p>
<ol start="2">
<li>TypeError</li>
</ol>
<blockquote>
<p>å€¼ä¸æ˜¯æ‰€æœŸå¾…çš„ç±»å‹</p>
</blockquote>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-comment">// æ§åˆ¶å°è¿è¡Œ</span>
<span class="hljs-keyword">const</span> person = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>
person.name
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ol start="3">
<li>ReferenceError</li>
</ol>
<blockquote>
<p>å¼•ç”¨æœªå£°æ˜çš„å˜é‡</p>
</blockquote>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-comment">// æ§åˆ¶å°è¿è¡Œ</span>
nodefined
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ol start="4">
<li>RangeError</li>
</ol>
<blockquote>
<p>å½“ä¸€ä¸ªå€¼ä¸åœ¨å…¶æ‰€å…è®¸çš„èŒƒå›´æˆ–è€…é›†åˆä¸­</p>
</blockquote>
<pre><code class="hljs language-javascript copyable" lang="javascript">(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span> (<span class="hljs-params"> </span>) </span>&#123; fn() &#125;)()
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><strong>ç½‘ç»œé”™è¯¯</strong></p>
<ol>
<li>ResourceError</li>
</ol>
<blockquote>
<p>èµ„æºåŠ è½½é”™è¯¯</p>
</blockquote>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">new</span> Image().src = <span class="hljs-string">'/remote/image/notdeinfed.png'</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ol start="2">
<li>HttpError</li>
</ol>
<blockquote>
<p>Httpè¯·æ±‚é”™è¯¯</p>
</blockquote>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-comment">// æ§åˆ¶å°è¿è¡Œ</span>
fetch(<span class="hljs-string">'/remote/notdefined'</span>, &#123;&#125;)
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-9">æœé›†é”™è¯¯</h3>
<p>æ‰€æœ‰èµ·å› æ¥æºäºé”™è¯¯ï¼Œé‚£æˆ‘ä»¬å¦‚ä½•è¿›è¡Œé”™è¯¯æ•è·ã€‚</p>
<p><strong>try/catch</strong></p>
<blockquote>
<p>èƒ½æ•è·å¸¸è§„è¿è¡Œæ—¶é”™è¯¯ï¼Œè¯­æ³•é”™è¯¯å’Œå¼‚æ­¥é”™è¯¯ä¸è¡Œ</p>
</blockquote>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-comment">// å¸¸è§„è¿è¡Œæ—¶é”™è¯¯ï¼Œå¯ä»¥æ•è· âœ…</span>
<span class="hljs-keyword">try</span> &#123;
  <span class="hljs-built_in">console</span>.log(notdefined);
&#125; <span class="hljs-keyword">catch</span>(e) &#123;
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'æ•è·åˆ°å¼‚å¸¸ï¼š'</span>, e);
&#125;

<span class="hljs-comment">// è¯­æ³•é”™è¯¯ï¼Œä¸èƒ½æ•è· âŒ</span>
<span class="hljs-keyword">try</span> &#123;
  <span class="hljs-keyword">const</span> notdefined,
&#125; <span class="hljs-keyword">catch</span>(e) &#123;
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'æ•è·åˆ°å¼‚å¸¸ï¼š'</span>, e);
&#125;

<span class="hljs-comment">// å¼‚æ­¥é”™è¯¯ï¼Œä¸èƒ½æ•è· âŒ</span>
<span class="hljs-keyword">try</span> &#123;
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =></span> &#123;
    <span class="hljs-built_in">console</span>.log(notdefined);
  &#125;, <span class="hljs-number">0</span>)
&#125; <span class="hljs-keyword">catch</span>(e) &#123;
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'æ•è·åˆ°å¼‚å¸¸ï¼š'</span>,e);
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>try/catchæœ‰å®ƒç»†è‡´å¤„ç†çš„ä¼˜åŠ¿ï¼Œä½†ç¼ºç‚¹ä¹Ÿæ¯”è¾ƒæ˜æ˜¾ã€‚</p>
<p><strong>window.onerror</strong></p>
<blockquote>
<p>pure jsé”™è¯¯æ”¶é›†ï¼Œwindow.onerrorï¼Œå½“ JS è¿è¡Œæ—¶é”™è¯¯å‘ç”Ÿæ—¶ï¼Œwindow ä¼šè§¦å‘ä¸€ä¸ª ErrorEvent æ¥å£çš„ error äº‹ä»¶ã€‚</p>
</blockquote>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-comment">/**
* <span class="hljs-doctag">@param <span class="hljs-type">&#123;String&#125;</span>  </span>message    é”™è¯¯ä¿¡æ¯
* <span class="hljs-doctag">@param <span class="hljs-type">&#123;String&#125;</span>  </span>source    å‡ºé”™æ–‡ä»¶
* <span class="hljs-doctag">@param <span class="hljs-type">&#123;Number&#125;</span>  </span>lineno    è¡Œå·
* <span class="hljs-doctag">@param <span class="hljs-type">&#123;Number&#125;</span>  </span>colno    åˆ—å·
* <span class="hljs-doctag">@param <span class="hljs-type">&#123;Object&#125;</span>  </span>error  Errorå¯¹è±¡
*/</span>

<span class="hljs-built_in">window</span>.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">message, source, lineno, colno, error</span>) </span>&#123;
   <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'æ•è·åˆ°å¼‚å¸¸ï¼š'</span>, &#123;message, source, lineno, colno, error&#125;);
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å…ˆéªŒè¯ä¸‹å‡ ä¸ªé”™è¯¯æ˜¯å¦å¯ä»¥æ•è·ã€‚
â€‹</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-comment">// å¸¸è§„è¿è¡Œæ—¶é”™è¯¯ï¼Œå¯ä»¥æ•è· âœ…</span>

<span class="hljs-built_in">window</span>.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">message, source, lineno, colno, error</span>) </span>&#123;
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'æ•è·åˆ°å¼‚å¸¸ï¼š'</span>,&#123;message, source, lineno, colno, error&#125;);
&#125;
<span class="hljs-built_in">console</span>.log(notdefined);

<span class="hljs-comment">// è¯­æ³•é”™è¯¯ï¼Œä¸èƒ½æ•è· âŒ</span>
<span class="hljs-built_in">window</span>.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">message, source, lineno, colno, error</span>) </span>&#123;
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'æ•è·åˆ°å¼‚å¸¸ï¼š'</span>,&#123;message, source, lineno, colno, error&#125;);
&#125;
<span class="hljs-keyword">const</span> notdefined,
      
<span class="hljs-comment">// å¼‚æ­¥é”™è¯¯ï¼Œä¸èƒ½æ•è· âœ…</span>
<span class="hljs-built_in">window</span>.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">message, source, lineno, colno, error</span>) </span>&#123;
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'æ•è·åˆ°å¼‚å¸¸ï¼š'</span>,&#123;message, source, lineno, colno, error&#125;);
&#125;
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =></span> &#123;
  <span class="hljs-built_in">console</span>.log(notdefined);
&#125;, <span class="hljs-number">0</span>)

<span class="hljs-comment">// èµ„æºé”™è¯¯ï¼Œä¸èƒ½æ•è· âŒ</span>
<script>
  <span class="hljs-built_in">window</span>.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">message, source, lineno, colno, error</span>) </span>&#123;
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'æ•è·åˆ°å¼‚å¸¸ï¼š'</span>,&#123;message, source, lineno, colno, error&#125;);
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
&#125;
</script>
<span class="xml"><span class="hljs-tag"><<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://yun.tuia.cn/image/kkk.png"</span>></span>
</span><span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>window.onerror ä¸èƒ½æ•è·èµ„æºé”™è¯¯æ€ä¹ˆåŠï¼Ÿ
â€‹</p>
<p><strong>window.addEventListener</strong></p>
<blockquote>
<p>å½“ä¸€é¡¹èµ„æºï¼ˆå¦‚å›¾ç‰‡æˆ–è„šæœ¬ï¼‰åŠ è½½å¤±è´¥ï¼ŒåŠ è½½èµ„æºçš„å…ƒç´ ä¼šè§¦å‘ä¸€ä¸ª Event æ¥å£çš„ error äº‹ä»¶ï¼Œè¿™äº› error äº‹ä»¶ä¸ä¼šå‘ä¸Šå†’æ³¡åˆ° windowï¼Œä½†èƒ½è¢«æ•è·ã€‚è€Œwindow.onerrorä¸èƒ½ç›‘æµ‹æ•è·ã€‚</p>
</blockquote>
<pre><code class="hljs language-html copyable" lang="html">// å›¾ç‰‡ã€scriptã€cssåŠ è½½é”™è¯¯ï¼Œéƒ½èƒ½è¢«æ•è· âœ…
<span class="hljs-tag"><<span class="hljs-name">script</span>></span><span class="javascript">
  <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">error</span>) =></span> &#123;
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'æ•è·åˆ°å¼‚å¸¸ï¼š'</span>, error);
&#125;, <span class="hljs-literal">true</span>)
</span><span class="hljs-tag"></<span class="hljs-name">script</span>></span>
<span class="hljs-tag"><<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://yun.tuia.cn/image/kkk.png"</span>></span>
<span class="hljs-tag"><<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://yun.tuia.cn/foundnull.js"</span>></span><span class="hljs-tag"></<span class="hljs-name">script</span>></span>
<span class="hljs-tag"><<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://yun.tuia.cn/foundnull.css"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span>/></span>
  
// new Imageé”™è¯¯ï¼Œä¸èƒ½æ•è· âŒ
<span class="hljs-tag"><<span class="hljs-name">script</span>></span><span class="javascript">
  <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">error</span>) =></span> &#123;
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'æ•è·åˆ°å¼‚å¸¸ï¼š'</span>, error);
  &#125;, <span class="hljs-literal">true</span>)
</span><span class="hljs-tag"></<span class="hljs-name">script</span>></span>
<span class="hljs-tag"><<span class="hljs-name">script</span>></span><span class="javascript">
  <span class="hljs-keyword">new</span> Image().src = <span class="hljs-string">'https://yun.tuia.cn/image/lll.png'</span>
</span><span class="hljs-tag"></<span class="hljs-name">script</span>></span>

// fetché”™è¯¯ï¼Œä¸èƒ½æ•è· âŒ
<span class="hljs-tag"><<span class="hljs-name">script</span>></span><span class="javascript">
  <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">error</span>) =></span> &#123;
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'æ•è·åˆ°å¼‚å¸¸ï¼š'</span>, error);
  &#125;, <span class="hljs-literal">true</span>)
</span><span class="hljs-tag"></<span class="hljs-name">script</span>></span>
<span class="hljs-tag"><<span class="hljs-name">script</span>></span><span class="javascript">
  fetch(<span class="hljs-string">'https://tuia.cn/test'</span>)
</span><span class="hljs-tag"></<span class="hljs-name">script</span>></span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>new Imageè¿ç”¨çš„æ¯”è¾ƒå°‘ï¼Œå¯ä»¥å•ç‹¬è‡ªå·±å¤„ç†è‡ªå·±çš„é”™è¯¯ã€‚
â€‹</p>
<p>ä½†é€šç”¨çš„fetchæ€ä¹ˆåŠå‘¢ï¼Œfetchè¿”å›Promiseï¼Œä½†Promiseçš„é”™è¯¯ä¸èƒ½è¢«æ•è·ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿ
â€‹</p>
<p><strong>Promiseé”™è¯¯</strong></p>
<ol>
<li>æ™®é€šPromiseé”™è¯¯</li>
</ol>
<blockquote>
<p>try/catchä¸èƒ½æ•è·Promiseä¸­çš„é”™è¯¯</p>
</blockquote>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-comment">// try/catch ä¸èƒ½å¤„ç† JSON.parse çš„é”™è¯¯ï¼Œå› ä¸ºå®ƒåœ¨ Promise ä¸­</span>
<span class="hljs-keyword">try</span> &#123;
  <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>) =></span> &#123; 
    <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-string">''</span>)
    resolve();
  &#125;)
&#125; <span class="hljs-keyword">catch</span>(err) &#123;
  <span class="hljs-built_in">console</span>.error(<span class="hljs-string">'in try catch'</span>, err)
&#125;

<span class="hljs-comment">// éœ€è¦ä½¿ç”¨catchæ–¹æ³•</span>
<span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>) =></span> &#123; 
  <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-string">''</span>)
  resolve();
&#125;).catch(<span class="hljs-function"><span class="hljs-params">err</span> =></span> &#123;
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'in catch fn'</span>, err)
&#125;)
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ol start="2">
<li>asyncé”™è¯¯</li>
</ol>
<blockquote>
<p>try/catchä¸èƒ½æ•è·asyncåŒ…è£¹çš„é”™è¯¯</p>
</blockquote>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">const</span> getJSON = <span class="hljs-keyword">async</span> () => &#123;
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'inner error'</span>)
&#125;

<span class="hljs-comment">// é€šè¿‡try/catchå¤„ç†</span>
<span class="hljs-keyword">const</span> makeRequest = <span class="hljs-keyword">async</span> () => &#123;
    <span class="hljs-keyword">try</span> &#123;
        <span class="hljs-comment">// æ•è·ä¸åˆ°</span>
        <span class="hljs-built_in">JSON</span>.parse(getJSON());
    &#125; <span class="hljs-keyword">catch</span> (err) &#123;
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'outer'</span>, err);
    &#125;
&#125;;

<span class="hljs-keyword">try</span> &#123;
    <span class="hljs-comment">// try/catchä¸åˆ°</span>
    makeRequest()
&#125; <span class="hljs-keyword">catch</span>(err) &#123;
    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">'in try catch'</span>, err)
&#125;

<span class="hljs-keyword">try</span> &#123;
    <span class="hljs-comment">// éœ€è¦awaitï¼Œæ‰èƒ½æ•è·åˆ°</span>
    <span class="hljs-keyword">await</span> makeRequest()
&#125; <span class="hljs-keyword">catch</span>(err) &#123;
    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">'in try catch'</span>, err)
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ol start="3">
<li>import chunké”™è¯¯</li>
</ol>
<blockquote>
<p>importå…¶å®è¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ªpromiseï¼Œå› æ­¤ä½¿ç”¨å¦‚ä¸‹ä¸¤ç§æ–¹å¼æ•è·é”™è¯¯</p>
</blockquote>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-comment">// Promise catchæ–¹æ³•</span>
<span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackChunkName: "incentive" */</span><span class="hljs-string">'./index'</span>).then(<span class="hljs-function"><span class="hljs-params">module</span> =></span> &#123;
    <span class="hljs-built_in">module</span>.default()
&#125;).catch(<span class="hljs-function">(<span class="hljs-params">err</span>) =></span> &#123;
    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">'in catch fn'</span>, err)
&#125;)

<span class="hljs-comment">// await æ–¹æ³•ï¼Œtry catch</span>
<span class="hljs-keyword">try</span> &#123;
    <span class="hljs-keyword">const</span> <span class="hljs-built_in">module</span> = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackChunkName: "incentive" */</span><span class="hljs-string">'./index'</span>);
    <span class="hljs-built_in">module</span>.default()
&#125; <span class="hljs-keyword">catch</span>(err) &#123;
    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">'in try catch'</span>, err)
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å°ç»“ï¼šå…¨å±€æ•è·Promiseä¸­çš„é”™è¯¯</p>
<p>ä»¥ä¸Šä¸‰ç§å…¶å®å½’ç»“ä¸ºPromiseç±»å‹é”™è¯¯ï¼Œå¯ä»¥é€šè¿‡unhandledrejectionæ•è·</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-comment">// å…¨å±€ç»Ÿä¸€å¤„ç†Promise</span>
<span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">"unhandledrejection"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>&#123;
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'æ•è·åˆ°å¼‚å¸¸ï¼š'</span>, e);
&#125;);
fetch(<span class="hljs-string">'https://tuia.cn/test'</span>)
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>ä¸ºäº†é˜²æ­¢æœ‰æ¼æ‰çš„ Promise å¼‚å¸¸ï¼Œå¯é€šè¿‡unhandledrejectionç”¨æ¥å…¨å±€ç›‘å¬Uncaught Promise Errorã€‚
â€‹</p>
<p><strong>Vueé”™è¯¯</strong></p>
<blockquote>
<p>ç”±äºVueä¼šæ•è·æ‰€æœ‰Vueå•æ–‡ä»¶ç»„ä»¶æˆ–è€…Vue.extendç»§æ‰¿çš„ä»£ç ï¼Œæ‰€ä»¥åœ¨Vueé‡Œé¢å‡ºç°çš„é”™è¯¯ï¼Œå¹¶ä¸ä¼šç›´æ¥è¢«window.onerroræ•è·ï¼Œè€Œæ˜¯ä¼šæŠ›ç»™Vue.config.errorHandlerã€‚</p>
</blockquote>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-comment">/**
 * å…¨å±€æ•è·Vueé”™è¯¯ï¼Œç›´æ¥æ‰”å‡ºç»™onerrorå¤„ç†
 */</span>
Vue.config.errorHandler = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>&#123;
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =></span> &#123;
    <span class="hljs-keyword">throw</span> err
  &#125;)
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><strong>Reacté”™è¯¯</strong></p>
<blockquote>
<p>react é€šè¿‡componentDidCatchï¼Œå£°æ˜ä¸€ä¸ªé”™è¯¯è¾¹ç•Œçš„ç»„ä»¶</p>
</blockquote>
<pre><code class="hljs language-jsx copyable" lang="jsx"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ErrorBoundary</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;
  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">props</span>)</span> &#123;
    <span class="hljs-built_in">super</span>(props);
    <span class="hljs-built_in">this</span>.state = &#123; <span class="hljs-attr">hasError</span>: <span class="hljs-literal">false</span> &#125;;
  &#125;

  <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-title">getDerivedStateFromError</span>(<span class="hljs-params">error</span>)</span> &#123;
    <span class="hljs-comment">// æ›´æ–° state ä½¿ä¸‹ä¸€æ¬¡æ¸²æŸ“èƒ½å¤Ÿæ˜¾ç¤ºé™çº§åçš„ UI</span>
    <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">hasError</span>: <span class="hljs-literal">true</span> &#125;;
  &#125;

  <span class="hljs-function"><span class="hljs-title">componentDidCatch</span>(<span class="hljs-params">error, errorInfo</span>)</span> &#123;
    <span class="hljs-comment">// ä½ åŒæ ·å¯ä»¥å°†é”™è¯¯æ—¥å¿—ä¸ŠæŠ¥ç»™æœåŠ¡å™¨</span>
    logErrorToMyService(error, errorInfo);
  &#125;

  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.state.hasError) &#123;
      <span class="hljs-comment">// ä½ å¯ä»¥è‡ªå®šä¹‰é™çº§åçš„ UI å¹¶æ¸²æŸ“</span>
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag"><<span class="hljs-name">h1</span>></span>Something went wrong.<span class="hljs-tag"></<span class="hljs-name">h1</span>></span></span>;
    &#125;

    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.props.children; 
  &#125;
&#125;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;
   
  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag"><<span class="hljs-name">ErrorBoundary</span>></span>
      <span class="hljs-tag"><<span class="hljs-name">MyWidget</span> /></span>
    <span class="hljs-tag"></<span class="hljs-name">ErrorBoundary</span>></span></span>  
    )
  &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>ä½†error boundarieså¹¶ä¸ä¼šæ•æ‰ä»¥ä¸‹é”™è¯¯ï¼šReactäº‹ä»¶å¤„ç†ï¼Œå¼‚æ­¥ä»£ç ï¼Œerror boundariesè‡ªå·±æŠ›å‡ºçš„é”™è¯¯ã€‚</p>
<h3 data-id="heading-10">è·¨åŸŸé—®é¢˜</h3>
<blockquote>
<p>ä¸€èˆ¬æƒ…å†µï¼Œå¦‚æœå‡ºç° Script error è¿™æ ·çš„é”™è¯¯ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥ç¡®å®šæ˜¯å‡ºç°äº†è·¨åŸŸé—®é¢˜ã€‚</p>
</blockquote>
<p>å¦‚æœå½“å‰æŠ•æ”¾é¡µé¢å’Œäº‘ç«¯JSæ‰€åœ¨ä¸åŒåŸŸåï¼Œå¦‚æœäº‘ç«¯JSå‡ºç°é”™è¯¯ï¼Œwindow.onerrorä¼šå‡ºç°Script Errorã€‚é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹æ³•èƒ½ç»™äºˆè§£å†³ã€‚</p>
<ul>
<li>åç«¯é…ç½®Access-Control-Allow-Originã€å‰ç«¯scriptåŠ crossoriginã€‚</li>
</ul>
<pre><code class="hljs language-javascript copyable" lang="javascript"><script src=<span class="hljs-string">"http://yun.tuia.cn/test.js"</span> crossorigin></script>

<span class="hljs-keyword">const</span> script = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'script'</span>);
script.crossOrigin = <span class="hljs-string">'anonymous'</span>;
script.src = <span class="hljs-string">'http://yun.tuia.cn/test.js'</span>;
<span class="hljs-built_in">document</span>.body.appendChild(script);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>å¦‚æœä¸èƒ½ä¿®æ”¹æœåŠ¡ç«¯çš„è¯·æ±‚å¤´ï¼Œå¯ä»¥è€ƒè™‘é€šè¿‡ä½¿ç”¨ try/catch ç»•è¿‡ï¼Œå°†é”™è¯¯æŠ›å‡ºã€‚</li>
</ul>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-meta"><!doctype <span class="hljs-meta-keyword">html</span>></span>
<span class="hljs-tag"><<span class="hljs-name">html</span>></span>
<span class="hljs-tag"><<span class="hljs-name">head</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">title</span>></span>Test page in http://test.com<span class="hljs-tag"></<span class="hljs-name">title</span>></span>
<span class="hljs-tag"></<span class="hljs-name">head</span>></span>
<span class="hljs-tag"><<span class="hljs-name">body</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://yun.dui88.com/tuia/cdn/remote/testerror.js"</span>></span><span class="hljs-tag"></<span class="hljs-name">script</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">script</span>></span><span class="javascript">
  <span class="hljs-built_in">window</span>.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, url, line, column, error</span>) </span>&#123;
    <span class="hljs-built_in">console</span>.log(message, url, line, column, error);
  &#125;

  <span class="hljs-keyword">try</span> &#123;
    foo(); <span class="hljs-comment">// è°ƒç”¨testerror.jsä¸­å®šä¹‰çš„fooæ–¹æ³•</span>
  &#125; <span class="hljs-keyword">catch</span> (e) &#123;
    <span class="hljs-keyword">throw</span> e;
  &#125;
  </span><span class="hljs-tag"></<span class="hljs-name">script</span>></span>
<span class="hljs-tag"></<span class="hljs-name">body</span>></span>
<span class="hljs-tag"></<span class="hljs-name">html</span>></span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>ä¼šå‘ç°å¦‚æœä¸åŠ try catchï¼Œconsole.logå°±ä¼šæ‰“å°script errorã€‚åŠ ä¸Štry catchå°±èƒ½æ•è·åˆ°ã€‚
â€‹</p>
<p>æˆ‘ä»¬æ‹ä¸€ä¸‹åœºæ™¯ï¼Œä¸€èˆ¬è°ƒç”¨è¿œç«¯jsï¼Œæœ‰ä¸‹åˆ—ä¸‰ç§å¸¸è§æƒ…å†µã€‚</p>
<ul>
<li>è°ƒç”¨è¿œç«¯JSçš„æ–¹æ³•å‡ºé”™</li>
<li>è¿œç«¯JSå†…éƒ¨çš„äº‹ä»¶å‡ºé—®é¢˜</li>
<li>è¦ä¹ˆåœ¨setTimeoutç­‰å›è°ƒå†…å‡ºé”™</li>
</ul>
<p>â€‹</p>
<p><strong>è°ƒç”¨æ–¹æ³•åœºæ™¯</strong>
â€‹</p>
<p>å¯ä»¥é€šè¿‡å°è£…ä¸€ä¸ªå‡½æ•°ï¼Œèƒ½è£…é¥°åŸæ–¹æ³•ï¼Œä½¿å¾—å…¶èƒ½è¢«try/catchã€‚</p>
<pre><code class="hljs language-html copyable" lang="html">
<span class="hljs-meta"><!doctype <span class="hljs-meta-keyword">html</span>></span>
<span class="hljs-tag"><<span class="hljs-name">html</span>></span>
<span class="hljs-tag"><<span class="hljs-name">head</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">title</span>></span>Test page in http://test.com<span class="hljs-tag"></<span class="hljs-name">title</span>></span>
<span class="hljs-tag"></<span class="hljs-name">head</span>></span>
<span class="hljs-tag"><<span class="hljs-name">body</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://yun.dui88.com/tuia/cdn/remote/testerror.js"</span>></span><span class="hljs-tag"></<span class="hljs-name">script</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">script</span>></span><span class="javascript">
  <span class="hljs-built_in">window</span>.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, url, line, column, error</span>) </span>&#123;
    <span class="hljs-built_in">console</span>.log(message, url, line, column, error);
  &#125;

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">wrapErrors</span>(<span class="hljs-params">fn</span>) </span>&#123;
    <span class="hljs-comment">// don't wrap function more than once</span>
    <span class="hljs-keyword">if</span> (!fn.__wrapped__) &#123;
      fn.__wrapped__ = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
        <span class="hljs-keyword">try</span> &#123;
          <span class="hljs-keyword">return</span> fn.apply(<span class="hljs-built_in">this</span>, <span class="hljs-built_in">arguments</span>);
        &#125; <span class="hljs-keyword">catch</span> (e) &#123;
          <span class="hljs-keyword">throw</span> e; <span class="hljs-comment">// re-throw the error</span>
        &#125;
      &#125;;
    &#125;

    <span class="hljs-keyword">return</span> fn.__wrapped__;
  &#125;

  wrapErrors(foo)()
  </span><span class="hljs-tag"></<span class="hljs-name">script</span>></span>
<span class="hljs-tag"></<span class="hljs-name">body</span>></span>
<span class="hljs-tag"></<span class="hljs-name">html</span>></span>

<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å¤§å®¶å¯ä»¥å°è¯•å»æ‰wrapErrorsæ„Ÿå—ä¸‹ã€‚
â€‹</p>
<p><strong>äº‹ä»¶åœºæ™¯</strong>
â€‹</p>
<p>å¯ä»¥åŠ«æŒåŸç”Ÿæ–¹æ³•ã€‚</p>
<pre><code class="hljs language-html copyable" lang="html">
<span class="hljs-meta"><!doctype <span class="hljs-meta-keyword">html</span>></span>
<span class="hljs-tag"><<span class="hljs-name">html</span>></span>
<span class="hljs-tag"><<span class="hljs-name">head</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">title</span>></span>Test page in http://test.com<span class="hljs-tag"></<span class="hljs-name">title</span>></span>
<span class="hljs-tag"></<span class="hljs-name">head</span>></span>
<span class="hljs-tag"><<span class="hljs-name">body</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">script</span>></span><span class="javascript">
    <span class="hljs-keyword">const</span> originAddEventListener = EventTarget.prototype.addEventListener;
    EventTarget.prototype.addEventListener = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">type, listener, options</span>) </span>&#123;
      <span class="hljs-keyword">const</span> wrappedListener = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) </span>&#123;
        <span class="hljs-keyword">try</span> &#123;
          <span class="hljs-keyword">return</span> listener.apply(<span class="hljs-built_in">this</span>, args);
        &#125;
        <span class="hljs-keyword">catch</span> (err) &#123;
          <span class="hljs-keyword">throw</span> err;
        &#125;
      &#125;
      <span class="hljs-keyword">return</span> originAddEventListener.call(<span class="hljs-built_in">this</span>, type, wrappedListener, options);
    &#125;
  </span><span class="hljs-tag"></<span class="hljs-name">script</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height: 9999px;"</span>></span>http://test.com<span class="hljs-tag"></<span class="hljs-name">div</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://yun.dui88.com/tuia/cdn/remote/error_scroll.js"</span>></span><span class="hljs-tag"></<span class="hljs-name">script</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">script</span>></span><span class="javascript">
  <span class="hljs-built_in">window</span>.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, url, line, column, error</span>) </span>&#123;
    <span class="hljs-built_in">console</span>.log(message, url, line, column, error);
  &#125;
  </span><span class="hljs-tag"></<span class="hljs-name">script</span>></span>
<span class="hljs-tag"></<span class="hljs-name">body</span>></span>
<span class="hljs-tag"></<span class="hljs-name">html</span>></span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å¤§å®¶å¯ä»¥å°è¯•å»æ‰å°è£…EventTarget.prototype.addEventListenerçš„é‚£æ®µä»£ç ï¼Œæ„Ÿå—ä¸‹ã€‚</p>
<h3 data-id="heading-11">ä¸ŠæŠ¥æ¥å£</h3>
<p>ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥ç”¨GET/POST/HEADè¯·æ±‚æ¥å£è¿›è¡Œä¸ŠæŠ¥ï¼Ÿ
â€‹</p>
<p>è¿™ä¸ªæ¯”è¾ƒå®¹æ˜“æƒ³åˆ°åŸå› ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œæ‰“ç‚¹åŸŸåéƒ½ä¸æ˜¯å½“å‰åŸŸåï¼Œæ‰€ä»¥æ‰€æœ‰çš„æ¥å£è¯·æ±‚éƒ½ä¼šæ„æˆè·¨åŸŸã€‚
â€‹</p>
<p>ä¸ºä»€ä¹ˆä¸èƒ½ç”¨è¯·æ±‚å…¶ä»–çš„æ–‡ä»¶èµ„æºï¼ˆjs/css/ttfï¼‰çš„æ–¹å¼è¿›è¡Œä¸ŠæŠ¥ï¼Ÿ
â€‹</p>
<p>åˆ›å»ºèµ„æºèŠ‚ç‚¹ååªæœ‰å°†å¯¹è±¡æ³¨å…¥åˆ°æµè§ˆå™¨DOMæ ‘åï¼Œæµè§ˆå™¨æ‰ä¼šå®é™…å‘é€èµ„æºè¯·æ±‚ã€‚è€Œä¸”è½½å…¥js/cssèµ„æºè¿˜ä¼šé˜»å¡é¡µé¢æ¸²æŸ“ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚
â€‹</p>
<p>æ„é€ å›¾ç‰‡æ‰“ç‚¹ä¸ä»…ä¸ç”¨æ’å…¥DOMï¼Œåªè¦åœ¨jsä¸­newå‡ºImageå¯¹è±¡å°±èƒ½å‘èµ·è¯·æ±‚ï¼Œè€Œä¸”è¿˜æ²¡æœ‰é˜»å¡é—®é¢˜ï¼Œåœ¨æ²¡æœ‰jsçš„æµè§ˆå™¨ç¯å¢ƒä¸­ä¹Ÿèƒ½é€šè¿‡imgæ ‡ç­¾æ­£å¸¸æ‰“ç‚¹ã€‚</p>
<p>ä½¿ç”¨new Imageè¿›è¡Œæ¥å£ä¸ŠæŠ¥ã€‚æœ€åä¸€ä¸ªé—®é¢˜ï¼ŒåŒæ ·éƒ½æ˜¯å›¾ç‰‡ï¼Œä¸ŠæŠ¥æ—¶é€‰ç”¨äº†1x1çš„é€æ˜GIFï¼Œè€Œä¸æ˜¯å…¶ä»–çš„PNG/JEPG/BMPæ–‡ä»¶ã€‚
â€‹</p>
<p>é¦–å…ˆï¼Œ1x1åƒç´ æ˜¯æœ€å°çš„åˆæ³•å›¾ç‰‡ã€‚è€Œä¸”ï¼Œå› ä¸ºæ˜¯é€šè¿‡å›¾ç‰‡æ‰“ç‚¹ï¼Œæ‰€ä»¥å›¾ç‰‡æœ€å¥½æ˜¯é€æ˜çš„ï¼Œè¿™æ ·ä¸€æ¥ä¸ä¼šå½±å“é¡µé¢æœ¬èº«å±•ç¤ºæ•ˆæœï¼ŒäºŒè€…è¡¨ç¤ºå›¾ç‰‡é€æ˜åªè¦ä½¿ç”¨ä¸€ä¸ªäºŒè¿›åˆ¶ä½æ ‡è®°å›¾ç‰‡æ˜¯é€æ˜è‰²å³å¯ï¼Œä¸ç”¨å­˜å‚¨è‰²å½©ç©ºé—´æ•°æ®ï¼Œå¯ä»¥èŠ‚çº¦ä½“ç§¯ã€‚å› ä¸ºéœ€è¦é€æ˜è‰²ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥æ’é™¤JEPGã€‚
â€‹</p>
<p>åŒæ ·çš„å“åº”ï¼ŒGIFå¯ä»¥æ¯”BMPèŠ‚çº¦41%çš„æµé‡ï¼Œæ¯”PNGèŠ‚çº¦35%çš„æµé‡ã€‚GIFæ‰æ˜¯æœ€ä½³é€‰æ‹©ã€‚</p>
<ul>
<li>å¯ä»¥è¿›è¡Œè·¨åŸŸ</li>
<li>ä¸ä¼šæºå¸¦cookie</li>
<li>ä¸éœ€è¦ç­‰å¾…æœåŠ¡å™¨è¿”å›æ•°æ®</li>
</ul>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fg.yuque.com%2Fzaotalk%2Fposts%2Fmxx4cb%23QUH0x" target="_blank" rel="nofollow noopener noreferrer" title="https://g.yuque.com/zaotalk/posts/mxx4cb#QUH0x" ref="nofollow noopener noreferrer">ä½¿ç”¨1*1çš„gif</a></p>
</blockquote>
<h3 data-id="heading-12">éé˜»å¡åŠ è½½</h3>
<p>å°½é‡é¿å…SDKçš„jsèµ„æºåŠ è½½å½±å“ã€‚</p>
<p>é€šè¿‡å…ˆæŠŠwindow.onerrorçš„é”™è¯¯è®°å½•è¿›è¡Œç¼“å­˜ï¼Œç„¶åå¼‚æ­¥è¿›è¡ŒSDKçš„åŠ è½½ï¼Œå†åœ¨SDKé‡Œé¢å¤„ç†é”™è¯¯ä¸ŠæŠ¥ã€‚</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><!DOCTYPE html>
<span class="xml"><span class="hljs-tag"><<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>></span>
<span class="hljs-tag"><<span class="hljs-name">head</span>></span>
    <span class="hljs-tag"><<span class="hljs-name">script</span>></span><span class="javascript">
        (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">w</span>) </span>&#123;
            w._error_storage_ = [];
            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">errorhandler</span>(<span class="hljs-params"></span>)</span>&#123;
                <span class="hljs-comment">// ç”¨äºè®°å½•å½“å‰çš„é”™è¯¯            </span>
                w._error_storage_&&w._error_storage_.push([].slice.call(<span class="hljs-built_in">arguments</span>));
            &#125; 
            w.addEventListener && w.addEventListener(<span class="hljs-string">"error"</span>, errorhandler, <span class="hljs-literal">true</span>);
            <span class="hljs-keyword">var</span> times = <span class="hljs-number">3</span>,
            appendScript = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">appendScript</span>(<span class="hljs-params"></span>) </span>&#123;
                <span class="hljs-keyword">var</span> sc = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"script"</span>);
                sc.async = !<span class="hljs-number">0</span>,
                sc.src = <span class="hljs-string">'./build/skyeye.js'</span>,  <span class="hljs-comment">// å–å†³äºä½ å­˜æ”¾çš„ä½ç½®</span>
                sc.crossOrigin = <span class="hljs-string">"anonymous"</span>,
                sc.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
                    times--,
                    times > <span class="hljs-number">0</span> && <span class="hljs-built_in">setTimeout</span>(appendScript, <span class="hljs-number">1500</span>)
                &#125;,
                <span class="hljs-built_in">document</span>.head && <span class="hljs-built_in">document</span>.head.appendChild(sc);
            &#125;;
            <span class="hljs-built_in">setTimeout</span>(appendScript, <span class="hljs-number">1500</span>);
        &#125;)(<span class="hljs-built_in">window</span>);
    </span><span class="hljs-tag"></<span class="hljs-name">script</span>></span>
<span class="hljs-tag"></<span class="hljs-name">head</span>></span>
<span class="hljs-tag"><<span class="hljs-name">body</span>></span>
    <span class="hljs-tag"><<span class="hljs-name">h1</span>></span>è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•é¡µé¢(new)<span class="hljs-tag"></<span class="hljs-name">h1</span>></span>
<span class="hljs-tag"></<span class="hljs-name">body</span>></span>
<span class="hljs-tag"></<span class="hljs-name">html</span>></span></span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-13">é‡‡é›†èšåˆç«¯ï¼ˆæ—¥å¿—æœåŠ¡å™¨ï¼‰</h2>
<blockquote>
<p>è¿™ä¸ªç¯èŠ‚ï¼Œè¾“å…¥æ˜¯å€Ÿå£æ¥æ”¶åˆ°çš„é”™è¯¯è®°å½•ï¼Œè¾“å‡ºæ˜¯æœ‰æ•ˆçš„æ•°æ®å…¥åº“ã€‚æ ¸å¿ƒåŠŸèƒ½éœ€è¦å¯¹æ•°æ®è¿›è¡Œæ¸…æ´—ï¼Œé¡ºå¸¦è§£å†³äº†è¿‡å¤šçš„æœåŠ¡å‹åŠ›ã€‚å¦ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½æ˜¯å¯¹æ•°æ®è¿›è¡Œå…¥åº“ã€‚</p>
</blockquote>
<p>æ€»ä½“æµç¨‹å¯ä»¥çœ‹ä¸ºé”™è¯¯æ ‡è¯† -> é”™è¯¯è¿‡æ»¤ -> é”™è¯¯æ¥æ”¶ -> é”™è¯¯å­˜å‚¨ã€‚</p>
<h3 data-id="heading-14">é”™è¯¯æ ‡è¯†ï¼ˆSDKé…åˆï¼‰</h3>
<p>èšåˆä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸åŒç»´åº¦æ ‡è¯†é”™è¯¯çš„èƒ½åŠ›ï¼Œå¯ä»¥ç†è§£ä¸ºå®šä½å•ä¸ªé”™è¯¯æ¡ç›®ï¼Œå•ä¸ªé”™è¯¯äº‹ä»¶çš„èƒ½åŠ›ã€‚
â€‹</p>
<p><strong>å•ä¸ªé”™è¯¯æ¡ç›®</strong>
<strong>â€‹</strong></p>
<p>é€šè¿‡dateå’Œéšæœºå€¼ç”Ÿæˆä¸€æ¡å¯¹åº”çš„é”™è¯¯æ¡ç›®idã€‚</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">const</span> errorKey = <span class="hljs-string">`<span class="hljs-subst">$&#123;+<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()&#125;</span>@<span class="hljs-subst">$&#123;randomString(<span class="hljs-number">8</span>)&#125;</span>`</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">randomString</span>(<span class="hljs-params">len</span>) </span>&#123;ã€€ã€€
    len = len || <span class="hljs-number">32</span>;
    <span class="hljs-keyword">let</span> chars = <span class="hljs-string">'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678'</span>;
    <span class="hljs-keyword">let</span> maxPos = chars.length;
    <span class="hljs-keyword">let</span> pwd = <span class="hljs-string">''</span>;ã€€ã€€
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < len; i++) &#123;ã€€ã€€ã€€ã€€
        pwd += chars.charAt(<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * maxPos));ã€€ã€€
    &#125;ã€€ã€€
    <span class="hljs-keyword">return</span> pwd;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><strong>â€‹</strong></p>
<p><strong>å•ä¸ªé”™è¯¯äº‹ä»¶</strong>
<strong>â€‹</strong></p>
<p>é¦–å…ˆéœ€è¦æœ‰å®šä½åŒä¸ªé”™è¯¯äº‹ä»¶ï¼ˆä¸åŒç”¨æˆ·ï¼Œå‘ç”Ÿç›¸åŒé”™è¯¯ç±»å‹ã€é”™è¯¯ä¿¡æ¯ï¼‰çš„èƒ½åŠ›ã€‚
â€‹</p>
<p>é€šè¿‡messageã€colnoä¸linenoè¿›è¡Œç›¸åŠ è®¡ç®—é˜¿æ–¯å…‹ç å€¼ï¼Œå¯ä»¥ç”Ÿæˆé”™è¯¯çš„errorKeyã€‚</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">const</span> eventKey = compressString(<span class="hljs-built_in">String</span>(e.message), <span class="hljs-built_in">String</span>(e.colno) + <span class="hljs-built_in">String</span>(e.lineno))

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compressString</span>(<span class="hljs-params">str, key</span>) </span>&#123;
    <span class="hljs-keyword">let</span> chars = <span class="hljs-string">'ABCDEFGHJKMNPQRSTWXYZ'</span>;
    <span class="hljs-keyword">if</span> (!str || !key) &#123;
        <span class="hljs-keyword">return</span> <span class="hljs-string">'null'</span>;
    &#125;
    <span class="hljs-keyword">let</span> n = <span class="hljs-number">0</span>,
        m = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < str.length; i++) &#123;
        n += str[i].charCodeAt();
    &#125;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j < key.length; j++) &#123;
        m += key[j].charCodeAt();
    &#125;
    <span class="hljs-keyword">let</span> num = n + <span class="hljs-string">''</span> + key[key.length - <span class="hljs-number">1</span>].charCodeAt() + m + str[str.length - <span class="hljs-number">1</span>].charCodeAt();
    <span class="hljs-keyword">if</span>(num) &#123;
        num = num + chars[num[num.length - <span class="hljs-number">1</span>]];
    &#125;
    <span class="hljs-keyword">return</span> num;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å¦‚ä¸‹å›¾ï¼Œä¸€ä¸ªé”™è¯¯äº‹ä»¶ï¼ˆäº‹ä»¶åˆ—è¡¨ï¼‰ï¼Œä¸‹å±æ¯æ¡å³ä¸ºå®é™…çš„é”™è¯¯æ¡ç›®ã€‚
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8d3f4a2bc5c745c09a05fa0368bed0bf~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-15">é”™è¯¯è¿‡æ»¤ï¼ˆSDKé…åˆï¼‰</h3>
<p><strong>åŸŸåè¿‡æ»¤</strong>
<strong>â€‹</strong></p>
<p>è¿‡æ»¤æœ¬é¡µé¢script errorï¼Œå¯èƒ½è¢«webviewæ’å…¥å…¶ä»–jsã€‚
<strong>â€‹</strong></p>
<p>æˆ‘ä»¬åªå…³å¿ƒè‡ªå·±çš„è¿œç«¯JSé—®é¢˜ï¼Œå› æ­¤åšäº†æ ¹æ®æœ¬å…¬å¸åŸŸåè¿›è¡Œè¿‡æ»¤ã€‚</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-comment">// ä¼ªä»£ç </span>
<span class="hljs-keyword">if</span>(!e.filename || !e.filename.match(<span class="hljs-regexp">/^(http|https):\/\/yun./</span>)) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><strong>é‡å¤ä¸ŠæŠ¥</strong>
â€‹</p>
<p>æ€ä¹ˆé¿å…é‡å¤çš„æ•°æ®ä¸ŠæŠ¥ï¼Ÿæ ¹æ®errorKeyæ¥è¿›è¡Œç¼“å­˜ï¼Œé‡å¤çš„é”™è¯¯é¿å…ä¸ŠæŠ¥çš„æ¬¡æ•°è¶…è¿‡é˜ˆå€¼ã€‚</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-comment">// ä¼ªä»£ç </span>

<span class="hljs-keyword">const</span> <span class="hljs-built_in">localStorage</span> = <span class="hljs-built_in">window</span>.localStorage;
<span class="hljs-keyword">const</span> TIMES = <span class="hljs-number">6</span>; <span class="hljs-comment">// ç¼“å­˜æ¡æ•°</span>

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setItem</span>(<span class="hljs-params">key, repeat</span>) </span>&#123;
    <span class="hljs-keyword">if</span>(!key) &#123;
        key = <span class="hljs-string">'unknow'</span>;
    &#125;
  
    <span class="hljs-keyword">if</span> (has(key)) &#123;
        <span class="hljs-keyword">const</span> value = getItem(key);
        
      <span class="hljs-comment">// æ ¸å¿ƒä»£ç ï¼Œè¶…è¿‡æ¡æ•°ï¼Œè·³å‡º</span>
        <span class="hljs-keyword">if</span> (value >= repeat) &#123;
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        &#125;
        storeStorage[key] = &#123;
            <span class="hljs-attr">value</span>: value + <span class="hljs-number">1</span>,
            <span class="hljs-attr">time</span>: <span class="hljs-built_in">Date</span>.now()
        &#125;
    &#125; <span class="hljs-keyword">else</span> &#123;
        storeStorage[key] = &#123;
            <span class="hljs-attr">value</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">time</span>: <span class="hljs-built_in">Date</span>.now()
        &#125;
    &#125;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>â€‹</p>
<h3 data-id="heading-16">é”™è¯¯æ¥æ”¶</h3>
<p>åœ¨å¤„ç†æ¥æ”¶æ¥å£çš„æ—¶å€™ï¼Œæ³¨æ„æµé‡çš„æ§åˆ¶ï¼Œè¿™ä¹Ÿæ˜¯åç«¯å¼€å‘éœ€è¦æŠ•å…¥æœ€å¤šç²¾åŠ›çš„åœ°æ–¹ï¼Œå¤„ç†é«˜å¹¶å‘çš„æµé‡ã€‚
â€‹</p>
<p><strong>é”™è¯¯è®°å½•</strong></p>
<p>æ¥æ”¶ç«¯ä½¿ç”¨Koaï¼Œç®€å•çš„å®ç°äº†æ¥æ”¶åŠæ‰“å°åˆ°ç£ç›˜ã€‚</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-comment">// ä¼ªä»£ç </span>

<span class="hljs-built_in">module</span>.exports = <span class="hljs-keyword">async</span> ctx => &#123;
  <span class="hljs-keyword">const</span> &#123; query &#125; = ctx.request;
  
 <span class="hljs-comment">// å¯¹äºå­—æ®µè¿›è¡Œç®€å•check </span>
  check([ <span class="hljs-string">'mobile'</span>, <span class="hljs-string">'network'</span>, <span class="hljs-string">'ip'</span>, <span class="hljs-string">'system'</span>, <span class="hljs-string">'ua'</span>, ......], query);

  ctx.type = <span class="hljs-string">'application/json'</span>;
  ctx.body = &#123; <span class="hljs-attr">code</span>: <span class="hljs-string">'1'</span>, <span class="hljs-attr">msg</span>: <span class="hljs-string">'æ•°æ®ä¸ŠæŠ¥æˆåŠŸ'</span> &#125;;

  <span class="hljs-comment">// è¿›è¡Œæ—¥å¿—è®°å½•åˆ°ç£ç›˜çš„ä»£ç ï¼Œæ ¹æ®è‡ªå·±çš„æ—¥å¿—åº“é€‰æ‹©</span>
&#125;;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><strong>å‰Šå³°æœºåˆ¶</strong>
â€‹</p>
<p>æ¯”å¦‚æ¯ç§’è®¾ç½®2000çš„é˜ˆå€¼ï¼Œç„¶åæ ¹æ®è¯·æ±‚é‡å‡å°‘ä¸Šé™ï¼Œå®šæ—¶é‡ç½®ä¸Šé™ã€‚</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-comment">// ä¼ªä»£ç </span>

<span class="hljs-comment">// 1000ms</span>
<span class="hljs-keyword">const</span> TICK = <span class="hljs-number">1000</span>;
<span class="hljs-comment">// 1ç§’ä¸Šé™ä¸º2000</span>
<span class="hljs-keyword">const</span> MAX_LIMIT = <span class="hljs-number">2000</span>;
<span class="hljs-comment">// æ¯å°æœåŠ¡å™¨è¯·æ±‚ä¸Šé™å€¼</span>
<span class="hljs-keyword">let</span> maxLimit = MAX_LIMIT;

<span class="hljs-comment">/**
 * å¯åŠ¨é‡ç½®å‡½æ•°
 */</span>
<span class="hljs-keyword">const</span> task = <span class="hljs-function">() =></span> &#123;
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =></span> &#123;
    maxLimit = MAX_LIMIT;
    task();
  &#125;, TICK);
&#125;;
task();

<span class="hljs-keyword">const</span> check = <span class="hljs-function">() =></span> &#123;
  <span class="hljs-keyword">if</span> (maxLimit <= <span class="hljs-number">0</span>) &#123;
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'è¶…è¿‡ä¸ŠæŠ¥æ¬¡æ•°'</span>);
  &#125;
  maxLimit--;
  <span class="hljs-comment">// æ‰§è¡Œä¸šåŠ¡ä»£ç ã€‚ã€‚ã€‚</span>
&#125;;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><strong>é‡‡æ ·å¤„ç†</strong>
<strong>â€‹</strong></p>
<p>è¶…è¿‡é˜ˆå€¼ï¼Œè¿˜å¯ä»¥è¿›è¡Œé‡‡æ ·æ”¶é›†ã€‚</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-comment">// åªé‡‡é›† 20%</span>
<span class="hljs-keyword">if</span>(<span class="hljs-built_in">Math</span>.random() < <span class="hljs-number">0.2</span>) &#123;
  collect(data)      <span class="hljs-comment">// è®°å½•é”™è¯¯ä¿¡æ¯</span>
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-17">é”™è¯¯å­˜å‚¨</h3>
<p>å¯¹äºæ‰“å°åœ¨äº†ç£ç›˜çš„æ—¥å¿—ï¼Œæˆ‘ä»¬æ€ä¹ˆæ ·æ‰èƒ½å¯¹äºå…¶è¿›è¡Œèšåˆå‘¢ï¼Œè¿™é‡Œå¾—è€ƒè™‘ä½¿ç”¨å­˜å‚¨æ–¹æ¡ˆã€‚</p>
<p>ä¸€èˆ¬é€‰æ‹©äº†å­˜å‚¨æ–¹æ¡ˆåï¼Œè®¾ç½®å¥½é…ç½®ï¼Œå­˜å‚¨æ–¹æ¡ˆå°±å¯ä»¥é€šè¿‡ç£ç›˜å®šæ—¶å‘¨æœŸæ€§çš„è·å–æ•°æ®ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦é€‰æ‹©ä¸€æ¬¾å­˜å‚¨æ–¹æ¡ˆã€‚</p>
<p>å¯¹äºå­˜å‚¨æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯¹æ¯”äº†æ—¥å¸¸å¸¸è§æ–¹æ¡ˆï¼Œé˜¿é‡Œäº‘æ—¥å¿—æœåŠ¡ - Log Serviceï¼ˆSLSï¼‰ã€ELKï¼ˆElasticã€Logstashã€Kibanaï¼‰ã€Hadoop/Hiveï¼ˆå°†æ•°æ®å­˜å‚¨åœ¨ Hadoopï¼Œåˆ©ç”¨ Hive è¿›è¡ŒæŸ¥è¯¢ï¼‰ ç±»æ–¹æ¡ˆçš„å¯¹æ¯”ã€‚</p>
<p>ä»ä»¥ä¸‹æ–¹é¢è¿›è¡Œäº†å¯¹æ¯”ï¼Œæœ€ç»ˆé€‰æ‹©äº†Log Serviceï¼Œä¸»è¦è€ƒè™‘ä¸ºæ— éœ€æ­å»ºï¼Œæˆæœ¬ä½ï¼ŒæŸ¥è¯¢åŠŸèƒ½æ»¡è¶³ã€‚</p>









































<table><thead><tr><th>åŠŸèƒ½é¡¹</th><th>ELK ç±»ç³»ç»Ÿ</th><th>Hadoop + Hive</th><th>æ—¥å¿—æœåŠ¡</th></tr></thead><tbody><tr><td>æ—¥å¿—å»¶æ—¶</td><td>1~60 ç§’</td><td>å‡ åˆ†é’Ÿ~æ•°å°æ—¶</td><td>å®æ—¶</td></tr><tr><td>æŸ¥è¯¢å»¶æ—¶</td><td>å°äº 1 ç§’</td><td>åˆ†é’Ÿçº§</td><td>å°äº 1 ç§’</td></tr><tr><td>æŸ¥è¯¢èƒ½åŠ›</td><td>å¥½</td><td>å¥½</td><td>å¥½</td></tr><tr><td>æ‰©å±•æ€§</td><td>æå‰é¢„å¤‡æœºå™¨</td><td>æå‰é¢„å¤‡æœºå™¨</td><td>ç§’çº§ 10 å€æ‰©å®¹</td></tr><tr><td>æˆæœ¬</td><td>è¾ƒé«˜</td><td>è¾ƒä½</td><td>å¾ˆä½</td></tr></tbody></table>
<blockquote>
<p>æ—¥å¿—å»¶æ—¶ï¼šæ—¥å¿—äº§ç”Ÿåï¼Œå¤šä¹…å¯æŸ¥è¯¢ã€‚
æŸ¥è¯¢å»¶æ—¶ï¼šå•ä½æ—¶é—´æ‰«ææ•°æ®é‡ã€‚
æŸ¥è¯¢èƒ½åŠ›ï¼šå…³é”®è¯æŸ¥è¯¢ã€æ¡ä»¶ç»„åˆæŸ¥è¯¢ã€æ¨¡ç³ŠæŸ¥è¯¢ã€æ•°å€¼æ¯”è¾ƒã€ä¸Šä¸‹æ–‡æŸ¥è¯¢ã€‚
æ‰©å±•æ€§ï¼šå¿«é€Ÿåº”å¯¹ç™¾å€æµé‡ä¸Šæ¶¨ã€‚
æˆæœ¬ï¼šæ¯ GB è´¹ç”¨ã€‚</p>
</blockquote>
<p>å…·ä½“APIä½¿ç”¨ï¼Œå¯æŸ¥çœ‹<a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Fsls" target="_blank" rel="nofollow noopener noreferrer" title="https://www.aliyun.com/product/sls" ref="nofollow noopener noreferrer">æ—¥å¿—æœåŠ¡</a>ã€‚</p>
<h2 data-id="heading-18">å¯è§†åˆ†æç«¯ï¼ˆå¯è§†åŒ–å¹³å°ï¼‰</h2>
<blockquote>
<p>è¿™ä¸ªç¯èŠ‚ï¼Œè¾“å…¥æ˜¯å€Ÿå£æ¥æ”¶åˆ°çš„é”™è¯¯è®°å½•ï¼Œè¾“å‡ºæ˜¯æœ‰æ•ˆçš„æ•°æ®å…¥åº“ã€‚æ ¸å¿ƒåŠŸèƒ½éœ€è¦å¯¹æ•°æ®è¿›è¡Œæ¸…æ´—ï¼Œé¡ºå¸¦è§£å†³äº†è¿‡å¤šçš„æœåŠ¡å‹åŠ›ã€‚å¦ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½æ˜¯å¯¹æ•°æ®è¿›è¡Œå…¥åº“ã€‚</p>
</blockquote>
<h3 data-id="heading-19">ä¸»åŠŸèƒ½</h3>
<blockquote>
<p>è¿™éƒ¨åˆ†ä¸»è¦æ˜¯äº§å“åŠŸèƒ½çš„åˆç†è®¾è®¡ï¼Œåšåˆ°å°è€Œç¾ï¼Œå…·ä½“çš„æ€ä¹ˆèšåˆï¼Œå‚è€ƒé˜¿é‡Œäº‘SLSå°±å¯ä»¥ã€‚</p>
</blockquote>
<ol>
<li>é¦–é¡µå›¾è¡¨ï¼Œå¯é€‰1å¤©ã€4å°æ—¶ã€1å°æ—¶ç­‰ç­‰ï¼Œèšåˆé”™è¯¯æ•°ï¼Œæ ¹æ®1å¤©åˆ‡åˆ†24ä»½æ¥èšåˆã€‚</li>
<li>é¦–é¡µåˆ—è¡¨ï¼Œèšåˆé€‰ä¸­æ—¶é—´å†…çš„æ•°æ®ï¼Œå±•ç¤ºé”™è¯¯æ–‡ä»¶ã€é”™è¯¯keyã€äº‹ä»¶æ•°ã€é”™è¯¯ç±»å‹ã€æ—¶é—´ã€é”™è¯¯ä¿¡æ¯ã€‚</li>
<li>é”™è¯¯è¯¦æƒ…ï¼Œäº‹ä»¶åˆ—è¡¨ã€åŸºæœ¬ä¿¡æ¯ã€è®¾å¤‡ä¿¡æ¯ã€è®¾å¤‡å æ¯”å›¾è¡¨ï¼ˆè§ä¸Šé¢äº‹ä»¶åˆ—è¡¨çš„å›¾ï¼‰ã€‚</li>
</ol>
<p>â€‹</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/140df94c3dd7479796e8fff7340fe807~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-20">æ’è¡Œæ¦œ</h3>
<p>åˆšå¼€å§‹åšäº†å¾…å¤„ç†é”™è¯¯åˆ—è¡¨ã€æˆ‘çš„é”™è¯¯åˆ—è¡¨ã€å·²è§£å†³åˆ—è¡¨ï¼Œé”™è¯¯ä¸äººæ²¡æœ‰ç»‘å®šå…³ç³»ï¼Œè¿‡äºä¾èµ–äººä¸ºä¸»åŠ¨ï¼Œéœ€è¦æ¯ä¸ªäººä¸»åŠ¨åˆ°å¹³å°ä¸Šå¤„ç†ï¼Œæ•ˆæœä¸ä½³ã€‚
â€‹</p>
<p>åé¢é€šè¿‡é”™è¯¯ä½œè€…æ’è¡Œæ¦œï¼Œé€šè¿‡é’‰é’‰æ—¥æŠ¥æ¥æé†’å¯¹åº”äººå‘˜å¤„ç†ã€‚ç´§æ€¥é”™è¯¯ï¼Œé€šè¿‡å®æ—¶å‘Šè­¦æ¥è´£ä»»åˆ°äººï¼Œåé¢å‘Šè­¦ä¼šè¯´ã€‚</p>
<p>å…·ä½“åŸç†ï¼š</p>
<ul>
<li>webpackæ‰“åŒ…é€šè¿‡gitå‘½ä»¤æŠŠä½œè€…å’Œä½œè€…é‚®ç®±ã€æ—¶é—´æ‰“åŒ…åœ¨å¤´éƒ¨ã€‚</li>
<li>åœ¨å¯è§†åŒ–æœåŠ¡ä¸­ï¼Œå»è¯·æ±‚å¯¹åº”çš„æŠ¥é”™urlåŒ¹é…åˆ°å¯¹åº”ä½œè€…ï¼Œè¿”å›ç»™å±•ç¤ºç«¯ã€‚</li>
</ul>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/df8cacdfd8b04b3b8d71ce85a012e829~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-21">SourceMap</h3>
<p>åˆ©ç”¨webpackçš„hidden-source-mapæ„å»ºã€‚ä¸ source-map ç›¸æ¯”å°‘äº†æœ«å°¾çš„æ³¨é‡Šï¼Œä½† output ç›®å½•ä¸‹çš„ index.js.map æ²¡æœ‰å°‘ã€‚çº¿ä¸Šç¯å¢ƒé¿å…source-mapæ³„éœ²ã€‚</p>
<pre><code class="hljs language-javascript copyable" lang="javascript">webpackJsonp([<span class="hljs-number">1</span>],[
  <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,t,i</span>)</span>&#123;...&#125;,
  <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,t,i</span>)</span>&#123;...&#125;,
  <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,t,i</span>)</span>&#123;...&#125;,
  <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,t,i</span>)</span>&#123;...&#125;,
  ...
])
<span class="hljs-comment">// è¿™é‡Œæ²¡æœ‰ç”Ÿæˆsource-mapçš„é“¾æ¥åœ°å€</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>æ ¹æ®æŠ¥é”™æ–‡ä»¶çš„urlï¼Œæ ¹æ®å›¢é˜Ÿå†…éƒ¨çº¦å®šå¥½çš„ç›®å½•å’Œè§„åˆ™ï¼Œå®šä½ä¹‹å‰æ‰“åŒ…ä¸Šä¼ çš„sourceMapåœ°å€ã€‚</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">const</span> sourcemapUrl = (<span class="hljs-string">'xxxfolder/'</span> + url + <span class="hljs-string">'xxxHash'</span> +<span class="hljs-string">'.map'</span>)
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>â€‹</p>
<p>è·å–ä¸ŠæŠ¥çš„lineã€columnã€sourceï¼Œåˆ©ç”¨ç¬¬ä¸‰æ–¹åº“sourceMapè¿›è¡Œå®šä½ã€‚</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">const</span> sourceMap = <span class="hljs-built_in">require</span>(<span class="hljs-string">'source-map'</span>)

<span class="hljs-comment">// æ ¹æ®è¡Œæ•°è·å–æºæ–‡ä»¶è¡Œæ•°</span>
<span class="hljs-keyword">const</span> getPosition = <span class="hljs-keyword">async</span>(map, rolno, colno) => &#123;
  <span class="hljs-keyword">const</span> consumer = <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> sourceMap.SourceMapConsumer(map)

  <span class="hljs-keyword">const</span> position = consumer.originalPositionFor(&#123;
    <span class="hljs-attr">line</span>: rolno,
    <span class="hljs-attr">column</span>: colno
  &#125;)

  position.content = consumer.sourceContentFor(position.source)

  <span class="hljs-keyword">return</span> position
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/da3add0bd9f64aaab8510971cc02ec47~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer">
æ„Ÿå…´è¶£SourceMapåŸç†çš„ï¼Œå¯ä»¥ç»§ç»­æ·±å…¥ï¼Œ<a href="https://link.juejin.cn/?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FBbvJ-OfcS7Sa-e0Zq6iF1w" target="_blank" rel="nofollow noopener noreferrer" title="https://mp.weixin.qq.com/s/BbvJ-OfcS7Sa-e0Zq6iF1w" ref="nofollow noopener noreferrer">SourceMap ä¸å‰ç«¯å¼‚å¸¸ç›‘æ§</a>ã€‚</p>
<h2 data-id="heading-22">é”™è¯¯æŠ¥è­¦</h2>
<h3 data-id="heading-23">æŠ¥è­¦è®¾ç½®</h3>
<ol>
<li>æ¯æ¡ä¸šåŠ¡çº¿è®¾ç½®è‡ªå·±çš„é˜ˆå€¼ã€é”™è¯¯æ—¶é—´è·¨åº¦ï¼ŒæŠ¥è­¦è½®è¯¢é—´éš”</li>
<li>é€šè¿‡é’‰é’‰hookæŠ¥è­¦åˆ°å¯¹åº”çš„ç¾¤</li>
<li>é€šè¿‡æ—¥æŠ¥å½¢å¼æŠ¥å‡ºé”™è¯¯ä½œè€…æ’è¡Œæ¦œ</li>
</ol>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/511b071c77af47798b2f15edabf943ee~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h1 data-id="heading-24">â—‹ å››ã€æ‰©å±•</h1>
<h2 data-id="heading-25">è¡Œä¸ºæœé›†</h2>
<p>é€šè¿‡æœé›†ç”¨æˆ·çš„æ“ä½œï¼Œå¯ä»¥æ˜æ˜¾å‘ç°é”™è¯¯ä¸ºä»€ä¹ˆäº§ç”Ÿã€‚
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/79cf0c15300b4a1eaf5df218baab1d6b~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-26">åˆ†ç±»</h3>
<ul>
<li>UIè¡Œä¸ºï¼š ç‚¹å‡»ã€æ»šåŠ¨ã€èšç„¦/å¤±ç„¦ã€é•¿æŒ‰</li>
<li>æµè§ˆå™¨è¡Œä¸ºï¼šè¯·æ±‚ã€å‰è¿›/åé€€ã€è·³è½¬ã€æ–°å¼€é¡µé¢ã€å…³é—­</li>
<li>æ§åˆ¶å°è¡Œä¸ºï¼šlogã€warnã€error</li>
</ul>
<h3 data-id="heading-27">æœé›†æ–¹å¼</h3>
<ol>
<li>ç‚¹å‡»è¡Œä¸º</li>
</ol>
<p>ä½¿ç”¨addEventListenerç›‘å¬å…¨å±€ä¸Šçš„clickäº‹ä»¶ï¼Œå°†äº‹ä»¶å’ŒDOMå…ƒç´ åå­—æ”¶é›†ã€‚ä¸é”™è¯¯ä¿¡æ¯ä¸€èµ·ä¸ŠæŠ¥ã€‚</p>
<ol start="2">
<li>å‘é€è¯·æ±‚</li>
</ol>
<p>ç›‘å¬XMLHttpRequestçš„onreadystatechangeå›è°ƒå‡½æ•°</p>
<ol start="3">
<li>é¡µé¢è·³è½¬</li>
</ol>
<p>ç›‘å¬window.onpopstateï¼Œé¡µé¢è¿›è¡Œè·³è½¬æ—¶ä¼šè§¦å‘ã€‚</p>
<ol start="4">
<li>æ§åˆ¶å°è¡Œä¸º</li>
</ol>
<p>é‡å†™consoleå¯¹è±¡çš„infoç­‰æ–¹æ³•ã€‚
â€‹</p>
<p>æœ‰å…´è¶£å¯ä»¥å‚è€ƒ<a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.yuque.com%2Fzaotalk%2Fposts%2Fmxx4cb%23De5Se" target="_blank" rel="nofollow noopener noreferrer" title="https://www.yuque.com/zaotalk/posts/mxx4cb#De5Se" ref="nofollow noopener noreferrer">è¡Œä¸ºç›‘æ§</a>ã€‚</p>
<h2 data-id="heading-28">é‡åˆ°çš„é—®é¢˜</h2>
<blockquote>
<p>ç”±äºæ¶‰åŠåˆ°ä¸€äº›éšç§ï¼Œä¸‹è¿°ä¼šåšè„±æ•å¤„ç†ã€‚</p>
</blockquote>
<h3 data-id="heading-29">ç©ºæ—¥å¿—é—®é¢˜</h3>
<p>ä¸Šçº¿ç°åº¦è¿è¡Œåï¼Œæˆ‘ä»¬å‘ç°SLSæ—¥å¿—å­˜åœ¨ä¸€äº›ç©ºæ—¥å¿—ğŸ˜¢ ï¼ŒğŸ¦¢ï¼Œè¿™æ˜¯å‘ç”Ÿäº†å•¥ï¼Ÿ</p>
<p>é¦–å…ˆæˆ‘ä»¬å›å¿†ä¸‹è¿™ä¸ªé“¾è·¯ä¸Šæœ‰å“ªäº›ç¯èŠ‚å¯èƒ½å­˜åœ¨é—®é¢˜ã€‚</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/715c00a094ec4a32adf8487eb13bf9c3~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>æ’æŸ¥é“¾è·¯ï¼ŒSLSé‡‡é›†ç¯èŠ‚ä¹‹å‰æœ‰ç£ç›˜æ—¥å¿—æ”¶é›†ï¼ŒæœåŠ¡ç«¯æ¥æ”¶ï¼ŒSDKä¸ŠæŠ¥ï¼Œé‚£æˆ‘ä»¬ä¾æ¬¡æ’æŸ¥ã€‚
â€‹</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a983b9d2805644ce93421d4e1b115123~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer">
å¾€å‰ä¸€æ­¥ï¼Œå‘ç°ç£ç›˜æ—¥å¿—å°±å·²ç»å­˜åœ¨ç©ºæ—¥å¿—ï¼Œé‚£å‰©ä¸‹å°±å¾—çœ‹ä¸€ä¸‹æ¥æ”¶ç«¯ã€SDKç«¯ã€‚</p>
<p>å¼€å§‹åˆ©ç”¨æ§åˆ¶å˜é‡æ³•ï¼Œå…ˆåœ¨SDKç«¯è¿›è¡Œç©ºåˆ¤æ–­ï¼Œé˜²æ­¢ç©ºæ—¥å¿—ä¸ŠæŠ¥ã€‚ç»“æœï¼šå‘ç°æ— æ•ˆğŸ˜…ã€‚
â€‹</p>
<p>å†ç»§ç»­å¯¹Nodeæ¥æ”¶ç«¯å¤„ç†ï¼Œå¯¹æ¥æ”¶åˆ°çš„æ•°æ®è¿›è¡Œåˆ¤ç©ºï¼Œå¦‚æœä¸ºç©ºä¸è¿›è¡Œæ—¥å¿—æ‰“å°ï¼Œç»“æœï¼šä¾ç„¶æ— æ•ˆğŸ˜³ã€‚
â€‹</p>
<p>æ‰€ä»¥å¼€å§‹å®šä½æ˜¯ä¸æ˜¯æ—¥å¿—æ‰“å°æœ¬èº«å‡ºäº†ä»€ä¹ˆé—®é¢˜ï¼Ÿç ”ç©¶äº†ä¸‹æ—¥å¿—ç¬¬ä¸‰æ–¹æ—¥å¿—åº“çš„APIï¼Œè¿›è¡Œäº†å„ç§å°è¯•ï¼Œå‘ç°ä¾æ—§æ²¡ç”¨ï¼Œæˆ‘è„¸é»‘äº†ğŸŒšã€‚</p>
<p>ä»€ä¹ˆæƒ…å†µï¼Œâ€œé‡äº‹ä¸å†³â€çœ‹æºç ã€‚æ’æŸ¥ä¸‹æ—¥å¿—åº“æºç å­˜åœ¨ä»€ä¹ˆé—®é¢˜ã€‚å¯¹äºæºç çš„ä¸»è°ƒç”¨æµç¨‹èµ°äº†ä¸€éï¼Œå¹¶æ²¡æœ‰å‘ç°ä»€ä¹ˆé—®é¢˜ï¼Œä¸€å¤´é›¾æ°´ğŸ™ƒã€‚
â€‹</p>
<p>æ•´ä¸ªä»£ç é€»è¾‘å¾ˆæ­£å¸¸ï¼Œè¿™è®©æˆ‘ä»¬å¼€å§‹æ€€ç–‘éš¾é“æ˜¯æ•°æ®çš„é—®é¢˜ï¼Œäºæ˜¯å¼€å§‹ç¼©å‡ä¸ŠæŠ¥çš„å­—æ®µï¼Œæœ€ç»ˆå®šä¹‰ä¸ºäº†ä¸€ä¸ªå­—æ®µã€‚å‘ç°ä¸Šçº¿åæ²¡æœ‰é—®é¢˜äº†ğŸ˜¢ã€‚
â€‹</p>
<p>éš¾é“æ˜¯æœ‰äº›å­—æ®µå­˜å‚¨çš„æ•°æ®è¿‡é•¿å¯¼è‡´çš„ï¼Ÿä½†ä»ä»£ç é€»è¾‘ã€æµç¨‹æ—¥å¿—ä¸­å¹¶æ²¡æœ‰ååº”è¿™ä¸ªé”™è¯¯çš„å¯èƒ½æ€§ã€‚
â€‹</p>
<p>å› æ­¤æˆ‘ä»¬åˆ©ç”¨äºŒåˆ†æ³•ï¼ŒäºŒåˆ†åœ°å¢åŠ å­—æ®µï¼Œæœ€ç»ˆå®šä½åˆ°äº†æŸä¸ªå­—æ®µã€‚å¦‚æœå­˜åœ¨æŸä¸ªå­—æ®µä¸ŠæŠ¥å°±ä¼šå‡ºç°é—®é¢˜ã€‚è¿™å¾ˆå‡ºä¹äººçš„æ„æ–™ã€‚
â€‹</p>
<p>æˆ‘ä»¬å†æƒ³äº†ä¸‹é“¾è·¯ï¼Œé™¤äº†æ—¥å¿—åº“ï¼Œå…¶ä»–ä»£ç åŸºæœ¬éƒ½æ˜¯æˆ‘ä»¬è‡ªå·±çš„é€»è¾‘ï¼Œæ‰€ä»¥å¯¹æ—¥å¿—åº“è¿›è¡Œäº†æ’æŸ¥ï¼Œæ€€ç–‘å…¶å¯¹æŸä¸ªå­—æ®µåšäº†ä»€ä¹ˆå¤„ç†ã€‚
â€‹</p>
<p>äºæ˜¯é€šè¿‡æœç´¢ï¼Œå®šä½åˆ°äº†æ—¥å¿—åº“åœ¨ä»†ä»æ¨¡å¼ï¼ˆå¯ä»¥äº†è§£ä¸‹Nodeçš„ä¸»ä»æ¨¡å¼ï¼‰ä¸‹ä¼šä½¿ç”¨æŸä¸ªå­—æ®µæ¥è¡¨æ„ï¼Œå¯¼è‡´å’Œæˆ‘ä»¬ä¸ŠæŠ¥çš„å­—æ®µå†²çªï¼Œå› æ­¤ä¸¢å¤±äº†ğŸ¤ªã€‚</p>
<h3 data-id="heading-30">æ—¥å¿—ä¸¢å¤±é—®é¢˜</h3>
<p>è§£å†³äº†ä¸Šä¸ªé—®é¢˜ï¼Œå¼€å¿ƒäº†ï¼Œä¸€è‚¡æˆå°±æ„Ÿæ¶Œä¸Šå¿ƒå¤´ã€‚ä½†é©¬ä¸Šå°±è¢«å½“å¤´ä¸€æ£’ï¼Œæˆ‘å‘ç°æˆ‘é«˜å…´çš„å¤ªæ—©äº†ğŸ¤®ã€‚
â€‹</p>
<p>å›¢é˜Ÿçš„æŸåŒå­¦åœ¨æœ¬åœ°æµ‹è¯•çš„æ—¶å€™ï¼Œç”±äºç©çš„å¾ˆå¼€å¿ƒï¼Œä¸€ç›´å»åˆ·æ–°é¡µé¢å»ä¸ŠæŠ¥å½“å‰é¡µé¢çš„é”™è¯¯ã€‚ä½†ä»–å‘ç°æœ¬åœ°ä¸ŠæŠ¥çš„æ¡æ•°å’Œå®é™…æ—¥å¿—æœåŠ¡é‡Œçš„æ¡æ•°å¯¹ä¸ä¸Šï¼Œæ—¥å¿—æœåŠ¡é‡Œçš„å°‘äº†å¾ˆå¤šã€‚
â€‹</p>
<p>ç”±äºä¹‹å‰è‡ªèº«åˆšæ¯•ä¸šæ—¶å€™åšè¿‡2å¹´å¤šåç«¯å¼€å‘ï¼Œå¯¹äºIOæ“ä½œä¸¢å¤±æ•°æ®è¿˜æ˜¯æœ‰ç‚¹æ•æ„Ÿã€‚ç›´è§‰ä¸Šå°±æ„Ÿè§‰å¯èƒ½æ˜¯å¤šè¿›ç¨‹æ–¹å‘çš„é—®é¢˜ã€‚æ€€ç–‘æ˜¯å¤šè¿›ç¨‹å¯¼è‡´çš„æ–‡ä»¶æ­»é”é—®é¢˜ã€‚
â€‹</p>
<p>é‚£æˆ‘ä»¬å»æ‰å¤šçº¿ç¨‹ï¼Œé€šè¿‡å•çº¿ç¨‹ï¼Œæˆ‘ä»¬å»é‡å¤åŸå…ˆå¤ç°é—®é¢˜çš„æ­¥éª¤ã€‚å‘ç°æ²¡æœ‰é—æ¼ğŸ¤­ã€‚
â€‹</p>
<p>æˆ‘ä»¬å‘ç°èƒ½è¿›è¡Œé…ç½®Clusterï¼ˆä¸»ä»æ¨¡å¼ï¼‰çš„åœ°æ–¹æœ‰ä¸¤å¤„ï¼Œæ—¥å¿—åº“å’Œéƒ¨ç½²å·¥å…·ã€‚
â€‹</p>
<p>è§‚å¯Ÿæ—¥å¿—åº“é»˜è®¤ä½¿ç”¨çš„ä¸»ä»è¿›ç¨‹æ¨¡å¼ï¼Œè€Œéƒ¨ç½²å·¥å…·æ²¡æœ‰ä¸»ä»æ¨¡å¼çš„æ¦‚å¿µï¼ŒåŠ¿å¿…ä¼šå¯¼è‡´å†™å…¥IOçš„æ­»é”é—®é¢˜ï¼Œå¯¼è‡´æ—¥å¿—ä¸¢å¤±ã€‚äºæ˜¯åœ¨æƒ³ç¤¾åŒºæœ‰æ²¡æœ‰å¯ä»¥æœ‰è§£å†³æ­¤é—®é¢˜çš„ç¬¬ä¸‰æ–¹æ”¯æŒã€‚</p>
<p>ç„¶åé€šè¿‡è°·æ­Œæœç´¢ï¼Œå¾ˆå¿«å°±æ‰¾åˆ°äº†å¯¹åº”çš„ç¬¬ä¸‰æ–¹åº“ï¼Œå®ƒèƒ½æä¾›ä¸»äººè¿›ç¨‹å’Œä»†ä»è¿›ç¨‹ä¹‹é—´çš„æ¶ˆæ¯æ²Ÿé€šã€‚åŸç†æ˜¯ä¸»äººè¿›ç¨‹è´Ÿè´£æ‰€æœ‰æ¶ˆæ¯å†™å…¥logï¼Œè€Œä»†ä»è¿›ç¨‹é€šè¿‡æ¶ˆæ¯ä¼ é€’ç»™ä¸»äººè¿›ç¨‹ã€‚</p>
<h1 data-id="heading-31">â—‹ äº”ã€æ¨èé˜…è¯»åŠå¼•ç”¨</h1>
<p>å¤„ç†å¼‚å¸¸</p>
<blockquote>
<p><a href="https://link.juejin.cn/?target=http%3A%2F%2Fjartto.wang%2F2018%2F11%2F20%2Fjs-exception-handling%2Findex.html" target="_blank" rel="nofollow noopener noreferrer" title="http://jartto.wang/2018/11/20/js-exception-handling/index.html" ref="nofollow noopener noreferrer">å¦‚ä½•ä¼˜é›…å¤„ç†å‰ç«¯å¼‚å¸¸ï¼Ÿ</a></p>
</blockquote>
<p>source-map</p>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FBbvJ-OfcS7Sa-e0Zq6iF1w" target="_blank" rel="nofollow noopener noreferrer" title="https://mp.weixin.qq.com/s/BbvJ-OfcS7Sa-e0Zq6iF1w" ref="nofollow noopener noreferrer">SourceMap ä¸å‰ç«¯å¼‚å¸¸ç›‘æ§</a></p>
</blockquote>
<p>Reacté”™è¯¯</p>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FfGI-8VrejWFf11cootopUQ%3F" target="_blank" rel="nofollow noopener noreferrer" title="https://mp.weixin.qq.com/s/fGI-8VrejWFf11cootopUQ?" ref="nofollow noopener noreferrer">Reactï¼Œä¼˜é›…çš„æ•è·å¼‚å¸¸</a></p>
</blockquote>
<p>Script Error</p>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fblog.sentry.io%2F2016%2F01%2F04%2Fclient-javascript-reporting-window-onerror" target="_blank" rel="nofollow noopener noreferrer" title="https://blog.sentry.io/2016/01/04/client-javascript-reporting-window-onerror" ref="nofollow noopener noreferrer">Capture and report JavaScript errors with window.onerror | Product Blog â€¢ Sentry</a>
<a href="https://link.juejin.cn/?target=https%3A%2F%2Fblog.sentry.io%2F2016%2F05%2F17%2Fwhat-is-script-error" target="_blank" rel="nofollow noopener noreferrer" title="https://blog.sentry.io/2016/05/17/what-is-script-error" ref="nofollow noopener noreferrer">What the heck is "Script error"? | Product Blog â€¢ Sentry</a></p>
</blockquote>
<p>æ•´ä½“</p>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.yuque.com%2Fzaotalk%2Fposts%2Fmxx4cb" target="_blank" rel="nofollow noopener noreferrer" title="https://www.yuque.com/zaotalk/posts/mxx4cb" ref="nofollow noopener noreferrer">å‰ç«¯æç›‘æ§|Allan - å¦‚ä½•å®ç°ä¸€å¥—å¤šç«¯é”™è¯¯ç›‘æ§å¹³å°</a>
<a href="https://link.juejin.cn/?target=https%3A%2F%2Fblog.fundebug.com%2F2019%2F07%2F06%2Fhow-to-monitor-javascript-error%2F" target="_blank" rel="nofollow noopener noreferrer" title="https://blog.fundebug.com/2019/07/06/how-to-monitor-javascript-error/" ref="nofollow noopener noreferrer">ä¸€æ­¥ä¸€æ­¥æ­å»ºå‰ç«¯ç›‘æ§ç³»ç»Ÿï¼šJSé”™è¯¯ç›‘æ§ç¯‡</a>
<a href="https://juejin.im/post/6844904054334685197" target="_blank" title="https://juejin.im/post/6844904054334685197">æ’¸ä¸€ä¸ªå‰ç«¯ç›‘æ§ç³»ç»Ÿ</a></p>
</blockquote>
<p>ä¹‹å‰å¼€æ”¾æ—¥è‡ªå·±æ¼”è®²çš„</p>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fyun.tuia.cn%2Ftuia%2Ffed%2Fopenday%2F%25E9%2594%2599%25E8%25AF%25AF%25E7%259B%2591%25E6%258E%25A7%25E5%25A4%25A9%25E7%259C%25BC%2520-%2520%25E7%25BB%2593%25E6%259D%259F%25E8%25A3%25B8%25E5%25A5%2594.pdf" target="_blank" rel="nofollow noopener noreferrer" title="https://yun.tuia.cn/tuia/fed/openday/%E9%94%99%E8%AF%AF%E7%9B%91%E6%8E%A7%E5%A4%A9%E7%9C%BC%20-%20%E7%BB%93%E6%9D%9F%E8%A3%B8%E5%A5%94.pdf" ref="nofollow noopener noreferrer">ç»“æŸè£¸å¥”ppt</a></p>
</blockquote></div>  
</div>
            