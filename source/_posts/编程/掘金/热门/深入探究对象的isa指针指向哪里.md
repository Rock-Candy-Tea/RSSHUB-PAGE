
---
title: 'æ·±å…¥æ¢ç©¶å¯¹è±¡çš„isaæŒ‡é’ˆæŒ‡å‘å“ªé‡Œ'
categories: 
 - ç¼–ç¨‹
 - æ˜é‡‘
 - çƒ­é—¨
headimg: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/93379f12361f4dc784313666d41df553~tplv-k3u1fbpfcp-zoom-1.image'
author: æ˜é‡‘
comments: false
date: Sun, 14 Mar 2021 04:28:34 GMT
thumbnail: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/93379f12361f4dc784313666d41df553~tplv-k3u1fbpfcp-zoom-1.image'
---

<div>   
<div class="markdown-body"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><h2 data-id="heading-0">é¦–å…ˆæˆ‘ä»¬ä¹‹å‰çŸ¥é“isaçš„æŒ‡é’ˆçš„æŒ‡å‘ç»“è®ºæ˜¯ï¼š</h2>
<h4 data-id="heading-1">1.instanceå¯¹è±¡çš„isaæŒ‡å‘classå¯¹è±¡</h4>
<h4 data-id="heading-2">2.clsaaå¯¹è±¡çš„isaæŒ‡å‘meta-class</h4>
<h4 data-id="heading-3">3.meta-classå¯¹è±¡çš„isaæŒ‡å‘åŸºç±»çš„meta-classå¯¹è±¡</h4>
<p>ï¼ˆ<a href="https://www.jianshu.com/p/ce64c9429426" target="_blank" rel="nofollow noopener noreferrer">NSObjectçš„isaå’ŒsuperclassåŒºåˆ«</a>ï¼‰</p>
<h4 data-id="heading-4">è¿™ç¯‡åšå®¢ï¼Œæˆ‘ä»¬å°†æ¢ç©¶isaæŒ‡é’ˆæŒ‡å‘å“ªé‡Œï¼Ÿå¹¶ä¸”ä¼šä»ä»£ç å±‚çš„å†…å­˜åœ°å€è¯æ˜isaæŒ‡é’ˆçš„æŒ‡å‘ã€‚</h4>
<p>é¦–å…ˆinstanceå¯¹è±¡çš„isaæŒ‡é’ˆæŒ‡å‘classå¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªinstanceå¯¹è±¡</p>
<p><img alt class="lazyload" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/93379f12361f4dc784313666d41df553~tplv-k3u1fbpfcp-zoom-1.image" data-width="800" data-height="600" referrerpolicy="no-referrer"></p>
<p>ä»ä¸Šé¢çš„æˆªå›¾è¿è¡Œç»“æœå¯ä»¥çœ‹å‡ºstuçš„isaçš„0x001d8001000084e9 å’ŒGDStudentçš„isaçš„0x00000001000084e8å¹¶ä¸ä¸€æ ·ï¼Œè·Ÿæˆ‘ä»¬ä¹‹å‰è¯´çš„ç»“æœä¸ä¸€è‡´ï¼Ÿ</p>
<p>å…¶å®å•Šï¼Œåœ¨arm64ä¹‹å‰ï¼Œä¹Ÿå°±æ˜¯iPhone 5sä¹‹å‰å…¶å®æ˜¯ä¸€è‡´çš„ï¼Œè€Œåœ¨arm64ä»¥åå®ƒéœ€è¦ä¸€ä¸ª&ä½è¿ç®—æ“ä½œï¼Œéœ€è¦stuçš„isaä¸ISA_MASKè¿™ä¸ªå¸¸é‡ä½è¿ç®—ä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯</p>
<p>0x001d8001000084e9 & ISA_MASK ï¼Œç°åœ¨æˆ‘ä»¬è‹¹æœæºç çœ‹ä¸€ä¸‹ISA_MASKæ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œè¯·çœ‹ä¸‹é¢çš„æˆªå›¾</p>
<p><img alt class="lazyload" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/749b0fb74d0d4911915bf5325b70dda8~tplv-k3u1fbpfcp-zoom-1.image" data-width="800" data-height="600" referrerpolicy="no-referrer"></p>
<p>éœ€è¦è¿™ä»½æºç çš„ï¼Œè¯·ç§»æ­¥ä¸‹è½½ï¼š<a href="https://opensource.apple.com/tarballs/" target="_blank" rel="nofollow noopener noreferrer">è‹¹æœæºç ä¸‹è½½åœ°å€</a></p>
<p>å› ä¸ºæˆ‘ä»¬åˆ›å»ºçš„æ˜¯macç¨‹åºï¼Œæ‰€ä»¥æˆ‘ä»¬å¤åˆ¶ä¸‹é¢çš„ISA_MASKä½è¿ç®—æ“ä½œä¸€æ¬¡ï¼Œè¯·çœ‹ä¸‹é¢çš„ç»“æœï¼š</p>
<p><img alt class="lazyload" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1e549dc4abb34a04949466cd0c4f4e7a~tplv-k3u1fbpfcp-zoom-1.image" data-width="800" data-height="600" referrerpolicy="no-referrer"></p>
<p>ä»çº¢è‰²çš„ç»“æœæ˜¯ä¸æ˜¯ä¸€æ‘¸ä¸€æ ·ï¼Œæ­£å¥½éªŒè¯äº†instanceå¯¹è±¡çš„isaæŒ‡é’ˆæŒ‡å‘classå¯¹è±¡ï¼</p>
<p>æ­¤æ—¶æ˜¯ä¸æ˜¯666ï¼ğŸ˜„</p>
<h2 data-id="heading-5">2.clsaaå¯¹è±¡çš„isaæŒ‡å‘meta-class</h2>
<p>ç»†å¿ƒçš„åŒå­¦å¯èƒ½å¯èƒ½å‘ç°æˆ‘ä»¬æ— æ³•è¾“å‡ºclassStuçš„isaï¼Œå°±åƒä¸Šé¢çš„ç»¿è‰²ä¸æ˜¯structureï¼Œæˆ‘ä»¬ç‚¹ä¸€ä¸‹classçš„jump to DefinitionæŸ¥çœ‹å®ƒçš„æºç å®šä¹‰</p>
<p><img alt class="lazyload" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a1ed4e86c0834c97a7822024c8acec99~tplv-k3u1fbpfcp-zoom-1.image" data-width="800" data-height="600" referrerpolicy="no-referrer"></p>
<p><img alt class="lazyload" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/15cdee74c9194598a5a0e7ad680c509d~tplv-k3u1fbpfcp-zoom-1.image" data-width="800" data-height="600" referrerpolicy="no-referrer"></p>
<p>è¿™æ ·æˆ‘ä»¬çœ‹æœ€åé‚£ç§çº¢è‰²éƒ¨åˆ†ï¼Œç¡®å®æ˜¯æœ‰ä¸ªisaï¼Œæ­¤æ—¶æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªä¸€æ‘¸ä¸€æ ·çš„ç»“æ„ä½“æ¥æ›¿æ¢ä¸€ä¸‹classå°±è¡Œäº†å¦‚ä¸‹ä»£ç ï¼š</p>
<p><strong>struct gd</strong>_objc_class &#123;</p>
<p>Class isa;</p>
<p>Class superclass;</p>
<p>&#125;;</p>
<p>objc_classå‰é¢åŠ gdæ˜¯é˜²æ­¢é‡åï¼Œç¼–è¯‘ä¸é€šè¿‡ï¼Œæ‰€ä»¥éšä¾¿å†™å•¥éƒ½è¡Œ</p>
<p>ç°åœ¨å°±å¯ä»¥éªŒè¯äº†</p>
<p><img alt class="lazyload" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c0db43f12e324170ae5aef61a088998b~tplv-k3u1fbpfcp-zoom-1.image" data-width="800" data-height="600" referrerpolicy="no-referrer"></p>
<p>è¿™æ ·ç»“æœå°±æ˜¯ä¸€æ‘¸ä¸€æ ·å¯ä»¥éªŒè¯äº†ï¼</p>
<p>è¿™æ ·ä¹Ÿæ˜¯ä»ä»£ç å±‚éªŒè¯äº†</p>
<h2 data-id="heading-6">1.instanceå¯¹è±¡çš„isaæŒ‡å‘classå¯¹è±¡</h2>
<h2 data-id="heading-7">2.clsaaå¯¹è±¡çš„isaæŒ‡å‘meta-class</h2>
<h2 data-id="heading-8">3.meta-classå¯¹è±¡çš„isaæŒ‡å‘åŸºç±»çš„meta-classå¯¹è±¡</h2>
<p>æ¥ä¸‹æ¥æˆ‘å°†ç”¨ä»£ç è¯æ˜</p>
<p>1.å¯¹è±¡æ–¹æ³•ã€å±æ€§ã€æˆå‘˜å˜é‡ã€åè®®ä¿¡æ¯å­˜æ”¾åœ¨classå¯¹è±¡ä¸­</p>
<p>2.ç±»æ–¹æ³•å­˜æ”¾åœ¨meta-classå¯¹è±¡ä¸­</p>
<p>3.æˆå‘˜å˜é‡çš„å…·ä½“å€¼æ˜¯å­˜æ”¾åœ¨instanceå¯¹è±¡ä¸­</p>
<h2 data-id="heading-9">å¦‚æœè§‰å¾—æˆ‘å†™å¾—å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œè¯·å…³æ³¨æˆ‘ï¼Œæˆ‘ä¼šæŒç»­æ›´æ–°ğŸ˜„</h2></div> <div class="image-viewer-box" data-v-78c9b824><!----></div>  
</div>
            