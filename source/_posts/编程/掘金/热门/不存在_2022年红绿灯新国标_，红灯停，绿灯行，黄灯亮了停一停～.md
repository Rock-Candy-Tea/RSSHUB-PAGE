
---
title: '不存在_2022年红绿灯新国标_，红灯停，绿灯行，黄灯亮了停一停～'
categories: 
 - 编程
 - 掘金
 - 热门
headimg: 'https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7dad6828c9b347bba343bd281aa47ce2~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?'
author: 掘金
comments: false
date: Tue, 23 Aug 2022 23:38:36 GMT
thumbnail: 'https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7dad6828c9b347bba343bd281aa47ce2~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?'
---

<div>   
<div class="markdown-body cache"><style>.markdown-body&#123;color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%&#125;.markdown-body p&#123;color:#595959;font-size:15px;line-height:2;font-weight:400&#125;.markdown-body p+p&#123;margin-top:16px&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;padding:30px 0;margin:0;color:#135ce0&#125;.markdown-body h1&#123;position:relative;text-align:center;font-size:22px;margin:50px 0&#125;.markdown-body h1:before&#123;position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)&#125;.markdown-body h2&#123;position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0&#125;.markdown-body h3&#123;font-size:16px&#125;.markdown-body ul&#123;list-style:disc outside;margin-left:2em;margin-top:1em&#125;.markdown-body li&#123;line-height:2;color:#595959&#125;.markdown-body img.loaded&#123;margin:0 auto;display:block&#125;.markdown-body blockquote&#123;background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5&#125;.markdown-body blockquote p&#123;color:#666;line-height:2&#125;.markdown-body a&#123;color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none&#125;.markdown-body em strong,.markdown-body strong&#123;color:#036aca&#125;.markdown-body hr&#123;border-top:1px solid #135ce0&#125;.markdown-body pre&#123;overflow:auto&#125;.markdown-body code,.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body table&#123;border-collapse:collapse;margin:1rem 0;overflow-x:auto&#125;.markdown-body table td,.markdown-body table th&#123;border:1px solid #dfe2e5;padding:.6em 1em&#125;.markdown-body table tr&#123;border-top:1px solid #dfe2e5&#125;.markdown-body table tr:nth-child(2n)&#123;background-color:#f6f8fa&#125;</style><p>携手创作，共同成长！这是我参与「掘金日新计划 · 8 月更文挑战」的第27天，<a href="https://juejin.cn/post/7123120819437322247" title="https://juejin.cn/post/7123120819437322247" target="_blank">点击查看活动详情</a>。</p>
<h2 data-id="heading-0">项目背景</h2>
<p>近几天一直闹的沸沸扬扬的“<strong>2022年红绿灯新国标</strong>”总算被<strong>辟谣</strong>了，自小我们所接受的教育是“<code>红灯停，绿灯行，黄灯亮了停一停</code>”，要一下子调整到奇奇怪怪的方式，怕是驾照白考，出门6分300块，哭哭～</p>
<p>刚好有点时间，这里就打算使用<code>SwiftUI</code>实现一个标准的红绿灯的逻辑。</p>
<p>那么，让我们开始吧。</p>
<h2 data-id="heading-1">项目搭建</h2>
<p>首先，创建一个新的<code>SwiftUI</code>项目，命名为<code>TrafficLight</code>。</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7dad6828c9b347bba343bd281aa47ce2~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?" alt="1.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>我们先来看下最终的效果。</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dee7f5325ac04cd991c1dda392a862a6~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?" alt="2.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>上述设计稿中，我们可以看到红绿灯包括<strong>灯光指示</strong>部分、<strong>灯光控制</strong>部分2大部分内容。</p>
<p>当我们调整下方灯光控制开关时，对应的灯光指示将切换至对应样式。</p>
<p>明白了逻辑后，我们来完成基础的样式部分。</p>
<h2 data-id="heading-2">App标题</h2>
<p>首先是标题部分，我们使用常用的<code>NavigationView</code>构建标题，示例：</p>
<pre><code class="hljs language-css copyable" lang="css"><span class="hljs-selector-tag">var</span> <span class="hljs-selector-tag">body</span>: some View &#123;
    NavigationView &#123;
        ZStack &#123;
            <span class="hljs-attribute">Color</span>(red: <span class="hljs-number">246</span> / <span class="hljs-number">255</span>, green: <span class="hljs-number">246</span> / <span class="hljs-number">255</span>, blue: <span class="hljs-number">246</span> / <span class="hljs-number">255</span>).<span class="hljs-built_in">edgesIgnoringSafeArea</span>(.all)

        &#125;
        <span class="hljs-selector-class">.NavigationView</span>("红绿灯", displayMode: .inline)
    &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e119df6be7b341678fd25b4f6788608d~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?" alt="3.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-3">红绿灯部分</h2>
<p>红绿灯灯光部分，由于我们需要通过<strong>不同的状态</strong>设置灯光，我们先声明好需要的变量，示例：</p>
<pre><code class="hljs language-less copyable" lang="less"><span class="hljs-variable">@State</span> var <span class="hljs-attribute">isAllowTurnLeft</span>: Bool = true
<span class="hljs-variable">@State</span> var <span class="hljs-attribute">isAllowGoStraight</span>: Bool = true
<span class="hljs-variable">@State</span> var <span class="hljs-attribute">isAllowTrunRight</span>: Bool = true
<span class="hljs-variable">@State</span> var <span class="hljs-attribute">isLeftWarning</span>: Bool = false
<span class="hljs-variable">@State</span> var <span class="hljs-attribute">isGoStraightWarning</span>: Bool = false
<span class="hljs-variable">@State</span> var <span class="hljs-attribute">isRightWarning</span>: Bool = false
<span class="copy-code-btn">复制代码</span></code></pre>
<p>然后我们为了代码简洁和便于修改，我们单独构建<strong>3个红绿灯</strong>指示样式，示例：</p>
<pre><code class="hljs language-css copyable" lang="css">// 左转
func leftLightView(isAllow: Bool, isWarning: Bool) -> some View &#123;
    VStack(alignment: .center, spacing: <span class="hljs-number">30</span>) &#123;
        Image(systemName: <span class="hljs-string">"arrow.backward"</span>)
            .<span class="hljs-built_in">font</span>(.<span class="hljs-built_in">system</span>(size: <span class="hljs-number">32</span>))
            .<span class="hljs-built_in">foregroundColor</span>(isAllow ? .gray : .red)
        <span class="hljs-built_in">Image</span>(systemName: <span class="hljs-string">"arrow.backward"</span>)
            .<span class="hljs-built_in">font</span>(.<span class="hljs-built_in">system</span>(size: <span class="hljs-number">32</span>))
            .<span class="hljs-built_in">foregroundColor</span>(isWarning ? .yellow : .gray)
        <span class="hljs-built_in">Image</span>(systemName: <span class="hljs-string">"arrow.backward"</span>)
            .<span class="hljs-built_in">font</span>(.<span class="hljs-built_in">system</span>(size: <span class="hljs-number">32</span>))
            .<span class="hljs-built_in">foregroundColor</span>(isAllow ? .green : .gray)
    &#125;
    <span class="hljs-selector-class">.padding</span>()
    <span class="hljs-selector-class">.frame</span>(<span class="hljs-attribute">height</span>: <span class="hljs-number">200</span>)
    .<span class="hljs-built_in">background</span>(.black)
    .<span class="hljs-built_in">cornerRadius</span>(<span class="hljs-number">8</span>)
&#125;

// 直行
func goStraightLightView(isAllow: Bool, isWarning: Bool) -> some View &#123;
    VStack(alignment: .center, spacing: <span class="hljs-number">15</span>) &#123;
        Image(systemName: <span class="hljs-string">"circle.fill"</span>)
            .<span class="hljs-built_in">font</span>(.<span class="hljs-built_in">system</span>(size: <span class="hljs-number">32</span>))
            .<span class="hljs-built_in">foregroundColor</span>(isAllow ? .gray : .red)
        <span class="hljs-built_in">Image</span>(systemName: <span class="hljs-string">"circle.fill"</span>)
            .<span class="hljs-built_in">font</span>(.<span class="hljs-built_in">system</span>(size: <span class="hljs-number">32</span>))
            .<span class="hljs-built_in">foregroundColor</span>(isWarning ? .yellow : .gray)
        <span class="hljs-built_in">Image</span>(systemName: <span class="hljs-string">"circle.fill"</span>)
            .<span class="hljs-built_in">font</span>(.<span class="hljs-built_in">system</span>(size: <span class="hljs-number">32</span>))
            .<span class="hljs-built_in">foregroundColor</span>(isAllow ? .green : .gray)
    &#125;
    <span class="hljs-selector-class">.padding</span>()
    <span class="hljs-selector-class">.frame</span>(<span class="hljs-attribute">height</span>: <span class="hljs-number">200</span>)
    .<span class="hljs-built_in">background</span>(.black)
    .<span class="hljs-built_in">cornerRadius</span>(<span class="hljs-number">8</span>)
&#125;

// 右转
func rightLightView(isAllow: Bool, isWarning: Bool) -> some View &#123;
    VStack(alignment: .center, spacing: <span class="hljs-number">30</span>) &#123;
        Image(systemName: <span class="hljs-string">"arrow.forward"</span>)
            .<span class="hljs-built_in">font</span>(.<span class="hljs-built_in">system</span>(size: <span class="hljs-number">32</span>))
            .<span class="hljs-built_in">foregroundColor</span>(isAllow ? .gray : .red)
        <span class="hljs-built_in">Image</span>(systemName: <span class="hljs-string">"arrow.forward"</span>)
            .<span class="hljs-built_in">font</span>(.<span class="hljs-built_in">system</span>(size: <span class="hljs-number">32</span>))
            .<span class="hljs-built_in">foregroundColor</span>(isWarning ? .yellow : .gray)
        <span class="hljs-built_in">Image</span>(systemName: <span class="hljs-string">"arrow.forward"</span>)
            .<span class="hljs-built_in">font</span>(.<span class="hljs-built_in">system</span>(size: <span class="hljs-number">32</span>))
            .<span class="hljs-built_in">foregroundColor</span>(isAllow ? .green : .gray)
    &#125;
    <span class="hljs-selector-class">.padding</span>()
    <span class="hljs-selector-class">.frame</span>(<span class="hljs-attribute">height</span>: <span class="hljs-number">200</span>)
    .<span class="hljs-built_in">background</span>(.black)
    .<span class="hljs-built_in">cornerRadius</span>(<span class="hljs-number">8</span>)
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<p>上述代码中，我们分别构建了红绿灯指示灯的视图：<code>leftLightView</code>左转视图、<code>goStraightLightView</code>直行视图、<code>rightLightView</code>右转视图。</p>
<p>然后通过传入变量<code>isAllow</code>判断该方向是否运行，并且根据<code>isAllow</code>变量、<code>isWarning</code>变量，设置对应灯光图片是否赋于颜色。</p>
<p>然后我们在<code>body</code>主体视图展示视图，示例：</p>
<pre><code class="hljs language-scss copyable" lang="scss">VStack &#123;
    <span class="hljs-comment">// 红绿灯</span>
    <span class="hljs-built_in">HStack</span>(spacing: <span class="hljs-number">20</span>) &#123;
        <span class="hljs-built_in">leftLightView</span>(isAllow: isAllowTurnLeft, isWarning: isLeftWarning)
        <span class="hljs-built_in">goStraightLightView</span>(isAllow: isAllowGoStraight, isWarning: isGoStraightWarning)
        <span class="hljs-built_in">rightLightView</span>(isAllow: isAllowTrunRight, isWarning: isRightWarning)
    &#125;<span class="hljs-selector-class">.padding</span>()

&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2c12a598b1994eaeb6b513f98340fe86~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?" alt="4.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>上述代码中，我们使用<code>HStack</code>横向布局，让三个灯光视图横向展示，并且传入的变量都绑定好我们提前声明好的变量。</p>
<h2 data-id="heading-4">规则设置部分</h2>
<p>规则设置部分，我们也单独建立一个新的视图，示例：</p>
<pre><code class="hljs language-scss copyable" lang="scss"><span class="hljs-comment">// 规则列表</span>
func <span class="hljs-built_in">ruleListView</span>() -> some View &#123;
    <span class="hljs-selector-tag">Form</span> &#123;
        <span class="hljs-selector-tag">Section</span> &#123;
            <span class="hljs-built_in">Toggle</span>(isOn: $isAllowTurnLeft) &#123;
                <span class="hljs-built_in">VStack</span>(alignment: .leading, spacing: <span class="hljs-number">5</span>) &#123;
                    Text("左转")
                        <span class="hljs-selector-class">.font</span>(.system(size: <span class="hljs-number">17</span>))
                        <span class="hljs-selector-class">.foregroundColor</span>(.black)
                    Text(isAllowTurnLeft ?"左转通行" : "禁止左转")
                        <span class="hljs-selector-class">.font</span>(.system(size: <span class="hljs-number">14</span>))
                        <span class="hljs-selector-class">.foregroundColor</span>(.gray)
                &#125;
            &#125;
            <span class="hljs-built_in">Toggle</span>(isOn: $isAllowGoStraight) &#123;
                <span class="hljs-built_in">VStack</span>(alignment: .leading, spacing: <span class="hljs-number">5</span>) &#123;
                    Text("直行")
                        <span class="hljs-selector-class">.font</span>(.system(size: <span class="hljs-number">17</span>))
                        <span class="hljs-selector-class">.foregroundColor</span>(.black)
                    Text(isAllowGoStraight ? "直行通行" : "禁止直行")
                        <span class="hljs-selector-class">.font</span>(.system(size: <span class="hljs-number">14</span>))
                        <span class="hljs-selector-class">.foregroundColor</span>(.gray)
                &#125;
            &#125;
            <span class="hljs-built_in">Toggle</span>(isOn: $isAllowTrunRight) &#123;
                <span class="hljs-built_in">VStack</span>(alignment: .leading, spacing: <span class="hljs-number">5</span>) &#123;
                    Text("右转")
                        <span class="hljs-selector-class">.font</span>(.system(size: <span class="hljs-number">17</span>))
                        <span class="hljs-selector-class">.foregroundColor</span>(.black)
                    Text(isAllowTrunRight ? "右转通行" : "禁止右转")
                        <span class="hljs-selector-class">.font</span>(.system(size: <span class="hljs-number">14</span>))
                        <span class="hljs-selector-class">.foregroundColor</span>(.gray)
                &#125;
            &#125;
        &#125;<span class="hljs-selector-class">.padding</span>(.vertical, <span class="hljs-number">5</span>)
    &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/da322dd5c3d246fcaa19a31d8456f4f5~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?" alt="5.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>上述代码中，我们使用<code>Form</code>列表和<code>Section</code>段落构建了规则设置视图<code>ruleListView</code>。</p>
<p>在规则设置视图中，我们使用<code>Toggle</code>开关绑定对应的变量，并使用提前声明好的变量状态绑定展示不同的辅助文字。</p>
<p>另外为了去掉<code>Form</code>自带的列表背景颜色，我们还需要在页面载入时去掉<code>List</code>的背景颜色，示例：</p>
<pre><code class="hljs language-scss copyable" lang="scss"><span class="hljs-built_in">init</span>() &#123;
        UITableView<span class="hljs-selector-class">.appearance</span>()<span class="hljs-selector-class">.backgroundColor</span> = <span class="hljs-selector-class">.clear</span>
    &#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-5">项目预览</h2>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/15c09b5db76249dc8117719caf007b64~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?" alt="6.gif" loading="lazy" referrerpolicy="no-referrer"></p>
<p>恭喜你，完成了本章的全部内容！</p>
<p>快来动手试试吧。</p>
<p><strong>如果本专栏对你有帮助，不妨点赞、评论、关注～</strong></p></div>  
</div>
            