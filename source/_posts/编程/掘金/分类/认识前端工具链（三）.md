
---
title: 'è®¤è¯†å‰ç«¯å·¥å…·é“¾ï¼ˆä¸‰ï¼‰'
categories: 
 - ç¼–ç¨‹
 - æ˜é‡‘
 - åˆ†ç±»
headimg: 'https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8a9b6d8b157e4d3e85654d1d4329b9f4~tplv-k3u1fbpfcp-watermark.image'
author: æ˜é‡‘
comments: false
date: Sat, 05 Jun 2021 23:41:11 GMT
thumbnail: 'https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8a9b6d8b157e4d3e85654d1d4329b9f4~tplv-k3u1fbpfcp-watermark.image'
---

<div>   
<div class="markdown-body"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><h3 data-id="heading-0">å‰ç«¯å·¥å…·é“¾ç»¼è¿°</h3>
<p>å·¥å…·é“¾åœ¨å‰ç«¯é¢†åŸŸæ‰®æ¼”ç€å¾ˆé‡è¦çš„è§’è‰²ã€‚å¦‚ä½•<strong>ä¸ºJavascriptç”Ÿäº§ç¯å¢ƒæ„å»ºå»æ„å»ºä¸€å¥—å·¥å…·é“¾ï¼Œæ¥è¦†ç›–å‰ç«¯å„ä¸ªå¼€å‘ç¯èŠ‚</strong>ï¼Œæ˜¯æˆ‘ä»¬éœ€è¦äº†è§£å­¦ä¹ çš„ã€‚è€Œä¸€å¥—é«˜æ•ˆçš„å·¥å…·é“¾ä½“ç³»ï¼Œå¯¹äºæ¯ä¸€ä¸ªå‰ç«¯å›¢é˜Ÿæ¥è¯´éƒ½æœ‰ç€è‡³å…³é‡è¦çš„æ„ä¹‰ï¼Œå®ƒä¸ä»…å¯ä»¥æé«˜å›¢é˜Ÿçš„å¼€å‘æ•ˆç‡ï¼Œè¿˜å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šè§„èŒƒå‰ç«¯å¼€å‘çš„å„ä¸ªç¯èŠ‚ï¼Œè¿›è€Œä¸ºå›¢é˜ŸèŠ‚çœä¸€äº›äººå‘˜åä½œå’Œè°ƒæ•´çš„æˆæœ¬ã€‚</p>
<p>ç»¼ä¸Šï¼Œ<strong>å‰ç«¯å·¥å…·é“¾æ—¨åœ¨å‹å¥½å¼€å‘ä½“éªŒï¼Œæå‡å¼€å‘å›¢é˜Ÿå¼€å‘æ•ˆç‡</strong>ã€‚</p>
<p>è€Œè¦æ„å»ºä¸€ä¸ªå·¥å…·é“¾ï¼Œé¦–å…ˆæˆ‘ä»¬å…ˆè¦äº†è§£åœ¨å‰ç«¯å¼€å‘é¢†åŸŸæœ‰å“ªå‡ ä¸ªç¯èŠ‚ï¼š</p>
<ul>
<li>é¡¹ç›®åˆå§‹åŒ–</li>
<li>å¼€å‘ã€è°ƒè¯•ã€æ„å»º</li>
<li>å•å…ƒæµ‹è¯•</li>
<li>å‘å¸ƒ</li>
</ul>
<p>æ‰€ä»¥ä¸€ä¸ªå‰ç«¯å·¥å…·é“¾ï¼Œå®ƒå¤§è‡´éƒ½ä¼šåŒ…å«ä¸Šé¢è¿™ä¸€ç³»åˆ—åŠŸèƒ½ã€‚è€Œä¸€ä¸ªå…¸å‹çš„ç¤ºä¾‹å°±ç±»ä¼¼äºä¸‹é¢ï¼š</p>
<ul>
<li>Yeoman</li>
<li>Webpack</li>
<li>Mocha</li>
<li>å‘å¸ƒç³»ç»Ÿ</li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥å°†è¿›è€Œå°†å®ƒæ€»ç»“æˆä¸‹é¢å‡ å—ï¼š</p>
<ul>
<li>è„šæ‰‹æ¶</li>
<li>æ„å»ºâ¼¯å…·</li>
<li><strong>æµ‹è¯•å·¥å…·</strong></li>
<li>å‘å¸ƒç³»ç»Ÿ</li>
</ul>
<p>è€Œä¸Šäº†è§„æ¨¡çš„å›¢é˜Ÿä¹Ÿéƒ½ä¼šé’ˆå¯¹ä»¥ä¸Šçš„æµç¨‹ï¼Œåˆ¶å®šä¸€ä¸ªå·¥å…·é“¾ï¼Œå¹¶å°†å®ƒåŒ…è£…æˆä¸€ä¸ªé»‘ç›’å½¢å¼ï¼Œè®©ç¨‹åºå‘˜åœ¨æ¯ä¸ªç¯èŠ‚åªéœ€è¦è¿è¡Œç®€å•å‘½ä»¤è¡Œï¼Œå³å¯è¿›å…¥å¼€å‘æµç¨‹ã€‚</p>
<p>è€Œä»æ•´ä½“ä¸Šäº†è§£å·¥å…·é“¾ç›¸å…³çš„çŸ¥è¯†ä½“ç³»ï¼Œç†Ÿæ‚‰å…¶å¤§è‡´ç»“æ„ä»¥åŠè¿ä½œæ–¹å¼ï¼Œä¹Ÿæ˜¯ååˆ†é‡è¦çš„ã€‚</p>
<p>æ‰€ä»¥ï¼Œä¸‹é¢è¿™é‡Œæ˜¯æœ¬äººå°†å¯¹äºå·¥å…·é“¾ç›¸å…³åŸºç¡€çŸ¥è¯†çš„ä¸€äº›æ•´ç†ã€‚è¿™ä¸€ç¯‡æˆ‘ä»¬é¦–å…ˆæ¥ä»‹ç»çš„æ˜¯ï¼Œå·¥å…·é“¾ä¸­çš„<strong>æµ‹è¯•å·¥å…·ã€‚</strong></p>
<p>å·¥å…·é“¾ç³»åˆ—æ–‡ç« æŒ‡è·¯ï¼š</p>
<p><a href="https://juejin.cn/post/6965468072509440014" target="_blank">è®¤è¯†å‰ç«¯å·¥å…·é“¾ï¼ˆä¸€ï¼‰</a></p>
<p><a href="https://juejin.cn/post/6968056636522889223" target="_blank">è®¤è¯†å‰ç«¯å·¥å…·é“¾ï¼ˆäºŒï¼‰</a></p>
<h3 data-id="heading-1">å•å…ƒæµ‹è¯•å·¥å…·</h3>
<p>æµ‹è¯•å·¥å…·æ˜¯å‰ç«¯å·¥å…·é“¾é‡Œéå¸¸é‡è¦çš„ä¸€ç¯ï¼Œå¯¹äºå¤§éƒ¨åˆ†çš„å¼€æºé¡¹ç›®æ¥è¯´ï¼Œæµ‹è¯•éƒ½æ˜¯ä¸€ä¸ªå¿…éœ€å“ã€‚å¦‚æœæˆ‘ä»¬æŸä¸ªé¡¹ç›®æ˜¯ä¸€ä¸ªè¢«é«˜åº¦å¤ç”¨çš„ä¸œè¥¿ï¼Œé‚£æµ‹è¯•çš„æ”¶ç›Šä¹Ÿæ˜¯å¾ˆé«˜çš„ï¼Œæ‰€ä»¥é™¤éæ˜¯ä¸€æ¬¡æ€§ä½¿ç”¨çš„ä»£ç ï¼Œæˆ‘ä»¬è¿˜éƒ½æ˜¯è¦ä½¿ç”¨å•å…ƒæµ‹è¯• ã€‚</p>
<p>ä¸‹é¢ä»‹ç»ä¸€äº›å½“å‰æœ€æµè¡Œçš„æµ‹è¯•å·¥å…·å’Œä¸€äº›é…å¥—è®¾æ–½ï¼š</p>
<p>è¿™é‡Œæœ‰æµè¡Œçš„ä¸¤ä¸ªåº“ä¸€ä¸ªæ˜¯<strong>Mocha</strong>ï¼Œä¸€ä¸ªæ˜¯<strong>Jest</strong></p>
<h3 data-id="heading-2">Mocha</h3>
<p>Mochaæœ€æ—©æ˜¯ä¸€ä¸ªé’ˆå¯¹Node.jsçš„ä¸€ä¸ªæµ‹è¯•æ¡†æ¶ï¼Œå®ƒé»˜è®¤åœ¨ä½¿ç”¨Webpoackä¹‹å‰ï¼Œå®ƒéƒ½æ˜¯ä¸æ”¯æŒimport exportçš„ï¼Œè¿™é‡Œæˆ‘ä»¬ä¾‹å­é‡Œä½¿ç”¨çš„æ˜¯requireã€‚</p>
<h5 data-id="heading-3">1. å®‰è£…</h5>
<pre><code class="hljs language-shell copyable" lang="shell">npm install -g mocha
npm install --save-dev mocha
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h5 data-id="heading-4">2.åŸºæœ¬ä½¿ç”¨</h5>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">//test/test.js</span>
<span class="hljs-keyword">var</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">'assert'</span>);
<span class="hljs-keyword">var</span> add = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../add.js'</span>)

describe(<span class="hljs-string">'add function testing'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
  it(<span class="hljs-string">'1 + 2 shuold be 3'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    assert.equal(add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>), <span class="hljs-number">3</span>);
  &#125;);
  it(<span class="hljs-string">'-5 + 2 shuold be -3'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    assert.equal(add(-<span class="hljs-number">5</span>, <span class="hljs-number">2</span>), -<span class="hljs-number">3</span>);
  &#125;);
&#125;)

<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// add.js</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span> (<span class="hljs-params">a, b</span>) </span>&#123;
  <span class="hljs-keyword">return</span> a + b
&#125;
<span class="hljs-built_in">module</span>.exports = add
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h5 data-id="heading-5">3.å¼•å…¥babel</h5>
<p>è¿™é‡Œæˆ‘ä»¬å¼•å…¥babelæ¥è§£å†³ä¸€ä¸‹add.jså¿…é¡»ç”¨nodeçš„æ–¹å¼module.exportsçš„é—®é¢˜ã€‚è€Œç®€å•çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨webpacké¡¹ç›®ï¼Œç„¶ååœ¨disté‡Œé¢å»åšå•å…ƒæµ‹è¯•ï¼Œä½†ä»ç†è®ºä¸Šè€ƒè™‘ï¼Œæµ‹è¯•è¿™ä¸ªç¯èŠ‚ä¾èµ–äºbuildè¿™ä¸ªç¯èŠ‚ï¼Œæ˜¯ä¸€ä»¶ä¸å¤ªå¥½çš„åšæ³•ã€‚å¦å¤–ï¼Œè¿™å¯¹åé¢åšcode coverageè¯ä»¥ä¸Šé¢è¿™ç§æ–¹å¼çš„è¯ï¼Œä¼šå¸¦æ¥ä¸å¿…è¦çš„éº»çƒ¦ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œç”¨babelç»™æˆ‘ä»¬æä¾›ä¸€ä¸ªæ–¹æ¡ˆï¼Œå»è§£å†³ã€‚</p>
<p>è¿™ä¸ªæ–¹æ¡ˆæ˜¯babel registerã€‚</p>
<h6 data-id="heading-6">å®‰è£…</h6>
<pre><code class="hljs language-shell copyable" lang="shell">npm install --save-dev @babel/core @babel/register
npm install --save-dev @babel/preset-env
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>ç„¶åé…ç½®ä¸€ä¸‹babelã€‚</p>
<h6 data-id="heading-7">å‘½ä»¤</h6>
<pre><code class="hljs language-shell copyable" lang="shell">./node_moudules/.bin/mocha --require @babel/register
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h6 data-id="heading-8">4. code coverage</h6>
<p>code coverageè¡¨ç¤ºæˆ‘ä»¬çš„æµ‹è¯•åˆ°åº•è¦†ç›–äº†æºæ–‡ä»¶çš„å“ªäº›ä»£ç ã€‚è¿™é‡Œæˆ‘ä»¬ä»‹ç»ä¸€ä¸ªæ–°çš„å·¥å…·å«åšnycï¼Œå®ƒå¯ä»¥åœ¨ä¸€ä¸ªå¤æ‚çš„æ–‡ä»¶ä¸­ï¼Œæµ‹è¯•å®ƒæœ€ç»ˆæµ‹è¯•çš„è¦†ç›–æ¯”ä¾‹ã€‚</p>
<ul>
<li>å®‰è£…</li>
</ul>
<pre><code class="hljs language-shell copyable" lang="shell">npm install --save-dev nyc
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>å‘½ä»¤</li>
</ul>
<pre><code class="hljs language-shell copyable" lang="shell">nyc ./node_modules/.bin/mocha
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>è¿™é‡Œæˆ‘ä»¬åŠ å…¥babelä½¿ç”¨ï¼š</p>
<ul>
<li>å®‰è£…ä¸¤ä¸ªæ’ä»¶</li>
</ul>
<pre><code class="hljs language-shell copyable" lang="shell">npm install --save-dev @istanbuljs/nys-config-babel
npm install --save-dev babel-plugin-istanbul
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>åœ¨package.jsonä¸­æ·»åŠ ä¸¤ä¸ªscripté¡¹</li>
</ul>
<pre><code class="hljs language-json copyable" lang="json">  <span class="hljs-string">"scripts"</span>: &#123;
    <span class="hljs-attr">"test"</span>: <span class="hljs-string">"mocha --require @babel/register"</span>,
    <span class="hljs-attr">"coverage"</span>: <span class="hljs-string">"nyc mocha"</span>
  &#125;,
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>æˆ‘ä»¬å†™æµ‹è¯•ç”¨ä¾‹çš„æ—¶å€™ç”¨<code>npm run coverage</code>,å†™ä¸šåŠ¡ä»£ç çš„æ—¶å€™ç”¨çš„æ˜¯<code>npm run test</code></li>
</ul>
<h3 data-id="heading-9">å¯¹html-parserè¿›è¡Œå•å…ƒæµ‹è¯•</h3>
<p>è¿™é‡Œè¦å®Œæˆçš„æ˜¯å¯¹æˆ‘ä¹‹å‰å†™ä¸€ä¸ªhtml-parseræ·»åŠ å•å…ƒæµ‹è¯•ã€‚</p>
<p>è¿™é‡Œå°†ä¹‹å‰çš„ä»£ç æ‹·è´ï¼Œæ–°å»ºä¸€ä¸ªç›®å½•ç„¶åé‡å¤å®Œæˆä¸Šè¿°æ“ä½œã€‚</p>
<p>ç„¶åæ‰§è¡Œå‘½ä»¤ï¼Œå°†å•å…ƒæµ‹è¯•è·‘èµ·æ¥ã€‚</p>
<p><strong>ç»“æœ</strong></p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8a9b6d8b157e4d3e85654d1d4329b9f4~tplv-k3u1fbpfcp-watermark.image" alt="img01.jpg" loading="lazy" referrerpolicy="no-referrer"></p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e0903d961c3c43539a4e8f799cb4225d~tplv-k3u1fbpfcp-watermark.image" alt="img02.jpg" loading="lazy" referrerpolicy="no-referrer">
ç”±ä¸Šå›¾å¯çŸ¥ï¼Œæµ‹è¯•ç”¨ä¾‹è¦†ç›–ç‡æ˜¯30%å¤šï¼Œä¸‹é¢æˆ‘ä»¬å°†é€šè¿‡ä¿®æ”¹ç”¨ä¾‹å®ç°90%ä»¥ä¸Šè¦†ç›–ã€‚</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// parser-test.js</span>
<span class="hljs-keyword">var</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">'assert'</span>);
<span class="hljs-keyword">import</span> &#123;parseHTML&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'../src/parser'</span>

describe(<span class="hljs-string">'parse html:'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
  it(<span class="hljs-string">'<a></a>'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<a></a>'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'a'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);
  it(<span class="hljs-string">'<a href="//time.geekbang.org"></a>'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<a href="//time.geekbang.org"></a>'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'a'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);
  it(<span class="hljs-string">'<a href></a>'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-comment">// 127-135</span>
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<a href></a>'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'a'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);
  it(<span class="hljs-string">'<a href id></a>'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-comment">// 135-143</span>
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<a href id></a>'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'a'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);
  it(<span class="hljs-string">'<a id=\'a\'></a>'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-comment">// 168-171</span>
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<a id=\'a\'></a>'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'a'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);
  it(<span class="hljs-string">'<a id=abc></a>'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-comment">// 171-175</span>
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<a id=abc></a>'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'a'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);
  it(<span class="hljs-string">'<a id="abc" href></a>'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-comment">// 230</span>
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<a id="abc" href></a>'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'a'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);
  it(<span class="hljs-string">'<a id=abc href></a>'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-comment">// 209-210</span>
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<a id=abc href></a>'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'a'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);
  it(<span class="hljs-string">'<a id=\'a\'/>'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-comment">// </span>
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<a id=\'a\'/>'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'a'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);

  it(<span class="hljs-string">'<a />'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-comment">// 130</span>
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<a />'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'a'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);
  it(<span class="hljs-string">'<A /> upper casse'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-comment">// 100</span>
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<A />'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'A'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);
  it(<span class="hljs-string">'<a/>'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-comment">// 98</span>
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<a/>'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'a'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);
  it(<span class="hljs-string">'<a id=a/>'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<a id=a/>'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'a'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);
  it(<span class="hljs-string">'<>'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<>'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].type, <span class="hljs-string">'text'</span>);
    assert.equal(tree.children[<span class="hljs-number">0</span>].content, <span class="hljs-string">'<>'</span>);
  &#125;);
&#125;)


<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>ç»“æœ</li>
</ul>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7985284b63b04094961afcd7805bb045~tplv-k3u1fbpfcp-watermark.image" alt="img03.jpg" loading="lazy" referrerpolicy="no-referrer"></p>
<p><strong>Vscode:è°ƒè¯•é…ç½®ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-json copyable" lang="json">&#123;
  <span class="hljs-comment">// ä½¿ç”¨ IntelliSense äº†è§£ç›¸å…³å±æ€§ã€‚ </span>
  <span class="hljs-comment">// æ‚¬åœä»¥æŸ¥çœ‹ç°æœ‰å±æ€§çš„æè¿°ã€‚</span>
  <span class="hljs-comment">// æ¬²äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—®: https://go.microsoft.com/fwlink/?linkid=830387</span>
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"0.2.0"</span>,
  <span class="hljs-attr">"configurations"</span>: [
    &#123;
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"node"</span>,
      <span class="hljs-attr">"request"</span>: <span class="hljs-string">"launch"</span>,
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"å¯åŠ¨ç¨‹åº"</span>,
      <span class="hljs-attr">"skipFiles"</span>: [
        <span class="hljs-string">"<node_internals>/**"</span>
      ],
      <span class="hljs-attr">"sourceMaps"</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">"runtimeArgs"</span>: [
        <span class="hljs-string">"--require"</span>, <span class="hljs-string">"@babel/register"</span>
      ],
      <span class="hljs-attr">"args"</span>: [],
      <span class="hljs-attr">"program"</span>: <span class="hljs-string">"$&#123;workspaceFolder&#125;/node_modules/.bin/mocha"</span>
    &#125;
  ]
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-10">å·¥å…·é“¾ä¸generatoré›†æˆ</h3>
<ul>
<li>generatorä¿®æ”¹ï¼Œpackage.jsonä¸­éœ€è¦å®‰è£…çš„ä¾èµ–ï¼Œå°†å•å…ƒæµ‹è¯•æ¨¡å—ä¹Ÿå¼•å…¥</li>
<li>generatorå¼•å…¥æ–‡ä»¶.babelrcã€.nycrc</li>
<li>å¼•å…¥simple-test.js ç®€å•æµ‹è¯•ç”¨ä¾‹å¯¹æ–‡ä»¶</li>
<li>webpack.configä¸­çš„ç›¸å…³babelé…ç½®çš„å¼•å…¥</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// generator/app/index.js</span>
<span class="hljs-keyword">var</span> Generator = <span class="hljs-built_in">require</span>(<span class="hljs-string">'yeoman-generator'</span>);

<span class="hljs-built_in">module</span>.exports = <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Generator</span> </span>&#123;
    <span class="hljs-comment">// The name `constructor` is important here</span>
    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">args, opts</span>)</span> &#123;
      <span class="hljs-comment">// Calling the super constructor is important so our generator is correctly set up</span>
      <span class="hljs-built_in">super</span>(args, opts);
    &#125;
    <span class="hljs-keyword">async</span> initPackge () &#123;
      <span class="hljs-keyword">const</span> answers = <span class="hljs-keyword">await</span> <span class="hljs-built_in">this</span>.prompt([
        &#123;
          <span class="hljs-attr">type</span>: <span class="hljs-string">"input"</span>,
          <span class="hljs-attr">name</span>: <span class="hljs-string">"name"</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">"Your project name"</span>,
          <span class="hljs-attr">default</span>: <span class="hljs-built_in">this</span>.appname <span class="hljs-comment">// Default to current folder name</span>
        &#125;,
        &#123;
          <span class="hljs-attr">type</span>: <span class="hljs-string">"input"</span>,
          <span class="hljs-attr">name</span>: <span class="hljs-string">"title"</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">"Your html title"</span>,
          <span class="hljs-attr">default</span>: <span class="hljs-built_in">this</span>.appname <span class="hljs-comment">// Default to current folder name</span>
        &#125;
      ]);
      <span class="hljs-keyword">const</span> pkgJson = &#123;
        <span class="hljs-string">"name"</span>: answers.name,
        <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,
        <span class="hljs-string">"description"</span>: <span class="hljs-string">""</span>,
        <span class="hljs-string">"main"</span>: <span class="hljs-string">"index.js"</span>,
        <span class="hljs-string">"scripts"</span>: &#123;
          <span class="hljs-string">"test"</span>: <span class="hljs-string">"./node_modules/.bin/mocha --require @babel/register"</span>,
          <span class="hljs-string">"coverage"</span>: <span class="hljs-string">"nyc ./node_modules/.bin/mocha"</span>,
          <span class="hljs-string">"build"</span>: <span class="hljs-string">"./node_modules/.bin/webpack"</span>,
        &#125;,
        <span class="hljs-string">"author"</span>: <span class="hljs-string">""</span>,
        <span class="hljs-string">"license"</span>: <span class="hljs-string">"ISC"</span>,
        <span class="hljs-string">"devDependencies"</span>: &#123;
        &#125;,
        <span class="hljs-string">"dependencies"</span>: &#123;
        &#125;
      &#125;;
      <span class="hljs-built_in">this</span>.fs.extendJSON(<span class="hljs-built_in">this</span>.destinationPath(<span class="hljs-string">'package.json'</span>), pkgJson);
      <span class="hljs-built_in">this</span>.npmInstall([<span class="hljs-string">'vue'</span>], &#123;<span class="hljs-string">'save-dev'</span>: <span class="hljs-literal">false</span>&#125;);
      <span class="hljs-built_in">this</span>.npmInstall([
        <span class="hljs-string">'webpack'</span>,
        <span class="hljs-string">'babel-loader'</span>,
        <span class="hljs-string">'@babel/core'</span>,
        <span class="hljs-string">'@babel/preset-env'</span>,
        <span class="hljs-string">'@babel/register'</span>,
        <span class="hljs-string">'@istanbuljs/nyc-config-babel'</span>,
        <span class="hljs-string">'babel-plugin-istanbul'</span>,
        <span class="hljs-string">'mocha'</span>,
        <span class="hljs-string">'nyc'</span>,
        <span class="hljs-string">'webpack-cli'</span>,
        <span class="hljs-string">'vue-loader'</span>, 
        <span class="hljs-string">'vue-template-compiler'</span>, 
        <span class="hljs-string">'vue-style-loader'</span>, 
        <span class="hljs-string">'css-loader'</span>,
        <span class="hljs-string">'copy-webpack-plugin'</span>
      ], &#123;<span class="hljs-string">'save-dev'</span>: <span class="hljs-literal">true</span>&#125;);
      <span class="hljs-built_in">this</span>.fs.copyTpl(
        <span class="hljs-built_in">this</span>.templatePath(<span class="hljs-string">'HelloWorld.vue'</span>),
        <span class="hljs-built_in">this</span>.destinationPath(<span class="hljs-string">'src/HelloWorld.vue'</span>),
        &#123;&#125;
      );
      <span class="hljs-built_in">this</span>.fs.copyTpl(
        <span class="hljs-built_in">this</span>.templatePath(<span class="hljs-string">'webpack.config.js'</span>),
        <span class="hljs-built_in">this</span>.destinationPath(<span class="hljs-string">'webpack.config.js'</span>),
        &#123;&#125;
      );
      <span class="hljs-built_in">this</span>.fs.copyTpl(
        <span class="hljs-built_in">this</span>.templatePath(<span class="hljs-string">'main.js'</span>),
        <span class="hljs-built_in">this</span>.destinationPath(<span class="hljs-string">'src/main.js'</span>),
        &#123;&#125;
      );
      <span class="hljs-built_in">this</span>.fs.copyTpl(
        <span class="hljs-built_in">this</span>.templatePath(<span class="hljs-string">'index.html'</span>),
        <span class="hljs-built_in">this</span>.destinationPath(<span class="hljs-string">'src/index.html'</span>),
        &#123; <span class="hljs-attr">title</span>: answers.title &#125;
      );
      <span class="hljs-built_in">this</span>.fs.copyTpl(
        <span class="hljs-built_in">this</span>.templatePath(<span class="hljs-string">'.babelrc'</span>),
        <span class="hljs-built_in">this</span>.destinationPath(<span class="hljs-string">'.babelrc'</span>)
      );
      <span class="hljs-built_in">this</span>.fs.copyTpl(
        <span class="hljs-built_in">this</span>.templatePath(<span class="hljs-string">'.nycrc'</span>),
        <span class="hljs-built_in">this</span>.destinationPath(<span class="hljs-string">'.nycrc'</span>)
      );
      <span class="hljs-built_in">this</span>.fs.copyTpl(
        <span class="hljs-built_in">this</span>.templatePath(<span class="hljs-string">'simple-test.js'</span>),
        <span class="hljs-built_in">this</span>.destinationPath(<span class="hljs-string">'test/simple-test.js'</span>)
      );
    &#125;
&#125;;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-11">å‚è€ƒé™„å½•</h3>
<p><a href="https://mochajs.org/" target="_blank" rel="nofollow noopener noreferrer">mocha</a></p>
<h3 data-id="heading-12">åè®°</h3>
<p>æˆ‘æ˜¯å½¤çˆ±ï¼Œä¸€ä¸ªåœ¨æ²‰æººäºå¯‚å¯ä»£ç æµ·æ´‹é‡Œçš„å‰ç«¯ç¨‹åºå‘˜ğŸ‘¨ğŸ»â€ğŸ’»</p>
<p>æ¬¢è¿å„ä½å¤§ä½¬çš„èµæ•™ğŸ™</p>
<p>æœŸå¾…ä¸åŒæ ·åœ¨åŠªåŠ›æ‘¸ç´¢çš„å°ä¼™ä¼´ä»¬äº¤æµğŸ™Œ</p></div>  
</div>
            