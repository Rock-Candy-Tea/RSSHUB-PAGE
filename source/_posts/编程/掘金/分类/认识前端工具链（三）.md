
---
title: '认识前端工具链（三）'
categories: 
 - 编程
 - 掘金
 - 分类
headimg: 'https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8a9b6d8b157e4d3e85654d1d4329b9f4~tplv-k3u1fbpfcp-watermark.image'
author: 掘金
comments: false
date: Sat, 05 Jun 2021 23:41:11 GMT
thumbnail: 'https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8a9b6d8b157e4d3e85654d1d4329b9f4~tplv-k3u1fbpfcp-watermark.image'
---

<div>   
<div class="markdown-body"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><h3 data-id="heading-0">前端工具链综述</h3>
<p>工具链在前端领域扮演着很重要的角色。如何<strong>为Javascript生产环境构建去构建一套工具链，来覆盖前端各个开发环节</strong>，是我们需要了解学习的。而一套高效的工具链体系，对于每一个前端团队来说都有着至关重要的意义，它不仅可以提高团队的开发效率，还可以在一定程度上规范前端开发的各个环节，进而为团队节省一些人员协作和调整的成本。</p>
<p>综上，<strong>前端工具链旨在友好开发体验，提升开发团队开发效率</strong>。</p>
<p>而要构建一个工具链，首先我们先要了解在前端开发领域有哪几个环节：</p>
<ul>
<li>项目初始化</li>
<li>开发、调试、构建</li>
<li>单元测试</li>
<li>发布</li>
</ul>
<p>所以一个前端工具链，它大致都会包含上面这一系列功能。而一个典型的示例就类似于下面：</p>
<ul>
<li>Yeoman</li>
<li>Webpack</li>
<li>Mocha</li>
<li>发布系统</li>
</ul>
<p>我们可以将进而将它总结成下面几块：</p>
<ul>
<li>脚手架</li>
<li>构建⼯具</li>
<li><strong>测试工具</strong></li>
<li>发布系统</li>
</ul>
<p>而上了规模的团队也都会针对以上的流程，制定一个工具链，并将它包装成一个黑盒形式，让程序员在每个环节只需要运行简单命令行，即可进入开发流程。</p>
<p>而从整体上了解工具链相关的知识体系，熟悉其大致结构以及运作方式，也是十分重要的。</p>
<p>所以，下面这里是本人将对于工具链相关基础知识的一些整理。这一篇我们首先来介绍的是，工具链中的<strong>测试工具。</strong></p>
<p>工具链系列文章指路：</p>
<p><a href="https://juejin.cn/post/6965468072509440014" target="_blank">认识前端工具链（一）</a></p>
<p><a href="https://juejin.cn/post/6968056636522889223" target="_blank">认识前端工具链（二）</a></p>
<h3 data-id="heading-1">单元测试工具</h3>
<p>测试工具是前端工具链里非常重要的一环，对于大部分的开源项目来说，测试都是一个必需品。如果我们某个项目是一个被高度复用的东西，那测试的收益也是很高的，所以除非是一次性使用的代码，我们还都是要使用单元测试 。</p>
<p>下面介绍一些当前最流行的测试工具和一些配套设施：</p>
<p>这里有流行的两个库一个是<strong>Mocha</strong>，一个是<strong>Jest</strong></p>
<h3 data-id="heading-2">Mocha</h3>
<p>Mocha最早是一个针对Node.js的一个测试框架，它默认在使用Webpoack之前，它都是不支持import export的，这里我们例子里使用的是require。</p>
<h5 data-id="heading-3">1. 安装</h5>
<pre><code class="hljs language-shell copyable" lang="shell">npm install -g mocha
npm install --save-dev mocha
<span class="copy-code-btn">复制代码</span></code></pre>
<h5 data-id="heading-4">2.基本使用</h5>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">//test/test.js</span>
<span class="hljs-keyword">var</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">'assert'</span>);
<span class="hljs-keyword">var</span> add = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../add.js'</span>)

describe(<span class="hljs-string">'add function testing'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
  it(<span class="hljs-string">'1 + 2 shuold be 3'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    assert.equal(add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>), <span class="hljs-number">3</span>);
  &#125;);
  it(<span class="hljs-string">'-5 + 2 shuold be -3'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    assert.equal(add(-<span class="hljs-number">5</span>, <span class="hljs-number">2</span>), -<span class="hljs-number">3</span>);
  &#125;);
&#125;)

<span class="copy-code-btn">复制代码</span></code></pre>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// add.js</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span> (<span class="hljs-params">a, b</span>) </span>&#123;
  <span class="hljs-keyword">return</span> a + b
&#125;
<span class="hljs-built_in">module</span>.exports = add
<span class="copy-code-btn">复制代码</span></code></pre>
<h5 data-id="heading-5">3.引入babel</h5>
<p>这里我们引入babel来解决一下add.js必须用node的方式module.exports的问题。而简单的方法，我们可以用webpack项目，然后在dist里面去做单元测试，但从理论上考虑，测试这个环节依赖于build这个环节，是一件不太好的做法。另外，这对后面做code coverage话以上面这种方式的话，会带来不必要的麻烦。</p>
<p>所以我们这里用babel给我们提供一个方案，去解决。</p>
<p>这个方案是babel register。</p>
<h6 data-id="heading-6">安装</h6>
<pre><code class="hljs language-shell copyable" lang="shell">npm install --save-dev @babel/core @babel/register
npm install --save-dev @babel/preset-env
<span class="copy-code-btn">复制代码</span></code></pre>
<p>然后配置一下babel。</p>
<h6 data-id="heading-7">命令</h6>
<pre><code class="hljs language-shell copyable" lang="shell">./node_moudules/.bin/mocha --require @babel/register
<span class="copy-code-btn">复制代码</span></code></pre>
<h6 data-id="heading-8">4. code coverage</h6>
<p>code coverage表示我们的测试到底覆盖了源文件的哪些代码。这里我们介绍一个新的工具叫做nyc，它可以在一个复杂的文件中，测试它最终测试的覆盖比例。</p>
<ul>
<li>安装</li>
</ul>
<pre><code class="hljs language-shell copyable" lang="shell">npm install --save-dev nyc
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li>命令</li>
</ul>
<pre><code class="hljs language-shell copyable" lang="shell">nyc ./node_modules/.bin/mocha
<span class="copy-code-btn">复制代码</span></code></pre>
<p>这里我们加入babel使用：</p>
<ul>
<li>安装两个插件</li>
</ul>
<pre><code class="hljs language-shell copyable" lang="shell">npm install --save-dev @istanbuljs/nys-config-babel
npm install --save-dev babel-plugin-istanbul
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li>在package.json中添加两个script项</li>
</ul>
<pre><code class="hljs language-json copyable" lang="json">  <span class="hljs-string">"scripts"</span>: &#123;
    <span class="hljs-attr">"test"</span>: <span class="hljs-string">"mocha --require @babel/register"</span>,
    <span class="hljs-attr">"coverage"</span>: <span class="hljs-string">"nyc mocha"</span>
  &#125;,
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li>我们写测试用例的时候用<code>npm run coverage</code>,写业务代码的时候用的是<code>npm run test</code></li>
</ul>
<h3 data-id="heading-9">对html-parser进行单元测试</h3>
<p>这里要完成的是对我之前写一个html-parser添加单元测试。</p>
<p>这里将之前的代码拷贝，新建一个目录然后重复完成上述操作。</p>
<p>然后执行命令，将单元测试跑起来。</p>
<p><strong>结果</strong></p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8a9b6d8b157e4d3e85654d1d4329b9f4~tplv-k3u1fbpfcp-watermark.image" alt="img01.jpg" loading="lazy" referrerpolicy="no-referrer"></p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e0903d961c3c43539a4e8f799cb4225d~tplv-k3u1fbpfcp-watermark.image" alt="img02.jpg" loading="lazy" referrerpolicy="no-referrer">
由上图可知，测试用例覆盖率是30%多，下面我们将通过修改用例实现90%以上覆盖。</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// parser-test.js</span>
<span class="hljs-keyword">var</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">'assert'</span>);
<span class="hljs-keyword">import</span> &#123;parseHTML&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'../src/parser'</span>

describe(<span class="hljs-string">'parse html:'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
  it(<span class="hljs-string">'<a></a>'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<a></a>'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'a'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);
  it(<span class="hljs-string">'<a href="//time.geekbang.org"></a>'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<a href="//time.geekbang.org"></a>'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'a'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);
  it(<span class="hljs-string">'<a href></a>'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-comment">// 127-135</span>
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<a href></a>'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'a'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);
  it(<span class="hljs-string">'<a href id></a>'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-comment">// 135-143</span>
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<a href id></a>'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'a'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);
  it(<span class="hljs-string">'<a id=\'a\'></a>'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-comment">// 168-171</span>
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<a id=\'a\'></a>'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'a'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);
  it(<span class="hljs-string">'<a id=abc></a>'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-comment">// 171-175</span>
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<a id=abc></a>'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'a'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);
  it(<span class="hljs-string">'<a id="abc" href></a>'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-comment">// 230</span>
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<a id="abc" href></a>'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'a'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);
  it(<span class="hljs-string">'<a id=abc href></a>'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-comment">// 209-210</span>
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<a id=abc href></a>'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'a'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);
  it(<span class="hljs-string">'<a id=\'a\'/>'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-comment">// </span>
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<a id=\'a\'/>'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'a'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);

  it(<span class="hljs-string">'<a />'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-comment">// 130</span>
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<a />'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'a'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);
  it(<span class="hljs-string">'<A /> upper casse'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-comment">// 100</span>
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<A />'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'A'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);
  it(<span class="hljs-string">'<a/>'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-comment">// 98</span>
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<a/>'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'a'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);
  it(<span class="hljs-string">'<a id=a/>'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<a id=a/>'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].tagName, <span class="hljs-string">'a'</span>);
    assert.equal(tree.children.length, <span class="hljs-number">1</span>);
  &#125;);
  it(<span class="hljs-string">'<>'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">let</span> tree = parseHTML(<span class="hljs-string">'<>'</span>)
    assert.equal(tree.children[<span class="hljs-number">0</span>].type, <span class="hljs-string">'text'</span>);
    assert.equal(tree.children[<span class="hljs-number">0</span>].content, <span class="hljs-string">'<>'</span>);
  &#125;);
&#125;)


<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li>结果</li>
</ul>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7985284b63b04094961afcd7805bb045~tplv-k3u1fbpfcp-watermark.image" alt="img03.jpg" loading="lazy" referrerpolicy="no-referrer"></p>
<p><strong>Vscode:调试配置示例</strong></p>
<pre><code class="hljs language-json copyable" lang="json">&#123;
  <span class="hljs-comment">// 使用 IntelliSense 了解相关属性。 </span>
  <span class="hljs-comment">// 悬停以查看现有属性的描述。</span>
  <span class="hljs-comment">// 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387</span>
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"0.2.0"</span>,
  <span class="hljs-attr">"configurations"</span>: [
    &#123;
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"node"</span>,
      <span class="hljs-attr">"request"</span>: <span class="hljs-string">"launch"</span>,
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"启动程序"</span>,
      <span class="hljs-attr">"skipFiles"</span>: [
        <span class="hljs-string">"<node_internals>/**"</span>
      ],
      <span class="hljs-attr">"sourceMaps"</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">"runtimeArgs"</span>: [
        <span class="hljs-string">"--require"</span>, <span class="hljs-string">"@babel/register"</span>
      ],
      <span class="hljs-attr">"args"</span>: [],
      <span class="hljs-attr">"program"</span>: <span class="hljs-string">"$&#123;workspaceFolder&#125;/node_modules/.bin/mocha"</span>
    &#125;
  ]
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-10">工具链与generator集成</h3>
<ul>
<li>generator修改，package.json中需要安装的依赖，将单元测试模块也引入</li>
<li>generator引入文件.babelrc、.nycrc</li>
<li>引入simple-test.js 简单测试用例对文件</li>
<li>webpack.config中的相关babel配置的引入</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// generator/app/index.js</span>
<span class="hljs-keyword">var</span> Generator = <span class="hljs-built_in">require</span>(<span class="hljs-string">'yeoman-generator'</span>);

<span class="hljs-built_in">module</span>.exports = <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Generator</span> </span>&#123;
    <span class="hljs-comment">// The name `constructor` is important here</span>
    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">args, opts</span>)</span> &#123;
      <span class="hljs-comment">// Calling the super constructor is important so our generator is correctly set up</span>
      <span class="hljs-built_in">super</span>(args, opts);
    &#125;
    <span class="hljs-keyword">async</span> initPackge () &#123;
      <span class="hljs-keyword">const</span> answers = <span class="hljs-keyword">await</span> <span class="hljs-built_in">this</span>.prompt([
        &#123;
          <span class="hljs-attr">type</span>: <span class="hljs-string">"input"</span>,
          <span class="hljs-attr">name</span>: <span class="hljs-string">"name"</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">"Your project name"</span>,
          <span class="hljs-attr">default</span>: <span class="hljs-built_in">this</span>.appname <span class="hljs-comment">// Default to current folder name</span>
        &#125;,
        &#123;
          <span class="hljs-attr">type</span>: <span class="hljs-string">"input"</span>,
          <span class="hljs-attr">name</span>: <span class="hljs-string">"title"</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">"Your html title"</span>,
          <span class="hljs-attr">default</span>: <span class="hljs-built_in">this</span>.appname <span class="hljs-comment">// Default to current folder name</span>
        &#125;
      ]);
      <span class="hljs-keyword">const</span> pkgJson = &#123;
        <span class="hljs-string">"name"</span>: answers.name,
        <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,
        <span class="hljs-string">"description"</span>: <span class="hljs-string">""</span>,
        <span class="hljs-string">"main"</span>: <span class="hljs-string">"index.js"</span>,
        <span class="hljs-string">"scripts"</span>: &#123;
          <span class="hljs-string">"test"</span>: <span class="hljs-string">"./node_modules/.bin/mocha --require @babel/register"</span>,
          <span class="hljs-string">"coverage"</span>: <span class="hljs-string">"nyc ./node_modules/.bin/mocha"</span>,
          <span class="hljs-string">"build"</span>: <span class="hljs-string">"./node_modules/.bin/webpack"</span>,
        &#125;,
        <span class="hljs-string">"author"</span>: <span class="hljs-string">""</span>,
        <span class="hljs-string">"license"</span>: <span class="hljs-string">"ISC"</span>,
        <span class="hljs-string">"devDependencies"</span>: &#123;
        &#125;,
        <span class="hljs-string">"dependencies"</span>: &#123;
        &#125;
      &#125;;
      <span class="hljs-built_in">this</span>.fs.extendJSON(<span class="hljs-built_in">this</span>.destinationPath(<span class="hljs-string">'package.json'</span>), pkgJson);
      <span class="hljs-built_in">this</span>.npmInstall([<span class="hljs-string">'vue'</span>], &#123;<span class="hljs-string">'save-dev'</span>: <span class="hljs-literal">false</span>&#125;);
      <span class="hljs-built_in">this</span>.npmInstall([
        <span class="hljs-string">'webpack'</span>,
        <span class="hljs-string">'babel-loader'</span>,
        <span class="hljs-string">'@babel/core'</span>,
        <span class="hljs-string">'@babel/preset-env'</span>,
        <span class="hljs-string">'@babel/register'</span>,
        <span class="hljs-string">'@istanbuljs/nyc-config-babel'</span>,
        <span class="hljs-string">'babel-plugin-istanbul'</span>,
        <span class="hljs-string">'mocha'</span>,
        <span class="hljs-string">'nyc'</span>,
        <span class="hljs-string">'webpack-cli'</span>,
        <span class="hljs-string">'vue-loader'</span>, 
        <span class="hljs-string">'vue-template-compiler'</span>, 
        <span class="hljs-string">'vue-style-loader'</span>, 
        <span class="hljs-string">'css-loader'</span>,
        <span class="hljs-string">'copy-webpack-plugin'</span>
      ], &#123;<span class="hljs-string">'save-dev'</span>: <span class="hljs-literal">true</span>&#125;);
      <span class="hljs-built_in">this</span>.fs.copyTpl(
        <span class="hljs-built_in">this</span>.templatePath(<span class="hljs-string">'HelloWorld.vue'</span>),
        <span class="hljs-built_in">this</span>.destinationPath(<span class="hljs-string">'src/HelloWorld.vue'</span>),
        &#123;&#125;
      );
      <span class="hljs-built_in">this</span>.fs.copyTpl(
        <span class="hljs-built_in">this</span>.templatePath(<span class="hljs-string">'webpack.config.js'</span>),
        <span class="hljs-built_in">this</span>.destinationPath(<span class="hljs-string">'webpack.config.js'</span>),
        &#123;&#125;
      );
      <span class="hljs-built_in">this</span>.fs.copyTpl(
        <span class="hljs-built_in">this</span>.templatePath(<span class="hljs-string">'main.js'</span>),
        <span class="hljs-built_in">this</span>.destinationPath(<span class="hljs-string">'src/main.js'</span>),
        &#123;&#125;
      );
      <span class="hljs-built_in">this</span>.fs.copyTpl(
        <span class="hljs-built_in">this</span>.templatePath(<span class="hljs-string">'index.html'</span>),
        <span class="hljs-built_in">this</span>.destinationPath(<span class="hljs-string">'src/index.html'</span>),
        &#123; <span class="hljs-attr">title</span>: answers.title &#125;
      );
      <span class="hljs-built_in">this</span>.fs.copyTpl(
        <span class="hljs-built_in">this</span>.templatePath(<span class="hljs-string">'.babelrc'</span>),
        <span class="hljs-built_in">this</span>.destinationPath(<span class="hljs-string">'.babelrc'</span>)
      );
      <span class="hljs-built_in">this</span>.fs.copyTpl(
        <span class="hljs-built_in">this</span>.templatePath(<span class="hljs-string">'.nycrc'</span>),
        <span class="hljs-built_in">this</span>.destinationPath(<span class="hljs-string">'.nycrc'</span>)
      );
      <span class="hljs-built_in">this</span>.fs.copyTpl(
        <span class="hljs-built_in">this</span>.templatePath(<span class="hljs-string">'simple-test.js'</span>),
        <span class="hljs-built_in">this</span>.destinationPath(<span class="hljs-string">'test/simple-test.js'</span>)
      );
    &#125;
&#125;;
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-11">参考附录</h3>
<p><a href="https://mochajs.org/" target="_blank" rel="nofollow noopener noreferrer">mocha</a></p>
<h3 data-id="heading-12">后记</h3>
<p>我是彤爱，一个在沉溺于寂寞代码海洋里的前端程序员👨🏻‍💻</p>
<p>欢迎各位大佬的赐教🙏</p>
<p>期待与同样在努力摸索的小伙伴们交流🙌</p></div>  
</div>
            