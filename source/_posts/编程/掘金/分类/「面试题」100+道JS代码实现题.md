
---
title: '「面试题」100+道JS代码实现题'
categories: 
 - 编程
 - 掘金
 - 分类
headimg: 'https://picsum.photos/400/300?random=3670'
author: 掘金
comments: false
date: Sun, 22 Aug 2021 16:52:46 GMT
thumbnail: 'https://picsum.photos/400/300?random=3670'
---

<div>   
<div class="markdown-body"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><h2 data-id="heading-0">前言</h2>
<p>前几个星期在找工作，刷了100多道题目，在这里总结一下</p>
<h2 data-id="heading-1">1. 实现curry</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-curry" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-curry" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">const</span> join = <span class="hljs-function">(<span class="hljs-params">a, b, c</span>) =></span> &#123;
   <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;a&#125;</span>_<span class="hljs-subst">$&#123;b&#125;</span>_<span class="hljs-subst">$&#123;c&#125;</span>`</span>
&#125;

<span class="hljs-keyword">const</span> curriedJoin = curry(join)

curriedJoin(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>) <span class="hljs-comment">// '1_2_3'</span>

curriedJoin(<span class="hljs-number">1</span>)(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>) <span class="hljs-comment">// '1_2_3'</span>

curriedJoin(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)(<span class="hljs-number">3</span>) <span class="hljs-comment">// '1_2_3'</span>

<span class="hljs-comment">// 实现curry</span>
<span class="hljs-keyword">const</span> curry = <span class="hljs-function">(<span class="hljs-params">fn, ...initParams</span>) =></span> &#123;
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">...args</span>) =></span> &#123;
    <span class="hljs-keyword">return</span> (<span class="hljs-function">(<span class="hljs-params">params</span>) =></span> &#123;
      <span class="hljs-keyword">return</span> params.length >= fn.length ? fn(...params) : curry(fn, ...params) 
    &#125;)([ ...initParams, ...args])
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-2">2. 实现支持placeholder的curry()</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-curry-with-placeholder" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-curry-with-placeholder" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * 合并参数（替换占位符）
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">merge</span>(<span class="hljs-params">params1, params2</span>) </span>&#123;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < params1.length; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">if</span> (params2.length) &#123;
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> params1[i] === <span class="hljs-string">'symbol'</span>) &#123;
        <span class="hljs-keyword">const</span> first = params2.shift()
        params1[i] = first
      &#125;
    &#125; <span class="hljs-keyword">else</span> &#123;
        <span class="hljs-keyword">break</span>
    &#125;
  &#125;
  <span class="hljs-keyword">return</span> [...params1, ...params2]
&#125;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123; (...args: any[]) => any &#125;</span> <span class="hljs-variable">fn</span></span>
 * <span class="hljs-doctag">@returns <span class="hljs-type">&#123; (...args: any[]) => any &#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">curry</span>(<span class="hljs-params">fn, ...initParams</span>) </span>&#123;
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">...args</span>) =></span> &#123;
    <span class="hljs-keyword">const</span> params = merge([...initParams], [...args])
    <span class="hljs-keyword">return</span> (<span class="hljs-function">(<span class="hljs-params">params</span>) =></span> &#123;
      params = params.slice(<span class="hljs-number">0</span>, fn.length)
      <span class="hljs-comment">// 判断是否可以执行</span>
      <span class="hljs-keyword">const</span> isCall = params.filter(<span class="hljs-function">(<span class="hljs-params">item</span>) =></span> <span class="hljs-keyword">typeof</span> item !== <span class="hljs-string">'symbol'</span>).length >= fn.length
      <span class="hljs-keyword">return</span> isCall ? fn(...params) : curry(fn, ...params) 
    &#125;)(params)
  &#125;
&#125;

curry.placeholder = <span class="hljs-built_in">Symbol</span>()
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-3">3. 实现Array.prototype.flat()</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-Array-prototype.flat" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-Array-prototype.flat" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123; Array &#125;</span> <span class="hljs-variable">arr</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123; number &#125;</span> <span class="hljs-variable">depth</span></span>
 * <span class="hljs-doctag">@returns <span class="hljs-type">&#123; Array &#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">flat</span>(<span class="hljs-params">arr, depth = <span class="hljs-number">1</span></span>) </span>&#123;
  <span class="hljs-keyword">const</span> result = []
  <span class="hljs-keyword">if</span> (depth) &#123;
    <span class="hljs-keyword">let</span> isExistArray = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < arr.length; i += <span class="hljs-number">1</span>) &#123;
      <span class="hljs-keyword">const</span> item = arr[i]
      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(item)) &#123;
        isExistArray = <span class="hljs-literal">true</span>
        result.push(...item)
      &#125; <span class="hljs-keyword">else</span> &#123;
        result.push(item)
      &#125;
    &#125;
    <span class="hljs-keyword">if</span> (isExistArray) &#123;
      <span class="hljs-keyword">return</span> flat(result, depth - <span class="hljs-number">1</span>)
    &#125; <span class="hljs-keyword">else</span> &#123;
      <span class="hljs-keyword">return</span> result
    &#125;
  &#125; <span class="hljs-keyword">else</span> &#123;
    <span class="hljs-keyword">return</span> arr
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-4">4. 手写throttle()</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-basic-throttle" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-basic-throttle" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Function&#125;</span> <span class="hljs-variable">func</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number&#125;</span> <span class="hljs-variable">wait</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">throttle</span>(<span class="hljs-params">func, wait</span>) </span>&#123;
  <span class="hljs-keyword">let</span> timer
  <span class="hljs-keyword">let</span> lastArgs
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">...param</span>) </span>&#123;
    <span class="hljs-keyword">if</span> (!timer) &#123;
      func.call(<span class="hljs-built_in">this</span>, ...param)
      timer = <span class="hljs-built_in">window</span>.setTimeout(<span class="hljs-function">() =></span> &#123;
        lastArgs && func.call(<span class="hljs-built_in">this</span>, ...lastArgs)
        lastArgs = <span class="hljs-literal">null</span>
        timer = <span class="hljs-literal">null</span>
      &#125;, wait)
    &#125; <span class="hljs-keyword">else</span> &#123;
      lastArgs = [...param]
    &#125;
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-5">6. 手写debounce()</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-basic-debounce" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-basic-debounce" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Function&#125;</span> <span class="hljs-variable">func</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number&#125;</span> <span class="hljs-variable">wait</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">debounce</span>(<span class="hljs-params">func, wait</span>) </span>&#123;
  <span class="hljs-keyword">let</span> timer
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">...param</span>) </span>&#123;
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clear</span>(<span class="hljs-params"></span>) </span>&#123;
      <span class="hljs-built_in">window</span>.clearTimeout(timer)
      timer = <span class="hljs-literal">null</span>
    &#125;
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">run</span>(<span class="hljs-params"></span>) </span>&#123;
      timer = <span class="hljs-built_in">window</span>.setTimeout(<span class="hljs-function">() =></span> &#123;
        func.call(<span class="hljs-built_in">this</span>, ...param)
        clear()
      &#125;, wait)
    &#125;
    <span class="hljs-keyword">if</span> (!timer) &#123;
      run()
    &#125; <span class="hljs-keyword">else</span> &#123;
      clear()
      run()
    &#125;
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-6">8. 手写shuffle()随机打乱一个数组（实现一个洗牌算法）</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fcan-you-shuffle-an-array" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/can-you-shuffle-an-array" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p>常规的<code>const randomIndex = Math.floor(Math.random() * arr.length)</code>生成随机索引的方式不够随机</p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">/**
  * <span class="hljs-doctag">@param <span class="hljs-type">&#123;any[]&#125;</span> <span class="hljs-variable">arr</span></span>
  */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">shuffle</span>(<span class="hljs-params">arr</span>) </span>&#123;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < arr.length; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">const</span> j = i + <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * (arr.length - <span class="hljs-number">1</span>));
    [arr[i], arr[j]] = [arr[j], arr[i]]
  &#125;
  <span class="hljs-keyword">return</span> arr
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-7">9. 解密消息</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fdecode-message" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/decode-message" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string[][]&#125;</span> <span class="hljs-variable">message</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;string&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">decode</span>(<span class="hljs-params">message</span>) </span>&#123;
  <span class="hljs-comment">// 为空的判断</span>
  <span class="hljs-keyword">if</span> (!message.length || !message[<span class="hljs-number">0</span>].length) &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>
  &#125;

  <span class="hljs-keyword">let</span> power = <span class="hljs-literal">true</span>
  <span class="hljs-keyword">let</span> str = <span class="hljs-string">''</span>
  <span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>
  <span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>
  <span class="hljs-keyword">let</span> direction = <span class="hljs-string">'LowerRight'</span> <span class="hljs-comment">// LowerRight | UpperRight</span>
  <span class="hljs-keyword">let</span> w = message[<span class="hljs-number">0</span>].length
  <span class="hljs-keyword">let</span> h = message.length

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lowerRight</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">if</span> (i + <span class="hljs-number">1</span> < h && j + <span class="hljs-number">1</span> < w) &#123;
      i = i + <span class="hljs-number">1</span>
      j = j + <span class="hljs-number">1</span>
    &#125; <span class="hljs-keyword">else</span> &#123;
      <span class="hljs-keyword">if</span> (i - <span class="hljs-number">1</span> > <span class="hljs-number">0</span> && j + <span class="hljs-number">1</span> < w) &#123;
        direction = <span class="hljs-string">'UpperRight'</span>
        i = i - <span class="hljs-number">1</span>
        j = j + <span class="hljs-number">1</span>
      &#125; <span class="hljs-keyword">else</span> &#123;
        power = <span class="hljs-literal">false</span>
      &#125;
    &#125;
  &#125;

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">upperRight</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">if</span> (i - <span class="hljs-number">1</span> > <span class="hljs-number">0</span> && j + <span class="hljs-number">1</span> < w) &#123;
      i = i - <span class="hljs-number">1</span>
      j = j + <span class="hljs-number">1</span>
    &#125; <span class="hljs-keyword">else</span> &#123;
      <span class="hljs-keyword">if</span> (i + <span class="hljs-number">1</span> < h && j + <span class="hljs-number">1</span> < w) &#123;
        direction = <span class="hljs-string">'LowerRight'</span>
        i = i + <span class="hljs-number">1</span>
        j = j + <span class="hljs-number">1</span>
      &#125; <span class="hljs-keyword">else</span> &#123;
        power = <span class="hljs-literal">false</span>
      &#125;
    &#125;
  &#125;

  <span class="hljs-keyword">while</span> (power) &#123;
    str += message[i][j]
    <span class="hljs-keyword">if</span> (direction === <span class="hljs-string">'LowerRight'</span>) &#123;
      lowerRight()
    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (direction === <span class="hljs-string">'UpperRight'</span>) &#123;
      upperRight()
    &#125;
  &#125;
  <span class="hljs-keyword">return</span> str
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-8">10. 找出第一个不良版本</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Ffirst-bad-version" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/first-bad-version" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p>简单的二分查找</p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/*
 type TypIsBad = (version: number) => boolean
 */</span>

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;TypIsBad&#125;</span> </span>isBad 
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">firstBadVersion</span>(<span class="hljs-params">isBad</span>) </span>&#123;
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">version</span>) =></span> &#123;
    <span class="hljs-keyword">let</span> start = <span class="hljs-number">0</span>
    <span class="hljs-keyword">let</span> end = version
    <span class="hljs-keyword">let</span> result = isBad(version) ? version : -<span class="hljs-number">1</span>

    <span class="hljs-keyword">while</span> (end >= start) &#123;
      <span class="hljs-keyword">let</span> midd = <span class="hljs-built_in">Math</span>.floor((start + end) / <span class="hljs-number">2</span>)
      <span class="hljs-keyword">if</span> (isBad(midd)) &#123;
        <span class="hljs-comment">// 如果是坏的</span>
        end = midd - <span class="hljs-number">1</span>
        result = midd
      &#125; <span class="hljs-keyword">else</span> &#123;
        <span class="hljs-comment">// 如果是好的</span>
        start = midd + <span class="hljs-number">1</span>
      &#125;
    &#125;
    <span class="hljs-keyword">return</span> result
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-9">11. 什么是Composition?实现pipe()</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fwhat-is-composition-create-a-pipe" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/what-is-composition-create-a-pipe" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p>实现一个管道函数</p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Array<(arg: any) => any>&#125;</span> </span>funcs 
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;(arg: any) => any&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pipe</span>(<span class="hljs-params">funcs</span>) </span>&#123;
<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">arg</span>) </span>&#123;
<span class="hljs-keyword">let</span> param = arg
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < funcs.length; i += <span class="hljs-number">1</span>) &#123;
<span class="hljs-keyword">const</span> func = funcs[i]
param = func(param)
&#125;
<span class="hljs-keyword">return</span> param
&#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-10">13. 利用栈(Stack)创建队列(Queue)</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-a-queue-by-using-stack" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-a-queue-by-using-stack" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p>可以用两个Stack实现Queue</p>
</blockquote>
<blockquote>
<p>更简单的方法是，每一次enqueue时都反着存。</p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts">
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Stack</span> </span>&#123;
  <span class="hljs-title">constructor</span> (<span class="hljs-params"></span>) &#123;
    <span class="hljs-built_in">this</span>.stack = []
  &#125;
  <span class="hljs-function"><span class="hljs-title">push</span>(<span class="hljs-params">element</span>)</span> &#123;
    <span class="hljs-built_in">this</span>.stack.push(element)
  &#125;
  <span class="hljs-function"><span class="hljs-title">peek</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.stack[<span class="hljs-built_in">this</span>.stack.length - <span class="hljs-number">1</span>]
  &#125;
  <span class="hljs-function"><span class="hljs-title">pop</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.stack.pop()
  &#125;
  <span class="hljs-function"><span class="hljs-title">size</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.stack.length
  &#125;
&#125;

<span class="hljs-comment">// 使用Stack实现Queue</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Queue</span> </span>&#123;
  <span class="hljs-title">constructor</span> (<span class="hljs-params"></span>) &#123;
    <span class="hljs-built_in">this</span>.enqueueStack = <span class="hljs-keyword">new</span> Stack()
    <span class="hljs-built_in">this</span>.dequeueStack = <span class="hljs-keyword">new</span> Stack()
  &#125;

  _enqueueSyncDequeue () &#123;
    <span class="hljs-keyword">const</span> dequeueTemp = <span class="hljs-keyword">new</span> Stack()
    <span class="hljs-keyword">const</span> enqueueTemp = <span class="hljs-keyword">new</span> Stack()
    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">this</span>.enqueueStack.size()) &#123;
      <span class="hljs-keyword">const</span> p = <span class="hljs-built_in">this</span>.enqueueStack.pop()
      dequeueTemp.push(p)
      enqueueTemp.push(p)
    &#125;
    <span class="hljs-keyword">while</span> (enqueueTemp.size()) &#123;
      <span class="hljs-built_in">this</span>.enqueueStack.push(enqueueTemp.pop())
    &#125;
    <span class="hljs-built_in">this</span>.dequeueStack = dequeueTemp
  &#125;

  _dequeueSyncEnqueue () &#123;
    <span class="hljs-keyword">const</span> dequeueTemp = <span class="hljs-keyword">new</span> Stack()
    <span class="hljs-keyword">const</span> enqueueTemp = <span class="hljs-keyword">new</span> Stack()
    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">this</span>.dequeueStack.size()) &#123;
      <span class="hljs-keyword">const</span> p = <span class="hljs-built_in">this</span>.dequeueStack.pop()
      dequeueTemp.push(p)
      enqueueTemp.push(p)
    &#125;
    <span class="hljs-keyword">while</span> (dequeueTemp.size()) &#123;
      <span class="hljs-built_in">this</span>.dequeueStack.push(dequeueTemp.pop())
    &#125;
    <span class="hljs-built_in">this</span>.enqueueStack = enqueueTemp
  &#125;

  <span class="hljs-function"><span class="hljs-title">enqueue</span>(<span class="hljs-params">element</span>)</span> &#123; 
    <span class="hljs-built_in">this</span>.enqueueStack.push(element)
    <span class="hljs-built_in">this</span>._enqueueSyncDequeue()
  &#125;

  <span class="hljs-function"><span class="hljs-title">peek</span>(<span class="hljs-params"></span>)</span> &#123; 
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.dequeueStack.peek()
  &#125;
  
  <span class="hljs-function"><span class="hljs-title">dequeue</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-keyword">const</span> p = <span class="hljs-built_in">this</span>.dequeueStack.pop()
    <span class="hljs-built_in">this</span>._dequeueSyncEnqueue()
    <span class="hljs-keyword">return</span> p
  &#125;

  <span class="hljs-function"><span class="hljs-title">size</span>(<span class="hljs-params"></span>)</span> &#123; 
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.enqueueStack.size()
  &#125;
&#125;

<span class="hljs-comment">// 改进版</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Queue</span> </span>&#123;
  <span class="hljs-title">constructor</span> (<span class="hljs-params"></span>) &#123;
    <span class="hljs-built_in">this</span>.stack = <span class="hljs-keyword">new</span> Stack()
    <span class="hljs-built_in">this</span>.queue = <span class="hljs-keyword">new</span> Stack()
  &#125;

  <span class="hljs-function"><span class="hljs-title">enqueue</span>(<span class="hljs-params">element</span>)</span> &#123; 
    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">this</span>.queue.size()) &#123;
      <span class="hljs-built_in">this</span>.stack.push(<span class="hljs-built_in">this</span>.queue.pop())
    &#125;
    <span class="hljs-built_in">this</span>.queue.push(element)
    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">this</span>.stack.size()) &#123;
      <span class="hljs-built_in">this</span>.queue.push(<span class="hljs-built_in">this</span>.stack.pop())
    &#125;
  &#125;

  <span class="hljs-function"><span class="hljs-title">peek</span>(<span class="hljs-params"></span>)</span> &#123; 
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.queue.peek()
  &#125;
  
  <span class="hljs-function"><span class="hljs-title">dequeue</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.queue.pop()
  &#125;

  <span class="hljs-function"><span class="hljs-title">size</span>(<span class="hljs-params"></span>)</span> &#123; 
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.queue.size()
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-11">14. 实现<code>memo()</code></h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-general-memoization-function" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-general-memoization-function" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Function&#125;</span> <span class="hljs-variable">func</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;(args:[]) => string &#125;</span>  </span>[resolver] - cache key generator
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">memo</span>(<span class="hljs-params">func, resolver</span>) </span>&#123;
  <span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">...params</span>) </span>&#123;
    <span class="hljs-keyword">let</span> key
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> resolver === <span class="hljs-string">'function'</span>) &#123;
      key = resolver(...params)
    &#125; <span class="hljs-keyword">else</span> &#123;
      key = [...params].join(<span class="hljs-string">'-'</span>)
    &#125;
    <span class="hljs-keyword">if</span> (map.has(key)) &#123;
      <span class="hljs-keyword">return</span> map.get(key)
    &#125; <span class="hljs-keyword">else</span> &#123;
      <span class="hljs-keyword">const</span> val = func.apply(<span class="hljs-built_in">this</span>, [...params])
      map.set(key, val)
      <span class="hljs-keyword">return</span> val
    &#125;
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-12">15. 实现类似jQuery的DOM wrapper</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-a-simple-DOM-wrapper-to-support-method-chaining-like-jQuery" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-a-simple-DOM-wrapper-to-support-method-chaining-like-jQuery" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts">
<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;HTMLElement&#125;</span> <span class="hljs-variable">el</span></span> - element to be wrapped
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$</span>(<span class="hljs-params">el</span>) </span>&#123;
  el.css = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key, value</span>) </span>&#123;
    el.style[key] = value
    <span class="hljs-keyword">return</span> el
  &#125;

  <span class="hljs-keyword">return</span> el
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-13">16. 实现一个Event Emitter</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fcreate-an-Event-Emitter" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/create-an-Event-Emitter" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">// please complete the implementation</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EventEmitter</span> </span>&#123;
  <span class="hljs-title">constructor</span> (<span class="hljs-params"></span>) &#123;
    <span class="hljs-built_in">this</span>.map = &#123;&#125;
  &#125;

  <span class="hljs-function"><span class="hljs-title">subscribe</span>(<span class="hljs-params">eventName, callback</span>)</span> &#123;
    <span class="hljs-keyword">const</span> event = &#123;eventName, callback&#125;
    <span class="hljs-keyword">const</span> that = <span class="hljs-built_in">this</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.map[eventName]) &#123;
      <span class="hljs-built_in">this</span>.map[eventName].push(event)
    &#125; <span class="hljs-keyword">else</span> &#123;
      <span class="hljs-built_in">this</span>.map[[eventName]] = [event]
    &#125;

    <span class="hljs-keyword">return</span> &#123;
      release () &#123;
        that.map = &#123;
          ...that.map,
          [eventName]: that.map[eventName].filter(<span class="hljs-function">(<span class="hljs-params">e</span>) =></span> e !== event)
        &#125;
      &#125;
    &#125;
  &#125;
  
  <span class="hljs-function"><span class="hljs-title">emit</span>(<span class="hljs-params">eventName, ...args</span>)</span> &#123;
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.map[eventName]) &#123;
      <span class="hljs-built_in">this</span>.map[eventName].forEach(<span class="hljs-function">(<span class="hljs-params">event</span>) =></span> &#123;
        <span class="hljs-keyword">const</span> &#123; callback &#125; = event
        callback(...args)
      &#125;)
    &#125;
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-14">17. 实现一个DOM element store</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fcreate-a-simple-store-for-DOM-node" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/create-a-simple-store-for-DOM-node" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p>注意时间空间复杂度,has方法的时间复杂度应该是o(1)</p>
</blockquote>
<blockquote>
<p>如何实现一个Map polyfill</p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NodeStore</span> </span>&#123;
  <span class="hljs-title">constructor</span> (<span class="hljs-params"></span>) &#123;
    <span class="hljs-built_in">this</span>.map = &#123;&#125;
  &#125;

  <span class="hljs-comment">/**
  * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Node&#125;</span> <span class="hljs-variable">node</span></span>
  * <span class="hljs-doctag">@param <span class="hljs-type">&#123;any&#125;</span> <span class="hljs-variable">value</span></span>
  */</span>
  <span class="hljs-function"><span class="hljs-title">set</span>(<span class="hljs-params">node, value</span>)</span> &#123;
    <span class="hljs-keyword">if</span> (!node.__mapKey__) &#123;
      node.__mapKey__ = <span class="hljs-built_in">Symbol</span>()
      <span class="hljs-built_in">this</span>.map[node.__mapKey__] = value
    &#125; <span class="hljs-keyword">else</span> &#123;
      <span class="hljs-built_in">this</span>.map[node.__mapKey__] = value
    &#125;
  &#125;

 <span class="hljs-comment">/**
  * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Node&#125;</span> <span class="hljs-variable">node</span></span>
  * <span class="hljs-doctag">@return <span class="hljs-type">&#123;any&#125;</span></span>
  */</span>
  <span class="hljs-function"><span class="hljs-title">get</span>(<span class="hljs-params">node</span>)</span> &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.map[node.__mapKey__]
  &#125;
 
 <span class="hljs-comment">/**
  * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Node&#125;</span> <span class="hljs-variable">node</span></span>
  * <span class="hljs-doctag">@return <span class="hljs-type">&#123;Boolean&#125;</span></span>
  */</span>
 <span class="hljs-function"><span class="hljs-title">has</span>(<span class="hljs-params">node</span>)</span> &#123;
   <span class="hljs-keyword">return</span> !!node.__mapKey__ && node.__mapKey__ <span class="hljs-keyword">in</span> <span class="hljs-built_in">this</span>.map
 &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-15">18. 优化一个function</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimprove-a-function" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/improve-a-function" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<p>优化前的时间复杂度O(m * n)</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">// items是一个array</span>
<span class="hljs-comment">// 包含的元素有 >=3 个属性</span>

<span class="hljs-keyword">let</span> items = [
  &#123;<span class="hljs-attr">color</span>: <span class="hljs-string">'red'</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">'tv'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>&#125;, 
  &#123;<span class="hljs-attr">color</span>: <span class="hljs-string">'silver'</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">'phone'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span>&#125;,
  &#123;<span class="hljs-attr">color</span>: <span class="hljs-string">'blue'</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">'book'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">17</span>&#125;
] 

<span class="hljs-comment">// 一个由key和value组成的array</span>
<span class="hljs-keyword">const</span> excludes = [ 
  &#123;<span class="hljs-attr">k</span>: <span class="hljs-string">'color'</span>, <span class="hljs-attr">v</span>: <span class="hljs-string">'silver'</span>&#125;, 
  &#123;<span class="hljs-attr">k</span>: <span class="hljs-string">'type'</span>, <span class="hljs-attr">v</span>: <span class="hljs-string">'tv'</span>&#125;, 
  ...
] 

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">excludeItems</span>(<span class="hljs-params">items, excludes</span>) </span>&#123; 
  excludes.forEach( <span class="hljs-function"><span class="hljs-params">pair</span> =></span> &#123; 
    items = items.filter(<span class="hljs-function"><span class="hljs-params">item</span> =></span> item[pair.k] === item[pair.v])
  &#125;)
 
  <span class="hljs-keyword">return</span> items
&#125; 
<span class="copy-code-btn">复制代码</span></code></pre>
<p>优化后：</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">excludeItems</span>(<span class="hljs-params">items, excludes</span>) </span>&#123; 
  <span class="hljs-keyword">const</span> excludesMap = &#123;&#125;
  excludes.forEach(<span class="hljs-function">(<span class="hljs-params">&#123;k, v&#125;</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (excludesMap[k]) &#123;
      excludesMap[k].add(v)
    &#125; <span class="hljs-keyword">else</span> &#123;
      excludesMap[k] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>()
      excludesMap[k].add(v)
    &#125;
  &#125;)

  <span class="hljs-keyword">return</span> items.filter(<span class="hljs-function">(<span class="hljs-params">item</span>) =></span> &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.keys(item).every(<span class="hljs-function">(<span class="hljs-params">key</span>) =></span> &#123;
      <span class="hljs-keyword">if</span> (excludesMap[key]) &#123;
        <span class="hljs-keyword">return</span> !excludesMap[key].has(item[key])
      &#125;
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    &#125;)
  &#125;)
&#125; 
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-16">19. 相同结构的DOM tree上面寻找对应的节点</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Ffind-corresponding-node-in-two-identical-DOM-tree" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/find-corresponding-node-in-two-identical-DOM-tree" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;HTMLElement&#125;</span> <span class="hljs-variable">rootA</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;HTMLElement&#125;</span> <span class="hljs-variable">rootB</span></span> - rootA and rootB are clone of each other
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;HTMLElement&#125;</span> <span class="hljs-variable">nodeA</span></span>
 */</span>
<span class="hljs-keyword">const</span> findCorrespondingNode = <span class="hljs-function">(<span class="hljs-params">rootA, rootB, target</span>) =></span> &#123;
  <span class="hljs-keyword">const</span> paths = []
  <span class="hljs-keyword">let</span> isSearchEnd = <span class="hljs-literal">false</span>
  <span class="hljs-keyword">let</span> targetB = rootB

  <span class="hljs-keyword">const</span> find = <span class="hljs-function">(<span class="hljs-params">node, index</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (index !== <span class="hljs-literal">undefined</span> && !isSearchEnd) &#123;
      paths.push(index)
    &#125;
    <span class="hljs-keyword">if</span> (node !== target) &#123;
      <span class="hljs-keyword">const</span> children = [...node.children]
      children.forEach(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =></span> &#123;
        find(item, index)
      &#125;)
      <span class="hljs-keyword">if</span> (!isSearchEnd) &#123;
        paths.pop()
      &#125;
    &#125; <span class="hljs-keyword">else</span> &#123;
      isSearchEnd = <span class="hljs-literal">true</span>
    &#125;
  &#125;

  find(rootA)

  <span class="hljs-keyword">if</span> (paths.length !== <span class="hljs-number">0</span>) &#123;
    <span class="hljs-keyword">while</span> (paths.length) &#123;
      <span class="hljs-keyword">const</span> index = paths.shift()
      targetB = [...targetB.children][index]
    &#125;
  &#125;

  <span class="hljs-keyword">return</span> targetB
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-17">20. 检测 data type</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fdetect-data-type-in-JavaScript" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/detect-data-type-in-JavaScript" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;any&#125;</span> <span class="hljs-variable">data</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;string&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">detectType</span>(<span class="hljs-params">data</span>) </span>&#123;
  <span class="hljs-keyword">if</span>(data <span class="hljs-keyword">instanceof</span> FileReader) &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-string">'object'</span>
  &#125;
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">type</span> = <span class="hljs-built_in">Object</span>.prototype.toString.call(data);
  <span class="hljs-keyword">return</span> <span class="hljs-regexp">/^\[object\s+([A-Za-z]+)\]$/</span>.exec(<span class="hljs-keyword">type</span>)[<span class="hljs-number">1</span>].toLocaleLowerCase()
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-18">21. 手写JSON.stringify()</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-JSON-stringify" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-JSON-stringify" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;any&#125;</span> <span class="hljs-variable">data</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;string&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stringify</span>(<span class="hljs-params">data</span>) </span>&#123;
  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> data === <span class="hljs-string">'bigint'</span>) &#123;
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>()
  &#125; 
  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> data === <span class="hljs-string">'string'</span>) &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-string">`"<span class="hljs-subst">$&#123;data&#125;</span>"`</span>
  &#125; 
  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> data === <span class="hljs-string">'function'</span>) &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;
  &#125;
  <span class="hljs-keyword">if</span>(data !== data) &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-string">'null'</span>
  &#125;
  <span class="hljs-keyword">if</span>(data === <span class="hljs-literal">Infinity</span>) &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-string">'null'</span>
  &#125;
  <span class="hljs-keyword">if</span>(data === -<span class="hljs-literal">Infinity</span>) &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-string">'null'</span>
  &#125;
  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> data === <span class="hljs-string">'number'</span>) &#123;
   <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;data&#125;</span>`</span>
  &#125;
  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> data === <span class="hljs-string">'boolean'</span>) &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;data&#125;</span>`</span>
  &#125;
  <span class="hljs-keyword">if</span>(data === <span class="hljs-literal">null</span>) &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-string">'null'</span>
  &#125;
  <span class="hljs-keyword">if</span>(data === <span class="hljs-literal">undefined</span>) &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-string">'null'</span>
  &#125;
  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> data === <span class="hljs-string">'symbol'</span>) &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-string">'null'</span>
  &#125;
  <span class="hljs-keyword">if</span>(data <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Date</span>) &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-string">`"<span class="hljs-subst">$&#123;data.toISOString()&#125;</span>"`</span>
  &#125;
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(data)) &#123;
    <span class="hljs-keyword">const</span> arr = data.map(<span class="hljs-function">(<span class="hljs-params">item</span>) =></span> stringify(item))
    <span class="hljs-keyword">return</span> <span class="hljs-string">`[<span class="hljs-subst">$&#123;arr.join(<span class="hljs-string">','</span>)&#125;</span>]`</span>
  &#125;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> data === <span class="hljs-string">'object'</span>) &#123;
    <span class="hljs-keyword">const</span> arr = []
    <span class="hljs-built_in">Object</span>.entries(data).forEach(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =></span> &#123;
      <span class="hljs-keyword">if</span> (value !== <span class="hljs-literal">undefined</span>) &#123;
        arr.push(<span class="hljs-string">`"<span class="hljs-subst">$&#123;key&#125;</span>":<span class="hljs-subst">$&#123;stringify(value)&#125;</span>`</span>)
      &#125;
    &#125;)
    <span class="hljs-keyword">return</span> <span class="hljs-string">`&#123;<span class="hljs-subst">$&#123;arr.join(<span class="hljs-string">','</span>)&#125;</span>&#125;`</span>
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-19">22. 手写JSON.parse()</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-JSON-parse" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-JSON-parse" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;any&#125;</span> <span class="hljs-variable">data</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;string&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parse</span>(<span class="hljs-params">data</span>) </span>&#123;

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">equal</span>(<span class="hljs-params">text</span>) </span>&#123;
    <span class="hljs-keyword">if</span> (text && text !== current) &#123;
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>()
    &#125;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  &#125;

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">next</span>(<span class="hljs-params"></span>) </span>&#123;
    current = text.charAt(index)
    index += <span class="hljs-number">1</span>
    <span class="hljs-keyword">return</span> current
  &#125;

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">white</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">while</span> (current && current == <span class="hljs-string">' '</span>) &#123;
      next()
    &#125;
  &#125;

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">object</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">let</span> key
    <span class="hljs-keyword">let</span> obj = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>)

    <span class="hljs-keyword">if</span> (current === <span class="hljs-string">'&#123;'</span>) &#123;
      next()
      white()
      <span class="hljs-keyword">if</span> (current === <span class="hljs-string">'&#125;'</span>) &#123;
        next()
        <span class="hljs-keyword">return</span> obj
      &#125;

      <span class="hljs-keyword">while</span> (current) &#123;
        key = <span class="hljs-built_in">string</span>()
        <span class="hljs-comment">// 读取下一个非空的字符</span>
        white()
        <span class="hljs-comment">// 下一个非空字符应该是":", 否则就抛出错误</span>
        equal(<span class="hljs-string">':'</span>)
        next()
        obj[key] = value()
        <span class="hljs-comment">// 读取下一个非空的字符</span>
        white()
        <span class="hljs-keyword">if</span> (current === <span class="hljs-string">'&#125;'</span>) &#123;
          next()
          <span class="hljs-keyword">return</span> obj
        &#125;
        <span class="hljs-comment">// 如果不是'&#125;', 下一个字符应该是',', 否则就抛出错误</span>
        equal(<span class="hljs-string">','</span>)
        <span class="hljs-comment">// 读取下一个非空的字符</span>
        white()
      &#125;
    &#125;

    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>()
  &#125;

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">string</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">let</span> str = <span class="hljs-string">''</span>
    <span class="hljs-keyword">if</span> (current === <span class="hljs-string">'"'</span>) &#123;
      <span class="hljs-keyword">let</span> startIndex = index
      <span class="hljs-keyword">while</span> (next()) &#123;
        <span class="hljs-keyword">if</span> (current === <span class="hljs-string">'"'</span>) &#123;
          <span class="hljs-keyword">if</span> (index - <span class="hljs-number">1</span> > startIndex) &#123;
            str += text.substring(startIndex, index - <span class="hljs-number">1</span>)
          &#125;
          next()
          <span class="hljs-keyword">return</span> str
        &#125;
      &#125;
    &#125; <span class="hljs-keyword">else</span> &#123;
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>()
    &#125;
  &#125;

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">array</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">let</span> arr = []
    <span class="hljs-keyword">if</span> (current === <span class="hljs-string">'['</span>) &#123;
      next()
      <span class="hljs-comment">// 读取下一个非空字符串</span>
      white()

      <span class="hljs-keyword">if</span> (current === <span class="hljs-string">']'</span>) &#123;
        next()
        <span class="hljs-keyword">return</span> arr
      &#125;

      <span class="hljs-keyword">while</span> (current) &#123;
        <span class="hljs-comment">// 读取数组的内容</span>
        arr.push(value())
        <span class="hljs-comment">// 读取下一个字符</span>
        white()
        <span class="hljs-keyword">if</span> (current === <span class="hljs-string">']'</span>) &#123;
          next()
          <span class="hljs-keyword">return</span> arr
        &#125;
        equal(<span class="hljs-string">','</span>)
        next()
        white()
      &#125;
    &#125;
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>()
  &#125;

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">number</span>(<span class="hljs-params"></span>) </span>&#123;
    
    <span class="hljs-keyword">let</span> <span class="hljs-built_in">number</span> = <span class="hljs-string">''</span>
    <span class="hljs-keyword">let</span> <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>
    <span class="hljs-keyword">if</span> (current === <span class="hljs-string">'-'</span>) &#123;
      <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>
      next()
    &#125;

    <span class="hljs-keyword">let</span> temp = <span class="hljs-built_in">Number</span>(current)

    <span class="hljs-keyword">while</span> (temp >= <span class="hljs-number">0</span> && temp <= <span class="hljs-number">9</span> && current) &#123;
      <span class="hljs-built_in">string</span> += current
      next()
      temp = <span class="hljs-built_in">Number</span>(current)
    &#125;

    <span class="hljs-keyword">if</span> (current === <span class="hljs-string">'.'</span>) &#123;
      <span class="hljs-built_in">string</span> += <span class="hljs-string">'.'</span>
      next()
      temp = <span class="hljs-built_in">Number</span>(current)
      <span class="hljs-keyword">while</span> (temp >= <span class="hljs-number">0</span> && temp <= <span class="hljs-number">9</span> && current) &#123;
        <span class="hljs-built_in">string</span> += current
        next()
        temp = <span class="hljs-built_in">Number</span>(current)
      &#125;
    &#125;

    <span class="hljs-built_in">number</span> = <span class="hljs-built_in">Number</span>(<span class="hljs-built_in">string</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">number</span>
  &#125;

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">word</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">switch</span> (current) &#123;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'t'</span>:
        next()
        equal(<span class="hljs-string">'r'</span>)
        next()
        equal(<span class="hljs-string">'u'</span>)
        next()
        equal(<span class="hljs-string">'e'</span>)
        next()
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'f'</span>:
        next()
        equal(<span class="hljs-string">'a'</span>)
        next()
        equal(<span class="hljs-string">'l'</span>)
        next()
        equal(<span class="hljs-string">'s'</span>)
        next()
        equal(<span class="hljs-string">'e'</span>)
        next()
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'n'</span>:
        next()
        equal(<span class="hljs-string">'u'</span>)
        next()
        equal(<span class="hljs-string">'l'</span>)
        next()
        equal(<span class="hljs-string">'l'</span>)
        next()
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
    &#125;
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>()
  &#125;

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">value</span>(<span class="hljs-params"></span>) </span>&#123;
    white()
    <span class="hljs-keyword">switch</span> (current) &#123;
      <span class="hljs-comment">// 如果是对象</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'&#123;'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">object</span>()
      <span class="hljs-comment">// 如果是数组</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'['</span>:
        <span class="hljs-keyword">return</span> array()
      <span class="hljs-comment">// 如果是字符串</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'"'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">string</span>()
      <span class="hljs-comment">// 如果包含负号，说明是数字</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">"-"</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">number</span>()
      <span class="hljs-attr">default</span>:
        <span class="hljs-keyword">let</span> temp = <span class="hljs-built_in">Number</span>(current)
        <span class="hljs-keyword">if</span> (temp >= <span class="hljs-number">0</span> && temp <= <span class="hljs-number">9</span>) &#123;
          <span class="hljs-keyword">return</span> <span class="hljs-built_in">number</span>()
        &#125; <span class="hljs-keyword">else</span> &#123;
          <span class="hljs-keyword">return</span> word()
        &#125;
    &#125;
  &#125;

  <span class="hljs-keyword">let</span> text = data + <span class="hljs-string">''</span>
  <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>
  <span class="hljs-keyword">let</span> current = <span class="hljs-string">' '</span>
  <span class="hljs-keyword">let</span> result = value()

  white()

  <span class="hljs-keyword">if</span> (current) &#123;
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>()
  &#125;

  <span class="hljs-keyword">return</span> result
&#125; 
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-20">23. 实现一个sum()方法</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fcreate-a-sum" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/create-a-sum" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number&#125;</span> <span class="hljs-variable">num</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sum</span>(<span class="hljs-params">num</span>) </span>&#123;
  <span class="hljs-keyword">const</span> fn = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">arg</span>) </span>&#123;
    <span class="hljs-keyword">return</span> sum(num + arg)
  &#125;
  fn.toString = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">return</span> num
  &#125;
  <span class="hljs-keyword">return</span> fn
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-21">24. 用JavaScript手写一个Priority Queue</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fcreate-a-priority-queue-in-JavaScript" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/create-a-priority-queue-in-JavaScript" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts">
<span class="hljs-comment">// complete the implementation</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PriorityQueue</span> </span>&#123;
  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@param <span class="hljs-type">&#123;(a: any, b: any) => -1 | 0 | 1&#125;</span> <span class="hljs-variable">compare</span></span> - 
   * compare function, similar to parameter of Array.prototype.sort
   */</span>
  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">compare</span>)</span> &#123;
    <span class="hljs-built_in">this</span>.compare = compare;
  &#125;

  <span class="hljs-comment">/**
   * return &#123;number&#125; amount of items
   */</span>
  <span class="hljs-function"><span class="hljs-title">size</span>(<span class="hljs-params"></span>)</span> &#123;

  &#125;

  <span class="hljs-comment">/**
   * returns the head element
   */</span>
  <span class="hljs-function"><span class="hljs-title">peek</span>(<span class="hljs-params"></span>)</span> &#123;

  &#125;

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@param <span class="hljs-type">&#123;any&#125;</span> <span class="hljs-variable">element</span></span> - new element to add
   */</span>
  <span class="hljs-function"><span class="hljs-title">add</span>(<span class="hljs-params">element</span>)</span> &#123;
   
  &#125;

  <span class="hljs-comment">/**
   * remove the head element
   * <span class="hljs-doctag">@return <span class="hljs-type">&#123;any&#125;</span> </span>the head element
   */</span>
  <span class="hljs-function"><span class="hljs-title">poll</span>(<span class="hljs-params"></span>)</span> &#123;
    
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-22">25. 更新数组的顺序</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Freorder-array-with-new-indexes" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/reorder-array-with-new-indexes" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;any[]&#125;</span> <span class="hljs-variable">items</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">newOrder</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;void&#125;</span></span>
 */</span>
<span class="hljs-comment">// 不实用额外空间</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sort</span>(<span class="hljs-params">items, newOrder</span>) </span>&#123;
  <span class="hljs-comment">// 使用简单的冒泡排序</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < items.length; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = i + <span class="hljs-number">1</span>; j < items.length; j += <span class="hljs-number">1</span>) &#123;
      <span class="hljs-keyword">if</span> (newOrder[i] > newOrder[j]) &#123;
        <span class="hljs-comment">// 更新items的顺序以及newOrder的顺序</span>
        <span class="hljs-keyword">let</span> otemp = newOrder[j]
        <span class="hljs-keyword">let</span> itemp = items[j]
        newOrder[j] = newOrder[i]
        newOrder[i] = otemp
        items[j] = items[i]
        items[i] = itemp
      &#125;
    &#125;
  &#125;
  <span class="hljs-keyword">return</span> items
&#125;

<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-23">26. 实现Object.assign()</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-object-assign" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-object-assign" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;any&#125;</span> <span class="hljs-variable">target</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;any[]&#125;</span> <span class="hljs-variable">sources</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;object&#125;</span></span>
 */</span>
 <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">objectAssign</span>(<span class="hljs-params">target, ...sources</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (target === <span class="hljs-literal">null</span> || target === <span class="hljs-literal">undefined</span>) &#123;
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>()
  &#125; 
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> target === <span class="hljs-string">'number'</span>) &#123;
    target = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Number</span>(target)
  &#125;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> target === <span class="hljs-string">'boolean'</span>) &#123;
    target = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Boolean</span>(target)
  &#125;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> target === <span class="hljs-string">'string'</span>) &#123;
    target = <span class="hljs-keyword">new</span> <span class="hljs-built_in">String</span>(target)
  &#125;
  sources.forEach(<span class="hljs-function"><span class="hljs-params">source</span> =></span> &#123;
    <span class="hljs-keyword">if</span> (source === <span class="hljs-literal">undefined</span> || source === <span class="hljs-literal">null</span>) &#123;
      <span class="hljs-keyword">return</span>
    &#125;
    <span class="hljs-built_in">Object</span>.defineProperties(
      target,
      <span class="hljs-built_in">Object</span>.getOwnPropertyDescriptors(source)
    )
  &#125;)
  <span class="hljs-keyword">return</span> target
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-24">27. 实现completeAssign()</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-completeAssign" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-completeAssign" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FObject%2FdefineProperty" target="_blank" rel="nofollow noopener noreferrer" title="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" ref="nofollow noopener noreferrer">developer.mozilla.org/en-US/docs/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">completeAssign</span>(<span class="hljs-params">target, ...sources</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (target === <span class="hljs-literal">null</span> || target === <span class="hljs-literal">undefined</span>) &#123;
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>()
  &#125; 
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> target === <span class="hljs-string">'number'</span>) &#123;
    target = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Number</span>(target)
  &#125;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> target === <span class="hljs-string">'boolean'</span>) &#123;
    target = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Boolean</span>(target)
  &#125;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> target === <span class="hljs-string">'string'</span>) &#123;
    target = <span class="hljs-keyword">new</span> <span class="hljs-built_in">String</span>(target)
  &#125;
  sources.forEach(<span class="hljs-function"><span class="hljs-params">source</span> =></span> &#123;
    <span class="hljs-keyword">if</span> (source === <span class="hljs-literal">undefined</span> || source === <span class="hljs-literal">null</span>) &#123;
      <span class="hljs-keyword">return</span>
    &#125;
    <span class="hljs-built_in">Object</span>.defineProperties(
      target,
      <span class="hljs-built_in">Object</span>.getOwnPropertyDescriptors(source)
    )
  &#125;)
  <span class="hljs-keyword">return</span> target
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-25">28. 实现clearAllTimeout()</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-clearAllTimeout" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-clearAllTimeout" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">const</span> beforeSetTimeout = <span class="hljs-built_in">window</span>.setTimeout

<span class="hljs-built_in">window</span>.timers = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>()

<span class="hljs-comment">// 重写setTimeout</span>
<span class="hljs-built_in">window</span>.setTimeout = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">handler, timeout, ...arg</span>) </span>&#123;
  <span class="hljs-keyword">const</span> that = <span class="hljs-built_in">this</span>
  <span class="hljs-keyword">const</span> timer = beforeSetTimeout(
    <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">...arg</span>) </span>&#123;
      handler.apply(that, [...arg])
    &#125;,
    timeout,
    ...arg
  )
  <span class="hljs-built_in">window</span>.timers.add(timer)
  <span class="hljs-keyword">return</span> timer
&#125;


<span class="hljs-comment">/**
 * cancel all timer from window.setTimeout
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clearAllTimeout</span>(<span class="hljs-params"></span>) </span>&#123;
  <span class="hljs-built_in">window</span>.timers.forEach(<span class="hljs-function">(<span class="hljs-params">timer</span>) =></span> &#123;
    <span class="hljs-built_in">window</span>.clearTimeout(timer)
  &#125;)
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-26">29. 实现async helper - <code>sequence()</code></h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-async-helper-sequence" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-async-helper-sequence" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/*
type Callback = (error: Error, data: any) => void

type AsyncFunc = (
   callback: Callback,
   data: any
) => void
*/</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">promisify</span>(<span class="hljs-params">func</span>) </span>&#123;
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">num</span>) </span>&#123;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve, reject</span>) </span>&#123;
      func(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, data</span>) </span>&#123;
        <span class="hljs-keyword">if</span> (err) &#123;
          reject(err)
        &#125; <span class="hljs-keyword">else</span> &#123;
          resolve(data)
        &#125;
      &#125;, num)
    &#125;)
  &#125;
&#125;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;AsyncFunc[]&#125;</span> <span class="hljs-variable">funcs</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;(callback: Callback) => void&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sequence</span>(<span class="hljs-params">funcs</span>) </span>&#123;
  funcs = funcs.map(<span class="hljs-function"><span class="hljs-params">func</span> =></span> promisify(func))
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">callback, data</span>) </span>&#123;
    <span class="hljs-keyword">try</span> &#123;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < funcs.length; i += <span class="hljs-number">1</span>) &#123;
        data = <span class="hljs-keyword">await</span> funcs[i](data)
      &#125;
      callback(<span class="hljs-literal">undefined</span>, data)
    &#125; <span class="hljs-keyword">catch</span> (error) &#123;
      callback(error, <span class="hljs-literal">undefined</span>)
    &#125;
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-27">30. 实现async helper - <code>parallel()</code></h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-async-helper-parallel" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-async-helper-parallel" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/*
type Callback = (error: Error, data: any) => void

type AsyncFunc = (
   callback: Callback,
   data: any
) => void

*/</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">promisify</span>(<span class="hljs-params">func</span>) </span>&#123;
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) </span>&#123;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve, reject</span>) </span>&#123;
      func(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, data</span>) </span>&#123;
        <span class="hljs-keyword">if</span> (err) &#123;
          reject(err)
        &#125; <span class="hljs-keyword">else</span> &#123;
          resolve(data)
        &#125;
      &#125;, ...args)
    &#125;)
  &#125;
&#125;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;AsyncFunc[]&#125;</span> <span class="hljs-variable">funcs</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;(callback: Callback) => void&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parallel</span>(<span class="hljs-params">funcs</span>)</span>&#123;
  funcs = funcs.map(<span class="hljs-function"><span class="hljs-params">func</span> =></span> promisify(func))
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">callback, data</span>) </span>&#123;
    <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>
    <span class="hljs-keyword">let</span> handleError = <span class="hljs-literal">false</span>
    <span class="hljs-keyword">const</span> result = []
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < funcs.length; i += <span class="hljs-number">1</span>) &#123;
      funcs[i](data).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) </span>&#123;
        result[i] = res
        count += <span class="hljs-number">1</span>
        <span class="hljs-keyword">if</span> (count === funcs.length) &#123;
          callback(<span class="hljs-literal">undefined</span>, result)
        &#125;
      &#125;).catch(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>&#123;
        <span class="hljs-keyword">if</span> (!handleError) &#123;
          callback(err, <span class="hljs-literal">undefined</span>)
          handleError = <span class="hljs-literal">true</span>
        &#125;
      &#125;)
    &#125;
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-28">31. 实现async helper - <code>race()</code></h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-async-helper-race" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-async-helper-race" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/*
type Callback = (error: Error, data: any) => void

type AsyncFunc = (
   callback: Callback,
   data: any
) => void

*/</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">promisify</span>(<span class="hljs-params">func</span>) </span>&#123;
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) </span>&#123;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve, reject</span>) </span>&#123;
      func(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, data</span>) </span>&#123;
        <span class="hljs-keyword">if</span> (err) &#123;
          reject(err)
        &#125; <span class="hljs-keyword">else</span> &#123;
          resolve(data)
        &#125;
      &#125;, ...args)
    &#125;)
  &#125;
&#125;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;AsyncFunc[]&#125;</span> <span class="hljs-variable">funcs</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;(callback: Callback) => void&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">race</span>(<span class="hljs-params">funcs</span>)</span>&#123;
  funcs = funcs.map(<span class="hljs-function"><span class="hljs-params">func</span> =></span> promisify(func))
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">callback, data</span>) </span>&#123;
    <span class="hljs-keyword">let</span> handleEnd = <span class="hljs-literal">false</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < funcs.length; i += <span class="hljs-number">1</span>) &#123;
      funcs[i](data).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) </span>&#123;
        <span class="hljs-keyword">if</span> (!handleEnd) &#123;
          callback(<span class="hljs-literal">undefined</span>, res)
        &#125;
        handleEnd = <span class="hljs-literal">true</span>
      &#125;).catch(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>&#123;
        <span class="hljs-keyword">if</span> (!handleEnd) &#123;
          callback(err, <span class="hljs-literal">undefined</span>)
        &#125;
        handleEnd = <span class="hljs-literal">true</span>
      &#125;)
    &#125;
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-29">32. 实现<code>Promise.all()</code></h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-Promise-all" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-Promise-all" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Array<any>&#125;</span> <span class="hljs-variable">promises</span></span> - notice input might have non-Promises
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;Promise<any[]>&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">all</span>(<span class="hljs-params">promises</span>) </span>&#123;
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (!promises.length) &#123;
      <span class="hljs-keyword">return</span> resolve([])
    &#125;
    <span class="hljs-keyword">const</span> result = [];
    <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < promises.length; i++) &#123;
      <span class="hljs-keyword">const</span> promise = promises[i] <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Promise</span> ? promises[i] : <span class="hljs-built_in">Promise</span>.resolve(promises[i])
      promise.then(<span class="hljs-function">(<span class="hljs-params">res</span>) =></span> &#123;
        result[i] = res
        count += <span class="hljs-number">1</span>
        <span class="hljs-keyword">if</span> (count === promises.length) &#123;
          resolve(result)
        &#125;
      &#125;).catch(<span class="hljs-function">(<span class="hljs-params">err</span>) =></span> &#123;
        reject(err)
      &#125;)
    &#125;
  &#125;)
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-30">33. 实现<code>Promise.allSettled()</code></h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-Promise-allSettled" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-Promise-allSettled" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Array<any>&#125;</span> <span class="hljs-variable">promises</span></span> - notice that input might contains non-promises
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;Promise<Array<&#123;status: 'fulfilled', value: any&#125;</span> </span>| &#123;status: 'rejected', reason: any&#125;>>&#125;
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">allSettled</span>(<span class="hljs-params">promises</span>) </span>&#123;
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (!promises.length) &#123;
      <span class="hljs-keyword">return</span> resolve([])
    &#125;
    <span class="hljs-keyword">const</span> result = [];
    <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < promises.length; i++) &#123;
      <span class="hljs-keyword">const</span> promise = promises[i] <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Promise</span> ?
        promises[i] :
        <span class="hljs-built_in">Promise</span>.resolve(promises[i])
      promise.then(<span class="hljs-function">(<span class="hljs-params">res</span>) =></span> &#123;
        result[i] = &#123;<span class="hljs-attr">status</span>:<span class="hljs-string">"fulfilled"</span>,<span class="hljs-attr">value</span>: res&#125;
        count += <span class="hljs-number">1</span>
        <span class="hljs-keyword">if</span> (count === promises.length) &#123;
          resolve(result)
        &#125;
      &#125;).catch(<span class="hljs-function">(<span class="hljs-params">err</span>) =></span> &#123;
        result[i] = &#123;<span class="hljs-attr">status</span>:<span class="hljs-string">"rejected"</span>,<span class="hljs-attr">reason</span>: err&#125;
        count += <span class="hljs-number">1</span>
        <span class="hljs-keyword">if</span> (count === promises.length) &#123;
          resolve(result)
        &#125;
      &#125;)
    &#125;
  &#125;)
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-31">34. 实现<code>Promise.any()</code></h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-Promise-any" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-Promise-any" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Array<Promise>&#125;</span> <span class="hljs-variable">promises</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;Promise&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">any</span>(<span class="hljs-params">promises</span>) </span>&#123;
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (!promises.length) &#123;
      <span class="hljs-keyword">return</span> reject(
        <span class="hljs-keyword">new</span> AggregateError(
          <span class="hljs-string">'No Promise in Promise.any was resolved'</span>, 
          []
        )
      )
    &#125;
    <span class="hljs-keyword">const</span> errors = [];
    <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < promises.length; i += <span class="hljs-number">1</span>) &#123;
      <span class="hljs-keyword">const</span> promise = promises[i] <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Promise</span> ? promises[i] : <span class="hljs-built_in">Promise</span>.resolve(promises[i])
      promise.then(<span class="hljs-function">(<span class="hljs-params">res</span>) =></span> &#123;
        resolve(res)
      &#125;).catch(<span class="hljs-function">(<span class="hljs-params">err</span>) =></span> &#123;
        errors[i] = err
        count += <span class="hljs-number">1</span>
        <span class="hljs-keyword">if</span> (count === promises.length) &#123;
          reject(
            <span class="hljs-keyword">new</span> AggregateError(
              <span class="hljs-string">'No Promise in Promise.any was resolved'</span>, 
              errors
            )
          )
        &#125;
      &#125;)
    &#125;
  &#125;)
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-32">35. 实现<code>Promise.race()</code></h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-Promise-race" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-Promise-race" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Array<Promise>&#125;</span> <span class="hljs-variable">promises</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;Promise&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">race</span>(<span class="hljs-params">promises</span>) </span>&#123;
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (promises.length) &#123;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < promises.length; i += <span class="hljs-number">1</span>) &#123;
        <span class="hljs-keyword">const</span> promise = promises[i] <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Promise</span> ?
          promises[i]
          :
          <span class="hljs-built_in">Promise</span>.resolve(promises[i])
        promise.then(<span class="hljs-function">(<span class="hljs-params">res</span>) =></span> &#123;
          resolve(res)
        &#125;).catch(<span class="hljs-function">(<span class="hljs-params">err</span>) =></span> &#123;
          reject(err)
        &#125;)
      &#125;
    &#125;
  &#125;)
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-33">37. 手写Binary Search (unique)</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-Binary-Search-Unique" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-Binary-Search-Unique" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">arr</span></span> - ascending unique array
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number&#125;</span> <span class="hljs-variable">target</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;number&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">binarySearch</span>(<span class="hljs-params">arr, target</span>)</span>&#123;
  <span class="hljs-keyword">if</span> (arr.length === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>
  
  <span class="hljs-keyword">const</span> _binarySearch = <span class="hljs-function">(<span class="hljs-params">arr, base</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (arr.length) &#123;
      <span class="hljs-keyword">const</span> midd = <span class="hljs-built_in">Math</span>.floor(arr.length / <span class="hljs-number">2</span>)
      <span class="hljs-keyword">if</span> (arr[midd] === target) &#123;
        <span class="hljs-keyword">return</span> midd + base
      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arr[midd] > target) &#123;
        <span class="hljs-keyword">return</span> _binarySearch(arr.splice(midd + <span class="hljs-number">1</span>), midd)
      &#125; <span class="hljs-keyword">else</span> &#123;
        <span class="hljs-keyword">return</span> _binarySearch(arr.splice(<span class="hljs-number">0</span>, midd), base)
      &#125;
    &#125; <span class="hljs-keyword">else</span> &#123;
      <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>
    &#125;
  &#125;

  <span class="hljs-keyword">return</span> _binarySearch([...arr], <span class="hljs-number">0</span>)
&#125;

<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-34">38. 实现<code>jest.spyOn()</code></h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-spyOn" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-spyOn" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;object&#125;</span> <span class="hljs-variable">obj</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">methodName</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">spyOn</span>(<span class="hljs-params">obj, methodName</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (!(obj[methodName] <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Function</span>)) &#123;
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>()
  &#125;

  <span class="hljs-keyword">const</span> before = obj[methodName]
  <span class="hljs-keyword">const</span> calls = []

  obj[methodName] = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) </span>&#123;
    calls.push([...args])
    before.call(<span class="hljs-built_in">this</span>, ...args)
  &#125;

  <span class="hljs-keyword">return</span> &#123;
    calls
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-35">39. 手写range()</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-range" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-range" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;integer&#125;</span> <span class="hljs-variable">from</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;integer&#125;</span> <span class="hljs-variable">to</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">range</span>(<span class="hljs-params"><span class="hljs-keyword">from</span>, to</span>) </span>&#123;
  <span class="hljs-keyword">const</span> result = []
  <span class="hljs-keyword">while</span> (<span class="hljs-keyword">from</span> <= to) &#123;
    result.push(<span class="hljs-keyword">from</span>)
    <span class="hljs-keyword">from</span> += <span class="hljs-number">1</span>
  &#125;
  <span class="hljs-keyword">return</span> result
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-36">40. 手写冒泡排序</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-Bubble-Sort" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-Bubble-Sort" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p>冒泡排序，属于稳定的排序，空间复杂度O(n), 时间复杂度O(n^2)。稳定的排序指的是不会改变元素的相对位置</p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">arr</span></span>
 */</span>
 <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bubbleSort</span>(<span class="hljs-params">arr</span>) </span>&#123;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < arr.length; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = i + <span class="hljs-number">1</span>; j < arr.length; j += <span class="hljs-number">1</span>) &#123;
      <span class="hljs-keyword">if</span> (arr[i] > arr[j]) &#123;
        [arr[i], arr[j]] = [arr[j], arr[i]]
      &#125;
    &#125;
  &#125;
  <span class="hljs-keyword">return</span> arr
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-37">41. 手写归并排序</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-Merge-Sort" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-Merge-Sort" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p>分治法，归并排序是稳定的排序，时间复杂度是 O(nlogn)</p>
</blockquote>
<blockquote>
<p>参考文章：<a href="https://link.juejin.cn/?target=https%3A%2F%2Fstackabuse.com%2Fmerge-sort-in-javascript" target="_blank" rel="nofollow noopener noreferrer" title="https://stackabuse.com/merge-sort-in-javascript" ref="nofollow noopener noreferrer">stackabuse.com/merge-sort-…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">// Note: 需要直接在原数组上修改</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">merge</span> (<span class="hljs-params">left, right</span>) </span>&#123;
  <span class="hljs-keyword">const</span> arr = []
  <span class="hljs-keyword">while</span> (left.length && right.length) &#123;
    <span class="hljs-keyword">if</span> (left[<span class="hljs-number">0</span>] > right[<span class="hljs-number">0</span>]) &#123;
      arr.push(right.shift())
    &#125; <span class="hljs-keyword">else</span> &#123;
      arr.push(left.shift())
    &#125;
  &#125;
  <span class="hljs-keyword">return</span> [...arr, ...left, ...right]
&#125;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">arr</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mergeSort</span>(<span class="hljs-params">arr</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (arr.length <= <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">return</span> arr
  &#125;

  <span class="hljs-keyword">const</span> midd = <span class="hljs-built_in">Math</span>.floor(arr.length / <span class="hljs-number">2</span>)
  <span class="hljs-keyword">const</span> left = arr.splice(<span class="hljs-number">0</span>, midd)

  <span class="hljs-keyword">return</span> merge(mergeSort(left), mergeSort(arr))
&#125;

<span class="hljs-comment">// 原地修改</span>
<span class="hljs-comment">// 递归最外层的right就是原数组</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">merge</span> (<span class="hljs-params">left, right</span>) </span>&#123;
  <span class="hljs-keyword">const</span> arr = []
  <span class="hljs-keyword">while</span> (left.length && right.length) &#123;
    <span class="hljs-keyword">if</span> (left[<span class="hljs-number">0</span>] > right[<span class="hljs-number">0</span>]) &#123;
      arr.push(right.shift())
    &#125; <span class="hljs-keyword">else</span> &#123;
      arr.push(left.shift())
    &#125;
  &#125;

  <span class="hljs-keyword">while</span> (arr.length) &#123;
    right.unshift(arr.pop())
  &#125;

  <span class="hljs-keyword">if</span> (left.length) &#123;
    right.push(left.pop())
  &#125;

  <span class="hljs-keyword">return</span> right
&#125;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">arr</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mergeSort</span>(<span class="hljs-params">arr</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (arr.length <= <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">return</span> arr
  &#125;

  <span class="hljs-keyword">const</span> midd = <span class="hljs-built_in">Math</span>.floor(arr.length / <span class="hljs-number">2</span>)
  <span class="hljs-keyword">const</span> left = arr.splice(<span class="hljs-number">0</span>, midd)

  <span class="hljs-keyword">return</span> merge(mergeSort(left), mergeSort(arr))
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-38">42. 手写插入排序</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-Insertion-Sort" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-Insertion-Sort" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p>插入排序是稳定的排序，时间复杂度是O(n^2)</p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">arr</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">insertionSort</span>(<span class="hljs-params">arr</span>) </span>&#123;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < arr.length; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = i + <span class="hljs-number">1</span>; j < arr.length; j += <span class="hljs-number">1</span>) &#123;
      <span class="hljs-keyword">if</span> (arr[i] > arr[j]) &#123;
        <span class="hljs-keyword">const</span> item = arr.splice(j,<span class="hljs-number">1</span>)[<span class="hljs-number">0</span>]
        arr.splice(i,<span class="hljs-number">0</span>,item)
      &#125;
    &#125;
  &#125;

  <span class="hljs-keyword">return</span> arr
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-39">43. 手写快速排序</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-Quick-Sort" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-Quick-Sort" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p>快速排序是不稳定的排序，最坏的情况时间复杂度是O(n^2)。平均的时间复杂度是O(nlogn)</p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">// Note: 需要直接在原数组上修改</span>
<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">arr</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">quickSort</span>(<span class="hljs-params">arr</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (arr.length <= <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">return</span> arr
  &#125;

  <span class="hljs-keyword">const</span> referenceValue = arr[<span class="hljs-number">0</span>]
  <span class="hljs-keyword">const</span> max = []
  <span class="hljs-keyword">const</span> min = []

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i < arr.length; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">if</span> (arr[i] >= referenceValue) &#123;
      max.push(arr[i])
    &#125; <span class="hljs-keyword">else</span> &#123;
      min.push(arr[i])
    &#125;
  &#125;

  <span class="hljs-keyword">return</span> quickSort(min).concat(referenceValue, quickSort(max))
&#125;

<span class="hljs-comment">// 原地修改</span>
<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">arr</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">quickSort</span>(<span class="hljs-params">arr</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (arr.length <= <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">return</span> arr
  &#125;

  <span class="hljs-keyword">const</span> referenceValue = arr[<span class="hljs-number">0</span>]
  <span class="hljs-keyword">let</span> max = []
  <span class="hljs-keyword">let</span> min = []

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i < arr.length; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">if</span> (arr[i] >= referenceValue) &#123;
      max.push(...arr.splice(i,<span class="hljs-number">1</span>))
    &#125; <span class="hljs-keyword">else</span> &#123;
      min.push(...arr.splice(i,<span class="hljs-number">1</span>))
    &#125;
    i -= <span class="hljs-number">1</span>
  &#125;

  min = quickSort(min)
  max = quickSort(max)

  <span class="hljs-keyword">while</span> (max.length) &#123;
    arr.push(max.shift())
  &#125;

  <span class="hljs-keyword">while</span> (min.length) &#123;
    arr.unshift(min.pop())
  &#125;

  <span class="hljs-keyword">return</span> arr
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-40">44. 手写选择排序</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-Selection-Sort" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-Selection-Sort" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.geeksforgeeks.org%2Fselection-sort%2F" target="_blank" rel="nofollow noopener noreferrer" title="https://www.geeksforgeeks.org/selection-sort/" ref="nofollow noopener noreferrer">www.geeksforgeeks.org/selection-s…</a></p>
</blockquote>
<blockquote>
<p>选择排序是不稳定排序，时间复杂度是O(n^2)</p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">arr</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">selectionSort</span>(<span class="hljs-params">arr</span>) </span>&#123;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < arr.length; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">let</span> minIndex = i
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = i + <span class="hljs-number">1</span>; j < arr.length; j += <span class="hljs-number">1</span>) &#123;
      <span class="hljs-keyword">if</span> (arr[j] < arr[minIndex]) &#123;
        minIndex = j
      &#125;
    &#125;
    <span class="hljs-keyword">const</span> min = arr.splice(minIndex, <span class="hljs-number">1</span>)[<span class="hljs-number">0</span>]
    arr.splice(i, <span class="hljs-number">0</span>, min)
  &#125;
  <span class="hljs-keyword">return</span> arr
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-41">45. 在未排序的数组中找到第K大的元素</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Ffind-the-K-th-largest-element-in-an-unsorted-array" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/find-the-K-th-largest-element-in-an-unsorted-array" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">// 分治</span>

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">arr</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number&#125;</span> <span class="hljs-variable">k</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findKThLargest</span>(<span class="hljs-params">arr, k</span>) </span>&#123;
  <span class="hljs-keyword">let</span> result

  <span class="hljs-keyword">const</span> divideAndConquer = <span class="hljs-function">(<span class="hljs-params">arr, base</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (arr.length <= <span class="hljs-number">1</span>) &#123;
      result = arr[<span class="hljs-number">0</span>]
    &#125;
    <span class="hljs-keyword">const</span> min = []
    <span class="hljs-keyword">const</span> max = []
    <span class="hljs-keyword">let</span> maxLen
    <span class="hljs-keyword">const</span> referenceValue = arr[<span class="hljs-number">0</span>]
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i < arr.length; i += <span class="hljs-number">1</span>) &#123;
      <span class="hljs-keyword">if</span> (arr[i] > referenceValue) &#123;
        max.push(arr[i])
      &#125; <span class="hljs-keyword">else</span> &#123;
        min.push(arr[i])
      &#125;
    &#125;
    max.push(arr[<span class="hljs-number">0</span>])
    maxLen = max.length + base
    <span class="hljs-keyword">if</span> (maxLen >= k && max.length) &#123;
      divideAndConquer(max, base)
    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (maxLen < k && min.length) &#123;
      divideAndConquer(min, maxLen)
    &#125;
  &#125;

  divideAndConquer(arr, <span class="hljs-number">0</span>)

  <span class="hljs-keyword">return</span> result
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-42">46. 实现<code>_.once()</code></h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-once" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-once" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Function&#125;</span> <span class="hljs-variable">func</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;Function&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">once</span>(<span class="hljs-params">func</span>) </span>&#123;
  <span class="hljs-keyword">let</span> result
  <span class="hljs-keyword">let</span> once = <span class="hljs-literal">true</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) </span>&#123;
    <span class="hljs-keyword">if</span> (once) &#123;
      result = func.call(<span class="hljs-built_in">this</span>, ...args)
      once = <span class="hljs-literal">false</span>
    &#125;
    <span class="hljs-keyword">return</span> result
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-43">47. 反转链表</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2FReverse-a-linked-list" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/Reverse-a-linked-list" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/** 
 * class Node &#123;
 *  new(val: number, next: Node);
 *    val: number
 *    next: Node
 * &#125;
 */</span>

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Node&#125;</span> <span class="hljs-variable">list</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;Node&#125;</span> </span>
 */</span>
<span class="hljs-keyword">const</span> reverseLinkedList = <span class="hljs-function">(<span class="hljs-params">list</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (!list) <span class="hljs-keyword">return</span>
    <span class="hljs-keyword">const</span> initNode = list
    <span class="hljs-keyword">let</span> newHead = initNode
    <span class="hljs-keyword">let</span> newHeadNextNode = initNode

    <span class="hljs-keyword">while</span> (initNode.next) &#123;
        newHead = initNode.next
        <span class="hljs-keyword">if</span> (newHead.next) &#123;
            initNode.next = newHead.next
        &#125; <span class="hljs-keyword">else</span> &#123;
            initNode.next = <span class="hljs-literal">null</span>
        &#125;
        newHead.next = newHeadNextNode
        newHeadNextNode = newHead
    &#125;

    <span class="hljs-keyword">return</span> newHead
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-44">48. 含有重复元素的数组中返回特定元素的首次出现的位置</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fsearch-first-index-with-Binary-Search-duplicate-array" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/search-first-index-with-Binary-Search-duplicate-array" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">arr</span></span> - ascending array with duplicates
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number&#125;</span> <span class="hljs-variable">target</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;number&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">firstIndex</span>(<span class="hljs-params">arr, target</span>)</span>&#123;
  <span class="hljs-keyword">if</span> (arr.length === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>
  <span class="hljs-keyword">let</span> index = -<span class="hljs-number">1</span>

  <span class="hljs-keyword">const</span> _firstIndex = <span class="hljs-function">(<span class="hljs-params">start, end</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (start <= end) &#123;
      <span class="hljs-keyword">const</span> midd = <span class="hljs-built_in">Math</span>.floor((start + end) / <span class="hljs-number">2</span>)
      <span class="hljs-keyword">if</span> (arr[midd] === target) &#123;
        <span class="hljs-keyword">if</span> (index === -<span class="hljs-number">1</span>) &#123;
          index = midd
        &#125; <span class="hljs-keyword">else</span> &#123;
          index = <span class="hljs-built_in">Math</span>.min(index, midd)
        &#125;
        _firstIndex(start, midd - <span class="hljs-number">1</span>)
      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arr[midd] > target) &#123;
        _firstIndex(start, midd - <span class="hljs-number">1</span>)
      &#125; <span class="hljs-keyword">else</span> &#123;
        _firstIndex(midd + <span class="hljs-number">1</span>, end)
      &#125;
    &#125;
  &#125;

  _firstIndex(<span class="hljs-number">0</span>, arr.length - <span class="hljs-number">1</span>)

  <span class="hljs-keyword">return</span> index
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-45">49. 含有重复元素的数组中返回特定元素的最后出现的位置</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fsearch-last-index-with-Binary-Search-possible-duplicate-array" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/search-last-index-with-Binary-Search-possible-duplicate-array" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts">
<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">arr</span></span> - ascending array with duplicates
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number&#125;</span> <span class="hljs-variable">target</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;number&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lastIndex</span>(<span class="hljs-params">arr, target</span>)</span>&#123;
  <span class="hljs-keyword">if</span> (arr.length === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>
  <span class="hljs-keyword">let</span> index = -<span class="hljs-number">1</span>

  <span class="hljs-keyword">const</span> _lastIndex = <span class="hljs-function">(<span class="hljs-params">start, end</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (start <= end) &#123;
      <span class="hljs-keyword">const</span> midd = <span class="hljs-built_in">Math</span>.floor((start + end) / <span class="hljs-number">2</span>)
      <span class="hljs-keyword">if</span> (arr[midd] === target) &#123;
        <span class="hljs-keyword">if</span> (index === -<span class="hljs-number">1</span>) &#123;
          index = midd
        &#125; <span class="hljs-keyword">else</span> &#123;
          index = <span class="hljs-built_in">Math</span>.max(index, midd)
        &#125;
        _lastIndex(midd + <span class="hljs-number">1</span>, end)
      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arr[midd] > target) &#123;
        _lastIndex(start, midd - <span class="hljs-number">1</span>)
      &#125; <span class="hljs-keyword">else</span> &#123;
        _lastIndex(midd + <span class="hljs-number">1</span>, end)
      &#125;
    &#125;
  &#125;

  _lastIndex(<span class="hljs-number">0</span>, arr.length - <span class="hljs-number">1</span>)

  <span class="hljs-keyword">return</span> index
&#125;

<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-46">50. 含有重复元素的数组中返回特定元素之前的元素</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fsearch-element-right-before-target-with-Binary-Search-possible-duplicate-array" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/search-element-right-before-target-with-Binary-Search-possible-duplicate-array" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">arr</span></span> - ascending array with duplicates
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number&#125;</span> <span class="hljs-variable">target</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;number&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">firstIndex</span>(<span class="hljs-params">arr, target</span>)</span>&#123;
  <span class="hljs-keyword">if</span> (arr.length === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>
  <span class="hljs-keyword">let</span> index = -<span class="hljs-number">1</span>

  <span class="hljs-keyword">const</span> _firstIndex = <span class="hljs-function">(<span class="hljs-params">start, end</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (start <= end) &#123;
      <span class="hljs-keyword">const</span> midd = <span class="hljs-built_in">Math</span>.floor((start + end) / <span class="hljs-number">2</span>)
      <span class="hljs-keyword">if</span> (arr[midd] === target) &#123;
        <span class="hljs-keyword">if</span> (index === -<span class="hljs-number">1</span>) &#123;
          index = midd
        &#125; <span class="hljs-keyword">else</span> &#123;
          index = <span class="hljs-built_in">Math</span>.min(index, midd)
        &#125;
        _firstIndex(start, midd - <span class="hljs-number">1</span>)
      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arr[midd] > target) &#123;
        _firstIndex(start, midd - <span class="hljs-number">1</span>)
      &#125; <span class="hljs-keyword">else</span> &#123;
        _firstIndex(midd + <span class="hljs-number">1</span>, end)
      &#125;
    &#125;
  &#125;

  _firstIndex(<span class="hljs-number">0</span>, arr.length - <span class="hljs-number">1</span>)

  <span class="hljs-keyword">return</span> index
&#125;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">arr</span></span> - ascending array with duplicates
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number&#125;</span> <span class="hljs-variable">target</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;number&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">elementBefore</span>(<span class="hljs-params">arr, target</span>)</span>&#123;
  <span class="hljs-keyword">if</span> (arr.length === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>

  <span class="hljs-keyword">const</span> _firstIndex = firstIndex(arr, target)

  <span class="hljs-keyword">if</span> (_firstIndex === <span class="hljs-number">0</span> || _firstIndex === -<span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>

  <span class="hljs-keyword">return</span> arr[_firstIndex - <span class="hljs-number">1</span>]
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-47">51. 含有重复元素的数组中返回特定元素的之后的元素</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fsearch-element-right-after-target-with-Binary-Search-possible-duplicate-array" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/search-element-right-after-target-with-Binary-Search-possible-duplicate-array" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">arr</span></span> - ascending array with duplicates
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number&#125;</span> <span class="hljs-variable">target</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;number&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lastIndex</span>(<span class="hljs-params">arr, target</span>)</span>&#123;
  <span class="hljs-keyword">if</span> (arr.length === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>
  <span class="hljs-keyword">let</span> index = -<span class="hljs-number">1</span>

  <span class="hljs-keyword">const</span> _lastIndex = <span class="hljs-function">(<span class="hljs-params">start, end</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (start <= end) &#123;
      <span class="hljs-keyword">const</span> midd = <span class="hljs-built_in">Math</span>.floor((start + end) / <span class="hljs-number">2</span>)
      <span class="hljs-keyword">if</span> (arr[midd] === target) &#123;
        <span class="hljs-keyword">if</span> (index === -<span class="hljs-number">1</span>) &#123;
          index = midd
        &#125; <span class="hljs-keyword">else</span> &#123;
          index = <span class="hljs-built_in">Math</span>.max(index, midd)
        &#125;
        _lastIndex(midd + <span class="hljs-number">1</span>, end)
      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arr[midd] > target) &#123;
        _lastIndex(start, midd - <span class="hljs-number">1</span>)
      &#125; <span class="hljs-keyword">else</span> &#123;
        _lastIndex(midd + <span class="hljs-number">1</span>, end)
      &#125;
    &#125;
  &#125;

  _lastIndex(<span class="hljs-number">0</span>, arr.length - <span class="hljs-number">1</span>)

  <span class="hljs-keyword">return</span> index
&#125;


<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">arr</span></span> - ascending array with duplicates
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number&#125;</span> <span class="hljs-variable">target</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;number&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">elementAfter</span>(<span class="hljs-params">arr, target</span>)</span>&#123;
  <span class="hljs-keyword">if</span> (arr.length === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>

  <span class="hljs-keyword">const</span> _lastIndex = lastIndex(arr, target)

  <span class="hljs-keyword">if</span> (_lastIndex === arr.length - <span class="hljs-number">1</span> || _lastIndex === -<span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>

  <span class="hljs-keyword">return</span> arr[_lastIndex + <span class="hljs-number">1</span>]
&#125;

<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-48">53. 实现middleware</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fcreate-a-middleware-system" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/create-a-middleware-system" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Middleware</span> </span>&#123;

  <span class="hljs-title">constructor</span> (<span class="hljs-params"></span>) &#123;
    <span class="hljs-built_in">this</span>.callbacks = []
    <span class="hljs-built_in">this</span>.handleErrors = []
    <span class="hljs-built_in">this</span>.handleNextError = <span class="hljs-literal">null</span>
  &#125;

  <span class="hljs-comment">// 洋葱模型</span>
  <span class="hljs-function"><span class="hljs-title">_compose</span>(<span class="hljs-params">funcs, <span class="hljs-keyword">type</span></span>)</span> &#123;
    <span class="hljs-keyword">if</span> (funcs.length === <span class="hljs-number">0</span>) &#123;
      <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">arg</span> =></span> arg 
    &#125;
    <span class="hljs-keyword">if</span> (funcs.length === <span class="hljs-number">1</span>) &#123;
      <span class="hljs-keyword">return</span> funcs[<span class="hljs-number">0</span>]
    &#125;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">type</span> === <span class="hljs-string">'callback'</span>) &#123;
      <span class="hljs-keyword">return</span> funcs.reduce(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =></span> &#123;
        <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">req, next</span>) =></span> &#123;
          <span class="hljs-keyword">return</span> a(req, <span class="hljs-function">(<span class="hljs-params">err</span>) =></span> &#123;
            <span class="hljs-keyword">if</span> (err) &#123;
              <span class="hljs-built_in">this</span>.handleNextError(err)
            &#125; <span class="hljs-keyword">else</span> &#123;
              b(req, next)
            &#125;
          &#125;)
        &#125;
      &#125;)
    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">type</span> === <span class="hljs-string">'handleError'</span>) &#123;
      <span class="hljs-keyword">return</span> funcs.reduce(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =></span> &#123;
        <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">err, req, next</span>) =></span> &#123;
          <span class="hljs-keyword">return</span> a(err, req, <span class="hljs-function">(<span class="hljs-params">err</span>) =></span> &#123;
            b(err, req, next)
          &#125;)
        &#125;
      &#125;)
    &#125;
  &#125;

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@param <span class="hljs-type">&#123;MiddlewareFunc&#125;</span> <span class="hljs-variable">func</span></span>
   */</span>
  <span class="hljs-function"><span class="hljs-title">use</span>(<span class="hljs-params">func</span>)</span> &#123;
    <span class="hljs-keyword">if</span> (func.length === <span class="hljs-number">2</span>) &#123;
      <span class="hljs-built_in">this</span>.callbacks.push(func)
    &#125; <span class="hljs-keyword">else</span> &#123;
      <span class="hljs-built_in">this</span>.handleErrors.push(func)
    &#125;
  &#125;

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Request&#125;</span> <span class="hljs-variable">req</span></span>
   */</span>
  <span class="hljs-function"><span class="hljs-title">start</span>(<span class="hljs-params">req</span>)</span> &#123;
    <span class="hljs-keyword">const</span> callback = <span class="hljs-built_in">this</span>._compose(<span class="hljs-built_in">this</span>.callbacks, <span class="hljs-string">'callback'</span>)
    <span class="hljs-keyword">const</span> handleError = <span class="hljs-built_in">this</span>._compose(<span class="hljs-built_in">this</span>.handleErrors, <span class="hljs-string">'handleError'</span>)
    <span class="hljs-built_in">this</span>.handleNextError = <span class="hljs-function">(<span class="hljs-params">err</span>) =></span> &#123;
      handleError(err, req, <span class="hljs-function">() =></span> &#123;&#125;)
    &#125;
    <span class="hljs-keyword">try</span> &#123;
      callback(req, <span class="hljs-function">(<span class="hljs-params">err</span>) =></span> &#123;
        <span class="hljs-keyword">if</span> (err) &#123;
          <span class="hljs-built_in">this</span>.handleNextError(err)
        &#125;
      &#125;)
    &#125; <span class="hljs-keyword">catch</span> (err) &#123;
      handleError(err, req, <span class="hljs-function">() =></span> &#123;&#125;)
    &#125;
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">const</span> middleware = <span class="hljs-keyword">new</span> Middleware()

middleware.use(<span class="hljs-function">(<span class="hljs-params">req, next</span>) =></span> &#123;
   <span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>)
   next()
   <span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>)
&#125;)

<span class="hljs-comment">// since error occurs, this is skipped</span>
middleware.use(<span class="hljs-function">(<span class="hljs-params">req, next</span>) =></span> &#123;
  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">3</span>)
  next(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>())
  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">4</span>)
&#125;)


<span class="hljs-comment">// since error occurs, this is called</span>
middleware.use(<span class="hljs-function">(<span class="hljs-params">error, req, next</span>) =></span> &#123;
   <span class="hljs-built_in">console</span>.log(error)
   <span class="hljs-built_in">console</span>.log(req)
&#125;)

middleware.start(&#123;&#125;)
<span class="copy-code-btn">复制代码</span></code></pre>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Middleware</span> </span>&#123;

  <span class="hljs-title">constructor</span> (<span class="hljs-params"></span>) &#123;
    <span class="hljs-built_in">this</span>.callbacks = []
    <span class="hljs-built_in">this</span>.handleErrors = []
  &#125;

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@param <span class="hljs-type">&#123;MiddlewareFunc&#125;</span> <span class="hljs-variable">func</span></span>
   */</span>
  <span class="hljs-function"><span class="hljs-title">use</span>(<span class="hljs-params">func</span>)</span> &#123;
    <span class="hljs-keyword">if</span> (func.length === <span class="hljs-number">2</span>) &#123;
      <span class="hljs-built_in">this</span>.callbacks.push(func)
    &#125; <span class="hljs-keyword">else</span> &#123;
      <span class="hljs-built_in">this</span>.handleErrors.push(func)
    &#125;
  &#125;

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Request&#125;</span> <span class="hljs-variable">req</span></span>
   */</span>
  <span class="hljs-function"><span class="hljs-title">start</span>(<span class="hljs-params">req</span>)</span> &#123;
    <span class="hljs-keyword">let</span> callbackIndex = <span class="hljs-number">0</span>
    <span class="hljs-keyword">let</span> handleErrorIndex = <span class="hljs-number">0</span>
    <span class="hljs-keyword">const</span> next = <span class="hljs-function">(<span class="hljs-params">error</span>) =></span> &#123;
      <span class="hljs-keyword">const</span> args = [req, next]
      <span class="hljs-keyword">let</span> func
      <span class="hljs-keyword">if</span> (error) &#123;
        func = <span class="hljs-built_in">this</span>.handleErrors[handleErrorIndex]
        args.unshift(error)
        handleErrorIndex += <span class="hljs-number">1</span>
      &#125; <span class="hljs-keyword">else</span> &#123;
        func = <span class="hljs-built_in">this</span>.callbacks[callbackIndex]
        callbackIndex += <span class="hljs-number">1</span>
      &#125;

      <span class="hljs-keyword">try</span> &#123;
        func && func(...args)
      &#125; <span class="hljs-keyword">catch</span> (err) &#123;
        next(err)
      &#125;
    &#125;

    next()
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-49">🐜蚂蚁金服面试真题: 实现compose</h3>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params">next</span>) </span>&#123;<span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>);next();<span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>);&#125;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">g</span>(<span class="hljs-params">next</span>) </span>&#123;<span class="hljs-built_in">console</span>.log(<span class="hljs-number">3</span>);next();<span class="hljs-built_in">console</span>.log(<span class="hljs-number">4</span>);&#125;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">h</span>(<span class="hljs-params">next</span>) </span>&#123;<span class="hljs-built_in">console</span>.log(<span class="hljs-number">5</span>);next();<span class="hljs-built_in">console</span>.log(<span class="hljs-number">6</span>);&#125;


<span class="hljs-comment">// ((next) => &#123;</span>
<span class="hljs-comment">//   ((next) => &#123;</span>
<span class="hljs-comment">//     return f(() => &#123;</span>
<span class="hljs-comment">//       g(next)</span>
<span class="hljs-comment">//     &#125;)</span>
<span class="hljs-comment">//   &#125;)(() => &#123; h(next) &#125;)</span>
<span class="hljs-comment">// &#125;)(() => &#123;</span>
<span class="hljs-comment">//   console.log('ok')</span>
<span class="hljs-comment">// &#125;)</span>

<span class="hljs-comment">// 最终需要实现的目标</span>
<span class="hljs-comment">// f(() => &#123;</span>
<span class="hljs-comment">//   g(() => &#123;</span>
<span class="hljs-comment">//     h(() => &#123;</span>
<span class="hljs-comment">//     &#125;)</span>
<span class="hljs-comment">//   &#125;)</span>
<span class="hljs-comment">// &#125;)</span>

<span class="hljs-comment">// 实现compose</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compose</span>(<span class="hljs-params">...funcs</span>) </span>&#123;
  r
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">return</span> funcs.reduce(<span class="hljs-function">(<span class="hljs-params">a,b</span>) =></span> &#123;
      <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">next</span>) =></span> &#123;
        <span class="hljs-keyword">return</span> a(<span class="hljs-function">() =></span> &#123;
          b(next)
        &#125;)
      &#125;
    &#125;)(<span class="hljs-function">() =></span> &#123;&#125;)
  &#125;
&#125;

<span class="hljs-comment">// 1,3,5,6,4,2</span>
<span class="hljs-comment">// 第一次返回(next) => f(() => g(next)）</span>
<span class="hljs-comment">// 第二次a: (next) => f(() => g(next)） b: h</span>
<span class="hljs-comment">// 第二次返回 (next) => （(next) => f(() => g(next))(() => h(next))</span>
<span class="hljs-comment">// (next) =>f(() => g(() => h(next)))</span>
compose(f,g,h)()
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-50">53. 用es5实现<code>extends</code></h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fwrite-your-own-extends-in-es5" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/write-your-own-extends-in-es5" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">const</span> myExtends = <span class="hljs-function">(<span class="hljs-params">SuperType, SubType</span>) =></span> &#123;
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Child</span> (<span class="hljs-params">...args</span>) </span>&#123;
    SuperType.call(<span class="hljs-built_in">this</span>, ...args)
    SubType.call(<span class="hljs-built_in">this</span>, ...args)
    <span class="hljs-comment">// 这里Child其实本质还是SubType，还是这里要修改下</span>
    <span class="hljs-built_in">Object</span>.setPrototypeOf(<span class="hljs-built_in">this</span>, SubType.prototype)
  &#125;

  SubType.prototype = <span class="hljs-built_in">Object</span>.create(SuperType.prototype)
  Child.prototype = <span class="hljs-built_in">Object</span>.create(SubType.prototype)

  SubType.prototype.constructor = SubType
  Child.prototype.constructor = Child

  <span class="hljs-comment">// 模拟es6额外的继承链</span>
  <span class="hljs-built_in">Object</span>.setPrototypeOf(Child, SuperType)

  <span class="hljs-keyword">return</span> Child
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-51">55. HTML字符串中高亮关键字</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fhighlight-keywords-in-HTML-string" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/highlight-keywords-in-HTML-string" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">// 获取所有关键词的排列组合</span>
<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">html</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string[]&#125;</span> <span class="hljs-variable">keywords</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">highlightKeywords</span>(<span class="hljs-params">html, keywords</span>) </span>&#123;
  <span class="hljs-keyword">const</span> combination = []
  <span class="hljs-keyword">let</span> arr = html.split(<span class="hljs-string">' '</span>)

  <span class="hljs-keyword">const</span> getCombination = <span class="hljs-function">(<span class="hljs-params">head, arr</span>) =></span> &#123;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < arr.length; i += <span class="hljs-number">1</span>) &#123;
      <span class="hljs-keyword">const</span> temp = [...arr]
      temp.splice(i, <span class="hljs-number">1</span>)
      <span class="hljs-keyword">const</span> name = <span class="hljs-string">`<span class="hljs-subst">$&#123;head&#125;</span><span class="hljs-subst">$&#123;arr[i]&#125;</span>`</span>
      combination.push(name)
      getCombination(name, temp)
    &#125;
  &#125;

  getCombination(<span class="hljs-string">''</span>, keywords)

  arr = arr.map(<span class="hljs-function">(<span class="hljs-params">item</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (combination.includes(item)) &#123;
      <span class="hljs-keyword">return</span> <span class="hljs-string">`<em><span class="hljs-subst">$&#123;item&#125;</span></em>`</span>
    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (keywords.some(<span class="hljs-function">(<span class="hljs-params">keyword</span>) =></span> item.includes(keyword))) &#123;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < keywords.length; i += <span class="hljs-number">1</span>) &#123;
        <span class="hljs-keyword">const</span> keyword = keywords[i]
        <span class="hljs-keyword">if</span> (item.includes(keyword)) &#123;
          <span class="hljs-keyword">const</span> reg = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(keyword, <span class="hljs-string">'g'</span>)
          item = item.replace(reg, <span class="hljs-string">`<em><span class="hljs-subst">$&#123;keyword&#125;</span></em>`</span>)
          <span class="hljs-keyword">break</span>
        &#125;
      &#125;
      <span class="hljs-keyword">return</span> item
    &#125; <span class="hljs-keyword">else</span> &#123;
      <span class="hljs-keyword">return</span> item
    &#125;
  &#125;)

  <span class="hljs-keyword">return</span> arr.join(<span class="hljs-string">' '</span>)
&#125;;

<span class="hljs-comment">// 单纯的使用正则</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-52">58. 返回DOM tree的高度</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fget-DOM-tree-height" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/get-DOM-tree-height" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts">
<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;HTMLElement | null&#125;</span> <span class="hljs-variable">tree</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;number&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getHeight</span>(<span class="hljs-params">tree</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (!tree) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
  <span class="hljs-keyword">const</span> result = []

  <span class="hljs-keyword">const</span> bfs = <span class="hljs-function">(<span class="hljs-params">nodes</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (nodes.length) &#123;
      <span class="hljs-keyword">let</span> childs = []
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < nodes.length; i += <span class="hljs-number">1</span>) &#123;
        <span class="hljs-keyword">const</span> children = nodes[i].children
        childs = [...childs, ...children]
      &#125;
      result.push(childs)
      bfs(childs)
    &#125;
  &#125;

  bfs([tree])

  <span class="hljs-keyword">return</span> result.length       
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-53">59. 实现browser history</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fcreate-a-browser-history" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/create-a-browser-history" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BrowserHistory</span> </span>&#123;
  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">url</span>)</span> &#123;
    <span class="hljs-built_in">this</span>.history = [url || <span class="hljs-literal">undefined</span>]
    <span class="hljs-built_in">this</span>.index = <span class="hljs-number">0</span>
  &#125;

  <span class="hljs-function"><span class="hljs-title">visit</span>(<span class="hljs-params">url</span>)</span> &#123;
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.index === <span class="hljs-built_in">this</span>.history.length - <span class="hljs-number">1</span>) &#123;
      <span class="hljs-built_in">this</span>.history.push(url)
    &#125; <span class="hljs-keyword">else</span> &#123;
      <span class="hljs-built_in">this</span>.history = <span class="hljs-built_in">this</span>.history.splice(<span class="hljs-number">0</span>, <span class="hljs-built_in">this</span>.index + <span class="hljs-number">1</span>)
      <span class="hljs-built_in">this</span>.history.push(url)
    &#125;
    <span class="hljs-built_in">this</span>.index = <span class="hljs-built_in">this</span>.history.length - <span class="hljs-number">1</span>
  &#125;
  
  <span class="hljs-keyword">get</span> <span class="hljs-title">current</span>() &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.history[<span class="hljs-built_in">this</span>.index]
  &#125;
  
  <span class="hljs-function"><span class="hljs-title">goBack</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-built_in">this</span>.index -= <span class="hljs-number">1</span>
    <span class="hljs-built_in">this</span>.index = <span class="hljs-built_in">this</span>.index < <span class="hljs-number">0</span> ? <span class="hljs-number">0</span> : <span class="hljs-built_in">this</span>.index
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.history[<span class="hljs-built_in">this</span>.index]
  &#125;
  
  <span class="hljs-function"><span class="hljs-title">forward</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-built_in">this</span>.index += <span class="hljs-number">1</span>
    <span class="hljs-built_in">this</span>.index = <span class="hljs-built_in">this</span>.index > <span class="hljs-built_in">this</span>.history.length - <span class="hljs-number">1</span> ? <span class="hljs-built_in">this</span>.history.length - <span class="hljs-number">1</span> : <span class="hljs-built_in">this</span>.index
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.history[<span class="hljs-built_in">this</span>.index]
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-54">60. 实现自己的<code>new</code></h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fcreate-your-own-new-operator" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/create-your-own-new-operator" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Function&#125;</span> <span class="hljs-variable">constructor</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;any[]&#125;</span> <span class="hljs-variable">args</span></span> - argument passed to the constructor
 * `myNew(constructor, ...args)` should return the same as `new constructor(...args)`
 */</span>
<span class="hljs-keyword">const</span> myNew = <span class="hljs-function">(<span class="hljs-params">constructor, ...args</span>) =></span> &#123;
  <span class="hljs-keyword">const</span> obj = <span class="hljs-built_in">Object</span>.create(&#123;&#125;)
  <span class="hljs-keyword">const</span> returnValue = <span class="hljs-title">constructor</span>.<span class="hljs-title">call</span>(<span class="hljs-params">obj, ...args</span>)
  <span class="hljs-title">Object</span>.<span class="hljs-title">setPrototypeOf</span>(<span class="hljs-params">obj, constructor.prototype</span>)
  <span class="hljs-title">return</span> <span class="hljs-title">returnValue</span> || <span class="hljs-title">obj</span>
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-55">61. 实现<code>Function.prototype.call</code></h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fcreate-call-method" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/create-call-method" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-built_in">Function</span>.prototype.mycall = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">thisArg, ...args</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (thisArg === <span class="hljs-literal">undefined</span> || thisArg === <span class="hljs-literal">null</span>) &#123;
    thisArg = <span class="hljs-built_in">window</span>
  &#125;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> thisArg === <span class="hljs-string">'string'</span>) &#123;
    thisArg = <span class="hljs-keyword">new</span> <span class="hljs-built_in">String</span>(thisArg)
  &#125;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> thisArg === <span class="hljs-string">'number'</span>) &#123;
    thisArg = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Number</span>(thisArg)
  &#125;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> thisArg === <span class="hljs-string">'boolean'</span>) &#123;
    thisArg = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Boolean</span>(thisArg)
  &#125;
  <span class="hljs-keyword">const</span> key = <span class="hljs-built_in">Symbol</span>()
  thisArg[key] = <span class="hljs-built_in">this</span>
  <span class="hljs-keyword">const</span> result = thisArg[key](...args)
  <span class="hljs-keyword">delete</span> thisArg[key]
  <span class="hljs-keyword">return</span> result
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-56">手写apply</h3>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-built_in">Function</span>.prototype.myapply = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">thisArg, argsArray = []</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">Array</span>.isArray(argsArray)) &#123;
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>()
  &#125;
  <span class="hljs-keyword">if</span> (thisArg === <span class="hljs-literal">undefined</span> || thisArg === <span class="hljs-literal">null</span>) &#123;
    thisArg = <span class="hljs-built_in">window</span>
  &#125;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> thisArg === <span class="hljs-string">'string'</span>) &#123;
    thisArg = <span class="hljs-keyword">new</span> <span class="hljs-built_in">String</span>(thisArg)
  &#125;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> thisArg === <span class="hljs-string">'number'</span>) &#123;
    thisArg = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Number</span>(thisArg)
  &#125;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> thisArg === <span class="hljs-string">'boolean'</span>) &#123;
    thisArg = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Boolean</span>(thisArg)
  &#125;
  <span class="hljs-keyword">const</span> key = <span class="hljs-built_in">Symbol</span>()
  thisArg[key] = <span class="hljs-built_in">this</span>
  <span class="hljs-keyword">const</span> result = thisArg[key](...argsArray)
  <span class="hljs-keyword">delete</span> thisArg[key]
  <span class="hljs-keyword">return</span> result
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-57">手写bind</h3>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-built_in">Function</span>.prototype.mybind = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">thisArg, ...initArgs</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (thisArg === <span class="hljs-literal">undefined</span> || thisArg === <span class="hljs-literal">null</span>) &#123;
    thisArg = <span class="hljs-built_in">window</span>
  &#125;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> thisArg === <span class="hljs-string">'string'</span>) &#123;
    thisArg = <span class="hljs-keyword">new</span> <span class="hljs-built_in">String</span>(thisArg)
  &#125;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> thisArg === <span class="hljs-string">'number'</span>) &#123;
    thisArg = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Number</span>(thisArg)
  &#125;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> thisArg === <span class="hljs-string">'boolean'</span>) &#123;
    thisArg = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Boolean</span>(thisArg)
  &#125;
  <span class="hljs-keyword">const</span> that = <span class="hljs-built_in">this</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) </span>&#123;
    <span class="hljs-keyword">const</span> key = <span class="hljs-built_in">Symbol</span>()
    thisArg[key] = that
    <span class="hljs-keyword">const</span> result = thisArg[key](...initArgs, ...args)
    <span class="hljs-keyword">delete</span> thisArg[key]
    <span class="hljs-keyword">return</span> result
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-58">63. 手写<code>_.cloneDeep()</code></h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fcreate-cloneDeep" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/create-cloneDeep" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">// 规避循环引用 Avoid circular references</span>
<span class="hljs-keyword">const</span> hash = <span class="hljs-keyword">new</span> <span class="hljs-built_in">WeakMap</span>()

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isObject</span>(<span class="hljs-params">value</span>) </span>&#123;
  <span class="hljs-keyword">return</span> value != <span class="hljs-literal">null</span> && (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"object"</span> || <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"function"</span>)
&#125;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getSymbolKeys</span>(<span class="hljs-params">value</span>) </span>&#123;
  <span class="hljs-keyword">let</span> keys = <span class="hljs-built_in">Object</span>.getOwnPropertySymbols(value)
  keys = keys.filter(<span class="hljs-function">(<span class="hljs-params">key</span>) =></span> value.propertyIsEnumerable(key))
  <span class="hljs-keyword">return</span> keys
&#125;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getAllKeys</span>(<span class="hljs-params">value</span>) </span>&#123;
  <span class="hljs-keyword">let</span> keys = <span class="hljs-built_in">Object</span>.keys(value)
  keys = [...keys, ...getSymbolKeys(value)]
  <span class="hljs-keyword">return</span> keys
&#125;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cloneDeep</span>(<span class="hljs-params">data</span>) </span>&#123;
  <span class="hljs-keyword">let</span> result = <span class="hljs-literal">null</span>

  <span class="hljs-keyword">if</span> (!isObject(data)) &#123;
    <span class="hljs-keyword">return</span> data
  &#125;

  <span class="hljs-keyword">const</span> isArray = <span class="hljs-built_in">Array</span>.isArray(data)

  <span class="hljs-keyword">if</span> (isArray) &#123;
    result = []
  &#125; <span class="hljs-keyword">else</span> &#123;
    result = <span class="hljs-built_in">Object</span>.create(<span class="hljs-built_in">Object</span>.getPrototypeOf(data))
  &#125;

  <span class="hljs-keyword">if</span> (hash.has(data)) &#123;
    <span class="hljs-keyword">return</span> hash.get(data)
  &#125; <span class="hljs-keyword">else</span> &#123;
    hash.set(data, result)
  &#125;

  <span class="hljs-keyword">const</span> keys = getAllKeys(data)

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < keys.length; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">const</span> key = keys[i]
    <span class="hljs-keyword">const</span> val = data[key]
    result[key] = cloneDeep(val)
  &#125;

  <span class="hljs-keyword">return</span> result
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-59">64. Promise reject的时候自动retry</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fretry-promise-on-rejection" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/retry-promise-on-rejection" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;() => Promise<any>&#125;</span> <span class="hljs-variable">fetcher</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number&#125;</span> <span class="hljs-variable">maximumRetryCount</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;Promise<any>&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fetchWithAutoRetry</span>(<span class="hljs-params">fetcher, maximumRetryCount</span>) </span>&#123;
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-keyword">async</span> (resolve, reject) => &#123;
    <span class="hljs-keyword">let</span> error
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i <= maximumRetryCount; i += <span class="hljs-number">1</span>) &#123;
      <span class="hljs-keyword">await</span> fetcher().then(<span class="hljs-function">(<span class="hljs-params">res</span>) =></span> &#123;
        resolve(res)
      &#125;).catch(<span class="hljs-function">(<span class="hljs-params">err</span>) =></span> &#123;
        error = err
      &#125;)
    &#125;
    reject(error)
  &#125;)
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-60">65. 添加千位分隔符</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fadd-comma-to-number" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/add-comma-to-number" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number&#125;</span> <span class="hljs-variable">num</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;string&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addComma</span>(<span class="hljs-params">num</span>) </span>&#123;
  num = <span class="hljs-string">`<span class="hljs-subst">$&#123;num&#125;</span>`</span>
  <span class="hljs-keyword">const</span> reg = <span class="hljs-regexp">/\B(?=(\d&#123;3&#125;)+$)/g</span>
  <span class="hljs-keyword">const</span> decimalPlaces = num.split(<span class="hljs-string">'.'</span>)[<span class="hljs-number">1</span>]
  <span class="hljs-keyword">let</span> integerBits = num.split(<span class="hljs-string">'.'</span>)[<span class="hljs-number">0</span>]
  integerBits = integerBits.replace(reg, <span class="hljs-string">','</span>)

  <span class="hljs-keyword">if</span> (decimalPlaces) &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;integerBits&#125;</span>.<span class="hljs-subst">$&#123;decimalPlaces&#125;</span>`</span>
  &#125;
  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;integerBits&#125;</span>`</span>
  
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-61">66. 去掉数组中的重复元素</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fremove-duplicates-from-an-array" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/remove-duplicates-from-an-array" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;any[]&#125;</span> <span class="hljs-variable">arr</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deduplicate</span>(<span class="hljs-params">arr</span>) </span>&#123;
  <span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>()
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < arr.length; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">if</span> (map.has(arr[i])) &#123;
      arr.splice(i, <span class="hljs-number">1</span>)
      i -= <span class="hljs-number">1</span>
    &#125; <span class="hljs-keyword">else</span> &#123;
      map.set(arr[i], <span class="hljs-literal">true</span>)
    &#125;
  &#125;
  <span class="hljs-keyword">return</span> arr
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-62">69. 实现<code>_.isEqual()</code></h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-deep-equal-isEqual" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-deep-equal-isEqual" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">const</span> getSymbolKeys = <span class="hljs-function">(<span class="hljs-params">obj</span>) =></span> &#123;
  <span class="hljs-keyword">let</span> symbolKeys = <span class="hljs-built_in">Object</span>.getOwnPropertySymbols(obj)
  symbolKeys = [...symbolKeys].filter(<span class="hljs-function">(<span class="hljs-params">key</span>) =></span> &#123;
    <span class="hljs-keyword">return</span> obj.propertyIsEnumerable(key)
  &#125;)
  <span class="hljs-keyword">return</span> symbolKeys
&#125;

<span class="hljs-keyword">const</span> getAllKeys = <span class="hljs-function">(<span class="hljs-params">obj</span>) =></span> &#123;
  <span class="hljs-keyword">let</span> keys = <span class="hljs-built_in">Object</span>.keys(obj)
  keys = [...keys, ...getSymbolKeys(obj)]
  <span class="hljs-keyword">return</span> keys
&#125;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isObject</span>(<span class="hljs-params">value</span>) </span>&#123;
  <span class="hljs-keyword">return</span> value != <span class="hljs-literal">null</span> && (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"object"</span> || <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"function"</span>)
&#125;

<span class="hljs-keyword">const</span> hash = <span class="hljs-keyword">new</span> <span class="hljs-built_in">WeakMap</span>()

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;any&#125;</span> <span class="hljs-variable">a</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;any&#125;</span> <span class="hljs-variable">b</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;boolean&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isEqual</span>(<span class="hljs-params">a, b</span>) </span>&#123;
  <span class="hljs-keyword">let</span> result = <span class="hljs-literal">true</span>

  <span class="hljs-keyword">const</span> equal = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (!isObject(a) || !isObject(b)) &#123;
      result = (a === b)
      <span class="hljs-keyword">return</span> 
    &#125;

    <span class="hljs-keyword">if</span> (hash.has(a) && hash.has(b)) &#123;
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    &#125;

    <span class="hljs-keyword">const</span> aKeys = getAllKeys(a)
    <span class="hljs-keyword">const</span> bKeys = getAllKeys(b)

    <span class="hljs-keyword">if</span> (aKeys.length !== bKeys.length) &#123;
      result = <span class="hljs-literal">false</span>
      <span class="hljs-keyword">return</span>
    &#125;

    hash.set(a, <span class="hljs-literal">true</span>)
    hash.set(b, <span class="hljs-literal">true</span>)

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < aKeys.length; i += <span class="hljs-number">1</span>) &#123;
      <span class="hljs-keyword">const</span> key = aKeys[i]
      <span class="hljs-keyword">const</span> aValue = a[key]
      <span class="hljs-keyword">const</span> bValue = b[key]
      <span class="hljs-keyword">if</span> (!isObject(aValue) || !isObject(bValue)) &#123;
        <span class="hljs-keyword">if</span> (aValue !== bValue) &#123;
          result = <span class="hljs-literal">false</span>
          <span class="hljs-keyword">break</span>
        &#125;
      &#125; <span class="hljs-keyword">else</span> &#123;
        isEqual(aValue, bValue)
      &#125;
    &#125;
  &#125;

  equal(a, b)
  
  <span class="hljs-keyword">return</span> result
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-63">79. snake_case转换为camelCase</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fconvert-snake_case-to-camelCase" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/convert-snake_case-to-camelCase" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">str</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;string&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">snakeToCamel</span>(<span class="hljs-params">str</span>) </span>&#123;
  <span class="hljs-keyword">const</span> reg = <span class="hljs-regexp">/([^_])_([^_])/g</span>
  <span class="hljs-keyword">return</span> str.replaceAll(reg, <span class="hljs-function">(<span class="hljs-params">_, p1, p2</span>) =></span> <span class="hljs-string">`<span class="hljs-subst">$&#123;p1&#125;</span><span class="hljs-subst">$&#123;p2.toUpperCase()&#125;</span>`</span>)
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-64">camelCase转换为snake_case</h3>
<blockquote>
<p>未经过边界情况的测试</p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/*
 * @param &#123;string&#125; str
 * @return &#123;string&#125;
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">camelToSnake</span>(<span class="hljs-params">str</span>) </span>&#123;
  <span class="hljs-keyword">const</span> reg = <span class="hljs-regexp">/\B(\w)([A-Z])\B/g</span>
  <span class="hljs-keyword">return</span> str.replaceAll(reg, <span class="hljs-function">(<span class="hljs-params">_, p1, p2</span>) =></span> <span class="hljs-string">`<span class="hljs-subst">$&#123;p1&#125;</span>_<span class="hljs-subst">$&#123;p2.toLowerCase()&#125;</span>`</span>)
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-65">81. 合并已排序的数组</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fmerge-sorted-arrays" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/merge-sorted-arrays" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts">
<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[][]&#125;</span> <span class="hljs-variable">arrList</span></span>
 * non-descending integer array
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;number[]&#125;</span> </span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">merge</span>(<span class="hljs-params">arrList</span>) </span>&#123;
  <span class="hljs-keyword">let</span> result = []
  <span class="hljs-keyword">let</span> offset = <span class="hljs-literal">false</span>

  <span class="hljs-keyword">const</span> isMerge = <span class="hljs-function">() =></span> &#123;
    <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < arrList.length; i += <span class="hljs-number">1</span>) &#123;
      <span class="hljs-keyword">if</span> (arrList[i].length > <span class="hljs-number">0</span>) count += <span class="hljs-number">1</span>
      <span class="hljs-keyword">if</span> (count >= <span class="hljs-number">2</span>) <span class="hljs-keyword">break</span>
    &#125;
    <span class="hljs-keyword">return</span> count >= <span class="hljs-number">2</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>
  &#125;

  offset = isMerge()

  <span class="hljs-keyword">while</span> (offset) &#123;
    <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>
    <span class="hljs-keyword">let</span> min = <span class="hljs-built_in">Number</span>.MAX_VALUE
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < arrList.length; i += <span class="hljs-number">1</span>) &#123;
      <span class="hljs-keyword">if</span> (arrList[i][<span class="hljs-number">0</span>] <= min) &#123;
        index = i
        min = arrList[i][<span class="hljs-number">0</span>]
      &#125;
    &#125;
    result.push(...arrList[index].splice(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>))
    offset = isMerge()
  &#125;

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < arrList.length; i += <span class="hljs-number">1</span>) &#123;
    result = [...result, ...arrList[i]]
  &#125;


  <span class="hljs-keyword">return</span> result 
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-66">85. 实现 <code>_.get()</code></h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-lodash-get" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-lodash-get" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;object&#125;</span> <span class="hljs-variable">source</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string | string[]&#125;</span> <span class="hljs-variable">path</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;any&#125;</span> </span>[defaultValue]
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;any&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get</span>(<span class="hljs-params">source, path, defaultValue = <span class="hljs-literal">undefined</span></span>) </span>&#123;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> path === <span class="hljs-string">'string'</span>) &#123;
    path = path.split(<span class="hljs-string">'.'</span>)
  &#125;

  <span class="hljs-keyword">const</span> newPath = []
  <span class="hljs-keyword">const</span> reg = <span class="hljs-regexp">/^([A-Za-z]+)\[([0-9]+)]$/g</span>
  <span class="hljs-keyword">let</span> result = source

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < path.length; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">if</span> (path[i].includes(<span class="hljs-string">'['</span>)) &#123;
      <span class="hljs-keyword">const</span> arr = reg.exec(path[i])
      newPath.push(arr[<span class="hljs-number">1</span>])
      newPath.push(arr[<span class="hljs-number">2</span>])
    &#125; <span class="hljs-keyword">else</span> &#123;
      newPath.push(path[i])
    &#125;
  &#125;

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < newPath.length; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">if</span> (result === <span class="hljs-literal">undefined</span> || result === <span class="hljs-literal">null</span>) &#123;
      result = defaultValue
      <span class="hljs-keyword">break</span>
    &#125;
    result = result[newPath[i]]
  &#125;

  <span class="hljs-built_in">console</span>.log(result)

  <span class="hljs-keyword">return</span> result ? result : defaultValue
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-67">87. 返回最长的不重复子字符串</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Flongest-substring-with-unique-characters" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/longest-substring-with-unique-characters" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p>使用双指针和hash</p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">str</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;string&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">longestUniqueSubstr</span>(<span class="hljs-params">str</span>) </span>&#123;
  <span class="hljs-keyword">const</span> hash = &#123;&#125;
  <span class="hljs-keyword">let</span> result = <span class="hljs-string">''</span>
  <span class="hljs-keyword">let</span> current = <span class="hljs-string">''</span>
  <span class="hljs-keyword">let</span> start = <span class="hljs-number">0</span>
  <span class="hljs-keyword">let</span> end = <span class="hljs-number">0</span>
  
  <span class="hljs-keyword">while</span> (start <= end && end <= str.length - <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">if</span> (hash[str[end]] === <span class="hljs-literal">undefined</span>) &#123;
      hash[str[end]] = end
    &#125; <span class="hljs-keyword">else</span> &#123;
      start = hash[str[end]] + <span class="hljs-number">1</span>
      hash[str[end]] = end
      <span class="hljs-built_in">Object</span>.keys(hash).forEach(<span class="hljs-function">(<span class="hljs-params">key</span>) =></span> &#123;
        <span class="hljs-keyword">if</span> (hash[key] < start) <span class="hljs-keyword">delete</span> hash[key]
      &#125;)
    &#125;
    current = str.slice(start, end + <span class="hljs-number">1</span>)
    <span class="hljs-keyword">if</span> (result.length < current.length) &#123;
      result = current
    &#125;
    end += <span class="hljs-number">1</span>
  &#125;
  <span class="hljs-keyword">return</span> result
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-68">89. 返回DOM tree中”右边“的元素</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2FNext-Right-Sibiling" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/Next-Right-Sibiling" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts">
<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;HTMLElement&#125;</span> <span class="hljs-variable">root</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;HTMLElement&#125;</span> <span class="hljs-variable">target</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;HTMLElemnt | null&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">nextRightSibling</span>(<span class="hljs-params">root, target</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (!root) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  <span class="hljs-keyword">let</span> result = <span class="hljs-literal">null</span>

  <span class="hljs-keyword">const</span> bfs = <span class="hljs-function">(<span class="hljs-params">nodes</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (nodes.length) &#123;
      <span class="hljs-keyword">let</span> childs = []
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < nodes.length; i += <span class="hljs-number">1</span>) &#123;
        <span class="hljs-keyword">const</span> children = nodes[i].children
        childs = [...childs, ...children]
      &#125;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < childs.length; i += <span class="hljs-number">1</span>) &#123;
        <span class="hljs-keyword">if</span> (childs[i] === target) &#123;
          <span class="hljs-keyword">if</span> (i === childs.length - <span class="hljs-number">1</span>) &#123;
            result = <span class="hljs-literal">null</span>
            <span class="hljs-keyword">return</span>
          &#125; <span class="hljs-keyword">else</span> &#123;
            result = childs[i + <span class="hljs-number">1</span>]
            <span class="hljs-keyword">return</span>
          &#125;
        &#125;
      &#125;
      bfs(childs)
    &#125;
  &#125;

  bfs([root])

  <span class="hljs-keyword">return</span> result   
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-69">90. 实现<code>instanceof</code></h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fwrite-your-own-instanceof" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/write-your-own-instanceof" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;any&#125;</span> <span class="hljs-variable">obj</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;target&#125;</span> <span class="hljs-variable">target</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;boolean&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myInstanceOf</span>(<span class="hljs-params">obj, target</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj !== <span class="hljs-string">'object'</span> || obj === <span class="hljs-literal">null</span>) &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  &#125;
  <span class="hljs-keyword">const</span> proto = <span class="hljs-built_in">Object</span>.getPrototypeOf(obj)
  <span class="hljs-keyword">if</span> (proto === <span class="hljs-literal">null</span>) &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  &#125;
  <span class="hljs-keyword">if</span> (proto === target.prototype) &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  &#125; <span class="hljs-keyword">else</span> &#123;
    <span class="hljs-keyword">return</span> myInstanceOf(proto, target)
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-70">91. 反转二叉树</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Finvert-a-binary-tree" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/invert-a-binary-tree" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Node&#125;</span> <span class="hljs-variable">node</span></span>
 * <span class="hljs-doctag">@returns <span class="hljs-type">&#123;Node&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">invert</span>(<span class="hljs-params">node</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (!node) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>

  <span class="hljs-keyword">const</span> traverside = <span class="hljs-function">(<span class="hljs-params">node</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (node) &#123;
      <span class="hljs-keyword">const</span> left = node.left
      <span class="hljs-keyword">const</span> right = node.right
      node.right = left
      node.left = right
      traverside(left)
      traverside(right)
    &#125;
  &#125;

  traverside(node)

  <span class="hljs-keyword">return</span> node
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-71">92. Promise节流</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fthrottle-Promises" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/throttle-Promises" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;() => Promise<any>&#125;</span> <span class="hljs-variable">func</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number&#125;</span> <span class="hljs-variable">max</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;Promise&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">throttlePromises</span>(<span class="hljs-params">funcs, max</span>)</span>&#123;
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>&#123;
    <span class="hljs-keyword">const</span> result = []
    <span class="hljs-keyword">const</span> len = funcs.length
    <span class="hljs-keyword">let</span> jobs = <span class="hljs-number">0</span>
    <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>

    <span class="hljs-keyword">const</span> handleJobs = <span class="hljs-function">() =></span> &#123;
      <span class="hljs-keyword">while</span> (jobs < max && funcs.length) &#123;
        <span class="hljs-keyword">let</span> promise = funcs.shift()()
        <span class="hljs-keyword">let</span> index = len - funcs.length - <span class="hljs-number">1</span>
        promise = promise <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Promise</span> ? promise : <span class="hljs-built_in">Promise</span>.resolve(promise)
        promise.then(<span class="hljs-function">(<span class="hljs-params">res</span>) =></span> &#123;
          result[index] = res
          count += <span class="hljs-number">1</span>
          jobs -= <span class="hljs-number">1</span>
          <span class="hljs-keyword">if</span> (count === len) &#123;
            resolve(result)
          &#125;
          handleJobs()
        &#125;).catch(<span class="hljs-function">(<span class="hljs-params">err</span>) =></span> &#123;
          reject(err)
        &#125;)
        jobs += <span class="hljs-number">1</span>
      &#125;
    &#125;
    handleJobs()
  &#125;)
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-72">94. 实现<code>Object.create</code></h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-your-own-Object-create" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-your-own-Object-create" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;any&#125;</span> <span class="hljs-variable">proto</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;object&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myObjectCreate</span>(<span class="hljs-params">proto</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (!(proto <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Object</span>)) &#123;
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>()
  &#125;
  <span class="hljs-keyword">const</span> obj = &#123;&#125;
  obj.__proto__ = proto
  <span class="hljs-keyword">return</span> obj
&#125;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;any&#125;</span> <span class="hljs-variable">proto</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;object&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myObjectCreate</span>(<span class="hljs-params">proto</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (!(proto <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Object</span>)) &#123;
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>()
  &#125;
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Constructor</span> (<span class="hljs-params"></span>) </span>&#123;&#125;
  Constructor.prototype = proto
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Constructor();
&#125;

<span class="hljs-comment">// Error</span>
<span class="hljs-comment">// ES6的class语法无法修改类的Constructor.prototype</span>
<span class="hljs-comment">// https://stackoverflow.com/questions/37680766/how-to-change-classs-prototype-in-es6</span>
<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;any&#125;</span> <span class="hljs-variable">proto</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;object&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myObjectCreate</span>(<span class="hljs-params">proto</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (!(proto <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Object</span>)) &#123;
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>()
  &#125;
  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Constructor</span> </span>&#123;&#125;
  Constructor.prototype = proto
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Constructor();
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-73">95. 实现 String.prototype.trim()</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-String-prototype-trim" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-String-prototype-trim" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">str</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;string&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">trim</span>(<span class="hljs-params">str</span>) </span>&#123;
  <span class="hljs-keyword">return</span> str.replace(<span class="hljs-regexp">/^\s+|\s+$/g</span>, <span class="hljs-string">''</span>)
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-74">97. 压缩字符串</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fcompress-a-string" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/compress-a-string" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">str</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;string&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compress</span>(<span class="hljs-params">str</span>) </span>&#123;
  <span class="hljs-keyword">let</span> s = str[<span class="hljs-number">0</span>]
  <span class="hljs-keyword">let</span> p = str[<span class="hljs-number">0</span>]
  <span class="hljs-keyword">let</span> n = <span class="hljs-number">1</span>

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i < str.length; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">if</span> (str[i] === p) &#123;
      n += <span class="hljs-number">1</span>
      <span class="hljs-keyword">if</span> (n > <span class="hljs-number">2</span>) &#123;
        <span class="hljs-keyword">let</span> arr = s.split(<span class="hljs-string">''</span>)
        arr.pop()
        s = <span class="hljs-string">`<span class="hljs-subst">$&#123;arr.join(<span class="hljs-string">''</span>)&#125;</span><span class="hljs-subst">$&#123;n&#125;</span>`</span>
      &#125; <span class="hljs-keyword">else</span> &#123;
        s = <span class="hljs-string">`<span class="hljs-subst">$&#123;s&#125;</span><span class="hljs-subst">$&#123;n&#125;</span>`</span>
      &#125;
    &#125; <span class="hljs-keyword">else</span> &#123;
      p = str[i]
      n = <span class="hljs-number">1</span>
      s = <span class="hljs-string">`<span class="hljs-subst">$&#123;s&#125;</span><span class="hljs-subst">$&#123;str[i]&#125;</span>`</span>
    &#125;
  &#125;

  <span class="hljs-keyword">return</span> s
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-75">99. 在HTML字符串中抽出所有的<code><a/></code></h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fextract-all-anchor-elements-from-HTML-string" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/extract-all-anchor-elements-from-HTML-string" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">str</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;string[]&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">extract</span>(<span class="hljs-params">str</span>) </span>&#123;
  <span class="hljs-keyword">const</span> result = []
  <span class="hljs-comment">// (\s[^>]*)?, 如果有[^>]，就必须有空格</span>
  <span class="hljs-comment">// [^>]也包括了空格</span>
  <span class="hljs-keyword">const</span> reg = <span class="hljs-regexp">/<a(\s[^>]*)?>.*?<\s*\/\s*a>/g</span>
  <span class="hljs-keyword">let</span> controller = <span class="hljs-literal">true</span>

  <span class="hljs-keyword">while</span> (controller) &#123;
    <span class="hljs-keyword">const</span> match = reg.exec(str)
    <span class="hljs-keyword">if</span> (match) &#123;
      result.push(match[<span class="hljs-number">0</span>])
    &#125; <span class="hljs-keyword">else</span> &#123;
      controller = <span class="hljs-literal">false</span>
    &#125;
  &#125;

  <span class="hljs-keyword">return</span> result
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-76">100. 检测链表中是否有环</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fdetect-circle-in-linked-list" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/detect-circle-in-linked-list" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Node&#125;</span> <span class="hljs-variable">head</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;boolean&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasCircle</span>(<span class="hljs-params">head</span>) </span>&#123;
  <span class="hljs-keyword">let</span> fast = head
  <span class="hljs-keyword">let</span> slow = head
  <span class="hljs-keyword">let</span> offset = <span class="hljs-literal">true</span>
  <span class="hljs-keyword">let</span> result = <span class="hljs-literal">false</span>

  <span class="hljs-keyword">while</span> (offset && fast && slow) &#123;
    fast = fast?.next
    slow = slow?.next?.next
    <span class="hljs-keyword">if</span> (fast === slow) &#123;
      result = <span class="hljs-literal">true</span>
      offset = <span class="hljs-literal">false</span>
    &#125;
  &#125;

  <span class="hljs-keyword">return</span> result
&#125;

<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-77">102. 验证括号字符串</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fvalidate-parenthesis" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/validate-parenthesis" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Stack</span> </span>&#123;
  <span class="hljs-title">constructor</span> (<span class="hljs-params"></span>) &#123;
    <span class="hljs-built_in">this</span>.stack = []
    <span class="hljs-built_in">Object</span>.defineProperties(<span class="hljs-built_in">this</span>, &#123;
      <span class="hljs-attr">size</span>: &#123;
        set () &#123;
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>()
        &#125;,
        get () &#123;
          <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.stack.length
        &#125;
      &#125;
    &#125;)
  &#125;

  push (n) &#123;
    <span class="hljs-built_in">this</span>.stack.push(n)
  &#125;

  pop () &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.stack.pop()
  &#125;

  peek () &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.stack[<span class="hljs-built_in">this</span>.stack.length - <span class="hljs-number">1</span>]
  &#125;
&#125;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">str</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;boolean&#125;</span> </span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validate</span>(<span class="hljs-params">str</span>) </span>&#123;
  <span class="hljs-keyword">const</span> stack = <span class="hljs-keyword">new</span> Stack()
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < str.length; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">if</span> (stack.size === <span class="hljs-number">0</span>) &#123;
      stack.push(str[i])
    &#125; <span class="hljs-keyword">else</span> &#123;
      <span class="hljs-keyword">const</span> top = stack.peek()
      <span class="hljs-keyword">if</span> (top === <span class="hljs-string">'['</span> && str[i] === <span class="hljs-string">']'</span>) &#123;
        stack.pop()
        <span class="hljs-keyword">continue</span>
      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (top === <span class="hljs-string">'&#123;'</span> && str[i] === <span class="hljs-string">'&#125;'</span>) &#123;
        stack.pop()
        <span class="hljs-keyword">continue</span>
      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (top === <span class="hljs-string">'('</span> && str[i] === <span class="hljs-string">')'</span>) &#123;
        stack.pop()
        <span class="hljs-keyword">continue</span>
      &#125; <span class="hljs-keyword">else</span> &#123;
        stack.push(str[i])
      &#125;
    &#125;
  &#125;
  <span class="hljs-keyword">return</span> stack.size === <span class="hljs-number">0</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-78">103. 实现Math.sqrt()</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-Math-sqrt" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-Math-sqrt" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p>使用二分法</p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;any&#125;</span> <span class="hljs-variable">x</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;number&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mySqrt</span>(<span class="hljs-params">x</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">typeof</span> x === <span class="hljs-string">"number"</span> && !<span class="hljs-built_in">isNaN</span>(x) && x >= <span class="hljs-number">0</span>)) <span class="hljs-keyword">return</span> <span class="hljs-literal">NaN</span>
  <span class="hljs-keyword">if</span> (x === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (x === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>

  <span class="hljs-keyword">let</span> result = <span class="hljs-literal">null</span>

  <span class="hljs-keyword">const</span> sqrt = <span class="hljs-function">(<span class="hljs-params">start, end</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (start <= end) &#123;
      <span class="hljs-keyword">const</span> midd = <span class="hljs-built_in">Math</span>.floor((end + start) / <span class="hljs-number">2</span>)
      <span class="hljs-keyword">if</span> (midd ** <span class="hljs-number">2</span> < x) &#123;
        result = midd
        sqrt(midd + <span class="hljs-number">1</span>, end)
      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (midd ** <span class="hljs-number">2</span> > x) &#123;
        sqrt(start, midd - <span class="hljs-number">1</span>)
      &#125; <span class="hljs-keyword">else</span> &#123;
        result = midd
      &#125;
    &#125;
  &#125;

  sqrt(<span class="hljs-number">0</span>, x)

  <span class="hljs-keyword">return</span> result
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-79">104. 按层遍历DOM树</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2FTraverse-DOM-level-by-level" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/Traverse-DOM-level-by-level" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts">
<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;HTMLElement | null&#125;</span> <span class="hljs-variable">root</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;HTMLElement[]&#125;</span></span>
 */</span>
<span class="hljs-comment">// bfs</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">flatten</span>(<span class="hljs-params">root</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (!root) <span class="hljs-keyword">return</span> []

  <span class="hljs-keyword">const</span> result = [root]

  <span class="hljs-keyword">const</span> bfs = <span class="hljs-function">(<span class="hljs-params">nodes</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (nodes.length) &#123;
      <span class="hljs-keyword">const</span> children = []
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < nodes.length; i += <span class="hljs-number">1</span>) &#123;
        <span class="hljs-keyword">const</span> child = nodes[i].children
        children.push(...child)
      &#125;
      result.push(...children)
      bfs(children)
    &#125; 
  &#125;

  bfs([root])

  <span class="hljs-keyword">return</span> result
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-80">105. 找到第一个重复的字符</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Ffind-the-first-duplicate-character-in-a-string" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/find-the-first-duplicate-character-in-a-string" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p>使用hash</p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">str</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;string | null&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">firstDuplicate</span>(<span class="hljs-params">str</span>) </span>&#123;
  <span class="hljs-keyword">let</span> result = <span class="hljs-literal">null</span>
  <span class="hljs-keyword">const</span> hash = &#123;&#125;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < str.length; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">const</span> key = str[i]
    <span class="hljs-keyword">if</span> (!hash[key]) &#123;
      hash[key] = <span class="hljs-literal">true</span>
    &#125; <span class="hljs-keyword">else</span> &#123;
      result = key
      <span class="hljs-keyword">break</span>
    &#125;
  &#125;
  <span class="hljs-keyword">return</span> result
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-81">106. 找到和为0的两个数</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2FFind-two-numbers-that-sum-up-to-0" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/Find-two-numbers-that-sum-up-to-0" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p>使用hash法</p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts">
<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">arr</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;number[]&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findTwo</span>(<span class="hljs-params">arr</span>) </span>&#123;
  <span class="hljs-keyword">const</span> hash = &#123;&#125;
  <span class="hljs-keyword">let</span> result = <span class="hljs-literal">null</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < arr.length; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">if</span> (!hash[arr[i]]) hash[arr[i]] = [i]
    <span class="hljs-keyword">else</span> hash[arr[i]].push(i)
  &#125; 

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < arr.length; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">const</span> a = arr[i]
    <span class="hljs-keyword">const</span> index = hash[a].shift()
    <span class="hljs-keyword">const</span> b = <span class="hljs-number">0</span> - a
    <span class="hljs-keyword">if</span> (hash[b] && hash[b].length > <span class="hljs-number">0</span>) &#123;
      result = [index, hash[b][<span class="hljs-number">0</span>]]
      <span class="hljs-keyword">break</span>
    &#125; <span class="hljs-keyword">else</span> &#123;
      hash[a].unshift(index)
    &#125;
  &#125;

  <span class="hljs-keyword">return</span> result
&#125;

<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-82">107. 找到最大的差</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2FFind-the-largest-difference" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/Find-the-largest-difference" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">arr</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;number&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">largestDiff</span>(<span class="hljs-params">arr</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (arr.length === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (arr.length === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>

  <span class="hljs-keyword">let</span> min = <span class="hljs-literal">Infinity</span>
  <span class="hljs-keyword">let</span> max = -<span class="hljs-literal">Infinity</span>

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < arr.length; i += <span class="hljs-number">1</span>) &#123;
    min = <span class="hljs-built_in">Math</span>.min(arr[i], min)
    max = <span class="hljs-built_in">Math</span>.max(arr[i], max)
  &#125;

  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.abs(min - max)
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-83">108. 用队列(Queue)实现栈(Stack)</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2FImplement-a-Stack-by-using-Queue" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/Implement-a-Stack-by-using-Queue" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p>和13题类似</p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/* you can use this Queue which is bundled together with your code
class Queue &#123;
  enqueue(element) &#123;
    // add new element to the queue
  &#125;
  peek() &#123; 
    // return the head element
  &#125;
  dequeue() &#123; 
    // remove head element from the queue
  &#125;
  size() &#123; 
    // return the queue size
  &#125;
&#125;
*/</span>

<span class="hljs-comment">// you need to complete the following Stack, using only Queue</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Stack</span> </span>&#123;
  <span class="hljs-title">constructor</span> (<span class="hljs-params"></span>) &#123;
    <span class="hljs-built_in">this</span>.queue = <span class="hljs-keyword">new</span> Queue()
    <span class="hljs-built_in">this</span>.stack = <span class="hljs-keyword">new</span> Queue()
  &#125;

  <span class="hljs-function"><span class="hljs-title">push</span>(<span class="hljs-params">element</span>)</span> &#123;
    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">this</span>.stack.size()) &#123;
      <span class="hljs-built_in">this</span>.queue.enqueue(<span class="hljs-built_in">this</span>.stack.dequeue())
    &#125;
    <span class="hljs-built_in">this</span>.stack.enqueue(element)
    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">this</span>.queue.size()) &#123;
      <span class="hljs-built_in">this</span>.stack.enqueue(<span class="hljs-built_in">this</span>.queue.dequeue())
    &#125;
  &#125;

  <span class="hljs-function"><span class="hljs-title">peek</span>(<span class="hljs-params"></span>)</span> &#123; 
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.stack.peek()
  &#125;

  <span class="hljs-function"><span class="hljs-title">pop</span>(<span class="hljs-params"></span>)</span> &#123; 
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.stack.dequeue()
  &#125;

  <span class="hljs-function"><span class="hljs-title">size</span>(<span class="hljs-params"></span>)</span> &#123; 
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.stack.size()
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-84">109. 实现<code>Math.pow()</code></h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-Math-pow" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-Math-pow" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p>使用分治法，减少乘的次数</p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number&#125;</span> <span class="hljs-variable">base</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number&#125;</span> <span class="hljs-variable">power</span></span> - integer
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;number&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pow</span>(<span class="hljs-params">base, power</span>)</span>&#123;
  <span class="hljs-keyword">const</span> isNegativeIndex = power < <span class="hljs-number">0</span>
  <span class="hljs-keyword">const</span> isNegative = base < <span class="hljs-number">0</span>
  
  <span class="hljs-keyword">const</span> _pow = <span class="hljs-function">(<span class="hljs-params">base, power</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (power === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>
    <span class="hljs-keyword">if</span> (power === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> base
    <span class="hljs-keyword">let</span> result = power % <span class="hljs-number">2</span> === <span class="hljs-number">0</span> ?
      pow(base * base, power / <span class="hljs-number">2</span>)
      :
      pow(base * base, (power - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>) * base
    <span class="hljs-keyword">return</span> result
  &#125;

  <span class="hljs-keyword">let</span> result = _pow(<span class="hljs-built_in">Math</span>.abs(base), <span class="hljs-built_in">Math</span>.abs(power))

  result = isNegativeIndex ? <span class="hljs-number">1</span> / result : result
  result = isNegative ? result * -<span class="hljs-number">1</span> : result

  <span class="hljs-keyword">return</span> result
&#125;


<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-85">116. 实现Object.is()</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-Object.is" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-Object.is" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fmedium.com%2Fcoding-at-dawn%2Fis-negative-zero-0-a-number-in-javascript-c62739f80114" target="_blank" rel="nofollow noopener noreferrer" title="https://medium.com/coding-at-dawn/is-negative-zero-0-a-number-in-javascript-c62739f80114" ref="nofollow noopener noreferrer">medium.com/coding-at-d…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;any&#125;</span> <span class="hljs-variable">a</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;any&#125;</span> <span class="hljs-variable">b</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;boolean&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">is</span>(<span class="hljs-params">a, b</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> a === <span class="hljs-string">'number'</span> && <span class="hljs-keyword">typeof</span> b === <span class="hljs-string">'number'</span>) &#123;
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(a) && <span class="hljs-built_in">isNaN</span>(b)) &#123;
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a === <span class="hljs-number">0</span> && b === <span class="hljs-number">0</span>) &#123;
      <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>/a === <span class="hljs-number">1</span>/b
    &#125;
  &#125;
  <span class="hljs-keyword">return</span> a === b
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-86">119. 创建一个tokenizer</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fcreate-a-tokenizer" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/create-a-tokenizer" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts">
<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">str</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;Generator&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">tokenize</span>(<span class="hljs-params">str</span>) </span>&#123;
  <span class="hljs-keyword">let</span> temp = str.replace(<span class="hljs-regexp">/\s/g</span>, <span class="hljs-string">''</span>)
  <span class="hljs-keyword">let</span> num = <span class="hljs-string">''</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < temp.length; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">const</span> s = temp[i]
    <span class="hljs-keyword">switch</span> (s) &#123;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'+'</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">'-'</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">'*'</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">'/'</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">'('</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">')'</span>:
        <span class="hljs-keyword">if</span> (num !== <span class="hljs-string">''</span>) &#123;
          <span class="hljs-keyword">yield</span> num
          num = <span class="hljs-string">''</span>
        &#125;
        <span class="hljs-keyword">yield</span> s
        <span class="hljs-keyword">break</span>
      <span class="hljs-attr">default</span>:
        num += s
        <span class="hljs-keyword">break</span>
    &#125;
  &#125;

  <span class="hljs-keyword">if</span> (num !== <span class="hljs-string">''</span>) &#123;
    <span class="hljs-keyword">yield</span> num
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-87">122. 实现 memoizeOne()</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-memoizeOne" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-memoizeOne" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">const</span> compare = <span class="hljs-function">(<span class="hljs-params">oldKey, newKey</span>) =></span> &#123;
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(oldKey) && <span class="hljs-built_in">Array</span>.isArray(newKey) && oldKey.length === newKey.length) &#123;
    <span class="hljs-keyword">return</span> oldKey.every(<span class="hljs-function">(<span class="hljs-params">key, i</span>) =></span> key === newKey[i])
  &#125;
  <span class="hljs-keyword">return</span> oldKey === newKey
&#125;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Function&#125;</span> <span class="hljs-variable">func</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;(args: any[], newArgs: any[]) => boolean&#125;</span> </span>[isEqual]
 * <span class="hljs-doctag">@returns <span class="hljs-type">&#123;any&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">memoizeOne</span>(<span class="hljs-params">func, isEqual = compare</span>) </span>&#123;
  <span class="hljs-keyword">let</span> oldKey = <span class="hljs-built_in">Symbol</span>()
  <span class="hljs-keyword">let</span> catchResult = <span class="hljs-literal">null</span>
  <span class="hljs-keyword">let</span> that = <span class="hljs-literal">null</span>
  <span class="hljs-keyword">let</span> isCall = <span class="hljs-literal">false</span>
  
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">...params</span>) </span>&#123;
    <span class="hljs-keyword">if</span> (that !== <span class="hljs-built_in">this</span>) &#123;
      oldKey = <span class="hljs-built_in">Symbol</span>()
      that = <span class="hljs-built_in">this</span>
    &#125; 

    <span class="hljs-keyword">if</span> (isCall && isEqual(oldKey, [...params])) &#123;
      <span class="hljs-keyword">return</span> catchResult
    &#125;

    isCall = <span class="hljs-literal">true</span>
    oldKey = [...params]
    <span class="hljs-keyword">const</span> result = func.apply(<span class="hljs-built_in">this</span>, [...params])
    catchResult = result
    <span class="hljs-keyword">return</span> result
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-88">123. 实现 Promise.prototype.finally()</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-Promise-prototype-finally" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-Promise-prototype-finally" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Promise<any>&#125;</span> <span class="hljs-variable">promise</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;() => void&#125;</span> <span class="hljs-variable">onFinally</span></span>
 * <span class="hljs-doctag">@returns <span class="hljs-type">&#123;Promise<any>&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myFinally</span>(<span class="hljs-params">promise, onFinally</span>) </span>&#123;
  <span class="hljs-keyword">return</span> promise.then(<span class="hljs-function">(<span class="hljs-params">res</span>) =></span> &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(onFinally()).then(<span class="hljs-function">() =></span> &#123;
      <span class="hljs-keyword">return</span> res
    &#125;)
  &#125;).catch(<span class="hljs-function">(<span class="hljs-params">err</span>) =></span> &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(onFinally()).then(<span class="hljs-function">() =></span> &#123;
      <span class="hljs-keyword">throw</span> err
    &#125;)
  &#125;)
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-89">125. 实现classNames()</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-classnames" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-classnames" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getKeys</span> (<span class="hljs-params">obj</span>) </span>&#123;
  <span class="hljs-keyword">return</span> [...Object.keys(obj)]
&#125;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getType</span> (<span class="hljs-params">data</span>) </span>&#123;
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">type</span> = <span class="hljs-built_in">Object</span>.prototype.toString.call(data);
  <span class="hljs-keyword">return</span> <span class="hljs-regexp">/^\[object\s+([A-Za-z]+)\]$/</span>.exec(<span class="hljs-keyword">type</span>)[<span class="hljs-number">1</span>].toLocaleLowerCase()
&#125;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">trim</span>(<span class="hljs-params">str</span>) </span>&#123;
  <span class="hljs-keyword">return</span> str.replace(<span class="hljs-regexp">/^\s+|\s+$/g</span>, <span class="hljs-string">''</span>)
&#125;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNumberTypeOrStringNumber</span> (<span class="hljs-params">data</span>) </span>&#123;
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">type</span> = getType(data)
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">type</span> === <span class="hljs-string">'number'</span> || <span class="hljs-keyword">type</span> === <span class="hljs-string">'string'</span>) &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  &#125;
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
&#125;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;any[]&#125;</span> <span class="hljs-variable">args</span></span>
 * <span class="hljs-doctag">@returns <span class="hljs-type">&#123;string&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">classNames</span>(<span class="hljs-params">...args</span>) </span>&#123;
  <span class="hljs-keyword">let</span> result = <span class="hljs-string">''</span>

  <span class="hljs-keyword">const</span> _classNames = <span class="hljs-function">(<span class="hljs-params">value</span>) =></span> &#123;
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">type</span> = getType(value)

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">type</span> === <span class="hljs-string">'number'</span>) &#123;
      result += <span class="hljs-string">` <span class="hljs-subst">$&#123;value&#125;</span>`</span>
      <span class="hljs-keyword">return</span>
    &#125;

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">type</span> === <span class="hljs-string">'string'</span>) &#123;
      result += <span class="hljs-string">` <span class="hljs-subst">$&#123;value&#125;</span>`</span>
      <span class="hljs-keyword">return</span>
    &#125;

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">type</span> === <span class="hljs-string">'map'</span> || <span class="hljs-keyword">type</span> === <span class="hljs-string">'object'</span>) &#123;
      <span class="hljs-keyword">const</span> keys = getKeys(value)
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < keys.length; i += <span class="hljs-number">1</span>) &#123;
        <span class="hljs-keyword">const</span> key = keys[i]
        <span class="hljs-keyword">const</span> val = value[key]
        <span class="hljs-keyword">if</span> (val) &#123;
          <span class="hljs-keyword">if</span> (isNumberTypeOrStringNumber(key)) &#123;
            result += <span class="hljs-string">` <span class="hljs-subst">$&#123;key&#125;</span>`</span>
          &#125; <span class="hljs-keyword">else</span> &#123;
            _classNames(val)
          &#125;
        &#125;
      &#125;
      <span class="hljs-keyword">return</span>
    &#125;

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">type</span> === <span class="hljs-string">'set'</span> || <span class="hljs-keyword">type</span> === <span class="hljs-string">'array'</span>) &#123;
      value.forEach(<span class="hljs-function">(<span class="hljs-params">val</span>) =></span> &#123;
        <span class="hljs-keyword">if</span> (val) &#123;
          <span class="hljs-keyword">if</span> (isNumberTypeOrStringNumber(val)) &#123;
            result += <span class="hljs-string">` <span class="hljs-subst">$&#123;val&#125;</span>`</span>
          &#125; <span class="hljs-keyword">else</span> &#123;
            _classNames(val)
          &#125;
        &#125;
      &#125;)
    &#125;
  &#125;

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < args.length; i += <span class="hljs-number">1</span>) &#123;
    _classNames(args[i])
  &#125;

  <span class="hljs-keyword">return</span> trim(result)
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-90">130. 创建LazyMan()</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fcreate-lazyman" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/create-lazyman" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">// interface Laziness &#123;</span>
<span class="hljs-comment">//   sleep: (time: number) => Laziness</span>
<span class="hljs-comment">//   sleepFirst: (time: number) => Laziness</span>
<span class="hljs-comment">//   eat: (food: string) => Laziness</span>
<span class="hljs-comment">// &#125;</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sleep</span> (<span class="hljs-params">time</span>) </span>&#123;
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) </span>&#123;
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =></span> &#123;
      resolve()
    &#125;, time)
  &#125;)
&#125;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">name</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;(log: string) => void&#125;</span> <span class="hljs-variable">logFn</span></span>
 * <span class="hljs-doctag">@returns <span class="hljs-type">&#123;Laziness&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">LazyMan</span>(<span class="hljs-params">name, logFn</span>) </span>&#123;

  <span class="hljs-keyword">const</span> queue = [<span class="hljs-function">() =></span> &#123;
    logFn(<span class="hljs-string">`Hi, I'm <span class="hljs-subst">$&#123;name&#125;</span>.`</span>)
  &#125;]
  <span class="hljs-keyword">let</span> update = <span class="hljs-literal">false</span>

  <span class="hljs-keyword">const</span> handleQueue = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
    update = <span class="hljs-literal">true</span>
    <span class="hljs-keyword">if</span> (update) &#123;
      <span class="hljs-built_in">Promise</span>.resolve().then(<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
        update = <span class="hljs-literal">false</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < queue.length; i += <span class="hljs-number">1</span>) &#123;
          <span class="hljs-keyword">await</span> queue[i]()
        &#125;
      &#125;)
    &#125;
  &#125;

  <span class="hljs-keyword">const</span> laziness = &#123;
    sleep (time) &#123;
      queue.push(<span class="hljs-keyword">async</span> () => &#123;
        <span class="hljs-keyword">await</span> sleep(time * <span class="hljs-number">1000</span>)
        logFn(time > <span class="hljs-number">1</span> ? <span class="hljs-string">`Wake up after <span class="hljs-subst">$&#123;time&#125;</span> seconds.`</span> : <span class="hljs-string">`Wake up after <span class="hljs-subst">$&#123;time&#125;</span> second.`</span>)
      &#125;)
      <span class="hljs-keyword">if</span> (!update) &#123;
        handleQueue()
      &#125;
      <span class="hljs-keyword">return</span> laziness
    &#125;,
    sleepFirst (time) &#123;
      queue.unshift(<span class="hljs-keyword">async</span> () => &#123;
        <span class="hljs-keyword">await</span> sleep(time * <span class="hljs-number">1000</span>)
        logFn(time > <span class="hljs-number">1</span> ? <span class="hljs-string">`Wake up after <span class="hljs-subst">$&#123;time&#125;</span> seconds.`</span> : <span class="hljs-string">`Wake up after <span class="hljs-subst">$&#123;time&#125;</span> second.`</span>)
      &#125;)
      <span class="hljs-keyword">if</span> (!update) &#123;
        handleQueue()
      &#125;
      <span class="hljs-keyword">return</span> laziness
    &#125;,
    eat (food) &#123;
      queue.push(<span class="hljs-function">() =></span> &#123;
        logFn(<span class="hljs-string">`Eat <span class="hljs-subst">$&#123;food&#125;</span>.`</span>)
      &#125;)
      <span class="hljs-keyword">if</span> (!update) &#123;
        handleQueue()
      &#125;
      <span class="hljs-keyword">return</span> laziness
    &#125;
  &#125;

  <span class="hljs-keyword">if</span> (!update) &#123;
    handleQueue()
  &#125;

  <span class="hljs-keyword">return</span> laziness
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-91">131. 实现_.chunk()</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-lodash-chunk" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-lodash-chunk" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/** 
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;any[]&#125;</span> <span class="hljs-variable">items</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number&#125;</span> <span class="hljs-variable">size</span></span>
 * <span class="hljs-doctag">@returns <span class="hljs-type">&#123;any[][]&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">chunk</span>(<span class="hljs-params">items, size</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (size === <span class="hljs-number">0</span> || items.length === <span class="hljs-number">0</span>) &#123;
    <span class="hljs-keyword">return</span> []
  &#125;

  <span class="hljs-keyword">const</span> result = []

  <span class="hljs-keyword">while</span> (items.length) &#123;
    result.push(items.splice(<span class="hljs-number">0</span>, size))
  &#125;
  
  <span class="hljs-keyword">return</span> result
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-92">137. 垂直遍历二叉树</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fbinary-tree-vertical-traversal" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/binary-tree-vertical-traversal" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Node&#125;</span> <span class="hljs-variable">root</span></span>
 * <span class="hljs-doctag">@returns <span class="hljs-type">&#123;number[]&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">traverse</span>(<span class="hljs-params">root</span>) </span>&#123;
  <span class="hljs-keyword">let</span> result = []
  <span class="hljs-keyword">const</span> hash = &#123;&#125;
  <span class="hljs-keyword">const</span> helper = <span class="hljs-function">(<span class="hljs-params">node, offset, fnode, depth</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (node) &#123;
      result.push(&#123;
        <span class="hljs-attr">value</span>: node.value,
        offset,
        fnode,
        depth
      &#125;)
      helper(node.left, offset - <span class="hljs-number">1</span>, node, depth + <span class="hljs-number">1</span>)
      helper(node.right, offset + <span class="hljs-number">1</span>, node, depth + <span class="hljs-number">1</span>)
    &#125;
  &#125;
  
  helper(root, <span class="hljs-number">0</span>, <span class="hljs-literal">null</span>, <span class="hljs-number">0</span>)

  result.sort(<span class="hljs-function">(<span class="hljs-params">a,b</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (a.offset !== b.offset) &#123;
      <span class="hljs-keyword">return</span> a.offset - b.offset
    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a.depth !== b.depth) &#123;
      <span class="hljs-keyword">return</span> a.depth - b.depth
    &#125; <span class="hljs-keyword">else</span> &#123;
      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
    &#125;
  &#125;)
  <span class="hljs-comment">// 构建hash, 方便查找父级的索引</span>
  result.forEach(<span class="hljs-function">(<span class="hljs-params">item, i</span>) =></span> &#123;
    hash[item.value] = &#123;
      ...item,
      i,
    &#125;
  &#125;)
  <span class="hljs-built_in">console</span>.log(hash)
  <span class="hljs-built_in">console</span>.log(result)
  result.sort(<span class="hljs-function">(<span class="hljs-params">a,b</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (a.offset !== b.offset) &#123;
      <span class="hljs-keyword">return</span> a.offset - b.offset
    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a.depth !== b.depth) &#123;
      <span class="hljs-keyword">return</span> a.depth - b.depth
    &#125; <span class="hljs-keyword">else</span> &#123;
      <span class="hljs-comment">// 根节点特殊处理</span>
      <span class="hljs-keyword">if</span> (!a.fnode) &#123;
        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>
      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!b.fnode) &#123;
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>
      &#125; <span class="hljs-keyword">else</span> &#123;
        <span class="hljs-keyword">const</span> aFnodeIndex = hash[a.fnode.value].i
        <span class="hljs-keyword">const</span> bFnodeIndex = hash[b.fnode.value].i
        <span class="hljs-keyword">return</span> aFnodeIndex - bFnodeIndex
      &#125;
    &#125;
  &#125;)
  
  <span class="hljs-keyword">return</span> result.map(<span class="hljs-function"><span class="hljs-params">item</span> =></span> item.value)
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-93">138. 已排序数组的交集</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fintersection-of-two0-sorted-Arrays" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/intersection-of-two0-sorted-Arrays" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<p>使用hash的方法：</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">arr1</span></span> - integers
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">arr2</span></span> - integers
 * <span class="hljs-doctag">@returns <span class="hljs-type">&#123;number[]&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">intersect</span>(<span class="hljs-params">arr1, arr2</span>) </span>&#123;
  <span class="hljs-keyword">const</span> hash = &#123;&#125;
  <span class="hljs-keyword">const</span> result = []
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < arr1.length; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">const</span> key = arr1[i]
    <span class="hljs-keyword">if</span> (!hash[key]) &#123;
      hash[key] = <span class="hljs-number">1</span>
    &#125; <span class="hljs-keyword">else</span> &#123;
      hash[key] += <span class="hljs-number">1</span>
    &#125;
  &#125;

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < arr2.length; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">const</span> key = arr2[i]
    <span class="hljs-keyword">if</span> (hash[key]) &#123;
      hash[key] -= <span class="hljs-number">1</span>
      result.push(key)
    &#125;
  &#125;

  <span class="hljs-keyword">return</span> result
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<p>使用双指针:</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">arr1</span></span> - integers
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">arr2</span></span> - integers
 * <span class="hljs-doctag">@returns <span class="hljs-type">&#123;number[]&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">intersect</span>(<span class="hljs-params">arr1, arr2</span>) </span>&#123;
  <span class="hljs-keyword">const</span> result = []
  <span class="hljs-keyword">let</span> pointer1 = <span class="hljs-number">0</span>
  <span class="hljs-keyword">let</span> pointer2 = <span class="hljs-number">0</span>
  
  <span class="hljs-keyword">while</span> (pointer1 < arr1.length && pointer2 < arr2.length) &#123;
    <span class="hljs-keyword">if</span> (arr1[pointer1] === arr2[pointer2]) &#123;
      result.push(arr1[pointer1])
      pointer1 += <span class="hljs-number">1</span>
      pointer2 += <span class="hljs-number">1</span>
    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arr1[pointer1] > arr2[pointer2]) &#123;
      pointer2 += <span class="hljs-number">1</span>
    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arr1[pointer1] < arr2[pointer2]) &#123;
      pointer1 += <span class="hljs-number">1</span>
    &#125;
  &#125;
  
  <span class="hljs-keyword">return</span> result
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-94">139. 实现_.partial()</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-partial" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-partial" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">merge</span>(<span class="hljs-params">params1, params2</span>) </span>&#123;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < params1.length; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">if</span> (params2.length) &#123;
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> params1[i] === <span class="hljs-string">'symbol'</span>) &#123;
        <span class="hljs-keyword">const</span> first = params2.shift()
        params1[i] = first
      &#125;
    &#125; <span class="hljs-keyword">else</span> &#123;
        <span class="hljs-keyword">break</span>
    &#125;
  &#125;
  <span class="hljs-keyword">return</span> [...params1, ...params2]
&#125;


<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Function&#125;</span> <span class="hljs-variable">func</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;any[]&#125;</span> <span class="hljs-variable">args</span></span>
 * <span class="hljs-doctag">@returns <span class="hljs-type">&#123;Function&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">partial</span>(<span class="hljs-params">func, ...initArgs</span>) </span>&#123;
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) </span>&#123;
    <span class="hljs-keyword">let</span> params = merge([...initArgs], [...args])
    params = params.map(<span class="hljs-function">(<span class="hljs-params">arg</span>) =></span> &#123;
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> arg === <span class="hljs-string">'symbol'</span>) &#123;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>
      &#125; <span class="hljs-keyword">else</span> &#123;
        <span class="hljs-keyword">return</span> arg
      &#125;
    &#125;)
    <span class="hljs-keyword">return</span> func.call(<span class="hljs-built_in">this</span>, ...params)
  &#125;
&#125;

partial.placeholder = <span class="hljs-built_in">Symbol</span>()
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-95">145. 最多重复出现的字符</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fmost-frequently-occurring-character" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/most-frequently-occurring-character" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">count</span>(<span class="hljs-params">str: string</span>): <span class="hljs-title">string</span> | <span class="hljs-title">string</span>[] </span>&#123;
  <span class="hljs-keyword">const</span> map = &#123;&#125;
  <span class="hljs-keyword">let</span> result = []
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < str.length; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">if</span> (!map[str[i]]) &#123;
      map[str[i]] = <span class="hljs-number">1</span>
    &#125; <span class="hljs-keyword">else</span> &#123;
      map[str[i]] += <span class="hljs-number">1</span>
    &#125;
  &#125;
  <span class="hljs-keyword">const</span> max = <span class="hljs-built_in">Math</span>.max(...Object.values(map))
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> map) &#123;
    <span class="hljs-keyword">if</span> (map[key] === max) &#123;
      result.push(key)
    &#125;
  &#125;

  <span class="hljs-keyword">return</span> result.length > <span class="hljs-number">1</span> ? result : result[<span class="hljs-number">0</span>]
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-96">146. 实现Array.prototype.reduce()</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-Array-prototype-reduce" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-Array-prototype-reduce" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-built_in">Array</span>.prototype.myReduce = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">callback, initialValue</span>) </span>&#123;
  <span class="hljs-keyword">const</span> argsLength = <span class="hljs-built_in">arguments</span>.length

  <span class="hljs-keyword">if</span> (argsLength === <span class="hljs-number">1</span> && <span class="hljs-built_in">this</span>.length === <span class="hljs-number">0</span>) &#123;
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>()
  &#125;
  
  <span class="hljs-keyword">let</span> index = argsLength === <span class="hljs-number">1</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>
  <span class="hljs-keyword">let</span> resultValue = argsLength === <span class="hljs-number">1</span> ? <span class="hljs-built_in">this</span>[<span class="hljs-number">0</span>] : initialValue

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = index; i < <span class="hljs-built_in">this</span>.length; i += <span class="hljs-number">1</span>) &#123;
    resultValue = callback(resultValue, <span class="hljs-built_in">this</span>[i], i, <span class="hljs-built_in">this</span>)
  &#125;

  <span class="hljs-keyword">return</span> resultValue
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-97">147. 取石头</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fpickup-the-stones" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/pickup-the-stones" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p>这道题目没有太想明白</p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">canWinStonePicking</span>(<span class="hljs-params">n</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (n === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  <span class="hljs-keyword">if</span> (n === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">'B'</span>
  <span class="hljs-keyword">if</span> (n === <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">'A'</span>

  <span class="hljs-keyword">const</span> firstMove = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([
    [<span class="hljs-number">1</span>, <span class="hljs-literal">false</span>],
    [<span class="hljs-number">2</span>, <span class="hljs-literal">true</span>]
  ])
  <span class="hljs-keyword">const</span> backhand = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([
    [<span class="hljs-number">1</span>, <span class="hljs-literal">true</span>],
    [<span class="hljs-number">2</span>, <span class="hljs-literal">false</span>]
  ])

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">3</span>; i <= n; i += <span class="hljs-number">1</span>) &#123;
    firstMove.set(i, (backhand.get(i-<span class="hljs-number">2</span>) || backhand.get(i-<span class="hljs-number">1</span>)))
    backhand.set(i, (firstMove.get(i-<span class="hljs-number">2</span>) && firstMove.get(i-<span class="hljs-number">1</span>)))
  &#125;

  <span class="hljs-keyword">return</span> firstMove.get(n) ? <span class="hljs-string">'A'</span> : backhand.get(n) ? <span class="hljs-string">'B'</span> : <span class="hljs-literal">null</span>
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-98">148. 创建一个counter对象</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fcreate-a-counter-object" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/create-a-counter-object" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createCounter</span>(<span class="hljs-params"></span>) </span>&#123;
  <span class="hljs-keyword">const</span> obj = &#123; <span class="hljs-attr">_count</span>: <span class="hljs-number">0</span> &#125;
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.defineProperties(obj, &#123;
    <span class="hljs-attr">count</span>: &#123;
      get () &#123;
        <span class="hljs-keyword">const</span> r = obj._count
        obj._count += <span class="hljs-number">1</span>
        <span class="hljs-keyword">return</span> r
      &#125;
    &#125;
  &#125;)
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-99">149. interpolation</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Finterpolation" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/interpolation" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">t</span>(<span class="hljs-params">translation, data = &#123;&#125;</span>) </span>&#123;
  <span class="hljs-keyword">return</span> translation.replace(<span class="hljs-regexp">/&#123;&#123;(.*?)&#125;&#125;/g</span>, <span class="hljs-function">(<span class="hljs-params">_, key</span>) =></span> data[key] || <span class="hljs-string">''</span>)
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-100">151. 实现Array.prototype.map()</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fimplement-Array-prototype-map" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/implement-Array-prototype-map" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p>Array.prototype.map()可以指定callback执行时的this</p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-built_in">Array</span>.prototype.myMap = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback, thisArg</span>) </span>&#123;
  <span class="hljs-keyword">const</span> result = []
  <span class="hljs-keyword">const</span> that = thisArg || <span class="hljs-built_in">this</span>
  <span class="hljs-built_in">this</span>.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item, i</span>) </span>&#123;
    result[i] = callback.call(that, item, i, that)
  &#125;)
  <span class="hljs-keyword">return</span> result
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-101">152. 找到最大的前k个元素</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Ftop-k-elements" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/top-k-elements" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p>堆排序，分治</p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">// 分治</span>
<span class="hljs-comment">/*
 * @param &#123;number[]&#125; arr
 * @param &#123;number&#125; k
 * @returns &#123;number[]&#125;
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">topK</span>(<span class="hljs-params">arr, k</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (!arr.length) <span class="hljs-keyword">return</span> []

  <span class="hljs-keyword">let</span> result = []
  <span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>

  <span class="hljs-keyword">const</span> divideAndConquer = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">arr, base, k</span>) </span>&#123;
    <span class="hljs-built_in">console</span>.log(arr)
    <span class="hljs-keyword">if</span> (arr.length === <span class="hljs-number">1</span>) &#123;
      <span class="hljs-keyword">return</span> arr[<span class="hljs-number">0</span>]
    &#125;

    <span class="hljs-keyword">const</span> max = []
    <span class="hljs-keyword">const</span> min = []
    <span class="hljs-keyword">let</span> maxLen = <span class="hljs-number">0</span>
    <span class="hljs-keyword">const</span> referenceValue = arr[<span class="hljs-number">0</span>]

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i < arr.length; i += <span class="hljs-number">1</span>) &#123;
      <span class="hljs-keyword">if</span> (arr[i] > referenceValue) &#123;
        max.push(arr[i])
      &#125; <span class="hljs-keyword">else</span> &#123;
        min.push(arr[i])
      &#125;
    &#125;
    max.push(referenceValue)

    maxLen = max.length + base

    <span class="hljs-keyword">if</span> (maxLen >= k && max.length) &#123;
      <span class="hljs-keyword">return</span> divideAndConquer(max, base, k)
    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (maxLen < k && min.length) &#123;
      <span class="hljs-keyword">return</span> divideAndConquer(min, maxLen, k)
    &#125;
  &#125;

  <span class="hljs-keyword">while</span> (i <= k && i <= arr.length) &#123;
    result.push(divideAndConquer(arr, <span class="hljs-number">0</span>, i))
    i += <span class="hljs-number">1</span>
  &#125;

  <span class="hljs-keyword">return</span> result
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-102">153. uglify CSS class names</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Funique-class-name" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/unique-class-name" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@returns <span class="hljs-type">&#123;string&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUniqueClassName</span>(<span class="hljs-params"></span>) </span>&#123;
  <span class="hljs-keyword">const</span> letterSet = [<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>, <span class="hljs-string">'d'</span>, <span class="hljs-string">'e'</span>, <span class="hljs-string">'f'</span>, <span class="hljs-string">'g'</span>, <span class="hljs-string">'h'</span>, <span class="hljs-string">'i'</span>, <span class="hljs-string">'j'</span>, <span class="hljs-string">'k'</span>, <span class="hljs-string">'l'</span>, <span class="hljs-string">'m'</span>, <span class="hljs-string">'n'</span>, <span class="hljs-string">'o'</span>, <span class="hljs-string">'p'</span>, <span class="hljs-string">'q'</span>, <span class="hljs-string">'r'</span>, <span class="hljs-string">'s'</span>, <span class="hljs-string">'t'</span>, <span class="hljs-string">'u'</span>, <span class="hljs-string">'v'</span>, <span class="hljs-string">'w'</span>, <span class="hljs-string">'x'</span>, <span class="hljs-string">'y'</span>, <span class="hljs-string">'z'</span>, <span class="hljs-string">'A'</span>, <span class="hljs-string">'B'</span>, <span class="hljs-string">'C'</span>, <span class="hljs-string">'D'</span>, <span class="hljs-string">'E'</span>, <span class="hljs-string">'F'</span>, <span class="hljs-string">'G'</span>, <span class="hljs-string">'H'</span>, <span class="hljs-string">'I'</span>, <span class="hljs-string">'J'</span>, <span class="hljs-string">'K'</span>, <span class="hljs-string">'L'</span>, <span class="hljs-string">'M'</span>, <span class="hljs-string">'N'</span>, <span class="hljs-string">'O'</span>, <span class="hljs-string">'P'</span>, <span class="hljs-string">'Q'</span>, <span class="hljs-string">'R'</span>, <span class="hljs-string">'S'</span>, <span class="hljs-string">'T'</span>, <span class="hljs-string">'U'</span>, <span class="hljs-string">'V'</span>, <span class="hljs-string">'W'</span>, <span class="hljs-string">'X'</span>, <span class="hljs-string">'Y'</span>, <span class="hljs-string">'Z'</span>,]
  <span class="hljs-keyword">const</span> letterSetLength = letterSet.length
  <span class="hljs-keyword">let</span> prefix = <span class="hljs-string">''</span>
  <span class="hljs-keyword">let</span> className = letterSet[getUniqueClassName.index]
  <span class="hljs-comment">// 最后的边界情况</span>
  <span class="hljs-keyword">if</span> (getUniqueClassName.prefix.length === letterSetLength) &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>
  &#125;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < getUniqueClassName.prefix.length; i += <span class="hljs-number">1</span>) &#123;
    prefix += letterSet[getUniqueClassName.prefix[i]]
  &#125;
  getUniqueClassName.index += <span class="hljs-number">1</span>
  <span class="hljs-keyword">if</span> (getUniqueClassName.index === letterSetLength) &#123;
    getUniqueClassName.index = <span class="hljs-number">0</span>
    <span class="hljs-keyword">if</span> (!getUniqueClassName.prefix.length) &#123;
      getUniqueClassName.prefix.push(<span class="hljs-number">0</span>)
    &#125; <span class="hljs-keyword">else</span> &#123;
      <span class="hljs-keyword">if</span> (getUniqueClassName.prefix.every(<span class="hljs-function"><span class="hljs-params">item</span> =></span> item === letterSetLength - <span class="hljs-number">1</span>)) &#123;
        getUniqueClassName.prefix = getUniqueClassName.prefix.map(<span class="hljs-function">() =></span> <span class="hljs-number">0</span>)
        getUniqueClassName.prefix.push(<span class="hljs-number">0</span>)
      &#125; <span class="hljs-keyword">else</span> &#123;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = getUniqueClassName.prefix.length - <span class="hljs-number">1</span>; i >= <span class="hljs-number">0</span>; i -= <span class="hljs-number">1</span>) &#123;
          <span class="hljs-keyword">if</span> (getUniqueClassName.prefix[i] < letterSetLength - <span class="hljs-number">1</span>) &#123;
            getUniqueClassName.prefix[i] += <span class="hljs-number">1</span>
            <span class="hljs-keyword">break</span>
          &#125;
        &#125;
      &#125;
    &#125;
  &#125;
  <span class="hljs-keyword">return</span> prefix + className;
&#125;

getUniqueClassName.reset = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
  getUniqueClassName.prefix = []
  getUniqueClassName.index = <span class="hljs-number">0</span>
&#125;

<span class="hljs-comment">// 前缀的长度</span>
getUniqueClassName.prefix = []
getUniqueClassName.index = <span class="hljs-number">0</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-103">154. 简单实现双向绑定Two-way binding</h2>
<pre><code class="hljs language-js copyable" lang="js">
<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;&#123;value: string&#125;</span></span>&#125; state
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;HTMLInputElement&#125;</span> <span class="hljs-variable">element</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">model</span>(<span class="hljs-params">state, element</span>) </span>&#123;
  element.value = state.value;
  <span class="hljs-built_in">Object</span>.defineProperty(state, <span class="hljs-string">'value'</span>, &#123;
    <span class="hljs-attr">get</span>: <span class="hljs-function">() =></span> element.value,
    <span class="hljs-attr">set</span>: <span class="hljs-function">(<span class="hljs-params">value</span>) =></span> element.value = value,
  &#125;)
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-104">155. 请实现一个count函数</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fcount-function" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/count-function" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">count</span>(<span class="hljs-params"></span>) </span>&#123;
  count.count += <span class="hljs-number">1</span>
  <span class="hljs-keyword">return</span> count.count
&#125;

count.reset = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
  count.count = <span class="hljs-number">0</span>
&#125;

count.count = <span class="hljs-number">0</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-105">156. 请实现<code>_.set()</code></h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Flodash-set" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/lodash-set" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">set</span>(<span class="hljs-params">obj, path, value</span>) </span>&#123;
  <span class="hljs-comment">// 字符串路径和数组路径统一变为数组路径</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> path === <span class="hljs-string">'string'</span>) &#123;
    path = path.split(<span class="hljs-string">'.'</span>)
  &#125;

  <span class="hljs-keyword">const</span> newPath = []
  <span class="hljs-keyword">const</span> reg = <span class="hljs-regexp">/^([A-Za-z]+)\[([0-9]+)]$/g</span>
  <span class="hljs-keyword">let</span> current = obj
  <span class="hljs-keyword">let</span> laskKey = <span class="hljs-string">''</span>

  <span class="hljs-keyword">const</span> isNumberKey = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>&#123;
    <span class="hljs-comment">// 是否是数字的key</span>
    <span class="hljs-keyword">const</span> isNumberKey = !<span class="hljs-built_in">isNaN</span>(<span class="hljs-built_in">Number</span>(key))
    <span class="hljs-comment">// 是否为无效的数字key，1 有效的，01 无效的</span>
    <span class="hljs-keyword">return</span> isNumberKey && (<span class="hljs-built_in">Number</span>(key) + <span class="hljs-string">''</span> === key) 
  &#125;

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < path.length; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">if</span> (path[i].includes(<span class="hljs-string">'['</span>)) &#123;
      <span class="hljs-keyword">const</span> arr = reg.exec(path[i])
      newPath.push(arr[<span class="hljs-number">1</span>])
      newPath.push(arr[<span class="hljs-number">2</span>])
    &#125; <span class="hljs-keyword">else</span> &#123;
      newPath.push(path[i])
    &#125;
  &#125;

  laskKey = newPath[newPath.length - <span class="hljs-number">1</span>]

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < newPath.length - <span class="hljs-number">1</span>; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">const</span> key = newPath[i]
    <span class="hljs-keyword">const</span> nextKey = newPath[i + <span class="hljs-number">1</span>]
    <span class="hljs-keyword">const</span> v = current[key]
    <span class="hljs-keyword">if</span> (v <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Object</span>) &#123;
      current = v
    &#125; <span class="hljs-keyword">else</span> &#123;
      <span class="hljs-keyword">if</span> (isNumberKey(nextKey)) &#123;
        current[key] = []
      &#125; <span class="hljs-keyword">else</span> &#123;
        current[key] = &#123;&#125;
      &#125;
      current = current[key]
    &#125;
  &#125;

  current[laskKey] = value

  <span class="hljs-keyword">return</span> obj
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-106">157. semver 比较</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fsemver-compare" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/semver-compare" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p>版本比较</p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">v1</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">v2</span></span>
 * <span class="hljs-doctag">@returns </span>0 | 1 | -1
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compare</span>(<span class="hljs-params">v1, v2</span>) </span>&#123;
  <span class="hljs-keyword">let</span> result = <span class="hljs-number">0</span>
  <span class="hljs-keyword">const</span> reg = <span class="hljs-regexp">/([0-9]+)\.([0-9]+)\.([0-9]+)/</span>
  <span class="hljs-keyword">const</span> v1Arr = []
  <span class="hljs-keyword">const</span> v2Arr = []
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i <= <span class="hljs-number">3</span>; i += <span class="hljs-number">1</span>) &#123;
    v1Arr.push(<span class="hljs-built_in">Number</span>(reg.exec(v1)[i]))
    v2Arr.push(<span class="hljs-built_in">Number</span>(reg.exec(v2)[i]))
  &#125;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < v1Arr.length; i += <span class="hljs-number">1</span>) &#123;
    <span class="hljs-keyword">if</span> (v1Arr[i] > v2Arr[i]) &#123;
      result = <span class="hljs-number">1</span>
      <span class="hljs-keyword">break</span>
    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (v1Arr[i] < v2Arr[i]) &#123;
      result = -<span class="hljs-number">1</span>
      <span class="hljs-keyword">break</span>
    &#125;
  &#125;
  <span class="hljs-keyword">return</span> result
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-107">158. 返回DOM tree中”左边“的元素</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fprevious-left-sibling" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/previous-left-sibling" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p>BFS遍历即可</p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Element&#125;</span> <span class="hljs-variable">root</span></span>
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Element&#125;</span> <span class="hljs-variable">target</span></span>
 * <span class="hljs-doctag">@return <span class="hljs-type">&#123;Elemnt | null&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">previousLeftSibling</span>(<span class="hljs-params">root, target</span>) </span>&#123;
  <span class="hljs-keyword">let</span> result = <span class="hljs-literal">null</span>

  <span class="hljs-keyword">const</span> bfs = <span class="hljs-function">(<span class="hljs-params">nodes</span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (nodes.length) &#123;
      <span class="hljs-keyword">let</span> childrenArr = []
      <span class="hljs-keyword">let</span> index = <span class="hljs-literal">null</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < nodes.length; i += <span class="hljs-number">1</span>) &#123;
        <span class="hljs-keyword">const</span> children = [...nodes[i].children]
        childrenArr = [...childrenArr, ...children]
      &#125;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < childrenArr.length; i += <span class="hljs-number">1</span>) &#123;
        <span class="hljs-keyword">if</span> (childrenArr[i] === target) &#123;
          index = i - <span class="hljs-number">1</span>
          <span class="hljs-keyword">if</span> (index !== -<span class="hljs-number">1</span>) &#123;
            result = childrenArr[index]
          &#125;
        &#125;
      &#125;
      <span class="hljs-keyword">if</span> (index === <span class="hljs-literal">null</span>) &#123;
        bfs(childrenArr)
      &#125;
    &#125;
  &#125;

  bfs([root])

  <span class="hljs-keyword">return</span> result
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-108">159. 实现promisify()</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Fpromisify" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/promisify" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p>callback是最后一个参数</p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;(...args) => void&#125;</span> <span class="hljs-variable">func</span></span>
 * <span class="hljs-doctag">@returns <span class="hljs-type">&#123;(...args) => Promise<any&#125;</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">promisify</span>(<span class="hljs-params">func</span>) </span>&#123;
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) </span>&#123;
    <span class="hljs-keyword">const</span> that = <span class="hljs-built_in">this</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve, reject</span>) </span>&#123;
      func.apply(that, [...args, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error, data</span>) </span>&#123;
        <span class="hljs-keyword">if</span> (error) &#123;
          reject(error)
        &#125; <span class="hljs-keyword">else</span> &#123;
          resolve(data)
        &#125;
      &#125;])
    &#125;)
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-109">162. 请找到未重复出现的整数</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fbigfrontend.dev%2Fzh%2Fproblem%2Ffind-the-single-integer" target="_blank" rel="nofollow noopener noreferrer" title="https://bigfrontend.dev/zh/problem/find-the-single-integer" ref="nofollow noopener noreferrer">bigfrontend.dev/zh/problem/…</a></p>
</blockquote>
<blockquote>
<p>利用位运算符</p>
</blockquote>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">arr</span></span>
 * <span class="hljs-doctag">@returns <span class="hljs-variable">number</span></span>
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findSingle</span>(<span class="hljs-params">arr</span>) </span>&#123;
  <span class="hljs-keyword">let</span> result = arr[<span class="hljs-number">0</span>]
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i < arr.length; i += <span class="hljs-number">1</span>) &#123;
    result = result ^ arr[i]
  &#125;
  <span class="hljs-keyword">return</span> result
&#125;
<span class="copy-code-btn">复制代码</span></code></pre></div>  
</div>
            