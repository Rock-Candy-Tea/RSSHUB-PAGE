
---
title: '自定义滚动条还能玩出花？'
categories: 
 - 编程
 - 掘金
 - 分类
headimg: 'https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/43832b32feaa411d8f41f411fdd3680d~tplv-k3u1fbpfcp-watermark.image'
author: 掘金
comments: false
date: Thu, 10 Jun 2021 03:08:37 GMT
thumbnail: 'https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/43832b32feaa411d8f41f411fdd3680d~tplv-k3u1fbpfcp-watermark.image'
---

<div>   
<div class="markdown-body"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><h2 data-id="heading-0">前言</h2>
<p>关于自定义滚动条的方案，我之前写过一篇文章，但是当时写那篇文章的侧重点是教大家怎么实现基础的能够自定义的滚动条，而没怎么注重介绍我封装的那个一个vue组件，也没什么效果图，介绍功能啥的。</p>
<p>而我自己也在项目中使用了，之前做的组件虽然已经满足了较多场景了，但是我在复杂的工程中使用了，体验了，发现还是有更多场景待开发，以及一些bug需要修复。经过了实际项目的应用后，已经把该组件完善得较好了。</p>
<p>加上最近身边有不少同事朋友都有需求，在找一款能兼容尽量多浏览器的自定义滚动条组件，刚好问到我了，我就介绍我封的这个组件给他们了。他们说我这个确实好用，但是就是推广做得少，几乎没人知道，叫我要不写个软文宣传一下，加之npm上的文档，没有示例，让人也不好有直接的感受。</p>
<p>出于此目的，本篇着重介绍一下该组件的使用效果，以及它有什么优点，你为什么要选择它！</p>
<h2 data-id="heading-1">安装组件</h2>
<ul>
<li><a href="https://www.npmjs.com/package/vue-scroll-div" target="_blank" rel="nofollow noopener noreferrer">npm包 vue-scroll-div</a></li>
<li>直接script引入线上资源地址： //unpkg.com/vue-scroll-div/lib/vue-scroll-div.umd.min.js</li>
</ul>
<h2 data-id="heading-2">主要特点</h2>
<ul>
<li>多平台浏览器兼容，不再单纯使用<code>-webkit-scrollbar</code>支持webkit内核的浏览器，连火狐、IE等非<code>webkit</code>内核浏览器也支持自定义滚动条。不再自欺欺人</li>
<li>智能选择自定义滚动条方案。除了限定固定自定义滚动条模式外，还能开启智能优化选择模式，能够针对不同的浏览器特性，选择<strong>性能最好</strong>的自定义滚动条方案：
<ul>
<li>MacOS上的浏览器本身滚动条效果已经很好了，所以在MacOS上不做改变，应用原本的浏览器，最终组件只会渲染成普通的<code>div</code></li>
<li>webkit内核的浏览器，由于支持<code>-webkit-scrollbar</code>等CSS样式直接修改滚动条样式，那么就会选择用CSS的方式来指定自定义滚动条</li>
<li>其他浏览器，就会屏蔽掉原本的滚动条，利用HTML元素来模仿滚动条效果，显然这种方式的渲染成本会增大。</li>
</ul>
</li>
<li>弥补火狐和IE浏览器,对于padding-bottom设置"不起作用"的缺陷问题,行为跟chrome等浏览器保持一致性</li>
<li>自定义滚动条是悬浮内容上方的，不会挤兑容器空间</li>
<li>支持全局设计所有用到的滚动条各参数</li>
<li>使用方便，用法跟使用一个<code>div</code>的理念是一样的，你就可以把该组件当成一个<code>div</code>来使用。</li>
<li>其他更多特点详见<a href="https://github.com/pekonchan/ScrollDiv" target="_blank" rel="nofollow noopener noreferrer">说明文档</a></li>
</ul>
<h2 data-id="heading-3">使用效果</h2>
<p>还是先睹为快吧，没有直接的视觉感受，大家都不确定是否自己要找的东西</p>
<p><strong>注意gif中滚动条有一些点点的颜色，是录gif工具截图生成造成的影响，并不是组件的问题</strong></p>
<h3 data-id="heading-4">仿MacOS效果</h3>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/43832b32feaa411d8f41f411fdd3680d~tplv-k3u1fbpfcp-watermark.image" alt="仿macos.gif" loading="lazy" referrerpolicy="no-referrer"></p>
<p>上图仿MacOS的滚动条效果，只有在容器内发生滚动，就显示处滚动条，不操作后延迟一定时间消失。</p>
<p>也可以鼠标悬浮在滚动条所在区域（一般就是边边），也能显示处滚动条，可以进行拖动滚动，而且只要按住发生拖动，就算鼠标离开容器，也能触发滚动。</p>
<h3 data-id="heading-5">响应容器大小变化</h3>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/40089e7988734c6d861049b7e51f8ad2~tplv-k3u1fbpfcp-watermark.image" alt="响应容器改变.gif" loading="lazy" referrerpolicy="no-referrer"></p>
<p>上图表示该组件，能够响应容器的大小变化，如屏幕大小发生了变化，或者容器内展示的数据发生变化（如请求后获取数据等），滚动条能够自动响应这种变化，进而调整自身的显示长度和可移动距离。</p>
<h3 data-id="heading-6">自定义滚动条样式</h3>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1eb4a70f76cd44518e3fedef2dd5d90d~tplv-k3u1fbpfcp-watermark.image" alt="改变滚动条样式.gif" loading="lazy" referrerpolicy="no-referrer"></p>
<p>示图只是改变了滚动条的颜色，但是你可以自定义滚动条的更多样式，如滚动条的宽度，圆角等各种情况。提供了十分便利自由的配置项</p>
<h3 data-id="heading-7">可根据浏览器智能选择最优方案</h3>
<p>组件默认开启智能选择模式，目的是为了减少开销，优化性能，针对使用的浏览器平台背景而自动选择性能最好的方案。</p>
<p>当然你想让各个浏览器保持一样的滚动条交互效果，可以关闭该模式，采用指定的【仿MacOS】模式或【常驻滚动条】模式。</p>
<p>下面介绍智能模式的情况：</p>
<ol>
<li>
<p>MacOS上的浏览器就不介绍了，是不针对MAC平台的浏览器处理，采用原本的滚动条。</p>
</li>
<li>
<p>chrome等webkit内核的浏览器，会智能选择采用css样式改造原生滚动条</p>
</li>
</ol>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0e94e3b390ea4b94babf1d1960351840~tplv-k3u1fbpfcp-watermark.image" alt="chrome默认情况.gif" loading="lazy" referrerpolicy="no-referrer"></p>
<ol start="3">
<li>火狐IE等非webkit内核浏览器，采用HTML元素模仿滚动条</li>
</ol>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ae914c5a690d43c1bbc3cb95ef2746af~tplv-k3u1fbpfcp-watermark.image" alt="火狐默认情况.gif" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-8">常驻滚动条模式</h3>
<p>个别人的需求可能不偏好于MAC滚动条的效果，希望就是跟原生滚动条一样，常驻，只是样式优化下就好了，当然这样的话webkit内核浏览器用样式控制没问题，但是其他浏览器就不行了，这里还是得用自定义HTML元素模仿：</p>
<p>常驻模式看起来没啥差别，就是常驻</p>
<p>可以用火狐或ie浏览器来体验一下</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6b0421c59cab4471a3b1579a85579518~tplv-k3u1fbpfcp-watermark.image" alt="常驻模式悬浮.gif" loading="lazy" referrerpolicy="no-referrer"></p>
<p>图中也可以看到，滚动条是悬浮在内容上的，不会占用容器空间，进而挤兑内容。</p>
<h2 data-id="heading-9">使用教程</h2>
<p>有能科学上网的，可以直接访问 <a href="https://pekonchan.github.io/common-ui/#/main/scroll-div" target="_blank" rel="nofollow noopener noreferrer">github.io</a> ，能更加直观的看到代码和展示demo的关系。</p>
<p>这个是线上编辑器<a href="https://codepen.io/pekonchan/pen/bGqjjQV" target="_blank" rel="nofollow noopener noreferrer">codeopen</a>，能直接线上体验效果，边改动代码边感受。</p>
<p>这里就简单介绍下使用的一些基本情况</p>
<h3 data-id="heading-10">默认情况</h3>
<p>设置容器的宽高，请直接传值到props属性的<code>width</code>和<code>height</code>，以及你要设置<code>padding</code>。</p>
<p>可以直接传入<code>calc(100% - 10px)</code>这种字符串，支持数字类型和字符串。</p>
<p><code>view-class</code>是为滚动容器添加类名，用于设置一些额外的样式，因为受到不同的自定义滚动条模式的影响，具体的滚动容器可能不一样。</p>
<blockquote>
<p>注意view-class属性仅用来设置具体的滚动容器的一些样式，与滚动容器滚动无关的属性，直接请使用class。</p>
</blockquote>
<p>不做滚动条显示模式设定的默认情况下，会根据您所在浏览器的特性而选择不同的方案</p>
<ul>
<li>macos 原生滚动条</li>
<li>webkit内核使用css来美化原生滚动条</li>
<li>其他浏览器采用HTML元素模拟滚动条</li>
</ul>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-tag"><<span class="hljs-name">scroll-div</span>
    <span class="hljs-attr">width</span>=<span class="hljs-string">"400px"</span>
    <span class="hljs-attr">height</span>=<span class="hljs-string">"100px"</span>
    <span class="hljs-attr">padding</span>=<span class="hljs-string">"5px"</span>
    <span class="hljs-attr">view-class</span>=<span class="hljs-string">"yourclassname"</span>></span>
    Lorem ipsum dolor, sit amet consectetur adipisicing elit. Officiis quas nobis praesentium nisi deserunt, fuga libero, error quia vero nulla corporis odio fugit atque et accusamus numquam. Tempora, qui numquam!
    Lorem ipsum dolor, sit amet consectetur adipisicing elit. Officiis quas nobis praesentium nisi deserunt, fuga libero, error quia vero nulla corporis odio fugit atque et accusamus numquam. Tempora, qui numquam!
<span class="hljs-tag"></<span class="hljs-name">scroll-div</span>></span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-11">仿MacOS效果</h3>
<p><img src="https://user-images.githubusercontent.com/38689834/121333438-650ccd00-c94b-11eb-8987-a32125a9e1e3.gif" alt="仿macos" loading="lazy" referrerpolicy="no-referrer"></p>
<p>默认情况下<code>useNative</code>值为<code>true</code>，表示开启智能选择模式，即上述的默认情况，原生能支持就用原生的意思。</p>
<p>这里设置<code>useNative="false"</code>，关闭智能选择，固定采用仿MacOS的效果，即window系统下的所有浏览器都会采用自定义滚动条模拟</p>
<p>该模式能够很好地响应屏幕变化或内容变化引起的滚动容器滚动条长度的问题。</p>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-tag"><<span class="hljs-name">scroll-div</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"100px"</span> <span class="hljs-attr">:use-native</span>=<span class="hljs-string">"false"</span>></span>
    Lorem ipsum dolor, sit amet consectetur adipisicing elit. Officiis quas nobis praesentium nisi deserunt, fuga libero, error quia vero nulla corporis odio fugit atque et accusamus numquam. Tempora, qui numquam!
<span class="hljs-tag"></<span class="hljs-name">scroll-div</span>></span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-12">常驻滚动条模式</h3>
<p>Windows上的火狐IE等这些非webkit内核的浏览器上，会采用HTML元素模仿滚动条，默认是仿MacOS效果的滚动条，即只有滚动了才会出现。</p>
<p>如果你不想这样，可以开启常驻滚动条模式，只需要设置<code>awaysShowScroll="true"</code></p>
<p>同样可以结合<code>useNative</code>来使用，来更加自由的定制所需模式</p>
<blockquote>
<p>本示例最好在火狐或IE上体验</p>
</blockquote>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-tag"><<span class="hljs-name">scroll-div</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"100px"</span> <span class="hljs-attr">:aways-show-scroll</span>=<span class="hljs-string">"true"</span>></span>
    Lorem ipsum dolor, sit amet consectetur adipisicing elit. Officiis quas nobis praesentium nisi deserunt, fuga libero, error quia vero nulla corporis odio fugit atque et accusamus numquam. Tempora, qui numquam!
</
scroll-div>
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-13">自定义滚动条样式</h3>
<p>组件本身已经自定义了相对大众美观一点的滚动条了，当然，你仍然有更好的自定义能力，可以通过<code>barStyle, size, offset</code>等参数进一步打造属于你的滚动条效果。</p>
<p>当然，这是针对用HTML元素模拟滚动条效果的情况下，才能生效的，即你得设置<code>useNative=false</code></p>
<blockquote>
<p>如果你仍然想要维持高性能的<code>:use-native="true"</code>智能选择模式下，在chrome这种webkit内核的浏览器上改变样式，你得自己在项目中写全局样式覆盖<code>-webkit-scrollbar</code>等样式。</p>
</blockquote>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-tag"><<span class="hljs-name">scroll-div</span>
    <span class="hljs-attr">height</span>=<span class="hljs-string">"100px"</span>
    <span class="hljs-attr">:use-native</span>=<span class="hljs-string">"false"</span>
    <span class="hljs-attr">:bar-style</span>=<span class="hljs-string">"&#123;backgroundColor: 'pink', borderRadius: '6px'&#125;"</span>></span>
    Lorem ipsum dolor, sit amet consectetur adipisicing elit. Officiis quas nobis praesentium nisi deserunt, fuga libero, error quia vero nulla corporis odio fugit atque et accusamus numquam. Tempora, qui numquam!
<span class="hljs-tag"></<span class="hljs-name">scroll-div</span>></span>
<span class="copy-code-btn">复制代码</span></code></pre>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-tag"><<span class="hljs-name">scroll-div</span>
    <span class="hljs-attr">height</span>=<span class="hljs-string">"100px"</span>
    <span class="hljs-attr">:use-native</span>=<span class="hljs-string">"false"</span>
    <span class="hljs-attr">:bar-style</span>=<span class="hljs-string">"&#123;backgroundColor: 'rgba(255, 192, 203, .5)'&#125;"</span>
    <span class="hljs-attr">size</span>=<span class="hljs-string">"10px"</span>
    <span class="hljs-attr">offset</span>=<span class="hljs-string">"6px"</span>
    <span class="hljs-attr">:aways-show-scroll</span>=<span class="hljs-string">"true"</span>></span>
    Lorem ipsum dolor, sit amet consectetur adipisicing elit. Officiis quas nobis praesentium nisi deserunt, fuga libero, error quia vero nulla corporis odio fugit atque et accusamus numquam. Tempora, qui numquam!
    Lorem ipsum dolor, sit amet consectetur adipisicing elit. Officiis quas nobis praesentium nisi deserunt, fuga libero, error quia vero nulla corporis odio fugit atque et accusamus numquam. Tempora, qui numquam!
<span class="hljs-tag"></<span class="hljs-name">scroll-div</span>></span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-14">支持全局设置</h3>
<p>如果你的项目打算大量使用该组件，一个个设置一些一样的值，显然显得很累赘，本组件支持全局设置</p>
<pre><code class="copyable">import Vue from 'vue'
import ScrollDiv from 'vue-scroll-div'

Vue.use(ScrollDiv,&#123;
  barStyle: &#123;
    backgroundColor: 'pink', // 滚动条的颜色
  &#125;,
  size: 6, // 滚动条的大小
  offset: 2 // 滚动条距离边界的偏移量
&#125;)
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-15">后续</h3>
<p>该组件仍然会不断完善，以满足更多的需求场景。</p></div>  
</div>
            