
---
title: 'Tuax 技术周刊 2021-08-27 期'
categories: 
 - 编程
 - 掘金
 - 分类
headimg: 'https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/08/63bGGDsvP2sE7b009F6w.gif'
author: 掘金
comments: false
date: Fri, 27 Aug 2021 00:45:28 GMT
thumbnail: 'https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/08/63bGGDsvP2sE7b009F6w.gif'
---

<div>   
<div class="markdown-body html cache"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><h2 data-id="heading-0">1.<a href="https://link.juejin.cn/?target=https%3A%2F%2Fcss-tricks.com%2Fnewsletter%2F265-the-shared-element-transitions-api-and-origin-trials%2F" target="_blank" rel="nofollow noopener noreferrer" title="https://css-tricks.com/newsletter/265-the-shared-element-transitions-api-and-origin-trials/" ref="nofollow noopener noreferrer">The Shared Element Transitions API and Origin Trials</a></h2>
<p>chrome 提供了一个名为Shared Element Transitions API的新提案，它为我们提供了“一种在页面状态之间切换的高级动效”。这个新的 API 旨在使单页应用程序的所有这些过渡动效变得更加容易。现在可以在chrome的Origin Trial版本试用。
<img src="https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/08/63bGGDsvP2sE7b009F6w.gif" alt loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-1">2.<a href="https://link.juejin.cn/?target=https%3A%2F%2Freactnative.dev%2Fblog%2F2021%2F08%2F17%2Fversion-065" target="_blank" rel="nofollow noopener noreferrer" title="https://reactnative.dev/blog/2021/08/17/version-065" ref="nofollow noopener noreferrer">React Native 0.65</a></h2>
<p>React Native 0.65 版发布，其中包含新版 Hermes、可访问性改进、软件包升级。
Hermes是 Facebook 为 React Native 优化的开源 JavaScript 虚拟机，已升级到 0.8.1 版本。此版本中的一些突出功能包括：</p>
<ul>
<li>一个名为“Hades”的新并发垃圾收集器，可在 64 位设备上将暂停时间缩短多达 30 倍。</li>
<li>ECMAScript 国际化 API（ECMA-402 或Intl）现在内置在 Android 上的 Hermes 中并默认启用</li>
<li>iOS 版 Hermes现在支持 Apple M1 Mac 和 Mac Catalyst！</li>
<li>内存改进，包括 SMI（小整数）和指针压缩，可将JS 堆缩小 30% 。</li>
<li>Function.prototype.toString修复了由于功能检测不当而导致的性能下降的问题，并支持源代码注入用例。</li>
</ul>
<h2 data-id="heading-2">3.<a href="https://link.juejin.cn/?target=https%3A%2F%2Fblogs.windows.com%2Fmsedgedev%2F2021%2F08%2F17%2Fcss-module-scripts-import-stylesheets-like-javascript-modules%2F" target="_blank" rel="nofollow noopener noreferrer" title="https://blogs.windows.com/msedgedev/2021/08/17/css-module-scripts-import-stylesheets-like-javascript-modules/" ref="nofollow noopener noreferrer">CSS module scripts: <code>import</code> stylesheets like JavaScript modules</a></h2>
<p>微软和谷歌合作为 Chromium 带来了对 CSS 模块脚本的支持，将从 Microsoft Edge 和 Chrome 93 版开始提供。新的CSS 模块脚本功能可用于加载带有import语句的CSS 样式表，就像JavaScript 模块一样。
<code>import sheet from './styles.css' assert &#123; type: 'css' &#125;;</code>
<code>document.adoptedStyleSheets = [sheet];</code>
<code>shadowRoot.adoptedStyleSheets = [sheet];</code></p>
<h2 data-id="heading-3">4.<a href="https://link.juejin.cn/?target=https%3A%2F%2Fsearchvoidstar.tumblr.com%2Fpost%2F659634228574715904%2Fan-amazing-error-message-if-you-put-more-than-2-24" target="_blank" rel="nofollow noopener noreferrer" title="https://searchvoidstar.tumblr.com/post/659634228574715904/an-amazing-error-message-if-you-put-more-than-2-24" ref="nofollow noopener noreferrer">An amazing error message if you put more than 2^24 items in a JS Map object</a></h2>
<p>如果在 JS Map 对象中放置超过 2^24 个项目，则会出现错误消息:"未捕获的范围错误：未定义的值超出范围未定义的选项属性未定义."
这不是错误，只是实现定义的限制。</p>
<p>限制由以下因素决定：</p>
<p>Map 的 FixedArray 后备存储的最大大小为 1GB（独立于整体堆大小限制）
在 64 位系统上，这意味着 1GB / 8B = 2^30 / 2^3 = 2^27，
则每个 FixedArray 的最大元素数为 134M
一个 Map 每个条目需要 3 个元素（键、值、下一个桶链接），并且最大负载因子为 50%，并且其容量必须是 2 的幂。2^ 27 / (3 * 2) 四舍五入到 2 的下一个幂是 2^24。</p>
<h2 data-id="heading-4">5.<a href="https://link.juejin.cn/?target=https%3A%2F%2Fblogs.windows.com%2Fmsedgedev%2F2021%2F08%2F10%2Fcompat2021-css-grid-gridng%2F" target="_blank" rel="nofollow noopener noreferrer" title="https://blogs.windows.com/msedgedev/2021/08/10/compat2021-css-grid-gridng/" ref="nofollow noopener noreferrer">Compat2021: Improving CSS Grid compatibility with GridNG</a></h2>
<p>Microsoft Edge 93中将发布对 CSS Grid 1 模块（“GridNG”）的重写，将大大提高Edge对 CSS 网格属性的兼容支持性，并且提升了Edge对复杂嵌套网格布局的性能问题。</p>
<h2 data-id="heading-5">6.<a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.smashingmagazine.com%2F2021%2F08%2Fhttp3-performance-improvements-part2%2F" target="_blank" rel="nofollow noopener noreferrer" title="https://www.smashingmagazine.com/2021/08/http3-performance-improvements-part2/" ref="nofollow noopener noreferrer">HTTP/3: Performance Improvements</a></h2>
<p>HTTP/3 实际上是 HTTP/2-over-QUIC，因此，新版本中没有引入真正的、重大的新功能。</p>
<ul>
<li>1.理论上 QUIC 遭受的丢包（以及相关的行头 (HOL) 阻塞）较少，因为它独立处理每个资源字节流上的丢包。但QUIC 实际上使用与 TCP 非常相似的带宽管理技术。这意味着它不会比 TCP 神奇地更快地下载您的网站资源。然而，QUIC 的灵活性意味着试验新的拥塞控制算法将变得更加容易，这应该会在未来改善 TCP 和 QUIC 的情况。</li>
<li>2.QUIC 握手总共只需要一次往返即可完成，这比 TCP + TLS 1.3 少了一次往返，没有额外的大量速度提升。</li>
<li>3.QUIC 的连接 ID (CID) 允许它在切换网络时执行连接迁移。我们通过一个客户端从 Wi-Fi 网络迁移到 4G，同时进行大文件下载来说明这一点。在 TCP 上，该下载可能必须中止，而对于 QUIC，它可能会继续。</li>
<li>4.在通过减轻队头 (HoL) 阻塞问题，使 QUIC 在具有大量数据包丢失的网络上更快。虽然这在理论上是正确的，但我们将看到在实践中这可能只会为网页加载性能提供很小的好处。</li>
<li>5.QUIC 和 HTTP/3 的第五个性能方面是关于它们在网络上实际创建和发送数据包的效率和性能。我们将看到 QUIC 使用 UDP 和重加密可以使它比 TCP 慢一点（但情况正在改善）。</li>
</ul>
<h2 data-id="heading-6">7.<a href="https://link.juejin.cn/?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMjM5MTA1MjAxMQ%3D%3D%26mid%3D2651248868%26idx%3D1%26sn%3D9ff1c02e3c7a44af82ae42f3048f96d1%26chksm%3Dbd4901608a3e8876f6bcff8c60795b0522e32b0ba61cc5b18d0c55ffe7ed1c4c9252ddb78609%26mpshare%3D1%26scene%3D1%26srcid%3D0822g9ZaTEbsdClz50Elbfy3%26sharer_sharetime%3D1629693451144%26sharer_shareid%3Db2f2c2b9cde0c22fcbd8cd76c41c4cbf%26version%3D3.1.12.90282%26platform%3Dmac%23rd" target="_blank" rel="nofollow noopener noreferrer" title="https://mp.weixin.qq.com/s?__biz=MjM5MTA1MjAxMQ==&mid=2651248868&idx=1&sn=9ff1c02e3c7a44af82ae42f3048f96d1&chksm=bd4901608a3e8876f6bcff8c60795b0522e32b0ba61cc5b18d0c55ffe7ed1c4c9252ddb78609&mpshare=1&scene=1&srcid=0822g9ZaTEbsdClz50Elbfy3&sharer_sharetime=1629693451144&sharer_shareid=b2f2c2b9cde0c22fcbd8cd76c41c4cbf&version=3.1.12.90282&platform=mac#rd" ref="nofollow noopener noreferrer">React 18 如何支持 Strict Effects</a></h2>
<p>随着 React 18 的发布，StrictMode 增加了对 Strict Effects 的支持。在严格模式下，React 会对新安装的组件调用两次 effect（mount -> unmount -> mount）。与其他严格模式下的行为一样，React 仅在开发环境中执行此操作。这篇文章主要介绍如何将现有的组件修改为支持strict Effects的模式。最有可能因为挂载多次而受到影响，导致需要修改 effect 的情况分为以下两类：</p>
<ul>
<li>在卸载时需要执行清理操作的 effect</li>
<li>只执行一次的 effect（挂载时或依赖变化时执行）</li>
</ul>
<h2 data-id="heading-7">8.<a href="https://link.juejin.cn/?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzIyNDU2NTc5Mw%3D%3D%26mid%3D2247496939%26idx%3D1%26sn%3D2077c5051391a0a7f91b086300d67129%26chksm%3De80fbba5df7832b37d033cf95cf811867d061fd02dec092160930915329d47bfff43bfb36678%26mpshare%3D1%26scene%3D1%26srcid%3D0822RH6IJ6kfF7Opoeudd2WU%26sharer_sharetime%3D1629693424638%26sharer_shareid%3Db2f2c2b9cde0c22fcbd8cd76c41c4cbf%26version%3D3.1.12.90282%26platform%3Dmac%23rd" target="_blank" rel="nofollow noopener noreferrer" title="https://mp.weixin.qq.com/s?__biz=MzIyNDU2NTc5Mw==&mid=2247496939&idx=1&sn=2077c5051391a0a7f91b086300d67129&chksm=e80fbba5df7832b37d033cf95cf811867d061fd02dec092160930915329d47bfff43bfb36678&mpshare=1&scene=1&srcid=0822RH6IJ6kfF7Opoeudd2WU&sharer_sharetime=1629693424638&sharer_shareid=b2f2c2b9cde0c22fcbd8cd76c41c4cbf&version=3.1.12.90282&platform=mac#rd" ref="nofollow noopener noreferrer">前端工程化：你所需要知道的最新的babel兼容性实现方案</a></h2>
<p>作者在最新babel7的基础上，给大家带来了最新的babel兼容性方案剖析，让大家对babel的兼容性处理机制有更透彻的了解。
目前，babel处理兼容性问题有两种方案：</p>
<ul>
<li>@babel/preset-env + corejs@3实现语法转换 + 在全局和实例上添加api，支持全量加载和按需加载，我们简称polyfill方案；</li>
<li>@babel/preset-env + @babel/runtime-corejs3 + @babel/plugin-transform-runtime实现语法转换 + 模拟替换api，只支持按需加载，我们简称runtime方案。</li>
</ul>
<p>两种方案都依赖核心包corejs@3，只不过依赖的模块不同，导致实现方式不同。两种方案各有优缺点：</p>
<ul>
<li>polyfill方案很明显的缺点就是会造成全局污染，而且会注入冗余的工具代码；优点是可以根据浏览器对新特性的支持度来选择性的进行兼容性处理；</li>
<li>runtime方案虽然解决了polyfill方案的那些缺点，但是不能根据浏览器对新特性的支持度来选择性的进行兼容性处理，也就是说只要在代码中识别到的api，并且该api也存在core-js-pure包中，就会自动替换，这样一来就会造成一些不必要的转换，从而增加代码体积。</li>
</ul></div>  
</div>
            