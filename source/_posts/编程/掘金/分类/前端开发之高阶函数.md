
---
title: '前端开发之高阶函数'
categories: 
 - 编程
 - 掘金
 - 分类
headimg: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6be9e6c7fa034f9090362e0237122568~tplv-k3u1fbpfcp-watermark.image'
author: 掘金
comments: false
date: Thu, 02 Sep 2021 00:54:32 GMT
thumbnail: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6be9e6c7fa034f9090362e0237122568~tplv-k3u1fbpfcp-watermark.image'
---

<div>   
<div class="markdown-body html cache"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><h2 data-id="heading-0">前言</h2>
<p>高阶组件在React圈子中是一个很常见的概念，React奉行原则之一就是使用纯函数编程。</p>
<p>但是在Vue圈子大家看起来讨论得比较少，在Vue这边推崇是易用、渐进式开发，所以我们在开发Vue的时候看到的更多的是<code><template><script><style></code>组合，这更加符合以往开发H5的风格。</p>
<p>下面我从基本概念，到实际业务场景，给大家讲讲什么是高阶组件。</p>
<h2 data-id="heading-1">一、高阶组件？</h2>
<p>高阶组件即<code>高阶函数</code>，前面我们讲到，React遵循函数式开发，而高阶组件这个概念其实是React社区繁衍出来的概念。</p>
<p>在这里我们要谨记这一句话，<code>组件 = 函数</code>。</p>
<blockquote>
<p>高阶函数，通俗的讲，就是把函数当作参数，传入另外一个函数当中，再返回一个函数。</p>
</blockquote>
<h3 data-id="heading-2">2.1 高阶函数定义</h3>
<ul>
<li>
<p>接受1个及1个以上的函数作为参数。</p>
</li>
<li>
<p>高阶函数返回一个函数</p>
</li>
</ul>
<h3 data-id="heading-3">2.2 高阶函数例子</h3>
<p>了解高阶函数的基本定义，我们就知道其实js中很多高阶函数的运用，举一个常见的求最大值的例子</p>
<pre><code class="copyable">// 求数组的最大值
const getMaxValue = function(val, fn) &#123;
    return fn(val);
&#125;;
const Max = function(val) &#123;
    return Math.max.apply(null,val)
&#125;
// 在使用的时候
var arr = [1,20,30,4,5]
getMaxValue(arr,Max)

<span class="copy-code-btn">复制代码</span></code></pre>
<blockquote>
<p>可以看到<code>Max</code>函数并作为参数传递给了<code>getMaxValue</code>函数，并且getMaxValue返回函数。这就是典型的高阶函数</p>
</blockquote>
<h2 data-id="heading-4">二、实际应用场景</h2>
<h3 data-id="heading-5">1.1 业务场景</h3>
<p>需要你在一个管理后台，将你用的ElementUI的Button的按钮，全部加上防抖功能。</p>
<h3 data-id="heading-6">1.2 场景分析</h3>
<p>旧代码中有许多按钮，一个一个改不现实，有没有什么办法，给Button包一层，实现自己的逻辑呢？<br>
类似于后端语言常见的，<code>继承</code>，<code>方法重载</code>的概念。</p>
<p>我下面用了一个很常见的洋葱模型来解释</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/131935d4054d4bbbb6dd8d21f616f82c~tplv-k3u1fbpfcp-watermark.image" alt="图片" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-7">1.3 解决方案</h3>
<p>上面我们接触到高阶函数的概念，不影响原Button的作用，同时在原Button上的组件做逻辑补充，这不就是高阶组件吗?</p>
<p>在这之前，我们要先介绍一个工具，Vue的<code>render</code>函数,它长这样子</p>
<pre><code class="copyable">render: function (createElement) &#123;
  return createElement(
    ...
        // 一系列对组件的处理
  )
&#125;

<span class="copy-code-btn">复制代码</span></code></pre>
<p>这就是标准的高阶函数，传入<code>createElement</code>函数，同时返回<code>createElement</code>函数</p>
<h2 data-id="heading-8">三、render高阶函数的运用</h2>
<p>还是上面的例子，我们来看看render怎样重写elementUi的Button组件</p>
<pre><code class="copyable">// NewButton.vue
<script>
import &#123; Button &#125; from 'element-ui'
export default &#123;
  name: 'Button',
  components: &#123; 'el-button': Button &#125;,
  data() &#123;
    return &#123;
      timer: null
    &#125;
  &#125;,
  methods: &#123;
    click() &#123;
      // 实现防抖
      const that = this
      clearTimeout(that.timer)
      that.timer = setTimeout(function() &#123;
        that.$emit('click')
      &#125;, 1000)
      ;
    &#125;
  &#125;,
  render(createElement) &#123;
    return createElement(
      'el-button',
      &#123;
        on: &#123; click: this.click &#125;
      &#125;,
      '按钮'
    )
  &#125;
&#125;
</script>


<span class="copy-code-btn">复制代码</span></code></pre>
<p>使用新组件的时候</p>
<pre><code class="copyable">// test.vue
<template>
    <NewButton @click="click" />
</template>

<script>
import NewButton from "./Button";
export default &#123;
    components: &#123; NewButton &#125;,
        methods: &#123;
            click() &#123;
                console.log('一秒的防抖效果')
            &#125;
        &#125;
&#125;
</script>

<span class="copy-code-btn">复制代码</span></code></pre>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6be9e6c7fa034f9090362e0237122568~tplv-k3u1fbpfcp-watermark.image" alt="图片" loading="lazy" referrerpolicy="no-referrer"></p>
<p>结果显示，高阶函数的运用，可以完美解决业务问题，不需要去改动源码重新打包等一系列操作。</p>
<h2 data-id="heading-9">四、总结</h2>
<p>高阶函数作为一种进阶用法，在实际业务场景中，其实也是比较常用的，只是我们在学习的过程中，习惯了使用工具，而不是挖掘为什么能这么用，典型的知其然而不知其所以然，这是开发者常态了。</p>
<p>今天文章记录，也是我个人技术生涯上的又一次成长，希望我的个人知识能够帮助大家更好的了解高阶函数的这个概念和应用场景。</p></div>  
</div>
            