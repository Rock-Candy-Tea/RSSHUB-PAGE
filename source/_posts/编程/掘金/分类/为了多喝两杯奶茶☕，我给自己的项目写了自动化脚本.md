
---
title: '为了多喝两杯奶茶☕，我给自己的项目写了自动化脚本'
categories: 
 - 编程
 - 掘金
 - 分类
headimg: 'https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ae67409d78be4955951662faca07ba68~tplv-k3u1fbpfcp-watermark.image'
author: 掘金
comments: false
date: Mon, 30 Aug 2021 23:05:36 GMT
thumbnail: 'https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ae67409d78be4955951662faca07ba68~tplv-k3u1fbpfcp-watermark.image'
---

<div>   
<div class="markdown-body html cache"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><p><strong>这是我参与8月更文挑战的第31天，活动详情查看：<a href="https://juejin.cn/post/6987962113788493831" title="https://juejin.cn/post/6987962113788493831" target="_blank">8月更文挑战</a></strong></p>
<h2 data-id="heading-0">🍃 前言</h2>
<ul>
<li>事情是这样的，之前有段时间在搭自己的组件库，每次新增一个组件的时候都需要进行一些重复的操作
<ul>
<li>创建一个组件文件夹</li>
<li>文件夹里面新增两个文件分别是<code>.vue</code>和<code>index.js</code>分别用来编写组件代码和导出组件</li>
<li>在<code>styles</code>文件夹里面新建一个<code>.scss</code>文件来存放该组件的样式</li>
<li>在<code>styles</code>文件夹里引入刚刚创建的<code>.scss</code></li>
<li>在主<code>index.js</code>文件里引入刚刚创建的组件并注册</li>
<li>在文档里面创建该组件的示例</li>
</ul>
</li>
<li>原本我以为每次新增一个组件花不了多少时间，直到我不小心测试了一下我每次创建新组件基础文件时用的时间...🤷‍♂️</li>
</ul>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ae67409d78be4955951662faca07ba68~tplv-k3u1fbpfcp-watermark.image" alt="time.jpg" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li>好家伙我每次光是添加基本的初始化文件就用了快<strong>4</strong>分钟？？这<strong>4</strong>分钟我都可以下楼去奶茶店买杯喝的了...</li>
<li>每次都是重复机械式的操作，其实仔细一想这些文件里面本质上没什么变动，就是关键信息组件名称不同罢了...🤦‍♂️</li>
<li>众所周知，我们程序员就是为了产出让人更有 <strong>效（更）率（懒）</strong> 的办法，刚好前段时间重新看了会<code>node</code>，那我们就用<code>node</code>来写一个自动化脚本吧。</li>
</ul>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e913bec078b04aad90365e1b2f5fca7a~tplv-k3u1fbpfcp-watermark.image" alt="细节.jfif" loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-1">👨‍💼 ToDoList</h2>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> 创建配置文件和基本目录</li>
<li class="task-list-item"><input type="checkbox" disabled> 创建组件目录</li>
<li class="task-list-item"><input type="checkbox" disabled> 创建组件文件</li>
<li class="task-list-item"><input type="checkbox" disabled> 引入组件样式</li>
<li class="task-list-item"><input type="checkbox" disabled> 引入组件</li>
</ul>
<h2 data-id="heading-2">👨‍💻 Just Do It</h2>
<h3 data-id="heading-3">创建配置文件和基本目录</h3>
<ul>
<li>首先创建一个<code>auto</code>文件夹来存放我们所有的文件,下面是目录树。</li>
</ul>
<pre><code class="copyable">auto
├─ addComponent
│  ├─ add.js
│  └─ data.js
└─ page
   └─ index.js
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li><code>add.js</code>主要是存放我们主要的<code>node</code>操作代码。</li>
<li><code>data.js</code>主要是存放我们的组件名称和要生成的目录名称，例如一个<code>button</code>组件和<code>radio</code>组件是这样配置的：</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">/** data.js **/</span>
<span class="hljs-built_in">exports</span>.data = [
  &#123;
      <span class="hljs-attr">folder</span>:<span class="hljs-string">'button'</span>,
      <span class="hljs-attr">componentsName</span>:<span class="hljs-string">'button'</span>,
  &#125;,
  &#123;
      <span class="hljs-attr">folder</span>:<span class="hljs-string">'radio'</span>,
      <span class="hljs-attr">componentsName</span>:<span class="hljs-string">'radio'</span>,
  &#125;
];
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li><code>index.js</code>主要存放我们的所有模板，也就是我们希望的文件初始化的样子，具体下面会讲到。</li>
</ul>
<h3 data-id="heading-4">创建组件目录</h3>
<ul>
<li>因为我们的组件结构和样式是分别存放在<code>src</code>文件夹内的<code>packages</code>目录和<code>styles</code>目录中，也就是说我们接下来要生成的文件是要放在这两个目录里面（这里的路径是我自己的项目，不同项目的路径要自己调整喔~）</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">/** add.js **/</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>);
<span class="hljs-comment">// 创建目录</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mkdirsSync</span>(<span class="hljs-params">dirname</span>) </span>&#123;
    <span class="hljs-comment">//判断目录是否存在</span>
  <span class="hljs-keyword">if</span> (fs.existsSync(dirname)) &#123;
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  &#125; <span class="hljs-keyword">else</span> &#123;
      <span class="hljs-keyword">if</span> (mkdirsSync(path.dirname(dirname))) &#123;
          fs.mkdirSync(dirname);
          <span class="hljs-keyword">return</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`创建目录成功-<span class="hljs-subst">$&#123;dirname&#125;</span>`</span>);
      &#125;
  &#125;   
&#125;
mkdirsSync(<span class="hljs-string">`./src/packages`</span>);
mkdirsSync(<span class="hljs-string">`./src/styles`</span>);
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li>我们使用<code>fs</code>模块的<code>existsSync</code>来检查目录是否存在，使用<code>mkdirSync</code>来创建对应路径的目录，相关的<code>fs</code>模块学习可以参考<a href="https://juejin.cn/post/6997204352683212831" target="_blank" title="https://juejin.cn/post/6997204352683212831">「从零开始」前端node够用指北(二)⚡---文件操作</a></li>
<li>接下来在终端运行一下<code>node ./auto/addComponent/add.js</code>即可生成对应文件夹。</li>
<li>当然每次执行这么长的命令可不行，我们需要在<code>package.json</code>配置一下：</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">/** package.json **/</span>
  <span class="hljs-string">"scripts"</span>: &#123;
    ...
    <span class="hljs-string">"add"</span>:<span class="hljs-string">"node ./auto/addComponent/add.js"</span>
  &#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li>接下来每次执行<code>npm run add</code>即可。</li>
</ul>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3a32bc4dac9442fcae90414d0ea42ad7~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-5">创建组件文件</h3>
<ul>
<li>对于我们的组件文件在我这个项目中主要有三个分别是<code>xx.vue</code> <code>index.js</code> <code>xx.scss</code>。</li>
<li>这三个文件有什么共同店呢，就是基本模板是一样的，不同的只是组件名称罢了，比如这个<code>input</code>和<code>inputNumber</code>组件的<code>index.js</code>：</li>
</ul>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b1924e1c02ba47cf85ca18c504962259~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li>那我们首先需要在<code>page</code>文件夹中的<code>index.js</code>定义三个模板来分别存放这些基本信息。</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">/** page/index.js **/</span>
<span class="hljs-built_in">exports</span>.indexPage = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">componentsName</span>) </span>&#123;
  <span class="hljs-keyword">return</span> <span class="hljs-string">`
import <span class="hljs-subst">$&#123;componentsName.charAt(<span class="hljs-number">0</span>).toUpperCase() + componentsName.slice(<span class="hljs-number">1</span>)&#125;</span> from './<span class="hljs-subst">$&#123;componentsName&#125;</span>.vue';
export default <span class="hljs-subst">$&#123;componentsName.charAt(<span class="hljs-number">0</span>).toUpperCase() + componentsName.slice(<span class="hljs-number">1</span>)&#125;</span>;
  `</span>;
  
&#125;;

<span class="hljs-built_in">exports</span>.vuePage = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">componentsName</span>) </span>&#123;
  <span class="hljs-keyword">return</span> <span class="hljs-string">`
<template>
    <div class="<span class="hljs-subst">$&#123;componentsName&#125;</span>">

    </div>
</template>
<script>
export default &#123;
  name: '<span class="hljs-subst">$&#123;componentsName&#125;</span>',
  data()&#123;
    return&#123;&#125;
  &#125;
&#125;
</script>
  `</span>;
&#125;;

<span class="hljs-built_in">exports</span>.stylePage = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
  <span class="hljs-keyword">return</span> <span class="hljs-string">`
@charset "UTF-8";
@import "common/var";
@import "mixins/mixins";
  `</span>;
&#125;;
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li>如上我们就定义了<code>.vue</code> 文件 <code>index.js</code>文件和<code>.scss</code>文件的模板，中间使用了一些首字母大写等拼接来接收我们的<code>componentsName</code>传进来的组件名称。</li>
<li>定义了模板之后我们要使用呀，要怎么使用？很简单，继续在<code>add.js</code>文件中加入我们的<code>node</code>代码：</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">/** add.js **/</span>
...
<span class="hljs-keyword">const</span> configData = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./data"</span>);
...
<span class="hljs-comment">//遍历配置文件并调用创建目录方法</span>
configData.data.forEach(<span class="hljs-function">(<span class="hljs-params">item</span>) =></span> &#123;
  <span class="hljs-keyword">if</span>(item.folder)&#123;
      mkdirsSync(<span class="hljs-string">`./src/packages/<span class="hljs-subst">$&#123;item.folder&#125;</span>`</span>);
  &#125;
&#125;);
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li>在这里首先对在配置文件中的每个组件进行遍历创建相对应的文件夹来存放我们的<code>.vue</code>文件和<code>index.js</code>文件。</li>
<li>执行<code>npm run add</code>，给我们的<code>data.js</code>提前写写好两个组件配置<code>button</code> <code>radio</code></li>
</ul>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/de0f6f227dfe4af7993c43901ad04c32~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li>文件夹创建成功，接下来我们要在每个文件夹添加相对应模板的<code>.vue</code>和<code>index.js</code>文件并且在<code>styles</code>文件夹中添加对应的<code>.scss</code>文件。</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">/** add.js **/</span>
...
<span class="hljs-comment">//引入文件模板</span>
<span class="hljs-keyword">let</span> componentsPage = <span class="hljs-built_in">require</span>(<span class="hljs-string">"../page/index"</span>);
<span class="hljs-comment">// index模板</span>
<span class="hljs-keyword">let</span> indexPage = componentsPage.indexPage;
<span class="hljs-comment">//vue模板</span>
<span class="hljs-keyword">let</span> vuePage = componentsPage.vuePage;
<span class="hljs-comment">//style模板</span>
<span class="hljs-keyword">let</span> stylePage = componentsPage.stylePage;
...
<span class="hljs-comment">//遍历配置文件创建index、vue、style文件</span>
configData.data.forEach(<span class="hljs-function">(<span class="hljs-params">item</span>) =></span> &#123;
    <span class="hljs-keyword">if</span>(item.componentsName)&#123;
        <span class="hljs-keyword">let</span> indexPath=<span class="hljs-string">`./src/packages/<span class="hljs-subst">$&#123;item.folder&#125;</span>/index.js`</span>;
        <span class="hljs-keyword">let</span> vuePath=<span class="hljs-string">`./src/packages/<span class="hljs-subst">$&#123;item.folder&#125;</span>/<span class="hljs-subst">$&#123;item.componentsName&#125;</span>.vue`</span>;
        <span class="hljs-keyword">let</span> stylePath=<span class="hljs-string">`./src/styles/<span class="hljs-subst">$&#123;item.componentsName&#125;</span>.scss`</span>;
        <span class="hljs-keyword">let</span> name=item.componentsName;
        <span class="hljs-comment">//创建index.js文件</span>
        <span class="hljs-keyword">if</span> (fs.existsSync(indexPath)) &#123;
            <span class="hljs-built_in">console</span>.log(indexPath+<span class="hljs-string">'已存在'</span>);
        &#125;<span class="hljs-keyword">else</span>&#123;
            fs.writeFile(indexPath, indexPage(name), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>)</span>&#123;
                <span class="hljs-keyword">if</span>(err)&#123;
                    <span class="hljs-keyword">return</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'创建index文件失败'</span>, err);
                &#125;
                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`创建index文件成功！-<span class="hljs-subst">$&#123;name&#125;</span>.js`</span>);
            &#125;);
        &#125;
        <span class="hljs-comment">//创建组件vue文件</span>
        <span class="hljs-keyword">if</span> (fs.existsSync(vuePath)) &#123;
            <span class="hljs-built_in">console</span>.log(vuePath+<span class="hljs-string">'已存在'</span>);
        &#125;<span class="hljs-keyword">else</span>&#123;
            fs.writeFile(vuePath, vuePage(name), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>)</span>&#123;
                <span class="hljs-keyword">if</span>(err)&#123;
                    <span class="hljs-keyword">return</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'创建vue文件失败'</span>, err);
                &#125;
                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`创建vue文件成功！-<span class="hljs-subst">$&#123;name&#125;</span>.vue`</span>);
            &#125;);
        &#125;
        <span class="hljs-comment">//创建组件style文件</span>
        <span class="hljs-keyword">if</span> (fs.existsSync(stylePath)) &#123;
            <span class="hljs-built_in">console</span>.log(stylePath+<span class="hljs-string">'已存在'</span>);
        &#125;<span class="hljs-keyword">else</span>&#123;
            fs.writeFile(stylePath, stylePage(), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>)</span>&#123;
                <span class="hljs-keyword">if</span>(err)&#123;
                    <span class="hljs-keyword">return</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'创建style文件失败'</span>, err);
                &#125;
                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`创建style文件成功！-<span class="hljs-subst">$&#123;name&#125;</span>.scss`</span>);
            &#125;);
        &#125;
    &#125;
&#125;);
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li>以上就是添加对应文件的代码啦，你不要看它很长，其实分开来很好理解，都是一样的操作，请听我细细道来：
<ul>
<li>首先引入文件模板<code>../page/index.js</code>，分别拿出三个模板用<code>indexPage</code> <code>vuePage</code> <code>stylePage</code>来存放。</li>
<li>再者还是遍历我们的组件配置文件</li>
<li>在遍历过程中我们根据不同的组件提前保存一下路径的变量<code>indexPath</code> <code>vuePath</code> <code>stylePath</code>这个路径等下会使用。</li>
<li>接下来的三个<code>if</code>判断其实都是一样的，目的是为了在对应文件夹写入对应文件，我在上面已经分好了注释，我们来看第一个创建<code>index.js</code>文件。</li>
<li>还是通过<code>fs</code>模块的<code>existsSync</code>判断刚刚定义的路径变量是否存在，这个路径变量其实就是这个<code>index.js</code>文件，如果存在则跳过。</li>
<li>再通过<code>fs</code>模块的<code>writeFile</code>写入相关的信息，将组件名称传进去这样<code>index.js</code>模板就创建完成了。</li>
<li>接下来的<code>vue</code>文件和<code>scss</code>文件也是一样的，值得注意的是如果不进行判断文件是否存在的操作会直接覆盖原油的文件。</li>
</ul>
</li>
<li>怎么样？我这样一说是不是也比较好理解了呢？如果还有不清楚的可以在评论区留言喔~😀</li>
<li>我们执行一下<code>npm run add</code>试试</li>
</ul>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c0b206f406694cf193384522d3a898b8~tplv-k3u1fbpfcp-watermark.image" alt="自动化脚本1.gif" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-6">引入组件样式</h3>
<ul>
<li>我们的组件相应的文件都做好了，因为我的项目之前是在<code>styles</code>文件夹的<code>index.scss</code>引入所有的<code>.scss</code>文件，接下来我们只需要每次执行脚本时更新覆盖这个<code>index.scss</code>文件添加新的组件样式即可。</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">/** add.js **/</span>
...
<span class="hljs-comment">//一个覆盖index.scss的方法</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dealIndexStyle</span>(<span class="hljs-params"></span>)</span>&#123;
    <span class="hljs-keyword">let</span> file=<span class="hljs-string">''</span>;
    configData.data.forEach(<span class="hljs-function">(<span class="hljs-params">item</span>) =></span> &#123;
        <span class="hljs-comment">//遍历所有组件引入每个组件样式 例如：@import "button";</span>
        <span class="hljs-keyword">let</span> name=item.componentsName; <span class="hljs-comment">//首字母大写</span>
        file+=<span class="hljs-string">`@import "<span class="hljs-subst">$&#123;name&#125;</span>";\n`</span>;
    &#125;);
    fs.writeFile(<span class="hljs-string">`./src/styles/index.scss`</span>,file,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>)</span>&#123;
        <span class="hljs-keyword">if</span>(err)&#123;
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'主样式文件引入scss失败'</span>, err);
        &#125;<span class="hljs-keyword">else</span>&#123;
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'主样式文件引入scss成功'</span>);
        &#125;
    &#125;);
&#125;
dealIndexStyle();
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li>我们只需要像这样每次运行都重写我们的<code>index.scss</code>文件即可，运行后得到的文件是这样的：</li>
</ul>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/19a6f705bd9843f781557d81e98f6efd~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-7">引入组件</h3>
<ul>
<li>在我的项目中是通过一个<code>addComponents.js</code>文件来引入存放我们的所有组件文件再将其导出，大概的格式是这样的：</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">/** addComponents.js **/</span>
<span class="hljs-keyword">import</span> xxx <span class="hljs-keyword">from</span> <span class="hljs-string">'xxx'</span>;
<span class="hljs-keyword">const</span> allComponents =&#123;
<span class="hljs-attr">lxxx</span>: xxx,
&#125;;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> allComponents;
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li>所以其实跟上一步的样式是一样的，我们只需要每次对这个文件格式做些处理然后覆盖这个文件即可。</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">/** add.js **/</span>
...
<span class="hljs-comment">//遍历配置文件获取对应组件拼装组件初始化</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addComponentsList</span>(<span class="hljs-params"></span>)</span>&#123;
    <span class="hljs-keyword">let</span> file=<span class="hljs-string">''</span>;
    <span class="hljs-keyword">let</span> allComponents=<span class="hljs-string">''</span>;
    configData.data.forEach(<span class="hljs-function">(<span class="hljs-params">item</span>) =></span> &#123;
        <span class="hljs-comment">//遍历所有组件每个组件添加依赖 例如：import Button from './packages/button';</span>
        <span class="hljs-keyword">let</span> name=item.componentsName.charAt(<span class="hljs-number">0</span>).toUpperCase() + item.componentsName.slice(<span class="hljs-number">1</span>); <span class="hljs-comment">//首字母大写</span>
        file+=<span class="hljs-string">`import <span class="hljs-subst">$&#123;name&#125;</span> from './packages/<span class="hljs-subst">$&#123;item.componentsName&#125;</span>';\n`</span>;
    &#125;);
    configData.data.forEach(<span class="hljs-function">(<span class="hljs-params">item</span>) =></span> &#123;
        <span class="hljs-comment">//遍历所有组件每个组件添加   例如：lButton: Button,</span>
        <span class="hljs-keyword">let</span> name=item.componentsName.charAt(<span class="hljs-number">0</span>).toUpperCase() + item.componentsName.slice(<span class="hljs-number">1</span>); <span class="hljs-comment">//首字母大写</span>
        allComponents+=<span class="hljs-string">`l<span class="hljs-subst">$&#123;name&#125;</span>: <span class="hljs-subst">$&#123;name&#125;</span>,\n`</span>;
    &#125;);
    file +=<span class="hljs-string">`const allComponents =&#123;\n<span class="hljs-subst">$&#123;allComponents&#125;</span>&#125;;\nexport default allComponents;`</span>;
    <span class="hljs-comment">//写入组件列表</span>
    fs.writeFile(<span class="hljs-string">`./src/addComponents.js`</span>,file,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>)</span>&#123;
        <span class="hljs-keyword">if</span>(err)&#123;
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'写入组件列表失败'</span>, err);
        &#125;<span class="hljs-keyword">else</span>&#123;
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'写入组件列表成功'</span>);
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'结束创建文件'</span>);
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'>>>>>>>>>>>>>'</span>);
        &#125;
    &#125;);
&#125;
addComponentsList();
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li>在<code>addComponentsList</code>方法里大部分都是对文件内容进行的拼接，主要的代码还是<code>fs</code>模块的<code>writeFile</code>写入功能，每个人的项目内容都不同，以上只是举例我的文件是怎么写的，具体内容还得具体分析。</li>
<li>至此，对于一个组件的初始化的自动化脚本就完成了，我们来看看效果如何。</li>
</ul>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1f95bbffab2d49c9b452475a863c14a6~tplv-k3u1fbpfcp-watermark.image" alt="自动化脚本2.gif" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li>完美！！！！！好了我要去喝奶茶了。</li>
</ul>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/41e1821455c84edfb3d02e8661ad8eaf~tplv-k3u1fbpfcp-watermark.image" alt="奶茶.jfif" loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-8">👋 写在最后</h2>
<ul>
<li>好了这次的文章就分享到这里，首先感谢大家看到这里！！！我也没想到我会坚持写作<strong>31</strong>天，感谢大家对我的支持！！</li>
<li>以上就是我在优化自己项目时候所做的一些小操作，目的就是为了帮助我们减少一些重复机械性的动作，<strong>主要是提供一些思路</strong>，更细的优化其实还有很多，我们虽然对外说是<strong>CV</strong>工程师但是真的不仅仅只是会复制粘贴而已，希望可以帮到大家。</li>
<li>记得之前有位大佬说过： <strong>前端如果只是仅仅写页面的话 那你真的只是CV工程师罢了</strong>。</li>
<li>以上的内容跟着一步步敲是完全没有问题的如果有的话我把源码<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgitee.com%2Fvergil_lu%2Fnode-automation-script%2Fblob%2Fmaster%2Fauto%2FaddComponent%2Fadd.js" target="_blank" rel="nofollow noopener noreferrer" title="https://gitee.com/vergil_lu/node-automation-script/blob/master/auto/addComponent/add.js" ref="nofollow noopener noreferrer">放在这里</a>，有需要可以自取。</li>
<li>如果您觉得这篇文章有帮助到您的的话不妨<strong>🍉关注+点赞+收藏+评论+转发🍉</strong>支持一下哟~~😛您的支持就是我更新的最大动力。</li>
</ul>
<h2 data-id="heading-9">🌅 往期精彩</h2>
<p><a href="https://juejin.cn/post/7001779766852321287" target="_blank" title="https://juejin.cn/post/7001779766852321287">一个"剑气"加载🌪️</a></p>
<p><a href="https://juejin.cn/post/7000652451435003918" target="_blank" title="https://juejin.cn/post/7000652451435003918">一个"水"按钮💧</a></p>
<p><a href="https://juejin.cn/post/7000300247947673630" target="_blank" title="https://juejin.cn/post/7000300247947673630">产品经理：你能不能让词云动起来？</a></p>
<p><a href="https://juejin.cn/post/6997978246839042079" target="_blank" title="https://juejin.cn/post/6997978246839042079">一文搞定echarts地图轮播高亮⚡</a></p></div>  
</div>
            