
---
title: '模块化开发'
categories: 
 - 编程
 - 掘金
 - 分类
headimg: 'https://picsum.photos/400/300?random=3496'
author: 掘金
comments: false
date: Tue, 08 Jun 2021 09:09:08 GMT
thumbnail: 'https://picsum.photos/400/300?random=3496'
---

<div>   
<div class="markdown-body"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><h3 data-id="heading-0">一. 模块化开发</h3>
<h4 data-id="heading-1">1. 概述</h4>
<ul>
<li>当下最重要的前端开发范式</li>
<li>通过把复杂代码按照功能的不同划分为不同模块</li>
<li>模块化仅仅是一个思想</li>
</ul>
<h4 data-id="heading-2">2. 模块化的演变过程</h4>
<ul>
<li>一阶段
<ul>
<li>文件划分方式</li>
<li>把每个功能和数据单独存放到不同的文件中，约定每一个文件就是一个独立的模块，如果使用模块就通过 script 标签引入到页面中</li>
<li>缺点
<ul>
<li>污染全局作用域</li>
<li>命名冲突问题</li>
<li>无法管理模块与模块之间的依赖关系</li>
<li>完全依靠约定，项目上了体量之后，约定可能会被打破</li>
</ul>
</li>
</ul>
</li>
<li>二阶段
<ul>
<li>命名空间方式</li>
<li>把每个功能和数据挂载到一个对象下</li>
</ul>
</li>
<li>三阶段
<ul>
<li>IIFE</li>
<li>使用立即执行函数提供私有空间</li>
<li>实现了私有成员的概念</li>
</ul>
</li>
<li>四阶段
<ul>
<li>模块化规范</li>
<li>commonJS
<ul>
<li>一个文件就是一个模块</li>
<li>每个模块都有单独的作用域</li>
<li>通过 module.exports 导出成员</li>
<li>通过 require 函数载入模块</li>
<li>commonJS 是以同步的方式加载模块</li>
</ul>
</li>
<li>AMD（Asynchronous Module Definition）
<ul>
<li>Require.js 实现了 AMD 规范
<ul>
<li>约定每个模块必须通过 define 函数定义</li>
<li>通过 require 载入模块</li>
</ul>
</li>
<li>目前绝大多数第三方库都支持 AMD 规范</li>
<li>缺点
<ul>
<li>AMD 使用起来相对比较复杂</li>
<li>模块 JS 文件请求频繁</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-3">3. 模块化标准规范</h4>
<ul>
<li>node 环境中使用 commonJS 规范，浏览器环境中使用 ES Modules 规范</li>
<li>ES Modules 是 ECMA Script 2015 中定义的模块系统</li>
</ul>
<h4 data-id="heading-4">4. ES Modules</h4>
<ul>
<li>
<p>特性</p>
<ul>
<li>通过给 script 标签添加 type="module" 的属性，就可以以 ES Module 的标准执行其中的 JS 代码</li>
<li>ES Module 自动采用严格模式，忽略 use strict 的形式</li>
<li>每一个 ES Module 都运行在私有作用域中</li>
<li>在 ES Module 中，通过 CORS 的方式请求外部 JS 文件</li>
<li>ES Module 中的 script 标签会自动延迟执行脚本</li>
</ul>
</li>
<li>
<p>导出</p>
<pre><code class="copyable">// module.js
// 修饰成员声明的方式
export var name = 'kjy'

export function hello()&#123;
console.log('hello')
&#125;

export class Person&#123;&#125;

// 整体导出
var name = 'kjy'

function hello()&#123;
console.log('hello')
&#125;

class Person&#123;&#125;

export &#123; 
name,
hello,
Person
&#125;

// 重命名
export &#123; 
name as fooName,
hello as fooHello,
Person as fooPerson
&#125;

// 导出默认成员
export default name

// app.js
import &#123; name &#125; from './module.js'
// 重命名导入
import &#123; fooName, fooHello, fooPerson &#125; from './module.js'
// 默认成员导入
export name from './module.js'
<span class="copy-code-btn">复制代码</span></code></pre>
</li>
<li>
<p>导入导出问题</p>
<ul>
<li>export &#123; name, age &#125;，后面的花括号并不是字面量对象，而是 ES Module 导出语法</li>
<li>export default &#123; name, age &#125;，后边的花括号是一个字面量对象</li>
<li>export 导出成员时，导出的是成员的引用</li>
<li>导出的成员引用是只读的</li>
<li>import &#123; name, age &#125; from './module.js'，import 后边的花括号并不是解构语法，而是 ES Module 的导入语法</li>
<li>import 导入模块时，from 后边写的是导入模块的路径，必须使用完整的模块文件名称，不能省略 .js 的扩展名</li>
<li>import 导入模块时，from 后边如果是相对路径，相对路径的 ./ 不能省略，否则会认为是第三方模块</li>
<li>import &#123;&#125; from './module.js' 或 import './module.js' 会立即执行模块中的代码</li>
<li>import * from './module.js'，导入模块中所有的成员</li>
<li>不能使用 import 去 from 一个变量</li>
<li>import 关键词必须出现在最顶层</li>
<li>import('./module.js')，通过 import 函数动态的导入模块，这个函数返回一个 Promise，可以通过 .then(module => &#123; console.log(module) &#125;)，的方式拿到导入成员</li>
<li>如果同时导出具名成员和默认成员，可以通过 import &#123; name, age, default as title &#125; from './module.js' 或 import title ,&#123; name, age &#125; from './module.js' 的方式导入</li>
</ul>
</li>
<li>
<p>ES Module 在 Node.js 的支持情况</p>
<ul>
<li>可以在 Node.js 中 通过 ES Module 的方式载入原生的模块和第三方的模块</li>
</ul>
</li>
<li>
<p>ES Module in Node.js - 与 CommonJS 交互</p>
<ul>
<li>ES Module 中可以载入 CommonJS 中所提供的成员</li>
<li>在 CommonJS 中，不能通过 require() 的方式载入 ES Module</li>
<li>CommonJS 始终导出一个默认成员</li>
<li>ES Module 中没有 CommonJS 中的模块全局成员</li>
</ul>
</li>
</ul></div>  
</div>
            