
---
title: '自己封装一个分页居中的函数'
categories: 
 - 编程
 - 掘金
 - 分类
headimg: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cf9aeb5e21d2491995e7217315239117~tplv-k3u1fbpfcp-watermark.image'
author: 掘金
comments: false
date: Fri, 20 Aug 2021 04:08:24 GMT
thumbnail: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cf9aeb5e21d2491995e7217315239117~tplv-k3u1fbpfcp-watermark.image'
---

<div>   
<div class="markdown-body"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><h1 data-id="heading-0">前言</h1>
<p>当一个项目中有许多数据需要展示的时候，众所周知一个页面是没有办法放下所有数据的，所以会出现分页的需求。那么分页又会产生什么新的需求呢？如果你也有这样的疑问，那就看看本文内容哦~</p>
<hr color="#000000" size="1"">
<h1 data-id="heading-1">一、需求</h1>
<p>那么如果分页特别多的时候，我们也不能把所有页码都展示出来，这时候就需要动态的展示当前选中页左右几个就可以了，为了用户更好的体验，尽量让选中的页码居中显示，这样也是极好的。</p>
<p>在可能的情况下，让选中的页码值，在中间显示。</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// total: 总条数</span>
<span class="hljs-comment">// size: 每页几条</span>
<span class="hljs-comment">// page: 当前第几页</span>
<span class="hljs-comment">// btnCount: 最多能看到几个按钮</span>

<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;
<span class="hljs-keyword">const</span> arr = [] <span class="hljs-comment">//能看到的页码集合</span>

<span class="hljs-keyword">return</span> arr
&#125;

<span class="hljs-comment">// 在可能的情况下，让page处于正中间</span>
      <span class="hljs-comment">// f(100, 10, 3, 5) // ==> [1, 2, 3, 4, 5]</span>
      <span class="hljs-comment">// f(100, 10, 7, 5) // ==> [5, 6, 7, 8, 9]</span>
      <span class="hljs-comment">// f(100, 10, 2, 5) // ==> [1, 2, 3, 4, 5]</span>
      <span class="hljs-comment">// f(100, 10, 5, 5) // ==> [3, 4, 5, 6, 7]</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h1 data-id="heading-2">二、代码演示</h1>
<p>当要展示的页码数组为奇数的时候，才能实现选中页码在中间显示。
代码如下（示例）：</p>
<pre><code class="hljs language-js copyable" lang="js"> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params">total, size, page, btnCount = <span class="hljs-number">5</span></span>) </span>&#123;
        <span class="hljs-comment">// show me your code</span>
        <span class="hljs-keyword">const</span> arr = [] <span class="hljs-comment">// 能看到的页码集合</span>
        <span class="hljs-keyword">let</span> num = <span class="hljs-built_in">Math</span>.floor(btnCount / <span class="hljs-number">2</span>)

        <span class="hljs-keyword">let</span> totalPage = <span class="hljs-built_in">Math</span>.ceil(total / size) <span class="hljs-comment">// 拿到总条数</span>
        <span class="hljs-keyword">let</span> leftPage = page - num <span class="hljs-comment">// 拿到起始数字</span>
        <span class="hljs-keyword">let</span> rightPage = page + num <span class="hljs-comment">// 拿到结尾数字</span>

        <span class="hljs-comment">// 判断要展示页码数是否为偶数或者大于总页码数，或者要查看的当前页大于总页码</span>
        <span class="hljs-keyword">if</span> (btnCount % <span class="hljs-number">2</span> === <span class="hljs-number">0</span> || btnCount > totalPage || page > totalPage) &#123;
          alert(<span class="hljs-string">'请检查输入数字是否为奇数或者输入数字大于总页数'</span>)
          <span class="hljs-keyword">return</span>
        &#125;

        <span class="hljs-comment">// 判断左侧数字是否小于等于1</span>
        <span class="hljs-keyword">if</span> (leftPage <= <span class="hljs-number">1</span>) &#123;
          <span class="hljs-comment">// 从1开始循环到默认要展示的页码数为止</span>
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i <= btnCount; i++) &#123;
            arr.push(i)
          &#125;
        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (rightPage > totalPage) &#123;
          <span class="hljs-comment">// 判断右边的数字是否大于总页码数</span>
          <span class="hljs-comment">// 计算得到左侧起始值，循环到总页码数为止</span>
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = totalPage - btnCount + <span class="hljs-number">1</span>; i <= totalPage; i++) &#123;
            arr.push(i)
          &#125;
        &#125; <span class="hljs-keyword">else</span> &#123;
          <span class="hljs-comment">// 左右的数字均在总页码数的安全范围内</span>
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = leftPage; i <= rightPage; i++) &#123;
            arr.push(i)
          &#125;
        &#125;
        <span class="hljs-keyword">return</span> arr
      &#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h1 data-id="heading-3">三、结果展示</h1>
<p>为了让大家更直观的看到效果，这里写了一个html页面，模拟了一下分页页面。
代码如下（示例）：</p>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-meta"><!DOCTYPE <span class="hljs-meta-keyword">html</span>></span>
<span class="hljs-tag"><<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">head</span>></span>
    <span class="hljs-tag"><<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /></span>
    <span class="hljs-tag"><<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span> /></span>
    <span class="hljs-tag"><<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /></span>
    <span class="hljs-tag"><<span class="hljs-name">title</span>></span>Document<span class="hljs-tag"></<span class="hljs-name">title</span>></span>
    <span class="hljs-tag"><<span class="hljs-name">style</span>></span><span class="css">
      * &#123;
        <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">box-sizing</span>: border-box;
      &#125;

      <span class="hljs-selector-tag">div</span> &#123;
        <span class="hljs-attribute">margin</span>: <span class="hljs-number">50px</span> auto;
        <span class="hljs-attribute">width</span>: <span class="hljs-number">500px</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">30px</span>;
      &#125;

      <span class="hljs-selector-class">.paging</span> &#123;
        <span class="hljs-attribute">display</span>: flex;
        <span class="hljs-attribute">justify-content</span>: center;
      &#125;

      <span class="hljs-selector-tag">ul</span> &#123;
        <span class="hljs-attribute">list-style</span>: none;
      &#125;

      <span class="hljs-selector-tag">li</span> &#123;
        <span class="hljs-attribute">float</span>: left;
        <span class="hljs-attribute">width</span>: <span class="hljs-number">30px</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">30px</span>;
        <span class="hljs-attribute">line-height</span>: <span class="hljs-number">30px</span>;
        <span class="hljs-attribute">text-align</span>: center;
        <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
      &#125;
    </span><span class="hljs-tag"></<span class="hljs-name">style</span>></span>
  <span class="hljs-tag"></<span class="hljs-name">head</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">body</span>></span>
    <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form"</span>></span>
      <span class="hljs-tag"><<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">""</span>></span>
        <span class="hljs-tag"><<span class="hljs-name">select</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"total"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">""</span>></span>
          <span class="hljs-tag"><<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"100"</span>></span>共100条<span class="hljs-tag"></<span class="hljs-name">option</span>></span>
          <span class="hljs-tag"><<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"200"</span>></span>共200条<span class="hljs-tag"></<span class="hljs-name">option</span>></span>
        <span class="hljs-tag"></<span class="hljs-name">select</span>></span>
        <span class="hljs-tag"><<span class="hljs-name">select</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"size"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">""</span>></span>
          <span class="hljs-tag"><<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"10"</span>></span>10/页<span class="hljs-tag"></<span class="hljs-name">option</span>></span>
          <span class="hljs-tag"><<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"20"</span>></span>20/页<span class="hljs-tag"></<span class="hljs-name">option</span>></span>
          <span class="hljs-tag"><<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"30"</span>></span>30/页<span class="hljs-tag"></<span class="hljs-name">option</span>></span>
          <span class="hljs-tag"><<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"40"</span>></span>40/页<span class="hljs-tag"></<span class="hljs-name">option</span>></span>
        <span class="hljs-tag"></<span class="hljs-name">select</span>></span>
        <span class="hljs-tag"><<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"page"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"请输入要查看第几页"</span> /></span>
        <span class="hljs-tag"><<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"btnCount"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"5"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"请输入默认展示几条数据"</span> /></span>
        <span class="hljs-tag"><<span class="hljs-name">button</span>></span>确定<span class="hljs-tag"></<span class="hljs-name">button</span>></span>
      <span class="hljs-tag"></<span class="hljs-name">form</span>></span>
    <span class="hljs-tag"></<span class="hljs-name">div</span>></span>
    <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"paging"</span>></span>
      <span class="hljs-tag"><<span class="hljs-name">ul</span>></span><span class="hljs-tag"></<span class="hljs-name">ul</span>></span>
    <span class="hljs-tag"></<span class="hljs-name">div</span>></span>

    <span class="hljs-tag"><<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"jquery-3.5.1.min.js"</span>></span><span class="hljs-tag"></<span class="hljs-name">script</span>></span>
    <span class="hljs-comment"><!-- 引入封装好的分页js --></span>
    <span class="hljs-tag"><<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./paging.js"</span>></span><span class="hljs-tag"></<span class="hljs-name">script</span>></span>
    <span class="hljs-tag"><<span class="hljs-name">script</span>></span><span class="javascript">
      $(<span class="hljs-string">'form'</span>).on(<span class="hljs-string">'submit'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>&#123;
        <span class="hljs-comment">// 每一次提交表单，先将ul内的内容清空一次</span>
        $(<span class="hljs-string">'ul'</span>).html(<span class="hljs-string">''</span>)
        e.preventDefault()
        <span class="hljs-comment">// 拿到填写的表单数据</span>
        <span class="hljs-keyword">let</span> fd = <span class="hljs-keyword">new</span> FormData(<span class="hljs-built_in">this</span>)
        <span class="hljs-keyword">let</span> total = +fd.get(<span class="hljs-string">'total'</span>)
        <span class="hljs-keyword">let</span> size = +fd.get(<span class="hljs-string">'size'</span>)
        <span class="hljs-keyword">let</span> page = +fd.get(<span class="hljs-string">'page'</span>)
        <span class="hljs-keyword">let</span> btnCount = +fd.get(<span class="hljs-string">'btnCount'</span>)

        <span class="hljs-keyword">let</span> arr = f(total, size, page, btnCount)
        <span class="hljs-comment">// 循环数组，将li追加到ul中</span>
        arr.forEach(<span class="hljs-function"><span class="hljs-params">item</span> =></span> &#123;
          $(<span class="hljs-string">'ul'</span>).append(<span class="hljs-string">`<li><span class="hljs-subst">$&#123;item&#125;</span></li>`</span>)
        &#125;)

        <span class="hljs-comment">// 拿到当前要查看的页码在数组中的索引值，给对应的li给背景色</span>
        <span class="hljs-keyword">let</span> index = arr.findIndex(<span class="hljs-function"><span class="hljs-params">item</span> =></span> item === page)
        $(<span class="hljs-string">'li'</span>).eq(index).css(<span class="hljs-string">'backgroundColor'</span>, <span class="hljs-string">'skyblue'</span>)
      &#125;)
    </span><span class="hljs-tag"></<span class="hljs-name">script</span>></span>
  <span class="hljs-tag"></<span class="hljs-name">body</span>></span>
<span class="hljs-tag"></<span class="hljs-name">html</span>></span>
<span class="copy-code-btn">复制代码</span></code></pre>
<p>运行后的结果如下:
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cf9aeb5e21d2491995e7217315239117~tplv-k3u1fbpfcp-watermark.image" alt="在这里插入图片描述" loading="lazy" referrerpolicy="no-referrer">
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3c98a2349fda463d8aa2753f659c802e~tplv-k3u1fbpfcp-watermark.image" alt="在这里插入图片描述" loading="lazy" referrerpolicy="no-referrer"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/82578444322147db9b0739b548c5e800~tplv-k3u1fbpfcp-watermark.image" alt="在这里插入图片描述" loading="lazy" referrerpolicy="no-referrer"></p>
<p>这里就不做一一演示了，各位小伙伴儿可以复制代码到编辑器运行后，看看效果哦~</p>
<hr color="#000000" size="1"">
<h1 data-id="heading-4">总结</h1>
<p>js代码虽然功能实现了，但是还有优化的空间，暂时没有想到好的方法，有路过的大佬，指点指点呀~蟹蟹。</p></div>  
</div>
            