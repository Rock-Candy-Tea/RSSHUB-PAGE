
---
title: '时间对象及时间戳的运用（时针、倒计时）'
categories: 
 - 编程
 - 掘金
 - 分类
headimg: 'https://picsum.photos/400/300?random=902'
author: 掘金
comments: false
date: Sat, 28 Aug 2021 08:48:42 GMT
thumbnail: 'https://picsum.photos/400/300?random=902'
---

<div>   
<div class="markdown-body html cache"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><h1 data-id="heading-0">时间对象</h1>
<p>时间的获取</p>
<pre><code class="hljs language-js copyable" lang="js"> <span class="hljs-comment">// 1.获取当前时间对象</span>
<span class="hljs-keyword">var</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();  <span class="hljs-comment">//当前的时间的时间对象,注意下 ：这个时间是你的电脑时间，一般用的时间会从服务器获取</span>
<span class="hljs-built_in">console</span>.log(date);

 <span class="hljs-comment">// 2.时间对象的时间可以设置</span>
 <span class="hljs-comment">// 2.1设置时间方式一：</span>
 <span class="hljs-comment">// 参数分别是 年  月（注意：是从0-11月）  日   时  分  秒 </span>
 <span class="hljs-keyword">var</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-string">"2020"</span>,<span class="hljs-string">"7"</span>,<span class="hljs-string">"3"</span>);<span class="hljs-comment">//注意这里的"7"代表8月</span>
 <span class="hljs-built_in">console</span>.log(date);<span class="hljs-comment">//Mon Aug 03 2020 00:00:00 GMT+0800 (中国标准时间)</span>
 
<span class="hljs-comment">//2.2设置时间方式二：注意 月份就是 1-12月 </span>
<span class="hljs-comment">//年份常用连接符号 可以是 - / .</span>
<span class="hljs-keyword">var</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-string">"2020-8-5 14:20:14"</span>);<span class="hljs-comment">//注意这里的8-5 代表8月5日</span>
<span class="hljs-built_in">console</span>.log(date);<span class="hljs-comment">//Wed Aug 05 2020 14:20:14 GMT+0800 (中国标准时间)</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<p>时间的操作</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">var</span> nowDate = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
<span class="hljs-built_in">console</span>.log(nowDate);<span class="hljs-comment">//获取当前时间</span>

<span class="hljs-comment">// 1.获取年份 getFullYear; 注意：都需要加小括号</span>
<span class="hljs-keyword">var</span> year =   nowDate.getFullYear();
<span class="hljs-built_in">console</span>.log(year);
<span class="hljs-comment">// 2.获取月份 ; 尤其注意 月份是 0-11 也是索引</span>
<span class="hljs-keyword">var</span> month = nowDate.getMonth();
<span class="hljs-built_in">console</span>.log(month+<span class="hljs-number">1</span>);  <span class="hljs-comment">// 获取的月份 一定要加1 才是现在的月份</span>
<span class="hljs-comment">// 3. 获取天 getDate</span>
 <span class="hljs-keyword">var</span> day = nowDate.getDate();
 <span class="hljs-built_in">console</span>.log(day);
<span class="hljs-comment">// 4.获取星期 getDay</span>
<span class="hljs-keyword">var</span> day = nowDate.getDay(); <span class="hljs-comment">//尤其要和获取天区分开；星期日是执行0，其余正常1-6；</span>
<span class="hljs-built_in">console</span>.log(day);
<span class="hljs-comment">// 5.获取时 : 24小时制</span>
<span class="hljs-keyword">var</span> hour = nowDate.getHours();
<span class="hljs-built_in">console</span>.log(hour);
<span class="hljs-comment">// 6.获取分 ：</span>
<span class="hljs-keyword">var</span> minute = nowDate.getMinutes();
<span class="hljs-built_in">console</span>.log(minute);
<span class="hljs-comment">// 7.获取秒 </span>
<span class="hljs-keyword">var</span> second = nowDate.getSeconds();
<span class="hljs-built_in">console</span>.log(second);

总结：获取月份时，尤其注意 月份是 <span class="hljs-number">0</span>-<span class="hljs-number">11</span> 也是索引，执行是必须加<span class="hljs-number">1</span>；
注意区分天date和星期day;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-1">一、写一个时钟的js</h2>
<p>1.获取当前的时 、分、 秒；</p>
<p>2.分钟 = 秒转成分 + 当前的分；</p>
<p>3.小时 ：分转成小时 + 当前小时的时间；</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">//这个版本每次刷新一下页面会从0点等到持续1秒后再执行当前时间转动，用户体验感不太好</span>
<span class="hljs-built_in">setInterval</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;
<span class="hljs-keyword">var</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(); <span class="hljs-comment">//当前是的时间对象 电脑时间</span>
<span class="hljs-keyword">var</span> msecond = date.getMilliseconds(); <span class="hljs-comment">// 获取毫秒数</span>
<span class="hljs-keyword">var</span> second = date.getSeconds()+msecond/<span class="hljs-number">1000</span>;  <span class="hljs-comment">// 获取当前的秒</span>
<span class="hljs-keyword">var</span> minute = date.getMinutes() + second / <span class="hljs-number">60</span>;  <span class="hljs-comment">// 获取当前分 + 当前秒的时间</span>
<span class="hljs-keyword">var</span> hour = date.getHours() + minute / <span class="hljs-number">60</span>; <span class="hljs-comment">//获取当前小时 + 当前分和秒所占的小时数；</span>
<span class="hljs-comment">// var myhour =  date.getHours()>12?date.getHours()-12:date.getHours();</span>
<span class="hljs-comment">// 算角度 </span>
<span class="hljs-keyword">var</span> dsecond = second / <span class="hljs-number">60</span> * <span class="hljs-number">360</span>+msecond/<span class="hljs-number">1000</span>;;  <span class="hljs-comment">//秒所占的角度</span>
<span class="hljs-keyword">var</span> dminute = minute / <span class="hljs-number">60</span> * <span class="hljs-number">360</span>;  <span class="hljs-comment">//分所占的角度</span>
<span class="hljs-keyword">var</span> dhour = hour / <span class="hljs-number">12</span> * <span class="hljs-number">360</span>;
hourEle.style.transform = <span class="hljs-string">"rotate("</span> + dhour + <span class="hljs-string">"deg)"</span>;
minuteEle.style.transform = <span class="hljs-string">"rotate("</span> + dminute + <span class="hljs-string">"deg)"</span>;
secondEle.style.transform = <span class="hljs-string">"rotate("</span> + dsecond + <span class="hljs-string">"deg)"</span>;
&#125;,<span class="hljs-number">1000</span>)

<span class="copy-code-btn">复制代码</span></code></pre>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">//稍微优化下版本</span>
<span class="hljs-keyword">var</span> run = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
<span class="hljs-keyword">var</span> date=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();  <span class="hljs-comment">// 获取当前的时间；</span>
<span class="hljs-keyword">var</span> msecond = date.getMilliseconds(); <span class="hljs-comment">// 获取毫秒数</span>
<span class="hljs-keyword">var</span> second = date.getSeconds()+msecond/<span class="hljs-number">1000</span>;  <span class="hljs-comment">// 获取当前的秒</span>
<span class="hljs-keyword">var</span> minute = date.getMinutes() + second / <span class="hljs-number">60</span>;  <span class="hljs-comment">// 获取当前分 + 当前秒的时间</span>
<span class="hljs-keyword">var</span> hour = date.getHours() + minute / <span class="hljs-number">60</span>;<span class="hljs-comment">//获取当前小时 + 当前分和秒所占的小时数；</span>

<span class="hljs-comment">//计算角度</span>
<span class="hljs-keyword">var</span> dsecond = second / <span class="hljs-number">60</span> * <span class="hljs-number">360</span>;  <span class="hljs-comment">//秒所占的角度</span>
<span class="hljs-keyword">var</span> dminute = minute / <span class="hljs-number">60</span> * <span class="hljs-number">360</span>;  <span class="hljs-comment">//分所占的角度</span>
<span class="hljs-keyword">var</span> dhour = hour / <span class="hljs-number">12</span> * <span class="hljs-number">360</span>;
<span class="hljs-comment">//第一位是id名</span>
hourEle.style.transform = <span class="hljs-string">"rotate("</span> + dhour + <span class="hljs-string">"deg)"</span>;
minuteEle.style.transform = <span class="hljs-string">"rotate("</span> + dminute + <span class="hljs-string">"deg)"</span>;
secondEle.style.transform = <span class="hljs-string">"rotate("</span> + dsecond + <span class="hljs-string">"deg)"</span>;
&#125;
run(); <span class="hljs-comment">// 浏览器一进入的时候就会 先执行一次</span>
<span class="hljs-built_in">setInterval</span>(run,<span class="hljs-number">1000</span>);<span class="hljs-comment">// 先没有执行 需要等到 1秒之后才会间隔执行</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-2">二、时间戳</h2>
<p>时间戳 ： 一个时间距离格林威治时间（1970年1月1日0时0分0秒）的毫秒数 ；</p>
<p>如何获取时间戳 : 时间对象.getTime();</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">var</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
<span class="hljs-keyword">var</span> time = date.getTime();
<span class="hljs-built_in">console</span>.log(time);  <span class="hljs-comment">//当前的时间戳 就是 当前时间 距离 格林威治时间的毫秒数。</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<p>时间戳的用处：可以做2个时间之间的实际差 ；或者是倒计时 、秒杀。</p>
<p>注意 ：时间戳在js里是毫秒，在很多后台传过来的时间戳是秒。</p>
<h2 data-id="heading-3">三、做一个倒计时</h2>
<p>一般获取时间会通过服务端获取</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span>(<span class="hljs-params"></span>)</span>&#123;
            <span class="hljs-keyword">var</span> mdate=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-string">"2021-8-29 08:36:25"</span>)
            <span class="hljs-keyword">var</span> nowdate=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
            <span class="hljs-keyword">var</span> mtimeStamp=mdate.getTime();
            <span class="hljs-keyword">var</span> nowtimeStamp=nowdate.getTime();
            <span class="hljs-keyword">var</span> time=(mtimeStamp-nowtimeStamp)/<span class="hljs-number">1000</span>;<span class="hljs-comment">//两者间隔时间差</span>
        &#125;
          
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">run</span>(<span class="hljs-params"></span>) </span>&#123;
            <span class="hljs-comment">// 1.全国上学时间对象 ：</span>
            <span class="hljs-keyword">var</span> mdate = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-string">"2021-09-01 09:00:00"</span>);  <span class="hljs-comment">//周一上午9点 </span>
            <span class="hljs-comment">// console.log(mdate);</span>
            <span class="hljs-comment">// 2.现在的时间对象</span>
            <span class="hljs-keyword">var</span> nowDate = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();  <span class="hljs-comment">//现在的时间对象</span>

            <span class="hljs-comment">// 3.获取对象的时间戳 ，计算中间的时间差 </span>
            <span class="hljs-keyword">var</span> mtimeStamp = mdate.getTime();  <span class="hljs-comment">//周一上课的时间戳；</span>
            <span class="hljs-keyword">var</span> nowTimeStamp = nowDate.getTime(); <span class="hljs-comment">//当前时间的时间戳；</span>

            <span class="hljs-comment">// 距离周一的时间差  </span>
            <span class="hljs-keyword">var</span> time = <span class="hljs-built_in">parseInt</span>((mtimeStamp - nowTimeStamp) / <span class="hljs-number">1000</span>);<span class="hljs-comment">//时间戳计算出的是毫秒，我们要转化成秒，再来做以下的天/时/分/秒转化。</span>
            <span class="hljs-comment">//  console.log(time);</span>
            <span class="hljs-comment">// 算出天数</span>
            <span class="hljs-keyword">var</span> day = <span class="hljs-built_in">parseInt</span>(time / <span class="hljs-number">3600</span> / <span class="hljs-number">24</span>);
            <span class="hljs-comment">// console.log(day);</span>
            <span class="hljs-comment">// 算出小时数</span>
            <span class="hljs-keyword">var</span> hour = <span class="hljs-built_in">parseInt</span>(time / <span class="hljs-number">3600</span>) % <span class="hljs-number">24</span>
            <span class="hljs-comment">// console.log(hour);</span>
            <span class="hljs-comment">// 算出分钟</span>
            <span class="hljs-keyword">var</span> minute = <span class="hljs-built_in">parseInt</span>(time / <span class="hljs-number">60</span>) % <span class="hljs-number">60</span>;
            <span class="hljs-comment">// console.log(minute)</span>
            <span class="hljs-comment">// 算出秒</span>
            <span class="hljs-keyword">var</span> second = <span class="hljs-built_in">parseInt</span>(time % <span class="hljs-number">60</span>);
            <span class="hljs-comment">// console.log(second);</span>
            <span class="hljs-comment">// document.write("距离周一上课还有" + day + "天" + hour + "小时" + minute + "分钟" + second + "秒");//每一秒执行一次，重复写一次</span>

            <span class="hljs-comment">// 替换html代码</span>
            <span class="hljs-built_in">document</span>.body.innerHTML = <span class="hljs-string">"距离周一上课还有"</span> + day + <span class="hljs-string">"天"</span> + hour + <span class="hljs-string">"小时"</span> + minute + <span class="hljs-string">"分钟"</span> + second + <span class="hljs-string">"秒"</span>;
        &#125;
        <span class="hljs-built_in">setInterval</span>(run, <span class="hljs-number">1000</span>);<span class="hljs-comment">//时间间隔 每1秒执行一次</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<p>总结思路：把2个需要倒计时的时间获取到对应的 时间戳 ，然后再计算2个时间中的时间差()，最后把时间差转成对应的天/小时/分钟/秒。</p></div>  
</div>
            