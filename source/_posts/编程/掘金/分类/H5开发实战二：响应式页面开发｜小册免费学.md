
---
title: 'H5开发实战二：响应式页面开发｜小册免费学'
categories: 
 - 编程
 - 掘金
 - 分类
headimg: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b0a6258857c143d2ae664aea7890dcb1~tplv-k3u1fbpfcp-zoom-1.image'
author: 掘金
comments: false
date: Wed, 28 Apr 2021 18:02:09 GMT
thumbnail: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b0a6258857c143d2ae664aea7890dcb1~tplv-k3u1fbpfcp-zoom-1.image'
---

<div>   
<div class="markdown-body"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><blockquote>
<p>响应式页面开发：利用一套代码实现页面的布局和排版以适配不同分辨率的设备。</p>
</blockquote>
<p>对于响应式页面，需要做到：在不同特性的浏览器视窗中使用不同的样式；页面元素的尺寸可以根据浏览器视窗尺寸的变化而平滑变化。</p>
<p>响应式页面通常要经过如下几项设置：</p>
<h2 data-id="heading-0">viewport meta揭秘和使用</h2>
<blockquote>
<p><code>viewport meta</code>标签源于 Apple 公司，用来定义 iOS Safari 浏览器展示网页内容的可视范围及缩放比率。被其他绝大多数的浏览器所支持</p>
</blockquote>
<h3 data-id="heading-1">使用viewport meta标签控制移动浏览器的布局</h3>
<h4 data-id="heading-2">viewport机制</h4>
<p>浏览器的<a href="https://developer.mozilla.org/en-US/docs/Glossary/viewport" target="_blank" rel="nofollow noopener noreferrer">viewport</a>是web内容可以被看到的窗口区域；通常与被渲染的页面大小不一样，浏览器会为渲染的页面提供滚动条，让用户滚动和访问所有的内容。</p>
<blockquote>
<p>在计算机图形学理论中，当将一些对象渲染到图像时，存在两个类似区域的相关概念。(视口和窗口)</p>
<p>视口是一个以特定于渲染设备的坐标表示的区域（通常为矩形）。<strong>视口范围内的图像会以剪切的形式，投影到到世界坐标窗口中，完成图像的可视化展示。</strong></p>
<p>在 Web 浏览器中，<strong>视口是整个文档的可见部分。如果文档大于视口，则用户可以通过滚动来移动视口</strong>。</p>
</blockquote>
<ul>
<li><strong>viewport：是可以被看到的窗口区域。</strong></li>
</ul>
<p>窄屏设备(如移动设备)通常会在比屏幕宽的虚拟窗口或<code>viewport</code>中渲染页面。因此会缩小渲染结果，以便可以一次看到所有内容。用户可以平移或缩放，查看页面的不同区域。</p>
<p>例如，如果移动屏幕的宽度为640像素，则页面可能会以980像素的虚拟视口(<code>virtual viewport</code>)呈现，然后将其缩小以适合640像素的空间。</p>
<p>这样做是因为许多页面没有进行移动优化，并且在以较小的视口宽度呈现时会中断（或至少看起来很差）。这种虚拟视口(<code>virtual viewport</code>)是一种使非移动优化站点在窄屏设备上总体上看起来更好的方法。</p>
<ul>
<li><strong>浏览器中，对页面进行放大的时候，视口的大小如何变化？</strong></li>
</ul>
<p>视口会变小。</p>
<p>由于视口变小，呈现的内容就变少，呈现在窗口就是：更少的内容放在同一块物理屏幕上。更少的内容在呈现时会相应的放大以布满屏幕。</p>
<p>浏览器窗口中所浏览内容的放大，是依赖于视口的缩小来实现的。</p>
<p>可以参考下面的动图更好的理解：上面蓝框表示底层画布、红框表示视口，下面表示用户在浏览器窗口中看到的页面。</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b0a6258857c143d2ae664aea7890dcb1~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<p>同理，当向下滚动滚动条查看内容时，是通过视口的下移实现的。</p>
<h4 data-id="heading-3">引入viewport meta标签</h4>
<p>但是，此机制对于使用了媒体查询(<code>media queries</code>)对窄屏进行了优化的页面并不友好。例如，如果虚拟视口为<code>980px</code>，则永远不会使用<code>640px</code>或<code>480px</code>或更小的媒体查询，从而限制了这种响应式设计技术的效果。</p>
<p>为了缓解此问题，Apple最开始引入了<code>viewport meta tag</code>，而且所有浏览器基本都支持该标签。</p>
<h4 data-id="heading-4">Viewport使用</h4>
<p>典型的移动优化的站点包含如下内容：</p>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-tag"><<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1"</span>></span>
<span class="copy-code-btn">复制代码</span></code></pre>
<p><code>width</code>控制视口(<code>viewport</code>)的大小，它可以被设置为特定的像素数，如<code>width=600</code>；或特殊值<code>device-width</code>，这是CSS像素缩放比例为100%的屏幕宽度。</p>
<p><code>initial-scale</code>属性控制首次加载页面时的缩放级别。<code>maximum-scale</code>, <code>minimum-scale</code>和<code>user-scalable</code>属性控制如何允许用户放大或缩小页面。</p>
<h4 data-id="heading-5">一像素不是一像素</h4>
<blockquote>
<p>CSS2.1规范：</p>
<p>如果输出设备的像素密度(<code>pixel density</code>)与典型的计算机显示器的像素密度非常不同，则用户代理应重新缩放像素值。建议像素单位参考最近似参考像素的设备像素总数。建议参考像素为像素密度为96dpi且与阅读器的距离为一臂的设备上一个像素的视角。</p>
</blockquote>
<p>对于web开发来说，这意味着，页面的大小比实际像素数小得多，浏览器可能会相应地调整布局和图像的大小。</p>
<blockquote>
<p>默认像素比取决于显示密度(<code>display density</code>)。在密度小于200dpi的显示器上，该比率为1.0。在密度介于200和300dpi之间的显示器上，该比率为1.5。对于密度超过300dpi的显示器，该比率为<code>密度/150dpi</code>整数下限。
请注意，仅当视口比例等于1时，默认比率才为true。否则，CSS像素和设备像素之间的关系取决于当前的缩放级别。</p>
</blockquote>
<p>也就是，物理显示器的密度、页面的缩放，决定了一个CSS像素对应多少个物理像素。</p>
<h2 data-id="heading-6">使用Media Queries</h2>
<p><code>Media Queries</code>——媒体查询可以为特定特性的浏览器视窗应用指定的样式。类似CSS样式的过滤器或拦截器。</p>
<p>针对的浏览器特性包括显示类型、视窗高度、视窗宽度、横竖屏等，不同特性使用不同的样式代码，即实现不同设备应用不同的CSS。</p>
<ul>
<li>
<p><strong>6个参数</strong></p>
<p>参数名称            |    参数描述</p>
</li>
</ul>
<p>|       --------       |     ------      |
min-width              |当视窗宽度大于或等于指定值时，@media 规则下的样式将被应用
max-width              |当视窗宽度小于或等于指定值时，@media 规则下的样式将被应用
min-height             |当视窗高度大于或等于指定值时，@media 规则下的样式将被应用
max-height             |当视窗高度小于或等于指定值时，@media 规则下的样式将被应用
orientation=portrait   |当视窗高度大于或等于宽度时，@media 规则下的样式将被应用
orientation=landscape  |    当视窗宽度大于高度时，@media 规则下的样式将被应用</p>
<ul>
<li><strong>2种用法</strong></li>
</ul>
<ol>
<li>使用link标签，根据指定特性引入特定的外部样式文件</li>
</ol>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-tag"><<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">media</span>=<span class="hljs-string">"(max-width: 640px)"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"max-640px.css"</span>></span>
<span class="copy-code-btn">复制代码</span></code></pre>
<ol start="2">
<li>直接在style标签或样式文件内使用<code>@media</code>规则</li>
</ol>
<pre><code class="hljs language-css copyable" lang="css"><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">640px</span>) &#123;
  <span class="hljs-comment">/*当视窗宽度小于或等于 640px 时，这里的样式将生效*/</span>
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li><strong>样式断点</strong></li>
</ul>
<p><strong>Media Queries所使用的查询参数的临界值</strong>又称为<strong>样式断点</strong>。</p>
<p>响应式页面开发中，针对「样式断点」：依据目标设备的分辨率，制定一套合适的样式断点，并为不同的断点定制必要的CSS样式；移动端优先的页面，可使用<code>min-width</code>查询参数从小到大来定义断点。</p>
<p>对于响应式设计涵盖从手机到高清大屏幕的页面，样式断点可参考热门权威的CSS框架中的设置：</p>





























<table><thead><tr><th>断点名称</th><th>断点描述</th></tr></thead><tbody><tr><td>mobile</td><td>移动设备断点，视窗宽度 ≤ 768 px</td></tr><tr><td>tablet</td><td>平板电脑设备断点，视窗宽度 ≥ 769 px</td></tr><tr><td>desktop</td><td>桌面电脑断点，视窗宽度 ≥ 1024 px</td></tr><tr><td>widescreen</td><td>宽屏电脑断点，视窗宽度 ≥ 1216 px</td></tr><tr><td>fullhd</td><td>高清宽屏电脑断点，视窗宽度 ≥ 1408 px</td></tr></tbody></table>
<blockquote>
<p>实际工作中，样式断点可能需要和视觉设计师确认沟通，因为不同的断点，可能要设计不同的页面视觉表现。</p>
</blockquote>
<h2 data-id="heading-7">使用Viewport单位及rem</h2>
<p>Media Queries可以解决「为不同特性的浏览器视窗使用不同的样式代码」问题。</p>
<p><code>Viewport</code>单位及<code>rem</code>，则可以解决：让页面元素的尺寸能够依据浏览器视窗尺寸变化而平滑变化。</p>
<blockquote>
<p>Viewport一般翻译为"视口"或"视窗"。</p>
</blockquote>
<h3 data-id="heading-8">css长度单位</h3>
<h3 data-id="heading-9">使用vw作为CSS长度单位</h3>
<p>如果使用vw单位作为唯一CSS单位，则需要注意：</p>
<ol>
<li>利用Sass函数将设计稿元素尺寸的像素单位转换为vw单位</li>
</ol>
<pre><code class="hljs language-scss copyable" lang="scss"><span class="hljs-comment">// iPhone 6尺寸作为设计稿基准</span>
<span class="hljs-variable">$vw_base</span>: <span class="hljs-number">375</span>; 
<span class="hljs-keyword">@function</span> vw(<span class="hljs-variable">$px</span>) &#123;
    <span class="hljs-keyword">@return</span> (<span class="hljs-variable">$px</span> / <span class="hljs-variable">$vm_base</span>) * <span class="hljs-number">100vw</span>;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<ol start="2">
<li><strong>无论是文本字号大小还是布局高宽、间距、留白等都使用<code>vw</code>作为CSS单位</strong></li>
</ol>
<pre><code class="hljs language-scss copyable" lang="scss"><span class="hljs-selector-class">.mod_nav</span> &#123;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
    &_list &#123;
        <span class="hljs-attribute">display</span>: flex;
        <span class="hljs-attribute">padding</span>: vw(<span class="hljs-number">15</span>) vw(<span class="hljs-number">10</span>) vw(<span class="hljs-number">10</span>); <span class="hljs-comment">// 内间距</span>
        &_item &#123;
            <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
            <span class="hljs-attribute">text-align</span>: center;
            <span class="hljs-attribute">font-size</span>: vw(<span class="hljs-number">10</span>); <span class="hljs-comment">// 字体大小</span>
            &_logo &#123;
                <span class="hljs-attribute">display</span>: block;
                <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
                <span class="hljs-attribute">width</span>: vw(<span class="hljs-number">40</span>); <span class="hljs-comment">// 宽度</span>
                <span class="hljs-attribute">height</span>: vw(<span class="hljs-number">40</span>); <span class="hljs-comment">// 高度</span>
                <span class="hljs-selector-tag">img</span> &#123;
                    <span class="hljs-attribute">display</span>: block;
                    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
                    <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>;
                &#125;
            &#125;
            &_name &#123;
                <span class="hljs-attribute">margin-top</span>: vw(<span class="hljs-number">2</span>);
            &#125;
        &#125;
    &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<ol start="3">
<li>1 物理像素线（也就是普通屏幕下 1px ，高清屏幕下 0.5px 的情况）采用 transform 属性 scale 实现</li>
</ol>
<pre><code class="hljs language-scss copyable" lang="scss"><span class="hljs-selector-class">.mod_grid</span> &#123;
    <span class="hljs-attribute">position</span>: relative;
    &<span class="hljs-selector-pseudo">::after</span> &#123;
        <span class="hljs-comment">// 实现1物理像素的下边框线</span>
        <span class="hljs-attribute">content</span>: <span class="hljs-string">''</span>;
        <span class="hljs-attribute">position</span>: absolute;
        <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span>;
        <span class="hljs-attribute">pointer-events</span>: none;
        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ddd</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">1px</span>;
        <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
        <span class="hljs-keyword">@media</span> <span class="hljs-keyword">only</span> screen <span class="hljs-keyword">and</span> (<span class="hljs-attribute">-webkit-min-device-pixel-ratio</span>: <span class="hljs-number">2</span>) &#123;
            -webkit-<span class="hljs-attribute">transform</span>: scaleY(<span class="hljs-number">0.5</span>);
            -webkit-<span class="hljs-attribute">transform-origin</span>: <span class="hljs-number">50%</span> <span class="hljs-number">0%</span>;
        &#125;
    &#125;
    ...
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<ol start="4">
<li>对于需要保持高宽比的图，应改用<code>padding-top</code>实现</li>
</ol>
<pre><code class="hljs language-scss copyable" lang="scss"><span class="hljs-selector-class">.mod_banner</span> &#123;
    <span class="hljs-attribute">position</span>: relative;
    <span class="hljs-comment">// 使用padding-top 实现宽高比为 100:750 的图片区域</span>
    <span class="hljs-attribute">padding-top</span>: percentage(<span class="hljs-number">100</span>/<span class="hljs-number">750</span>);
    <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">overflow</span>: hidden;
    <span class="hljs-selector-tag">img</span> &#123;
        <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">height</span>: auto;
        <span class="hljs-attribute">position</span>: absolute;
        <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>; 
    &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<p>这样，不增加任何额外的脚本代码，就实现了一个常见布局的响应式页面</p>
<blockquote>
<p>桌面版Chrome支持的字体大小默认不能小于12PX，可通过「chrome://settings/ 显示高级设置－网络内容－自定义字体－最小字号（滑到最小）」进行设置。</p>
</blockquote>
<h3 data-id="heading-10">vw搭配rem使用</h3>
<p>上面的布局使用Viewport单位实现，依赖于视窗大小而自动缩放,视窗过大或过小，它也会随着过大或过小，没有最大最小宽度的限制，显示效果可能会"很不好看"。</p>
<p>很简单的应对方法是使用rem布局，rem弹性布局的核心：<strong>根据视窗大小变化动态改变根元素的字体大小</strong>，然后进行优化：</p>
<ol>
<li>给根元素的字体大小设置随着视窗变化而变化的vw单位，这样就可以实现动态改变其大小</li>
<li>其他元素的文本字号大小、布局高宽、间距、留白都使用 rem 单位</li>
<li>限制根元素字体大小的最大最小值，配合 body 加上最大宽度和最小宽度，实现布局宽度的最大最小限制</li>
</ol>
<pre><code class="hljs language-scss copyable" lang="scss"><span class="hljs-comment">// rem 单位换算：定为 75px 只是方便运算，750px-75px、640-64px、1080px-108px，如此类推</span>
<span class="hljs-variable">$vw_fontsize</span>: <span class="hljs-number">75</span>; <span class="hljs-comment">// iPhone 6尺寸的根元素大小基准值</span>
<span class="hljs-keyword">@function</span> rem(<span class="hljs-variable">$px</span>) &#123;
     <span class="hljs-keyword">@return</span> (<span class="hljs-variable">$px</span> / <span class="hljs-variable">$vw_fontsize</span> ) * <span class="hljs-number">1rem</span>;
&#125;
<span class="hljs-comment">// 根元素大小使用 vw 单位</span>
<span class="hljs-variable">$vw_design</span>: <span class="hljs-number">750</span>;
<span class="hljs-selector-tag">html</span> &#123;
    <span class="hljs-attribute">font-size</span>: (<span class="hljs-variable">$vw_fontsize</span> / (<span class="hljs-variable">$vw_design</span> / <span class="hljs-number">2</span>)) * <span class="hljs-number">100vw</span>; 
    <span class="hljs-comment">// 同时，通过Media Queries 限制根元素最大最小值</span>
    <span class="hljs-keyword">@media</span> screen <span class="hljs-keyword">and</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">320px</span>) &#123;
        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">64px</span>;
    &#125;
    <span class="hljs-keyword">@media</span> screen <span class="hljs-keyword">and</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">540px</span>) &#123;
        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">108px</span>;
    &#125;
&#125;
<span class="hljs-comment">// body 也增加最大最小宽度限制，避免默认100%宽度的 block 元素跟随 body 而过大过小</span>
<span class="hljs-selector-tag">body</span> &#123;
    <span class="hljs-attribute">max-width</span>: <span class="hljs-number">540px</span>;
    <span class="hljs-attribute">min-width</span>: <span class="hljs-number">320px</span>;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<blockquote>
<p>移动端页面，通常以iPhone 7的分辨率（宽为 750 px）作为基准分辨率进行设计</p>
</blockquote>
<h2 data-id="heading-11">参考</h2>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Mobile/Viewport_meta_tag" target="_blank" rel="nofollow noopener noreferrer">Using the viewport meta tag to control layout on mobile browsers</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/length" target="_blank" rel="nofollow noopener noreferrer"><code><length></code></a></li>
<li><a href="https://cloud.tencent.com/developer/article/1549583" target="_blank" rel="nofollow noopener noreferrer">彻底搞懂移动Web开发中的viewport与跨屏适配</a></li>
</ul>
<p><a href="https://juejin.cn/post/6943533938090442765" target="_blank">本文正在参与「掘金小册免费学啦！」活动, 点击查看活动详情</a></p></div>  
</div>
            