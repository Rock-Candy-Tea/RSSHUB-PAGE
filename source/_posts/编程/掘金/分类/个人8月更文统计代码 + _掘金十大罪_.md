
---
title: '个人8月更文统计代码 + _掘金十大罪_'
categories: 
 - 编程
 - 掘金
 - 分类
headimg: 'https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cac8f86c60314b2b8c9097e619f8c324~tplv-k3u1fbpfcp-watermark.image'
author: 掘金
comments: false
date: Mon, 30 Aug 2021 16:15:08 GMT
thumbnail: 'https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cac8f86c60314b2b8c9097e619f8c324~tplv-k3u1fbpfcp-watermark.image'
---

<div>   
<div class="markdown-body html cache"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><p>这是我参与8月更文挑战的第31天，活动详情查看：<a href="https://juejin.cn/post/6987962113788493831" title="https://juejin.cn/post/6987962113788493831" target="_blank">8月更文挑战</a>。</p>
<h2 data-id="heading-0">统计</h2>
<p><strong>日更，不再见！</strong> 统计走一遍。</p>
<h3 data-id="heading-1">需求：</h3>
<ol>
<li><strong>过滤出参与8月更文的文章</strong></li>
<li><strong>生成markdown的列表，显示更文日期和点赞数</strong></li>
<li><strong>统计总点赞数，评论数，收藏数，阅读数</strong></li>
<li><strong>统计累计提升的掘力值</strong></li>
</ol>
<h3 data-id="heading-2">效果演示</h3>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cac8f86c60314b2b8c9097e619f8c324~tplv-k3u1fbpfcp-watermark.image" alt="llll.gif" loading="lazy" referrerpolicy="no-referrer"></p>
<p>我的8月更文统计结果：截止2021-08-30 23：47</p>
<pre><code class="hljs language-js copyable" lang="js">---------
文章数:  <span class="hljs-number">30</span>
点赞数： <span class="hljs-number">5004</span>
阅读数： <span class="hljs-number">144208</span>
收藏数： <span class="hljs-number">3586</span>
评论数： <span class="hljs-number">716</span>
---------
掘力值：<span class="hljs-number">5004</span>  + <span class="hljs-number">1442</span>  =  <span class="hljs-number">6446</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<p>如果需要平均值，自行修改代码即可。</p>
<h3 data-id="heading-3">源代码</h3>
<p>源码地址： <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fxiangwenhu%2FjuejinBlogsCodes%2Ftree%2Fmaster%2F8%25E6%259C%2588%25E6%259B%25B4%25E6%2596%2587%25E6%25B1%2587%25E6%2580%25BB" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/xiangwenhu/juejinBlogsCodes/tree/master/8%E6%9C%88%E6%9B%B4%E6%96%87%E6%B1%87%E6%80%BB" ref="nofollow noopener noreferrer"><strong>8月更文统计和汇总</strong></a></p>
<p>怎么使用，复制到控制台，修改<code>USER_ID</code>和<code>MAX_COUNT</code>执行即可，<br>
<code>MAX_COUNT</code>如果你属于日更，一日一文，默认值31即可，如果一日多文，上调到一个安全数即可。</p>
<pre><code class="hljs language-js copyable" lang="js">; (<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-comment">// 用户ID</span>
    <span class="hljs-keyword">const</span> USER_ID = <span class="hljs-string">"131597122679661"</span>;  
    <span class="hljs-comment">// 需要查询的最大文章数量   </span>
    <span class="hljs-keyword">const</span> MAX_COUNT = <span class="hljs-number">31</span>
    
    .........其他代码
&#125;)();
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-4">思路 + 核心代码</h3>
<ol>
<li>获取文章文章列表</li>
</ol>
<p><strong>文章列表不包含正文，还不能是否参与8月征文</strong><br>
多次获取，直到没有文章，或者已经达到设置的获取上限</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loopGetArticles</span>(<span class="hljs-params">userId, count</span>) </span>&#123;
    <span class="hljs-keyword">let</span> results = [];
    <span class="hljs-keyword">let</span> cursor = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> res = &#123;
        <span class="hljs-attr">err_no</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">has_more</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">cursor</span>: <span class="hljs-number">0</span>
    &#125;
    <span class="hljs-keyword">do</span> &#123;
        res = <span class="hljs-keyword">await</span> getArticles(userId, cursor);
        cursor = +res.cursor;
        results.push(...(res.data.map(<span class="hljs-function"><span class="hljs-params">art</span> =></span> art.article_id)));
        <span class="hljs-keyword">await</span> delay(<span class="hljs-literal">undefined</span>, <span class="hljs-number">16</span>);

    &#125; <span class="hljs-keyword">while</span> (res.has_more && cursor < count)

    <span class="hljs-keyword">return</span> results;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<ol start="2">
<li>获取文章内容，获得文章内容，通<strong>过标题和正文双层判断</strong>是否参与8月征文</li>
</ol>
<p>是否参与8月征文</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">is8MArticle</span>(<span class="hljs-params">art</span>) </span>&#123;
    <span class="hljs-keyword">return</span> art.title.endsWith(<span class="hljs-string">"8月更文挑战"</span>) || 
    art.mark_content.slice(<span class="hljs-number">0</span>, <span class="hljs-number">200</span>).indexOf(<span class="hljs-string">"https://juejin.cn/post/6987962113788493831"</span>) >=<span class="hljs-number">0</span>
&#125;

<span class="copy-code-btn">复制代码</span></code></pre>
<ol start="3">
<li>生成markdown的列表</li>
</ol>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generateMD</span>(<span class="hljs-params">articleInfos</span>) </span>&#123;
    <span class="hljs-keyword">return</span> articleInfos.map(<span class="hljs-function"><span class="hljs-params">art</span> =></span> <span class="hljs-string">`* <span class="hljs-subst">$&#123;art.date&#125;</span> [<span class="hljs-subst">$&#123;art.title&#125;</span>](https://juejin.cn/post/<span class="hljs-subst">$&#123;art.id&#125;</span>) - <span class="hljs-subst">$&#123;art.diggCount&#125;</span>赞`</span>).join(<span class="hljs-string">'\n'</span>);
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<ol start="4">
<li>统计总赞数</li>
</ol>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTotals</span>(<span class="hljs-params">articleInfos</span>) </span>&#123;
    <span class="hljs-keyword">return</span> articleInfos.reduce(<span class="hljs-function">(<span class="hljs-params">total, cur</span>) =></span> &#123;
        total.diggCount += cur.diggCount;
        total.viewCount += cur.viewCount;
        total.collectCount += cur.collectCount;
        total.commentCount += cur.commentCount;
        <span class="hljs-keyword">return</span> total;
    &#125;, &#123;
        <span class="hljs-attr">diggCount</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">viewCount</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">collectCount</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">commentCount</span>: <span class="hljs-number">0</span>
    &#125;)
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-5">掘金"十大罪"</h2>
<p><strong>为什么要罗列你的 "罪"，因为爱的深沉。</strong><br>
<strong>为什么要罗列你的 "罪"，因为爱的深沉。</strong><br>
<strong>为什么要罗列你的 "罪"，因为爱的深沉。</strong></p>
<h3 data-id="heading-6">1. 历史版本</h3>
<p>修改，文章会从首页和推荐消失！ <strong>吐血！！！</strong></p>
<h3 data-id="heading-7">2. 审核</h3>
<p>10分钟，30分钟，1小时，全看天气！</p>
<h3 data-id="heading-8">3. 推荐</h3>
<p>你可以等，<br>
你可以发沸点求推荐，<br>
你可以发沸点意见和反馈，<br>
你可以联系运营同事手动推荐。</p>
<p><strong>为什么要这么多你可以呢？ 累！</strong></p>
<h3 data-id="heading-9">4.抽奖</h3>
<p>2万钻石，毛都没有！</p>
<h3 data-id="heading-10">5.引流</h3>
<p>可以理解，我也可以不喜欢！</p>
<h3 data-id="heading-11">6.日更</h3>
<p>日更，不再见！</p>
<h3 data-id="heading-12">7.App升级</h3>
<p>几次App要升级，我这各种异常，崩溃！</p>
<h3 data-id="heading-13">8.图片水印</h3>
<p>给个选项不加好不好</p>
<h3 data-id="heading-14">9.不能内嵌代码和视频</h3>
<p>视频就罢了，支持内嵌代码不香吗？</p>
<h3 data-id="heading-15">10.界面错乱</h3>
<p>怎么说也是个知名社区，好多明显的界面问题！</p>
<h2 data-id="heading-16">我的8月更文列表</h2>
<p><strong>欢迎阅读！ 欢迎关注！ 欢迎一起交流！</strong></p>
<ul>
<li>08-30 <a href="https://juejin.cn/post/7002012595200720927" target="_blank" title="https://juejin.cn/post/7002012595200720927">跨浏览器窗口通讯 ，7种方式，你还知道几种呢？</a> - 261赞</li>
<li>08-29 <a href="https://juejin.cn/post/7001662835692404773" target="_blank" title="https://juejin.cn/post/7001662835692404773">30 second of code 15个有意思的代码段</a> - 72赞</li>
<li>08-28 <a href="https://juejin.cn/post/7001283744829014029" target="_blank" title="https://juejin.cn/post/7001283744829014029">数值千分位，6种方法和性能对比，值得一看</a> - 73赞</li>
<li>08-27 <a href="https://juejin.cn/post/7000894041210503205" target="_blank" title="https://juejin.cn/post/7000894041210503205">中高级前端？ 这些一元运算符，你真的搞清楚了吗</a> - 138赞</li>
<li>08-26 <a href="https://juejin.cn/post/7000525748578549774" target="_blank" title="https://juejin.cn/post/7000525748578549774">贝塞尔曲线在前端，走近她，然后爱上她</a> - 134赞</li>
<li>08-25 <a href="https://juejin.cn/post/7000154907156152327" target="_blank" title="https://juejin.cn/post/7000154907156152327">前端9种图片格式基础知识, 你应该知道的</a> - 268赞</li>
<li>08-24 <a href="https://juejin.cn/post/6999781802923524132" target="_blank" title="https://juejin.cn/post/6999781802923524132">call, call.call, call.call.call, 你也许还不懂这疯狂的call</a> - 159赞</li>
<li>08-23 <a href="https://juejin.cn/post/6999497067550736391" target="_blank" title="https://juejin.cn/post/6999497067550736391">我的掘金前端周刊  8月16日-8月22日</a> - 54赞</li>
<li>08-22 <a href="https://juejin.cn/post/6999126516852490253" target="_blank" title="https://juejin.cn/post/6999126516852490253">chrome地址栏命令和快捷键，强大到天际，你知道多少!</a> - 142赞</li>
<li>08-21 <a href="https://juejin.cn/post/6998727574364880933" target="_blank" title="https://juejin.cn/post/6998727574364880933">最轻量级前端模板Micro-Templating， 源码解析</a> - 60赞</li>
<li>08-20 <a href="https://juejin.cn/post/6998300409173377032" target="_blank" title="https://juejin.cn/post/6998300409173377032">【利器篇】35+精选chrome插件，含15+前端插件，总有一款值得你停留</a> - 526赞</li>
<li>08-19 <a href="https://juejin.cn/post/6997926968024891422" target="_blank" title="https://juejin.cn/post/6997926968024891422">【玩转掘金】掘金可视化智能抽奖，支持暂停和继续,  插件版</a> - 81赞</li>
<li>08-18 <a href="https://juejin.cn/post/6997558431481593893" target="_blank" title="https://juejin.cn/post/6997558431481593893">【玩转掘金】 我的赞，我的💗，都给了谁，有你吗？</a> - 90赞</li>
<li>08-17 <a href="https://juejin.cn/post/6997186741866070023" target="_blank" title="https://juejin.cn/post/6997186741866070023">【利器篇】前端40+精选VSCode插件，总有几个你未拥有！</a> - 990赞</li>
<li>08-16 <a href="https://juejin.cn/post/6996829718007775246" target="_blank" title="https://juejin.cn/post/6996829718007775246">我的掘金前端周刊 第八周 8月9日-8月15日</a> - 65赞</li>
<li>08-15 <a href="https://juejin.cn/post/6996466257125965861" target="_blank" title="https://juejin.cn/post/6996466257125965861">【SSD系列】雪花飘，购物抛物线，进度条等四个案列，带入走进 CSS transition</a> - 86赞</li>
<li>08-14 <a href="https://juejin.cn/post/6996079136796049444" target="_blank" title="https://juejin.cn/post/6996079136796049444">【SSD系列】DOM0, DOM1, DOM2, DOM3, DOM4，知多少</a> - 84赞</li>
<li>08-13 <a href="https://juejin.cn/post/6995717142318415880" target="_blank" title="https://juejin.cn/post/6995717142318415880">【玩转掘金】掘金签约作者，战力参数分析，数据篇</a> - 68赞</li>
<li>08-12 <a href="https://juejin.cn/post/6995333362479185928" target="_blank" title="https://juejin.cn/post/6995333362479185928">【SSD】掘金的抽奖，“拆穿她“，然后实现一个，顺便封装一个库</a> - 142赞</li>
<li>08-11 <a href="https://juejin.cn/post/6994959358064869383" target="_blank" title="https://juejin.cn/post/6994959358064869383">【SSD系列】五分钟，100余行代码，纯web技术一起实现摄像头和麦克风视频录制，并带历史记录功能</a> - 172赞</li>
<li>08-10 <a href="https://juejin.cn/post/6994587482851541005" target="_blank" title="https://juejin.cn/post/6994587482851541005">【SSD系列】没了jquery, vue, react，你还会DOM节点的增删改查吗？</a> - 147赞</li>
<li>08-09 <a href="https://juejin.cn/post/6994220333985185828" target="_blank" title="https://juejin.cn/post/6994220333985185828">我的掘金前端周刊 第七周 8月2日-8月8日</a> - 88赞</li>
<li>08-08 <a href="https://juejin.cn/post/6993885230461370398" target="_blank" title="https://juejin.cn/post/6993885230461370398">【SSD系列】图片作为背景的闪白问题，6种基础方案， 不会不知道吧</a> - 140赞</li>
<li>08-07 <a href="https://juejin.cn/post/6993539242139844622" target="_blank" title="https://juejin.cn/post/6993539242139844622">【SSD系列】网页内容生成图片，这18般武艺你会几种呢？ </a> - 114赞</li>
<li>08-06 <a href="https://juejin.cn/post/6993133406565449736" target="_blank" title="https://juejin.cn/post/6993133406565449736">【SSD系列】共享桌面，3分钟自己实现一个吧，还能听见麦克风声音哦</a> - 191赞</li>
<li>08-05 <a href="https://juejin.cn/post/6992735843517464612" target="_blank" title="https://juejin.cn/post/6992735843517464612">【SSD系列】视频自定义字幕，中英文，彩色的，你也可以，不会不知道吧</a> - 129赞</li>
<li>08-04 <a href="https://juejin.cn/post/6992458377238413320" target="_blank" title="https://juejin.cn/post/6992458377238413320">【SSD系列】都说柯里化，反柯里化 , 不会不知道吧</a> - 88赞</li>
<li>08-03 <a href="https://juejin.cn/post/6991992950876028959" target="_blank" title="https://juejin.cn/post/6991992950876028959">【SSD系列】傻傻的，3行代码一个订阅发布中心，不会不知道吧 ｜8月更文挑战</a> - 259赞</li>
<li>08-02 <a href="https://juejin.cn/post/6991628964573741093" target="_blank" title="https://juejin.cn/post/6991628964573741093">我的掘金前端周刊 第六周 7月26日-8月1日 ｜ 8月更文挑战</a> - 90赞</li>
<li>08-01 <a href="https://juejin.cn/post/6991255284849049607" target="_blank" title="https://juejin.cn/post/6991255284849049607">【SSD系列】傻傻的，连JavaScript，ECMAScript和ECMA-262都分不清楚 ｜ 8月更文挑战</a> - 96赞</li>
</ul>
<h2 data-id="heading-17">写在最后</h2>
<p>如果你觉得不错，你的一赞一评就是我前行的最大动力。</p></div>  
</div>
            