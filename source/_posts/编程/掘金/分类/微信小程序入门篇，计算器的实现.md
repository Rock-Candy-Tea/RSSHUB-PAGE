
---
title: '微信小程序入门篇，计算器的实现'
categories: 
 - 编程
 - 掘金
 - 分类
headimg: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/923b81b5ae16470b82ce496b7bbd0ff0~tplv-k3u1fbpfcp-watermark.image'
author: 掘金
comments: false
date: Mon, 30 Aug 2021 17:54:22 GMT
thumbnail: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/923b81b5ae16470b82ce496b7bbd0ff0~tplv-k3u1fbpfcp-watermark.image'
---

<div>   
<div class="markdown-body html cache"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><p><strong>这是我参与8月更文挑战的第31天，活动详情查看：<a href="https://juejin.cn/post/6987962113788493831" title="https://juejin.cn/post/6987962113788493831" target="_blank">8月更文挑战</a></strong></p>
<p>今天是8月更文活动的最后一天，作为坚持了31天的博主，也算是不容易，有喜欢文章的小伙伴可以帮忙点个赞。今天要写的是微信小程序的入门实战篇，计算器的实现。这是写给微信小程序初学者学习的，大佬可以不用往下看了。</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/923b81b5ae16470b82ce496b7bbd0ff0~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>首先效果图如上图所示。</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6970810063c7459f9d1cb6fa40b5fb3d~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>这个小程序就是一个单页面的应用，目录中最重要的部分就是这里面。</p>
<pre><code class="copyable"><view class="result">
<view class=" result-num">&#123;&#123;num&#125;&#125;</view>
<view class="result-op">&#123;&#123;op&#125;&#125;</view>
</view>
<view class="btns">
<view>
<view hover-class="bg" bindtap="resetBtn">AC</view>
<view hover-class="bg" bindtap="numBtn" data-val="0">0</view>

<view hover-class="bg" bindtap="opBtn" data-val="/">÷</view>
<view hover-class="bg" bindtap="opBtn" data-val="*">x</view>
</view>
<view>
<view hover-class="bg" bindtap="numBtn" data-val="7">7</view>
<view hover-class="bg" bindtap="numBtn" data-val="8">8</view>
<view hover-class="bg" bindtap="numBtn" data-val="9">9</view>
<view hover-class="bg" bindtap="opBtn" data-val="-">-</view>
</view>
<view>
<view hover-class= "bg" bindtap="numBtn" data-val="4">4</view>
<view hover-class="bg" bindtap="numBtn" data-val="5">5</view>
<view hover-class="bg" bindtap="numBtn" data-val="6">6</view>
<view hover-class="bg" bindtap="opBtn" data-val="+">+</view>
</view>
<view>
<view hover-class="bg" bindtap="numBtn" data-val="1">1</view>
<view hover-class="bg" bindtap= "numBtn" data-val="2">2</view>
<view hover-class="bg" bindtap="numBtn" data-val="3">3</view>
<view hover-class="bg"  bindtap="opBtn" data-val="=">=</view>

</view>
</view>

<span class="copy-code-btn">复制代码</span></code></pre>
<p>我们先看来看看index.wxml中的ui布局写。上面是一个result用来显示打上去的数字和计算结果的。下面就是用一个个按钮排列而成。这里面没有太大的难度。</p>
<p>然后index.js才是重点内容，这是写了应用逻辑的。</p>
<pre><code class="copyable">const app = getApp()
Page(&#123;
  data: &#123;
    num:'',
    op:'0' 
  &#125;,
  result: null,
  isClear: false,

<span class="copy-code-btn">复制代码</span></code></pre>
<p>上面的数据有数字，操作符，结果，是否清零记录。</p>
<pre><code class="copyable"> numBtn: function(e) &#123;
if(this.data.op=='=')
&#123;
  this.result = null
  this.isClear = false
  this.setData(&#123; num: '0', op: '' &#125;)
&#125;
var num = e.target.dataset.val
if(this.data.num === '0' || this.isClear) &#123;
this.setData(&#123; num: num &#125;)
  this.isClear = false 
&#125;
else&#123;
  this.setData(&#123; num: this.data.num + num &#125;)
&#125;
 &#125;,
<span class="copy-code-btn">复制代码</span></code></pre>
<p>这里是数字按键的响应，处理不同情况下数字按钮按下之后的结果。</p>
<pre><code class="copyable"> opBtn: function (e) &#123;
 var op = this.data.op
 var num = Number(this.data.num)

 this.setData(&#123; op: e.target.dataset.val&#125;)
 if (this.isClear) &#123;
return
 &#125;
 this.isClear = true
 if (this.result === null) &#123;
this.result = num
return
 &#125;
 if (op === '+') &#123;
  this.result = this.result + num &#125;
  else if (op === '-') &#123;
    this.result = this.result - num &#125;
    else if (op === '*')&#123;
    this.result = this.result * num&#125;
    else if (op =='/')&#123;
  this.result = this.result / num &#125;
  this.setData(&#123;num: this.result + '' &#125;) 
 &#125;,
<span class="copy-code-btn">复制代码</span></code></pre>
<p>这里是操作符号的响应，也就是对数字进行加减乘除操作。然后将操作完的数字保存到结果里面去。</p>
<p>总的来说，写一个计算器小程序不算太难，有想要学习更多微信小程序知识的，<strong>可以关注公众号：诗一样的代码</strong>，找我一起学。</p></div>  
</div>
            