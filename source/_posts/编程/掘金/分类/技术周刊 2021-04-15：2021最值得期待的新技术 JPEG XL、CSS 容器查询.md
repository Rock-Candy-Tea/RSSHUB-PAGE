
---
title: '技术周刊 2021-04-15：2021最值得期待的新技术 JPEG XL、CSS 容器查询'
categories: 
 - 编程
 - 掘金
 - 分类
headimg: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b000b3ce059e4a68b000c69219819f61~tplv-k3u1fbpfcp-zoom-1.image'
author: 掘金
comments: false
date: Sun, 18 Apr 2021 19:25:38 GMT
thumbnail: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b000b3ce059e4a68b000c69219819f61~tplv-k3u1fbpfcp-zoom-1.image'
---

<div>   
<div class="markdown-body"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><p><img alt class="lazyload" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b000b3ce059e4a68b000c69219819f61~tplv-k3u1fbpfcp-zoom-1.image" data-width="800" data-height="600" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-0">前端快爆</h2>
<ul>
<li><a href="https://developer.chrome.com/blog/new-in-chrome-90/" target="_blank" rel="nofollow noopener noreferrer">Chrome 90 正式发布</a>，主要包含以下特性：
<ul>
<li>支持 AV1 视频解码器，AV1 是开放媒体联盟（AOM）开发的开源、<strong>免版权费</strong>的视频格式，它比 H.265/264/VP9 在相同画质下有更高的压缩率，也就是同等带宽下可以传输更高清的画质。这也是 <a href="https://blog.chromium.org/2021/03/chrome-90-beta-av1-encoder-for-webrtc.html" target="_blank" rel="nofollow noopener noreferrer">WebRTC</a> 中使用的编码格式（推荐阅读<a href="https://webrtc.org.cn/20200520-av1-hevc1/" target="_blank" rel="nofollow noopener noreferrer"> AV1 vs HEVC——WebRTC编解码器之争卷土重来？一</a>）。<a href="https://caniuse.com/av1" target="_blank" rel="nofollow noopener noreferrer">此前 Firefox 67 已经支持</a>。</li>
<li>CSS <code>overflow</code> 新增 <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/overflow" target="_blank" rel="nofollow noopener noreferrer">clip</a> 属性值，其效果与 <code>hidden</code> 类似，区别是 <code>clip</code> 还会禁止一切程序滚动，包括通过 DOM API 调整滚动位置。此外 <code>clip</code> 不会产生新的格式化上下文（Formatting context），如果希望同时建立格式化上下文（比如闭合浮动时），可以使用新的 <a href="https://caniuse.com/flow-root" target="_blank" rel="nofollow noopener noreferrer">display: flow-root</a>。</li>
<li>CSS 纵横比属性 <code>aspect-ratio</code> 现在<a href="https://www.chromestatus.com/features/5682100885782528" target="_blank" rel="nofollow noopener noreferrer">支持插值动画</a>。</li>
<li>剪切板 API 现在支持<a href="https://www.chromestatus.com/feature/5671807392677888" target="_blank" rel="nofollow noopener noreferrer">读取文件路径</a>。</li>
<li><a href="https://www.chromestatus.com/feature/5329879744643072" target="_blank" rel="nofollow noopener noreferrer">禁用 HTTP、HTTPS、FTP 的 554 端口</a>，以减缓 <a href="https://www.armis.com/resources/iot-security-blog/nat-slipstreaming-v2-0-new-attack-variant-can-expose-all-internal-network-devices-to-the-internet/" target="_blank" rel="nofollow noopener noreferrer">NAT Slipstream 2.0 攻击</a>，Edge、Firefox、Safari 也均已禁用。</li>
<li>支持<a href="https://web.dev/declarative-shadow-dom/" target="_blank" rel="nofollow noopener noreferrer">声明式 Shadow DOM</a>，可以直接在 <code><template></code> 元素中使用 <code>shadowroot</code> 属性创建 Shadow DOM。</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-javascript copyable" lang="javascript"><host-element>
  <span class="xml"><span class="hljs-tag"><<span class="hljs-name">template</span> <span class="hljs-attr">shadowroot</span>=<span class="hljs-string">"open"</span>></span>
    <span class="hljs-tag"><<span class="hljs-name">slot</span>></span><span class="hljs-tag"></<span class="hljs-name">slot</span>></span>
  <span class="hljs-tag"></<span class="hljs-name">template</span>></span></span>
  <span class="xml"><span class="hljs-tag"><<span class="hljs-name">h2</span>></span>Light content<span class="hljs-tag"></<span class="hljs-name">h2</span>></span></span>
</host-element>
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li>
<p>本期 Chrome 90 <a href="https://developer.chrome.com/blog/new-in-devtools-90/" target="_blank" rel="nofollow noopener noreferrer">DevTools 的新功能</a>，官方制作了<a href="https://www.youtube.com/watch?v=UyXPdYLQVQk&feature=youtu.be" target="_blank" rel="nofollow noopener noreferrer">中文视频介绍</a>。</p>
</li>
<li>
<p><a href="https://deno.com/blog/v1.9" target="_blank" rel="nofollow noopener noreferrer">Deno 1.9 发布</a>，此版本包含诸多新功能、性能改进以及错误修复：</p>
<ul>
<li><a href="https://deno.com/blog/v1.9#native-http%2F2-web-server" target="_blank" rel="nofollow noopener noreferrer">全新的原生 HTTP/2 Web 服务器</a>。</li>
<li><a href="https://deno.com/blog/v1.9#faster-calls-into-rust-with-serde_v8" target="_blank" rel="nofollow noopener noreferrer">使用 serde_v8 提升 Rust 性能</a>。</li>
<li><a href="https://deno.com/blog/v1.9#blob-url-support-%26-improvements-to-fetch" target="_blank" rel="nofollow noopener noreferrer">Blob URL 支持和 fetch 改进</a>。</li>
<li><a href="https://deno.com/blog/v1.9#import-completions-in-the-lsp" target="_blank" rel="nofollow noopener noreferrer">LSP 中的目录自动补全功能</a>。</li>
<li><a href="https://deno.com/blog/v1.9#allow-lists-for---allow-env-and---allow-run" target="_blank" rel="nofollow noopener noreferrer">交互式权限提示</a>。</li>
</ul>
</li>
<li>
<p>Chrome Canary <a href="https://chromium-review.googlesource.com/c/chromium/src/+/2749318" target="_blank" rel="nofollow noopener noreferrer">实验性支持</a>了 <a href="https://sneyers.info/jxl/" target="_blank" rel="nofollow noopener noreferrer">JPEG XL</a> 图片格式，使用 <code>chrome://flags/#enable-jxl</code>  开启。该格式（扩展名 <code>.jxl</code>）是 JPEG 委员会的下一代通用图像压缩编解码器，支持有损、<strong>无损压缩</strong>、<strong>动画</strong>以及 <strong>Alpha 透明度</strong>。（<a href="https://eclipseo.github.io/image-comparison-web/#abandonned-factory&Original=s&JXL=s&subset1" target="_blank" rel="nofollow noopener noreferrer">这里</a>可以对比效果）。其主要特点有：</p>
<ul>
<li>有损压缩时：相同的视觉质量，比 JPEG 小约 60％。</li>
<li>无损压缩时：比 PNG 减小约 35％（对于 HDR，减小 50％）。</li>
<li>支持无损 JPEG 转码，减小约 20％ 文件大小。</li>
<li>专为摄影和合成图像而设计。</li>
<li>渐进式解码。</li>
<li>编码和解码更快。</li>
<li>全面支持广色域和 HDR。</li>
<li>无版权费。</li>
</ul>
</li>
</ul>
<p><img alt class="lazyload" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8fe69b1ff5fa427382023510f2af14be~tplv-k3u1fbpfcp-zoom-1.image" data-width="800" data-height="600" referrerpolicy="no-referrer"><br>几种格式的文件大小对比（<a href="https://img.alicdn.com/imgextra/i3/O1CN01QWENfx1h7O1vyUI4s_!!6000000004230-2-tps-2230-678.png" target="_blank" rel="nofollow noopener noreferrer">查看原始图片</a>）</p>
<blockquote>
<p>点评：在 Mac 中可以使用 <code>brew install jpeg-xl</code> 安装 JXL 编码器，安装完毕后通过 <code>cjxl</code> 命令转换图片为 <code>.jxl</code> 格式。</p>
</blockquote>
<ul>
<li>Chrome Canary 还实验性支持了 <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1145970#c34" target="_blank" rel="nofollow noopener noreferrer">CSS 容器查询</a>功能，使子元素可以根据父元素宽高动态调整布局和其他样式。需要开启：<code>chrome://flags/#enable-container-queries</code> 。</li>
</ul>
<blockquote>
<p>点评：这是 2021 最值得期待 CSS 新特性，没有之一！</p>
</blockquote>
<h2 data-id="heading-1">优秀 Demo</h2>
<ul>
<li>
<p><a href="https://www.figma.com/community/plugin/958202093377483021/Mesh-Gradient" target="_blank" rel="nofollow noopener noreferrer">Figma 渐变生成插件</a></p>
</li>
<li>
<p><a href="http://variableemojis.com/" target="_blank" rel="nofollow noopener noreferrer">当 emoji 遇见可变字体技术</a></p>
</li>
</ul>
<hr>
<p>本期编辑：@一丝，审阅：@承虎<br>题图来源：<a href="https://cloudinary.com/blog/how_jpeg_xl_compares_to_other_image_codecs" target="_blank" rel="nofollow noopener noreferrer">cloudinary.com/blog/how_jp…</a></p></div> <div class="image-viewer-box" data-v-78c9b824><!----></div>  
</div>
            