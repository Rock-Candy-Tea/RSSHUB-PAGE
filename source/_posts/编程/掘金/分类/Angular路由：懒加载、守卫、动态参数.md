
---
title: 'Angularè·¯ç”±ï¼šæ‡’åŠ è½½ã€å®ˆå«ã€åŠ¨æ€å‚æ•°'
categories: 
 - ç¼–ç¨‹
 - æ˜é‡‘
 - åˆ†ç±»
headimg: 'https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f74049dabc1c4a07bf4f0ece127f9ef8~tplv-k3u1fbpfcp-watermark.image'
author: æ˜é‡‘
comments: false
date: Fri, 04 Jun 2021 16:36:39 GMT
thumbnail: 'https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f74049dabc1c4a07bf4f0ece127f9ef8~tplv-k3u1fbpfcp-watermark.image'
---

<div>   
<div class="markdown-body"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><p><a href="https://devui.design/" target="_blank" rel="nofollow noopener noreferrer">DevUI</a> æ˜¯ä¸€æ¬¾é¢å‘ä¼ä¸šä¸­åå°äº§å“çš„å¼€æºå‰ç«¯è§£å†³æ–¹æ¡ˆï¼Œå®ƒå€¡å¯¼<code>æ²‰æµ¸</code>ã€<code>çµæ´»</code>ã€<code>è‡³ç®€</code>çš„è®¾è®¡ä»·å€¼è§‚ï¼Œæå€¡è®¾è®¡è€…ä¸ºçœŸå®çš„éœ€æ±‚æœåŠ¡ï¼Œä¸ºå¤šæ•°äººçš„è®¾è®¡ï¼Œæ‹’ç»å“—ä¼—å–å® ã€å–æ‚¦çœ¼çƒçš„è®¾è®¡ã€‚å¦‚æœä½ æ­£åœ¨å¼€å‘ <code>ToB</code> çš„<code>å·¥å…·ç±»äº§å“</code>ï¼ŒDevUI å°†æ˜¯ä¸€ä¸ªå¾ˆä¸é”™çš„é€‰æ‹©ï¼</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f74049dabc1c4a07bf4f0ece127f9ef8~tplv-k3u1fbpfcp-watermark.image" alt="Kagol.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h1 data-id="heading-0">å¼•è¨€</h1>
<p>è·¯ç”±æ˜¯å°†URLè¯·æ±‚æ˜ å°„åˆ°å…·ä½“ä»£ç çš„ä¸€ç§æœºåˆ¶ï¼Œåœ¨ç½‘ç«™çš„æ¨¡å—åˆ’åˆ†ã€ä¿¡æ¯æ¶æ„ä¸­æ‰®æ¼”äº†é‡è¦çš„è§’è‰²ï¼Œè€ŒAngularçš„è·¯ç”±èƒ½åŠ›éå¸¸å¼ºå¤§ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹å§ã€‚</p>
<h1 data-id="heading-1">è·¯ç”±æ‡’åŠ è½½</h1>
<p>Angularå¯ä»¥æ ¹æ®è·¯ç”±ï¼ŒåŠ¨æ€åŠ è½½ç›¸åº”çš„æ¨¡å—ä»£ç ï¼Œè¿™ä¸ªåŠŸèƒ½æ˜¯æ€§èƒ½ä¼˜åŒ–çš„åˆ©å™¨ã€‚</p>
<p>ä¸ºäº†åŠ å¿«é¦–é¡µçš„æ¸²æŸ“é€Ÿåº¦ï¼Œæˆ‘ä»¬å¯ä»¥è®¾è®¡å¦‚ä¸‹çš„è·¯ç”±ï¼Œè®©é¦–é¡µå°½é‡ä¿æŒç®€æ´ã€æ¸…çˆ½ï¼š</p>
<pre><code class="copyable">const routes: Routes = [
  &#123;
    path: '',
    children: [
      &#123;
        path: 'list',
        loadChildren: () => import('./components/list/list.module').then(m => m.ListModule),
      &#125;,
      &#123;
        path: 'detail',
        loadChildren: () => import('./components/detail/detail.module').then(m => m.DetailModule),
      &#125;,
      ...
    ],
  &#125;,
];
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>é¦–é¡µåªæœ‰ä¸€äº›ç®€å•çš„é™æ€å…ƒç´ ï¼Œè€Œå…¶ä»–é¡µé¢ï¼Œæ¯”å¦‚åˆ—è¡¨ã€è¯¦æƒ…ã€é…ç½®ç­‰æ¨¡å—éƒ½ç”¨<code>loadChildren</code>åŠ¨æ€åŠ è½½ã€‚</p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/60318b1dcc7345d385103108a1608ba4~tplv-k3u1fbpfcp-watermark.image" alt="è·¯ç”±æ‡’åŠ è½½.gif" loading="lazy" referrerpolicy="no-referrer"></p>
<p>å…¶ä¸­çš„<code>components-list-list-module-ngfactory.js</code>æ–‡ä»¶ï¼Œåªæœ‰å½“è®¿é—®<code>/list</code>è·¯ç”±æ—¶æ‰ä¼šåŠ è½½ã€‚</p>
<h1 data-id="heading-2">è·¯ç”±å®ˆå«</h1>
<p>å½“æˆ‘ä»¬è®¿é—®æˆ–åˆ‡æ¢è·¯ç”±æ—¶ï¼Œä¼šåŠ è½½ç›¸åº”çš„æ¨¡å—å’Œç»„ä»¶ï¼Œè·¯ç”±å®ˆå«å¯ä»¥ç†è§£ä¸ºåœ¨è·¯ç”±åŠ è½½å‰åçš„é’©å­ï¼Œæœ€å¸¸è§çš„æ˜¯è¿›å…¥è·¯ç”±çš„å®ˆå«å’Œç¦»å¼€è·¯ç”±çš„å®ˆå«ï¼š</p>
<ul>
<li>canActivate è¿›å…¥å®ˆå«</li>
<li>canDeactivate ç¦»å¼€å®ˆå«</li>
</ul>
<p>æ¯”å¦‚æˆ‘ä»¬æƒ³åœ¨ç”¨æˆ·è¿›å…¥è¯¦æƒ…é¡µä¹‹å‰ï¼Œåˆ¤æ–­ä»–æ˜¯å¦æœ‰æƒé™ï¼Œå°±å¯ä»¥ä½¿ç”¨<code>canActivate</code>å®ˆå«ã€‚</p>
<h2 data-id="heading-3">å¢åŠ è·¯ç”±å®ˆå«</h2>
<pre><code class="copyable">&#123;
  path: 'detail',
  loadChildren: () => import('./components/detail/detail.module').then(m => m.DetailModule),

  // è·¯ç”±å®ˆå«
  canActivate: [AuthGuard],
&#125;,
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-4">ç¼–å†™å®ˆå«é€»è¾‘</h2>
<p>ä½¿ç”¨CLIå‘½ä»¤åˆ›å»ºè·¯ç”±å®ˆå«æ¨¡å—ï¼š</p>
<pre><code class="copyable">ng g guard auth
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>auth.guard.ts</p>
<pre><code class="copyable">import &#123; Injectable &#125; from '@angular/core';
import &#123; CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree &#125; from '@angular/router';
import &#123; Observable &#125; from 'rxjs';
import &#123; DetailService &#125; from './detail.service';

@Injectable(&#123;
  providedIn: 'root'
&#125;)
export class AuthGuard implements CanActivate &#123;
  constructor(
    private detailService: DetailService,
  ) &#123;&#125;

  canActivate(
    route: ActivatedRouteSnapshot,
    state: RouterStateSnapshot): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree &#123;
    return new Observable(observer => &#123;
      // é‰´æƒæ•°æ®ä»åå°æ¥å£å¼‚æ­¥è·å–
      this.detailService.getDetailAuth().subscribe((hasPermission: boolean) => &#123;
        observer.next(hasPermission);
        observer.complete();
      &#125;);
    &#125;);
  &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-5">è·å–æƒé™service</h2>
<p>è·å–æƒé™çš„serviceï¼š</p>
<pre><code class="copyable">ng g s detail
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>detail.service.ts</p>
<pre><code class="copyable">import &#123;Injectable&#125; from '@angular/core';
import &#123; HttpClient &#125; from '@angular/common/http';

@Injectable(&#123; providedIn: 'root' &#125;)
export class DetailService &#123;
  constructor(
    private http: HttpClient,
  ) &#123; &#125;

  getDetailAuth(): any &#123;
    return this.http.get('/detail/auth');
  &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c4a75592577f456783988c5db717feb3~tplv-k3u1fbpfcp-watermark.image" alt="è·¯ç”±å®ˆå«.gif" loading="lazy" referrerpolicy="no-referrer"></p>
<p>ç”±äºæˆ‘ä»¬å¯¹<code>/detail</code>è·¯ç”±å¢åŠ äº†å®ˆå«ï¼Œä¸ç®¡æ˜¯ä»åˆ«çš„è·¯ç”±åˆ‡æ¢åˆ°<code>/detail</code>è·¯ç”±ï¼Œè¿˜æ˜¯ç›´æ¥è®¿é—®<code>/detail</code>è·¯ç”±ï¼Œéƒ½æ— æ³•è¿›å…¥è¯¥é¡µé¢ã€‚</p>
<h1 data-id="heading-6">åŠ¨æ€è·¯ç”±å‚æ•°</h1>
<p>åœ¨è·¯ç”±ä¸­å¸¦å‚æ•°æœ‰å¾ˆå¤šä¸­æ–¹æ³•ï¼š</p>
<ul>
<li>åœ¨pathä¸­å¸¦å‚æ•°</li>
<li>åœ¨queryStringä¸­å¸¦å‚æ•°</li>
<li>ä¸é€šè¿‡é“¾æ¥å¸¦å‚æ•°</li>
</ul>
<h2 data-id="heading-7">åœ¨pathä¸­å¸¦å‚</h2>
<pre><code class="copyable">&#123;
  path: 'user/:id',
  loadChildren: () => import('./components/user/user.module').then(m => m.UserModule),
&#125;,
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-8">åœ¨queryStringä¸­å¸¦å‚æ•°</h2>
<p>htmlä¼ å‚</p>
<pre><code class="copyable"><a [routerLink]="['/list']" [queryParams]="&#123;id: '1'&#125;">...</a>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>tsä¼ å‚</p>
<pre><code class="copyable">this.router.navigate(['/list'],&#123; queryParams: &#123; id: '1' &#125;);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-9">é€šè¿‡dataä¼ é€’é™æ€å‚æ•°</h2>
<blockquote>
<p>æ³¨æ„ï¼šé€šè¿‡dataä¼ é€’çš„è·¯ç”±å‚æ•°åªèƒ½æ˜¯é™æ€çš„</p>
</blockquote>
<pre><code class="copyable">&#123;
  path: 'detail',
  loadChildren: () => import('./components/detail/detail.module').then(m => m.DetailModule),
  
  // é™æ€å‚æ•°
  data: &#123;
    title: 'è¯¦æƒ…'
  &#125;
&#125;,
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-10">é€šè¿‡resolveä¼ é€’åŠ¨æ€å‚æ•°</h2>
<p>dataåªèƒ½ä¼ é€’é™æ€å‚æ•°ï¼Œé‚£æˆ‘æƒ³é€šè¿‡è·¯ç”±ä¼ é€’ä»åå°æ¥å£è·å–åˆ°çš„åŠ¨æ€å‚æ•°ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯é€šè¿‡<code>resolve</code>é…ç½®ã€‚</p>
<pre><code class="copyable">&#123;
  path: 'detail',
  loadChildren: () => import('./components/detail/detail.module').then(m => m.DetailModule),
  
  // åŠ¨æ€è·¯ç”±å‚æ•°
  resolve: &#123;
    detail: DetailResolver
  &#125;,
&#125;,
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-11">åˆ›å»ºResolver</h3>
<p>detail.resolver.ts</p>
<pre><code class="copyable">import &#123; Injectable &#125; from '@angular/core';
import &#123; Resolve, ActivatedRouteSnapshot, RouterStateSnapshot &#125; from '@angular/router';
import &#123; DetailService &#125; from './detail.service';

@Injectable(&#123; providedIn: 'root' &#125;)
export class DetailResolver implements Resolve<any> &#123;

  constructor(private detailService: DetailService) &#123; &#125;

  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): any &#123;
    return this.detailService.getDetail();
  &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-12">åœ¨æœåŠ¡ä¸­å¢åŠ è·å–è¯¦æƒ…æ•°æ®çš„æ–¹æ³•</h3>
<p>detail.service.ts</p>
<pre><code class="copyable">import &#123;Injectable&#125; from '@angular/core';
import &#123; HttpClient &#125; from '@angular/common/http';

@Injectable(&#123; providedIn: 'root' &#125;)
export class DetailService &#123;
  constructor(
    private http: HttpClient,
  ) &#123; &#125;

  getDetailAuth(): any &#123;
    return this.http.get('/detail/auth');
  &#125;

  // å¢åŠ çš„
  getDetail(): any &#123;
    return this.http.get('/detail');
  &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-13">è·å–åŠ¨æ€å‚æ•°</h3>
<p>åˆ›å»ºç»„ä»¶</p>
<pre><code class="copyable">ng g c detial
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>detail.component.ts</p>
<pre><code class="copyable">import &#123; Component, OnInit &#125; from '@angular/core';
import &#123; ActivatedRoute &#125; from '@angular/router';

@Component(&#123;
  selector: 'app-detail',
  templateUrl: './detail.component.html',
  styleUrls: ['./detail.component.scss']
&#125;)
export class DetailComponent implements OnInit &#123;

  constructor(
    private route: ActivatedRoute,
  ) &#123; &#125;

  ngOnInit(): void &#123;
    // å’Œè·å–é™æ€å‚æ•°çš„æ–¹å¼æ˜¯ä¸€æ ·çš„
    const detail = this.route.snapshot.data.detail;
    console.log('detail:', detail);
  &#125;

&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>æ¬¢è¿åŠ DevUIå°åŠ©æ‰‹å¾®ä¿¡ï¼šdevui-officialï¼Œä¸€èµ·è®¨è®ºAngularæŠ€æœ¯å’Œå‰ç«¯æŠ€æœ¯ã€‚</p>
<p>æ¬¢è¿å…³æ³¨æˆ‘ä»¬<a href="https://devui.design/" target="_blank" rel="nofollow noopener noreferrer">DevUI</a>ç»„ä»¶åº“ï¼Œç‚¹äº®æˆ‘ä»¬çš„å°æ˜Ÿæ˜ŸğŸŒŸï¼š</p>
<p><a href="https://github.com/devcloudfe/ng-devui" target="_blank" rel="nofollow noopener noreferrer">github.com/devcloudfe/â€¦</a></p>
<p>ä¹Ÿæ¬¢è¿ä½¿ç”¨DevUIæ–°å‘å¸ƒçš„<a href="https://devui.design/admin/" target="_blank" rel="nofollow noopener noreferrer">DevUI Admin</a>ç³»ç»Ÿï¼Œå¼€ç®±å³ç”¨ï¼Œ10åˆ†é’Ÿæ­å»ºä¸€ä¸ªç¾è§‚å¤§æ°”çš„åå°ç®¡ç†ç³»ç»Ÿï¼</p>
<h1 data-id="heading-14">åŠ å…¥æˆ‘ä»¬</h1>
<p>æˆ‘ä»¬æ˜¯DevUIå›¢é˜Ÿï¼Œæ¬¢è¿æ¥è¿™é‡Œå’Œæˆ‘ä»¬ä¸€èµ·æ‰“é€ ä¼˜é›…é«˜æ•ˆçš„äººæœºè®¾è®¡/ç ”å‘ä½“ç³»ã€‚æ‹›è˜é‚®ç®±ï¼š<a href="mailto:muyang2@huawei.com">muyang2@huawei.com</a>ã€‚</p>
<p>æ–‡/DevUI Kagol</p>
<p>å¾€æœŸæ–‡ç« æ¨è</p>
<p><a href="https://juejin.cn/post/6968616701709516836" target="_blank">ã€Šä»Šå¤©æ˜¯å„¿ç«¥èŠ‚ï¼Œæ•´ä¸ªè´ªåƒè›‡åˆ°ç¼–è¾‘å™¨é‡Œç©å„¿å§ã€‹</a></p>
<p><a href="https://juejin.cn/post/6968104416784171039" target="_blank">ã€Šå¦‚ä½•å°†é¾™æ’å…¥åˆ°ç¼–è¾‘å™¨ä¸­ï¼Ÿã€‹</a></p>
<p><a href="https://juejin.cn/post/6966993945973194765" target="_blank">ã€ŠQuillå¯Œæ–‡æœ¬ç¼–è¾‘å™¨çš„å®è·µã€‹</a></p>
<p><a href="https://juejin.cn/post/6967931817215131656" target="_blank">ã€ŠStepsGuideï¼šä¸€ä¸ªåƒè·Ÿå±è™«ä¸€æ ·çš„ç»„ä»¶ã€‹</a></p>
<p><a href="https://juejin.cn/post/6956155033410863134" target="_blank">ã€Šå·å¤–å·å¤–ï¼DevUI Admin V1.0 å‘å¸ƒå•¦ï¼ã€‹</a></p></div>  
</div>
            