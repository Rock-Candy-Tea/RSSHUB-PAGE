
---
title: '如何实现一个可左右拉伸的滑块效果'
categories: 
 - 编程
 - 掘金
 - 分类
headimg: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/609e28f26b5649e3b7151f577daa2e83~tplv-k3u1fbpfcp-watermark.image'
author: 掘金
comments: false
date: Sat, 14 Aug 2021 23:45:49 GMT
thumbnail: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/609e28f26b5649e3b7151f577daa2e83~tplv-k3u1fbpfcp-watermark.image'
---

<div>   
<div class="markdown-body"><style>@charset "UTF-8";.markdown-body&#123;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1&#123;font-size:25px;margin-bottom:5px;border-left:5px solid #773098&#125;.markdown-body h1,.markdown-body h2&#123;display:inline-block;font-weight:700;padding-left:10px&#125;.markdown-body h2&#123;font-size:18px;border-left:5px solid #916dd5&#125;.markdown-body h3&#123;font-size:16px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;border-radius:6px;display:block;margin:20px auto;object-fit:contain;box-shadow:2px 4px 7px #999&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;padding:.2em .5em;font-weight:700;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;display:block;font-size:12px;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#773098&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5&#125;.markdown-body thead&#123;background-color:#916dd5;color:#fff;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#d89cf6&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0;line-height:26px&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px;list-style-type:circle&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body b,.markdown-body strong&#123;color:#916dd5;font-weight:700&#125;.markdown-body b:before,.markdown-body strong:before&#123;content:"「"&#125;.markdown-body b:after,.markdown-body strong:after&#123;content:"」"&#125;.markdown-body em,.markdown-body i&#123;color:#916dd5&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><h2 data-id="heading-0">前言</h2>
<blockquote>
<p>上月我一朋友，让我帮他实现一个效果，话说是他公司产品觉得自家项目的<em>制作gif</em>功能用户体验差，看到了别人的效果，于是就“挥刀霍霍”向了我那朋友，具体我们看下效果。</p>
</blockquote>
<p><strong>别人家的效果</strong></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/609e28f26b5649e3b7151f577daa2e83~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p><strong>自家的效果</strong>
用的是 element ui的 滑块</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a32e6e23ec2a49dc86623d27f8552b6d~tplv-k3u1fbpfcp-watermark.image" alt="QQ图片20210814224019.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>果然还是别人家的效果，话说这个忙还是得帮，下面开始正题</p>
<h2 data-id="heading-1">需求</h2>
<p>动手之前我们先捋一捋需求</p>
<ol>
<li>滑块不能超出临界值（不能滑出轨道）</li>
</ol>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/71fb00541e3546b58f5635debf789615~tplv-k3u1fbpfcp-watermark.image" alt="middle.gif" loading="lazy" referrerpolicy="no-referrer"></p>
<ol start="2">
<li>
<p>手动进行向左、向右、滑块整体左右滑动</p>
</li>
<li>
<p>鼠标对滑块左按钮、右按钮、中间按钮 分别可以向左拉伸、向右拉伸、滑块整体左右滑动</p>
</li>
</ol>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/15a95b03ae90435cae2149c8d9437746~tplv-k3u1fbpfcp-watermark.image" alt="left.gif" loading="lazy" referrerpolicy="no-referrer"></p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fdc4c53f9bd84467a7922dee0c235f05~tplv-k3u1fbpfcp-watermark.image" alt="right.gif" loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-2">方案</h2>
<p>需求貌似不多，选什么样的方案来实现呢？ C3的 <code>transform</code>的 <code>translateX</code> 还是 定位<code>position</code>呢？由于之前我对定位的拖拽比较熟悉，于是我选择使用 定位<code>position</code>来实现。</p>
<p>具体思路：</p>
<ol>
<li>创建一个容器container、容器下面创建一个滑轨track、滑轨羡慕创建一个滑块 slider、滑块下面分别创建 左边按钮、中间按钮、右边按钮</li>
<li>创建一个Slider类进行具体实现</li>
</ol>
<h2 data-id="heading-3">源码</h2>
<blockquote>
<p>代码配有详尽的注释，以助于理解</p>
</blockquote>
<p><strong>html部分</strong></p>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-meta"><!DOCTYPE <span class="hljs-meta-keyword">html</span>></span>
<span class="hljs-tag"><<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>></span>
<span class="hljs-tag"><<span class="hljs-name">head</span>></span>
    <span class="hljs-tag"><<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /></span>
    <span class="hljs-tag"><<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span> /></span>
    <span class="hljs-tag"><<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /></span>
    <span class="hljs-tag"><<span class="hljs-name">title</span>></span>slider<span class="hljs-tag"></<span class="hljs-name">title</span>></span>
<span class="hljs-tag"></<span class="hljs-name">head</span>></span>
<span class="hljs-tag"><<span class="hljs-name">style</span>></span><span class="css">
    * &#123;
        <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
    &#125;
    <span class="hljs-selector-class">.container</span> &#123;
        <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;
        <span class="hljs-attribute">margin</span>: <span class="hljs-number">50px</span> auto;
    &#125;
    <span class="hljs-selector-class">.track</span> &#123;
        <span class="hljs-attribute">box-sizing</span>: content-box;
        <span class="hljs-attribute">position</span>: relative;
        <span class="hljs-attribute">background</span>: <span class="hljs-number">#d1d1d1</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">30px</span>;
        <span class="hljs-attribute">line-height</span>: <span class="hljs-number">30px</span>;
        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
    &#125;
    <span class="hljs-selector-class">.track</span><span class="hljs-selector-pseudo">::before</span>,
    <span class="hljs-selector-class">.track</span><span class="hljs-selector-pseudo">::after</span> &#123;
        <span class="hljs-attribute">content</span>: <span class="hljs-string">''</span>;
        <span class="hljs-attribute">position</span>: absolute;
        <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">width</span>: <span class="hljs-number">12px</span>;
        <span class="hljs-attribute">background</span>: <span class="hljs-number">#d1d1d1</span>;
    &#125;
    <span class="hljs-selector-class">.track</span><span class="hljs-selector-pseudo">::before</span> &#123;
        <span class="hljs-attribute">left</span>: -<span class="hljs-number">12px</span>;
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">2px</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">2px</span>;
    &#125;
    <span class="hljs-selector-class">.track</span><span class="hljs-selector-pseudo">::after</span> &#123;
        <span class="hljs-attribute">right</span>: -<span class="hljs-number">12px</span>;
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">2px</span> <span class="hljs-number">0</span>;
    &#125;
    <span class="hljs-selector-class">.slider</span> &#123;
        <span class="hljs-attribute">position</span>: absolute;
        <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">66</span>, <span class="hljs-number">133</span>, <span class="hljs-number">244</span>, <span class="hljs-number">0.25</span>);
        <span class="hljs-attribute">text-align</span>: center;
        <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">2px</span>;
        <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span>;
        <span class="hljs-attribute">cursor</span>: pointer;
    &#125;
    <span class="hljs-selector-class">.middle</span> &#123;
        <span class="hljs-attribute">width</span>: inherit;
        <span class="hljs-attribute">position</span>: absolute;
        <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">66</span>, <span class="hljs-number">133</span>, <span class="hljs-number">244</span>, <span class="hljs-number">0.25</span>);
        <span class="hljs-attribute">text-align</span>: center;
        <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">2px</span>;
        <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span>;
        <span class="hljs-attribute">cursor</span>: pointer;
    &#125;
    <span class="hljs-selector-class">.left</span> &#123;
        <span class="hljs-attribute">position</span>: absolute;
        <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">width</span>: <span class="hljs-number">12px</span>;
        <span class="hljs-attribute">background</span>: <span class="hljs-number">#4285f4</span>;
        <span class="hljs-attribute">border</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">cursor</span>: ew-resize;
        <span class="hljs-attribute">left</span>: -<span class="hljs-number">12px</span>;
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">2px</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">2px</span>;
    &#125;
    <span class="hljs-selector-class">.right</span> &#123;
        <span class="hljs-attribute">position</span>: absolute;
        <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">width</span>: <span class="hljs-number">12px</span>;
        <span class="hljs-attribute">background</span>: <span class="hljs-number">#4285f4</span>;
        <span class="hljs-attribute">border</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">cursor</span>: ew-resize;
        <span class="hljs-attribute">outline</span>: none;
        <span class="hljs-attribute">right</span>: -<span class="hljs-number">12px</span>;
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">2px</span> <span class="hljs-number">0</span>;
        <span class="hljs-attribute">z-index</span>: <span class="hljs-number">10</span>;
    &#125;
    <span class="hljs-selector-class">.right</span><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-pseudo">:hover</span>)<span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-pseudo">:active</span>) > <span class="hljs-selector-tag">span</span>,
    <span class="hljs-selector-class">.left</span><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-pseudo">:hover</span>)<span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-pseudo">:active</span>) > <span class="hljs-selector-tag">span</span> &#123;
        <span class="hljs-attribute">visibility</span>: hidden;
        <span class="hljs-attribute">color</span>: <span class="hljs-number">#000</span>;
    &#125;
    <span class="hljs-selector-class">.right</span> > <span class="hljs-selector-tag">span</span>,
    <span class="hljs-selector-class">.left</span> > <span class="hljs-selector-tag">span</span> &#123;
        <span class="hljs-attribute">position</span>: absolute;
        <span class="hljs-attribute">bottom</span>: <span class="hljs-number">33px</span>;
        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(-<span class="hljs-number">50%</span>);
        <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;
        <span class="hljs-attribute">visibility</span>: visible;
    &#125;
    <span class="hljs-selector-class">.right</span> > <span class="hljs-selector-tag">span</span> > <span class="hljs-selector-tag">span</span>,
    <span class="hljs-selector-class">.left</span> > <span class="hljs-selector-tag">span</span> > <span class="hljs-selector-tag">span</span> &#123;
        <span class="hljs-attribute">display</span>: block;
        <span class="hljs-attribute">background</span>: <span class="hljs-number">#4285f4</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">20px</span>;
        <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span>;
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">2px</span>;
        <span class="hljs-attribute">line-height</span>: <span class="hljs-number">20px</span>;
    &#125;
    <span class="hljs-selector-class">.left</span><span class="hljs-selector-pseudo">::before</span>,
    <span class="hljs-selector-class">.left</span><span class="hljs-selector-pseudo">::after</span>,
    <span class="hljs-selector-class">.right</span><span class="hljs-selector-pseudo">::before</span>,
    <span class="hljs-selector-class">.right</span><span class="hljs-selector-pseudo">::after</span> &#123;
        <span class="hljs-attribute">content</span>: <span class="hljs-string">''</span>;
        <span class="hljs-attribute">position</span>: absolute;
        <span class="hljs-attribute">width</span>: <span class="hljs-number">1px</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">8px</span>;
        <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;
        <span class="hljs-attribute">margin</span>: <span class="hljs-number">1px</span>;
        <span class="hljs-attribute">top</span>: <span class="hljs-number">10px</span>;
        <span class="hljs-attribute">right</span>: <span class="hljs-number">3px</span>;
    &#125;
    <span class="hljs-selector-class">.left</span><span class="hljs-selector-pseudo">::before</span>,
    <span class="hljs-selector-class">.right</span><span class="hljs-selector-pseudo">::before</span> &#123;
        <span class="hljs-attribute">left</span>: <span class="hljs-number">3px</span>;
    &#125;
</span><span class="hljs-tag"></<span class="hljs-name">style</span>></span>
<span class="hljs-tag"><<span class="hljs-name">body</span>></span>
    <span class="hljs-comment"><!-- 容器 --></span>
    <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>></span>
        <span class="hljs-comment"><!-- 轨道 --></span>
        <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"track"</span>></span>
            <span class="hljs-comment"><!-- 滑块 --></span>
            <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"slider"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"left: 0px"</span>></span>
                <span class="hljs-comment"><!-- 中间按钮 --></span>
                <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"middle"</span>></span>0<span class="hljs-tag"></<span class="hljs-name">div</span>></span>
                <span class="hljs-comment"><!-- 左边按钮 --></span>
                <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"left"</span>></span>
                    <span class="hljs-tag"><<span class="hljs-name">span</span>></span>
                        <span class="hljs-tag"><<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin-left: 30px"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"left-text"</span>></span>0<span class="hljs-tag"></<span class="hljs-name">span</span>></span>
                    <span class="hljs-tag"></<span class="hljs-name">span</span>></span>
                <span class="hljs-tag"></<span class="hljs-name">div</span>></span>
                <span class="hljs-comment"><!-- 右边按钮 --></span>
                <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"right"</span>></span>
                    <span class="hljs-tag"><<span class="hljs-name">span</span>></span>
                        <span class="hljs-tag"><<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin-left: 0px"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"right-text"</span>></span>0<span class="hljs-tag"></<span class="hljs-name">span</span>></span>
                    <span class="hljs-tag"></<span class="hljs-name">span</span>></span>
                <span class="hljs-tag"></<span class="hljs-name">div</span>></span>
            <span class="hljs-tag"></<span class="hljs-name">div</span>></span>
        <span class="hljs-tag"></<span class="hljs-name">div</span>></span>
    <span class="hljs-tag"></<span class="hljs-name">div</span>></span>
<span class="hljs-tag"></<span class="hljs-name">body</span>></span>
<span class="hljs-tag"></<span class="hljs-name">html</span>></span>
<span class="copy-code-btn">复制代码</span></code></pre>
<p>效果如图</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3a7243d6fbdb45e6a24e6b7391981bbd~tplv-k3u1fbpfcp-watermark.image" alt="企业微信截图_16289553808493.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p><em>下来我们来加上灵魂 <code>js</code></em></p>
<p>想怎么用比较合适？</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">const</span> slider = <span class="hljs-keyword">new</span> Slider(&#123;
    <span class="hljs-attr">slider_width</span>: <span class="hljs-number">50</span>,<span class="hljs-comment">// 滑块初始宽度</span>
    <span class="hljs-attr">track</span>: <span class="hljs-string">"track"</span>, <span class="hljs-comment">// 轨道class类名</span>
    <span class="hljs-attr">slider</span>: <span class="hljs-string">"slider"</span>, <span class="hljs-comment">// 滑块类名</span>
    <span class="hljs-attr">text</span>: &#123;
        <span class="hljs-attr">left</span>: <span class="hljs-string">"left-text"</span>, <span class="hljs-comment">// 左边按钮文案class类名</span>
        <span class="hljs-attr">right</span>: <span class="hljs-string">"right-text"</span> <span class="hljs-comment">// 右边按钮文案class类名</span>
    &#125;,
    <span class="hljs-attr">btn</span>: &#123;
        <span class="hljs-attr">left</span>: <span class="hljs-string">"left"</span>, <span class="hljs-comment">// 左边按钮class类名</span>
        <span class="hljs-attr">right</span>: <span class="hljs-string">"right"</span>,<span class="hljs-comment">// 右边按钮class类名</span>
        <span class="hljs-attr">middle</span>: <span class="hljs-string">"middle"</span> <span class="hljs-comment">//中间按钮class类名</span>
    &#125;,
    <span class="hljs-attr">range</span>: &#123;
        <span class="hljs-attr">min</span>: <span class="hljs-number">50</span>, <span class="hljs-comment">// 滑块区间范围最小值</span>
        <span class="hljs-attr">max</span>: <span class="hljs-number">200</span> <span class="hljs-comment">// 滑块区间范围最大值</span>
    &#125;
&#125;);
<span class="hljs-comment">// 手动向右拉伸 滑块宽度至100</span>
<span class="hljs-comment">//slider.rightStretch(100) </span>
<span class="hljs-comment">// 手动向左拉伸 滑块宽度至100</span>
<span class="hljs-comment">//slider.leftStretch(100)</span>
<span class="hljs-comment">// 手动移动滑块距离左边200</span>
<span class="hljs-comment">//slider.move(200)</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<p>想好了怎么用了，那么就是按怎么用进行逐步实现</p>
<ul>
<li>第一步，我们要把传入的参数转化为构造函数 Slider 内部可以用的值</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Slider</span> </span>&#123; 
    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">options</span>)</span> &#123; 
        <span class="hljs-built_in">this</span>._init(options)
    &#125;
    <span class="hljs-function"><span class="hljs-title">_init</span>(<span class="hljs-params">options</span>)</span>&#123;
         <span class="hljs-built_in">this</span>.options = options <span class="hljs-comment">// 传入的参数对象</span>
        <span class="hljs-comment">//</span>
        <span class="hljs-built_in">this</span>.init_width = options.slider_width <span class="hljs-comment">// 初始滑块宽度</span>

        options.range && options.range.min && (<span class="hljs-built_in">this</span>.range_min = options.range.min) <span class="hljs-comment">// 滑块宽度最小值</span>
        options.range && options.range.max && (<span class="hljs-built_in">this</span>.range_max = options.range.max) <span class="hljs-comment">// 滑块宽度最大值</span>
        <span class="hljs-comment">//</span>
        <span class="hljs-built_in">this</span>.btn_left_slider = <span class="hljs-built_in">this</span>._$(options.btn.left) <span class="hljs-comment">// 滑块左边按钮类 - 用于向左边进行拉伸</span>
        <span class="hljs-built_in">this</span>.text_middle = <span class="hljs-built_in">this</span>.btn_middle_slider = <span class="hljs-built_in">this</span>._$(options.btn.middle) <span class="hljs-comment">// 初始滑块宽度类  - 用于滑块整体左右移动  // 滑块中间按钮上面文案提示类</span>
        <span class="hljs-built_in">this</span>.btn_right_slider = <span class="hljs-built_in">this</span>._$(options.btn.right) <span class="hljs-comment">// 初始滑块宽度类  - 用于向右边边进行拉伸</span>
        <span class="hljs-comment">//</span>
        <span class="hljs-built_in">this</span>.track = <span class="hljs-built_in">this</span>._$(options.track) <span class="hljs-comment">// 滑块轨道类</span>
        <span class="hljs-built_in">this</span>.slider = <span class="hljs-built_in">this</span>._$(options.slider) <span class="hljs-comment">// 滑块轨道类</span>
        <span class="hljs-comment">//</span>
        <span class="hljs-built_in">this</span>.text_left = <span class="hljs-built_in">this</span>._$(options.text.left) <span class="hljs-comment">// 滑块左边按钮上面文案提示类</span>
        <span class="hljs-built_in">this</span>.text_right = <span class="hljs-built_in">this</span>._$(options.text.right) <span class="hljs-comment">// 滑块右边按钮上面文案提示类</span>
        <span class="hljs-comment">//</span>
        <span class="hljs-built_in">this</span>._initAttr() <span class="hljs-comment">// 初始化属性值</span>
        <span class="hljs-built_in">this</span>._initevent() <span class="hljs-comment">// 初始化事件</span>
    &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<p><strong>第一步做了：同步用户传入参数于示例中、以及初始化滑块宽度、配置滑块的最大最小值、同步必须的dom、初始化属性值、初始化事件</strong></p>
<p>为什么需要一开始就执行初始化属性（this._initAttr()）呢？是dom里面都是默认的 0，用户传入的值需要同步初始化到dom中。</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@description</span>: 初始化文案
 */</span>
<span class="hljs-function"><span class="hljs-title">_initAttr</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-built_in">this</span>.slider.style.width = <span class="hljs-built_in">this</span>.options.slider_width + <span class="hljs-string">'px'</span>
    <span class="hljs-built_in">this</span>.text_middle.innerText = <span class="hljs-built_in">this</span>.options.slider_width
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<p>然后会初始化事件，主要用到的事件是 鼠标在 滑块元素 mousedown 事件，然后借助事件代理，来区分我们作用的事件源对象的class类名，最后根据作用类名不同来执行不同的逻辑，<strong>这个是整个实现的重点</strong></p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@description</span>: 初始化事件
 */</span>
<span class="hljs-function"><span class="hljs-title">_initevent</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-built_in">this</span>.slider.onmousedown = <span class="hljs-function">(<span class="hljs-params">&#123; target: &#123; className &#125;, clientX &#125;</span>) =></span> &#123;
        <span class="hljs-comment">// 滑块宽度 动态值</span>
        <span class="hljs-keyword">const</span> sliderWidth = <span class="hljs-built_in">this</span>.slider.offsetWidth
        <span class="hljs-comment">// 滑块 距离左边 动态值</span>
        <span class="hljs-keyword">const</span> sliderLeft = <span class="hljs-built_in">this</span>.slider.offsetLeft

        <span class="hljs-keyword">switch</span> (className) &#123;
            <span class="hljs-keyword">case</span> <span class="hljs-built_in">this</span>.options.btn.middle:
                <span class="hljs-comment">// 滑块 X 坐标计算</span>
                <span class="hljs-built_in">this</span>.disX = clientX - <span class="hljs-built_in">this</span>.slider.offsetLeft
                <span class="hljs-comment">// 滑块整体向右边移动 最大能移动的临界值</span>
                <span class="hljs-keyword">const</span> valid_right = <span class="hljs-built_in">this</span>.track.offsetWidth - sliderWidth
                <span class="hljs-comment">//</span>
                <span class="hljs-built_in">document</span>.onmousemove = <span class="hljs-function">(<span class="hljs-params">&#123; clientX &#125;</span>) =></span> &#123;
                    <span class="hljs-built_in">this</span>.slider.style.left =
                        clientX - <span class="hljs-built_in">this</span>.disX < <span class="hljs-number">0</span>
                            ? <span class="hljs-number">0</span> <span class="hljs-comment">// 如果是滑块整体向左移动 超出临界值 就是临界值</span>
                            : clientX - <span class="hljs-built_in">this</span>.disX > valid_right
                            ? valid_right + <span class="hljs-string">'px'</span> <span class="hljs-comment">// 如果是滑块整体向右移动 超出临界值 就是临界值</span>
                            : clientX - <span class="hljs-built_in">this</span>.disX + <span class="hljs-string">'px'</span>
                    <span class="hljs-built_in">this</span>._syncText()
                &#125;
                <span class="hljs-keyword">break</span>
            <span class="hljs-keyword">case</span> <span class="hljs-built_in">this</span>.options.btn.left:
                <span class="hljs-comment">// 滑块 X 坐标计算</span>
                <span class="hljs-built_in">this</span>.disX = clientX
                <span class="hljs-comment">// 滑块右边按钮 至 轨道 最左边变距离</span>
                <span class="hljs-keyword">const</span> rightWidth = <span class="hljs-built_in">this</span>.slider.getBoundingClientRect().right - <span class="hljs-built_in">this</span>.track.getBoundingClientRect().left
                <span class="hljs-comment">//</span>
                <span class="hljs-built_in">document</span>.onmousemove = <span class="hljs-function">(<span class="hljs-params">&#123; clientX &#125;</span>) =></span> &#123;
                    <span class="hljs-comment">// 两点间的 x 差值 // 向左 一直移动，临界值是 0 超出边界 就会变成 负数  ，如果一直向右移动，超出右边临界值，右边临界值在移动到右边按钮时产生</span>
                    <span class="hljs-keyword">const</span> diff = <span class="hljs-built_in">this</span>.disX - clientX
                    <span class="hljs-comment">//  如果 一直向左移动 对应的 临界值</span>
                    <span class="hljs-keyword">let</span> valid_left = sliderWidth + diff
                    <span class="hljs-comment">// 如果 一直向右移动 对应的 临界值</span>
                    <span class="hljs-keyword">let</span> valid_right = sliderLeft - diff

                    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.range_min && valid_left <= <span class="hljs-built_in">this</span>.range_min) &#123;
                        <span class="hljs-comment">// 如果有设置最小范围值 并且 此时 向左拉伸超出最小值，那么此时的 值 就是最小值  range_min</span>
                        valid_left = <span class="hljs-built_in">this</span>.range_min
                        valid_right = rightWidth - valid_left
                    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.range_max && valid_left >= <span class="hljs-built_in">this</span>.range_max) &#123;
                        <span class="hljs-comment">// 如果右设置最大范围值 并且此时移动 valid_left 超出 设置的最大范围值</span>
                        valid_left = <span class="hljs-built_in">this</span>.range_max >= rightWidth ? rightWidth : <span class="hljs-built_in">this</span>.range_max <span class="hljs-comment">// 如果设置的最大范围值 超出有效值 rightWidth，那么就设置 valid_left 为 有效值 rightWidth ,否则就是设置为最大范围值</span>
                        valid_right = rightWidth - valid_left
                    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (valid_left >= rightWidth) &#123;
                        <span class="hljs-comment">// 如果一直向左边移动 ， 超出 有效值 rightWidth，（抵死在左边情形）</span>
                        valid_left = rightWidth
                        valid_right = <span class="hljs-number">0</span>
                    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (valid_right >= rightWidth) &#123;
                        <span class="hljs-comment">// 如果一直向右边移动 ， 超出 有效值 rightWidth</span>
                        valid_left = <span class="hljs-number">0</span>
                        valid_right = rightWidth
                    &#125;
                    <span class="hljs-built_in">this</span>.slider.style.left = valid_right + <span class="hljs-string">'px'</span>
                    <span class="hljs-built_in">this</span>.slider.style.width = valid_left + <span class="hljs-string">'px'</span>
                    <span class="hljs-built_in">this</span>.btn_right_slider.style.left = valid_left + <span class="hljs-string">'px'</span>
                    <span class="hljs-built_in">this</span>._syncText()
                &#125;
                <span class="hljs-keyword">break</span>
            <span class="hljs-keyword">case</span> <span class="hljs-built_in">this</span>.options.btn.right:
                <span class="hljs-comment">// 滑块 X 坐标计算</span>
                <span class="hljs-built_in">this</span>.disX = clientX - <span class="hljs-built_in">this</span>.btn_right_slider.offsetLeft
                <span class="hljs-comment">//</span>
                <span class="hljs-built_in">document</span>.onmousemove = <span class="hljs-function">(<span class="hljs-params">&#123; clientX &#125;</span>) =></span> &#123;
                    <span class="hljs-comment">// track 轨道宽度</span>
                    <span class="hljs-keyword">const</span> track_width = <span class="hljs-built_in">this</span>.track.offsetWidth
                    <span class="hljs-comment">// 滑块左边可滑动距离</span>
                    <span class="hljs-keyword">const</span> valid_left = <span class="hljs-built_in">this</span>.slider.offsetLeft
                    <span class="hljs-comment">// 滑块整体向右边移动 最大能移动的临界值</span>
                    <span class="hljs-keyword">const</span> valid_right = <span class="hljs-built_in">this</span>.range_max ? (<span class="hljs-built_in">this</span>.range_max >= track_width - valid_left ? track_width - valid_left : <span class="hljs-built_in">this</span>.range_max) : track_width - valid_left
                    <span class="hljs-comment">// 两点x坐标差值</span>
                    <span class="hljs-keyword">const</span> diff = clientX - <span class="hljs-built_in">this</span>.disX
                    <span class="hljs-comment">// 滑块右边按钮的 left 值 设置</span>
                    <span class="hljs-built_in">this</span>.btn_right_slider.style.left = (diff <= (<span class="hljs-built_in">this</span>.range_min || <span class="hljs-number">0</span>) ? <span class="hljs-built_in">this</span>.range_min || <span class="hljs-number">0</span> : diff >= valid_right ? valid_right : diff) + <span class="hljs-string">'px'</span>
                    <span class="hljs-comment">// 滑块的宽度 width 设置</span>
                    <span class="hljs-built_in">this</span>.slider.style.width = <span class="hljs-built_in">this</span>.btn_right_slider.offsetLeft + <span class="hljs-string">'px'</span>
                    <span class="hljs-comment">// 文案同步</span>
                    <span class="hljs-built_in">this</span>._syncText()
                &#125;
                <span class="hljs-keyword">break</span>
        &#125;
        <span class="hljs-built_in">document</span>.onmouseup = <span class="hljs-function">() =></span> &#123;
            <span class="hljs-built_in">document</span>.onmousemove = <span class="hljs-literal">null</span>
            <span class="hljs-built_in">document</span>.onmouseup = <span class="hljs-literal">null</span>
        &#125;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<p>其余部分方法实现没有<code>_initevent</code>事件复杂，分别是以下方法：</p>
<ul>
<li>获取dom <code>_$</code></li>
<li>同步文案 <code>_syncText</code></li>
<li>手动控制滑块右边按钮向右拉伸 <code>rightStretch</code></li>
<li>手动控制滑块左边按钮向左拉伸 <code>leftStretch</code></li>
<li>手动控制滑块整体左右滑动 <code>move</code></li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@description</span>: 获取dom
 * <span class="hljs-doctag">@param  <span class="hljs-type">&#123; string &#125;</span> <span class="hljs-variable">className</span></span>
 */</span>
_$(className) &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">`.<span class="hljs-subst">$&#123;className&#125;</span>`</span>)
&#125;
<span class="hljs-comment">/**
 * <span class="hljs-doctag">@description</span>: 同步文案信息
 */</span>
<span class="hljs-function"><span class="hljs-title">_syncText</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-comment">// 开始按钮距离 左边的距离</span>
    <span class="hljs-keyword">const</span> start = <span class="hljs-built_in">this</span>.slider.offsetLeft
    <span class="hljs-comment">// 结束按钮距离 左边的距离</span>
    <span class="hljs-keyword">const</span> end = <span class="hljs-built_in">this</span>.slider.getBoundingClientRect().right - <span class="hljs-built_in">this</span>.track.getBoundingClientRect().left
    <span class="hljs-comment">// 容器的总宽度</span>
    <span class="hljs-keyword">const</span> total = <span class="hljs-built_in">this</span>.track.offsetWidth
    <span class="hljs-comment">// 刷新 左边按钮 tip 文案</span>
    <span class="hljs-built_in">this</span>.text_left.innerText = start
    <span class="hljs-comment">// 刷新 右边按钮 tip 文案</span>
    <span class="hljs-built_in">this</span>.text_right.innerText = end
    <span class="hljs-comment">// 刷新 内容按钮 tip 文案</span>
    <span class="hljs-built_in">this</span>.btn_middle_slider.innerText = end - start
&#125;
<span class="hljs-comment">/**
 * <span class="hljs-doctag">@description</span>: 手动设置右边按钮拉伸到右边，
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123; Number &#125;</span> </span>n：设置的值 范围 为： &#123;0, rightMax：右边最大距离值&#125;
 */</span>
<span class="hljs-function"><span class="hljs-title">rightStretch</span>(<span class="hljs-params">n</span>)</span> &#123;
    <span class="hljs-comment">// 边界处理</span>
    <span class="hljs-keyword">const</span> rightMax = <span class="hljs-built_in">this</span>.track.offsetWidth - <span class="hljs-built_in">this</span>.slider.offsetLeft
    <span class="hljs-built_in">this</span>.slider.style.width = <span class="hljs-built_in">this</span>.btn_right_slider.style.left = (n >= rightMax ? rightMax : n) + <span class="hljs-string">'px'</span>
    <span class="hljs-built_in">this</span>._syncText()
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>
&#125;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@description</span>: 手动设置左边按钮拉伸到左边，
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123; Number &#125;</span> </span>n：设置的值 范围 为： &#123; leftMax：左边最大距离值，0&#125;
 */</span>
<span class="hljs-function"><span class="hljs-title">leftStretch</span>(<span class="hljs-params">n</span>)</span> &#123;
    <span class="hljs-comment">// <左边最大距离值></span>
    <span class="hljs-keyword">const</span> leftMax = <span class="hljs-built_in">this</span>.slider.getBoundingClientRect().right - <span class="hljs-built_in">this</span>.track.getBoundingClientRect().left
    <span class="hljs-comment">// 如果左边按钮超出 最大距离左边边界值，则 就都设置成 <左边最大距离值>leftMax</span>
    <span class="hljs-built_in">this</span>.slider.style.width = <span class="hljs-built_in">this</span>.btn_right_slider.style.left = (n >= leftMax ? leftMax : n) + <span class="hljs-string">'px'</span>
    <span class="hljs-comment">// 边界处理</span>
    <span class="hljs-built_in">this</span>.slider.style.left = (n <= leftMax ? leftMax - n : <span class="hljs-number">0</span>) + <span class="hljs-string">'px'</span>
    <span class="hljs-built_in">this</span>._syncText()
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>
&#125;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@description</span>: 手动设置滑块整体 向右 / 向右 移动
 * <span class="hljs-doctag">@param <span class="hljs-type">&#123; Number &#125;</span> </span>n ：移动距离 &#123;左边：0，右边：max &#125;
 */</span>
<span class="hljs-function"><span class="hljs-title">move</span>(<span class="hljs-params">n</span>)</span> &#123;
    <span class="hljs-keyword">const</span> max = <span class="hljs-built_in">this</span>.track.offsetWidth - <span class="hljs-built_in">this</span>.slider.offsetWidth
    <span class="hljs-built_in">this</span>.slider.style.left = (n >= max ? max : n) + <span class="hljs-string">'px'</span>
    <span class="hljs-built_in">this</span>._syncText()
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<p><strong>最后附上完整代码，和效果</strong></p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Slider</span> </span>&#123;
    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">options</span>)</span> &#123;
        <span class="hljs-built_in">this</span>._init(options)
    &#125;
    <span class="hljs-comment">/**
        * <span class="hljs-doctag">@description</span>: 初始化
        * <span class="hljs-doctag">@param <span class="hljs-type">&#123;Object&#125;</span> <span class="hljs-variable">options</span></span>
        */</span>
    <span class="hljs-function"><span class="hljs-title">_init</span>(<span class="hljs-params">options</span>)</span> &#123;
        <span class="hljs-built_in">this</span>.options = options
        <span class="hljs-comment">//</span>
        <span class="hljs-built_in">this</span>.init_width = options.slider_width || <span class="hljs-number">0</span> <span class="hljs-comment">// 初始滑块宽度</span>

        options.range && options.range.min && (<span class="hljs-built_in">this</span>.range_min = options.range.min) <span class="hljs-comment">// 滑块宽度最小值</span>
        options.range && options.range.max && (<span class="hljs-built_in">this</span>.range_max = options.range.max) <span class="hljs-comment">// 滑块宽度最大值</span>
        <span class="hljs-comment">//</span>
        <span class="hljs-built_in">this</span>.btn_left_slider = <span class="hljs-built_in">this</span>._$(options.btn.left) <span class="hljs-comment">// 滑块左边按钮类 - 用于向左边进行拉伸</span>
        <span class="hljs-built_in">this</span>.text_middle = <span class="hljs-built_in">this</span>.btn_middle_slider = <span class="hljs-built_in">this</span>._$(options.btn.middle) <span class="hljs-comment">// 初始滑块宽度类  - 用于滑块整体左右移动  // 滑块中间按钮上面文案提示类</span>
        <span class="hljs-built_in">this</span>.btn_right_slider = <span class="hljs-built_in">this</span>._$(options.btn.right) <span class="hljs-comment">// 初始滑块宽度类  - 用于向右边边进行拉伸</span>
        <span class="hljs-comment">//</span>
        <span class="hljs-built_in">this</span>.track = <span class="hljs-built_in">this</span>._$(options.track) <span class="hljs-comment">// 滑块轨道类</span>
        <span class="hljs-built_in">this</span>.slider = <span class="hljs-built_in">this</span>._$(options.slider) <span class="hljs-comment">// 滑块轨道类</span>
        <span class="hljs-comment">//</span>
        <span class="hljs-built_in">this</span>.text_left = <span class="hljs-built_in">this</span>._$(options.text.left) <span class="hljs-comment">// 滑块左边按钮上面文案提示类</span>
        <span class="hljs-built_in">this</span>.text_right = <span class="hljs-built_in">this</span>._$(options.text.right) <span class="hljs-comment">// 滑块右边按钮上面文案提示类</span>
        <span class="hljs-comment">//</span>
        <span class="hljs-built_in">this</span>._initAttr() <span class="hljs-comment">// 初始化属性值</span>
        <span class="hljs-built_in">this</span>._initEvent() <span class="hljs-comment">// 初始化事件</span>
    &#125;
    <span class="hljs-comment">/**
        * <span class="hljs-doctag">@description</span>: 获取dom
        * <span class="hljs-doctag">@param  <span class="hljs-type">&#123; string &#125;</span> <span class="hljs-variable">className</span></span>
        */</span>
    _$(className) &#123;
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">`.<span class="hljs-subst">$&#123;className&#125;</span>`</span>)
    &#125;
    <span class="hljs-comment">/**
        * <span class="hljs-doctag">@description</span>: 初始化文案
        */</span>
    <span class="hljs-function"><span class="hljs-title">_initAttr</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-built_in">this</span>.slider.style.width = <span class="hljs-built_in">this</span>.options.slider_width || <span class="hljs-number">0</span> + <span class="hljs-string">'px'</span>
        <span class="hljs-built_in">this</span>.text_middle.innerText = <span class="hljs-built_in">this</span>.options.slider_width || <span class="hljs-number">0</span>
    &#125;
   <span class="hljs-comment">/**
 * <span class="hljs-doctag">@description</span>: 初始化事件
 */</span>
<span class="hljs-function"><span class="hljs-title">_initevent</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-built_in">this</span>.slider.onmousedown = <span class="hljs-function">(<span class="hljs-params">&#123; target: &#123; className &#125;, clientX &#125;</span>) =></span> &#123;
        <span class="hljs-comment">// 滑块宽度 动态值</span>
        <span class="hljs-keyword">const</span> sliderWidth = <span class="hljs-built_in">this</span>.slider.offsetWidth
        <span class="hljs-comment">// 滑块 距离左边 动态值</span>
        <span class="hljs-keyword">const</span> sliderLeft = <span class="hljs-built_in">this</span>.slider.offsetLeft

        <span class="hljs-keyword">switch</span> (className) &#123;
            <span class="hljs-keyword">case</span> <span class="hljs-built_in">this</span>.options.btn.middle:
                <span class="hljs-comment">// 滑块 X 坐标计算</span>
                <span class="hljs-built_in">this</span>.disX = clientX - <span class="hljs-built_in">this</span>.slider.offsetLeft
                <span class="hljs-comment">// 滑块整体向右边移动 最大能移动的临界值</span>
                <span class="hljs-keyword">const</span> valid_right = <span class="hljs-built_in">this</span>.track.offsetWidth - sliderWidth
                <span class="hljs-comment">//</span>
                <span class="hljs-built_in">document</span>.onmousemove = <span class="hljs-function">(<span class="hljs-params">&#123; clientX &#125;</span>) =></span> &#123;
                    <span class="hljs-built_in">this</span>.slider.style.left =
                        clientX - <span class="hljs-built_in">this</span>.disX < <span class="hljs-number">0</span>
                            ? <span class="hljs-number">0</span> <span class="hljs-comment">// 如果是滑块整体向左移动 超出临界值 就是临界值</span>
                            : clientX - <span class="hljs-built_in">this</span>.disX > valid_right
                            ? valid_right + <span class="hljs-string">'px'</span> <span class="hljs-comment">// 如果是滑块整体向右移动 超出临界值 就是临界值</span>
                            : clientX - <span class="hljs-built_in">this</span>.disX + <span class="hljs-string">'px'</span>
                    <span class="hljs-built_in">this</span>._syncText()
                &#125;
                <span class="hljs-keyword">break</span>
            <span class="hljs-keyword">case</span> <span class="hljs-built_in">this</span>.options.btn.left:
                <span class="hljs-comment">// 滑块 X 坐标计算</span>
                <span class="hljs-built_in">this</span>.disX = clientX
                <span class="hljs-comment">// 滑块右边按钮 至 轨道 最左边变距离</span>
                <span class="hljs-keyword">const</span> rightWidth = <span class="hljs-built_in">this</span>.slider.getBoundingClientRect().right - <span class="hljs-built_in">this</span>.track.getBoundingClientRect().left
                <span class="hljs-comment">//</span>
                <span class="hljs-built_in">document</span>.onmousemove = <span class="hljs-function">(<span class="hljs-params">&#123; clientX &#125;</span>) =></span> &#123;
                    <span class="hljs-comment">// 两点间的 x 差值 // 向左 一直移动，临界值是 0 超出边界 就会变成 负数  ，如果一直向右移动，超出右边临界值，右边临界值在移动到右边按钮时产生</span>
                    <span class="hljs-keyword">const</span> diff = <span class="hljs-built_in">this</span>.disX - clientX
                    <span class="hljs-comment">//  如果 一直向左移动 对应的 临界值</span>
                    <span class="hljs-keyword">let</span> valid_left = sliderWidth + diff
                    <span class="hljs-comment">// 如果 一直向右移动 对应的 临界值</span>
                    <span class="hljs-keyword">let</span> valid_right = sliderLeft - diff

                    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.range_min && valid_left <= <span class="hljs-built_in">this</span>.range_min) &#123;
                        <span class="hljs-comment">// 如果有设置最小范围值 并且 此时 向左拉伸超出最小值，那么此时的 值 就是最小值  range_min</span>
                        valid_left = <span class="hljs-built_in">this</span>.range_min
                        valid_right = rightWidth - valid_left
                    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.range_max && valid_left >= <span class="hljs-built_in">this</span>.range_max) &#123;
                        <span class="hljs-comment">// 如果右设置最大范围值 并且此时移动 valid_left 超出 设置的最大范围值</span>
                        valid_left = <span class="hljs-built_in">this</span>.range_max >= rightWidth ? rightWidth : <span class="hljs-built_in">this</span>.range_max <span class="hljs-comment">// 如果设置的最大范围值 超出有效值 rightWidth，那么就设置 valid_left 为 有效值 rightWidth ,否则就是设置为最大范围值</span>
                        valid_right = rightWidth - valid_left
                    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (valid_left >= rightWidth) &#123;
                        <span class="hljs-comment">// 如果一直向左边移动 ， 超出 有效值 rightWidth，（抵死在左边情形）</span>
                        valid_left = rightWidth
                        valid_right = <span class="hljs-number">0</span>
                    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (valid_right >= rightWidth) &#123;
                        <span class="hljs-comment">// 如果一直向右边移动 ， 超出 有效值 rightWidth</span>
                        valid_left = <span class="hljs-number">0</span>
                        valid_right = rightWidth
                    &#125;
                    <span class="hljs-built_in">this</span>.slider.style.left = valid_right + <span class="hljs-string">'px'</span>
                    <span class="hljs-built_in">this</span>.slider.style.width = valid_left + <span class="hljs-string">'px'</span>
                    <span class="hljs-built_in">this</span>.btn_right_slider.style.left = valid_left + <span class="hljs-string">'px'</span>
                    <span class="hljs-built_in">this</span>._syncText()
                &#125;
                <span class="hljs-keyword">break</span>
            <span class="hljs-keyword">case</span> <span class="hljs-built_in">this</span>.options.btn.right:
                <span class="hljs-comment">// 滑块 X 坐标计算</span>
                <span class="hljs-built_in">this</span>.disX = clientX - <span class="hljs-built_in">this</span>.btn_right_slider.offsetLeft
                <span class="hljs-comment">//</span>
                <span class="hljs-built_in">document</span>.onmousemove = <span class="hljs-function">(<span class="hljs-params">&#123; clientX &#125;</span>) =></span> &#123;
                    <span class="hljs-comment">// track 轨道宽度</span>
                    <span class="hljs-keyword">const</span> track_width = <span class="hljs-built_in">this</span>.track.offsetWidth
                    <span class="hljs-comment">// 滑块左边可滑动距离</span>
                    <span class="hljs-keyword">const</span> valid_left = <span class="hljs-built_in">this</span>.slider.offsetLeft
                    <span class="hljs-comment">// 滑块整体向右边移动 最大能移动的临界值</span>
                    <span class="hljs-keyword">const</span> valid_right = <span class="hljs-built_in">this</span>.range_max ? (<span class="hljs-built_in">this</span>.range_max >= track_width - valid_left ? track_width - valid_left : <span class="hljs-built_in">this</span>.range_max) : track_width - valid_left
                    <span class="hljs-comment">// 两点x坐标差值</span>
                    <span class="hljs-keyword">const</span> diff = clientX - <span class="hljs-built_in">this</span>.disX
                    <span class="hljs-comment">// 滑块右边按钮的 left 值 设置</span>
                    <span class="hljs-built_in">this</span>.btn_right_slider.style.left = (diff <= (<span class="hljs-built_in">this</span>.range_min || <span class="hljs-number">0</span>) ? <span class="hljs-built_in">this</span>.range_min || <span class="hljs-number">0</span> : diff >= valid_right ? valid_right : diff) + <span class="hljs-string">'px'</span>
                    <span class="hljs-comment">// 滑块的宽度 width 设置</span>
                    <span class="hljs-built_in">this</span>.slider.style.width = <span class="hljs-built_in">this</span>.btn_right_slider.offsetLeft + <span class="hljs-string">'px'</span>
                    <span class="hljs-comment">// 文案同步</span>
                    <span class="hljs-built_in">this</span>._syncText()
                &#125;
                <span class="hljs-keyword">break</span>
        &#125;
        <span class="hljs-built_in">document</span>.onmouseup = <span class="hljs-function">() =></span> &#123;
            <span class="hljs-built_in">document</span>.onmousemove = <span class="hljs-literal">null</span>
            <span class="hljs-built_in">document</span>.onmouseup = <span class="hljs-literal">null</span>
        &#125;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    &#125;
&#125;
    <span class="hljs-comment">/**
        * <span class="hljs-doctag">@description</span>: 同步文案信息
        */</span>
    <span class="hljs-function"><span class="hljs-title">_syncText</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-comment">// 开始按钮距离 左边的距离</span>
        <span class="hljs-keyword">const</span> start = <span class="hljs-built_in">this</span>.slider.offsetLeft
        <span class="hljs-comment">// 结束按钮距离 左边的距离</span>
        <span class="hljs-keyword">const</span> end = <span class="hljs-built_in">this</span>.slider.getBoundingClientRect().right - <span class="hljs-built_in">this</span>.track.getBoundingClientRect().left
        <span class="hljs-comment">// 容器的总宽度</span>
        <span class="hljs-keyword">const</span> total = <span class="hljs-built_in">this</span>.track.offsetWidth
        <span class="hljs-comment">// 刷新 左边按钮 tip 文案</span>
        <span class="hljs-built_in">this</span>.text_left.innerText = start
        <span class="hljs-comment">// 刷新 右边按钮 tip 文案</span>
        <span class="hljs-built_in">this</span>.text_right.innerText = end
        <span class="hljs-comment">// 刷新 内容按钮 tip 文案</span>
        <span class="hljs-built_in">this</span>.btn_middle_slider.innerText = end - start
    &#125;
    <span class="hljs-comment">/**
        * <span class="hljs-doctag">@description</span>: 手动设置右边按钮拉伸到右边，
        * <span class="hljs-doctag">@param <span class="hljs-type">&#123; Number &#125;</span> </span>n：设置的值 范围 为： &#123;0, rightMax：右边最大距离值&#125;
        */</span>
    <span class="hljs-function"><span class="hljs-title">rightStretch</span>(<span class="hljs-params">n</span>)</span> &#123;
        <span class="hljs-comment">// 边界处理</span>
        <span class="hljs-keyword">const</span> rightMax = <span class="hljs-built_in">this</span>.track.offsetWidth - <span class="hljs-built_in">this</span>.slider.offsetLeft
        <span class="hljs-built_in">this</span>.slider.style.width = <span class="hljs-built_in">this</span>.btn_right_slider.style.left = (n >= rightMax ? rightMax : n) + <span class="hljs-string">'px'</span>
        <span class="hljs-built_in">this</span>._syncText()
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>
    &#125;

    <span class="hljs-comment">/**
        * <span class="hljs-doctag">@description</span>: 手动设置左边按钮拉伸到左边，
        * <span class="hljs-doctag">@param <span class="hljs-type">&#123; Number &#125;</span> </span>n：设置的值 范围 为： <leftMax> <左边最大距离值，0>
        */</span>
    <span class="hljs-function"><span class="hljs-title">leftStretch</span>(<span class="hljs-params">n</span>)</span> &#123;
        <span class="hljs-comment">// <左边最大距离值></span>
        <span class="hljs-keyword">const</span> leftMax = <span class="hljs-built_in">this</span>.slider.getBoundingClientRect().right - <span class="hljs-built_in">this</span>.track.getBoundingClientRect().left
        <span class="hljs-comment">// 如果左边按钮超出 最大距离左边边界值，则 就都设置成 <左边最大距离值>leftMax</span>
        <span class="hljs-built_in">this</span>.slider.style.width = <span class="hljs-built_in">this</span>.btn_right_slider.style.left = (n >= leftMax ? leftMax : n) + <span class="hljs-string">'px'</span>
        <span class="hljs-comment">// 边界处理</span>
        <span class="hljs-built_in">this</span>.slider.style.left = (n <= leftMax ? leftMax - n : <span class="hljs-number">0</span>) + <span class="hljs-string">'px'</span>
        <span class="hljs-built_in">this</span>._syncText()
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>
    &#125;

    <span class="hljs-comment">/**
        * <span class="hljs-doctag">@description</span>: 手动设置滑块整体 向右 / 向右 移动
        * <span class="hljs-doctag">@param <span class="hljs-type">&#123; Number &#125;</span> </span>n ：移动距离 <左边：0> <右边：max >
        */</span>
    <span class="hljs-function"><span class="hljs-title">move</span>(<span class="hljs-params">n</span>)</span> &#123;
        <span class="hljs-keyword">const</span> max = <span class="hljs-built_in">this</span>.track.offsetWidth - <span class="hljs-built_in">this</span>.slider.offsetWidth
        <span class="hljs-built_in">this</span>.slider.style.left = (n >= max ? max : n) + <span class="hljs-string">'px'</span>
        <span class="hljs-built_in">this</span>._syncText()
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>
    &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0cedcae61b7e4ecb9333067bc5c628b5~tplv-k3u1fbpfcp-watermark.image" alt="GIF 2021-8-14 23-24-55.gif" loading="lazy" referrerpolicy="no-referrer"></p>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fcodesandbox.io%2Fs%2Fwhite-paper-qxlsb%3Ffile%3D%2Findex.html" target="_blank" rel="nofollow noopener noreferrer" title="https://codesandbox.io/s/white-paper-qxlsb?file=/index.html" ref="nofollow noopener noreferrer">codesandbox查看</a></p>
<h2 data-id="heading-4">后言</h2>
<p>后面我朋友反馈，借助我写的这个效果实现了需求并上线，后续未收到问题，对于把这案例分享出来，一是作者我没有搜索到相关类似案例，（或许github应该有只是我没有找到而已），二是我向通过分享这个效果实现过程，来突出我们在项目效果实现中，有必要注重细节，该效果中，边界值的计算参照值得思考，同时也希望大家一起完善该效果，共同进步。（技术分享的初衷），重要的一点提升自己的写作水平（狗头笑😄）。</p>
<h2 data-id="heading-5">结语</h2>
<p>如果你有更好的点子或是疑问，欢迎留言</p>
<p>文中若有不准确或错误的地方，欢迎指出</p></div>  
</div>
            