
---
title: 'é»‘å®¢è¯´ï¼šå¦‚ä½•åšåˆ° 4 å¤©ä¸Šçº¿ä¸€ä¸ªå°ç¨‹åºï¼Ÿ'
categories: 
 - ç¼–ç¨‹
 - æ˜é‡‘
 - åˆ†ç±»
headimg: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5db6f590b9a3466c910861682e759c8e~tplv-k3u1fbpfcp-watermark.image'
author: æ˜é‡‘
comments: false
date: Sat, 07 Aug 2021 02:29:37 GMT
thumbnail: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5db6f590b9a3466c910861682e759c8e~tplv-k3u1fbpfcp-watermark.image'
---

<div>   
<div class="markdown-body"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><p>è‡ª 6 æœˆ 6 å·ä¸Šçº¿ â€œé»‘å®¢è¯´â€ ç½‘é¡µç‰ˆï¼ˆhackertalk.netï¼‰ä»¥æ¥å¸å¼•äº†å¾ˆå¤šç”¨æˆ·ï¼Œä¸ºäº†è¿›ä¸€æ­¥å®Œå–„ç»ˆç«¯ä½“éªŒï¼Œæˆ‘ä»¬å†³å®šå¤ç”¨å·²æœ‰çš„æŠ€æœ¯æ ˆï¼Œå®ç°å¾®ä¿¡ç«¯å°ç¨‹åºï¼Œå‰åå¼€å‘ä»…èŠ±äº†4å¤©ï¼Œæœ¬æ–‡ä¸»è¦ä»æŠ€æœ¯çš„è§’åº¦è®¨è®ºæˆ‘ä»¬å¦‚ä½•å¿«é€Ÿä¸Šçº¿å°ç¨‹åºã€‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5db6f590b9a3466c910861682e759c8e~tplv-k3u1fbpfcp-watermark.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-0">é»‘å®¢è¯´æ˜¯ä»€ä¹ˆ ï¼Ÿ</h2>
<p>è¿™æ˜¯æˆ‘ä»¬ä¸“é—¨ä¸ºç¨‹åºå‘˜ç¾¤ä½“å®šåˆ¶çš„äº¤æµå¹³å°ï¼Œæœ‰åŠæ—¶æŠ€æœ¯èµ„è®¯ã€é«˜è´¨é‡æŠ€æœ¯é—®ç­”ã€å®ç”¨ç¼–ç¨‹ç»éªŒåˆ†äº«ï¼Œè¿˜æœ‰ç¨‹åºå‘˜çš„æ—¥å¸¸ç”Ÿæ´»ã€‚æ¥è¿‘ 500 ä¸ªç¼–ç¨‹ç›¸å…³è¯é¢˜ã€‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b0433ea66d8447d49d53b371844e2262~tplv-k3u1fbpfcp-watermark.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<p>ä¸€ä¸ªé«˜åº¦å®šåˆ¶çš„ Markdown ç¼–è¾‘å™¨ï¼šæ‰€è§å³æ‰€å¾—ï¼Œå†ä¹Ÿä¸ç”¨åˆ†å±é¢„è§ˆäº†ï½</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f850e0fb84974152a4876dd2e47a668a~tplv-k3u1fbpfcp-watermark.image" alt="ç½‘é¡µç‰ˆç¼–è¾‘å™¨ï¼šæ’å…¥ latex å…¬å¼" loading="lazy" referrerpolicy="no-referrer"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2ffed84ea69b478a97ac93a23dc471ab~tplv-k3u1fbpfcp-watermark.image" alt="ç½‘é¡µç‰ˆç¼–è¾‘å™¨ï¼šæ’å…¥ markdown æ–‡æœ¬" loading="lazy" referrerpolicy="no-referrer"></p>
<p>â€‹æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥æˆ³ä¸‹é¢é“¾æ¥ç›´æ¥ä½“éªŒ ğŸ‘‡ğŸ‘‡</p>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fhackertalk.net" target="_blank" rel="nofollow noopener noreferrer" title="https://hackertalk.net" ref="nofollow noopener noreferrer">é»‘å®¢è¯´ï¼šä¸€ä¸ªæœ‰è¶£çš„ç¨‹åºå‘˜äº¤æµå¹³å°</a></p>
<h2 data-id="heading-1">ç½‘é¡µç«¯æŠ€æœ¯æ ˆ</h2>
<p>ä¸ºäº†ä»£ç æ›´å¥½åœ°å¤ç”¨å’Œç»´æŠ¤ï¼Œæˆ‘ä»¬åœ¨ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fvuejs.org%2F" target="_blank" rel="nofollow noopener noreferrer" title="https://vuejs.org/" ref="nofollow noopener noreferrer">Vue</a> å’Œ React ä¸­é€‰æ‹©äº† <a href="https://link.juejin.cn/?target=https%3A%2F%2Freactjs.org%2F" target="_blank" rel="nofollow noopener noreferrer" title="https://reactjs.org/" ref="nofollow noopener noreferrer">React</a>ï¼Œç½‘é¡µç«¯ä¸»è¦æŠ€æœ¯æ ˆå¦‚ä¸‹ï¼š</p>
<p><strong>react + typescript + redux + immer + redux-saga + axios + tailwindcss + fakerjs</strong></p>
<ul>
<li>typescript é¡¹ç›®å¿…å¤‡ï¼Œæå¤§æé«˜ä»£ç æ­£ç¡®æ€§å’Œå¯ç»´æŠ¤æ€§</li>
<li>immer æ›¿ä»£äº†ä¼ ç»Ÿçš„ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fimmutable-js%2Fimmutable-js" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/immutable-js/immutable-js" ref="nofollow noopener noreferrer">immutablejs</a> æ–¹æ¡ˆï¼Œåœ¨ reducer ä¸­å®ç°ç±»ä¼¼ vue çš„ç›´æ¥æ•°å€¼æ“ä½œï¼ˆç®€æ´æ€§ï¼‰ï¼ŒåŒæ—¶ä¿æŒ immutable æ•°æ®æµçš„ä¼˜ç‚¹ï¼ˆå¯ç»´æŠ¤æ€§ï¼‰</li>
<li>saga ä¿æŒäº†APIæ¥å£è°ƒç”¨çš„ç®€æ´æ€§ã€å¯è°ƒè¯•æ€§</li>
<li>axios å°è£…äº† http è¯·æ±‚ï¼Œå¯ä»¥é€šè¿‡è‡ªå®šä¹‰ adapter é€‚åº”ä¸åŒç»ˆç«¯è¿è¡Œç¯å¢ƒ</li>
<li>tailwindcss é€šè¿‡åŸå­åŒ–çš„ css å¤§å¤§é™ä½äº†æ ·å¼æ–‡ä»¶ä½“ç§¯ï¼ŒåŠ å¿«ç½‘é¡µåŠ è½½é€Ÿåº¦ï¼Œä¹Ÿå¾ˆå¤§ç¨‹åº¦é™ä½äº†å°ç¨‹åºåŒ…ä½“ç§¯ï¼ˆ2MB é™åˆ¶ï¼‰ï¼Œæ›´å¤šçš„ä»£ç ç©ºé—´å¯ä»¥ç”¨äº UI ç•Œé¢å’Œ JS é€»è¾‘</li>
<li>fakerjs ç”¨äºæ¨¡æ‹Ÿæ•°æ®ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸­æ³¨å…¥æ•°æ®åˆ° reduxï¼Œæ–¹ä¾¿è°ƒè¯•</li>
</ul>
<h3 data-id="heading-2">å°ç¨‹åºç«¯æŠ€æœ¯æ ˆ</h3>
<p>å°ç¨‹åºç«¯æŠ€æœ¯æ ˆå’Œç½‘é¡µç«¯é«˜åº¦é‡åˆï¼ˆè¿™ä¹Ÿæ˜¯æˆ‘ä»¬èƒ½å¤Ÿå¿«é€Ÿä¸Šçº¿åº”ç”¨çš„åŸå› ï¼‰ï¼Œå…¶ä¸­æœ€å¤§çš„å˜åŒ–æ˜¯ç”± react å˜ä¸º react + <a href="https://link.juejin.cn/?target=https%3A%2F%2Fdocs.taro.zone%2F" target="_blank" rel="nofollow noopener noreferrer" title="https://docs.taro.zone/" ref="nofollow noopener noreferrer">taro</a>ã€‚</p>
<blockquote>
<p>TaroÂ æ˜¯ä¸€ä¸ªå¼€æ”¾å¼è·¨ç«¯è·¨æ¡†æ¶è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒä½¿ç”¨ React/Vue/Nerv ç­‰æ¡†æ¶æ¥å¼€å‘Â å¾®ä¿¡Â /Â äº¬ä¸œÂ /Â ç™¾åº¦Â /Â æ”¯ä»˜å®Â /Â å­—èŠ‚è·³åŠ¨Â /Â QQÂ å°ç¨‹åº / H5 / RN ç­‰åº”ç”¨</p>
</blockquote>
<p>å°ç¨‹åºç«¯å¼€å‘å¯è°“æ··ä¹±è‡³æï¼ŒåŸç”Ÿä»£ç éš¾ä»¥ç»„ç»‡ã€éš¾ä»¥ç»´æŠ¤ï¼Œé€šå¸¸éƒ½éœ€è¦ä¸€äº›æ¡†æ¶è¿›è¡Œå°è£…ï¼ŒTaro æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨äº†å‡ ä¸ªä¸åŒæ–¹æ¡ˆåå†³å®šé‡‡çº³çš„ï¼Œå’Œ react é«˜åº¦é‡åˆï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ hookï¼Œæå¤§æé«˜ä»£ç å¤ç”¨çš„å¯èƒ½æ€§ï¼ˆè¿™æ˜¯ä»¥å‰ç§¯ç´¯çš„ç»éªŒåŸºç¡€ï¼‰ã€‚</p>
<h3 data-id="heading-3">APP ç«¯æŠ€æœ¯æ ˆ</h3>
<p>ç›®å‰é»‘å®¢è¯´è¿˜æ²¡æœ‰ä¸Šçº¿ç›¸å…³ APPï¼ŒæŠ€æœ¯æ ˆå¤ç”¨å¯ä»¥ç›´æ¥å°† react æ¢ä¸º react-nativeã€‚</p>
<h2 data-id="heading-4">ä»£ç æ–‡ä»¶ç»„ç»‡</h2>
<p>ç»„ç»‡è‰¯å¥½çš„ä»£ç æ˜¯é«˜åº¦å¤ç”¨çš„å…³é”®ï¼Œæˆ‘ä»¬é‡‡ç”¨ components + containers çš„ä»£ç åˆ†å‰²æ–¹å¼ï¼Œä¸¥æ ¼è§„èŒƒä»£ç ç»„ç»‡æ–¹å¼ï¼š</p>
<ul>
<li>UI ç•Œé¢ç›¸å…³ç»„ä»¶åªèƒ½æ”¾åœ¨ components æ–‡ä»¶å¤¹ï¼Œæ— çŠ¶æ€ï¼Œä¸èƒ½è€¦åˆä»»ä½•çŠ¶æ€ç®¡ç†åº“ç›¸å…³ä»£ç </li>
<li>æ•°æ®æ³¨å…¥çš„å®¹å™¨ç»„ä»¶åªèƒ½æ”¾äº containers æ–‡ä»¶å¤¹ï¼Œä¸èƒ½åŒ…å«ä»»ä½• UI ç›¸å…³ä»£ç ï¼Œæ¯”å¦‚ <code>div</code></li>
<li>æ¨¡å—åŒ–ã€åŸå­åŒ–ï¼šä»£ç åˆ†å±‚è®¾è®¡ï¼Œå®ç°ç»„ä»¶é«˜åº¦å¤ç”¨ï¼Œä¿æŒåº”ç”¨ä¸€è‡´æ€§</li>
</ul>
<p>æ–‡ä»¶å¤¹å¸ƒå±€å¦‚ä¸‹ï¼š</p>
<pre><code class="copyable">â”œâ”€â”€ assets     å›ºå®šèµ„æºæ–‡ä»¶ï¼šå›¾ç‰‡ã€æ–‡å­—ã€svg ç­‰
â”œâ”€â”€ components çº¯ UI ç»„ä»¶
â”œâ”€â”€ constants  å…¨å±€å¸¸é‡
â”œâ”€â”€ containers çº¯å®¹å™¨ç»„ä»¶
â”œâ”€â”€ hooks      è‡ªå®šä¹‰ hooks
â”œâ”€â”€ layout     å¸ƒå±€ç›¸å…³ UI é€»è¾‘
â”œâ”€â”€ locales    å›½é™…åŒ–ç›¸å…³
â”œâ”€â”€ pages      æ•´é¡µé€»è¾‘
â”œâ”€â”€ services   API æ¥å£ä»£ç 
â”œâ”€â”€ store      çŠ¶æ€ç®¡ç†ä»£ç 
â”œâ”€â”€ styles     æ ·å¼ä»£ç 
â”œâ”€â”€ types      ts ç±»å‹å£°æ˜
â””â”€â”€ utils      å…¬å…±å·¥å…·ç±»
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-5">Store çŠ¶æ€ç®¡ç†</h3>
<pre><code class="copyable">â”œâ”€â”€ actions
â”œâ”€â”€ reducers
â”œâ”€â”€ sagas
â”œâ”€â”€ selectors
â””â”€â”€ types
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>saga è°ƒç”¨ API ä»£ç ç»„ç»‡å¦‚ä¸‹ï¼šè°ƒç”¨è°ƒè¯•éå¸¸æ–¹ä¾¿</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">getPostById</span>(<span class="hljs-params">action: ReduxAction</span>): <span class="hljs-title">any</span> </span>&#123;
  <span class="hljs-keyword">try</span> &#123;
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">yield</span> call(postApi.getPostById, action.payload);
    <span class="hljs-keyword">yield</span> put(&#123; <span class="hljs-attr">type</span>: T.GET_POST_SUCCESS, <span class="hljs-attr">payload</span>: res.data.data &#125;);
    action.resolve?.();
  &#125; <span class="hljs-keyword">catch</span> (e) &#123;
    action.reject?.();
  &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å…¶ä¸­çš„ postApi æ¥è‡ª services æ–‡ä»¶å¤¹ï¼š</p>
<pre><code class="hljs language-typescript copyable" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getPostById</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) </span>&#123;
  <span class="hljs-keyword">return</span> axios.get<R<Post>>(<span class="hljs-string">`/v1/posts/by_id/<span class="hljs-subst">$&#123;id&#125;</span>`</span>);
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-6">å°ç¨‹åºç«¯ç‰¹æ®Šé€‚é…</h2>
<h3 data-id="heading-7">Cookie</h3>
<p>ç”±äºå°ç¨‹åºç«¯æ— æ³•æ”¯æŒ http cookieï¼Œæ— æ³•åƒæµè§ˆå™¨ä¸€æ ·ä½¿ç”¨ cookie æœºåˆ¶ä¿è¯å®‰å…¨æ€§å’Œç»´æŠ¤ç”¨æˆ·ç™»å½•çŠ¶æ€ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨æ¨¡æ‹Ÿä¸€ä¸ª cookie æœºåˆ¶ï¼Œè¿™é‡Œæˆ‘ä»¬æ¨èä½¿ç”¨äº¬ä¸œå¼€æºçš„ä¸€ä¸ªæ–¹æ¡ˆï¼š<a href="https://juejin.cn/post/6844904045920911374" target="_blank" title="https://juejin.cn/post/6844904045920911374">äº¬ä¸œè´­ç‰©å°ç¨‹åºcookieæ–¹æ¡ˆå®è·µ</a>ï¼Œå¯ä»¥å®ç° cookie è¿‡æœŸã€å¤š cookie åŠŸèƒ½ã€‚å…¶åŸç†ä½¿ç”¨äº† localstorage æ›¿ä»£ cookieã€‚</p>
<h3 data-id="heading-8">Http Request</h3>
<p>å°ç¨‹åºç«¯åªèƒ½ä½¿ç”¨ <code>wx.request</code> è¿›è¡Œ http è¯·æ±‚ï¼Œå¦‚æœå¤§é‡ API ç›´æ¥ä½¿ç”¨è¿™ä¸ªæ¥å£ç¼–å†™ï¼Œä»£ç å°†éš¾ä»¥ç»´æŠ¤å’Œå¤ç”¨ï¼Œæˆ‘ä»¬ä½¿ç”¨ axios çš„ adapter æ¨¡å¼å°è£… <code>wx.request</code> ï¼Œè¯·æ±‚ç»“æœå’Œ error éƒ½æŒ‰ axios æ•°æ®æ ¼å¼è¿›è¡ŒåŠ å·¥ã€‚è¿™æ ·æˆ‘ä»¬å°±èƒ½å¤Ÿç›´æ¥åœ¨å°ç¨‹åºç«¯ä½¿ç”¨ axios äº†ã€‚</p>
<p>è½¬æ¢è¯·æ±‚å‚æ•°ï¼š</p>
<pre><code class="hljs language-typescript copyable" lang="typescript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toQueryStr</span>(<span class="hljs-params">obj: <span class="hljs-built_in">any</span></span>) </span>&#123;
  <span class="hljs-keyword">if</span> (!obj) <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
  <span class="hljs-keyword">const</span> arr: <span class="hljs-built_in">string</span>[] = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> p <span class="hljs-keyword">in</span> obj) &#123;
    <span class="hljs-keyword">if</span> (obj.hasOwnProperty(p)) &#123;
      arr.push(p + <span class="hljs-string">'='</span> + <span class="hljs-built_in">encodeURIComponent</span>(obj[p]));
    &#125;
  &#125;
  <span class="hljs-keyword">return</span> <span class="hljs-string">'?'</span> + arr.join(<span class="hljs-string">'&'</span>);
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>axios é€‚é…å™¨æ¨¡å¼ï¼ˆCookieUtil ä»£ç å‚è€ƒä¸Šæ–‡äº¬ä¸œçš„ä¾‹å­ï¼‰</p>
<pre><code class="hljs language-typescript copyable" lang="typescript">axios.defaults.adapter = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config: AxiosRequestConfig</span>) </span>&#123;
    <span class="hljs-comment">// è¯·æ±‚å­—æ®µæ‹¼æ¥</span>
    <span class="hljs-keyword">let</span> url = <span class="hljs-string">'https://api.example.com'</span> + config.url;
    <span class="hljs-keyword">if</span> (config.params) &#123;
      url += toQueryStr(config.params);
    &#125;

    <span class="hljs-comment">// å¸¸è§„è¯·æ±‚å°è£…</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve: (r: AxiosResponse) => <span class="hljs-built_in">void</span>, reject: (e: AxiosError) => <span class="hljs-built_in">void</span></span>) =></span> &#123;
      wx.request(&#123;
        <span class="hljs-attr">url</span>: url,
        <span class="hljs-attr">method</span>: config.method,
        <span class="hljs-attr">data</span>: config.data,
        <span class="hljs-attr">header</span>: &#123;
          <span class="hljs-string">'Cookie'</span>: CookieUtil.getCookiesStr(),
          <span class="hljs-string">'X-XSRF-TOKEN'</span>: CookieUtil.getCookie(<span class="hljs-string">'XSRF-TOKEN'</span>)
        &#125;,
        <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =></span> &#123;
          <span class="hljs-keyword">const</span> setCookieStr = res.header[<span class="hljs-string">'Set-Cookie'</span>] || res.header[<span class="hljs-string">'set-cookie'</span>];
          CookieUtil.setCookieFromHeader(setCookieStr);

          <span class="hljs-keyword">const</span> axiosRes: AxiosResponse = &#123;
            <span class="hljs-attr">data</span>: res.data,
            <span class="hljs-attr">status</span>: res.statusCode,
            <span class="hljs-attr">statusText</span>: StatusText[res.statusCode] <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>,
            <span class="hljs-attr">headers</span>: res.header,
            config
          &#125;;
          <span class="hljs-keyword">if</span> (res.statusCode < <span class="hljs-number">400</span>) &#123;
            resolve(axiosRes);
          &#125; <span class="hljs-keyword">else</span> &#123;
            <span class="hljs-keyword">const</span> axiosErr: AxiosError = &#123;
              <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>,
              <span class="hljs-attr">message</span>: <span class="hljs-string">''</span>,
              config,
              <span class="hljs-attr">response</span>: axiosRes,
              <span class="hljs-attr">isAxiosError</span>: <span class="hljs-literal">true</span>,
              <span class="hljs-attr">toJSON</span>: <span class="hljs-function">() =></span> res
            &#125;;
            reject(axiosErr);
          &#125;
        &#125;,
        <span class="hljs-attr">fail</span>: <span class="hljs-function">(<span class="hljs-params">e: <span class="hljs-built_in">any</span></span>) =></span> &#123;
          <span class="hljs-keyword">const</span> axiosErr: AxiosError = &#123;
            <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>,
            <span class="hljs-attr">message</span>: <span class="hljs-string">''</span>,
            config,
            <span class="hljs-attr">isAxiosError</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-attr">toJSON</span>: <span class="hljs-function">() =></span> e
          &#125;;
          reject(axiosErr);
        &#125;
      &#125;);
    &#125;);
  &#125;;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>axios é€‚é…å®ŒæˆååŸå…ˆ API ç›¸å…³ä»£ç æ— éœ€æ”¹åŠ¨ä¸€è¡Œå³å¯ç›´æ¥å¤ç”¨ã€‚</p>
<h3 data-id="heading-9">Message</h3>
<p>æ¶ˆæ¯å¼¹çª—å’Œ toast ä¸èƒ½è¿è¡Œåœ¨å°ç¨‹åºç«¯ï¼Œæˆ‘ä»¬é€šè¿‡æ¥å£å…¼å®¹å®ç°ä»£ç å¤ç”¨ï¼š</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@author <span class="hljs-variable">z0000</span></span>
 * <span class="hljs-doctag">@version </span>1.0
 * message å¼¹çª—ï¼Œapi æ¥å£å‚è€ƒ antdï¼Œå°ç¨‹åºå‘æ­¤æ¥å£å…¼å®¹
 */</span>
<span class="hljs-keyword">import</span> Taro <span class="hljs-keyword">from</span> <span class="hljs-string">'@tarojs/taro'</span>;
<span class="hljs-keyword">import</span> log <span class="hljs-keyword">from</span> <span class="hljs-string">'./log'</span>;

<span class="hljs-keyword">const</span> message = &#123;
  <span class="hljs-function"><span class="hljs-title">info</span>(<span class="hljs-params">content: <span class="hljs-built_in">string</span>, duration = <span class="hljs-number">1500</span></span>)</span> &#123;
    Taro.showToast(&#123; <span class="hljs-attr">title</span>: content, <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span>, duration &#125;)
      .catch(<span class="hljs-function"><span class="hljs-params">e</span> =></span> log.error(<span class="hljs-string">'showToast error: '</span>, e));
  &#125;,

  <span class="hljs-function"><span class="hljs-title">success</span>(<span class="hljs-params">content: <span class="hljs-built_in">string</span>, duration = <span class="hljs-number">1500</span></span>)</span> &#123;
    Taro.showToast(&#123; <span class="hljs-attr">title</span>: content, <span class="hljs-attr">icon</span>: <span class="hljs-string">'success'</span>, duration &#125;)
      .catch(<span class="hljs-function"><span class="hljs-params">e</span> =></span> log.error(<span class="hljs-string">'showToast error: '</span>, e));
  &#125;,

  <span class="hljs-function"><span class="hljs-title">warn</span>(<span class="hljs-params">content: <span class="hljs-built_in">string</span>, duration = <span class="hljs-number">1500</span></span>)</span> &#123;
    Taro.showToast(&#123; <span class="hljs-attr">title</span>: content, <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span>, duration &#125;)
      .catch(<span class="hljs-function"><span class="hljs-params">e</span> =></span> log.error(<span class="hljs-string">'showToast error: '</span>, e));
  &#125;,

  <span class="hljs-function"><span class="hljs-title">error</span>(<span class="hljs-params">content: <span class="hljs-built_in">string</span>, duration = <span class="hljs-number">1500</span></span>)</span> &#123;
    Taro.showToast(&#123; <span class="hljs-attr">title</span>: content, <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span>, duration &#125;)
      .catch(<span class="hljs-function"><span class="hljs-params">e</span> =></span> log.error(<span class="hljs-string">'showToast error: '</span>, e));
  &#125;,

  <span class="hljs-comment">// eslint-disable-next-line no-unused-vars,@typescript-eslint/no-unused-vars</span>
  <span class="hljs-function"><span class="hljs-title">loading</span>(<span class="hljs-params">content: <span class="hljs-built_in">string</span>, _duration = <span class="hljs-number">1500</span></span>)</span> &#123;
    Taro.showLoading(&#123; <span class="hljs-attr">title</span>: content &#125;)
      .catch(<span class="hljs-function"><span class="hljs-params">e</span> =></span> log.error(<span class="hljs-string">'showLoading error: '</span>, e));
  &#125;,

  <span class="hljs-function"><span class="hljs-title">destroy</span>(<span class="hljs-params"></span>)</span> &#123;
    Taro.hideLoading();
  &#125;
&#125;;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> message;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>è¿™é‡Œæ¥å£å‚è€ƒçš„ Antd çš„ Message APIï¼Œå®ç°æµè§ˆå™¨ç«¯å’Œå°ç¨‹åºç«¯çš„å…¼å®¹ã€‚</p>
<h3 data-id="heading-10">History</h3>
<p>å°ç¨‹åºç«¯ history æœºåˆ¶å’Œæµè§ˆå™¨ç«¯ä¸ä¸€æ ·ï¼Œä¸ºäº†ä»£ç å¤ç”¨ï¼Œæˆ‘ä»¬å°†å°ç¨‹åºè·¯ç”± API è½¬æ¢é€‚é…æµè§ˆå™¨ç«¯æ¥å£ï¼ˆreact router çš„ history æ–¹æ³•ï¼‰ï¼š</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">/**
 * common api å°ç¨‹åºå‘ react router çš„ history æ–¹æ³•å…¼å®¹
 */</span>
<span class="hljs-keyword">import</span> Taro <span class="hljs-keyword">from</span> <span class="hljs-string">'@tarojs/taro'</span>;
<span class="hljs-keyword">import</span> log <span class="hljs-keyword">from</span> <span class="hljs-string">"./log"</span>;

<span class="hljs-keyword">const</span> history = &#123;
  <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> å¢åŠ queryå¯¹è±¡æ–¹æ³•</span>
  <span class="hljs-function"><span class="hljs-title">push</span>(<span class="hljs-params">path: <span class="hljs-built_in">string</span></span>)</span> &#123;
    Taro.navigateTo(&#123; <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages'</span> + path &#125;).catch(<span class="hljs-function"><span class="hljs-params">e</span> =></span> log.error(<span class="hljs-string">'navigateTo fail: '</span>, e));
  &#125;,

  <span class="hljs-function"><span class="hljs-title">replace</span>(<span class="hljs-params">path: <span class="hljs-built_in">string</span></span>)</span> &#123;
    Taro.redirectTo(&#123; <span class="hljs-attr">url</span>: path &#125;).catch(<span class="hljs-function"><span class="hljs-params">e</span> =></span> log.error(<span class="hljs-string">'redirectTo fail: '</span>,e));
  &#125;,

  <span class="hljs-function"><span class="hljs-title">go</span>(<span class="hljs-params">n: <span class="hljs-built_in">number</span></span>)</span> &#123;
    <span class="hljs-keyword">if</span> (n >= <span class="hljs-number">0</span>) &#123;
      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">'positive number not support in wx environment'</span>);
      <span class="hljs-keyword">return</span>;
    &#125;
    Taro.navigateBack(&#123; <span class="hljs-attr">delta</span>: -<span class="hljs-number">1</span> * n &#125;).catch(<span class="hljs-function"><span class="hljs-params">e</span> =></span> log.error(<span class="hljs-string">'navigateBack fail: '</span>,e));
  &#125;,

  <span class="hljs-function"><span class="hljs-title">goBack</span>(<span class="hljs-params"></span>)</span> &#123;
    Taro.navigateBack(&#123; <span class="hljs-attr">delta</span>: <span class="hljs-number">1</span> &#125;).catch(<span class="hljs-function"><span class="hljs-params">e</span> =></span> log.error(<span class="hljs-string">'navigateBack fail: '</span>,e));
  &#125;
&#125;;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> history;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>ä¹‹åæ‰¹é‡æœç´¢ä»£ç ä¸­ <code>useHistory</code> ç›¸å…³ hook ä»£ç ï¼Œè½¬æ¢ä¸ºä¸Šè¿°å®ç°å³å¯ã€‚</p>
<h3 data-id="heading-11">Router</h3>
<p>å°ç¨‹åºç«¯ä¸èƒ½ç›´æ¥ä½¿ç”¨ react-router ç±»ä¼¼çš„è·¯ç”±ç®¡ç†æ–¹æ¡ˆï¼Œå—ç›Šäºä»£ç æ¨¡å—åŒ–åˆ†å‰²ï¼Œå¤§éƒ¨åˆ†ä»£ç å¹¶æ²¡æœ‰è€¦åˆ react-router-dom ç›¸å…³çš„ä¸œè¥¿ï¼Œæœ€å¤šçš„å°±æ˜¯ <code><Link></code> ç»„ä»¶ï¼Œè¿™é‡Œæˆ‘ä»¬å°å°æ”¹é€ ä¸€ä¸‹ Link ç»„ä»¶ï¼Œæ‰¹é‡æ›¿ä»£å³å¯ï¼š</p>
<pre><code class="hljs language-tsx copyable" lang="tsx"><span class="hljs-keyword">import</span> &#123; FC, useCallback &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> Taro <span class="hljs-keyword">from</span> <span class="hljs-string">'@tarojs/taro'</span>;
<span class="hljs-keyword">import</span> &#123; View &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'@tarojs/components'</span>;
<span class="hljs-keyword">import</span> &#123; LinkProps &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="hljs-keyword">const</span> Index: FC<LinkProps> = <span class="hljs-function">(<span class="hljs-params">&#123; to, ...props&#125;</span>) =></span> &#123;

  <span class="hljs-keyword">const</span> onClick = useCallback(<span class="hljs-function"><span class="hljs-params">e</span> =></span> &#123;
    e.stopPropagation();
    Taro.navigateTo(&#123; <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages'</span> + to <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span> &#125;);
  &#125;, [to]);

  <span class="hljs-comment">// @ts-ignore</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag"><<span class="hljs-name">View</span> &#123;<span class="hljs-attr">...props</span>&#125; <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;onClick&#125;</span>></span>&#123;props.children&#125;<span class="hljs-tag"></<span class="hljs-name">View</span>></span></span>
&#125;;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> Index;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ <code>Taro.navigateTo</code> ä¸èƒ½ç›´æ¥è·³è½¬ Tab é¡µé¢ï¼Œæ‰€æœ‰æœ€ç»ˆä»£ç å®Œæˆåéœ€è¦ search + æµ‹è¯•è¦†ç›–æ£€æŸ¥ç›¸å…³é—®é¢˜ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ä¸Šé¢ä»£ç ä¸­æ£€æŸ¥ to å‚æ•°æ˜¯å¦ä¸º tab é¡µé¢ï¼Œåˆ‡æ¢æˆ <code>Taro.switchTab</code> æ–¹æ³•ã€‚</p>
<h3 data-id="heading-12">Path Params</h3>
<p>å°ç¨‹åºä¸æ”¯æŒç±»ä¼¼ <code>/post/:id</code> çš„è·¯ç”±å‚æ•°ï¼Œæˆ‘ä»¬éœ€è¦å°†è·¯ç”±å‚æ•°è½¬æ¢ä¸ºï¼š<code>/post?id=xx</code>ï¼Œè¿™ä¸ªè½¬æ¢é€šè¿‡ IDE æœç´¢ï¼Œæ‰¹é‡ replace å³å¯ã€‚</p>
<h3 data-id="heading-13">CSS</h3>
<p>ç”±äºå°ç¨‹åºç«¯çš„ rpx å•ä½ã€px å•ä½ç›´æ¥ä½¿ç”¨ä¼šæœ‰å¾ˆå¤§çš„å¤ç”¨é—®é¢˜ï¼Œå¯¼è‡´ç½‘é¡µç«¯å¾€å°ç¨‹åºç«¯è¿ç§»æ—¶éœ€è¦å¤§é‡æ”¹é€  HTML ä»£ç ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ sass å®ç°äº† tailwindcss ç±»ä¼¼çš„åŠŸèƒ½ï¼ˆé’ˆå¯¹å°ç¨‹åºç«¯è¿›è¡Œæ”¹é€ ï¼‰ï¼Œé€šè¿‡å˜é‡å¼€å…³åˆ‡æ¢å•ä½ï¼Œå¯ä»¥åšåˆ°ä¸åŒè®¾è®¡ç¨¿ä»£ç ä¹Ÿèƒ½å…¼å®¹ï¼ˆ375px å’Œ 750px æˆ–è€… rpxï¼Œrem å•ä½éƒ½å¯ä»¥ç›´æ¥å…¼å®¹ï¼‰ã€‚</p>
<p>è®¾è®¡å¤ç”¨æœ‰æ—¶æ¯”ä»£ç å¤ç”¨æ›´åŠ é‡è¦ï¼Œè¿™æ˜¯ç”¨æˆ·ä½“éªŒä¸€è‡´æ€§çš„å‰æï¼Œå¹¸è¿çš„æ˜¯ tailwincss ä¹‹ç±»çš„æ–¹æ¡ˆé€‰å‹è®©æˆ‘ä»¬å¾ˆå®¹æ˜“åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬åç»­å°†å¼€æºå°ç¨‹åºç«¯ tailwindcss ä»£ç ï¼Œæ•¬è¯·æœŸå¾…ã€‚</p>
<h2 data-id="heading-14">å›¢é˜Ÿåä½œ</h2>
<p>åä½œä¹Ÿæ˜¯å¾ˆé‡è¦çš„ä¸€ç¯ï¼Œäº§å“æˆåŠŸç¦»ä¸å¼€é«˜æ•ˆåˆä½œï¼Œæˆ‘ä»¬ä½¿ç”¨ google doc å…¨å®¶æ¡¶è¿›è¡Œåä½œï¼ŒåŒ…æ‹¬é¡¹ç›®æ–‡æ¡£ã€éœ€æ±‚ã€ä»»åŠ¡ç®¡ç†ã€é‚®ä»¶ï¼Œgoogle å…¨å®¶æ¡¶æœ€å¤§çš„å¥½å¤„å°±æ˜¯å¤šç«¯æ”¯æŒï¼Œè¿™æ˜¯ç›®å‰æ”¯æŒç»ˆç«¯æœ€å¤šã€åä½œæœ€æ–¹ä¾¿çš„å·¥å…·ã€‚linux + android + ios + ipad + windows + mac éƒ½èƒ½æ— ç¼åŒæ­¥åä½œã€‚æ–¹ä¾¿è®¾è®¡å¸ˆã€äº§å“ç»ç†ã€ç¨‹åºå‘˜å…±åŒå·¥ä½œã€‚</p>
<h2 data-id="heading-15">æœ€å</h2>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fhackertalk.net" target="_blank" rel="nofollow noopener noreferrer" title="https://hackertalk.net" ref="nofollow noopener noreferrer"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/78ebf0a3f2e5410f867d06b3b5494f1a~tplv-k3u1fbpfcp-watermark.image" alt="hackertalk" loading="lazy" referrerpolicy="no-referrer"></a></p>
<p>æ¬¢è¿å„ä½ä½“éªŒï¼</p>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fhackertalk.net%2F" target="_blank" rel="nofollow noopener noreferrer" title="https://hackertalk.net/" ref="nofollow noopener noreferrer">é»‘å®¢è¯´ç½‘é¡µç‰ˆ</a></p>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fhackertalk.net%2Fpost%2F189392795524841472" target="_blank" rel="nofollow noopener noreferrer" title="https://hackertalk.net/post/189392795524841472" ref="nofollow noopener noreferrer">HackerTalk ï¼ˆé»‘å®¢è¯´ï¼‰ç¬¬ä¸€å¸–ï¼šHappy hacking!</a></p>
<p>å¾®ä¿¡å°ç¨‹åºæœç´¢ï¼šé»‘å®¢è¯´ï¼Œæˆ–è€…æ‰«ç ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dc9a73c622354ca39f5ed84e430f8c13~tplv-k3u1fbpfcp-watermark.image" alt loading="lazy" referrerpolicy="no-referrer"></p></div>  
</div>
            