
---
title: 'Reactå…¥é—¨æŒ‡å—ï¼š 6å¼ è„‘å›¾å¸¦ä½ å…¥é—¨React'
categories: 
 - ç¼–ç¨‹
 - æ˜é‡‘
 - åˆ†ç±»
headimg: 'https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/58ff6c06c5154582b0c464f62cf2cb96~tplv-k3u1fbpfcp-watermark.image'
author: æ˜é‡‘
comments: false
date: Wed, 28 Jul 2021 18:21:21 GMT
thumbnail: 'https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/58ff6c06c5154582b0c464f62cf2cb96~tplv-k3u1fbpfcp-watermark.image'
---

<div>   
<div class="markdown-body"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><p><strong>é©¬ä¸Šåˆ°äº†åˆä¸€å¹´çš„ç§‹æ‹›ï¼Œ è¿˜ä¸ä¼šReactï¼Ÿ æ²¡å…³ç³»ï¼</strong> æˆ‘è¿™é‡Œæœ‰æœ€ç²¾ç®€çš„å…¥é—¨æŒ‡å—ğŸ˜„</p>
<p><strong>é€šè¿‡6å¼ è„‘å›¾å¸¦ä½ å…¥é—¨React</strong>, <a href="https://link.juejin.cn/?target=https%3A%2F%2Freact.docschina.org%2F" target="_blank" rel="nofollow noopener noreferrer" title="https://react.docschina.org/" ref="nofollow noopener noreferrer">React</a>æ–‡æ¡£ç›¸å¯¹äºåˆšå…¥é—¨çš„æ–°äººæ¥è¯´, å…¶è·³è·ƒæ€§å¼º, æ¡ˆä¾‹çš„ç»¼åˆæ€§ä¹‹é«˜è®©äººè¯»èµ·æ¥éƒ½è´¹åŠ². ä¸ºæ­¤æˆ‘æ•´ç†äº†ä¸€ä»½<strong>è„‘å›¾+è¶…ç®€å•çš„Demo</strong>çš„ç¬”è®°, è®©ä½ è¿…é€Ÿæ˜ç™½ReactAPIçš„ä½œç”¨, å…·ä½“çš„Demoåœ°å€ğŸ‘‰<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FLinkSofuny%2Freact-study-guide" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/LinkSofuny/react-study-guide" ref="nofollow noopener noreferrer">react-study-guide</a>ï¼Œ æ¬¢è¿starâ­ã€‚ æ‰€æœ‰çš„è„‘å›¾ï¼Œ Demoéƒ½åœ¨ä»“åº“é‡Œå¯ä»¥ç›´æ¥è·å–</p>
<p>å¹¶ä¸”åœ¨è®¸å¤šæ¼”ç¤ºç‰‡æ®µ, æˆ‘éƒ½å½•åˆ¶äº†GIFå›¾, è®©ä½ æ›´ç›´è§‚çš„ä½“ä¼šåˆ°ä»£ç çš„å®ç°ä¸Demoçš„æ ·å¼</p>
<hr>
<h1 data-id="heading-0">æ€»è§ˆ</h1>
<blockquote>
<p>æ”¾å¿ƒçœ‹èµ·æ¥è™½ç„¶å¤š, ä½†æ˜¯å†…å®¹éƒ½ä¸å¤æ‚, æ¯ä¸ªåˆ†æ”¯æˆ‘éƒ½é…å¤‡äº†å¯¹åº”çš„è®²è§£</p>
</blockquote>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/58ff6c06c5154582b0c464f62cf2cb96~tplv-k3u1fbpfcp-watermark.image" alt="React.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h1 data-id="heading-1">JSXè¯­æ³•</h1>
<blockquote>
<p>æœ€é‡è¦çš„ä¸€ç‚¹, å¤§æ‹¬å· <strong>&#123;&#125;</strong> å†…å†™çš„æ˜¯<code>JavaScript</code>çš„è¯­æ³•</p>
</blockquote>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9601d5c1e60742758b24ac75fb9c8232~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li>è¿™ä¸ªDemoå°±å±•ç¤ºäº†Reactä¸­JSXè¯­æ³•éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œ ä»…éœ€æ³¨æ„è„‘å›¾æåˆ°çš„è§„åˆ™å³å¯ï¼ˆå®Œå…¨å¤Ÿç”¨äº†ï¼‰</li>
</ul>
<pre><code class="hljs language-JavaScript copyable" lang="JavaScript"><div id=<span class="hljs-string">"test"</span>></div>
<span class="xml"><span class="hljs-tag"><<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/babel"</span>></span><span class="javascript">
  <span class="hljs-keyword">let</span> data = [<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>]
  <span class="hljs-comment">// 1.åˆ›å»ºè™šæ‹ŸDOM</span>
  <span class="hljs-keyword">const</span> VDom = (
    <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span>></span> &#123;/* å¿…é¡»åªæœ‰ä¸€ä¸ªæ ¹æ ‡ç­¾ */&#125;
      <span class="hljs-tag"><<span class="hljs-name">h1</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;background:</span> '<span class="hljs-attr">skyblue</span>', <span class="hljs-attr">marginLeft:</span> '<span class="hljs-attr">20px</span>'&#125;&#125;></span>è¿™æ˜¯å¤§æ ‡é¢˜<span class="hljs-tag"></<span class="hljs-name">h1</span>></span>
      <span class="hljs-tag"><<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'ul-class-name'</span>></span>
        &#123; &#123;/* JSè¯­æ³• */&#125;
          data.map((item, index) => &#123;
            return <span class="hljs-tag"><<span class="hljs-name">li</span>  <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;index&#125;</span>></span>&#123;item&#125;<span class="hljs-tag"></<span class="hljs-name">li</span>></span>
          &#125;)
        &#125;
      <span class="hljs-tag"></<span class="hljs-name">ul</span>></span>
    <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
  )
  ReactDOM.render(VDom, <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#test'</span>))
</span><span class="hljs-tag"></<span class="hljs-name">script</span>></span></span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<hr>
<h1 data-id="heading-2">Reactç»„ä»¶åŒ–</h1>
<blockquote>
<p>ç»„ä»¶åŒ–æ˜¯Reactæœ€æ ¸å¿ƒçš„å†…å®¹ï¼Œ æˆ‘ä¼šå°†è„‘å›¾æ‹†åˆ†æˆä¸€ä¸ªéƒ¨åˆ†ä¸€ä¸ªéƒ¨åˆ†æ¥çœ‹</p>
</blockquote>
<ul>
<li>å¦‚æœä½ ä¸ç†è§£<code>ç»„ä»¶åŒ–</code>è¿™ä¸ªè¯, æ²¡å…³ç³»ç»§ç»­å¾€ä¸‹çœ‹, ç¨åä½ å°±ä¼šæ…¢æ…¢æ˜ç™½äº†</li>
</ul>
<h2 data-id="heading-3">å‡½æ•°å¼ä¸ç±»å¼ç»„ä»¶</h2>
<blockquote>
<p>å‡½æ•°å¼ç»„ä»¶æ˜¯ç›®å‰ä½¿ç”¨æœ€å¤šï¼Œ å¹¶ä¸”æ˜¯æœ€å—æ¬¢è¿å¾—ç”¨æ³•ï¼Œ ä½†æ˜¯ä¸¤è€…å¹¶éè°æ›´åŠ ä¼˜ç§€ï¼Œ ç”¨æ³•çœ‹ä¸ªäººå³å¯ã€‚</p>
</blockquote>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/21cd5789d2d4475781280299847e454f~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-4">å‡½æ•°å¼</h3>
<blockquote>
<p>ä½¿ç”¨ç®€å•ï¼Œæ²¡æœ‰çƒ¦äººçš„thisæŒ‡å‘ï¼Œ æ™®éè¢«äººæ¥å—ï¼Œ ä¸è¿‡æ— æ³•ä½¿ç”¨ç±»å¼ç»„ä»¶ä¸­çš„éƒ¨åˆ†åŠŸèƒ½<code>State</code>ï¼Œ <code>ç”Ÿå‘½å‘¨æœŸå‡½æ•°</code>ç­‰ï¼ˆè¿™äº›åç»­ä¼šåšä»‹ç»ï¼‰ï¼Œ ä½†å¯ä»¥ç”¨è¿‡hookè§£å†³è¿™ä¸€é—®é¢˜ã€‚</p>
</blockquote>
<pre><code class="hljs language-JavaScript copyable" lang="JavaScript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Demo</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag"><<span class="hljs-name">h1</span>></span>Functional Component<span class="hljs-tag"></<span class="hljs-name">h1</span>></span></span>
&#125;
ReactDOM.render(<span class="xml"><span class="hljs-tag"><<span class="hljs-name">Demo</span> /></span></span>, <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#test'</span>))

<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-5">ç±»å¼</h3>
<blockquote>
<p>ä¹¦å†™ç›¸å¯¹å¤æ‚ï¼Œ è¦æ±‚ç»§æ‰¿ä¸€ä¸ªé€šè¿‡Reactæš´éœ²çš„<code>Component</code>ç±», ä½†æ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œ stateçŠ¶æ€</p>
</blockquote>
<pre><code class="hljs language-JavaScript copyable" lang="JavaScript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Demo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;
    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag"><<span class="hljs-name">h1</span>></span>Class Component<span class="hljs-tag"></<span class="hljs-name">h1</span>></span></span>
    &#125;
&#125;
ReactDOM.render(<span class="xml"><span class="hljs-tag"><<span class="hljs-name">Demo</span> /></span></span>, <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#test'</span>))

<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>æ³¨ å¦‚æœä½ å¯¹ç±»çš„å†™æ³•ä¸ç†Ÿæ‚‰ï¼Œ æ¨èä½ çœ‹ä¸€ä¸‹è¿™ç¯‡æ–‡ç« åº•éƒ¨å¯¹ç±»çš„ç®€å•ä»‹ç»<a href="https://juejin.cn/post/6933362634574004237#heading-8" target="_blank" title="https://juejin.cn/post/6933362634574004237#heading-8">åŸå‹ä¸åŸå‹é“¾: å¦‚ä½•è‡ªå·±å®ç° call, bind, new?</a></li>
</ul>
<h2 data-id="heading-6">äº‹ä»¶å¯¹è±¡</h2>
<blockquote>
<p>å°±æ˜¯å„ç§äº‹ä»¶ï¼ˆç‚¹å‡»ç­‰ï¼‰ï¼Œ ä½¿ç”¨èµ·æ¥é™¤äº†ä¹¦å†™å·®å¼‚ï¼Œ å…¶å®è·ŸåŸç”Ÿæ²¡æœ‰å¤ªå¤§åŒºåˆ«ã€‚</p>
</blockquote>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3ee50a75ef4e4ec69b8e26241790478f~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-7">ä¹¦å†™è§„èŒƒ</h3>
<blockquote>
<p>ä½¿ç”¨ <strong>å°é©¼å³°</strong> çš„å½¢å¼,å–ä»£ä¼ ç»Ÿçš„å†™æ³•å³å¯</p>
</blockquote>
<ul>
<li>ä¼ ç»Ÿå†™æ³•</li>
</ul>
<pre><code class="hljs language-JavaScript copyable" lang="JavaScript"><a herf=<span class="hljs-string">"#"</span> onclick=<span class="hljs-string">"console.log('ok!')"</span>></a>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>Reactäº‹ä»¶å†™æ³•</li>
</ul>
<pre><code class="hljs language-JavaScript copyable" lang="JavaScript"><a herf=<span class="hljs-string">"#"</span> onClick=&#123;clickFun&#125;></a> 

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clickFun</span> (<span class="hljs-params"></span>) </span>&#123; 
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'ok!'</span>) 
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>Reacté˜»æ­¢äº‹ä»¶é»˜è®¤è¡Œä¸º</li>
</ul>
<pre><code class="hljs language-JavaScript copyable" lang="JavaScript"><a herf=<span class="hljs-string">"#"</span> onClick=&#123;clickFun&#125;></a> 

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clickFun</span> (<span class="hljs-params">e</span>) </span>&#123; 
    e.preventDefault() 
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'ok!'</span>) 
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-8">thisçš„æŒ‡å‘é—®é¢˜</h3>
<ul>
<li>é€šå¸¸æƒ…å†µä¸‹ç”±äºonClickæ‰§è¡Œä¸å‡½æ•°å¹¶ä¸åŒæ­¥, æ‰€ä»¥thisä¼šæŒ‡å‘undefined, éœ€è¦åœ¨å®ä¾‹å†…æ”¹å˜thisæŒ‡å‘</li>
</ul>
<pre><code class="hljs language-JavaScript copyable" lang="JavaScript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Demo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;
  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">props</span>)</span> &#123;
    <span class="hljs-built_in">super</span>(props)
    <span class="hljs-built_in">this</span>.switchFn = <span class="hljs-built_in">this</span>.switchFn.bind(<span class="hljs-built_in">this</span>) <span class="hljs-comment">// ğŸ‘ˆ åœ¨æ„é€ å™¨å†…éƒ¨</span>
                                             <span class="hljs-comment">// å°†å‡½æ•°çš„thisç»‘å®šä¸ºå½“å‰å®ä¾‹</span>
  &#125;
  <span class="hljs-function"><span class="hljs-title">switchFn</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'ç‚¹å‡»æˆåŠŸ'</span>)
  &#125;
  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span>&#123;
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.switchFn&#125;</span>></span>
        è¿™é‡Œæ˜¯äº‹ä»¶ç‚¹å‡»å¤„
      <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
    )
  &#125;
&#125; 
ReactDOM.render(<span class="xml"><span class="hljs-tag"><<span class="hljs-name">Demo</span> /></span></span>, <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#test'</span>))
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>é€šè¿‡ç®­å¤´å‡½æ•°çš„å½¢å¼æ¥è§£å†³ï¼Œ å¦‚æœä½ æƒ³äº†è§£ä¸ºä»€ä¹ˆï¼Œ å»ºè®®ä½ å¤ä¹ ä¸€ä¸‹ç®­å¤´å‡½æ•°çš„ç‰¹æ€§</li>
</ul>
<pre><code class="hljs language-JavaScript copyable" lang="JavaScript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Demo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;
  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">props</span>)</span> &#123;
    <span class="hljs-built_in">super</span>(props)
  &#125;
  switchFn = <span class="hljs-function">() =></span> &#123; <span class="hljs-comment">// ğŸ‘ˆ</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'ç‚¹å‡»æˆåŠŸ'</span>) <span class="hljs-comment">// å°†å‡½æ•°æ”¹ä¸ºç®­å¤´å‡½æ•°å½¢å¼</span>
  &#125;
  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span>&#123;
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.switchFn&#125;</span>></span>
        è¿™é‡Œæ˜¯äº‹ä»¶ç‚¹å‡»å¤„
      <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
    )
  &#125;
&#125; 
ReactDOM.render(<span class="xml"><span class="hljs-tag"><<span class="hljs-name">Demo</span> /></span></span>, <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#test'</span>))
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-9">å¤„ç†å™¨çš„å‚æ•°ä¼ é€’</h3>
<ul>
<li>é€šè¿‡bindè§£å†³</li>
</ul>
<pre><code class="hljs language-JavaScript copyable" lang="JavaScript"><button click=&#123;<span class="hljs-built_in">this</span>.switch.bind(<span class="hljs-built_in">this</span>, id)&#125;></button>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>å†™æˆå›è°ƒå‡½æ•°çš„å½¢å¼</li>
</ul>
<pre><code class="hljs language-JavaScript copyable" lang="JavaScript"> <button click=&#123;<span class="hljs-function">(<span class="hljs-params">e</span>) =></span> &#123;<span class="hljs-built_in">this</span>.switch(id, e)&#125;&#125;></button>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><strong>è®²å®Œä¸‰å¤§å±æ€§ï¼Œå†æ¥è®²è®²Reactçš„æ¡ä»¶æ¸²æŸ“ä¸å¾ªç¯</strong></p>
<h2 data-id="heading-10">ç»„ä»¶çš„ä¸‰å¤§å±æ€§</h2>
<blockquote>
<p>äº†è§£äº†ä¸‰å¤§å±æ€§, æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªå®Œæ•´çš„Reactç»„ä»¶åº”è¯¥é•¿ä»€ä¹ˆæ ·</p>
</blockquote>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f10018afdaac4dc8bdf42e1591d03c73~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-11">stateï¼ˆçŠ¶æ€ï¼‰</h3>
<blockquote>
<p>ç»„ä»¶æœ¬èº«çš„çŠ¶æ€ï¼Œæ˜¯ä¸€ä¸ªæŒ‚è½½åœ¨å½“å‰ç»„ä»¶å®ä¾‹ä¸Šçš„ä¸€ä¸ªå±æ€§</p>
</blockquote>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ce5443c3a2da4a95ac56bfc906a66cd0~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p><strong>this.setState()</strong>: æœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼:</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2949bcef4d6a433d9c64ef993b8c360a~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li>å¯¹è±¡å¼</li>
</ul>
<pre><code class="hljs language-JavaScript copyable" lang="JavaScript"><span class="hljs-comment">// this.setState((state, props)=>&#123;&#125;, callback)</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Demo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;
    state = &#123; 
        <span class="hljs-attr">name</span>: <span class="hljs-string">'link'</span> 
    &#125;
    switchFn = <span class="hljs-function">() =></span> &#123;
        <span class="hljs-built_in">this</span>.setState(&#123;   <span class="hljs-comment">// ğŸ‘ˆ</span>
            <span class="hljs-attr">name</span>: <span class="hljs-string">'kiki'</span>  
        &#125;)
    &#125;
    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span>&#123;
      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.switchFn&#125;</span>></span>
          name: &#123;this.state.name&#125;
        <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
      )
    &#125;
&#125; 

<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>å‡½æ•°å¼</li>
</ul>
<pre><code class="hljs language-JavaScript copyable" lang="JavaScript"><span class="hljs-comment">// this.setState((state, props)=>&#123;&#125;, callback)</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Demo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;
    state = &#123; 
        <span class="hljs-attr">name</span>: <span class="hljs-string">'link'</span> 
    &#125;
    switchFn = <span class="hljs-function">() =></span> &#123;
        <span class="hljs-built_in">this</span>.setState(<span class="hljs-function">(<span class="hljs-params">state, prop</span>) =></span> &#123; <span class="hljs-comment">// ğŸ‘ˆ</span>
            <span class="hljs-comment">// å¯ä»¥ç›´æ¥æ‹¿åˆ°stateä¸prop</span>
            <span class="hljs-attr">name</span>: <span class="hljs-string">'kiki'</span>
        &#125;)
    &#125;
    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span>&#123;
      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.switchFn&#125;</span>></span>
          name: &#123;this.state.name&#125;
        <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
      )
    &#125;
&#125; 

<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>ç”±äºsetStateçš„æ‰§è¡Œæ˜¯å¼‚æ­¥çš„, åœ¨setStateï¼ˆï¼‰åå¦‚æœè¿˜éœ€è¦åšä¸€äº›å¤„ç†ï¼Œ è¿™äº›å¤„ç†å°±éœ€è¦åœ¨callbakå†…äº†</li>
</ul>
<pre><code class="hljs language-JavaScript copyable" lang="JavaScript"><span class="hljs-keyword">let</span> name = <span class="hljs-string">'link'</span>

<span class="hljs-built_in">this</span>.setState(&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">'kiki'</span>&#125;)

<span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.state.name) <span class="hljs-comment">// æ­¤æ—¶è¿˜ä¼šå¾—åˆ° 'link'</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>æ­£ç¡®æ“ä½œ</li>
</ul>
<pre><code class="hljs language-JavaScript copyable" lang="JavaScript">state = &#123;
    <span class="hljs-attr">name</span>: <span class="hljs-string">'link'</span>
&#125;
<span class="hljs-built_in">this</span>.setState(&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">'kiki'</span>&#125;, <span class="hljs-function">() =></span> &#123;  <span class="hljs-comment">// ğŸ‘ˆ</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.state.name) <span class="hljs-comment">// æ­¤æ—¶å¾—åˆ° 'kiki'</span>
&#125;)

<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><strong>æ³¨</strong>ï¼š ä»¥ä¸Šå‡æ˜¯ç±»å¼ç»„ä»¶çš„ç”¨æ³•ï¼Œ åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­ï¼Œ ä½¿ç”¨ <strong>State</strong> éœ€è¦é€šè¿‡ <strong>hook</strong> å®ç°ï¼Œ åˆ°hookç« èŠ‚æˆ‘ä»¬å†æ¥é˜è¿°è¿™ä¸€ç‚¹</p>
<h3 data-id="heading-12">propï¼ˆå±æ€§ propertyï¼‰</h3>
<blockquote>
<p>propsä¹Ÿæ˜¯å®ä¾‹ä¸ŠæŒ‚è½½çš„ä¸€ä¸ªå±æ€§ï¼Œæ‰€æœ‰é€šè¿‡æ ‡ç­¾å±æ€§ä¼ é€’çš„å€¼ï¼Œéƒ½å¯ä»¥ç”±å®ƒè®¿é—®åˆ°ï¼ŒåŒ…æ‹¬å‡½æ•°ï¼Œ å¯¹è±¡ã€‚(ç»„ä»¶é€šä¿¡), ä¹Ÿæœ‰ä¸€äº›ç‰¹æ®Šå€¼æ— æ³•è¢«è®¿é—®, å¦‚åšå”¯ä¸€è¡¨ç¤ºçš„key</p>
</blockquote>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ebba9e7a4af84a5facb3c51914a0bd7c~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<pre><code class="hljs language-JavaScript copyable" lang="JavaScript"><span class="hljs-comment">// æ ¹æ®JSXè¯­æ³• å‡è®¾è¿™æ˜¯ä¸€ä¸ªç»„ä»¶</span>

<span class="hljs-keyword">let</span> name = <span class="hljs-string">'link'</span>

<TestComponent name=&#123;name&#125; /> <span class="hljs-comment">// è¿™ä¸ªnameå°±æ˜¯ä¸€ä¸ªprop(å±æ€§)</span>

<span class="hljs-comment">// TestComponentç»„ä»¶å†…éƒ¨</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;
   <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
       <span class="xml"><span class="hljs-tag"><<span class="hljs-name">p</span>></span>name: &#123;this.props.name&#125;<span class="hljs-tag"></<span class="hljs-name">p</span>></span></span> <span class="hljs-comment">// ğŸ‘ˆ &#123;&#125;å¤§æ‹¬å·å†…å¯ä»¥å†™jsè¯­æ³•</span>
   &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-13">refï¼ˆå¼•ç”¨ referenceï¼‰</h3>
<blockquote>
<p>è·å–åˆ°å½“å‰çš„ä¸€ä¸ªDOMå…ƒç´ </p>
</blockquote>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/65c9043396ca452b83276456716596eb~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li>
<p>ç±»ä¼¼äºdocument.getElementById('id') åªæ˜¯è¿™ä»¶äº‹ç”±Reactå¸®ä½ åšäº†</p>
</li>
<li>
<p><strong>ä½¿ç”¨æ–¹å¼</strong></p>
</li>
</ul>
<blockquote>
<p><strong>æ³¨æ„:</strong> refçš„ä½¿ç”¨æ–¹å¼æœ‰ä¸‰ç§, ä½†ç›®å‰ä¸ºæ­¢æœ€è¢«å®˜æ–¹æ¨èçš„ä¸ºç¬¬ä¸‰ç§</p>
</blockquote>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/107f3830e8db49d0b271dcae360bc782~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h4 data-id="heading-14">å­—ç¬¦ä¸²å½¢å¼âŒï¼ˆ<strong>ä¸æ¨è</strong>ï¼‰</h4>
<pre><code class="hljs language-JavaScript copyable" lang="JavaScript"><span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªåŸç”Ÿçš„DOM</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">index</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;
  handleClick = <span class="hljs-function">() =></span> &#123;
      <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.refs.index);  <span class="hljs-comment">// æ‹¿åˆ°è¿™ä¸ªå®ä¾‹</span>
  &#125;
  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
      <span class="hljs-keyword">return</span> (
          <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'index'</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">'index'</span>></span> // ğŸ‘ˆ
              <span class="hljs-tag"><<span class="hljs-name">h1</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">'index2'</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.handleClick&#125;</span>></span>index<span class="hljs-tag"></<span class="hljs-name">h1</span>></span>
          <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
      )
  &#125;
&#125;

<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h4 data-id="heading-15">refå›è°ƒå½¢å¼</h4>
<blockquote>
<p>å›è°ƒå‡½æ•°çš„å½¢å¼, ä¼šæŠŠDOMæŒ‚è½½åˆ°å®ä¾‹ä¸Š(this)</p>
</blockquote>
<pre><code class="hljs language-JavaScript copyable" lang="JavaScript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">index</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;
  handleClick = <span class="hljs-function">() =></span> &#123;
      <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>); 
  &#125;
  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
      <span class="hljs-keyword">return</span> (
          <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'index'</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;c</span> =></span> this.input1 = c&#125;>  // ğŸ‘ˆ
              <span class="hljs-tag"><<span class="hljs-name">h1</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.handleClick&#125;</span>></span>index<span class="hljs-tag"></<span class="hljs-name">h1</span>></span>
          <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
      )
  &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h4 data-id="heading-16">createRef</h4>
<blockquote>
<p>ReactåŸºäºcraetRefåˆ›å»ºçš„refåªèƒ½å­˜æ”¾ä¸€ä¸ªref, è¿™ç§å½¢å¼çš„<strong>å®˜æ–¹æœ€ä¸ºæ¨è</strong>ï¼Œ ä½†æ˜¯ä¹¦å†™ç›¸å¯¹æ¯”è¾ƒéº»çƒ¦</p>
</blockquote>
<ul>
<li>creatRef() å³åœ¨æ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™éœ€è¦è‡ªå·±æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªref, å¹¶ä¸”åªèƒ½ä¸“äººä¸“ç”¨</li>
</ul>
<pre><code class="hljs language-JavaScript copyable" lang="JavaScript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">index</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;
  headerRef = React.createRef()  <span class="hljs-comment">// ğŸ‘ˆ</span>
  divRef = React.createRef()
  
  handleClick = <span class="hljs-function">() =></span> &#123;
      <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.headerRef);  <span class="hljs-comment">// ğŸ‘ˆ</span>
      <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.divRef);
  &#125;
  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
      <span class="hljs-keyword">return</span> (
          <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;this.divRef&#125;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'index'</span>></span>  // ğŸ‘ˆ
              <span class="hljs-tag"><<span class="hljs-name">h1</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;this.headerRef&#125;onClick</span>=<span class="hljs-string">&#123;this.handleClick&#125;</span>></span>index<span class="hljs-tag"></<span class="hljs-name">h1</span>></span>
          <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
      )
  &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-17">ç»¼åˆæ¡ˆä¾‹</h2>
<blockquote>
<p>ç»“åˆäº‹ä»¶å¯¹è±¡ä¸ä¸‰å¤§å±æ€§ï¼Œ æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ¡ä»¶æ¸²æŸ“çš„æ¡ˆä¾‹</p>
</blockquote>
<ul>
<li>
<p>æœ¬æ¡ˆä¾‹åœ¨é¡¹ç›®ä¸­çš„è·¯å¾„åœ°å€ï¼š <strong>'react-study-guide\study-demo\test-Demo\React-ç»„ä»¶åŒ–\äº‹ä»¶å¯¹è±¡\æ¡ä»¶æ¸²æŸ“.html'</strong></p>
</li>
<li>
<p>ç»„ä»¶å…³ç³»</p>
</li>
</ul>
<blockquote>
<p>è¯·å¯¹ç…§è¿™ä¸ªæµç¨‹è¡¨ç†æ¸…å…³ç³»</p>
</blockquote>
<pre><code class="hljs language-mermaid" lang="mermaid">stateDiagram-v2
Demo(ä¸»ç»„ä»¶) --> LogoutBtn: isLogin === true
Demo(ä¸»ç»„ä»¶) --> Greeting
Demo(ä¸»ç»„ä»¶) --> LoginBtn: isLogin === false
Greeting --> Welcome: isLogin === true
Greeting --> Bye: isLogin === false
</code></pre>
<ul>
<li>æ•ˆæœ</li>
</ul>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c0a381d16e04460bb6877b7d0fe5559d~tplv-k3u1fbpfcp-watermark.image" alt="åŠ¨ç”».gif" loading="lazy" referrerpolicy="no-referrer"></p>
<p>ä¹Ÿå°±æ˜¯è¯´, åœ¨å…¨å±€ä¸»ç»„ä»¶ä¸­æœ‰ä¸€ä¸ª<code>isLogin</code>(state)åœ¨ç®¡æ§å…¨å±€çŠ¶æ€.æ ¹æ®æ˜¯å¦ç™»å½•,æˆ‘ä»¬æ¥åˆ¤æ–­å±•ç¤ºä»€ä¹ˆæ ·çš„ç»„ä»¶</p>
<ul>
<li>Demoç»„ä»¶</li>
</ul>
<pre><code class="hljs language-JavaScript copyable" lang="JavaScript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Demo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span></span>&#123;
  state = &#123;
    <span class="hljs-attr">isLogin</span>: <span class="hljs-literal">true</span>
  &#125;
  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span>&#123;
    <span class="hljs-keyword">let</span> button
    <span class="hljs-keyword">const</span> &#123; isLogin &#125; = <span class="hljs-built_in">this</span>.state
    <span class="hljs-keyword">if</span>(isLogin) &#123;
      <span class="hljs-comment">// å°†ç‚¹å‡»äº‹ä»¶å‡½æ•°ä½œä¸ºpropsä¼ å…¥ç»„ä»¶</span>
      button = <span class="xml"><span class="hljs-tag"><<span class="hljs-name">LogoutBtn</span> <span class="hljs-attr">onLogoutClick</span>=<span class="hljs-string">&#123;this.logout&#125;/</span>></span></span> 
    &#125; <span class="hljs-keyword">else</span> &#123;
      button = <span class="xml"><span class="hljs-tag"><<span class="hljs-name">LoginBtn</span> <span class="hljs-attr">onLoginClick</span>=<span class="hljs-string">&#123;this.login&#125;/</span>></span></span>
    &#125;
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span>></span>
        <span class="hljs-tag"><<span class="hljs-name">Greeting</span> <span class="hljs-attr">isLogin</span>=<span class="hljs-string">&#123;this.state.isLogin&#125;/</span>></span>
        &#123;button&#125;  &#123;/* æ ¹æ®stateä¸­çš„isloginåˆ¤æ–­å±•ç¤ºlogoutBtnè¿˜æ˜¯LoginBtn */&#125;
      <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
    )
  &#125;
  <span class="hljs-comment">// æ§åˆ¶äº‹ä»¶</span>
  login = <span class="hljs-function">() =></span> &#123;
    <span class="hljs-built_in">this</span>.setState(&#123;<span class="hljs-attr">isLogin</span>: <span class="hljs-literal">true</span>&#125;)
  &#125;
  logout = <span class="hljs-function">() =></span>&#123;
    <span class="hljs-built_in">this</span>.setState(&#123;<span class="hljs-attr">isLogin</span>: <span class="hljs-literal">false</span>&#125;)
  &#125;
  
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>Greeting ç»„ä»¶(UIç»„ä»¶)</li>
</ul>
<blockquote>
<p>å®ƒåŒ…å«äº†ä¸¤ä¸ªUIå­ç»„ä»¶, æ ¹æ®isLoginçš„çŠ¶æ€æˆ‘ä»¬æ¥åˆ¤æ–­å±•ç¤ºé‚£ä¸ªUIç»„ä»¶, <strong>è¯·æ€è€ƒä¸€ä¸‹ä¸»ç»„ä»¶Demoæ˜¯æ€ä¹ˆæŠŠisLoginçš„çŠ¶æ€ä¼ é€’åˆ°UIç»„ä»¶<code>Greeting</code>ä¸­çš„?</strong></p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Greeting</span>(<span class="hljs-params">props</span>)</span>&#123;
  <span class="hljs-keyword">const</span> isLogin = props.isLogin
  <span class="hljs-keyword">if</span>(isLogin) <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag"><<span class="hljs-name">Welcome</span> /></span></span>
  )
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag"><<span class="hljs-name">Bye</span> /></span></span>
  )
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>UIå­ç»„ä»¶</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// UI</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Welcome</span>(<span class="hljs-params"></span>)</span>&#123;
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag"><<span class="hljs-name">h1</span>></span>Welcome<span class="hljs-tag"></<span class="hljs-name">h1</span>></span></span>
&#125;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Bye</span>(<span class="hljs-params"></span>)</span>&#123;
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag"><<span class="hljs-name">h1</span>></span>Bye<span class="hljs-tag"></<span class="hljs-name">h1</span>></span></span>
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-18">ç»„ä»¶åŒ–æ€æƒ³</h3>
<blockquote>
<p>æƒ³æƒ³ä¸Šé¢çš„ç»„ä»¶ä¹‹é—´çš„å…³ç³»ä»¥åŠåŠŸèƒ½, å…¶å®å°±æ˜¯æ¯ä¸ªç»„ä»¶åœ¨è´Ÿè´£ä»–ä»¬è‡ªå·±çš„åŠŸèƒ½, æŒ‰é’®ç»„ä»¶è´Ÿè´£<code>ç™»å½•</code>ä¸<code>é€€å‡º</code>çš„äº‹ä»¶, UIç»„ä»¶è´Ÿè´£å±•ç¤ºæ ‡è¯­, welcomeä¸bye.</p>
</blockquote>
<ul>
<li>åœ¨å®é™…å¼€å‘ä¸­ä¹Ÿæ˜¯åŒç†. ä½ å¯ä»¥å°†ä½ è®¤ä¸ºåˆç†çš„ä¸€éƒ¨åˆ†çœ‹æˆä¸€ä¸ªç»„ä»¶, ä»¥æ­¤æ¥æé«˜å®ƒçš„å¤ç”¨æ€§. ç»„ä»¶åŒ–å¼€å‘æ¡ä¾‹æ›´åŠ æ¸…æ™°, ä¹Ÿèƒ½æœ‰æ•ˆé™ä½è€¦åˆåº¦.</li>
</ul>
<p>ä»¥Reactçš„å®˜ç½‘ä¸ºä¾‹:</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4a72722645bb4b52857b599560ed9380~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li>æˆ‘ä»¬å°±å¯ä»¥æŠŠå¤´éƒ¨çš„çº¢è‰²éƒ¨åˆ†çœ‹æˆä¸€ä¸ªå¤´éƒ¨ç»„ä»¶.</li>
<li>åº•éƒ¨çš„æ©™è‰²çœ‹æˆä¸€ä¸ªç»„ä»¶, <strong>æˆ‘ä»¬ä»…éœ€å†™ä¸€ä¸ªæ©™è‰²ç»„ä»¶, ç„¶åå°†æ ‡é¢˜ä»¥åŠå†…å®¹, ä½œä¸ºpropä¼ é€’è¿›å»å³å¯.</strong></li>
</ul>
<p><strong>é‚£ä¹ˆå…·ä½“æ€ä¹ˆåš?</strong></p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// æ•°æ®</span>
<span class="hljs-keyword">let</span> arr = [
    &#123;
      <span class="hljs-attr">title</span>:<span class="hljs-string">'link'</span>,
      <span class="hljs-attr">content</span>: <span class="hljs-string">'ok, æˆ‘è¦è¯´ç‚¹ä»€ä¹ˆ'</span>
    &#125;,
    &#123;
      <span class="hljs-attr">title</span>:<span class="hljs-string">'æ˜é‡‘'</span>,
      <span class="hljs-attr">content</span>: <span class="hljs-string">'ok, å‘æ–‡ç« '</span>
    &#125;,
    &#123;
      <span class="hljs-attr">title</span>:<span class="hljs-string">'å…¬ä¼—å·'</span>,
      <span class="hljs-attr">content</span>: <span class="hljs-string">'ok, å·ä¸ªæ‡’'</span>
    &#125;,
]
<span class="hljs-comment">// é€šè¿‡propä¼ å…¥Demoç»„ä»¶ </span>
ReactDOM.render(<span class="xml"><span class="hljs-tag"><<span class="hljs-name">Demo</span> <span class="hljs-attr">number</span>=<span class="hljs-string">&#123;arr&#125;</span> /></span></span>, <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#test'</span>))  <span class="hljs-comment">// ğŸ‘ˆ</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Demo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;
  state = &#123;
    <span class="hljs-attr">arrInfo</span>: <span class="hljs-built_in">this</span>.props.number
  &#125;
  <span class="hljs-comment">// æ ¹æ®arrçš„æ•°æ®åšå¾ªç¯, å°†è¿™ä¸ªç»„ä»¶å­˜åˆ°ä¸€ä¸ªæ•°ç»„é‡Œ</span>
  itemList = <span class="hljs-built_in">this</span>.props.number.map(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =></span> &#123;
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag"><<span class="hljs-name">ItemList</span> <span class="hljs-attr">item</span>=<span class="hljs-string">&#123;item&#125;</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;index&#125;/</span>></span></span>
  &#125;)
  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag"><<span class="hljs-name">ul</span>></span>&#123;this.itemList&#125;<span class="hljs-tag"></<span class="hljs-name">ul</span>></span></span>
  &#125;
&#125;
<span class="hljs-comment">// UIç»„ä»¶, åœ¨ä¸Šæ–¹æˆ‘ä»¬å¾ªç¯äº†è¿™ä¸ªç»„ä»¶</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ItemList</span> (<span class="hljs-params">props</span>) </span>&#123;
  <span class="hljs-keyword">let</span> item = props.item
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag"><<span class="hljs-name">li</span>></span>
      <span class="hljs-tag"><<span class="hljs-name">div</span>></span>title: &#123;item.title&#125;<span class="hljs-tag"></<span class="hljs-name">div</span>></span>  
      <span class="hljs-tag"><<span class="hljs-name">div</span>></span>content: &#123;item.content&#125;<span class="hljs-tag"></<span class="hljs-name">div</span>></span>  
    <span class="hljs-tag"></<span class="hljs-name">li</span>></span></span>
  )
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<blockquote>
<p>ä¸€ä¸ªæ©™è‰²çš„æ¡†æ¡†å°±æ˜¯æˆ‘ä»¬ä¸€ä¸ª"ä¿¡æ¯"ç»„ä»¶. è¿™æ ·æˆ‘ä»¬å°±å¤ç”¨äº†è¿™ä¸ªç»„ä»¶, è€Œä¸æ˜¯è‡ªå·±å»å¤åˆ¶ä¸‰ä¸ª. å½“ç„¶ç»„ä»¶åŒ–è¿œè¿œæ¯”æˆ‘å½¢å®¹çš„è¦å¼ºå¤§, å‰©ä¸‹çš„å°±é ä½ çš„åˆ›é€ åŠ›äº†.</p>
</blockquote>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ca15617a4f754b04b876ca12027409f5~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p><strong>æ³¨:</strong> åœ¨å¾ªç¯å¤„æˆ‘åŠ å…¥äº†ä¸€ä¸ª<code>key</code>å±æ€§, ä»–çš„ä½œç”¨æ˜¯<strong>ç»™æ¯ä¸€ä¸ªç»„ä»¶ç»‘å®šä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†, è¿™æœ‰åŠ©äºreactè¯†åˆ«ç»„ä»¶.ä½†æ˜¯è¯¥æ ‡è¯†å¹¶ä¸æ˜¯è¦æ±‚åœ¨å…¨å±€ä¸‹å”¯ä¸€,è€Œæ˜¯åœ¨å…„å¼ŸèŠ‚ç‚¹ä¹‹é—´,ä¹Ÿå°±æ˜¯éå…„å¼ŸèŠ‚ç‚¹(ä¸åŒç»„ä»¶),æ˜¯å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ•°æ®ä¸­çš„idä½œä¸ºæ ‡è¯†çš„.</strong> ç›®å‰åªéœ€è¦çŸ¥é“è¿™ä¸€ç‚¹å°±å¯ä»¥äº†. æœ‰å…´è¶£å¯ä»¥æ·±å…¥äº†è§£, å®ƒçš„ä½œç”¨ä¸åŸç†æ¯”æƒ³è±¡çš„å¤æ‚</p>
<h2 data-id="heading-19">ç»„ä»¶é€šä¿¡</h2>
<blockquote>
<p>ä»è¿™é‡Œå¼€å§‹, å°†ä¼šè¯¦ç»†çš„ä¹¦å†™ä¸€ä¸ªReactç»„ä»¶, å¹¶ä¸”è¿™äº›Demoéƒ½åœ¨<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FLinkSofuny%2Freact-study-guide" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/LinkSofuny/react-study-guide" ref="nofollow noopener noreferrer">react-study-guide</a>é¡¹ç›®ä¸­æœ‰å¯¹åº”Demo, å¦‚æœçœ‹ä¸æ˜ç™½, å¯ä»¥cloneä¸€ä¸‹é¡¹ç›®è‡ªå·±è°ƒè¯•ä¸€ä¸‹, å¹¶ä¸”å¼ºçƒˆå»ºè®®ä½ è‡ªå·±æ‰‹æ•²ä¸€ä¸‹è¿™äº›Demo</p>
</blockquote>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9b9d991feaaa426985e73f6d8e98d5d6~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-20">çˆ¶å­ç»„ä»¶</h3>
<blockquote>
<p>æ ¹æ®ä¸Šé¢çš„ä¾‹å­ çˆ¶ä¼ å­ åº”è¯¥éå¸¸æ˜¾è€Œæ˜“è§äº†, å°±æ˜¯é€šè¿‡propä¼ å…¥.</p>
</blockquote>
<ul>
<li>å­ä¼ çˆ¶</li>
</ul>
<blockquote>
<p>åŒæ ·æ ¹æ®prop, çˆ¶ç»„ä»¶ä¼ å…¥ä¸€ä¸ªå‡½æ•°, å­ç»„ä»¶å†…æ‰§è¡Œçš„æ—¶å€™ä¼ å‚ç»™å®ƒ</p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js">  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Father</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;
    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">props</span>)</span> &#123;
      <span class="hljs-built_in">super</span>(props)
      <span class="hljs-built_in">this</span>.state = &#123;
        <span class="hljs-attr">info</span>: <span class="hljs-string">'è¿˜æ²¡æ¶ˆæ¯...'</span>
      &#125;
    &#125;
    getInfo = <span class="hljs-function"><span class="hljs-params">item</span> =></span> &#123;
      <span class="hljs-built_in">this</span>.setState(&#123;
        <span class="hljs-attr">info</span>: item
      &#125;)
    &#125;
    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span>&#123;
      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span>></span>
          <span class="hljs-tag"><<span class="hljs-name">p</span>></span>info: &#123;this.state.info&#125;<span class="hljs-tag"></<span class="hljs-name">p</span>></span>
          <span class="hljs-tag"><<span class="hljs-name">Clild</span> <span class="hljs-attr">getChildInfo</span>=<span class="hljs-string">&#123;this.getInfo&#125;/</span>></span>
        <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
      )
    &#125;
  &#125; 
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>å­ç»„ä»¶</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// ä¸ºäº†è®©ä½ ä¹ æƒ¯è¿™ä¸¤ç§ç»„ä»¶åˆ›å»ºæ–¹å¼, æˆ‘å°†ä¼šä»»æ„åˆ‡æ¢, å› ä¸ºä¸¤è€…åˆ‡æ¢ä½¿ç”¨å¹¶æ— è¯­æ³•å±‚é¢çš„é—®é¢˜</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Clild</span> (<span class="hljs-params">props</span>) </span>&#123;
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">emitInfo</span>(<span class="hljs-params"></span>) </span>&#123;
    props.getChildInfo(<span class="hljs-string">'æˆ‘æ˜¯å­ç»„ä»¶å‘é€è¿‡å»çš„æ•°æ®'</span>) <span class="hljs-comment">// ğŸ‘ˆ</span>
  &#125;
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag"><<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;emitInfo&#125;</span>></span>ç‚¹å‡»å‘é€æ¶ˆæ¯<span class="hljs-tag"></<span class="hljs-name">button</span>></span></span>
  )
&#125;
ReactDOM.render(<span class="xml"><span class="hljs-tag"><<span class="hljs-name">Father</span> /></span></span>, <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#test'</span>))
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-21">å…„å¼Ÿç»„ä»¶</h3>
<ul>
<li><strong>çŠ¶æ€æå‡:</strong> åŸæœ¬ä¸¤ä¸ªç»„ä»¶å„è‡ªç®¡ç†ç€è‡ªå·±çš„state, ä¾‹å¦‚å®ƒä»¬éƒ½æœ‰ä¸€ä¸ªå±æ€§å«åš<code>title</code>, ä¸ºäº†ä»–ä»¬ä¸¤ä¸ªå…±åŒä½¿ç”¨åŒä¸€ä¸ª <code>title</code> state, æˆ‘ä»¬å¯ä»¥æŠŠ <code>title</code> æå‡åˆ°çˆ¶ç»„ä»¶, ç„¶åé€šè¿‡<code>prop</code>ä¼ å…¥</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">classDiagram
Father <|-- ChildA
Father <|-- ChildB

class ChildA&#123;
state: "title: 'child'"
&#125;
class ChildB&#123;
state: "title: 'child'"
&#125;
</code></pre>
<ul>
<li>çŠ¶æ€æå‡å</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">classDiagram
Father --|> ChildA: title=&#123;this.state.title&#125;
Father --|> ChildB: title=&#123;this.state.title&#125;
Father: title 'child'
class ChildA&#123;
prop: "title: 'child'"
&#125;
class ChildB&#123;
prop: "title: 'child'"
&#125;
</code></pre>
<ul>
<li>è¿™é‡Œæˆ‘ä»…æä¾›æ€è·¯, å› ä¸ºå®ƒå’Œä¸Šé¢é‚£ä¸ªæ¡ˆä¾‹çš„å®ç°æ˜¯ä¸€è‡´çš„, å°è¯•è‡ªå·±å®ç°ä¸€ä¸‹å§!</li>
</ul>
<h3 data-id="heading-22">éäº²ç»„ä»¶</h3>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/edf523c664b04f7cb39061b8f1e667a6~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li>redux æˆ‘ä»¬ä½œä¸ºä¸€ä¸ªç« èŠ‚æ¥è®², è¿™é‡Œåªçœ‹<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fmroderick%2FPubSubJS" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/mroderick/PubSubJS" ref="nofollow noopener noreferrer">pubsub-js</a></li>
</ul>
<blockquote>
<p>$ yarn add pubsub-js</p>
</blockquote>
<h4 data-id="heading-23">pubsub</h4>
<blockquote>
<p>pubsubç”¨çš„å…¶å®ä¸å¤š, ä»…åšäº†è§£, éœ€è¦çš„æ—¶å€™å†ä½¿ç”¨å°±å¥½äº†, é€šå¸¸å…¬å…±çŠ¶æ€ç®¡ç†éƒ½æ˜¯ä½¿ç”¨Redux, è€Œéš”ä»£çš„ç»„ä»¶æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ <strong>renderProp</strong>, æˆ–è€…<strong>é«˜é˜¶ç»„ä»¶</strong>æ¥å®ç°, ç”šè‡³å¯ä»¥é€šè¿‡<strong>context</strong>, è¿™äº›æˆ‘ä»¬åç»­éƒ½ä¼šæåŠ</p>
</blockquote>
<ul>
<li>ä¸¤ä¸ªç»„ä»¶ä¹‹é—´çš„å…³ç³»( å¯ä»¥æ²¡æœ‰ä»»ä½•å…³ç³»)</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;
    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">Publish</span> /></span>
                <span class="hljs-tag"><<span class="hljs-name">Subscribe</span> /></span>
            <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
        )
    &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>å‘é€ç»„ä»¶</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">import</span> React, &#123; Component &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> PubSub <span class="hljs-keyword">from</span> <span class="hljs-string">'pubsub-js'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Publish</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;
    state = &#123;
        <span class="hljs-attr">value</span>: <span class="hljs-string">'æˆ‘æ˜¯publishä¼ ç»™Subscribeçš„æ•°æ®'</span>
    &#125;
    handleValue = <span class="hljs-function">(<span class="hljs-params">dataType, value</span>) =></span> &#123;
        PubSub.publish(<span class="hljs-string">'data of publish'</span>, <span class="hljs-built_in">this</span>.state.value) <span class="hljs-comment">// æ•°æ®å‘é€ ğŸ‘ˆ</span>
    &#125;
    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">h1</span>></span>Publish<span class="hljs-tag"></<span class="hljs-name">h1</span>></span> 
                <span class="hljs-tag"><<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.handleValue&#125;</span>></span>ç‚¹å‡»å‘é€æ•°æ®<span class="hljs-tag"></<span class="hljs-name">button</span>></span>
            <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
        )
    &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>æ¥æ”¶ç»„ä»¶</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">import</span> React, &#123; Component &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> PubSub <span class="hljs-keyword">from</span> <span class="hljs-string">'pubsub-js'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Subscribe</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;
    state = &#123;
        <span class="hljs-attr">receivedData</span>: <span class="hljs-string">''</span>
    &#125;
<span class="hljs-comment">// è®¢é˜…æ•°æ®</span>
    token = PubSub.subscribe(<span class="hljs-string">'data of publish'</span>, <span class="hljs-function">(<span class="hljs-params">msg, data</span>) =></span> &#123; <span class="hljs-comment">// ğŸ‘ˆ</span>
        <span class="hljs-built_in">this</span>.setState(&#123;
            <span class="hljs-attr">receivedData</span>: data
        &#125;)
    &#125;)
    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">h1</span>></span>Subcribe: <span class="hljs-tag"></<span class="hljs-name">h1</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">div</span>></span>&#123;this.state.receivedData&#125;<span class="hljs-tag"></<span class="hljs-name">div</span>></span>
            <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
        )
    &#125;
<span class="hljs-comment">// å¸è½½é’©å­, è®°å¾—æ¸…ç©ºæ¥æ”¶å™¨</span>
    <span class="hljs-function"><span class="hljs-title">componentWillUnmount</span>(<span class="hljs-params"></span>)</span> &#123;
        PubSub.unSubscribe(<span class="hljs-built_in">this</span>.token)
    &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-24">ç”Ÿå‘½å‘¨æœŸ</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FLinkSofuny%2Freact-study-guide%2Ftree%2Fmaster%2Fstudy-demo%2Ftest-Demo%2FReact-%25E7%25BB%2584%25E4%25BB%25B6%25E5%258C%2596%2F%25E7%2594%259F%25E5%2591%25BD%25E5%2591%25A8%25E6%259C%259F%25E9%2592%25A9%25E5%25AD%2590" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/LinkSofuny/react-study-guide/tree/master/study-demo/test-Demo/React-%E7%BB%84%E4%BB%B6%E5%8C%96/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90" ref="nofollow noopener noreferrer">ç”Ÿå‘½å‘¨æœŸDemo</a>å¯ä»¥cloneä¸‹æ¥è°ƒè¯•ä¸‹é¢è¾“å‡ºçš„ä¾‹å­,</p>
</blockquote>
<h3 data-id="heading-25">æ–°ç‰ˆ</h3>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ac7e32cd733e4221b58684dac410e9fa~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li>é¡µé¢åˆæ¬¡æ¸²æŸ“æ—¶</li>
</ul>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9bfff64477454a1798c37eecb55122b5~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li>æ•°æ®æ›´æ–°æ—¶</li>
</ul>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0bb30994e6f74695a124e966c0b6de9f~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-26">æ—§ç‰ˆ</h3>
<blockquote>
<p>æ—§ç‰ˆçš„ç”Ÿå‘½å‘¨æœŸåœ¨Demoä¸­æœ‰æ¼”ç¤º, è¿™é‡Œå°±ä¸åšå±•ç¤ºäº†</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2db5a0e2877a47d980624d6ce21269e1~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-27">æ³¨æ„</h3>
<blockquote>
<p>å³ä¾¿çˆ¶ç»„ä»¶æ›´æ–°ä¸å­ç»„ä»¶æ— ä»»ä½•å…³ç³», ä¹Ÿä¼šå¯¼è‡´å­ç»„ä»¶åˆ·æ–°, å¯ä»¥é€šè¿‡ç»§æ‰¿PureComponentè§£å†³, ä½†æ˜¯shouldComponentUpdateä¸å¯ç”¨</p>
</blockquote>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c844bc261a1e4291a83d905c0c53cc74~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>é€šè¿‡è¿™å¼ å›¾å¯ä»¥çœ‹å‡º, å°½ç®¡æˆ‘ä¼ å…¥çš„childNameæ²¡æœ‰å‘ç”Ÿä»»ä½•æ”¹å˜, ä½†æ˜¯å­ç»„ä»¶è¿˜æ˜¯å‘ç”Ÿäº†é‡æ–°æ¸²æŸ“</p>
<h3 data-id="heading-28">æ–°æ—§ç”Ÿå‘½å‘¨æœŸå¯¹æ¯”</h3>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/206fa34143cc4410a9200f94f196db07~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-29">å—æ§ä¸éå—æ§ç»„ä»¶</h2>
<blockquote>
<p>åŸæœ¬è¡¨å•å…ƒç´ æ˜¯è‡ªå·±ç»´æŠ¤è‡ªå·±çš„å€¼, å¹¶ä¸”åªèƒ½é€šè¿‡ç”¨æˆ·çš„è¾“å…¥è¿›è¡Œå€¼çš„ä¿®æ”¹. è€Œåœ¨Reactä¸­å¯å˜çŠ¶æ€çš„å€¼åªèƒ½ä¿å­˜äºstateä¸­, å¹¶ä¸”åŸºäºsetStateå»ä¿®æ”¹. ä¸¤è€…ç»“åˆ, ä½¿å¾—ç”¨æˆ·è¾“å…¥çš„å€¼ä¿å­˜è‡³stateä¸­, å¹¶åœ¨äº‹ä»¶ä¸­åŸºäºsetStateå»æ”¹å˜. ç»„ä»¶å†…éƒ¨çš„stateå°±æˆäº†å”¯ä¸€çš„æ•°æ®æº(å€¼éƒ½ä¿å­˜äºæ­¤). åŸºäºè¿™ç§å½¢å¼æ§åˆ¶çš„ç»„ä»¶å°±æˆä¸º "<strong>å—æ§ç»„ä»¶</strong>"</p>
</blockquote>
<p><strong>çœ‹ä¸æ‡‚? çœ‹gifå›¾</strong></p>
<ul>
<li>ä¸Šä¸ºå—æ§ç»„ä»¶ï¼Œ ä¸‹ä¸ºéå—æ§ç»„ä»¶</li>
</ul>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ebc55a8ad1764cd78829d1539bd8d87c~tplv-k3u1fbpfcp-watermark.image" alt="å—æ§ä¸éå—æ§.gif" loading="lazy" referrerpolicy="no-referrer"></p>
<p><strong>å‘ç°åŒºåˆ«åœ¨å“ªé‡Œæ²¡ï¼Ÿ</strong> å—æ§ç»„ä»¶çš„æ•°æ®ä¼šå®æ—¶çš„æ¸²æŸ“åˆ°é¡µé¢ä¸Šï¼Œ åŒæ­¥æ›´æ–°é¡µé¢ä¸æ•°æ®ã€‚è€Œéå—æ§åˆ™ä¸ä¼š.ä»–ä»¬ä¸¤è€…ç”¨çš„éƒ½æ˜¯changeäº‹ä»¶ï¼Œ <strong>å—æ§ç»„ä»¶ç”¨çš„æ˜¯Reactåšè¿‡ä¿®æ”¹çš„onChangeï¼Œ è€Œä¸‹æ–¹çš„æ˜¯åŸç”Ÿçš„changeäº‹ä»¶</strong></p>
<ul>
<li>è¿™å°±æ˜¯å—æ§ä¸éå—æ§çš„åŒºåˆ«ï¼Œ ç®€å•å§ã€‚å½“ç„¶è¿™åªæ˜¯ä»è§†å›¾å±‚é¢è§£é‡Šï¼Œ è¯·ä»”ç»†çœ‹ä¸Šæ–¹çš„å®šä¹‰</li>
</ul>
<p><strong>è¯·æ€è€ƒä¸€ä¸‹ï¼Œ å¦‚ä¸Šæ–¹çš„å—æ§ç»„ä»¶ï¼Œ æˆ‘è¦æ±‚ä»–ä»¬åªèƒ½é€šè¿‡ä¸€ä¸ªå¤„ç†å™¨å‡½æ•°å»å¤„ç† event.target.valueå€¼ï¼Œæ€æ ·æ‰èƒ½ä¿è¯ä¸¤è€…çš„å€¼ä¸ä¼šè¦†ç›–åˆ°åŒä¸€ä¸ªstateçŠ¶æ€ä¸Šï¼Ÿ</strong></p>
<ul>
<li>ç­”æ¡ˆåœ°å€ï¼š<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FLinkSofuny%2Freact-study-guide%2Ftree%2Fmaster%2Fstudy-demo%2Ftest-Demo%2FReact-%25E7%25BB%2584%25E4%25BB%25B6%25E5%258C%2596" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/LinkSofuny/react-study-guide/tree/master/study-demo/test-Demo/React-%E7%BB%84%E4%BB%B6%E5%8C%96" ref="nofollow noopener noreferrer">Reactç»„ä»¶åŒ–</a></li>
</ul>
<h3 data-id="heading-30">å¯è¢«åˆ›å»ºä¸ºå—æ§ç»„ä»¶è¡¨</h3>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3dab3857aa554c898050f9e08f688b55~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<hr>
<h1 data-id="heading-31">React-Router</h1>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9acc8bb933b64e7c817f718e1130fb68~tplv-k3u1fbpfcp-watermark.image" alt="React-Router.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-32">ä½¿ç”¨</h2>
<blockquote>
<p>$ yarn add react-router</p>
</blockquote>
<ul>
<li>å…¥å£æ–‡ä»¶å¼•å…¥å³å¯</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">import</span> &#123; Route,Link&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-33">HashRouterä¸BrowserRouter</h2>
<blockquote>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ ä¸æœåŠ¡å™¨åšäº¤äº’ï¼Œä½¿ç”¨çš„éƒ½æ˜¯ <strong>BrowserRouter</strong>ï¼Œ è€Œä½¿ç”¨é™æ€æ–‡ä»¶çš„æœåŠ¡å™¨çš„æƒ…å†µæ‰ç”¨ <strong>HashRouter</strong>ï¼Œå¹¶ä¸”è¿™ä¸¤è€…éƒ½è¦æ±‚åŒ…è£¹åœ¨ä½¿ç”¨è·¯ç”±çš„å¤–éƒ¨</p>
</blockquote>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8aff4a135ae745238fc5257fe3acd52c~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li>ä½¿ç”¨</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// index.js</span>
<span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span>
<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">'./App'</span>
<span class="hljs-keyword">import</span> &#123; BrowserRouter&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>

ReactDOM.render(
    <span class="xml"><span class="hljs-tag"><<span class="hljs-name">BrowserRouter</span>></span> // ğŸ‘ˆ åŒ…è£¹
        <span class="hljs-tag"><<span class="hljs-name">App</span> /></span>
    <span class="hljs-tag"></<span class="hljs-name">BrowserRouter</span>></span></span>
    , <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'root'</span>))
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-34">å¯¼èˆªLink</h2>
<blockquote>
<p>å¯¼èˆªå°±æ˜¯ç”¨æ¥è¿›è¡Œè·³è½¬çš„äº¤äº’æŒ‰é’®ï¼Œ é€šè¿‡ç‚¹å‡»å®ƒåï¼Œ å®ƒå»åŒ¹é…ç›¸åŒçš„è·¯å¾„. ç­‰ä»‹ç»å®Œlinkä¸Routeç»„ä»¶ï¼Œ æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªå®Œæ•´çš„è·¯ç”±åŒ¹é…</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7a0ae96ad9004754b75c4eaf46dcb6b7~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-35">to</h3>
<ul>
<li>å­—ç¬¦ä¸²</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><Link to=<span class="hljs-string">"/goWhere"</span> > goWhere </Link>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>å¯¹è±¡</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><Link to=&#123;&#123; 
    <span class="hljs-attr">pathname</span>: <span class="hljs-string">"/goWhere"</span>,
    <span class="hljs-attr">search</span>: <span class="hljs-string">'?id=1'</span>,
    <span class="hljs-attr">hash</span>: <span class="hljs-string">'#nav'</span>
&#125;&#125;> goWhere </Link>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-36">NavLink(å¸¦æ¿€æ´»æ•ˆæœçš„Link)</h3>
<blockquote>
<p>ä½¿ç”¨NavLinké»˜è®¤ç‚¹å‡»åç»™å½“å‰è·¯ç”±åŠ ä¸Šactiveç±»åï¼Œ å¦‚éœ€æ›´æ¢ç±»åï¼Œ ä½¿ç”¨activeClassNameæ¥å—ï¼Œ å®ƒèƒ½å¤Ÿè§¦å‘ä¸€äº›ç‚¹å‡»æ•ˆæœ</p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><NavLink activeClassName=<span class="hljs-string">"avtive-name"</span> className=<span class="hljs-string">""</span> to=<span class="hljs-string">"/home"</span> >Home</NavLink>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-37">è·¯ç”±ç»„ä»¶Route</h2>
<blockquote>
<p>å®ƒå°±æ˜¯è´Ÿè´£å±•ç¤ºä¸ä½ åœ¨Linkçš„toå±æ€§ä¸­ä¼ çš„è·¯å¾„ç›¸å¯¹åº”çš„ç»„ä»¶.</p>
</blockquote>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d47f5b55fd414613867d4771e986bb1d~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li>è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„è·¯ç”±åŒ¹é…Demo.</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// App.jsx</span>
<span class="hljs-keyword">import</span> React, &#123; Component &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> About <span class="hljs-keyword">from</span> <span class="hljs-string">'./pages/About'</span>
<span class="hljs-keyword">import</span> Home <span class="hljs-keyword">from</span> <span class="hljs-string">'./pages/Home'</span>
<span class="hljs-keyword">import</span> &#123; Link, Route&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./App.css'</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;

  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">""</span>></span>
        <span class="hljs-tag"><<span class="hljs-name">h1</span>></span>React-Demo<span class="hljs-tag"></<span class="hljs-name">h1</span>></span>
        <span class="hljs-tag"><<span class="hljs-name">nav</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'left'</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/about"</span> ></span>About<span class="hljs-tag"></<span class="hljs-name">Link</span>></span> 
            <span class="hljs-tag"><<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/home"</span> ></span>Home<span class="hljs-tag"></<span class="hljs-name">Link</span>></span>
        <span class="hljs-tag"></<span class="hljs-name">nav</span>></span>
        <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'right'</span>></span>
          &#123;/* è·¯ç”±åˆ‡æ› */&#125;
          <span class="hljs-tag"><<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">'/about'</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;About&#125;</span> /></span> &#123;/* ğŸ‘ˆå¦‚æœåŒ¹é…åˆ°/aboutåˆ™å±•ç¤º Aboutç»„ä»¶ */&#125;
          <span class="hljs-tag"><<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">'/home'</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;Home&#125;</span> /></span> &#123;/* å¦‚æœåŒ¹é…åˆ°/aboutåˆ™å±•ç¤º Homeç»„ä»¶ */&#125;
        <span class="hljs-tag"></<span class="hljs-name">div</span>></span>
      <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
    )
  &#125;
&#125;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App

<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>è¿™å°±æ˜¯ä¸€ä¸ªåŸºæœ¬çš„è·¯ç”±ç»„ä»¶çš„åŒ¹é…è¿‡ç¨‹, <strong>è¯·æ³¨æ„æˆ‘åé¢ç‚¹å‡»äº†æµè§ˆå™¨çš„å›é€€é”®, å®ƒåŒæ ·å›é€€äº†æˆ‘ä¹‹å‰çš„é¡µé¢, è¿™å°±è¯æ˜Routeçš„è·³è½¬, æ˜¯ä¼šè¢«è®°å½•åˆ°å†å²æ ˆä¸­çš„</strong></li>
</ul>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6336965832114c83ad6acabf43fd06d2~tplv-k3u1fbpfcp-watermark.image" alt="åŸºæœ¬è·¯ç”±ç»„ä»¶.gif" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li>å¦‚æœæˆ‘ä»¬æŠŠLinkæ¢æˆ NavLinkå®ƒå°±ä¼šæ ¹æ®ç±»åé«˜äº®è¢«æ¿€æ´»çš„è·¯ç”±</li>
</ul>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3efd15870d214557811c4144c9db395a~tplv-k3u1fbpfcp-watermark.image" alt="NavLink.gif" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-38">æ¸²æŸ“æ–¹å¼</h3>
<blockquote>
<p>Routeçš„ç»„ä»¶æœ‰ä¸‰ç§ä¼ é€’æ–¹å¼, <code>component</code>, <code>render</code>, <code>children</code></p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/be9d889cfeff49de8f80150b67ec8f39~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li>æ³¨æ„çœ‹Routeéƒ¨åˆ†</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">import</span> React, &#123; Component &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> About <span class="hljs-keyword">from</span> <span class="hljs-string">'./pages/About'</span>
<span class="hljs-keyword">import</span> Nav <span class="hljs-keyword">from</span> <span class="hljs-string">'./pages/Nav'</span>
<span class="hljs-keyword">import</span> &#123; Route,Link&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./App.css'</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;

  refCallback = <span class="hljs-function"><span class="hljs-params">node</span> =></span> &#123;
    <span class="hljs-built_in">console</span>.log(node)
  &#125;
  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">""</span>></span>
        <span class="hljs-tag"><<span class="hljs-name">h1</span>></span>React-Demo<span class="hljs-tag"></<span class="hljs-name">h1</span>></span>
        <span class="hljs-tag"><<span class="hljs-name">nav</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'left'</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">'/about'</span>></span>
              About
            <span class="hljs-tag"></<span class="hljs-name">Link</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/home"</span>></span>Home<span class="hljs-tag"></<span class="hljs-name">Link</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/nav"</span>></span>Nav<span class="hljs-tag"></<span class="hljs-name">Link</span>></span>
        <span class="hljs-tag"></<span class="hljs-name">nav</span>></span>
        <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'right'</span>></span>
          &#123;/* è·¯ç”±åˆ‡æ› */&#125;
          
          <span class="hljs-tag"><<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">'/about'</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;About&#125;</span> /></span> &#123;/* component */&#125;
          
          <span class="hljs-tag"><<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">'/home'</span> <span class="hljs-attr">render</span>=<span class="hljs-string">&#123;</span>              &#123;/* <span class="hljs-attr">render</span> */&#125;
            <span class="hljs-attr">props</span> =></span> (
              <span class="hljs-tag"><<span class="hljs-name">div</span> &#123;<span class="hljs-attr">...props</span>&#125; ></span>Home<span class="hljs-tag"></<span class="hljs-name">div</span>></span>
            )
          &#125; />
          
          <span class="hljs-tag"><<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">'/nav'</span> <span class="hljs-attr">children</span>=<span class="hljs-string">&#123;</span>             &#123;/* <span class="hljs-attr">children</span> */&#125;
            (&#123;<span class="hljs-attr">props</span>, <span class="hljs-attr">match</span>&#125;) =></span> (
              match ? <span class="hljs-tag"><<span class="hljs-name">Nav</span> &#123;<span class="hljs-attr">...props</span>&#125;/></span> : <span class="hljs-tag"><<span class="hljs-name">div</span>></span>é»˜è®¤<span class="hljs-tag"></<span class="hljs-name">div</span>></span>
            )
              
          &#125; />
        <span class="hljs-tag"></<span class="hljs-name">div</span>></span>
      <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
    )
  &#125;&#125;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<blockquote>
<p>æ³¨æ„çœ‹è¿™ä¸ªå›¾, æˆ‘ä»¬åœ¨<code>children</code>ä¸­æ¥å—åˆ°ä¸€ä¸ª<code>match: boolean</code>çš„å±æ€§, å®ƒç”¨æ¥åˆ¤æ–­å½“å‰æ˜¯å¦ä¸/navè·¯å¾„åŒ¹é…ä¸å¦, å¦‚ä¸åŒ¹é…, åˆ™å±•ç¤ºé»˜è®¤å†…å®¹, åŒ¹é…åˆ™å±•ç¤ºæˆ‘ä»¬ä¹¦å†™çš„å†…å®¹</p>
</blockquote>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a236aa73ec8745e9a7319f36e03c6bfe~tplv-k3u1fbpfcp-watermark.image" alt="ä¸‰ç§æ¸²æŸ“æ–¹å¼2.gif" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li>
<p>renderå±æ€§å¯ä»¥ç›´æ¥å†™ä¸€ä¸ªå†…è”ç»“æ„, ååˆ†æ–¹ä¾¿, ä¹Ÿå¯ä»¥ç›´æ¥ä¼ é€’prop</p>
</li>
<li>
<p>children åˆ™å½“ä½ éœ€è¦å±•ç¤ºé»˜è®¤å†…å®¹çš„æ—¶å€™, æ‰éœ€è¦ç”¨åˆ°å®ƒ,å…¶ä»–çš„ä¸renderç›¸ä¼¼</p>
</li>
</ul>
<h3 data-id="heading-39">switch</h3>
<blockquote>
<p>ä»…åŒ¹é…ä¸€æ¬¡, å¦‚æœåŒè·¯å¾„è·¯ç”±, ä»…åŒ¹é…ç¬¬ä¸€æ¬¡é‡åˆ°çš„(æé«˜æ•ˆç‡)</p>
</blockquote>
<ul>
<li>å‡è®¾æˆ‘ä»¬æœ‰è¿™ä¹ˆå¤šä¸ªç›¸åŒè·¯å¾„çš„è·¯ç”± é‚£ä¹ˆè·¯ç”±å°±ä¼šè¿™æ ·åŒ¹é…</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><div className=<span class="hljs-string">'right'</span>>
  &#123;<span class="hljs-comment">/* è·¯ç”±åˆ‡æ› */</span>&#125;
    <Route path=<span class="hljs-string">'/about'</span> component=&#123;About&#125; />
    <span class="xml"><span class="hljs-tag"><<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">'/home'</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;Home&#125;</span> /></span></span>
    <span class="xml"><span class="hljs-tag"><<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">'/home'</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;Home&#125;</span> /></span></span>
    <span class="xml"><span class="hljs-tag"><<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">'/home'</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;Home&#125;</span> /></span></span>
</div>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/759fae73ca1e4e40af37af1655bde54f~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li>ç»™<code>Route</code>ç»„ä»¶å¤–éƒ¨åŠ ä¸Š<code>Switch</code>æ ‡ç­¾, åˆ™å¯ä»¥é¢„é˜²è¿™ç§åŒ¹é…</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">import</span> &#123; Route, Link, Switch &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>

<div className=<span class="hljs-string">'right'</span>>
  &#123;<span class="hljs-comment">/* è·¯ç”±åˆ‡æ› */</span>&#125;
  <Switch>
    <span class="xml"><span class="hljs-tag"><<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">'/about'</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;About&#125;</span> /></span></span>
    <span class="xml"><span class="hljs-tag"><<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">'/home'</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;Home&#125;</span> /></span></span>  &#123;<span class="hljs-comment">/* å®ŒæˆåŒ¹é… ç»ˆæ­¢ */</span>&#125;
    <Route path=<span class="hljs-string">'/home'</span> component=&#123;Home&#125; />
    <span class="xml"><span class="hljs-tag"><<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">'/home'</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;Home&#125;</span> /></span></span>
  </Switch>
</div>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/18fe0a532735449ebb5cff1c076a1d39~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-40">æ¨¡ç³Šä¸ä¸¥æ ¼åŒ¹é…</h3>
<blockquote>
<p>é»˜è®¤æƒ…å†µä¸‹ä¸ºæ¨¡ç³ŠåŒ¹é…ï¼Œ ä¹Ÿå°±æ˜¯è·¯å¾„å¦‚æœä¸ºå¤šå±‚çš„ï¼Œä»…åŒ¹é…åˆ°ç¬¬ä¸€å±‚å°±ä¼šæ¸²æŸ“</p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;
  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">""</span>></span>
        <span class="hljs-tag"><<span class="hljs-name">h1</span>></span>React-Demo<span class="hljs-tag"></<span class="hljs-name">h1</span>></span>
        <span class="hljs-tag"><<span class="hljs-name">nav</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'left'</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">'/about'</span>></span>
              About
            <span class="hljs-tag"></<span class="hljs-name">Link</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/home"</span>></span>Home<span class="hljs-tag"></<span class="hljs-name">Link</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/home/a"</span> ></span>HomeA<span class="hljs-tag"></<span class="hljs-name">Link</span>></span>
        <span class="hljs-tag"></<span class="hljs-name">nav</span>></span>
        <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'right'</span>></span>
          &#123;/* è·¯ç”±åˆ‡æ› */&#125;
            <span class="hljs-tag"><<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">'/about'</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;About&#125;</span> /></span>
            <span class="hljs-tag"><<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">'/home'</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;Home&#125;</span> /></span>
            <span class="hljs-tag"><<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">'/home/a'</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;HomeA&#125;</span> /></span> &#123;/*homeå­è·¯ç”±*/&#125;
        <span class="hljs-tag"></<span class="hljs-name">div</span>></span>
      <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
    )
  &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>ç”±äº Router çš„æ¨¡ç³ŠåŒ¹é…æœºåˆ¶, å¦‚æœæˆ‘ä»¬ç‚¹å‡»home/a ä¸Šæ–¹çš„homeç»„ä»¶ä¹Ÿä¼šè¢«åŒ¹é…åˆ°</li>
</ul>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d051020d91304b21951cd7f9775b9926~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<pre><code class="hljs language-js copyable" lang="js"><div className=<span class="hljs-string">'right'</span>>
      &#123;<span class="hljs-comment">/* è·¯ç”±åˆ‡æ› */</span>&#125;
    <Route path=<span class="hljs-string">'/about'</span> component=&#123;About&#125; />
    <span class="xml"><span class="hljs-tag"><<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">'/home'</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;Home&#125;</span> <span class="hljs-attr">exact</span> /></span></span> &#123;<span class="hljs-comment">/*è¦æ±‚ä¸¥æ ¼åŒ¹é…*/</span>&#125;
    <Route path=<span class="hljs-string">'/home/a'</span> component=&#123;HomeA&#125; /> &#123;<span class="hljs-comment">/*homeå­è·¯ç”±*/</span>&#125;
</div>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>å¦‚æœåŠ ä¸Š ç»™å¯¹åº”çš„è·¯ç”±åŠ ä¸Š exact å±æ€§, å°±èƒ½é¢„é˜²è¿™ç§æƒ…å†µ</li>
</ul>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ac4ee401221f4beaae07dc1f70cbf23e~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-41">ä¼ å€¼</h2>
<blockquote>
<p>æ€»çš„æ¥è¯´ï¼Œ é€šè¿‡paramsçš„å½¢å¼ï¼Œ Reactä¼šä»è·¯å¾„ä¸­è§£æå‡ºå¯¹åº”å‚æ•°</p>
</blockquote>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f3fc29abf0304402bbec4ac42ce54cb3~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-42">params</h3>
<blockquote>
<p>æ˜æ–‡ä¼ è¾“, ä½†æ˜¯åˆ·æ–°å‚æ•°ä¸æ¶ˆå¤±</p>
</blockquote>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0e1d64b47cc8410f832dc3fbeac39083~tplv-k3u1fbpfcp-watermark.image" alt="è·¯ç”±ä¼ å‚_params.gif" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li>å°†è¦<strong>ä¼ é€’çš„å€¼</strong>å†™åˆ°è·¯å¾„ä¸Š</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><Link to=&#123;<span class="hljs-string">`/home/cHome/detail/<span class="hljs-subst">$&#123;item.id&#125;</span>/<span class="hljs-subst">$&#123;item.title&#125;</span>`</span>&#125;>&#123;item.title&#125;</Link>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>å°†è¦ä¼ é€’çš„å€¼åŠ¨æ€å†™åˆ°è·¯å¾„ä¸Š</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><Route path=<span class="hljs-string">'/home/cHome/detail/:id/:title'</span> component=&#123;Detail&#125; />
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>å†ä»propsä¸­ç»“æ„å‡ºæ¥</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Detail</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;
  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
      <span class="hljs-keyword">const</span> &#123; id, title &#125; = <span class="hljs-built_in">this</span>.props.match.params
      <span class="hljs-keyword">let</span> content = msData.find( <span class="hljs-function"><span class="hljs-params">item</span> =></span> &#123;
          <span class="hljs-keyword">return</span> item.id === id
      &#125;)
      <span class="hljs-keyword">return</span> (
          <span class="xml"><span class="hljs-tag"><<span class="hljs-name">ul</span>></span>
              <span class="hljs-tag"><<span class="hljs-name">li</span>></span>content: &#123;content.title&#125;<span class="hljs-tag"></<span class="hljs-name">li</span>></span>
              <span class="hljs-tag"><<span class="hljs-name">li</span>></span>id: &#123;id&#125;<span class="hljs-tag"></<span class="hljs-name">li</span>></span>
              <span class="hljs-tag"><<span class="hljs-name">li</span>></span>title: &#123;title&#125;<span class="hljs-tag"></<span class="hljs-name">li</span>></span>
          <span class="hljs-tag"></<span class="hljs-name">ul</span>></span></span>
      )
  &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-43">search</h3>
<blockquote>
<p>é—®å·ä¼ å‚çš„å½¢å¼ä¼ é€’å€¼ï¼Œ å¹¶ä¸”æ— éœ€åœ¨Routeçš„pathä¸­æ ‡æ˜é”®,  åŒæ ·åˆ·æ–°ä¸ä¼šä¸¢å¤±å‚æ•°</p>
</blockquote>
<ul>
<li>ä¼ å€¼</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><Link to=&#123;<span class="hljs-string">`/home/cHome/detail/?id=<span class="hljs-subst">$&#123;item.id&#125;</span>&title=<span class="hljs-subst">$&#123;item.title&#125;</span>`</span>&#125;>&#123;item.title&#125;</Link>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>æ¥æ”¶(urlencoded)</li>
</ul>
<blockquote>
<p>$ yarn add qs</p>
<blockquote>
<p>ä¸€ä¸ªç”¨äºè§£æurlencodedæ ¼å¼çš„ä¸‰æ–¹åº“</p>
</blockquote>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// in component of Route </span>
<span class="hljs-keyword">const</span> &#123;search&#125; = <span class="hljs-built_in">this</span>.props.location 
<span class="hljs-comment">// æ¥å—å½¢å¼ä¸ºæœªå¤„ç†çš„å­—ç¬¦ä¸² ?id=xx&title=xx </span>
<span class="hljs-keyword">const</span> &#123; id, title &#125; = qs.parse(search.substring(<span class="hljs-number">1</span>))
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-44">query</h3>
<blockquote>
<p>éæ˜æ–‡ä¼ è¾“, å¹¶ä¸”åˆ·æ–°äº†å‚æ•°ä¼šä¸¢å¤±</p>
</blockquote>
<ul>
<li>ä¼ å…¥æ•°æ®, å¹¶ä¸”æ— éœ€åœ¨Routeä¸­å®šä¹‰</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><Link to=&#123;&#123;<span class="hljs-attr">pathname</span>:<span class="hljs-string">'/home'</span>, <span class="hljs-attr">query</span>: totalData&#125;&#125;>Home</Link>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>æ¥æ”¶å‚æ•°</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Home</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;
  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.props.location)
      <span class="hljs-keyword">const</span> &#123;title, age&#125; = <span class="hljs-built_in">this</span>.props.location.query
      <span class="hljs-keyword">return</span> (
          <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span>></span>
              Home: &#123;title&#125;
              age: &#123;age&#125;
          <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
      )
  &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li><strong>åˆ·æ–°åæ•°æ®ä¸¢å¤±</strong></li>
</ul>
<blockquote>
<p>å½“è®©ä½ éœ€è¦è‡ªå·±åšä¸€ç‚¹å¤„ç†, é˜²æ­¢é”™è¯¯è”“å»¶, æˆ‘ä»¬ä¼šåœ¨ErrorBoundaryè®²åˆ°å¦‚ä½•é¢„é˜²å­ç»„ä»¶çš„é”™è¯¯è”“å»¶åˆ°çˆ¶ç»„ä»¶</p>
</blockquote>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0ef67926864445bc9052e03ffce361f3~tplv-k3u1fbpfcp-watermark.image" alt="è·¯ç”±ä¼ å‚_qeury.gif" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-45">state</h3>
<blockquote>
<p>éæ˜æ–‡ä¼ è¾“, å¹¶ä¸”åˆ·æ–°åæ•°æ®ä¸ä¸¢å¤±, ä½¿ç”¨æ–¹å¼è·Ÿqueryç›¸åŒ, åªä¸è¿‡é”®åæ¢æˆäº† state</p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><Link to=&#123;&#123;<span class="hljs-attr">pathname</span>:<span class="hljs-string">'/home'</span>, <span class="hljs-attr">query</span>: totalData&#125;&#125;>Home</Link>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Home</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;
  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
      <span class="hljs-keyword">const</span> &#123; state &#125; = <span class="hljs-built_in">this</span>.props.location
      <span class="hljs-keyword">return</span> (
          <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span>></span>
              Home:&#123;state&#125;
          <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
      )
  &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>å››ç§ä¼ å‚æ–¹å¼æ„Ÿè§‰éƒ½æœ‰è‡ªå·±çš„ä½¿ç”¨åœºæ™¯, æ€ä¹ˆä½¿ç”¨å°±çœ‹ä¸ªäººäº†</li>
</ul>
<h2 data-id="heading-46">ç¼–ç¨‹å¼è·¯ç”±</h2>
<blockquote>
<p>ç¼–ç¨‹å¼è·¯ç”±çš„ä½¿ç”¨æ–¹å¼éå¸¸ç®€å•, å°±ç›¸å½“äºä½ æ— éœ€å»å†™ä¸€ä¸ªLinkç»„ä»¶, è€Œæ˜¯ç›´æ¥é€šè¿‡å‡½æ•°å°±èƒ½å¤Ÿè®©é¡µé¢å®ç°è·³è½¬.</p>
</blockquote>
<ul>
<li>å¦‚æœä½ ä½¿ç”¨è¿‡å°ç¨‹åºæˆ–è€…uniappå°±çŸ¥é“, è¿™ä¸ªå°±ç±»ä¼¼äº navigateTo(&#123;&#125;)</li>
</ul>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d279f27e7e7041ffbec718b8fe5f3731~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li>è¿™é‡Œçš„ä½¿ç”¨éå¸¸ç®€å•, å°±ä¸åšæ¼”ç¤ºäº†</li>
</ul>
<p>æ·»åŠ ä¸€ä¸ª<strong>äº‹ä»¶å¯¹è±¡</strong>, å½“ç‚¹å‡»è¿™ä¸ªæŒ‰é’®æˆ‘ä»¬å°±å®ç°è·³è½¬</p>
<pre><code class="hljs language-js copyable" lang="js"><button onClick=&#123;<span class="hljs-function">() =></span> <span class="hljs-built_in">this</span>.push(item.title, item.id)&#125;>push</button>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<pre><code class="hljs language-js copyable" lang="js">push (title, id) &#123;
  <span class="hljs-built_in">this</span>.props.history.push(<span class="hljs-string">`/home/cHome/detail`</span>,&#123;title, id&#125;)
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>è¿™å°±å®Œæˆäº†ä¸€æ¬¡è·³è½¬</p>
<p><code>push</code>æ„ä¸º, å¾€æµè§ˆå™¨å†å²æ ˆé¡¶æ”¾å…¥ä¸€ä¸ªå†å²è®°å½•, ç„¶åè·³è½¬.</p>
<p><code>replace</code>åˆ™æ˜¯, æ›¿ä»£æ‰å½“å‰çš„æ ˆé¡¶çš„ä¸€ä¸ªè®°å½•, æ¢æˆå½“å‰çš„. ä¹Ÿå°±æ˜¯è¯´, æŒ‰å›é€€é”®æ˜¯å›ä¸åˆ°è·³è½¬å‰çš„é¡µé¢çš„.</p>
<p><code>forward</code> å°±æ˜¯æµè§ˆå™¨è·³è½¬é¡µé¢çš„å‘å‰é”®</p>
<p><code>back</code> å°±æ˜¯æµè§ˆå™¨è·³è½¬é¡µé¢çš„å›é€€é”®</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2b900bb119ab408fbef720f54bb18efc~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-47">è·¯ç”±æ‡’åŠ è½½ï¼ˆLazy-loadï¼‰</h2>
<blockquote>
<p>ä¸å›¾ç‰‡æ‡’åŠ è½½åŒç†, å°±æ˜¯åœ¨ç”¨åˆ°äº†è¿™ä¸ªè·¯ç”±ç»„ä»¶çš„æ—¶å€™, æˆ‘ä»¬æ‰å»è¿›è¡ŒåŠ è½½, è¿™æ˜¯å¾ˆæœ‰å¿…è¦çš„ä¼˜åŒ–æ‰‹æ®µ, å¯ä»¥æé«˜å½“å‰é¡µé¢çš„æ¸²æŸ“é€Ÿåº¦, å…·ä½“æ¡ˆä¾‹è¯·æŸ¥çœ‹é¡¹ç›®</p>
</blockquote>
<h3 data-id="heading-48">lazy</h3>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">import</span> React, &#123; Component, lazy, Suspense &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-comment">// é€šè¿‡lazyå‡½æ•°å¼•å…¥ ç»„ä»¶</span>
<span class="hljs-keyword">const</span> About = lazy(<span class="hljs-function">() =></span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./pages/About'</span>))
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-49">Suspense</h3>
<blockquote>
<p>ä»–å¯ä»¥æ¥å—ä¸€ä¸ªfallbackå±æ€§çš„ç»„ä»¶ï¼Œ ç”¨äºäº§ç”Ÿè¿‡æ¸¡æ•ˆæœ</p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><div className=<span class="hljs-string">'right'</span>> 
    &#123;<span class="hljs-comment">/* è·¯ç”±åˆ‡æ› */</span>&#125; 
    <Suspense fallback=&#123;<span class="xml"><span class="hljs-tag"><<span class="hljs-name">Loading</span> /></span></span>&#125;>  &#123;<span class="hljs-comment">/*è¿‡æ¸¡æ•ˆæœç»„ä»¶*/</span>&#125;
        <Route path=<span class="hljs-string">'/about'</span> component=&#123;About&#125; /> 
        <span class="xml"><span class="hljs-tag"><<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">'/home'</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;Home&#125;</span> /></span></span> 
    </Suspense> 
</div>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<hr>
<h1 data-id="heading-50">Redux</h1>
<blockquote>
<p>å…¨å±€çŠ¶æ€ç®¡ç†ï¼Œ æ³¨å†Œè‡³Reduxçš„çŠ¶æ€å¯ä»¥åœ¨ä»»ä½•ç»„ä»¶å†…ç›´æ¥è·å–ã€‚Reduxçš„ä½¿ç”¨ç›¸å¯¹æ¯”è¾ƒå¤æ‚, æˆ‘ååˆ†å»ºè®®æ‚¨å­¦ä¹ äº†æ¦‚å¿µ, è¦é€šè¿‡Demoçœ‹çœ‹æ•´ä¸ªreduxæ˜¯æ€ä¹ˆä¸²èµ·æ¥çš„</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b25488999b6347e0b424fcb0a6b5fa84~tplv-k3u1fbpfcp-watermark.image" alt="Redux.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-51">æ€ä¹ˆç†è§£Redux</h2>
<blockquote>
<p>å¯¹äºè¿™äº›æ¨¡å—çš„ç¿»è¯‘ï¼Œ çº¯ç²¹ä¸ªäººç†è§£ï¼Œ è€Œéå®˜æ–¹ç¿»è¯‘</p>
</blockquote>
<ul>
<li><strong>Actionsï¼ˆæŒ‡ä»¤ï¼‰</strong></li>
<li><strong>Reducersï¼ˆæ‰§è¡Œï¼‰</strong></li>
<li><strong>Store(å­˜å‚¨åŠ¨ä½œæ‰§è¡Œçš„ç»“æœ)</strong></li>
</ul>
<p><strong>æ€ä¹ˆç†è§£ï¼Ÿ</strong></p>
<blockquote>
<p>å¯ä»¥æƒ³è±¡ä½ åœ¨é“¶è¡ŒATMå­˜é’±çš„è¿‡ç¨‹ï¼Œ ä½ ï¼ˆ<code>Components</code>ï¼‰æŒ‰äº†å­˜æ¬¾çš„æŒ‡ä»¤ï¼Œ å¹¶æŠŠé’±ï¼ˆ<code>data: æ•°æ®</code>ï¼‰æ”¾å…¥æœºå­ä¸­ã€‚ATMï¼ˆ<code>Store</code>ï¼‰æ¥æ”¶åˆ°ä½ è¿™ä¸ªæŒ‡ä»¤ï¼ˆ<code>Actions</code>ï¼‰ä¼šå»åœ¨ä½ çš„å­˜æ¬¾ä¸­åŠ ä¸Šä¸€ç¬”é’±ï¼ˆ<code>Reducers</code>ï¼‰ï¼Œ ä¹Ÿå°±æ˜¯æ‰§è¡Œä½ çš„æŒ‡ä»¤</p>
</blockquote>
<ul>
<li>
<p>ä½ æ— æ³•ç›´æ¥å–é’±ï¼Œ å­˜é’±ï¼Œ éœ€è¦ç»è¿‡ATMæ“ä½œï¼ˆæ— æ³•ç›´æ¥ä»store[propName]æ‹¿åˆ°å±æ€§ï¼Œ å¿…é¡»é€šè¿‡<code>getState()</code></p>
</li>
<li>
<p>ä½ å¯ä»¥åœ¨å…¨å›½å„åœ°çš„ATMä¸­æ‹¿åˆ°ä½ çš„é’±ï¼ˆ<strong>å…¬å…±çŠ¶æ€</strong>)</p>
</li>
</ul>
<h2 data-id="heading-52">ä½¿ç”¨</h2>
<blockquote>
<p>æ ¹æ®æˆ‘ä»¬åœ¨é“¶è¡Œå­˜é’±çš„è¿‡ç¨‹ï¼Œ æˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªå®Œæ•´çš„Reduxæµç¨‹æ˜¯æ€æ ·çš„</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3078a5f2c021429aa6be3db788b91e12~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-53">Store(å­˜å‚¨åŠ¨ä½œæ‰§è¡Œçš„ç»“æœ)</h2>
<blockquote>
<p>åœ¨ä½¿ç”¨Reduxï¼Œ ä½ éœ€è¦åˆ›å»ºä¸€ä¸ªstoreå®ä¾‹ï¼Œ ç”¨æ¥åˆ†å‘ï¼Œ å­˜å‚¨æ•°æ®ã€‚ ä¹Ÿå°±æ˜¯è¦æœ‰ä¸€ä¸ªstore.jsçš„å…¥å£æ–‡ä»¶</p>
</blockquote>
<ul>
<li>è¿™ä¸€æ­¥å°±å¥½æ¯”ï¼Œ ä½ åœ¨é¢„è®¾ææ¬¾æœºçš„æ“ä½œï¼Œ <strong>countReducer</strong> å°±æ˜¯é¢„è®¾æ–‡ä»¶ï¼Œ å­˜å…¥ <strong>store</strong> ä¸­å‘Šè¯‰å®ƒï¼Œ å®ƒä¼šæœ‰å“ªäº›æ“ä½œã€‚</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// store.js </span>
<span class="hljs-keyword">import</span> &#123; createStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">"redux"</span>; 
<span class="hljs-comment">// éœ€è¦åœ¨ä¸€å¼€å§‹å°±è®©ReduxçŸ¥é“è¦æ€æ ·æ‰§è¡Œä½ çš„æŒ‡ä»¤</span>
<span class="hljs-keyword">import</span> countReducer <span class="hljs-keyword">from</span> <span class="hljs-string">'./count-reducers'</span> 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> createStore(countReducer)
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-54">APIs</h2>
<ul>
<li><strong>store.dispatch(action)</strong> æ‹¿åˆ°ä¸€ä¸ªåŠ¨ä½œï¼Œé€šçŸ¥Reduceræ‰§è¡Œ</li>
</ul>
<blockquote>
<p>Actionsæˆ‘ä»¬åœ¨ä»‹ç»è¯¥</p>
</blockquote>
<ul>
<li><strong>store.subscribe</strong> ç›‘å¬Stateï¼Œ å¦‚æœStateå‘ç”Ÿå˜åŒ–ï¼Œ ç«‹å³æ‰§è¡Œè¯¥å‡½æ•°, ç”¨äºé€šçŸ¥è§†å›¾å±‚æ›´æ–°ï¼ˆé‡æ–°æ¸²æŸ“ï¼‰</li>
</ul>
<p>ç”±äºæˆ‘ä»¬æ›´æ”¹çŠ¶æ€åªæ”¹å˜äº†, storeä¸­çš„çŠ¶æ€, è¿™å¯èƒ½å¯¼è‡´é¡µé¢ä¸­æœ‰äº›è§†å›¾åº”è¯¥åŸºäºæ•°æ®å‘ç”Ÿæ”¹å˜, ä½†æ˜¯æ²¡æœ‰å‘èµ·, ä»¥ä¸‹çš„ç›‘å¬æ–¹å¼å°±ååˆ†é‡è¦çš„</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// é¡¹ç›®å…¥å£æ–‡ä»¶</span>
<span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> ReactDom <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span>
<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">'./App'</span>
<span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">'./redux/store'</span>


ReactDom.render(<span class="xml"><span class="hljs-tag"><<span class="hljs-name">App</span> /></span></span>, <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'root'</span>))
store.subscribe( <span class="hljs-function">() =></span> &#123;
    ReactDom.render(<span class="xml"><span class="hljs-tag"><<span class="hljs-name">App</span> /></span></span>, <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'root'</span>))
&#125;)
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li><strong>store.getState</strong> å¤–éƒ¨æ˜¯æ— æ³•ç›´æ¥è·å–çŠ¶æ€ï¼ˆstateï¼‰çš„ï¼Œ éœ€è¦é€šè¿‡å‡½æ•°store.getState()è·å–</li>
</ul>
<hr>
<blockquote>
<p>é€šå¸¸æ¥è¯´, åœ¨ä¸€ä¸ªä¼ä¸šé¡¹ç›®ä¸­, store, actions éƒ½æ˜¯å•ç‹¬å†™æˆä¸€ä¸ªæ–‡ä»¶çš„, æ‰€ä»¥æˆ‘ä»¬ä¸‹åˆ—çš„ä»£ç , ä¹Ÿä»¿ç…§è¿™ä¸ªä¹ æƒ¯</p>
</blockquote>
<h2 data-id="heading-55">Actionsï¼ˆæŒ‡ä»¤ï¼‰</h2>
<ul>
<li>ä¸€ä¸ªåˆæ³•çš„ Action å¯¹è±¡ï¼š</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js">action = &#123;
    <span class="hljs-attr">type</span>: <span class="hljs-string">'whatWillDo'</span>,
    <span class="hljs-attr">payload</span>: data
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-56">æŒ‡ä»¤æ–‡ä»¶</h3>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// Action.js reduxçš„åŠ¨ä½œï¼Œ å•ç‹¬ä¸€ä¸ªæ–‡ä»¶ç®¡ç† </span>
<span class="hljs-keyword">import</span> &#123;INCREMENT, DECREMENT&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'./constant'</span> 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> incrementAction = <span class="hljs-function"><span class="hljs-params">data</span> =></span> (&#123;<span class="hljs-attr">type</span>: INCREMENT, data&#125;) 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> decrementAction = <span class="hljs-function"><span class="hljs-params">data</span> =></span> (&#123;<span class="hljs-attr">type</span>: DECREMENT, data&#125;)
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-57">ä½¿ç”¨</h3>
<blockquote>
<p><code>Actions</code> éœ€è¦é€šè¿‡ <strong>store</strong> æš´éœ²çš„<code>dispatchï¼ˆ[object]ï¼‰</code>è¿›è¡Œåˆ†å‘</p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">import</span> React, &#123; Component &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span> 
<span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">'../../redux/store'</span> 
<span class="hljs-keyword">import</span> &#123; incrementAction, decrementAction&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'../../redux/count_action'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Header</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123; 
    increament = <span class="hljs-function">(<span class="hljs-params">value</span>) =></span> &#123; 
        store.dispatch(incrementAction(value))
    &#125; 
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>å½“ç„¶å¦‚æœä½ ä¸æ„¿æ„åˆ›å»ºActionsæ–‡ä»¶ï¼Œ ä¹Ÿå¯ä»¥è¿™æ ·</li>
</ul>
<blockquote>
<p>ä½ ä¼ å…¥çš„Actionå¯¹è±¡ï¼Œ åªè¦æ˜¯åˆæ³•çš„å°±èƒ½è¢«æ¥å—</p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Header</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123; 
    increament = <span class="hljs-function">(<span class="hljs-params">value</span>) =></span> &#123; 
        store.dispatch(&#123;<span class="hljs-attr">type</span>: <span class="hljs-string">'increament'</span>, <span class="hljs-attr">data</span>: value&#125;)
    &#125; 
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-58">å¼‚æ­¥çš„Action</h3>
<blockquote>
<p>ç»„ä»¶éœ€è¦é€šè¿‡</p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// å¼‚æ­¥</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> addActionAsync = <span class="hljs-function">(<span class="hljs-params">data, time</span>) =></span> &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">dispatch</span>) =></span> &#123;
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =></span> &#123;
            dispatch(&#123;<span class="hljs-attr">type</span>: <span class="hljs-string">'add'</span>, <span class="hljs-attr">payload</span>: data&#125;)
        &#125;, time)
    &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>è¿™é‡Œæˆ‘ä»¬è¿”å›äº†ä¸€ä¸ªå‡½æ•°ï¼Œ å¹¶éå¸¸è§„çš„<strong>Actionå¯¹è±¡</strong>ï¼Œ æ­£å¸¸ä½¿ç”¨è¿™ä¸ª<code>Action</code>æ˜¯ä¼šæŠ¥é”™çš„ï¼Œ å› ä¸º Redux çš„<code>Reducers</code>, ä¸èƒ½æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸º<code>Action</code></p>
<ul>
<li><strong>æ€ä¹ˆè§£å†³?</strong></li>
</ul>
<blockquote>
<p>æˆ‘ä»¬éœ€è¦åœ¨store.jsä¸­ä½¿ç”¨ä¸€ä¸ªå«thunkçš„ä¸­é—´ä»¶</p>
<blockquote>
<p>$ yarn add redux-thunk</p>
</blockquote>
</blockquote>
<p>åœ¨storeä¸­ä½¿ç”¨ä¸­é—´ä»¶, éœ€è¦ä¼ å…¥ä¸€ä¸ªç”± Redux æä¾›çš„å‡½æ•° <code>applyMiddleware()</code></p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">import</span> &#123; createStore, applyMiddleware &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">"redux"</span>; 
<span class="hljs-keyword">import</span> countReducer <span class="hljs-keyword">from</span> <span class="hljs-string">'./count-reducers'</span> 
<span class="hljs-keyword">import</span> thunk <span class="hljs-keyword">from</span> <span class="hljs-string">'redux-thunk'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> createStore(countReducer, applyMiddleware(thunk))
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-59">Reducersï¼ˆæ‰§è¡Œï¼‰</h2>
<blockquote>
<p><strong>Reducers</strong> ä»åå­—æ¥çœ‹åº”è¯¥ç¿»è¯‘æˆ<strong>ç´¯åŠ å™¨</strong>, å®ƒæ˜¯åŸºäºå‰çŠ¶æ€è¿›è¡ŒåŠ å·¥å¾—åˆ°ç›®å‰çš„çŠ¶æ€</p>
</blockquote>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/09bef74bb749483e86fe420bf37ed1de~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-60">è¦æ±‚</h3>
<ul>
<li>
<p>åœ¨store.jsæ–‡ä»¶ä¸­ï¼Œéœ€è¦é€šè¿‡createStore()ä¼ å…¥reducersï¼Œ å‘Šè¯‰reduxï¼Œå½“æ¥æ”¶åˆ°ä»€ä¹ˆåŠ¨ä½œæŒ‡ä»¤çš„æ—¶å€™ï¼Œ éœ€è¦åšä»€ä¹ˆäº‹æƒ…</p>
</li>
<li>
<p>è¦æ±‚ reducers æ˜¯ä¸€ä¸ªçº¯å‡½æ•°</p>
</li>
</ul>
<h3 data-id="heading-61">ä½¿ç”¨</h3>
<ul>
<li>å®šä¹‰ä¸€ä¸ªåˆå§‹çŠ¶æ€, åœ¨ä¼ å…¥Reucerå‡½æ•°çš„æ—¶å€™, é¡¹ç›®åˆå§‹åŒ–å°±ä¼šå®šä¹‰ä¸€ä¸ªç›¸å…³çš„ state</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">const</span> initState = <span class="hljs-number">0</span> 

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addReudcer</span> (<span class="hljs-params">prevState = initState, action</span>) </span>&#123;
    <span class="hljs-keyword">const</span> &#123; type, payload &#125; = action
    <span class="hljs-keyword">switch</span> (type) &#123;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'add'</span>:
            <span class="hljs-keyword">return</span> prevState + payload
        <span class="hljs-attr">default</span>:
            <span class="hljs-keyword">return</span> prevState <span class="hljs-comment">// ï¼ˆåˆå§‹åŒ–çš„æ—¶å€™ï¼Œæ— æŒ‡ä»¤ï¼Œ è¿”å›é»˜è®¤å€¼ï¼‰</span>
    &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>åœ¨<code>store.js</code>ä¸­å®šä¹‰</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">import</span> &#123; createStore, applyMiddleware  &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">"redux"</span>;
<span class="hljs-keyword">import</span> addReducer <span class="hljs-keyword">from</span> <span class="hljs-string">"./reducers/addReducer"</span>;
<span class="hljs-keyword">import</span> thunk <span class="hljs-keyword">from</span> <span class="hljs-string">'redux-thunk'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> createStore(addReducer, applyMiddleware(thunk))
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-62">é›†ä¸­æš´éœ²</h3>
<blockquote>
<p>å¦‚æœä½ ç†Ÿæ‚‰ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fvuex.vuejs.org%2Fzh%2Fguide%2Fstate.html" target="_blank" rel="nofollow noopener noreferrer" title="https://vuex.vuejs.org/zh/guide/state.html" ref="nofollow noopener noreferrer">VueX-State</a> ä½ è‚¯å®šå¾ˆå¥‡æ€ª, ä¸ºä»€ä¹ˆæ²¡æœ‰ç±»ä¼¼äº <code>state.js</code> ç®¡ç†å…¨å±€çŠ¶æ€çš„æ–‡ä»¶</p>
</blockquote>
<p>å•ç‹¬ä½¿ç”¨æš´éœ²ä¸€ä¸ª Reducer çš„æ—¶å€™, <strong>å…¶è¿”å›å€¼å°±æ˜¯å½“å‰çš„state</strong>, å› ä¸º state å†…å°±è¿™ä¹ˆä¸€ä¸ªå€¼.</p>
<p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„ Reducer ç‰¹åˆ«å¤š, é€šå¸¸å°±éœ€è¦é›†ä¸­æš´éœ², å¹¶ä¸”ç»™æ¯ä¸€ä¸ª Reducer çš„è¿”å›å€¼å®šä¹‰ä¸€ä¸ª<strong>é”®å</strong>.</p>
<ul>
<li>é›†ä¸­ Reducer çš„æ–‡ä»¶</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// allReducers.js</span>
<span class="hljs-keyword">import</span> &#123; combineReducers &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">"redux"</span>;
<span class="hljs-keyword">import</span> addReudcer <span class="hljs-keyword">from</span> <span class="hljs-string">"./addReducer"</span>;
<span class="hljs-comment">// åˆå¹¶æ‰€æœ‰çš„reducers</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> combineReducers(&#123;
    <span class="hljs-attr">add</span>: addReudcer
&#125;)
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>ä»¥åŒæ ·çš„æ–¹å¼ä¼ å…¥<code>allReducers</code></li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">import</span> &#123; createStore, applyMiddleware  &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">"redux"</span>;
<span class="hljs-keyword">import</span> allReducers <span class="hljs-keyword">from</span> <span class="hljs-string">"./reducers/allReducers"</span>;
<span class="hljs-keyword">import</span> thunk <span class="hljs-keyword">from</span> <span class="hljs-string">'redux-thunk'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> createStore(allReducers, applyMiddleware(thunk))
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<hr>
<p><strong>è¯·å…ˆçœ‹ä¸€ä¸‹<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FLinkSofuny%2Freact-study-guide%2Ftree%2Fmaster%2Fstudy-demo%2Ftest-Demo%2FRedux%2Fsrc_1.%25E6%259C%2580%25E7%25AE%2580%25E5%258D%2595%25E7%259A%2584redux_Demo" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/LinkSofuny/react-study-guide/tree/master/study-demo/test-Demo/Redux/src_1.%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84redux_Demo" ref="nofollow noopener noreferrer"> æœ€ç®€å•çš„redux_Demo </a>çš„ä»£ç </strong>, è¿™é‡Œæˆ‘ä»¬ç›´æ¥åœ¨UIç»„ä»¶å†…ä½¿ç”¨äº†Redux, ä½†å®é™…ä¸Šè¿™å¹¶<strong>ä¸åˆè§„èŒƒ</strong></p>
<h2 data-id="heading-63">connectï¼ˆè§„èŒƒï¼‰</h2>
<blockquote>
<p>æ­£å¸¸æƒ…å†µä¸‹ä½¿ç”¨Reduxè¦æ±‚: æˆ‘ä»¬è¦å°†å¯¹ store çš„ <code>state</code> åšçš„æ“ä½œ, å‰¥ç¦»å‡ºUIç»„ä»¶, é€šè¿‡propçš„å½¢å¼ä¼ å…¥æ“ä½œå‡½æ•°,ä»¥åŠçŠ¶æ€å€¼. <strong>UIç»„ä»¶åªè´Ÿè´£å±•ç¤º</strong></p>
</blockquote>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/43b7d97ff5914181942c49db3ca6acdb~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<hr>
<blockquote>
<p>å¦‚æœæ¯æ¬¡éƒ½éœ€è¦è‡ªå·±ä¹¦å†™ä¸€ä¸ªçˆ¶ç»„ä»¶,é‚£å°±å¤ªéº»çƒ¦äº†, Reduxä¹Ÿæ›¿æˆ‘ä»¬åšäº†è¿™ä¸€æ­¥, é€šè¿‡<strong>connectç«‹å³æ‰§è¡Œå‡½æ•°</strong>,  å°†èƒ½ç®€å†™è¿™ä¸€æ­¥</p>
</blockquote>
<h3 data-id="heading-64">ä½¿ç”¨</h3>
<ul>
<li>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª <code>ComponentA</code> ç»„ä»¶</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ComponentA</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;
    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'C-A'</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">h1</span>></span>ComponentA<span class="hljs-tag"></<span class="hljs-name">h1</span>></span>
            <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
        )
    &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>åˆ›å»ºä¸€ä¸ªçˆ¶å®¹å™¨(æ— éœ€è‡ªå·±åˆ›å»º), ä¼ å…¥UIç»„ä»¶, è¿™ä¸ª<strong>ç«‹å³æ‰§è¡Œå‡½æ•°</strong>æ‰§è¡Œåä¼šé»˜è®¤è¿”å›çˆ¶ç»„ä»¶, ä¹Ÿå°±æ˜¯ä¾›æˆ‘ä»¬ä½¿ç”¨çš„ç»„ä»¶, æ‰€ä»¥æˆ‘ä»¬è¦å°†å…¶æš´éœ²å‡ºå», å¥½åœ¨å¤–éƒ¨èƒ½å¤Ÿä½¿ç”¨</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> connect()(ComponentA)
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-65">çˆ¶ç»„ä»¶å¦‚ä½•ä¼ å€¼ç»™å­ç»„ä»¶?</h3>
<blockquote>
<p><strong>connectï¼ˆmapStateToPropsï¼šfunctionï¼Œ mapDispatchToPropsï¼š function)</strong> å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°[<code>mapStateToProps</code>] [<code>mapDispatchToProps</code>]</p>
</blockquote>
<ol>
<li>mapStateToProps(state) è¿™ä¸ªå‡½æ•°èƒ½å¤Ÿé»˜è®¤æ¥æ”¶åˆ° <code>store.state</code> å¯¹è±¡, å‡è®¾æˆ‘ä»¬éœ€è¦è·å¾—ä¸€ä¸ªå« add çš„ state</li>
</ol>
<p><strong>è¿™ä¸ªå‡½æ•°ä¼ å…¥connectåä¼šè¢«æ‰§è¡Œ, å¹¶ä¸”è¿”å›å€¼ä½œä¸º props ä¼ å…¥UIç»„ä»¶</strong></p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">const</span> mapStateToProps = <span class="hljs-function">(<span class="hljs-params">state</span>) =></span> &#123; <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">add</span>: state.add &#125; &#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ol start="2">
<li>mapDispatchToProps(dispatch) æ¥æ”¶åˆ°ä¸€ä¸ª <code>store.dispatch</code> å‡½æ•°, ç”¨äºæ‰§è¡ŒåŠ¨ä½œ</li>
</ol>
<p><strong>è¿™ä¸ªå‡½æ•°ä¼ å…¥connectåä¼šè¢«æ‰§è¡Œ, å¹¶ä¸”è¿”å›å€¼(å‡½æ•°)ä½œä¸º props ä¼ å…¥UIç»„ä»¶</strong></p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">const</span> mapDispatchToProps = <span class="hljs-function">(<span class="hljs-params">dispatch</span>) =></span> &#123;
    <span class="hljs-keyword">return</span> &#123;
        <span class="hljs-attr">addCount</span>: <span class="hljs-function"><span class="hljs-params">value</span> =></span> dispatch(addAction(value)),
    &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ol start="3">
<li>ä¼ é€’ç»™connect, è¿™æ ·å­ä¸€ä¸ªå®Œæ•´çš„çˆ¶ç»„ä»¶æˆ‘ä»¬å°±åˆ›å»ºæˆåŠŸäº†</li>
</ol>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> connect( mapStateToProps, mapDispatchToProps )(ComponentA)
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<blockquote>
<p>çœ‹åˆ°è¿™é‡Œä½ å¯èƒ½ä¼šè§‰å¾—å¥‡æ€ª, åœ¨[<code>mapStateToProps</code>] [<code>mapDispatchToProps</code>]å‚æ•°ä¸­, æˆ‘ä»¬éƒ½ä½¿ç”¨äº† storeå¯¹è±¡é‡Œé¢çš„state, dispatchå‡½æ•°, é‚£è¿™ä¸¤ä¸ªå€¼æ˜¯ä»å“ªé‡Œæ‹¿åˆ°çš„? å½“ç„¶æ˜¯æˆ‘ä»¬è‡ªå·±<strong>è®© store ä½œä¸º prop</strong> ä¼ è¿›å»çš„,</p>
</blockquote>
<ol start="4">
<li>æˆ‘ä»¬æ¥çœ‹çœ‹æ€ä¹ˆä½¿ç”¨è¿™ä¸ªç»„ä»¶, éå¸¸ç®€å•.</li>
</ol>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">import</span> React, &#123; Component &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> ComponentA <span class="hljs-keyword">from</span> <span class="hljs-string">"./containers/ComponentA"</span>;
<span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">'./redux/store'</span>; <span class="hljs-comment">// å¼•å…¥ store å¯¹è±¡</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;
    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">ComponentA</span> <span class="hljs-attr">store</span>=<span class="hljs-string">&#123;store&#125;/</span>></span> &#123;/* å°†storeä¼ å…¥ */&#125;
            <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
        )
    &#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ol start="5">
<li>å­ç»„ä»¶æ€ä¹ˆä½¿ç”¨?</li>
</ol>
<blockquote>
<p>å°±åƒä½¿ç”¨propä¼ é€’è¿‡æ¥çš„ æ•°æ®/å‡½æ•° ä¸€æ ·ä½¿ç”¨, æ²¡æœ‰ä»»ä½•å·®åˆ«, å¦‚æœä½ æƒ³çœ‹å®Œæ•´ä»£ç ğŸ‘‰ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FLinkSofuny%2Freact-study-guide%2Ftree%2Fmaster%2Fstudy-demo%2Ftest-Demo%2FRedux%2Fsrc_2.redux_%25E5%2589%25A5%25E7%25A6%25BB" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/LinkSofuny/react-study-guide/tree/master/study-demo/test-Demo/Redux/src_2.redux_%E5%89%A5%E7%A6%BB" ref="nofollow noopener noreferrer"><strong>redux_å‰¥ç¦»</strong></a></p>
</blockquote>
<h3 data-id="heading-66">connectå‚æ•°çš„ç®€å†™</h3>
<ul>
<li>mapDispatchToPropså…¶å®å…è®¸åšä¸ºä¸€ä¸ªå¯¹è±¡ä¼ å…¥</li>
<li>å¹¶ä¸”ï¼ŒåŸå…ˆéœ€è¦è‡ªå·±æ‰§è¡Œçš„ dispatch ä¹Ÿå¯ä»¥äº¤ç»™ <strong>conncet</strong> æ¥åšï¼Œ æˆ‘ä»¬ä»…éœ€å°† actionä½œä¸ºä¸€ä¸ªå¯¹è±¡çš„é”®å€¼å¯¹ä¸¢è¿›å»</li>
</ul>
<p>ç®€å†™å‰ï¼š</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> connect(
    <span class="hljs-function">(<span class="hljs-params">state</span>) =></span> &#123;
        <span class="hljs-keyword">return</span> &#123;
            state
        &#125;
    &#125;,
    <span class="hljs-function">(<span class="hljs-params">dispatch</span>) =></span> &#123;
        <span class="hljs-keyword">return</span> &#123;
           <span class="hljs-attr">addCount</span>: <span class="hljs-function">(<span class="hljs-params">value</span>) =></span> dispatch(addAction(value)),
           <span class="hljs-attr">addCountAsync</span>: <span class="hljs-function">(<span class="hljs-params">value</span>) =></span> dispatch(addActionAsync(value)),
        &#125;
    &#125;
)(ComponentA)
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>ç®€å†™åï¼š</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> connect( 
    <span class="hljs-function"><span class="hljs-params">state</span> =></span> (&#123; state &#125;), 
    &#123; 
        <span class="hljs-attr">addCount</span>: addAction, 
        <span class="hljs-attr">addCountAsync</span>: addActionAsync, 
    &#125; 
)(ComponentA)
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-67">æ— éœ€é€ä¸ªä¼ å…¥store.js</h3>
<blockquote>
<p>å¹¶ä¸æ˜¯æ¯ä¸ªè¿™æ ·çš„ç»„ä»¶ï¼Œ æˆ‘ä»¬éƒ½éœ€è¦è‡ªå·±ä¼ å…¥store</p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// index.js å…¥å£æ–‡ä»¶</span>
<span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> ReactDom <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span>
<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">'./App'</span>
<span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">'./redux/store'</span>
<span class="hljs-keyword">import</span> &#123; Provider &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react-redux'</span> <span class="hljs-comment">// ğŸ‘ˆ</span>

ReactDom.render(
    <span class="xml"><span class="hljs-tag"><<span class="hljs-name">Provider</span> <span class="hljs-attr">store</span>=<span class="hljs-string">&#123;store&#125;</span>></span>
        <span class="hljs-tag"><<span class="hljs-name">App</span> /></span>
    <span class="hljs-tag"></<span class="hljs-name">Provider</span>></span></span>, 
    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'root'</span>))
    
<span class="hljs-comment">// ä¹Ÿä¸éœ€è¦è‡ªå·±ç›‘å¬äº†</span>
<span class="hljs-comment">// store.subscribe(()=>&#123;</span>
<span class="hljs-comment">//     ReactDom.render(<App />, document.getElementById('root'))</span>
<span class="hljs-comment">// &#125;)</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-68">Reduxå¯è§†åŒ–æ’ä»¶</h2>
<blockquote>
<p>æ›´æ–¹ä¾¿åœ°è§‚å¯Ÿæ•°æ®æµåŠ¨</p>
<blockquote>
<p>$ yarn add redux-devtools-extension</p>
</blockquote>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4f85cb3be6c3433ab675e9cc94f957d4~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// store.js</span>
<span class="hljs-keyword">import</span> &#123; createStore, applyMiddleware &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">"redux"</span>;
<span class="hljs-keyword">import</span> thunk <span class="hljs-keyword">from</span> <span class="hljs-string">'redux-thunk'</span>
<span class="hljs-keyword">import</span> &#123; composeWithDevTools &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">"redux-devtools-extension"</span>;
<span class="hljs-keyword">import</span> allReducer <span class="hljs-keyword">from</span> <span class="hljs-string">"./reducers"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> createStore(allReducer, composeWithDevTools(applyMiddleware(thunk)))
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>è°·æ­Œæµè§ˆå™¨å®‰è£…ä¸€ä¸ªæ’ä»¶</li>
</ul>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/141ebf64e7234479a111ef03d76c3250~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li><strong>å®Œæ¯•</strong>ğŸ˜„</li>
</ul>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f8d37b0728ae478cbb9b92511507abbe~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<hr>
<h1 data-id="heading-69">Hooks</h1>
<blockquote>
<p>é’©å­ï¼ˆHookï¼‰å‹¾å‡ºReactçš„ç‰¹æ€§</p>
</blockquote>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/677b3341d84449fbb7b8f67d0d726723~tplv-k3u1fbpfcp-watermark.image" alt="Hooks.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-70">ç†å¿µ</h2>
<blockquote>
<p>hooksä¸ºReactæä¾›äº†æ›´åŠ ç›´æ¥, ç®€å•çš„API.</p>
</blockquote>
<p><strong><code>hook</code>åƒæ˜¯ä¸€ä¸ªæ¯”èµ·ç±»ç»„ä»¶æ›´åŠ åº•å±‚çš„æ¦‚å¿µ</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">stateDiagram-v2

hook --> classç»„ä»¶

Reactåº•å±‚ --> hook

</code></pre>
<p><strong>è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</strong></p>
<ul>
<li>å‡½æ•°å¼ç»„ä»¶æ— æ³•ä½¿ç”¨åƒç±»ç»„ä»¶çš„ä¸€äº› React ç‰¹æ€§ï¼Œå¦‚ï¼š State, ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œ refç­‰</li>
<li>classå¼ç»„ä»¶å¯¹äºåˆå­¦è€…æœ‰ä¸€å®šçš„å­¦ä¹ é—¨æ§›ï¼Œ å‡½æ•°ç»„ä»¶æ›´åŠ å‹å¥½
ç±»å¼ç»„ä»¶ä¾ç„¶å¯ä»¥ä½¿ç”¨ï¼Œä¸¤è€…æ²¡æœ‰ä»»ä½•é«˜ä½ä¹‹åˆ†</li>
</ul>
<h2 data-id="heading-71">æ³¨æ„</h2>
<ul>
<li>
<p>å¯ä»¥ä»useStateè¿”å›çš„æ•°ç»„ä¸­ç»“æ„å‡º <strong>state, setState()</strong></p>
</li>
<li>
<p><strong>setState([object | (preState)â‡’&#123;&#125;])</strong></p>
</li>
</ul>
<h2 data-id="heading-72">useState</h2>
<blockquote>
<p>å‡½æ•°å¼ç»„ä»¶æ— æ³•è·å–åˆ°reactå®ä¾‹, ä¹Ÿå°±æ— æ³•è·å–stateä¸setState()</p>
</blockquote>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/734442995ad7437595c2700a15495149~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">import</span> React, &#123; Component, useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-comment">// å‡½æ•°- å¦‚æœä»¥useå¼€å¤´ï¼Œ React ä¼šè®¤ä¸ºä½ ä½¿ç”¨äº†è‡ªå®šä¹‰hook</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">StateHook</span>(<span class="hljs-params"></span>) </span>&#123;
    
    <span class="hljs-keyword">const</span> [count, setCount] = useState(<span class="hljs-number">0</span>) <span class="hljs-comment">// ğŸ‘ˆ</span>

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">h4</span>></span>Home Component<span class="hljs-tag"></<span class="hljs-name">h4</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">h5</span>></span>count: &#123;count&#125;<span class="hljs-tag"></<span class="hljs-name">h5</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =></span> setCount(count + 1)&#125;>count add<span class="hljs-tag"></<span class="hljs-name">button</span>></span>
            &#123;/* ä¼ å‡½æ•° */&#125;
            <span class="hljs-tag"><<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =></span> setCount(count => count + 1)&#125;>count add<span class="hljs-tag"></<span class="hljs-name">button</span>></span>
        <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
    )
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li><strong>å¯¹æ¯”(classç»„ä»¶)</strong></li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// å¯¹ç…§(ç±»)</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StateHook</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span></span>&#123;
    state = &#123;
        <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
    &#125;
    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">h4</span>></span>Home Component<span class="hljs-tag"></<span class="hljs-name">h4</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">h5</span>></span>count: &#123;this.state.count&#125;<span class="hljs-tag"></<span class="hljs-name">h5</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =></span> this.setState(&#123;count: this.state.count + 1&#125;)&#125;>count add<span class="hljs-tag"></<span class="hljs-name">button</span>></span>
            <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
        )
    &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-73">useEffect</h2>
<blockquote>
<p>å‡½æ•°å¼ç»„ä»¶æ— æ³•ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œ useEffectå°±æ˜¯æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„</p>
</blockquote>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2147f07e23354b509b4b5b3fc52ca092~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">import</span> React, &#123; Component, useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-comment">// å‡½æ•°- å¦‚æœä»¥useå¼€å¤´ï¼Œ React ä¼šè®¤ä¸ºä½ ä½¿ç”¨äº†è‡ªå®šä¹‰hook</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">EffectHook</span>(<span class="hljs-params"></span>) </span>&#123;
    
    <span class="hljs-keyword">const</span> [count, setCount] = useState(<span class="hljs-number">0</span>)

    useEffect(<span class="hljs-function">() =></span> &#123;
        <span class="hljs-comment">// è¿™ä¸ªå‡½æ•°ç›¸å½“äº componentDidMount + componentDidUpdate</span>
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'é¡µé¢åˆå§‹åŒ–å®Œæ¯•/æ›´æ–°æ•°æ®å®Œæ¯•'</span>)
        <span class="hljs-comment">// è¿”å›çš„å‡½æ•°å°±ç›¸å½“äº componentWillUnmount</span>
        <span class="hljs-keyword">return</span> <span class="hljs-function">() =></span> &#123;
            <span class="hljs-comment">// åšä¸€äº›æ¸…ç†å¤„ç†ï¼Œ å¦‚æ¸…ç†ä¸€ä¸ªå®šæ—¶å™¨ clearInterval()</span>
            <span class="hljs-comment">// ä¸¥æ ¼æ¥è®²ï¼Œä»…åœ¨æ¸…ç†å‰¯ä½œç”¨ä¸Šä¸componentWillUnmountåŠŸèƒ½ç±»ä¼¼ï¼Œ ä½†æ˜¯å¹¶éç­‰åŒäºå¸è½½é’©å­</span>
        &#125;
    &#125;)
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params"></span>) </span>&#123;
        setCount(count + <span class="hljs-number">1</span>)
    &#125;
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">h4</span>></span>Home Component<span class="hljs-tag"></<span class="hljs-name">h4</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">h5</span>></span>count: &#123;count&#125;<span class="hljs-tag"></<span class="hljs-name">h5</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;add&#125;</span>></span>count add<span class="hljs-tag"></<span class="hljs-name">button</span>></span>
        <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
    )
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li><strong>å¯¹æ¯”</strong></li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// å¯¹ç…§(ç±»)</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EffectHook</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span></span>&#123;

    state = &#123;
        <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
    &#125;
    <span class="hljs-function"><span class="hljs-title">componentDidMount</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'é¡µé¢åˆå§‹åŒ–å®Œæ¯•'</span>)
    &#125;
    <span class="hljs-function"><span class="hljs-title">componentDidUpdate</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'æ›´æ–°æ•°æ®å®Œæ¯•'</span>)
    &#125;
    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">h4</span>></span>Home Component<span class="hljs-tag"></<span class="hljs-name">h4</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">h5</span>></span>count: &#123;this.state.count&#125;<span class="hljs-tag"></<span class="hljs-name">h5</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =></span> this.setState(&#123;count: this.state.count + 1&#125;)&#125;>count add<span class="hljs-tag"></<span class="hljs-name">button</span>></span>
            <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
        )
    &#125;
    <span class="hljs-function"><span class="hljs-title">componentWillUnmount</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'ç»„ä»¶å³å°†å¸è½½'</span>) <span class="hljs-comment">// ä»…æ¼”ç¤ºï¼Œ effectå‡½æ•°çš„è¿”å›å‡½æ•°è·Ÿå®ƒè¿˜æ˜¯æœ‰ä¸€äº›å·®åˆ«ï¼Œ</span>
    &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li><strong>useEffect</strong> ç›¸å½“äºä¸‰ä¸ªé’©å­çš„æ•´åˆ</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js">React.useEffect(<span class="hljs-function">() =></span> &#123;
    <span class="hljs-keyword">let</span> timer =<span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =></span> &#123;
       add()     <span class="hljs-comment">// è¿™ä¸€éƒ¨åˆ†ç›¸å½“äº componentDidMount å’Œ componentDidUpdate</span>
    &#125;,<span class="hljs-number">1000</span>)      <span class="hljs-comment">// è‡³äºè¶‹è¿›äºå“ªä¸ªå–å†³äºç¬¬äºŒä¸ªå‚æ•°æ•°ç»„[]</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =></span> &#123;
        <span class="hljs-built_in">clearInterval</span>(timer) <span class="hljs-comment">// è¿™ä¸ªè¿”å›å‡½æ•°</span>
    &#125;
&#125;,[])
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-74">å‚æ•°2</h3>
<blockquote>
<p>ç”¨äºç›‘å¬é¡µé¢çš„æ”¹åŠ¨</p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// ä¸ä¼ é€’ç¬¬äºŒä¸ªå‚æ•°ï¼Œ é¡µé¢ä¸­ä»»ä½•æ”¹åŠ¨éƒ½ä¼šè¢«ç›‘å¬</span>
React.useEffect(<span class="hljs-function">() =></span> &#123;
    <span class="hljs-comment">// .....</span>
&#125;)
<span class="hljs-comment">// ä¼ é€’ä¸€ä¸ªç©ºæ•°ç»„ï¼Œ é¡µé¢ä¸­ä»»ä½•æ”¹åŠ¨éƒ½ä¸ç›‘å¬</span>
React.useEffect(<span class="hljs-function">() =></span> &#123;
    <span class="hljs-comment">// .....</span>
&#125;,[])
<span class="hljs-comment">// ä¼ é€’å…·ä½“çš„çŠ¶æ€åï¼Œ åˆ™è¯¥çŠ¶æ€æ”¹å˜ä¼šè¢«ç›‘å¬</span>
React.useEffect(<span class="hljs-function">() =></span> &#123;
    <span class="hljs-comment">// .....</span>
&#125;,[stateName])
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-75">useRef</h2>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6fe7e2def267414989ceffcdd273e40e~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">RefHook</span>(<span class="hljs-params"></span>) </span>&#123;
    
    <span class="hljs-keyword">const</span> [count, setCount] = useState(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">const</span> countRef = useRef() <span class="hljs-comment">//ğŸ‘ˆ</span>
    <span class="hljs-keyword">const</span> headerRef = useRef()
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showInfo</span> (<span class="hljs-params"></span>) </span>&#123;
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'countRef'</span>, countRef)
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'headerRef'</span>, headerRef)
    &#125;
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">h4</span>></span>Home Component<span class="hljs-tag"></<span class="hljs-name">h4</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">h5</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;headerRef&#125;</span>></span>header<span class="hljs-tag"></<span class="hljs-name">h5</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;countRef&#125;</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;showInfo&#125;/</span>></span>
        <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
    )
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li><strong>å¯¹æ¯”</strong></li>
</ul>
<pre><code class="hljs language-js copyable" lang="js">å¯¹ç…§(ç±»)
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RefHook</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span></span>&#123;

    state = &#123;
        <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
    &#125;
    showInfo = <span class="hljs-function">() =></span> &#123;
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'countRef'</span>, <span class="hljs-built_in">this</span>.refs.countRef)
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'headerRef'</span>, <span class="hljs-built_in">this</span>.refs.headerRef)
    &#125;
    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">h4</span>></span>Home Component<span class="hljs-tag"></<span class="hljs-name">h4</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">h5</span>  <span class="hljs-attr">ref</span>=<span class="hljs-string">'headerRef'</span> ></span>header<span class="hljs-tag"></<span class="hljs-name">h5</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">'countRef'</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;this.showInfo&#125;/</span>></span>
            <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
        )
    &#125;
&#125;

<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-76">è‡ªå®šä¹‰Hook</h2>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/591f4d701c42450e970282cc3ec04a4d~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li>ä»¥useå¼€å¤´å®šä¹‰æˆ‘ä»¬çš„hookå‡½æ•°</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// è¿™éƒ¨åˆ†é€»è¾‘å°±å¯ä»¥ä½¿ç”¨åˆ°ä»»ä½•å…¶ä»–ç»„ä»¶ä¸­å»äº†</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">useAllself</span>(<span class="hljs-params">initState</span>) </span>&#123;

    <span class="hljs-keyword">const</span> [count, setCount] = useState(initState)

    useEffect(<span class="hljs-function">() =></span> &#123;
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'count'</span>, count) <span class="hljs-comment">// ç›‘å¬</span>
    &#125;)
    <span class="hljs-comment">// å¦‚æœå€¼ä¸ºå¶æ•°ï¼Œ å°±è¿”å›</span>
    <span class="hljs-keyword">return</span> [count, setCount]

&#125;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> SelfHook
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">import</span> React, &#123; Component, useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">SelfHook</span>(<span class="hljs-params"></span>) </span>&#123;
    
    <span class="hljs-keyword">const</span> [count, setCount] = useAllself(<span class="hljs-number">0</span>) <span class="hljs-comment">// ä½¿ç”¨æˆ‘ä»¬æŠ½è±¡çš„hook</span>
    
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">h4</span>></span>Home Component<span class="hljs-tag"></<span class="hljs-name">h4</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">h5</span>></span>count: &#123;count&#125;<span class="hljs-tag"></<span class="hljs-name">h5</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =></span> setCount(count + 1)&#125;>count add<span class="hljs-tag"></<span class="hljs-name">button</span>></span>
        <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
    )
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><strong>æ³¨ï¼š</strong><a href="https://link.juejin.cn/?target=%25E6%259B%25B4%25E5%25A4%259A%25E7%259B%25B8%25E5%2585%25B3%25E7%259A%2584hookAPI" target="_blank" title="%E6%9B%B4%E5%A4%9A%E7%9B%B8%E5%85%B3%E7%9A%84hookAPI" ref="nofollow noopener noreferrer">æ›´å¤šç›¸å…³çš„hookAPI</a></p>
<p>åœ¨hookçš„åŠ å…¥ä»¥åï¼Œ å‡½æ•°ç»„ä»¶çš„ä¼˜åŠ¿å˜å¾—æä¸ºæ˜æ˜¾ï¼Œ ç°åœ¨ç»å¤§å¤šæ•°å¼€å‘ç”¨çš„ä¹Ÿéƒ½æ˜¯å‡½æ•°ç»„ä»¶ï¼Œ å¹¶ä¸”æˆ‘è®¤ä¸ºè¿™ä¹Ÿæ˜¯æœªæ¥çš„ä¸€ç§è¶‹åŠ¿</p>
<hr>
<h1 data-id="heading-77">æ‹“å±•</h1>
<blockquote>
<p>ä¸€äº›æœ‰ç”¨çš„æ‰©å±•</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e49441c69ca84d0389ac7f5d64af5990~tplv-k3u1fbpfcp-watermark.image" alt="æ‹“å±•.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-78">Fragment</h2>
<blockquote>
<p>JSXè¯­æ³•è¦æ±‚æ¯ä¸€ä¸ªç»„ä»¶æœ€å¤–å±‚éƒ½å¿…é¡»ç”±ä¸€ä¸ªæ ‡ç­¾åŒ…è£¹ï¼Œ ä½†æ˜¯è¿™ä¸ªæ ‡ç­¾æ˜¯å¤šä½™çš„ï¼Œ è¿™æ—¶å€™ä½¿ç”¨Fragmentç»„ä»¶ï¼Œ å¯ä»¥è§£å†³å±‚çº§å¤šä½™çš„é—®é¢˜</p>
</blockquote>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/40c5610066c24336ad65e568b50e4f58~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-79">ä½¿ç”¨</h3>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">import</span> React, &#123; Component,Fragment &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DemoFrag</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;
    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag"><<span class="hljs-name">Fragment</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;index&#125;</span>></span>
               <span class="hljs-tag"><<span class="hljs-name">p</span>></span>111<span class="hljs-tag"></<span class="hljs-name">p</span>></span>
            <span class="hljs-tag"></<span class="hljs-name">Fragment</span>></span></span>
        )
    &#125;
&#125;

<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>è¿™ä¸¤ç§å†™æ³•éƒ½æœ‰åŒæ ·çš„æ•ˆæœï¼Œ ä½†æ˜¯ç©ºæ ‡ç­¾ä¸å…è®¸ä½ ä¼ å…¥ä»»ä½•å±æ€§ï¼Œ æ‰€ä»¥å¦‚éœ€ä¼ å…¥å±æ€§ï¼Œåˆ™ä½¿ç”¨Fragment</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DemoFrag</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;
    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag"><></span>
               <span class="hljs-tag"><<span class="hljs-name">p</span>></span>111<span class="hljs-tag"></<span class="hljs-name">p</span>></span>
            <span class="hljs-tag"></></span></span>
        )
    &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-80">Context</h2>
<blockquote>
<p>åœ¨é€šä¿¡ç« èŠ‚æˆ‘ä»¬æåˆ°çš„ contextï¼Œ å…è®¸ä½ è¿›è¡Œç¥–ç»„ä»¶ä¸å­™ç»„ä»¶çš„,è·¨ç»„ä»¶é€šä¿¡</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ffab062c954f45ca83f7d11c293a7116~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-81">ä½¿ç”¨</h3>
<blockquote>
<p>å»ºè®®çœ‹ä¸€ä¸‹Demoçš„ä»£ç  <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FLinkSofuny%2Freact-study-guide%2Ftree%2Fmaster%2Fstudy-demo%2Ftest-Demo%2F%25E6%2589%25A9%25E5%25B1%2595%2Fsrc_context" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/LinkSofuny/react-study-guide/tree/master/study-demo/test-Demo/%E6%89%A9%E5%B1%95/src_context" ref="nofollow noopener noreferrer">contexté€šä¿¡</a></p>
</blockquote>
<p>å‡è®¾ä½ å¸Œæœ›åœ¨ä¸åŒçš„æ–‡ä»¶ä½¿ç”¨contextï¼Œ é‚£æˆ‘å»ºè®®ä½ å°†contextå•ç‹¬å»ºç«‹ä¸ºä¸€ä¸ªæ–‡ä»¶å»æš´éœ²</p>
<ul>
<li>å¼•å…¥context</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">const</span> MyContext = React.createContext() 
<span class="hljs-keyword">const</span> &#123; 
    Provider,     
    Consumer  
&#125; = MyContext 
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>ä½¿ç”¨</li>
</ul>
<blockquote>
<p>ä¸ºäº†çœ‹èµ·æ¥æ›´åŠ ç›´è§‚ï¼Œ å‡è®¾ä¸‹åˆ—ä»£ç éƒ½åœ¨åŒä¸€ä¸ªæ–‡ä»¶å†…ï¼Œ å¦‚éœ€çœ‹å¤šæ–‡ä»¶çš„æƒ…å†µï¼Œ è¯·çœ‹Demo</p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">const</span> MyContext = React.createContext()
<span class="hljs-keyword">const</span> &#123;Provider, Consumer&#125; = MyContext
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Grandpa</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;
    state = &#123;
        <span class="hljs-attr">name</span>: <span class="hljs-string">'Link'</span>,
        <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>
    &#125;
    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-keyword">const</span> &#123;name, age&#125; = <span class="hljs-built_in">this</span>.state
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'grand'</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">h1</span>></span>æˆ‘æ˜¯ç¥–ç»„ä»¶<span class="hljs-tag"></<span class="hljs-name">h1</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;&#123;name,age</span> &#125;&#125;></span> // ğŸ‘ˆ
                    <span class="hljs-tag"><<span class="hljs-name">Father</span> /></span>  &#123;/* çˆ¶ç»„ä»¶ */&#125;
                <span class="hljs-tag"></<span class="hljs-name">Provider</span>></span>
            <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
        )
    &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>å­™ç»„ä»¶æ¥æ”¶(ç±»å¼)</li>
</ul>
<blockquote>
<p>åŸºäº MyContext å®šä¹‰ä¸€ä¸ªç§æœ‰å±æ€§contextType</p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Son</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;
    <span class="hljs-keyword">static</span> contextType = MyContext
    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-keyword">const</span> &#123;name, age&#125; = <span class="hljs-built_in">this</span>.context
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'son'</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">h1</span>></span>æˆ‘æ˜¯å­™ç»„ä»¶<span class="hljs-tag"></<span class="hljs-name">h1</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">p</span>></span>æˆ‘æ˜¯:&#123;name&#125;, ä»Šå¹´: &#123;age&#125;<span class="hljs-tag"></<span class="hljs-name">p</span>></span>
            <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
        )
    &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>å­™ç»„ä»¶æ¥æ”¶(å‡½æ•°å¼)</li>
</ul>
<blockquote>
<p>é€šè¿‡ Context ä¸‹çš„ Consumer æ¥å—åˆ°çš„å‚æ•°è¿›è¡Œä¼ é€’</p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Son</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'son'</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">h1</span>></span>æˆ‘æ˜¯å­™ç»„ä»¶<span class="hljs-tag"></<span class="hljs-name">h1</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">Consumer</span>></span>
                &#123;
                    value => <span class="hljs-tag"><<span class="hljs-name">p</span>></span>æˆ‘æ˜¯:&#123;value.name&#125;, ä»Šå¹´: &#123;value.age&#125;<span class="hljs-tag"></<span class="hljs-name">p</span>></span>
                &#125;
            <span class="hljs-tag"></<span class="hljs-name">Consumer</span>></span>
        <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
    )
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-82">PureComponent</h2>
<blockquote>
<p>å¯¹æ•°æ®è¿›è¡Œå˜æ›´çš„æ—¶å€™, æ— è®º <code>setState</code> æ˜¯å¦æ”¹å˜æ•°æ®, <code>render</code> å‡½æ•°éƒ½ä¸€å®šä¼šæ‰§è¡Œ, å¹¶ä¸”å¦‚æœç»„ä»¶å†…åµŒå¥—æœ‰å…¶ä»–ç»„ä»¶, å­ç»„ä»¶çš„ <code>render</code> ä¹Ÿä¼šè¢«è°ƒç”¨, å³æ—¶æ•°æ®æ²¡æœ‰ä»»ä½•æ”¹å˜.è¿™å°±é€ æˆäº†å¾ˆå¤šæ— è°“çš„ç»„ä»¶é‡æ¸²æŸ“</p>
</blockquote>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d2816db47beb4ea088b7a1fdb4d8e2c5~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p><strong>è§£å†³åŠæ³•</strong></p>
<ol>
<li>é‡å†™ <strong>shouldComponentUpdate</strong> é’©å­</li>
</ol>
<p>Â Â Â Â Â Â  <code>shouldComponentUpdate</code> é»˜è®¤æƒ…å†µä¸‹éƒ½ä¼šè¿”å›ä¸€ä¸ª <code>true</code>ï¼Œ ä½¿å¾—ç»„ä»¶æ¥ä¸‹æ¥çš„ç”Ÿå‘½å‘¨æœŸé’©å­èƒ½å¤Ÿè¢«è°ƒç”¨ï¼Œ å¦‚æœè¿”å› <code>false</code> åˆ™ <strong>åƒæ˜¯ä¸€ä¸ªé˜€é—¨è¢«å…³é—­äº†ä¸€æ ·ï¼Œ åˆ™å®ƒä»¥ä¸‹çš„é’©å­ä¸å†æ‰§è¡Œ</strong></p>
<p>Â Â Â Â Â Â  æ ¹æ®è¿™ä¸€ç‚¹ï¼Œ æˆ‘ä»¬å°±å¯ä»¥é‡å†™å®ƒï¼Œ å»åˆ¤æ–­ä¼ å…¥è¯¥ç»„ä»¶çš„ state, props æœ‰æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œ æœ‰çš„è¯ æˆ‘ä»¬åœ¨è®©å…¶ç»§ç»­æ‰§è¡Œ</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-title">shouldComponentUpdate</span>(<span class="hljs-params">nextProps,nextState</span>)</span> &#123;
    <span class="hljs-comment">// å¦‚æ•°æ®æœªå˜åŒ–ï¼Œ é˜»æ­¢render</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'æ”¹å˜å‰'</span>, <span class="hljs-built_in">this</span>.state, <span class="hljs-built_in">this</span>.props);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'æ”¹å˜å'</span>, nextState, nextProps);
    <span class="hljs-keyword">return</span> !<span class="hljs-built_in">this</span>.state.name === nextState
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<blockquote>
<p>è¿™é‡Œå°±ä¸æä¾›Demoäº†ï¼Œ å› ä¸ºä¸€èˆ¬ä¸ä¼šè¿™ä¹ˆåšï¼Œ ğŸ¤­</p>
</blockquote>
<ol start="2">
<li>è®©ä½ çš„ç»„ä»¶ç»§æ‰¿ <strong>PureComponent</strong></li>
</ol>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">import</span> React, &#123; Component, PureComponent &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-comment">// æ”¹å˜ç»„ä»¶çš„ç»§æ‰¿</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">index</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span> </span>&#123; <span class="hljs-comment">// ğŸ‘ˆ</span>
<span class="hljs-comment">// ....</span>
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> <strong>PureComponent</strong> å†…å¯¹ <strong>shouldComponentUpdate</strong> è¿›è¡Œé‡å†™, æ›´å¥½çš„æ£€æµ‹äº† <code>setState</code> , <code>props</code> çš„å˜åŒ–, ä½†æ˜¯å…¶åªå¯¹ <code>State</code> è¿›è¡Œæµ…æ¯”è¾ƒ, åªåˆ¤æ–­<code>SetState([object])</code> çš„å‚æ•°å¯¹è±¡objectçš„å†…å­˜åœ°å€æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–, ä¹Ÿå°±è¯´, åœ¨ä¸æ”¹å˜Stateå¯¹è±¡åœ°å€çš„æƒ…å†µä¸‹,ä¿®æ”¹å€¼, ä¾ç„¶ä¼šå¯¼è‡´renderè°ƒç”¨</p>
</blockquote>
<h2 data-id="heading-83">RenderProps</h2>
<blockquote>
<p>ä»ç›´æ¥ä¼ ç»„ä»¶å˜ä¸ºå›è°ƒå‡½æ•°çš„å½¢å¼</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/899ec8614a594735899dcb79e5e6889b~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-84">å¸¸è§„çš„propsä¼ ç»„ä»¶</h3>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'index'</span> ></span>
            <span class="hljs-tag"><<span class="hljs-name">h1</span> ></span>index<span class="hljs-tag"></<span class="hljs-name">h1</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">A</span> <span class="hljs-attr">B</span>=<span class="hljs-string">&#123;</span><<span class="hljs-attr">B</span> /></span>&#125;/> // ğŸ‘ˆ
        <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
    )
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>A Component</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;
    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'A'</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">h1</span>></span>AAA<span class="hljs-tag"></<span class="hljs-name">h1</span>></span>
                &#123;this.props.B&#125; // ğŸ‘ˆ
            <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
        )
    &#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>è¿™ç§ä¼ é€’æ–¹å¼å¾ˆæ–¹ä¾¿ï¼Œ ä½†æ— æ³•ä¼ å‚æ•°</p>
<h3 data-id="heading-85">Renderå±æ€§ä¼ é€’ä¸€ä¸ªå‡½æ•°</h3>
<blockquote>
<p>ç»™Aç»„ä»¶ä¼ é€’ä¸€ä¸ªæ¥å— <code>name</code>, <code>age</code> çš„å‡½æ•°</p>
</blockquote>
<pre><code class="hljs language-JavaScript copyable" lang="JavaScript"><span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'index'</span> ></span>
            <span class="hljs-tag"><<span class="hljs-name">h1</span> ></span>index<span class="hljs-tag"></<span class="hljs-name">h1</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">A</span> <span class="hljs-attr">render</span>=<span class="hljs-string">&#123;(name,</span> <span class="hljs-attr">age</span>) =></span> <span class="hljs-tag"><<span class="hljs-name">B</span>  <span class="hljs-attr">name</span>=<span class="hljs-string">&#123;name&#125;</span> <span class="hljs-attr">age</span>=<span class="hljs-string">&#123;age&#125;/</span>></span>&#125;/> // ğŸ‘ˆ
        <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
    )
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>A Component</li>
</ul>
<blockquote>
<p>å°†æ•°æ®ä½œä¸º props ä¼ ç»™ B ç»„ä»¶</p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;
    state = &#123;
        <span class="hljs-attr">name</span>: <span class="hljs-string">'æˆ‘æ˜¯Aä¼ é€’ç»™Bçš„æ•°æ®'</span>,
        <span class="hljs-attr">age</span>: <span class="hljs-string">'æˆ‘ä¹Ÿæ˜¯å‘¢'</span>
    &#125;
    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-keyword">const</span> &#123; name, age &#125; = <span class="hljs-built_in">this</span>.state
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'A'</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">h1</span>></span>AAA<span class="hljs-tag"></<span class="hljs-name">h1</span>></span>
                &#123;this.props.render( name, age )&#125; // ğŸ‘ˆ
            <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
        )
    &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>B Component</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;
    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'B'</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">h1</span>></span>BBB<span class="hljs-tag"></<span class="hljs-name">h1</span>></span>
                &#123;this.props.name&#125;<span class="hljs-tag"><<span class="hljs-name">br</span> /></span> // ğŸ‘ˆ
                &#123;this.props.age&#125;
            <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
        )
    &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-86">ErrorBoundary</h2>
<blockquote>
<p>é˜²æ­¢é”™è¯¯çš„æ‰©æ•£å¤„ç†, Reactå¦‚æœå­ç»„ä»¶å‘ç”Ÿé”™è¯¯, ä¼šå¯¼è‡´æ•´ä¸ªé¡µé¢æ¸²æŸ“ä¸å‡ºæ¥, è¿™æ—¶å€™é”™è¯¯çš„è¾¹ç•Œå¤„ç†å°±ååˆ†é‡è¦äº†, <strong>ä½†åªèƒ½æ•è·å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå†…å‘ç”Ÿçš„é”™è¯¯</strong></p>
</blockquote>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f2554e154fe446fc9efacf28f8c3fee2~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-87">ä½¿ç”¨</h3>
<blockquote>
<p>æ ¸å¿ƒé’©å­ï¼š <strong>getDerivedStateFromError</strong> è¿™ä¸ªé’©å­ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯å¯¹è±¡ï¼Œ ç”¨äºæ•è·å­ç»„ä»¶æ˜¯å¦å‘ç”Ÿé”™è¯¯</p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// ä»Errorä¸­è·å¾—ä¸€ä¸ªstateçŠ¶æ€, </span>
<span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-title">getDerivedStateFromError</span>(<span class="hljs-params">err</span>)</span> &#123;
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'err'</span>, err)
    <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">hasErr</span>: err&#125;
&#125;
<span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'index'</span> ></span>
            <span class="hljs-tag"><<span class="hljs-name">h1</span> ></span>index<span class="hljs-tag"></<span class="hljs-name">h1</span>></span>
            &#123;/* é”™è¯¯å¯¹è±¡å­˜åœ¨,åˆ™æ¸²æŸ“æ¡ä»¶æˆç«‹çš„DOM*/&#125;
            &#123;this.state.hasErr ? <span class="hljs-tag"><<span class="hljs-name">h1</span>></span>è¿™é‡Œå‘ç”Ÿé”™è¯¯äº†<span class="hljs-tag"></<span class="hljs-name">h1</span>></span> : <span class="hljs-tag"><<span class="hljs-name">A</span> /></span>&#125;
        <span class="hljs-tag"></<span class="hljs-name">div</span>></span></span>
    )
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>è®°å½•é”™è¯¯</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-title">componentDidCatch</span>(<span class="hljs-params">error, errorInfo</span>)</span> &#123; 
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'å‘ç”Ÿé”™è¯¯å’¯'</span>ï¼Œ error, errorInfo)  <span class="hljs-comment">// é”™è¯¯å‘ç”Ÿå®Œæ¯•åï¼Œ å¯è¿›è¡Œè®°å½•æ“ä½œ </span>
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li><strong>æ³¨æ„ï¼ˆæ‘˜è‡ªReactå®˜ç½‘ï¼‰:</strong></li>
</ul>
<blockquote>
<p>é”™è¯¯è¾¹ç•Œ<strong>æ— æ³•</strong>æ•è·ä»¥ä¸‹åœºæ™¯ä¸­äº§ç”Ÿçš„é”™è¯¯ï¼š</p>
</blockquote>
<ul>
<li>äº‹ä»¶å¤„ç†ï¼ˆ<a href="https://link.juejin.cn/?target=https%3A%2F%2Freact.docschina.org%2Fdocs%2Ferror-boundaries.html%23how-about-event-handlers" target="_blank" rel="nofollow noopener noreferrer" title="https://react.docschina.org/docs/error-boundaries.html#how-about-event-handlers" ref="nofollow noopener noreferrer">äº†è§£æ›´å¤š</a>ï¼‰</li>
<li>å¼‚æ­¥ä»£ç ï¼ˆä¾‹å¦‚Â <code>setTimeout</code>Â æˆ–Â <code>requestAnimationFrame</code>Â å›è°ƒå‡½æ•°ï¼‰</li>
<li>æœåŠ¡ç«¯æ¸²æŸ“</li>
<li>å®ƒè‡ªèº«æŠ›å‡ºæ¥çš„é”™è¯¯ï¼ˆå¹¶éå®ƒçš„å­ç»„ä»¶ï¼‰</li>
</ul>
<hr>
<p><strong>ï¼ˆå®Œï¼‰</strong></p>
<h1 data-id="heading-88">å‚è€ƒèµ„æ–™</h1>
<p><strong>1. <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgoshakkk.name%2Fcontrolled-vs-uncontrolled-inputs-react%2F" target="_blank" rel="nofollow noopener noreferrer" title="https://goshakkk.name/controlled-vs-uncontrolled-inputs-react/" ref="nofollow noopener noreferrer">controlled-vs-uncontrolled</a> å—æ§ç»„ä»¶ä¸éå—æ§ç»„ä»¶çš„åŒºåˆ«</strong></p>
<p><strong>2. <a href="https://link.juejin.cn/?target=https%3A%2F%2Freact.docschina.org%2F" target="_blank" rel="nofollow noopener noreferrer" title="https://react.docschina.org/" ref="nofollow noopener noreferrer">React</a> Reactå®˜æ–¹æ–‡æ¡£</strong></p>
<p><strong>3. <a href="https://link.juejin.cn/?target=https%3A%2F%2Freact-router.docschina.org%2F" target="_blank" rel="nofollow noopener noreferrer" title="https://react-router.docschina.org/" ref="nofollow noopener noreferrer">React-router</a> React-Routeræ–‡æ¡£</strong></p>
<hr>
<h1 data-id="heading-89">æ„Ÿè°¢ğŸ˜˜</h1>
<p>è¿™ç¯‡æ–‡ç« çº¯ç²¹æ˜¯ä»æˆ‘ä¸ªäººå­¦ä¹ Reactçš„è§’åº¦, å»æ•™è‡ªå·±æ€ä¹ˆå­¦ä¹ React. å¯èƒ½å¾ˆå¤šåœ°æ–¹æ‚¨è§‰å¾—æˆ‘ä¸€ç¬”å¸¦è¿‡, æˆ–æ˜¯è®²å¾—ä¸æ­£ç¡®, ä¹Ÿå¸Œæœ›æ‚¨èƒ½æå‡ºæ¥. è¿™ä¹Ÿæ˜¯æˆ‘è‡ªå·±å¯èƒ½å­¦ä¹ ä¸åˆ°ä½çš„åœ°æ–¹, <strong>ååˆ†æ„Ÿè°¢, æ‚¨èƒ½çœ‹åˆ°è¿™é‡Œ</strong></p>
<hr>
<p><strong>å¦‚æœè§‰å¾—æ–‡ç« å†…å®¹å¯¹ä½ æœ‰å¸®åŠ©:</strong></p>
<ul>
<li>â¤ï¸æ¬¢è¿å…³æ³¨ç‚¹èµå“¦! æˆ‘ä¼šå°½æœ€å¤§åŠªåŠ›äº§å‡ºé«˜è´¨é‡çš„æ–‡ç« </li>
</ul>
<p>ä¸ªäººå…¬ä¼—å·: <strong>å‰ç«¯Link</strong><br>
è”ç³»ä½œè€…: <strong>linkcyd</strong> ğŸ˜</p></div>  
</div>
            