
---
title: '前端项目代码流程规范化常见工具'
categories: 
 - 编程
 - 掘金
 - 分类
headimg: 'https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/94cbea5af01b48b38154f874af7b6e1c~tplv-k3u1fbpfcp-watermark.image'
author: 掘金
comments: false
date: Sun, 18 Jul 2021 02:24:40 GMT
thumbnail: 'https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/94cbea5af01b48b38154f874af7b6e1c~tplv-k3u1fbpfcp-watermark.image'
---

<div>   
<div class="markdown-body"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/94cbea5af01b48b38154f874af7b6e1c~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>前端项目开发中，常见的本地规范化也是非常重要的，简单了解和搭建一套可以完全使用的规范化标准，这个严格意义来说是<code>Devops</code>的始发站。</p>
<p>本地部分使用 <code>npx</code>执行二进制，这个<code>npm>7.x</code>，可以<code>npm i npm -g</code>升级一下。</p>
<p>本文目的也是快速上手搭建一套适合自己的项目开发标准，适合扩展和封装，尝试使用一文完成前端本地代码开发的全部的讲解。</p>
<h1 data-id="heading-0">1: husky</h1>
<p><strong>功能作用</strong>：可以简单增加<code>git hooks</code>，非常有利于项目持续集成和代码检测。</p>
<pre><code class="hljs language-nodejs copyable" lang="nodejs">npm install -D husky
<span class="copy-code-btn">复制代码</span></code></pre>
<p>在 <code>packgae.json</code>中添加<code>prepare</code>脚本,会在每次<code>npm install</code>之后执行<code>prepare</code>,
该命令会创建<code>.husky/</code>目录并指定该目录为<code>git hooks</code>所在的目录。</p>
<pre><code class="hljs language-js copyable" lang="js"> &#123;
  <span class="hljs-string">"scripts"</span>: &#123;
    <span class="hljs-string">"prepare"</span>: <span class="hljs-string">"husky install"</span>
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<p>添加一个 <code>pre-hooks</code>, 该钩子就会在你执行 <code>git commit</code> 的触发, 如果在这里阶段我们做一些 <code>lint检查</code>、<code>单元测试</code>、<code>代码美化</code>等操作比较符合持续集成的理念。</p>
<pre><code class="hljs language-js copyable" lang="js"> npx husky add .husky/pre-commit <span class="hljs-string">"npm run test"</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<p>可以在本地<code>.husky</code>里面查看到<code>pre-commit</code>命令。</p>
<p>再新增一个 <code>commit-hoos</code>:</p>
<pre><code class="hljs language-js copyable" lang="js"> npx husky add .husky/commit-msg <span class="hljs-string">'npx --no-install commitlint --edit "$1"'</span> 
<span class="copy-code-btn">复制代码</span></code></pre>
<p><code>commitlint</code> 是负责校验 <code>commit</code>提交规范的，下面会涉及到。</p>
<p>另外，在项目的<code>.git/hooks</code>目录中，有一些 <code>.sample</code> 结尾的钩子示例脚本，如果想启用对应的钩子，只需手动删除后缀，即可。（删除某一个 <code>hook</code> 的后缀 <code>.sample</code> 即可启用该 <code>hook</code> 脚本，默认是不启用的。）</p>
<p><code>husky</code>属于已经上层封装，因此兼容和使用更加方便。具体使用一般会配合下面几个工具来进行。</p>
<h1 data-id="heading-1">2: lint-staged</h1>
<h3 data-id="heading-2">lint</h3>
<p><code>Lint</code> 就是对代码做静态分析,并且试图找出问题的分析工具，一般各类语言都有支持。意义是减少低级的代码错误和排查成本，节约时间资源，毕竟开发中，时间和排期是非常重要的。</p>
<p><code>github</code>上列举出来的前端常见的工具<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fcollections%2Fclean-code-linters" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/collections/clean-code-linters" ref="nofollow noopener noreferrer">lint 常用列表</a>。下面介绍的 <code>eslint</code> 和 <code>pretter</code>都是<code>lint</code> 常见的一些工具。</p>
<p><strong>时机的选择应该有个时间点： 本地开发过程中 <code>ide</code> 和提交代码 <code>git hooks</code> 两个阶段来做。</strong></p>
<h3 data-id="heading-3">lint-staged</h3>
<p><code>lint-staged</code> 一个仅仅拦截校验<code> Git</code> 代码<strong>暂存区</strong>文件(是指被<code>git add</code> 最新添加的文件的区域)的工具，专门检测每一次新提交的代码的静态检查，上高速前的一个收费站。</p>
<p><strong>安装</strong></p>
<pre><code class="hljs language-js copyable" lang="js">npm install -D lint-staged
yarn add --dev lint-staged
<span class="copy-code-btn">复制代码</span></code></pre>
<p>常用参数解析：</p>
<pre><code class="hljs language-js copyable" lang="js"> npx lint-staged --help
 <span class="hljs-attr">Options</span>:
      -V, --version                      输出版本号
      --allow-empty                      当任务撤消所有分阶段的更改时允许空提交（默认值：<span class="hljs-literal">false</span>）
      -c, --config [path]                配置文件的路径
      -d, --debug                        打印其他调试信息（默认值：<span class="hljs-literal">false</span>）
      -p, --concurrent <parallel tasks>  要同时运行的任务数，或者为<span class="hljs-literal">false</span>则要连续运行任务（默认值：<span class="hljs-literal">true</span>）
      -q, --quiet                        自己的控制台输出（默认值：<span class="hljs-literal">false</span>）
      -r, --relative                     将相对文件路径传递给任务（默认值：<span class="hljs-literal">false</span>）
      -x, --shell                        跳过任务解析以更好地支持shell（默认值：<span class="hljs-literal">false</span>）
      -h, --help                         输出用法信息
<span class="copy-code-btn">复制代码</span></code></pre>
<p>然后在 <code>package.json</code>中新增配置：</p>
<pre><code class="hljs language-js copyable" lang="js"> <span class="hljs-string">"husky"</span>: &#123;
    <span class="hljs-string">"hooks"</span>: &#123;
      <span class="hljs-comment">//提交前hooks 提交前执行lint-staged的可执行文件</span>
      <span class="hljs-string">"pre-commit"</span>: <span class="hljs-string">"npx lint-staged"</span>,
      
      <span class="hljs-comment">// 校验commit 书写规范，下文具体讲解</span>
      <span class="hljs-string">"commit-msg"</span>: <span class="hljs-string">"commitlint -e $1"</span> 
    &#125;
  &#125;,
  <span class="hljs-string">"lint-staged"</span>: &#123;
    <span class="hljs-string">"./src/*.&#123;js,jsx&#125;"</span>: [
      <span class="hljs-string">"eslint src --fix"</span>,   
      <span class="hljs-string">"npx prettier --write"</span>,  <span class="hljs-comment">// 直接美化原文件</span>
      <span class="hljs-string">"git add "</span>
    ]
  &#125;,
<span class="copy-code-btn">复制代码</span></code></pre>
<h1 data-id="heading-4">3：eslint</h1>
<blockquote>
<p>是一个开源的 <code>JavaScript</code> 的 <code>linting</code> 工具，使用 <code>espree</code> 将 <code>JavaScript</code> 代码解析成抽象语法树 <code>(AST)</code>，然后通过<code>AST</code> 来分析我们代码，从而给予我们两种提示：</p>
</blockquote>
<ul>
<li><strong>代码质量问题</strong>：使用方式有可能有问题(problematic patterns)</li>
<li><strong>代码风格问题</strong>：风格不符合一定规则 (doesn’t adhere to certain style guidelines)。</li>
</ul>
<p>快速体验案例：</p>
<pre><code class="hljs language-js copyable" lang="js">   <span class="hljs-comment">// 1: 项目创建</span>
   mkdir eslintApp && cd eslintApp && touch index.js & npm i eslint -D & touch .eslintrc.js
   
   <span class="hljs-comment">// 2； .eslintrc.js</span>
   &#123;
    <span class="hljs-string">"rules"</span>: &#123;
      <span class="hljs-string">"indent"</span>: <span class="hljs-number">2</span>,
      <span class="hljs-string">"no-unused-vars"</span>: <span class="hljs-number">2</span>,
      <span class="hljs-string">"no-alert"</span>: <span class="hljs-number">2</span>
    &#125;, 
    <span class="hljs-string">"env"</span>: &#123;
       <span class="hljs-string">"browser"</span>: <span class="hljs-literal">true</span>
     &#125;
   &#125;
   
   <span class="hljs-comment">// 3:  index.js > 如下图</span>
   
   <span class="hljs-comment">// -fix 该选项指示 ESLint 试图修复尽可能多的问题, 输出的是未能修复的</span>
   <span class="hljs-comment">// 4: npx eslint index.js --fix</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5e3bbd02dbd44d2ba1449edb3314ddce~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer">
可以看到，具体的错误信息和提交失败信息。整个 <code>eslint</code>核心是配置文件，下面贴出我本地所有的配置文件和说明信息。</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-built_in">module</span>.exports = &#123;
  <span class="hljs-attr">root</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// ESLint 一旦发现配置文件中有 "root": true，它就会停止在父级目录中寻找。</span>

  <span class="hljs-comment">// Js 运行在不同的环境, 会有不同的全局变量, 例如在 Node 环境中会存在 global 变量, 当运行在 browser 中会存在 window 变量。</span>
  <span class="hljs-comment">// ESlint 会根据当前的运行环境来识别代码中的全局变量, 如果执行环境与全局变量不符合时, 将会报错</span>
  <span class="hljs-comment">// 设置eslint所处的环境，避免检查一些全局变量，环境可以选多个,比如你去掉node,就会报一些变量undefined的错</span>
  <span class="hljs-attr">env</span>: &#123;
    <span class="hljs-attr">browser</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">node</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">es6</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// es6 语法环境</span>
  &#125;, 

  <span class="hljs-comment">// 默认ESlint使用Espree作为解析器，但是一旦我们使用babel的话，</span>
  <span class="hljs-comment">// 我们需要用babel-eslint，使得eslint和babel更好的配合。</span>
  <span class="hljs-attr">parser</span>: <span class="hljs-string">"@babel/eslint-parser"</span>,
  
  <span class="hljs-comment">// ESlint 的解析器选项可以在配置文件中使用 parserOptions 属性设置。可用的选项有：</span>
  <span class="hljs-attr">parserOptions</span>: &#123;

    <span class="hljs-comment">// 默认支持es35,es6以上新语法如果支持就需要配置</span>
    <span class="hljs-comment">// 支持 ES6 语法并不意味着同时支持新的 ES6 全局变量或类型(比如 Set 等新类型), </span>
    <span class="hljs-comment">// 还需要 &#123;"env": &#123;"es6": true&#125;&#125; (当开启了这个配置后会自动开启对 ES6 语法的支持)</span>
    <span class="hljs-attr">ecmaVersion</span>: <span class="hljs-number">6</span>, 
    <span class="hljs-attr">sourceType</span>: <span class="hljs-string">"module"</span>,
    <span class="hljs-attr">requireConfigFile</span>: <span class="hljs-literal">false</span>,

    <span class="hljs-comment">// 表示你想使用的额外的语言特性:</span>
    <span class="hljs-attr">ecmaFeatures</span>: &#123;
      <span class="hljs-comment">// 对 JSX 语法的支持不用于对 React 的支持。React 使用了一些特定的 ESLint 无法识别的 JSX 语法。</span>
      <span class="hljs-comment">// 如果你正在使用 React 并且想要 React 语义支持，使用 eslint-plugin-react。</span>
      <span class="hljs-attr">jsx</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-comment">// globalReturn: false, 允许在全局作用域下使用 return 语句</span>
      <span class="hljs-comment">// impliedStrict :false, 启用全局 strict mode</span>
      <span class="hljs-comment">// experimentalObjectRestSpread : 启用实验性的 object rest/spread properties 支持</span>

    &#125;,
  &#125;, <span class="hljs-comment">// 解析器的配置</span>

  <span class="hljs-comment">/**
   * ESlint 提供了众多可配置的 Rules, 一个一个配置是非常麻烦的。 ESlint 支持从已有的配置中继承启动的规则。
   * 参数是继承一些比较出名的eslint配置，开箱即用，这里用的eslint-config-standard，
   * 比较出名的还有eslint-config-airbnb，具体用法去npm搜索
   * 
   * 1: ESlint 提供了 eslint:recommended 配置， 它提供了一系列核心规则， 可以使用 extends 属性来继承这些规则。
   * 2: "plugin:node/recommended: 需要单独的插件来提供：eslint-plugin-node
   * 3; prettier 也需要单独的插件
   * 
   * 4： 其他标准： npm install -D eslint-plugin-standard
      &#123;
          "extends": ["eslint:recommended", "standard"]
      &#125;

    在 ESlint 中, 使用外部 npm 包的时候， 省略前面 exlint-plugin-
    如果需要覆盖 extends 中的配置, 可以在 rules 字段中进行覆盖 :

   */</span>

  <span class="hljs-comment">// 插件一定要在plugin 里面先调用，参考  prettier</span>
  <span class="hljs-comment">// react:      "extends": ["eslint:recommended", "plugin:react/recommended"]</span>
  <span class="hljs-attr">extends</span>: [<span class="hljs-string">"eslint:recommended"</span>, <span class="hljs-string">"plugin:node/recommended"</span>, <span class="hljs-string">"prettier"</span>],


  <span class="hljs-comment">// 在 ESlint 附带有大量的规则， 可以使用上面提到的配置方式添加项目的 rules 规则。</span>

  <span class="hljs-comment">/**
   * 第一个参数错误等级：
   *  0 或者 off(关闭规则)、 
   *  1 或者 warn(开启规则, 使用警告级别的错误, 不会导致程序退出)、 
   *  2 或者 error(开启规则, 使用错误级别的错误, 会导致程序退出)
   * 
   *  第二个参数：
      在例子中分别配置了 indent 为默认4个空格、2个空格、tab缩进。
   * 
   */</span>
  <span class="hljs-attr">rules</span>: &#123;

    <span class="hljs-comment">// 使用 2 个空格。 错误等级为 2</span>
    <span class="hljs-comment">// "indent": [2, 2]</span>

    <span class="hljs-comment">// 使用 tab 缩进。 错误等级为 2</span>
   <span class="hljs-string">"indent"</span>: [<span class="hljs-number">2</span>, <span class="hljs-string">"tab"</span>],

    <span class="hljs-string">"node/no-unsupported-features/es-syntax"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"node/no-extraneous-import"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"node/no-unsupported-features/node-builtins"</span>: <span class="hljs-number">0</span>, 
    <span class="hljs-string">"node/no-extraneous-require"</span>: <span class="hljs-number">0</span>, 
    <span class="hljs-string">"node/no-deprecated-api"</span>: <span class="hljs-number">0</span>, 
    <span class="hljs-string">"node/no-missing-import"</span>: <span class="hljs-number">0</span>, 
    <span class="hljs-string">"node/no-unpublished-import"</span>: <span class="hljs-number">0</span>, 
    <span class="hljs-string">"node/no-missing-require"</span>: <span class="hljs-number">0</span>, 
    <span class="hljs-string">"node/no-unpublished-require"</span>: <span class="hljs-number">0</span>,

    <span class="hljs-string">"react/prop-types"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"react/display-name"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"react/no-children-prop"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"react/jsx-no-target-blank"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"react/no-string-refs"</span>: <span class="hljs-number">0</span>, 
    <span class="hljs-string">"react/no-direct-mutation-state"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"react/no-find-dom-node"</span>: <span class="hljs-number">0</span>, 
    <span class="hljs-string">"react/jsx-no-duplicate-props"</span>: <span class="hljs-number">0</span>, 

    <span class="hljs-comment">// quotes: [1, "single"],</span>
    <span class="hljs-attr">complexity</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">eqeqeq</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"max-len"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"no-case-declarations"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">camelcase</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"no-empty-function"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"array-bracket-spacing"</span>: [<span class="hljs-number">2</span>, <span class="hljs-string">"never"</span>],
    <span class="hljs-string">"comma-spacing"</span>: [
      <span class="hljs-number">2</span>,
      &#123;
        <span class="hljs-attr">before</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">after</span>: <span class="hljs-literal">true</span>,
      &#125;,
    ],
    <span class="hljs-string">"computed-property-spacing"</span>: [<span class="hljs-number">2</span>, <span class="hljs-string">"never"</span>],
    <span class="hljs-string">"keyword-spacing"</span>: <span class="hljs-number">2</span>,
    <span class="hljs-string">"space-before-blocks"</span>: [<span class="hljs-number">2</span>, <span class="hljs-string">"always"</span>],
    <span class="hljs-string">"space-in-parens"</span>: [<span class="hljs-number">2</span>, <span class="hljs-string">"never"</span>],
    <span class="hljs-string">"space-infix-ops"</span>: <span class="hljs-number">2</span>,
    <span class="hljs-string">"space-unary-ops"</span>: [
      <span class="hljs-number">2</span>,
      &#123;
        <span class="hljs-attr">words</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">nonwords</span>: <span class="hljs-literal">false</span>,
      &#125;,
    ],
    <span class="hljs-string">"spaced-comment"</span>: [
      <span class="hljs-number">2</span>,
      <span class="hljs-string">"always"</span>,
      &#123;
        <span class="hljs-attr">markers</span>: [
          <span class="hljs-string">"global"</span>,
          <span class="hljs-string">"globals"</span>,
          <span class="hljs-string">"eslint"</span>,
          <span class="hljs-string">"eslint-disable"</span>,
          <span class="hljs-string">"*package"</span>,
          <span class="hljs-string">"!"</span>,
        ],
      &#125;,
    ],
    <span class="hljs-string">"no-useless-escape"</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// 之后需要打开</span>
    <span class="hljs-string">"no-undef"</span>: <span class="hljs-number">2</span>, <span class="hljs-comment">// 之后需要打开</span>
    <span class="hljs-string">"no-unused-vars"</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// 之后需要打开</span>
    <span class="hljs-string">"guard-for-in"</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// 之后需要打开</span>
    <span class="hljs-string">"no-empty"</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// 之后需要打开</span>
    <span class="hljs-string">"default-case"</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// 之后需要打开</span>
    <span class="hljs-string">"no-process-exit"</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// 之后需要打开</span>
    <span class="hljs-string">"no-prototype-builtins"</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// 之后需要打开</span>
    <span class="hljs-string">"no-control-regex"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"no-fallthrough"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"no-mixed-spaces-and-tabs"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"no-redeclare"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"no-inner-declarations"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"no-irregular-whitespace"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"prettier/prettier"</span>: [
      <span class="hljs-string">"error"</span>,
      &#123;
        <span class="hljs-attr">endOfLine</span>: <span class="hljs-string">"auto"</span>,
      &#125;,
    ],
  &#125;, <span class="hljs-comment">// 这里只列举了几个示例，第一个参数是报错的级别，第二个是希望设置的值，有三个值off,warn,error(对应0,1,2)，具体的参数配置,详情看https://eslint.org/docs/rules/</span>


  <span class="hljs-comment">// 当访问源文件未定义的变量名时, no-undef 将会发出警告。 这是可以在 ESlint 配置文件中使用 globals 单独设置一个全局变量。</span>
  <span class="hljs-comment">// eslint检查跳过的一些全局变量，eg： lodash,jquery</span>
  <span class="hljs-attr">globals</span>: &#123;
    <span class="hljs-attr">document</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">localStorage</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">window</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">__dirname</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">importScripts</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">testVar</span>: <span class="hljs-literal">true</span>  <span class="hljs-comment">// 不用在定义，就可以直接使用了 </span>
  &#125;,

  <span class="hljs-comment">/**
   * 插件是一个 npm 包，通常输出一个或多个命名的规则配置。 上面说到可以 extends 属性来继承规则， 
   * 我们可以使用 plugins 属性来引入 一个 npm 包, 然后使用 extends 属性来继承这个 npm 包的某个规则集。
   * 
   * eg: npm install eslint-plugin-react --save-dev
   */</span>
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-comment">// "react",</span>
    <span class="hljs-comment">// "html"</span>
    <span class="hljs-string">"prettier"</span>,
  ],
&#125;;

<span class="copy-code-btn">复制代码</span></code></pre>
<p><strong>上面配置涉及到了以下依赖项目：</strong></p>
<pre><code class="hljs language-js copyable" lang="js">prettier

eslint-plugin-prettier
eslint-config-prettier  <span class="hljs-comment">// 这个一定要安装是，extends使用的</span>

eslint-plugin-node 
eslint-plugin-react 

@babel/eslint-parser

<span class="hljs-comment">// 注释</span>
eslint-plugin-html

eslint-plugin-standard
eslint-config-standard

<span class="copy-code-btn">复制代码</span></code></pre>
<p><code>.eslintignore</code> 文件告诉 <code>ESLint</code>去忽略特定的文件和目录。使用<code>glob</code>模式匹配路径径应该忽略检测。
或 <code>package.json</code> 文件中配置 <code>eslintIgnore</code> 字段来指定忽略文件</p>
<pre><code class="hljs language-js copyable" lang="js">&#123;
    <span class="hljs-string">"eslintIgnore"</span>: [<span class="hljs-string">"main.js"</span>]
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h1 data-id="heading-5">4：pretter</h1>
<p><strong>作用：</strong> 利用定义的代码书写标准，在特定的时机来美化代码书写，达到协同开发中书写规范的同步性，是开发流程规范必不可少的一个步骤。一般会配合 <code>eslint</code>来使用。</p>
<pre><code class="hljs language-js copyable" lang="js">npm i -D prettier
<span class="copy-code-btn">复制代码</span></code></pre>
<p>快速上手使用：</p>
<pre><code class="hljs language-js copyable" lang="js"> <span class="hljs-comment">// index.js</span>
<span class="hljs-keyword">var</span> a = <span class="hljs-number">100</span>;<span class="hljs-keyword">var</span> b = <span class="hljs-number">200</span>;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">t</span>(<span class="hljs-params"></span>)</span>&#123;<span class="hljs-keyword">return</span> <span class="hljs-number">100</span>&#125;;

<span class="hljs-comment">// npx prettier -w index.js</span>
<span class="hljs-comment">// npx prettier --write package.json</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<p>上面使用命令行的形式使用默认的格式来格式化了下<code>index.js</code> 和 <code>package.json</code>这两个文件。</p>
<p>配置文件： <code>.prettierrc </code>,有三类 <code>.js</code> ,<code>.json</code> ,<code>.yaml</code>，下面是我项目中的配置。</p>
<pre><code class="hljs language-js copyable" lang="js">    <span class="hljs-built_in">module</span>.exports = &#123;
      <span class="hljs-attr">extends</span>: [<span class="hljs-string">'airbnb'</span>, <span class="hljs-string">'prettier'</span>, <span class="hljs-string">'prettier/react'</span>],
      <span class="hljs-attr">printWidth</span>: <span class="hljs-number">200</span>, <span class="hljs-comment">// 超过最大值换行</span>
      <span class="hljs-attr">htmlWhitespaceSensitivity</span>: <span class="hljs-string">'ignore'</span>,
      <span class="hljs-attr">semi</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 结尾不用分号</span>
      <span class="hljs-attr">disableLanguages</span>: [<span class="hljs-string">'vue'</span>], <span class="hljs-comment">// 不格式化vue文件，vue文件的格式化单独设置</span>
      <span class="hljs-attr">trailingComma</span>: <span class="hljs-string">'none'</span>, <span class="hljs-comment">// 是否使用尾逗号，有三个可选值"<none|es5|all>", 即JSON对象的最后一个属性后面，不需要逗号</span>
      <span class="hljs-attr">tabWidth</span>: <span class="hljs-number">4</span>,
    &#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<p>在上面的 <code>lint-staged</code>和<code>eslint</code>配置我们会发现都使用了<code>prettier</code>,在项目中一般也是直接配合使用的。</p>
<h1 data-id="heading-6">5: commitlint 和 git-cz</h1>
<p>背景： 多人协作团队中统一的提交分隔非常有利于管理和代码查看，清晰的<code>commit</code>可以完全更加语意话。
上文中<code>husky</code>部分我们增加了一个<code>hooks:commitlint</code>，这里深入介绍下具体的使用。</p>
<h3 data-id="heading-7">步骤 1</h3>
<pre><code class="hljs language-js copyable" lang="js">  npm install -g @commitlint/cli @commitlint/config-conventional
<span class="copy-code-btn">复制代码</span></code></pre>
<p>全局安装方便本地的 <code>commitlint.config.js</code>会依赖到。</p>
<h3 data-id="heading-8">步骤 2</h3>
<p><code>git-cz</code><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fstreamich%2Fgit-cz" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/streamich/git-cz" ref="nofollow noopener noreferrer">仓库地址</a> 是一个集成化的工具，使用起来更加的简单和方便。</p>
<pre><code class="copyable">npm install -g commitizen git-cz 
npx commitizen init git-cz --save-dev --save-exact
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-9">步骤 3</h3>
<p>本地必须新增<code>commitlint.config.js</code>文件，该文件主要负责定义输入是否符合的标准，在<code>hooks</code>阶段会触发。</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-built_in">module</span>.exports = &#123;
  <span class="hljs-attr">extends</span>: [<span class="hljs-string">"@commitlint/config-conventional"</span>],
  <span class="hljs-attr">rules</span>: &#123;
    <span class="hljs-string">"type-enum"</span>: [
      <span class="hljs-number">2</span>,
      <span class="hljs-string">"always"</span>,
      [
        <span class="hljs-string">"feat"</span>,
        <span class="hljs-string">"fix"</span>,
        <span class="hljs-string">"docs"</span>,
        <span class="hljs-string">"style"</span>,
        <span class="hljs-string">"refactor"</span>,
        <span class="hljs-string">"perf"</span>,
        <span class="hljs-string">"test"</span>,
        <span class="hljs-string">"build"</span>,
        <span class="hljs-string">"ci"</span>,
        <span class="hljs-string">"chore"</span>,
        <span class="hljs-string">"revert"</span>,
      ],
    ],
    <span class="hljs-string">"subject-full-stop"</span>: [<span class="hljs-number">0</span>, <span class="hljs-string">"never"</span>],
    <span class="hljs-string">"subject-case"</span>: [<span class="hljs-number">0</span>, <span class="hljs-string">"never"</span>],
  &#125;,
&#125;;

<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-10">步骤 4</h3>
<p>代码提交完的时候，就可以执行<code>git cz</code> 执行<code>commit</code>。</p>
<h3 data-id="heading-11">补充知识</h3>
<p><code>Conventional Commits</code> <strong>约定式提交规范</strong>:</p>
<p><code>Git</code> 提交说明可分为三个部分：<code>Header[ type+ scope + subject ]</code>、<code>Body</code>和<code>Footer</code>。</p>
<p>常用的 <code>type</code> 类型</p>
<ul>
<li><code>build</code>编译相关的修改，例如发布版本、对项目构建或者依赖的改动</li>
<li><code>chore</code>其他修改, 比如改变构建流程、或者增加依赖库、工具等</li>
<li><code>ci</code>持续集成修改</li>
<li><code>docs</code>文档修改</li>
<li><code>feat</code>新特性、新功能</li>
<li><code>fix</code>修改bug</li>
<li><code>perf</code>优化相关，比如提升性能、体验</li>
<li><code>refactor</code>代码重构</li>
<li><code>revert</code>回滚到上一个版本</li>
<li><code>style</code>代码格式修改, 注意不是 css 修改</li>
<li><code>test</code>测试用例修改</li>
</ul>
<p><code>scope</code>说明<code>commit</code>影响的范围，可以省略。
<code>subject</code> 是<code>commit</code>的简短描述,可以省略。</p>
<p><strong>Body</strong>
<code>commit</code>的详细描述，说明代码提交的详细说明。</p>
<p><strong>Footer</strong>
如果代码的提交是不兼容变更或关闭缺陷，则<code>Footer</code>必需，否则可以省略。</p>
<p><strong>最佳实践：</strong></p>
<ul>
<li>一个 <code>commit</code> 只做一件事情，而不是做到一半的工作。</li>
<li>提交前要经过测试。</li>
<li>严格按照 <code>commit</code> 上面定义的提交规范来。</li>
</ul>
<h1 data-id="heading-12">6: 扩展</h1>
<h3 data-id="heading-13">1：捕获eslint</h3>
<p>一般继承开发的，CD/CI过程中我们当然不希望所有的事情都是插件在外部完成，希望程序内部也是可以捕获到的。</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">const</span> shell = <span class="hljs-built_in">require</span>(<span class="hljs-string">"shelljs"</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>);
<span class="hljs-keyword">const</span> indexDir = path.resolve(__dirname, <span class="hljs-string">"index.js"</span>);
<span class="hljs-keyword">const</span> eslintBin = path.resolve(__dirname, <span class="hljs-string">"node_modules/.bin/eslint"</span>);

<span class="hljs-keyword">const</span> prettierBin = path.resolve(__dirname, <span class="hljs-string">"node_modules/.bin/prettier"</span>);

<span class="hljs-comment">// eslint</span>
<span class="hljs-keyword">const</span> res = shell.exec(<span class="hljs-string">`<span class="hljs-subst">$&#123;eslintBin&#125;</span> <span class="hljs-subst">$&#123;indexDir&#125;</span> --fix`</span>);

<span class="hljs-keyword">if</span> (!res.code) &#123;
  <span class="hljs-comment">// 没有错误自动prettier </span>
  <span class="hljs-keyword">const</span> preRes = shell.exec(<span class="hljs-string">`<span class="hljs-subst">$&#123;prettierBin&#125;</span> -wc index.js`</span>);
&#125; <span class="hljs-keyword">else</span> &#123;
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"opps,errors!"</span>);
&#125;

<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"==="</span>, res);
<span class="copy-code-btn">复制代码</span></code></pre></div>  
</div>
            