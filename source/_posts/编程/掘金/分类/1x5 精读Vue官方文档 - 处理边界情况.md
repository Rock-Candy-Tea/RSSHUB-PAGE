
---
title: '1x5 ç²¾è¯»Vueå®˜æ–¹æ–‡æ¡£ - å¤„ç†è¾¹ç•Œæƒ…å†µ'
categories: 
 - ç¼–ç¨‹
 - æ˜é‡‘
 - åˆ†ç±»
headimg: 'https://picsum.photos/400/300?random=2945'
author: æ˜é‡‘
comments: false
date: Sat, 10 Jul 2021 03:59:45 GMT
thumbnail: 'https://picsum.photos/400/300?random=2945'
---

<div>   
<div class="markdown-body"><style>@charset "UTF-8";.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child&#123;margin-top:-1.5rem;margin-bottom:1rem&#125;.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before&#123;content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em&#125;.markdown-body h1&#123;position:relative;font-size:2.5rem;margin-bottom:5px&#125;.markdown-body h1:before&#123;font-size:2.5rem&#125;.markdown-body h2&#123;padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:1.5rem;padding-bottom:0&#125;.markdown-body h4&#123;font-size:1.25rem&#125;.markdown-body h5&#123;font-size:1rem&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body strong&#123;color:#3eaf7c&#125;.markdown-body img&#123;max-width:100%;border-radius:2px;display:block;margin:auto;border:3px solid rgba(62,175,124,.2)&#125;.markdown-body hr&#123;border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-weight:700;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75;border-radius:6px;border:2px solid #3eaf7c&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;font-weight:500;text-decoration:none;color:#3eaf7c&#125;.markdown-body a:active,.markdown-body a:hover&#123;border-bottom:1.5px solid #3eaf7c&#125;.markdown-body a:before&#123;content:"â‡²"&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c&#125;.markdown-body thead&#123;background:#3eaf7c;color:#fff;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:rgba(62,175,124,.2)&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:.5rem solid;border-color:#42b983;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body details&#123;outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px&#125;.markdown-body details summary&#123;cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px&#125;.markdown-body details summary::-webkit-details-marker&#123;color:#3eaf7c&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body ol li::marker&#123;color:#3eaf7c&#125;.markdown-body ul li&#123;list-style:none&#125;.markdown-body ul li:before&#123;content:"â€¢";margin-right:4px;color:#3eaf7c&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><h2 data-id="heading-0"><a href="https://juejin.cn/column/6976899977133948965" target="_blank" title="https://juejin.cn/column/6976899977133948965">ç²¾è¯» Vue å®˜æ–¹æ–‡æ¡£ç³»åˆ—</a> ğŸ‰</h2>
<h2 data-id="heading-1">è®¿é—®å…ƒç´  & ç»„ä»¶</h2>
<h3 data-id="heading-2">$root</h3>
<p>è®¿é—®<strong>æ ¹ç»„ä»¶å®ä¾‹</strong></p>
<h3 data-id="heading-3">$parent</h3>
<p>è·å–<strong>çˆ¶ç»„ä»¶å®ä¾‹</strong>ï¼Œæ”¯æŒå¤šæ¬¡è°ƒç”¨ï¼Œè·å–è¿ç»­å¤šå±‚çˆ¶çº§çš„å®ä¾‹ã€‚</p>
<h3 data-id="heading-4">ref & $refs</h3>
<p><strong>è·å–å­ç»„ä»¶çš„å®ä¾‹</strong></p>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-tag"><<span class="hljs-name">children</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"child"</span> /></span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><strong>è·å– DOM å…ƒç´ çš„å¯¹è±¡å¼•ç”¨ã€‚</strong></p>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-tag"><<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"input"</span> /></span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>æœ€ç»ˆï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç»„ä»¶çš„ <code>$refs</code> å±æ€§ä¸­è®¿é—®è¿™äº› <code>ref</code> çš„å¯¹åº”çš„å¼•ç”¨ã€‚</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-title">mountd</span>(<span class="hljs-params"></span>)</span>&#123;
    <span class="hljs-built_in">this</span>.$refs.child.input.foucs();
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<blockquote>
<p>å½“ <code>ref</code> å’Œ <code>v-for</code> ä¸€èµ·ä½¿ç”¨çš„æ—¶å€™ï¼Œä½ å¾—åˆ°çš„ <code>ref</code> å°†ä¼šæ˜¯ä¸€ä¸ªåŒ…å«äº†å¯¹åº”æ•°æ®æºçš„è¿™äº›å­ç»„ä»¶çš„æ•°ç»„ã€‚</p>
</blockquote>
<h3 data-id="heading-5">ä¾èµ–æ³¨å…¥</h3>
<p>ä½¿ç”¨ <code>provide</code> æä¾›ä¾èµ–ï¼Œå†ä½¿ç”¨ <code>inject</code> æ³¨å…¥ä¾èµ–ã€‚</p>
<p><strong>Provider</strong></p>
<pre><code class="hljs language-js copyable" lang="js">provide: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;
    <span class="hljs-keyword">return</span> &#123;
        <span class="hljs-attr">getMapData</span>: <span class="hljs-built_in">this</span>.getData
    &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><strong>Consumer</strong></p>
<pre><code class="hljs language-js copyable" lang="js">inject:[<span class="hljs-string">'getMapData'</span>]
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>è¿™å¯¹ç»„ä»¶é€‰é¡¹å¿…é¡»è¦ä¸€èµ·ä½¿ç”¨ã€‚ä»¥å…è®¸ä¸€ä¸ªç¥–å…ˆç»„ä»¶å‘å…¶æ‰€æœ‰åä»£ç»„ä»¶æ³¨å…¥ä¸€ä¸ªä¾èµ–ï¼Œä¸è®ºç»„ä»¶çš„å±‚çº§æœ‰å¤šæ·±ã€‚</p>
<p><code>provide</code> çš„å€¼æ˜¯ä¸€ä¸ª<strong>å¯¹è±¡</strong>æˆ–è€…æ˜¯è¿”å›ä¸€ä¸ªå¯¹è±¡çš„<strong>å‡½æ•°</strong>ã€‚å¯¹è±¡çš„ key ä¾¿æ˜¯å‘å­å­™ç»„ä»¶ä¸­æ³¨å…¥çš„ä¾èµ–ã€‚
<code>inject</code> çš„å€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªå¯¹è±¡é€‰é¡¹ã€‚è¿™äº›æ•°ç»„å…ƒç´ æˆ–è€…æ˜¯å¯¹è±¡çš„ key éƒ½æ˜¯å¯¹åº”çš„éƒ½æ˜¯ <code>provide</code> æ³¨å…¥çš„ä¾èµ–ã€‚</p>
<p>æœ€åŸºæœ¬çš„å½¢å¼ï¼š</p>
<pre><code class="hljs language-js copyable" lang="js">Vue.extend(&#123;
  <span class="hljs-attr">name</span>: <span class="hljs-string">"Parent"</span>,
  <span class="hljs-attr">provide</span>: &#123;
    <span class="hljs-attr">foo</span>: <span class="hljs-string">"bar"</span>,
  &#125;,
&#125;);

Vue.extend(&#123;
  <span class="hljs-attr">name</span>: <span class="hljs-string">"Son"</span>,
  <span class="hljs-attr">inject</span>: [<span class="hljs-string">"foo"</span>],
  <span class="hljs-function"><span class="hljs-title">created</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.foo);
  &#125;,
&#125;);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å½“ <code>provide</code> çš„å€¼ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œ<code>inject</code> çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡é€‰é¡¹ï¼š</p>
<pre><code class="hljs language-js copyable" lang="js">Vue.extend(&#123;
  <span class="hljs-attr">name</span>: <span class="hljs-string">"Parent"</span>,
  <span class="hljs-function"><span class="hljs-title">provide</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-keyword">return</span> &#123;
      <span class="hljs-attr">foo</span>: <span class="hljs-string">"bar"</span>,
    &#125;;
  &#125;,
&#125;);

Vue.extend(&#123;
  <span class="hljs-attr">name</span>: <span class="hljs-string">"Son"</span>,
  <span class="hljs-attr">inject</span>: &#123;
    <span class="hljs-attr">bar</span>: &#123;
      <span class="hljs-attr">from</span>: <span class="hljs-string">"foo"</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-string">"new bar"</span>,
    &#125;,
  &#125;,
&#125;);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å¦‚æœ <code>inject</code> çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆ<code>from</code> ä¾¿å¯ä»¥æŒ‡å®šæ¥æºï¼Œ<code>default</code> ç”¨æ¥è®¾ç½®ä¾èµ–çš„é»˜è®¤å€¼ã€‚ä½†æ˜¯å½“ä½ çš„ä¾èµ–é»˜è®¤å€¼ä¸æ˜¯ä¸€ä¸ªåŸºæœ¬ç±»å‹æ—¶ï¼Œå¿…é¡»è¦ä½¿ç”¨ä¸€ä¸ªå·¥å‚æ–¹æ³•æ¥è¿”å›è¿™ä¸ªå€¼ã€‚</p>
<pre><code class="hljs language-js copyable" lang="js">&#123;
  <span class="hljs-attr">inject</span>: &#123;
    <span class="hljs-attr">foo</span>: &#123;
      <span class="hljs-attr">from</span>: <span class="hljs-string">'bar'</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-function">() =></span> [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]
    &#125;
  &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>æœ€åï¼Œå› ä¸º <code>provide/inject</code> çš„åˆå§‹åŒ–ä¼˜å…ˆäº <code>props</code>,<code>data</code> ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¾¿å¯ä»¥ç”¨ä¾èµ–æ³¨å…¥æ¥åˆå§‹åŒ–å®ƒä»¬çš„é»˜è®¤å€¼ã€‚</p>
<pre><code class="hljs language-js copyable" lang="js">Vue.extend(&#123;
  <span class="hljs-attr">inject</span>: [<span class="hljs-string">"foo"</span>],
  <span class="hljs-attr">props</span>: &#123;
    <span class="hljs-attr">bar</span>: &#123;
      <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-function">() =></span> <span class="hljs-built_in">this</span>.foo,
    &#125;,
  &#125;,
  <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-keyword">return</span> &#123;
      <span class="hljs-attr">copy_bar</span>: <span class="hljs-built_in">this</span>.foo,
    &#125;;
  &#125;,
&#125;);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><strong>ä¾èµ–æ³¨å…¥è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</strong></p>
<ol>
<li>è§£å†³äº† <code>$parent</code> æ— æ³•å¾ˆå¥½çš„æ‰©å±•åˆ°æ›´æ·±å±‚çº§çš„åµŒå¥—ç»„ä»¶ä¸Šã€‚</li>
<li>ç»™ä»»æ„çš„åä»£æä¾›æ•°æ®æˆ–æ–¹æ³•ï¼Œå…å»äº†å¤šå±‚çš„ Prop ä¼ é€’ã€‚</li>
<li>ä»»æ„çš„åä»£ä¹Ÿä¸éœ€è¦å…³å¿ƒ property æ˜¯ä»ä½•å¤„æ³¨å…¥ã€‚</li>
</ol>
<p><strong>ä¾èµ–æ³¨å…¥çš„åº”ç”¨åœºæ™¯:</strong></p>
<ol>
<li>ç¼–å†™ä¸€ä¸ªå›ºå®šç»„ä»¶é›†ï¼Œå­˜åœ¨ä¸€ä¸ªæ ¹ç»„ä»¶å’Œå¤šå±‚çš„å­ç»„ä»¶ï¼Œä¸”ç»“æ„å›ºå®šã€‚</li>
<li>ä¸€ä¸ªå±€éƒ¨çš„æ•°æ®ä¸­å¿ƒåŒ–ã€‚</li>
</ol>
<p><strong>ä¾èµ–æ³¨å…¥çš„è´Ÿé¢å½±å“:</strong></p>
<ol>
<li>æ³¨å…¥çš„æ•°æ®æˆ–æ–¹æ³•åŸºäºè®¾è®¡çš„è€ƒé‡ä¸å…·æœ‰å“åº”å¼çš„ç‰¹æ€§ã€‚</li>
<li>æ³¨å…¥çš„æ•°æ®è™½ç„¶ä¸ä¼šè¢«å¤„ç†ä¸ºå“åº”å¼æ•°æ®ï¼Œä½†æ˜¯å¹¶ä¸é˜»æ­¢ä¾èµ–æ³¨å…¥ä¸€ä¸ªæœ¬æ˜¯å“åº”å¼çš„æ•°æ®ã€‚</li>
<li>ä¼šå°†åº”ç”¨ç¨‹åºä¸­ç›¸å…³çš„ç»„ä»¶ï¼ˆä½¿ç”¨ä¾èµ–æ³¨å…¥çš„ç»„ä»¶ï¼‰ç´§å¯†çš„è€¦åˆåœ¨ä¸€èµ·ï¼Œä½¿å¾—é‡æ„å˜å¾—æ¯”è¾ƒå›°éš¾ï¼ˆè¿™æ˜¯ä¾èµ–æ³¨å…¥çš„æœ¬è´¨æ‰€å†³å®šçš„ï¼‰ã€‚</li>
</ol>
<blockquote>
<p>ç›¸å¯¹äºä¾èµ–æ³¨å…¥çš„é“¶å¼¹ â€”â€” <code>vuex</code>ï¼Œæä¾›ä¸€ä¸ªç¬¬ä¸‰æ–¹ç‹¬ç«‹çš„æ•°æ®ä¸­å¿ƒï¼Œå¹¶å…·æœ‰å“åº”å¼æ›´æ–°åŠŸèƒ½ã€‚</p>
</blockquote>
<h2 data-id="heading-6">ç¨‹åºåŒ–çš„äº‹ä»¶ç›‘å¬å™¨</h2>
<p>ç¨‹åºåŒ–çš„äº‹ä»¶ç›‘å¬å™¨æ˜¯å»ºç«‹åœ¨ Vue ç³»ç»Ÿä¸Šçš„ï¼Œå®ƒåŒºåˆ«äºæµè§ˆå™¨çš„äº‹ä»¶ç³»ç»Ÿï¼ˆEventTarget APIï¼‰ã€‚
é€šå¸¸æˆ‘ä»¬ä½¿ç”¨ <code>v-on</code> åœ¨ç»„ä»¶ä¸Šç›‘å¬äº‹ä»¶ï¼Œä½¿ç”¨ <code>$emit()</code> åœ¨ç»„ä»¶å†…è§¦å‘äº‹ä»¶ï¼Œè€Œ â€œç¨‹åºåŒ–çš„äº‹ä»¶ç›‘å¬å™¨â€ æä¾›äº†ä¸€ä¸ªå¯ä»¥åœ¨ç»„ä»¶å®ä¾‹ä¸Šç›‘å¬äº‹ä»¶çš„åŠŸèƒ½ã€‚</p>
<ul>
<li><code>$on('eventName', eventHandler)</code> ç»‘å®š/ä¾¦å¬ä¸€ä¸ªäº‹ä»¶ã€‚</li>
<li><code>$off('eventName, eventHandler')</code> è§£ç»‘/åœæ­¢ä¾¦å¬ä¸€ä¸ªäº‹ä»¶ã€‚</li>
<li><code>$once(eventName, eventHandler)</code> ä¸€æ¬¡æ€§ç»‘å®š/ç›‘å¬ä¸€ä¸ªäº‹ä»¶ã€‚</li>
</ul>
<p>å–„ç”¨ <code>$once</code> å¯ä»¥æé«˜æˆ‘ä»¬è§£å†³ç»„ä»¶äº‹ä»¶æ¸…ç†çš„éº»çƒ¦ã€‚</p>
<p><strong>Bad</strong></p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// ä¸€æ¬¡æ€§å°†è¿™ä¸ªæ—¥æœŸé€‰æ‹©å™¨é™„åŠ åˆ°ä¸€ä¸ªè¾“å…¥æ¡†ä¸Š</span>
<span class="hljs-comment">// å®ƒä¼šè¢«æŒ‚è½½åˆ° DOM ä¸Šã€‚</span>
<span class="hljs-attr">mounted</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
  <span class="hljs-comment">// Pikaday æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹æ—¥æœŸé€‰æ‹©å™¨çš„åº“</span>
  <span class="hljs-built_in">this</span>.picker = <span class="hljs-keyword">new</span> Pikaday(&#123;
    <span class="hljs-attr">field</span>: <span class="hljs-built_in">this</span>.$refs.input,
    <span class="hljs-attr">format</span>: <span class="hljs-string">'YYYY-MM-DD'</span>
  &#125;)
&#125;,
<span class="hljs-comment">// åœ¨ç»„ä»¶è¢«é”€æ¯ä¹‹å‰ï¼Œ</span>
<span class="hljs-comment">// ä¹Ÿé”€æ¯è¿™ä¸ªæ—¥æœŸé€‰æ‹©å™¨ã€‚</span>
<span class="hljs-attr">beforeDestroy</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
  <span class="hljs-built_in">this</span>.picker.destroy()
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><strong>Good</strong></p>
<pre><code class="hljs language-js copyable" lang="js">mounted: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
  <span class="hljs-keyword">var</span> picker = <span class="hljs-keyword">new</span> Pikaday(&#123;
    <span class="hljs-attr">field</span>: <span class="hljs-built_in">this</span>.$refs.input,
    <span class="hljs-attr">format</span>: <span class="hljs-string">'YYYY-MM-DD'</span>
  &#125;)

  <span class="hljs-built_in">this</span>.$once(<span class="hljs-string">'hook:beforeDestroy'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
    picker.destroy()
  &#125;)
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<blockquote>
<p>æˆ‘ä»¬è¿˜å¯ä»¥æŠŠè¿™äº›æ“ä½œå°è£…æˆæ–¹æ³•ï¼Œä¾¿äºå¤šæ¬¡æ‰§è¡Œç›¸åŒçš„æ“ä½œã€‚</p>
</blockquote>
<h2 data-id="heading-7">é€’å½’ç»„ä»¶</h2>
<p>æ‰€è°“â€œé€’å½’â€å°±æ˜¯è‡ªå·±è°ƒè‡ªå·±ï¼ŒåŒç†ç»„ä»¶é€’å½’å°±æ˜¯ç»„ä»¶ä¸æ–­çš„è°ƒç”¨è‡ªèº«ã€‚</p>
<p><strong>é€’å½’ç»„ä»¶çš„å…¥å£ï¼š</strong></p>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-tag"><<span class="hljs-name">x-menu</span> <span class="hljs-attr">:menus</span>=<span class="hljs-string">"menus"</span>></span><span class="hljs-tag"></<span class="hljs-name">x-menu</span>></span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><strong>é€’å½’ç»„ä»¶çš„å®šä¹‰ï¼š</strong></p>
<pre><code class="hljs language-js copyable" lang="js">Vue.component(<span class="hljs-string">'x-menu'</span>, &#123;
    <span class="hljs-attr">props</span>:&#123;
        <span class="hljs-attr">menus</span>:&#123;
            <span class="hljs-attr">requried</span>:<span class="hljs-literal">true</span>,
            <span class="hljs-attr">type</span>:<span class="hljs-built_in">Array</span>
        &#125;
    &#125;,
    <span class="hljs-attr">template</span>:<span class="hljs-string">`
        <ul>
            <li v-for="menu in menus" :key="menu.key">
                <div>&#123;&#123; menu.name &#125;&#125;</div>
                <!--æ ¸å¿ƒæ‰€åœ¨-->
                <x-menus v-if="menu.children"></x-menus>
            </li>
        </ul>
    `</span>
&#125;);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-8">å¾ªç¯å¼•ç”¨</h2>
<p>ä¸é€’å½’ç»„ä»¶ä¸åŒçš„æ˜¯ï¼Œé€’å½’æ˜¯é€šè¿‡ä¸æ–­è°ƒç”¨è‡ªå·±æ¥å®ç°æ‰€éœ€çš„åŠŸèƒ½ã€‚è€Œå¾ªç¯å¼•ç”¨åªä¼šå­˜åœ¨ä¸¤ä¸ªç»„ä»¶ä¹‹é—´ï¼ŒA  ç»„ä»¶ä½¿ç”¨äº† B ç»„ä»¶ï¼ŒB ç»„ä»¶ä¹Ÿä½¿ç”¨äº† A ç»„ä»¶ã€‚</p>
<blockquote>
<p>å¦‚æœä½ æ˜¯é€šè¿‡ <code>Vue.component</code> æ³¨å†Œçš„å…¨å±€ç»„ä»¶ï¼Œåˆ™ä¸å­˜åœ¨æ­¤ç§æƒ…å†µã€‚</p>
</blockquote>
<p>é€šå¸¸è¿™ç§é—®é¢˜åªä¼šå‡ºç°åœ¨ä½¿ç”¨æ¨¡å—åŒ–ç³»ç»Ÿæ¥å¼•å…¥å…·æœ‰ç›¸äº’å¼•ç”¨å…³ç³»çš„ç»„ä»¶ã€‚</p>
<p>è§£å†³çš„åŠæ³•æœ‰ä¸¤ç§ï¼š</p>
<p><strong>1. æ‰‹åŠ¨æ³¨å†Œå…¶ä¸­çš„ä¸€ä¸ªç»„ä»¶</strong></p>
<pre><code class="hljs language-js copyable" lang="js">beforeCreate: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;
    <span class="hljs-built_in">this</span>.$options.components.ComponetB = <span class="hljs-keyword">import</span>(<span class="hljs-string">'./components/componentB'</span>).default;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><strong>2. ä½¿ç”¨å¼‚æ­¥ç»„ä»¶</strong></p>
<pre><code class="hljs language-js copyable" lang="js">&#123;
    <span class="hljs-attr">components</span>:&#123;
        <span class="hljs-string">'component-b'</span>: <span class="hljs-function">()=></span><span class="hljs-keyword">import</span>(<span class="hljs-string">'./components/componentB'</span>)
    &#125;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-9">æ¨¡æ¿å®šä¹‰çš„æ›¿ä»£å“</h2>
<p>æˆ‘ä»¬æ›´å¤šçš„æ¨èä½¿ç”¨å•æ–‡ä»¶ç»„ä»¶ SFC çš„æ–¹å¼å®šä¹‰æ¨¡æ¿æˆ–è€…åœ¨ <code>template</code> å±æ€§ä¸­ç¼–å†™å­—ç¬¦ä¸²æ¨¡æ¿ï¼Œå¹¶ä¸å»ºè®®å°†ç»„ä»¶çš„æ¨¡æ¿ä¸é€»è¾‘ç›¸åˆ†ç¦»ã€‚</p>
<h3 data-id="heading-10">å†…è”æ¨¡æ¿</h3>
<p>å½“ <code>inline-template</code> è¿™ä¸ªç‰¹æ®Šçš„ attribute å‡ºç°åœ¨ä¸€ä¸ªå­ç»„ä»¶ä¸Šæ—¶ï¼Œè¿™ä¸ªç»„ä»¶å°†ä¼šä½¿ç”¨å…¶é‡Œé¢çš„å†…å®¹ä½œä¸ºæ¨¡æ¿ï¼Œè€Œä¸æ˜¯å°†å…¶ä½œä¸ºè¢«åˆ†å‘çš„å†…å®¹ï¼ˆä¸åœ¨æ˜¯ç†è§£ä¸­ slot çš„æ€§è´¨ï¼‰ã€‚è¿™ä½¿å¾—æ¨¡æ¿çš„æ’°å†™å·¥ä½œæ›´åŠ çµæ´»ã€‚</p>
<p><strong>å†…è”æ¨¡æ¿</strong>éœ€è¦å®šä¹‰åœ¨ Vue æ‰€å±çš„ DOM å…ƒç´ å†…ã€‚</p>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-tag"><<span class="hljs-name">my-component</span> <span class="hljs-attr">inline-template</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">div</span>></span>
    <span class="hljs-tag"><<span class="hljs-name">p</span>></span>These are compiled as the component's own template.<span class="hljs-tag"></<span class="hljs-name">p</span>></span>
    <span class="hljs-tag"><<span class="hljs-name">p</span>></span>Not parent's transclusion content.<span class="hljs-tag"></<span class="hljs-name">p</span>></span>
  <span class="hljs-tag"></<span class="hljs-name">div</span>></span>
<span class="hljs-tag"></<span class="hljs-name">my-component</span>></span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<blockquote>
<p>å…¶å®å°±æ˜¯è‡ªå®šä¹‰ç»„ä»¶èµ·å§‹ä¸ç»“æŸæ ‡ç­¾çš„å†…å®¹å°†ä¼šä½œä¸ºè¯¥è‡ªå®šä¹‰ç»„ä»¶çš„æ¨¡æ¿ï¼Œå› æ­¤ä¸ä¼šä¼ é€’ç»™ <code><slot></code> å…ƒç´ ï¼Œè¿™ä¼šå¯¼è‡´ç»„ä»¶çš„æ¨¡æ¿ä¸é€»è¾‘åˆ†ç¦»ï¼Œé€šå¸¸ä¸å»ºè®®ä½¿ç”¨ã€‚</p>
</blockquote>
<h3 data-id="heading-11">X-Template</h3>
<p>ä¸å†…è”æ¨¡æ¿ç›¸æ¯”å°±æ˜¯ä½¿ç”¨å…·æœ‰ç‰¹æ®Š <code>type</code> å€¼ä¸ <code>id</code> å±æ€§çš„ <code><script></code> æ ‡ç­¾æ¥å­˜å‚¨æ¨¡æ¿å†…å®¹ã€‚</p>
<p><strong>x-template</strong> éœ€è¦å®šä¹‰åœ¨ Vue æ‰€å±çš„ DOM å…ƒç´ å¤–ã€‚</p>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-tag"><<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/x-template"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"hello-world-template"</span>></span><span class="handlebars"><span class="xml">
  <span class="hljs-tag"><<span class="hljs-name">p</span>></span>Hello hello hello<span class="hljs-tag"></<span class="hljs-name">p</span>></span>
</span></span><span class="hljs-tag"></<span class="hljs-name">script</span>></span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><code>id</code> çš„ä½œç”¨å°±æ˜¯å°†æ¨¡æ¿å†…å®¹ä¸æ¨¡æ¿é€»è¾‘è¿›è¡Œè¿æ¥çš„å‡­æ®ã€‚</p>
<pre><code class="hljs language-js copyable" lang="js">Vue.component(<span class="hljs-string">'hello-world'</span>, &#123;
  <span class="hljs-attr">template</span>: <span class="hljs-string">'#hello-world-template'</span>
&#125;)
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<blockquote>
<p><code>X-Template</code> çš„æ–¹å¼ä¹Ÿä¼šå¯¼è‡´ç»„ä»¶çš„æ¨¡æ¿ä¸é€»è¾‘ç›¸åˆ†ç¦»ï¼Œæ‰€ä»¥ä¹Ÿä¸å»ºè®®ä½¿ç”¨ã€‚</p>
</blockquote>
<h2 data-id="heading-12">å¼ºåˆ¶æ›´æ–°</h2>
<p>è°ƒç”¨ <code>this.$forceUpdate()</code> å¯ä»¥å¼ºåˆ¶æ›´æ–°ç»„ä»¶ã€‚</p>
<h2 data-id="heading-13">é€šè¿‡ <code>v-once</code> åˆ›å»ºä½å¼€é”€çš„é™æ€ç»„ä»¶</h2>
<p>å½“ç»„ä»¶åŒ…å«äº†å¤§é‡é™æ€å†…å®¹æ—¶ã€‚æˆ‘ä»¬å¯ä»¥åœ¨æ ¹å…ƒç´ ä¸Šæ·»åŠ  <code>v-once</code> attribute ä»¥ç¡®ä¿è¿™äº›å†…å®¹åªè®¡ç®—ä¸€æ¬¡ç„¶åç¼“å­˜èµ·æ¥ï¼Œæä¾›ç»„ä»¶çš„æ¸²æŸ“é€Ÿåº¦ã€‚</p>
<pre><code class="hljs language-html copyable" lang="html">Vue.component('terms-of-service', &#123;
  template: `
    <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">v-once</span>></span>
      <span class="hljs-tag"><<span class="hljs-name">h1</span>></span>Terms of Service<span class="hljs-tag"></<span class="hljs-name">h1</span>></span>
      ... a lot of static content ...
    <span class="hljs-tag"></<span class="hljs-name">div</span>></span>
  `
&#125;)
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre></div>  
</div>
            