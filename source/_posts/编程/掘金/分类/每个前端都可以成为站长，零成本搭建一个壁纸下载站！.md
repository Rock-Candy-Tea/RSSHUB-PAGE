
---
title: '每个前端都可以成为站长，零成本搭建一个壁纸下载站！'
categories: 
 - 编程
 - 掘金
 - 分类
headimg: 'https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f2a07aa4a71f454cb3af1125aefd063e~tplv-k3u1fbpfcp-watermark.image'
author: 掘金
comments: false
date: Sun, 18 Jul 2021 13:31:04 GMT
thumbnail: 'https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f2a07aa4a71f454cb3af1125aefd063e~tplv-k3u1fbpfcp-watermark.image'
---

<div>   
<div class="markdown-body"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><p>本文已参与好文召集令活动，点击查看：<a href="https://juejin.cn/post/6978685539985653767" target="_blank" title="https://juejin.cn/post/6978685539985653767">后端、大前端双赛道投稿，2万元奖池等你挑战！</a></p>
<hr>
<h1 data-id="heading-0">uniCloud介绍</h1>
<blockquote>
<p><code>uniCloud</code> 是 DCloud 联合阿里云、腾讯云，为开发者提供的基于 serverless 模式和 js 编程的云开发平台。</p>
</blockquote>
<p>关于云开发，网上相关的文章和教程已经很多了，这里我就不再赘述。本文主要带着大家来看看，在云开发时代，建站的成本有多低，效率有多高。</p>
<h1 data-id="heading-1">互动话题</h1>
<blockquote>
<p>有了云开发之后，全栈工程师的门槛一下子变得非常低了。你觉得全栈这个词已经被用烂了吗？你会在简历中会介绍自己是全栈吗？</p>
</blockquote>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f2a07aa4a71f454cb3af1125aefd063e~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>请在评论区留下你的看法吧！</p>
<h1 data-id="heading-2">开始搭建</h1>
<h2 data-id="heading-3">新建uniapp项目</h2>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8942322ec21e4719ab21015459d606a7~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>勾选启用uniCloud，并选择阿里云</p>
<h2 data-id="heading-4">腾讯云和阿里云的差异</h2>
<p>给了两个选择，那肯定有小伙伴会问，为什么选阿里云呢？它们有什么差异？</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6bae799a795e468aa81c3384ce686779~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li><strong>阿里云</strong></li>
</ul>
<blockquote>
<p>50个免费的云空间，免费提供静态网页托管，</p>
</blockquote>
<ul>
<li><strong>腾讯云</strong></li>
</ul>
<blockquote>
<p>1个免费的云空间，静态网页托管需付费，腾讯生态免鉴权。</p>
</blockquote>
<p>既然是nodejs，依托npm海量的包，鉴权很难吗？肯定选阿里云呀~</p>
<p>项目创建好之后，我们还需要关联上云空间</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0bb3eeaf54a34578bd70e6661daab229~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>关联好之后，我们就可以新建云函数了</p>
<h2 data-id="heading-5">云函数</h2>
<blockquote>
<p>从度娘上搜到这样一个壁纸接口，来自360，希望别封。</p>
</blockquote>
<ul>
<li><strong>获取壁纸分类</strong></li>
</ul>
<pre><code class="hljs language-javascript copyable" lang="javascript">http:<span class="hljs-comment">//wallpaper.apc.360.cn/index.php?c=WallPaper&a=getAllCategories</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li><strong>获取分类下壁纸列表</strong></li>
</ul>
<pre><code class="hljs language-javascript copyable" lang="javascript">http:<span class="hljs-comment">//wallpaper.apc.360.cn/index.php?c=WallPaper&a=getAppsByCategory&cid=26&start=0</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<p>现在我们新建相关的云函数来转接一下请求，可能有小伙伴会问，既然是现成的接口，前端直接请求不就好了吗？前端直接请求会有跨域的问题，所以，咱们利用nodejs云函数中转一下。</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/54389bb0eede4494abeed7bb6d875aa8~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>获得壁纸分类云函数的代码</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> uniCloud.httpclient.request(<span class="hljs-string">"http://wallpaper.apc.360.cn/index.php?c=WallPaper&a=getAllCategories"</span>,&#123;
        <span class="hljs-attr">dataType</span>:<span class="hljs-string">"json"</span>
&#125;);
<span class="hljs-keyword">return</span> res.data
<span class="copy-code-btn">复制代码</span></code></pre>
<p>获得分类下壁纸列表云函数的代码</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-comment">//cid是分类id</span>
<span class="hljs-keyword">const</span> cid = event.cid || <span class="hljs-number">26</span>;
<span class="hljs-comment">//start是该分类列表的当前的指针，用于分页</span>
<span class="hljs-keyword">const</span> start = event.start || <span class="hljs-number">0</span>;

<span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> uniCloud.httpclient.request(<span class="hljs-string">"http://wallpaper.apc.360.cn/index.php?c=WallPaper&a=getAppsByCategory&cid="</span>+cid+<span class="hljs-string">"&start="</span>+start,&#123;
        <span class="hljs-attr">dataType</span>:<span class="hljs-string">"json"</span>
&#125;);
<span class="hljs-keyword">return</span> res.data
<span class="copy-code-btn">复制代码</span></code></pre>
<p>另外，通过云函数中转后，我们还可以对数据做二次处理，比如转存到自己的云数据库或云存储中。</p>
<h2 data-id="heading-6">云函数的URL化</h2>
<p>上面两个云函数完成后，我们就可以在uniapp环境下使用<code>uniCloud.callFunction</code>来请求了。</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-comment">//请求壁纸分类</span>
uniCloud.callFunction(&#123;
        <span class="hljs-attr">name</span>:<span class="hljs-string">"getAllCategories"</span>,
        <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =></span> &#123;
                <span class="hljs-built_in">console</span>.log(res);
        &#125;
&#125;)

<span class="hljs-comment">//请求分类下壁纸列表</span>
uniCloud.callFunction(&#123;
        <span class="hljs-attr">name</span>:<span class="hljs-string">"getAppsByCategory"</span>,
        <span class="hljs-attr">data</span>:&#123;
                <span class="hljs-attr">cid</span>:<span class="hljs-number">21</span>,
                <span class="hljs-attr">start</span>:<span class="hljs-number">0</span>
        &#125;,
        <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =></span> &#123;
                <span class="hljs-built_in">console</span>.log(res);
        &#125;
&#125;)
<span class="copy-code-btn">复制代码</span></code></pre>
<p>假设未来我们要写一个Flutter应用，也想调用这个云函数怎么办呢？这个时候就需要用到云函数的URL化，简单说就是让一个云函数可以脱离uniapp的环境，使用普通的http请求来调用。</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8247efe54352454aabc33692527cb4ed~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer">
点击云函数域名绑定，此时会自动分配给我们一个<code>bspapp.com</code>的二级域名</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6c63802114534f1ea47f7baee4069cf6~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer">
然后我们进入到某个云函数的详情页，点击云函数URL区域的编辑按钮，将URL请求的地址后缀设置为<code>/http/getAllCategories</code>，这个地址后缀可以随意取</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/20f208849d80472a84cbb55447190055~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>设置完成之后，这个接口就可以通过普通URL的方式来访问了，大家可以试试看请求下面这两个URL</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-comment">//获取分类</span>
<span class="hljs-attr">https</span>:<span class="hljs-comment">//b739e39d-73fb-432d-b357-3dc97e6446c3.bspapp.com/http/getAllCategories</span>

<span class="hljs-comment">//获取分类下的壁纸列表</span>
https:<span class="hljs-comment">//b739e39d-73fb-432d-b357-3dc97e6446c3.bspapp.com/http/getAppsByCategory?cid=21&start=0</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<p>我用<code>postwoman</code>（Hoppscotch）请求一下给大家看</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8b7eba3acf314328a715d16a158bd7ef~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>这里有一个需要注意的地方，云函数URL化之后<code>get</code>和<code>post</code>的传参获取方式是不一样的</p>
<ul>
<li>云函数URL化get传参</li>
</ul>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">if</span>(event.queryStringParameters)&#123;
        start = event.queryStringParameters.start || <span class="hljs-number">0</span>;
        cid = event.queryStringParameters.cid || <span class="hljs-number">26</span>;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li>云函数URL化post传参</li>
</ul>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> bodyData = <span class="hljs-built_in">JSON</span>.parse(event.body);
start = bodyData.start || <span class="hljs-number">0</span>;
cid = bodyData.cid || <span class="hljs-number">26</span>;
<span class="copy-code-btn">复制代码</span></code></pre>
<p>另外就是一旦URL化后，开发者需要关注业务和资源安全。</p>
<ul>
<li>安全：为了保障业务安全性，开发者需在代码中做好权限控制和安全防护，避免未授权访问触发敏感操作。</li>
<li>计费：云函数开启了URL化后，如果遇到大量恶意访问，消耗云函数资源，开发者可以将云函数访问地址设置为空即可停止 HTTP 访问支持。</li>
</ul>
<h2 data-id="heading-7">一键发行，前端网页托管</h2>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/34afa458a315462190155810abc29a81~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>这个壁纸站的前端非常简单，只有一个单Vue页面，主要就是处理以下几件事情，代码不贴了，大家可以自行查看源码。</p>
<ul>
<li>请求壁纸分类云函数</li>
<li>请求分类下壁纸列表云函数</li>
<li>分页以及上拉加载更多的逻辑</li>
<li>下载不同分辨率壁纸</li>
</ul>
<p>接下来，我们在项目目录上单击鼠标右键，选择<code>发行</code>><code>上传网站到服务器</code></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/75c06e2fe1534438b8fcb1eeb7eafcde~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>选择我们要部署到的云空间
<img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7c9c70cccc8e4074beccae43fb4922c0~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>部署完成之后，默认会提供一个可访问的域名，也就是说到这一步，我们一分钱没花，网站已经部署到互联网上了，可以给全世界的人访问了。</p>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fstatic-b739e39d-73fb-432d-b357-3dc97e6446c3.bspapp.com%2F%23%2F" target="_blank" rel="nofollow noopener noreferrer" title="https://static-b739e39d-73fb-432d-b357-3dc97e6446c3.bspapp.com/#/" ref="nofollow noopener noreferrer">static-b739e39d-73fb-432d-b357-3dc97e6446c3.bspapp.com/#/</a></p>
<p>不过，现在的域名有点难看，另外就是默认域名会被限速，所以我们还是花点钱买个域名然后解析一下。</p>
<p>进入网页托管参数配置</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/11e35cabfbf74ff6bf780319adb4a19f~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>审核通过后，把生成的CNAME地址配置到域名解析里</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0a19fa73601947f9baef8236a5a12e57~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>现在这个壁纸站的域名看上去还不错吧
<a href="https://link.juejin.cn/?target=http%3A%2F%2Fwallpaper.jnsii.com%2F" target="_blank" rel="nofollow noopener noreferrer" title="http://wallpaper.jnsii.com/" ref="nofollow noopener noreferrer">wallpaper.jnsii.com/</a></p>
<h1 data-id="heading-8">结语</h1>
<p>基于现在日趋成熟的云开发，前端工程师在不需要了解很多服务器知识的情况下，可以轻易的完成建站，使用javascript开发后端接口操作数据库等，并且目前这一切都还是免费的。</p>
<h1 data-id="heading-9">源码和视频教程</h1>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1y54y1n7aK%2F" target="_blank" rel="nofollow noopener noreferrer" title="https://www.bilibili.com/video/BV1y54y1n7aK/" ref="nofollow noopener noreferrer">本文配套视频教程及源码地址</a></p>
<h1 data-id="heading-10">关注大帅老猿</h1>
<blockquote>
<p>如果本文对你有帮助，希望能够给我点赞支持。</p>
</blockquote></div>  
</div>
            