
---
title: '3x1 ç²¾è¯»Vueå®˜æ–¹æ–‡æ¡£ -  è‡ªå®šä¹‰æŒ‡ä»¤'
categories: 
 - ç¼–ç¨‹
 - æ˜é‡‘
 - åˆ†ç±»
headimg: 'https://picsum.photos/400/300?random=831'
author: æ˜é‡‘
comments: false
date: Tue, 13 Jul 2021 17:58:28 GMT
thumbnail: 'https://picsum.photos/400/300?random=831'
---

<div>   
<div class="markdown-body"><style>@charset "UTF-8";.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child&#123;margin-top:-1.5rem;margin-bottom:1rem&#125;.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before&#123;content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em&#125;.markdown-body h1&#123;position:relative;font-size:2.5rem;margin-bottom:5px&#125;.markdown-body h1:before&#123;font-size:2.5rem&#125;.markdown-body h2&#123;padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:1.5rem;padding-bottom:0&#125;.markdown-body h4&#123;font-size:1.25rem&#125;.markdown-body h5&#123;font-size:1rem&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body strong&#123;color:#3eaf7c&#125;.markdown-body img&#123;max-width:100%;border-radius:2px;display:block;margin:auto;border:3px solid rgba(62,175,124,.2)&#125;.markdown-body hr&#123;border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-weight:700;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75;border-radius:6px;border:2px solid #3eaf7c&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;font-weight:500;text-decoration:none;color:#3eaf7c&#125;.markdown-body a:active,.markdown-body a:hover&#123;border-bottom:1.5px solid #3eaf7c&#125;.markdown-body a:before&#123;content:"â‡²"&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c&#125;.markdown-body thead&#123;background:#3eaf7c;color:#fff;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:rgba(62,175,124,.2)&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:.5rem solid;border-color:#42b983;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body details&#123;outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px&#125;.markdown-body details summary&#123;cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px&#125;.markdown-body details summary::-webkit-details-marker&#123;color:#3eaf7c&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body ol li::marker&#123;color:#3eaf7c&#125;.markdown-body ul li&#123;list-style:none&#125;.markdown-body ul li:before&#123;content:"â€¢";margin-right:4px;color:#3eaf7c&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><h2 data-id="heading-0"><a href="https://juejin.cn/column/6976899977133948965" target="_blank" title="https://juejin.cn/column/6976899977133948965">ç²¾è¯» Vue å®˜æ–¹æ–‡æ¡£ç³»åˆ—</a> ğŸ‰</h2>
<h2 data-id="heading-1">ç®€ä»‹</h2>
<p>Vue æŒ‡ä»¤å¯ä»¥åˆ†ä¸ºâ€å†…ç½®æŒ‡ä»¤ï¼ˆä¾‹å¦‚ï¼šv-onceï¼Œv-cloakç­‰ï¼‰â€œä¸â€œè‡ªå®šä¹‰æŒ‡ä»¤â€œã€‚
Vue æŒ‡ä»¤æä¾›äº†æ“ä½œåº•å±‚ DOM çš„èƒ½åŠ›ï¼Œå¢å¼ºäº† Vue æ¨¡æ¿çš„å¤„ç†åŠŸèƒ½ã€‚</p>
<ul>
<li><strong>å±€éƒ¨æ³¨å†ŒæŒ‡ä»¤</strong>ï¼Œå¯ä»¥ä½¿ç”¨ç»„ä»¶é€‰é¡¹  <code>directives</code> ã€‚</li>
<li><strong>å…¨å±€æ³¨å†ŒæŒ‡ä»¤</strong>ï¼Œéœ€è¦è°ƒç”¨ Vue æ„é€ å‡½æ•°çš„ <code>Vue.directive()</code> æ–¹æ³•</li>
</ul>
<h2 data-id="heading-2">é’©å­å‡½æ•°</h2>
<p>â€œæŒ‡ä»¤â€çš„æ„æˆä¸ç»„ä»¶é€‰é¡¹ç±»ä¼¼ï¼Œæœ‰ç€è‡ªå·±ç‹¬ç‰¹çš„é’©å­å‡½æ•°ã€‚</p>
<ul>
<li><strong><code>bind</code></strong>: åªè°ƒç”¨ä¸€æ¬¡ï¼Œå½“æŒ‡ä»¤ä¸å…ƒç´ è¿›è¡Œç»‘å®šæ—¶è°ƒç”¨ï¼Œæ­¤æ—¶å¯ä»¥å¯¹å…ƒç´ è¿›è¡Œåˆå§‹åŒ–æ“ä½œï¼ˆæ¯”å¦‚äº‹ä»¶çš„ç»‘å®šï¼‰ã€‚</li>
<li><strong><code>inserted</code></strong>: è¢«ç»‘å®šå…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨ï¼ˆä½†ä¸èƒ½ä¿è¯çˆ¶èŠ‚ç‚¹æœ¬èº«å·²ç»æ’å…¥åˆ°æ–‡æ¡£ä¸­ï¼‰ã€‚</li>
<li><strong><code>update</code></strong>: ç»„ä»¶æ›´æ–°ä¹‹å‰è°ƒç”¨ã€‚</li>
<li><strong><code>componentUpdated</code></strong>: ç»„ä»¶æ›´æ–°ä¹‹åè°ƒç”¨ã€‚</li>
<li><strong><code>unbind</code></strong>: åªè°ƒç”¨ä¸€æ¬¡ï¼Œå½“æŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶è°ƒç”¨ï¼Œä¾‹å¦‚ <code>v-if</code> æ§åˆ¶çš„ç»„ä»¶ã€‚</li>
</ul>
<p><strong><code>bind</code> ä¸ <code>inserted</code> åŒºåˆ«</strong></p>





















<table><thead><tr><th><strong>bind</strong></th><th><strong>inserted</strong></th></tr></thead><tbody><tr><td>æ˜¯åœ¨å…ƒç´ ï¼ˆVdomï¼‰è¢«åˆ›å»ºåå¹¶ä¸æŒ‡ä»¤è¿›è¡Œç»‘å®šæ—¶è°ƒç”¨ã€‚</td><td>å…ƒç´ ä¸æŒ‡ä»¤ç»‘å®šå®Œæˆï¼Œå¹¶è¢«æ’å…¥åˆ°çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨ã€‚</td></tr><tr><td>è§¦å‘æ—¶å…ƒç´ æ²¡æœ‰æ’å…¥åˆ°çˆ¶èŠ‚ç‚¹ä¸­ï¼Œæ‰€ä»¥ <code>el.parentNode</code> è¿”å›ä¸º <code>null</code>ã€‚</td><td>è°ƒç”¨åœ¨ <code>bind</code> ä¹‹åï¼Œæ­¤æ—¶å…ƒç´ å·²ç»æ’å…¥åˆ°çˆ¶èŠ‚ç‚¹ä¸­ï¼Œæ‰€ä»¥ <code>el.parentNode</code> å¯ä»¥æ­£ç¡®è¿”å›çˆ¶èŠ‚ç‚¹çš„å¼•ç”¨ã€‚</td></tr><tr><td>æ˜¯åœ¨ <code>DOM</code> æ ‘ç»˜åˆ¶ä¹‹å‰è°ƒç”¨ï¼Œå› è€Œè·å–ä¸åˆ°æœ‰å…³å…ƒç´ æ¸²æŸ“çš„ä¿¡æ¯ã€‚</td><td>å‡½æ•°æ˜¯åœ¨ <code>DOM</code> æ ‘ç»˜åˆ¶ä¹‹åè°ƒç”¨ï¼Œå› è€Œå¯ä»¥è·å–åˆ°æœ‰å…³å…ƒç´ æ¸²æŸ“çš„ä¿¡æ¯ã€‚</td></tr></tbody></table>
<pre><code class="hljs language-js copyable" lang="js">Vue.directive(<span class="hljs-string">'dom'</span>,&#123;
  <span class="hljs-function"><span class="hljs-title">bind</span>(<span class="hljs-params">el</span>)</span>&#123;
    <span class="hljs-built_in">console</span>.log(el.offsetWidth); <span class="hljs-comment">//0</span>
    <span class="hljs-built_in">console</span>.log(el.parentNode);  <span class="hljs-comment">//null</span>
  &#125;,
  <span class="hljs-function"><span class="hljs-title">inserted</span>(<span class="hljs-params">el</span>)</span>&#123;
    <span class="hljs-built_in">console</span>.log(el.offsetWidth); <span class="hljs-comment">//1170</span>
    <span class="hljs-built_in">console</span>.log(el.parentNode);  <span class="hljs-comment">//<div msg="Welcome to Your Vue.js App"><button>click</button><div>false</div></div></span>
  &#125;
&#125;)
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><strong><code>update</code> ä¸ <code>componentUpdated</code> å·®å¼‚</strong></p>
<p>å®ƒä»¬çš„åŒºåˆ«æ›´åƒæ˜¯ <code>beforeUpdate</code> ä¸ <code>updated</code>ã€‚</p>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-tag"><<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"show = !show"</span>></span>click<span class="hljs-tag"></<span class="hljs-name">button</span>></span>
<span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">v-dom</span>></span>&#123;&#123; show &#125;&#125;<span class="hljs-tag"></<span class="hljs-name">div</span>></span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>æ­¤æ—¶ï¼Œç‚¹å‡»æŒ‰é’®åˆ‡æ¢å“åº”å¼æ•°æ® <code>show</code> çš„å€¼ä¸º <code>true</code>ï¼Œè§‚å¯Ÿè‡ªå®šä¹‰æŒ‡ä»¤çš„è¾“å‡ºï¼š</p>
<pre><code class="hljs language-js copyable" lang="js">Vue.directive(<span class="hljs-string">"dom"</span>, &#123;
  <span class="hljs-function"><span class="hljs-title">update</span>(<span class="hljs-params">el</span>)</span> &#123;
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"update"</span>, el.innerHTML); <span class="hljs-comment">//'update false'</span>
  &#125;,
  <span class="hljs-function"><span class="hljs-title">componentUpdated</span>(<span class="hljs-params">el</span>)</span> &#123;
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"componentUpdated"</span>, el.innerHTML); <span class="hljs-comment">//'componentUpdated true'</span>
  &#125;,
&#125;);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<blockquote>
<p>è‡ªå®šä¹‰æŒ‡ä»¤é’©å­ä¸­æ²¡æœ‰ Vue å®ä¾‹ï¼Œ<code>this</code> é»˜è®¤æŒ‡å‘ <code>undefined</code>ã€‚</p>
</blockquote>
<h2 data-id="heading-3">é’©å­å‡½æ•°å‚æ•°</h2>
<p>å®Œæ•´çš„æŒ‡ä»¤ç»“æ„ï¼š</p>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-tag"><<span class="hljs-name">span</span> <span class="hljs-attr">v-directiveName:argument.modifier</span>=<span class="hljs-string">"show"</span>></span><span class="hljs-tag"></<span class="hljs-name">span</span>></span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>æ˜¯å¦å¾ˆæŠ½è±¡ï¼Œé‚£ä¹ˆä»£å…¥å®é™…ä¾‹å­å»ç†è§£ï¼š</p>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-tag"><<span class="hljs-name">button</span> <span class="hljs-attr">v-on:mousemove.passive</span>=<span class="hljs-string">"doSomeThing"</span>></span><span class="hljs-tag"></<span class="hljs-name">button</span>></span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>Vue æŒ‡ä»¤çš„é’©å­æ–¹æ³•ä¼šæ¥æ”¶ä»¥ä¸‹å››ä¸ªå‚æ•°ï¼š</p>
<ol>
<li><code>el</code> : å½“å‰æŒ‡ä»¤æ‰€ç»‘å®šçš„å…ƒç´ ã€‚</li>
<li><code>binding</code> : æŒ‡ä»¤æœ¬èº«çš„ä¿¡æ¯ï¼Œå€¼ä¸ºä¸€ä¸ªå¯¹è±¡ã€‚
<ul>
<li><code>name</code> : æŒ‡ä»¤çš„åç§°ã€‚</li>
<li><code>rawName</code> : å®Œæ•´åŸå§‹åç§°ï¼Œå« <code>v-*</code> å‰ç¼€ã€‚</li>
<li><code>value</code>: æŒ‡ä»¤çš„å€¼ã€‚</li>
<li><code>expression</code> : æŒ‡ä»¤çš„è¡¨è¾¾å¼ã€‚</li>
<li><code>arg</code> : ä¼ ç»™æŒ‡ä»¤çš„å‚æ•°ï¼Œæ”¯æŒåŠ¨æ€å‚æ•°ã€‚</li>
<li><code>modifiers</code> : æŒ‡ä»¤çš„ä¿®é¥°ç¬¦ã€‚</li>
<li><code>oldValue</code> : æŒ‡ä»¤ç»‘å®šçš„å‰ä¸€ä¸ªå€¼ï¼Œä»…åœ¨ update å’Œ componentUpdated é’©å­ä¸­å¯ç”¨ã€‚æ— è®ºå€¼æ˜¯å¦æ”¹å˜éƒ½å¯ç”¨ã€‚</li>
</ul>
</li>
<li><code>vnode</code> : Vue ç¼–è¯‘ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹ã€‚</li>
<li><code>oldVnode</code> : ä¸Šä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œä»…åœ¨ update å’Œ componentUpdated é’©å­ä¸­å¯ç”¨ã€‚</li>
</ol>
<p><strong><code>value</code> ä¸ <code>expression</code> çš„è”ç³»</strong></p>
<p>Vue æŒ‡ä»¤è¢«è°ƒç”¨æ—¶å¯ä»¥æ¥æ”¶ä¸€ä¸ªç¬¦åˆ JavaScript è§„å®šçš„å­—ç¬¦ä¸²å½¢å¼çš„â€œè¡¨è¾¾å¼â€çš„å€¼ï¼ˆæ ¸å¿ƒå°±æ˜¯æŒ‡ä»¤çš„å€¼ï¼‰ã€‚è€Œ <code>value</code> åˆ™æ˜¯ <code>expression</code> æ‰§è¡Œæœ€ç»ˆè®¡ç®—åçš„å€¼ã€‚</p>
<pre><code class="hljs language-text copyable" lang="text">v-calc="1 + 1"
//expression "1+1"
//value 2;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å¸¸è§çš„è¡¨è¾¾å¼ï¼Œä¾‹å¦‚åŸå§‹è¡¨è¾¾å¼ã€ç®—æœ¯è¡¨è¾¾å¼ã€å¯¹è±¡å’Œæ•°ç»„çš„åˆå§‹åŒ–è¡¨è¾¾å¼ã€è°ƒç”¨è¡¨è¾¾å¼ç­‰ã€‚</p>





































<table><thead><tr><th align="left">expression</th><th align="left">value</th></tr></thead><tbody><tr><td align="left">"true"</td><td align="left">true</td></tr><tr><td align="left">"1"</td><td align="left">1</td></tr><tr><td align="left">"'hello'"</td><td align="left">"hello"</td></tr><tr><td align="left">"show"(å“åº”å¼å˜é‡)</td><td align="left">false</td></tr><tr><td align="left">"&#123;x: 2.3, y: -1.2&#125;"</td><td align="left">&#123;x: 2.3, y: -1.2&#125;</td></tr><tr><td align="left">"1 + 2"</td><td align="left">3</td></tr><tr><td align="left">"(v)=>&#123;&#125;"</td><td align="left">Æ’ (v)</td></tr></tbody></table>
<p><strong>åŠ¨æ€æŒ‡ä»¤å‚æ•°</strong></p>
<p>æŒ‡ä»¤çš„å‚æ•°å¯ä»¥æ˜¯åŠ¨æ€çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨ v-dom:[argument]="value" ä¸­ï¼Œargument å‚æ•°å¯ä»¥æ ¹æ®ç»„ä»¶å®ä¾‹çš„å“åº”å¼æ•°æ®è¿›è¡Œæ›´æ–°ï¼Œè¿™ä½¿å¾—è‡ªå®šä¹‰æŒ‡ä»¤å¯ä»¥åœ¨åº”ç”¨ä¸­è¢«çµæ´»ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-js copyable" lang="js">Vue.directive(<span class="hljs-string">"dom"</span>, &#123;
  <span class="hljs-function"><span class="hljs-title">bind</span>(<span class="hljs-params">el, binding</span>)</span> &#123;
    <span class="hljs-keyword">if</span> (binding.arg === <span class="hljs-string">"color"</span>) &#123;
      el.style.color = binding.value;
    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (binding.arg === <span class="hljs-string">"background"</span>) &#123;
      el.style.background = binding.value;
    &#125;
  &#125;,
&#125;);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>ä½¿ç”¨æŒ‡ä»¤çš„æ–¹å¼ï¼š</p>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">v-dom:background</span>=<span class="hljs-string">"'red'"</span>></span>&#123;&#123; show &#125;&#125;<span class="hljs-tag"></<span class="hljs-name">div</span>></span>
<span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">v-dom:color</span>=<span class="hljs-string">"'green'"</span>></span>&#123;&#123; show &#125;&#125;<span class="hljs-tag"></<span class="hljs-name">div</span>></span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-4">è¿”å›å·²æ³¨å†Œçš„æŒ‡ä»¤</h2>
<pre><code class="hljs language-js copyable" lang="js">Vue.directive(<span class="hljs-string">'directiveName'</span>); 
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre></div>  
</div>
            