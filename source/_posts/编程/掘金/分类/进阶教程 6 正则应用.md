
---
title: '进阶教程 6. 正则应用'
categories: 
 - 编程
 - 掘金
 - 分类
headimg: 'https://picsum.photos/400/300?random=5975'
author: 掘金
comments: false
date: Sat, 14 Aug 2021 18:44:17 GMT
thumbnail: 'https://picsum.photos/400/300?random=5975'
---

<div>   
<div class="markdown-body"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><blockquote>
<p>这是我参与8月更文挑战的第14天，活动详情查看：<a href="https://juejin.cn/post/6987962113788493831" title="https://juejin.cn/post/6987962113788493831" target="_blank">8月更文挑战</a></p>
</blockquote>
<h2 data-id="heading-0">一、正则的简单应用</h2>
<h3 data-id="heading-1">1. 验证中国大陆手机号 以1开头的11位数字</h3>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> reg1 = <span class="hljs-regexp">/^1\d&#123;10&#125;$/</span>;
<span class="hljs-built_in">console</span>.log(reg1.test(<span class="hljs-string">'16601046931'</span>)); <span class="hljs-comment">// true</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h4 data-id="heading-2">2. 验证某些号段的手机号验证，例如188 170 156</h4>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> reg2 = <span class="hljs-regexp">/^1(88|70|56)\d&#123;8&#125;$/</span>;
<span class="hljs-built_in">console</span>.log(reg2.test(<span class="hljs-string">'18801046931'</span>)); <span class="hljs-comment">// true</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h4 data-id="heading-3">3. 匹配尾号是连续的三围豹子号 666 777 111</h4>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> reg3 = <span class="hljs-regexp">/^1\d&#123;7&#125;(\d)(\1&#123;2&#125;)$/</span>;
<span class="hljs-built_in">console</span>.log(reg3.test(<span class="hljs-string">'15912345666'</span>)); <span class="hljs-comment">// true</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h4 data-id="heading-4">4. 靓号 中间四位相同后面四位相同</h4>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> reg5 = <span class="hljs-regexp">/^1\d&#123;2&#125;(\d)\1&#123;3&#125;(\d)\2&#123;3&#125;$/</span>;
<span class="hljs-built_in">console</span>.log(reg5.test(<span class="hljs-string">'17733332222'</span>));
<span class="copy-code-btn">复制代码</span></code></pre>
<h4 data-id="heading-5">5. 有效数字验证：</h4>
<p>10 +10 -10 0.12 10.02</p>
<ul>
<li>+或-最多出现一次</li>
<li>如果是一位数字可以是0-9</li>
<li>多位数不能以0开头</li>
<li>如果有小数点，后面必须跟至少一位小数</li>
</ul>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> reg6 = <span class="hljs-regexp">/^[+-]?(\d|[1-9]\d+)(.\d+)?$/</span>;
<span class="copy-code-btn">复制代码</span></code></pre>
<h4 data-id="heading-6">5. 验证数字在某个范围内 18 - 60</h4>
<ul>
<li>18 - 19 1[89]|</li>
<li>20-59  2[0-9]</li>
<li>60 60</li>
</ul>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> reg7 = <span class="hljs-regexp">/^(1[89]|[2-5]\d|60)$/</span>;
<span class="hljs-built_in">console</span>.log(reg7.test(<span class="hljs-string">'17'</span>)); <span class="hljs-comment">// true</span>
<span class="hljs-built_in">console</span>.log(reg7.test(<span class="hljs-string">'18'</span>)); <span class="hljs-comment">// true</span>
<span class="hljs-built_in">console</span>.log(reg7.test(<span class="hljs-string">'19'</span>)); <span class="hljs-comment">// true</span>
<span class="hljs-built_in">console</span>.log(reg7.test(<span class="hljs-string">'59'</span>)); <span class="hljs-comment">// true</span>
<span class="hljs-built_in">console</span>.log(reg7.test(<span class="hljs-string">'60'</span>)); <span class="hljs-comment">// true</span>
<span class="hljs-built_in">console</span>.log(reg7.test(<span class="hljs-string">'61'</span>)); <span class="hljs-comment">// true</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h4 data-id="heading-7">6. 匹配中文姓名</h4>
<ul>
<li>中文的Unicode编码范围 \u4e00-\u9fa5</li>
<li>出现2位到6位</li>
</ul>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> reg8 = <span class="hljs-regexp">/^[\u4d00-\u9fa5]&#123;2,6&#125;$/</span>;
<span class="hljs-built_in">console</span>.log(reg8.test(<span class="hljs-string">'qq'</span>)); <span class="hljs-comment">// true</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h4 data-id="heading-8">6. 邮箱验证(简单验证)</h4>
<ul>
<li>
<p>雅虎邮箱：<a href="https://link.juejin.cn/?target=mailto%3Axxxx%40yahoo.com.cn" target="_blank" title="mailto:xxxx@yahoo.com.cn" ref="nofollow noopener noreferrer">xxxx@yahoo.com.cn</a></p>
</li>
<li>
<p>google <a href="https://link.juejin.cn/?target=mailto%3Axxx%40gmain.com" target="_blank" title="mailto:xxx@gmain.com" ref="nofollow noopener noreferrer">xxx@gmain.com</a></p>
</li>
<li>
<p>qq邮箱 <a href="https://link.juejin.cn/?target=mailto%3Axxx%40qq.com" target="_blank" title="mailto:xxx@qq.com" ref="nofollow noopener noreferrer">xxx@qq.com</a></p>
</li>
<li>
<p>网易 <a href="https://link.juejin.cn/?target=mailto%3Axxx%40163.com" target="_blank" title="mailto:xxx@163.com" ref="nofollow noopener noreferrer">xxx@163.com</a></p>
</li>
<li>
<p>网易 <a href="https://link.juejin.cn/?target=mailto%3Axxx%40126.com" target="_blank" title="mailto:xxx@126.com" ref="nofollow noopener noreferrer">xxx@126.com</a></p>
</li>
<li>
<p>开头部分 [a-zA-Z\d]+</p>
</li>
<li>
<p>中间部分 [-\w]+</p>
</li>
<li>
<p>结尾部分 [a-zA-Z\d]</p>
</li>
</ul>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> reg9 = <span class="hljs-regexp">/^[a-zA-Z\d]+@[a-zA-Z\d]+(.[a-z]+)&#123;1,2&#125;$/</span>;
<span class="hljs-built_in">console</span>.log(reg9.test(<span class="hljs-string">'rmbbingo@163.com'</span>)); <span class="hljs-comment">// true</span>
<span class="hljs-built_in">console</span>.log(reg9.test(<span class="hljs-string">'rmbbingo@163@.com'</span>)); <span class="hljs-comment">// false</span>
<span class="hljs-built_in">console</span>.log(reg9.test(<span class="hljs-string">'1164664451@qq.com'</span>)); <span class="hljs-comment">// true</span>
<span class="hljs-built_in">console</span>.log(reg9.test(<span class="hljs-string">'1164664451@sina.com.cn'</span>)); <span class="hljs-comment">// true</span>
<span class="hljs-built_in">console</span>.log(reg9.test(<span class="hljs-string">'1164664451@sina.com.cn.cn'</span>)); <span class="hljs-comment">// false</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h4 data-id="heading-9">7. 数据类型检测</h4>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-built_in">Object</span>.isTypeOf = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">val</span>) </span>&#123;
   <span class="hljs-keyword">let</span> res = <span class="hljs-built_in">Object</span>.prototype.toString.call(val); <span class="hljs-comment">// "[object Xxxx]"</span>
   <span class="hljs-keyword">let</span> reg = <span class="hljs-regexp">/^[object ([a-zA-Z]+)]$/</span>; <span class="hljs-comment">// 在正则使用某些特殊元字符的原义时需要转义</span>
   <span class="hljs-keyword">let</span> exec = reg.exec(res)[<span class="hljs-number">1</span>];
   <span class="hljs-keyword">return</span> exec.toLowerCase();
&#125;;
<span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Object</span>.isTypeOf(<span class="hljs-number">1</span>));
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-10">二、正向预查和负向预查</h2>
<ul>
<li>正向预查：(?=元字符) 不发生分组捕获</li>
<li>负向预查: (?!元字符) 不发生分组捕获</li>
</ul>
<h3 data-id="heading-11">1 正向预查</h3>
<blockquote>
<p>/x(?=y)/ 匹配x，仅当x后面紧跟着y（匹配后面跟着y的x）；</p>
</blockquote>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> reg1 = <span class="hljs-regexp">/[a-z](?=3|4)/g</span>;
<span class="hljs-keyword">let</span> str1 = <span class="hljs-string">'a1 b2 c3 d4'</span>;
<span class="hljs-built_in">console</span>.log(str1.match(reg1)); <span class="hljs-comment">// ["c", "d"]</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-12">2负向预查</h3>
<blockquote>
<p>/x(?!y)/ 匹配x，仅当x后面不是y（匹配后面不是y的x）；</p>
</blockquote>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> reg2 = <span class="hljs-regexp">/[a-z](?!3|4)/g</span>;
<span class="hljs-built_in">console</span>.log(str1.match(reg2));
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-13">3. 示例</h3>
<p>有个经典的应用正则的正向预查能力的例子——给数字加上千分符，例如数字<code>1234567890</code> 加千分符后，<code>1,234,567,890</code>。
这个 case 用正则处理会十分简便：</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/(\d)(?=(\d&#123;3&#125;)+$)/g</span>;
<span class="hljs-keyword">var</span> str = <span class="hljs-string">'1234567890'</span>;
<span class="hljs-keyword">var</span> str1 = str.replace(reg, <span class="hljs-string">'$1,'</span>);
<span class="hljs-built_in">console</span>.log(str1);
<span class="copy-code-btn">复制代码</span></code></pre>
<p>需要说明的是，代码中 <code>replace(reg, (whole, g1) => g1 + ',')</code> 是用来访问 js 正则的<code>分组</code>的，其中 <code>1</code> 表示第一个分组，这一部分内容将在下文正则不活中详述。</p>
<p>当然也可以用回调函数的形式接受分组，回调函数从第二个参数开始表示分组，如上文所述。如果用回调，则<code>replace(reg, (whole, g1) => g1 + ',')</code></p>
<h2 data-id="heading-14">三、正则捕获</h2>
<blockquote>
<p>js正则捕获：把符合某个规则的字符串获取到；</p>
</blockquote>
<p>+常见的捕获方法：</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-built_in">RegExp</span>.prototype.exec(str);
<span class="hljs-built_in">String</span>.prototype.match();
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-15">3.1 懒惰性</h3>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> reg = <span class="hljs-regexp">/\d+/</span>;
<span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello111 hello222 hello333'</span>;

<span class="hljs-built_in">console</span>.log(reg.exec(str)); [<span class="hljs-string">'111'</span>, index.....]
<span class="hljs-built_in">console</span>.log(reg.exec(str)); [<span class="hljs-string">'111'</span>, index.....]
<span class="hljs-built_in">console</span>.log(reg.exec(str)); [<span class="hljs-string">'111'</span>, index.....]
<span class="hljs-built_in">console</span>.log(reg.lastIndex); <span class="hljs-number">0</span>

<span class="hljs-built_in">console</span>.log(str.match(reg)); [<span class="hljs-string">'1111'</span>]
<span class="hljs-built_in">console</span>.log(str.match(reg)); [<span class="hljs-string">'1111'</span>]
<span class="hljs-built_in">console</span>.log(str.match(reg)); [<span class="hljs-string">'1111'</span>]
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-16">3.2 取消懒惰性：给正则增加修饰g</h3>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> reg2 = <span class="hljs-regexp">/\d+/g</span>;
<span class="hljs-keyword">let</span> str2 = <span class="hljs-string">'hello111 hello222 hello333'</span>;

<span class="hljs-built_in">console</span>.log(reg2.exec(str2));
<span class="hljs-built_in">console</span>.log(reg2.exec(str2));
<span class="hljs-built_in">console</span>.log(reg2.exec(str2));
<span class="hljs-built_in">console</span>.log(reg2.lastIndex);

<span class="hljs-built_in">console</span>.log(str2.match(str2));
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-17">3.3 贪婪性：按照匹配最多的去捕获</h3>
<p><strong>解决贪婪性：给量词元字符后面加 ?</strong></p>
<h3 data-id="heading-18">3.4 分组捕获：</h3>
<blockquote>
<p>使用小括号表示正则分组</p>
</blockquote>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> reg3 = <span class="hljs-regexp">/hello(\d+)/g</span>;
<span class="hljs-built_in">console</span>.log(reg3.exec(str)[<span class="hljs-number">1</span>]);
<span class="hljs-built_in">console</span>.log(reg3.exec(str)[<span class="hljs-number">1</span>]);
<span class="hljs-built_in">console</span>.log(reg3.exec(str)[<span class="hljs-number">1</span>]);
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li>除了通过[索引]访问分组，在RegExp上有几个属性记录正则分组捕获的内容</li>
<li>RegExp.<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mtext>表示第</mtext><mn>1</mn><mtext>个分组的捕获内容</mtext><mo separator="true">;</mo><mtext>在</mtext><mi>R</mi><mi>e</mi><mi>g</mi><mi>E</mi><mi>x</mi><mi>p</mi><mtext>上有</mtext></mrow><annotation encoding="application/x-tex">1 表示第1个分组的捕获内容; 在RegExp上有 </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mord cjk_fallback">表</span><span class="mord cjk_fallback">示</span><span class="mord cjk_fallback">第</span><span class="mord">1</span><span class="mord cjk_fallback">个</span><span class="mord cjk_fallback">分</span><span class="mord cjk_fallback">组</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">捕</span><span class="mord cjk_fallback">获</span><span class="mord cjk_fallback">内</span><span class="mord cjk_fallback">容</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">在</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">x</span><span class="mord mathnormal">p</span><span class="mord cjk_fallback">上</span><span class="mord cjk_fallback">有</span></span></span></span></span>1-$9表示第1到第9个分组内容</li>
<li>RegExp['$&'] 表示整个正则捕获到的内容</li>
</ul>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">RegExp</span>.$1);
<span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">RegExp</span>[<span class="hljs-string">'$&'</span>]);
<span class="copy-code-btn">复制代码</span></code></pre>
<p>九、正则的高级应用</p>
<h3 data-id="heading-19">1. 配合replace使用</h3>
<blockquote>
<p>String.prototype.replace(匹配内容, '替换内容');</p>
</blockquote>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> str = <span class="hljs-string">'qq2018 qq2019'</span>;
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li>把字符串中的 qq 替换成 江外</li>
</ul>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> result = str.replace(<span class="hljs-string">'qq'</span>, <span class="hljs-string">'江外'</span>);
<span class="hljs-built_in">console</span>.log(result); <span class="hljs-comment">// 江外2018 qq2019</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li>一次只能替换一个，那么有没有什么办法一次都替换掉呢？</li>
</ul>
<blockquote>
<p>replace(正则, callback); replace配合正则使用时，可以实现全部替换，或者安装某种规则遍历字符串</p>
</blockquote>
<p>回调函数的参数：</p>
<ol>
<li>第一个是整个正则匹配到的内容</li>
<li>如果有分组，会从第二个参数</li>
<li>倒数第二个参数是 本次捕获的的起始索引位置</li>
<li>最后一个参数是当前原始字符串</li>
</ol>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>;
<span class="hljs-keyword">let</span> reg = <span class="hljs-regexp">/(qq)/g</span>;
<span class="hljs-keyword">let</span> r2 = str.replace(reg, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">...arg</span>) </span>&#123;
   <span class="hljs-comment">// 第一个整个正则匹配到的内容</span>
   <span class="hljs-comment">// 如果有分组，会从第二个参数</span>
   <span class="hljs-comment">// 倒数第二个参数是 本次捕获的的起始索引位置</span>
   <span class="hljs-comment">// 最后一个参数是当前原始字符串</span>
   i++;
   <span class="hljs-built_in">console</span>.log(arg);
   <span class="hljs-keyword">return</span> <span class="hljs-string">'江外'</span>
&#125;);
<span class="hljs-built_in">console</span>.log(r2);
<span class="hljs-built_in">console</span>.log(i); <span class="hljs-comment">// 2 说明回调函数执行了2次；</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-20">2. 格式化时间字符串</h3>
<blockquote>
<p>按照时间模板格式时间字符串</p>
</blockquote>
<ul>
<li>
<p>"2019/6/30 17:50:23" => '06-30 17:50'</p>
</li>
<li>
<p>2.1 获取时间字符串中所有时间数字</p>
</li>
</ul>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> str2 = <span class="hljs-string">"2019/6/30 17:50:23"</span>;
<span class="hljs-keyword">let</span> reg2 = <span class="hljs-regexp">/\d+/g</span>;
<span class="hljs-keyword">let</span> ary = str2.match(reg2);
<span class="hljs-built_in">console</span>.log(ary);
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li>2.2 判断如果这些数字比10小，需要补0</li>
</ul>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> addZero = ary.map(<span class="hljs-function"><span class="hljs-params">item</span> =></span> +item < <span class="hljs-number">10</span> ? <span class="hljs-string">'0'</span> + item : item);
<span class="hljs-built_in">console</span>.log(addZero);
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li>2.3 根据模板把时间格式化</li>
</ul>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> tmp = <span class="hljs-string">'&#123;0&#125;年&#123;1&#125;月&#123;2&#125;日 &#123;3&#125;时&#123;4&#125;分&#123;5&#125;秒'</span>;
<span class="hljs-keyword">let</span> tmpReg = <span class="hljs-regexp">/&#123;(\d)&#125;/g</span>;
<span class="hljs-keyword">let</span> result2 = tmp.replace(tmpReg, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">[, index]</span>) </span>&#123;
   <span class="hljs-keyword">return</span> ary[index];
&#125;);
<span class="hljs-built_in">console</span>.log(result2);
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li>扩展到原型上</li>
</ul>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-built_in">String</span>.prototype.myFormatTime = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">tmp = <span class="hljs-string">'&#123;0&#125;年&#123;1&#125;月&#123;2&#125;日 &#123;3&#125;时&#123;4&#125;分&#123;5&#125;秒'</span></span>) </span>&#123;
   <span class="hljs-keyword">let</span> ary = <span class="hljs-built_in">this</span>.match(<span class="hljs-regexp">/\d+/g</span>).map(<span class="hljs-function"><span class="hljs-params">item</span> =></span> +item < <span class="hljs-number">10</span> ? <span class="hljs-string">'0'</span> + item : item);
   <span class="hljs-keyword">return</span> tmp.replace(<span class="hljs-regexp">/&#123;(\d)&#125;/g</span>, <span class="hljs-function">(<span class="hljs-params">...[, index]</span>) =></span> ary[index]);
&#125;;

<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"2018/4/30 17:50:23"</span>.myFormatTime(<span class="hljs-string">'&#123;1&#125;-&#123;2&#125; &#123;3&#125;:&#123;4&#125;:&#123;5&#125;'</span>));
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-21">3. url查询参数格式化</h3>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> url = <span class="hljs-string">'http://www.qq.cn?name=rmb&age=18&form=qq&addre=hebei'</span>;
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li>把上面的url参数的转换成一个对象：&#123;name: 'rmb', age: '18'&#125;</li>
</ul>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> params = &#123;&#125;;
<span class="hljs-keyword">let</span> reg3 = <span class="hljs-regexp">/([^?=&]+)=([^?=&]+)/g</span>;
url.replace(reg3, <span class="hljs-function">(<span class="hljs-params">str, key, value</span>) =></span> params[key] = value);
<span class="hljs-built_in">console</span>.log(params);
<span class="copy-code-btn">复制代码</span></code></pre>
<ul>
<li>扩展到原型上</li>
</ul>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-built_in">String</span>.prototype.urlSeries = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
   <span class="hljs-keyword">let</span> params = &#123;&#125;;
   <span class="hljs-keyword">let</span> reg3 = <span class="hljs-regexp">/([^?=&]+)=([^?=&]+)/g</span>;
   <span class="hljs-built_in">this</span>.replace(reg3, <span class="hljs-function">(<span class="hljs-params">str, key, value</span>) =></span> params[key] = value);
   <span class="hljs-keyword">return</span> params
&#125;;
<span class="hljs-keyword">let</span> result3 = url.urlSeries();
<span class="hljs-built_in">console</span>.log(result3);
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-22">4. 获取数据类型</h3>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-built_in">Object</span>.isTypeOf = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">val</span>) </span>&#123;
   <span class="hljs-keyword">let</span> res = <span class="hljs-built_in">Object</span>.prototype.toString.call(val); <span class="hljs-comment">// "[object Xxxx]"</span>
   <span class="hljs-keyword">let</span> reg = <span class="hljs-regexp">/^[object ([a-zA-Z]+)]$/</span>; <span class="hljs-comment">// 在正则使用某些特殊元字符的原义时需要转义</span>
   <span class="hljs-keyword">let</span> exec = reg.exec(res)[<span class="hljs-number">1</span>];
   <span class="hljs-keyword">return</span> exec.toLowerCase();
&#125;;
<span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Object</span>.isTypeOf(<span class="hljs-number">1</span>));
<span class="copy-code-btn">复制代码</span></code></pre></div>  
</div>
            