
---
title: 'æ‰‹æ‘¸æ‰‹æ•™ä½ ä½¿ç”¨æœ€æ–°ç‰ˆhusky(v7.0.1)è®©ä»£ç æ›´ä¼˜é›…è§„èŒƒ'
categories: 
 - ç¼–ç¨‹
 - æ˜é‡‘
 - åˆ†ç±»
headimg: 'https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6e452c75dcd4453d9f09d48ce4528c61~tplv-k3u1fbpfcp-watermark.image'
author: æ˜é‡‘
comments: false
date: Wed, 07 Jul 2021 06:36:00 GMT
thumbnail: 'https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6e452c75dcd4453d9f09d48ce4528c61~tplv-k3u1fbpfcp-watermark.image'
---

<div>   
<div class="markdown-body"><style>@charset "UTF-8";.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:#353535&#125;.markdown-body h1&#123;padding-bottom:4px;font-size:30px&#125;.markdown-body h1,.markdown-body h2&#123;margin-top:36px;margin-bottom:10px;line-height:1.5;color:#005bb7&#125;.markdown-body h2&#123;position:relative;padding-left:16px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h2:before&#123;content:"ã€Œ";position:absolute;top:-6px;left:-10px&#125;.markdown-body h2:after&#123;content:"ã€";position:absolute;top:6px;right:auto&#125;.markdown-body h3&#123;position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:#005bb7;padding-left:6px&#125;.markdown-body h3:before&#123;content:"Â»";padding-right:6px;color:#2196f3&#125;.markdown-body h4&#123;margin-top:24px;font-size:16px&#125;.markdown-body h4,.markdown-body h5&#123;padding-bottom:0;margin-bottom:10px;line-height:1.5;color:#005bb7;padding-left:6px&#125;.markdown-body h5&#123;margin-top:18px;font-size:14px&#125;.markdown-body h6&#123;padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:#005bb7;padding-left:6px&#125;.markdown-body p&#123;line-height:inherit;margin-top:16px;margin-bottom:16px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#007fff,rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),#007fff);border-width:0;overflow:visible&#125;.markdown-body hr:after&#123;content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center&#125;.markdown-body code&#123;padding:.065em .4em;font-size:.87em;color:#c2185b;word-break:break-word;overflow-x:auto;background-color:#fff4f4;border-radius:2px&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8&#125;.markdown-body pre>code::-webkit-scrollbar&#123;width:4px;height:4px&#125;.markdown-body pre>code::-webkit-scrollbar-track&#123;background-color:#bedcff&#125;.markdown-body pre>code::-webkit-scrollbar-thumb&#123;background-color:#2196f3;border-radius:10px&#125;.markdown-body a&#123;position:relative;text-decoration:none;color:#3da8f5;border-bottom:1px solid #bedcff&#125;.markdown-body a:hover&#123;color:#007fff;border-bottom-color:#007fff&#125;.markdown-body a:active&#123;color:#007fff&#125;.markdown-body a:after&#123;position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid #bedcff;transition:top .3s,opacity .3s;transform:translateZ(0)&#125;.markdown-body a:hover:after&#123;top:0;opacity:1;border-bottom-color:#007fff&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #c3e0fd;border-spacing:0;border-collapse:collapse&#125;.markdown-body table thead&#123;color:#000;text-align:left;font-size:14px;background:#f6f6f6&#125;.markdown-body table tr:nth-child(2n)&#123;background-color:#f7fbff&#125;.markdown-body table tr:hover&#123;background-color:#e0edf7&#125;.markdown-body table td,.markdown-body table th&#123;padding:12px 8px;line-height:24px;border:1px solid #c3e0fd&#125;.markdown-body table th&#123;color:#005bb7;background-color:#dff0ff&#125;.markdown-body table td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#8c8c8c;border-left:4px solid #2196f3;background-color:#f0fdff;padding:1px 20px;margin:22px 0&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body b,.markdown-body blockquote>b,.markdown-body blockquote>strong,.markdown-body strong&#123;color:#2196f3&#125;.markdown-body em,.markdown-body i&#123;color:#4fc3f7&#125;.markdown-body del&#123;color:#ccc&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:4px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body details>summary&#123;outline:none;color:#005bb7;font-size:20px;font-weight:bolder;border-bottom:1px solid #bedcff;cursor:pointer&#125;.markdown-body details>p&#123;padding:10px 20px;margin:10px 0 0;color:#666;background-color:#f0fdff;border:2px dashed #2196f3&#125;.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection&#123;color:#005bb7;background-color:rgba(160,200,255,.15)&#125;.markdown-body p::selection&#123;color:#c80000&#125;.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection&#123;background-color:transparent&#125;.markdown-body code::selection&#123;background-color:#ffeaeb&#125;.markdown-body pre>code::selection&#123;background-color:rgba(160,200,255,.25)&#125;.markdown-body ol ::selection,.markdown-body ul ::selection&#123;background-color:rgba(160,200,255,.15)&#125;.markdown-body .contains-task-list&#123;padding-left:14px;list-style:none&#125;.markdown-body .contains-task-list input[type=checkbox]&#123;position:relative&#125;.markdown-body .contains-task-list input[type=checkbox]:before&#123;content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1&#125;.markdown-body .contains-task-list input[type=checkbox]:checked:after&#123;content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><blockquote>
<p>æœ¬æ–‡å·²å‚ä¸å¥½æ–‡å¬é›†ä»¤æ´»åŠ¨ï¼Œç‚¹å‡»æŸ¥çœ‹ï¼š<a href="https://juejin.cn/post/6978685539985653767/" target="_blank" title="https://juejin.cn/post/6978685539985653767/">åç«¯ã€å¤§å‰ç«¯åŒèµ›é“æŠ•ç¨¿ï¼Œ2ä¸‡å…ƒå¥–æ± ç­‰ä½ æŒ‘æˆ˜ï¼</a></p>
</blockquote>
<blockquote>
<p><strong>helloï¼Œå¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°æ†¨æ†¨ï¼Œä¸€ä¸ªæŒç»­æ€§å­¦ä¹ ï¼Œä¸é—´æ–­å†™bugçš„å‰ç«¯å·¥ç¨‹å¸ˆ</strong></p>
</blockquote>
<h2 data-id="heading-0">å†™åœ¨å‰é¢</h2>
<p>æ—¥å¸¸å·¥ä½œä¸­ï¼Œå‡ ä¹æ¯ä¸ªé¡¹ç›®éƒ½æ˜¯ç”±å¤šä¸ªäººè¿›è¡Œç»´æŠ¤ï¼Œæ¯ä¸ªäººçš„ä»£ç ä¹¦å†™ä¹ æƒ¯å’Œé£æ ¼åˆä¸å°½ç›¸åŒï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæ²¡æœ‰ç»Ÿä¸€çš„è§„èŒƒï¼Œä½ å°±ä¼šå‘ç°æäº¤åˆ°ä»£ç ä»“åº“çš„ä»£ç æ ¼å¼äº”èŠ±å…«é—¨ï¼Œå¹¶ä¸”<code>commit log</code>ä¹Ÿæ˜¯ä¹±ä¸ƒå…«ç³Ÿï¼Œæ›´ä¸¥é‡ç‚¹å¯èƒ½æœ‰çš„å°ä¼™ä¼´åœ¨æäº¤ä»£ç çš„æ—¶å€™ä¸ºäº†çœäº‹<code>commit message</code>ç›´æ¥å°±æ˜¯ä¸¤ä¸ªç‚¹ç‚¹ï¼Œæ€»ä¹‹ï¼Œå¯èƒ½å°±æ˜¯æ€ä¹ˆçœäº‹æ€ä¹ˆæ¥ã€‚æœ€ç»ˆå¯¼è‡´çš„ç»“æœå°±æ˜¯ï¼Œå½“ä½ æŸä¸€å¤©éœ€è¦<code>cherry-pick</code>æŸä¸ª<code>commit</code>åˆ°å¦å¤–çš„åˆ†æ”¯çš„æ—¶ï¼Œçœ‹ç€<code>commmit log</code>ä¸€è„¸æ‡µé€¼ã€‚æ‰€ä»¥ï¼Œè§„èŒƒå’Œçº¦æŸåœ¨å¤šäººåä½œä¸‹ï¼Œå°±æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚</p>
<h2 data-id="heading-1">githooks</h2>
<p>ç±»ä¼¼äºå‰ç«¯æ¡†æ¶ä¸­çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œgitåœ¨æŸäº›ç‰¹å®šäº‹ä»¶å‘ç”Ÿå‰æˆ–åä¹Ÿä¼šæœ‰æŸäº›æ‰§è¡Œç‰¹å®šåŠŸèƒ½çš„é’©å­ï¼Œgithookså°±æ˜¯åœ¨gitæ‰§è¡Œç‰¹å®šäº‹ä»¶ï¼ˆå¦‚commitã€pushã€receiveç­‰ï¼‰æ—¶è§¦å‘è¿è¡Œçš„è„šæœ¬ã€‚</p>
<p>githooks ä¿å­˜åœ¨ .git æ–‡ä»¶å¤¹ä¸­</p>
<p>å…·ä½“é’©å­å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p>






















































































































































<table><thead><tr><th>git hook</th><th>æ‰§è¡Œæ—¶æœº</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>applypatch-msg</td><td>git am æ‰§è¡Œå‰</td><td>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœcommit-msgå¯ç”¨çš„è¯ï¼Œapplpatch-msgé’©å­åœ¨å¯ç”¨æ—¶ä¼šè¿è¡Œcommit-msgé’©å­</td></tr><tr><td>pre-applypatc</td><td>git am æ‰§è¡Œå‰</td><td>é»˜è®¤çš„pre-applypatché’©å­åœ¨å¯ç”¨æ—¶è¿è¡Œpre-commité’©å­ï¼ˆå¦‚æœåè€…å·²å¯ç”¨ï¼‰</td></tr><tr><td>post-applypatch</td><td>git am æ‰§è¡Œå</td><td>è¿™ä¸ªé’©å­ä¸»è¦ç”¨äºé€šçŸ¥ï¼Œä¸èƒ½å½±å“git-amçš„ç»“æœ</td></tr><tr><td>pre-commit</td><td>git commit æ‰§è¡Œå‰</td><td>å¯ä»¥ä½¿ç”¨ git commit --no verify å‘½ä»¤ç»•è¿‡è¯¥é’©å­</td></tr><tr><td>pre-merge-commit</td><td>git merge æ‰§è¡Œå‰</td><td>å¯ä»¥ä½¿ç”¨ git merge --no verify å‘½ä»¤ç»•è¿‡è¯¥é’©å­</td></tr><tr><td>prepare-commit-msg</td><td>git commitæ‰§è¡Œä¹‹åï¼Œç¼–è¾‘å™¨æ‰“å¼€ä¹‹å‰</td><td></td></tr><tr><td>commit-msg</td><td>git commit æ‰§è¡Œå‰</td><td>å¯ä»¥ä½¿ç”¨ git commit --no verify å‘½ä»¤ç»•è¿‡è¯¥é’©å­</td></tr><tr><td>post-commit</td><td>git commit æ‰§è¡Œå</td><td>ä¸å½±å“git commitçš„ç»“æœ</td></tr><tr><td>pre-rebase</td><td>git rebaseæ‰§è¡Œå‰</td><td></td></tr><tr><td>post-checkout</td><td>git checkout æˆ– git switchæ‰§è¡Œå</td><td>å¦‚æœä¸ä½¿ç”¨ --no-checkout å‚æ•°ï¼Œåˆ™åœ¨ git clone ä¹‹åä¹Ÿä¼šæ‰§è¡Œ</td></tr><tr><td>post-merge</td><td>git merge æ‰§è¡Œå</td><td>åœ¨æ‰§è¡Œgit pull æ—¶ä¹Ÿä¼šè¢«è°ƒç”¨</td></tr><tr><td>pre-push</td><td></td><td>git push æ‰§è¡Œå‰</td></tr><tr><td>pre-receive</td><td>git receive pack æ‰§è¡Œå‰</td><td></td></tr><tr><td>update</td><td></td><td></td></tr><tr><td>proc-receive</td><td></td><td></td></tr><tr><td>post-receive</td><td>git receive pack æ‰§è¡Œå‰</td><td>ä¸å½±å“ git receive pack çš„æ‰§è¡Œç»“æœ</td></tr><tr><td>post-update</td><td>å½“git receive packå¯¹ git push ä½œå‡ºååº”å¹¶æ›´æ–°ä»“åº“ä¸­çš„å¼•ç”¨æ—¶</td><td></td></tr><tr><td>reference-transaction</td><td></td><td></td></tr><tr><td>push-to-checkout</td><td>å½“git receive packå¯¹ git push ä½œå‡ºååº”å¹¶æ›´æ–°ä»“åº“ä¸­çš„å¼•ç”¨æ—¶ï¼Œä»¥åŠå½“æ¨é€è¯•å›¾æ›´æ–°å½“å‰è¢«ç­¾å‡ºçš„åˆ†æ”¯ä¸” receive.denyCurrentBranché…ç½®è¢«updateInsteadæ—¶</td><td></td></tr><tr><td>pre-auto-gc</td><td>git gc --auto æ‰§è¡Œå‰</td><td></td></tr><tr><td>post-rewrite</td><td>æ‰§è¡Œ git commit --amend æˆ– git rebase æ—¶</td><td></td></tr><tr><td>sendemail-validate</td><td>git send-email æ‰§è¡Œå‰</td><td></td></tr><tr><td>fsmonitor-watchman</td><td>é…ç½®core.fsmonitorè¢«è®¾ç½®ä¸º.git/hooks/fsmonitor-watchman æˆ–.git/hooks/fsmonitor-watchmanv2æ—¶</td><td></td></tr><tr><td>p4-changelist</td><td>git-p4 submit æ‰§è¡Œå¹¶ç¼–è¾‘å®Œchangelist message ä¹‹å</td><td>å¯ä»¥ä½¿ç”¨ git-p4 submit --no-verifyç»•è¿‡è¯¥é’©å­</td></tr><tr><td>p4-prepare-changelist</td><td>git-p4 submit æ‰§è¡Œåï¼Œç¼–è¾‘å™¨å¯åŠ¨å‰</td><td>å¯ä»¥ä½¿ç”¨ git-p4 submit --no-verifyç»•è¿‡è¯¥é’©å­</td></tr><tr><td>p4-post-changelist</td><td>git-p4 submit æ‰§è¡Œå</td><td></td></tr><tr><td>p4-pre-submit</td><td>git-p4 submit æ‰§è¡Œå‰</td><td>å¯ä»¥ä½¿ç”¨ git-p4 submit --no-verifyç»•è¿‡è¯¥é’©å­</td></tr><tr><td>post-index-change</td><td>ç´¢å¼•è¢«å†™å…¥ read-cache.c do_write_locked_indexå</td><td></td></tr></tbody></table>
<h2 data-id="heading-2">husky(v7.0.1)</h2>
<p>husky æ˜¯ä¸€ä¸ªè®©é…ç½® git é’©å­å˜å¾—æ›´ç®€å•çš„å·¥å…·ã€‚æ”¯æŒæ‰€æœ‰çš„gité’©å­ã€‚</p>
<h3 data-id="heading-3">ä½¿ç”¨husky</h3>
<ul>
<li>é¦–å…ˆæ‰§è¡Œå®‰è£…å‘½ä»¤  <code>npm install husky --save-dev</code></li>
<li>è¦åœ¨å®‰è£…åè‡ªåŠ¨å¯ç”¨é’©å­ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œ<code>npm set-script prepare "husky install"</code></li>
<li>æ‰§è¡Œå®Œä¸Šä¸€æ­¥çš„å‘½ä»¤ä¹‹åå¯ä»¥åœ¨package.json æ–‡ä»¶çš„scriptsé…ç½®é¡¹ä¸­çœ‹åˆ°å¦‚ä¸‹ä»£ç ï¼š</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-string">"scripts"</span>: &#123;
    <span class="hljs-string">"prepare"</span>: <span class="hljs-string">"husky install"</span>
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>
<p>åˆ›å»ºé’©å­ï¼Œæ¯”å¦‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªcommit-msgé’©å­ï¼š<code>yarn husky add .husky/commit-msg 'yarn commitlint --edit "$1"'</code></p>
</li>
<li>
<p>å°†ä¸Šä¸€æ­¥åˆ›å»ºçš„ commit-msg é’©å­æ·»åŠ åˆ°gitä¸­ï¼š<code>git add .husky/commit-msg</code></p>
</li>
<li>
<p>æ­¤å¤–è¿˜æœ‰ <code>husky-init</code>å‘½ä»¤ï¼Œ æ‰§è¡Œä¹‹åå¯ä»¥åœ¨é¡¹ç›®ä¸­å¿«é€Ÿçš„åˆå§‹åŒ–ä¸€ä¸ªhuskyã€‚</p>
</li>
</ul>
<h2 data-id="heading-4">lint-staged(v11.0.0)</h2>
<p><strong>lint-staged æ˜¯ä¸€ä¸ªåœ¨gitæš‚å­˜åŒºä¸Šè¿è¡Œlintersçš„å·¥å…·ã€‚</strong>ï¼ˆRun linters against staged git files and don't let ğŸ’© slip into your code base!ï¼‰</p>
<p>å®ƒå°†æ ¹æ®package.jsonä¾èµ–é¡¹ä¸­çš„ä»£ç è´¨é‡å·¥å…·æ¥å®‰è£…å’Œé…ç½® husky å’Œ lint-staged ï¼Œå› æ­¤è¯·ç¡®ä¿åœ¨æ­¤ä¹‹å‰å®‰è£…ï¼ˆnpm install --save-devï¼‰å¹¶é…ç½®æ‰€æœ‰ä»£ç è´¨é‡å·¥å…·ï¼Œæ¯”å¦‚Prettierå’ŒESlintã€‚</p>
<ul>
<li>å®‰è£…ï¼šæ‰§è¡Œ <code>yarn add lint-staged -D</code> å‘½ä»¤</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js">æ‰§è¡Œ npx lint-staged --help å‘½ä»¤å¯ä»¥çœ‹åˆ°ç›¸å…³çš„æ‰€æœ‰å‚æ•°å¦‚ä¸‹ï¼š
ç”¨æ³•: lint-staged [options]

<span class="hljs-attr">Options</span>:
  -V, --version                      è¾“å‡ºç‰ˆæœ¬å·
  --allow-empty                      å½“ä»»åŠ¡æ’¤æ¶ˆæ‰€æœ‰åˆ†é˜¶æ®µçš„æ›´æ”¹æ—¶å…è®¸ç©ºæäº¤ï¼ˆé»˜è®¤å€¼ï¼š<span class="hljs-literal">false</span>ï¼‰
  -c, --config [path]                é…ç½®æ–‡ä»¶çš„è·¯å¾„
  -d, --debug                        æ‰“å°å…¶ä»–è°ƒè¯•ä¿¡æ¯ï¼ˆé»˜è®¤å€¼ï¼š<span class="hljs-literal">false</span>ï¼‰
  -p, --concurrent <parallel tasks>  è¦åŒæ—¶è¿è¡Œçš„ä»»åŠ¡æ•°ï¼Œæˆ–è€…ä¸º<span class="hljs-literal">false</span>åˆ™è¦è¿ç»­è¿è¡Œä»»åŠ¡ï¼ˆé»˜è®¤å€¼ï¼š<span class="hljs-literal">true</span>ï¼‰
  -q, --quiet                        è‡ªå·±çš„æ§åˆ¶å°è¾“å‡ºï¼ˆé»˜è®¤å€¼ï¼š<span class="hljs-literal">false</span>ï¼‰
  -r, --relative                     å°†ç›¸å¯¹æ–‡ä»¶è·¯å¾„ä¼ é€’ç»™ä»»åŠ¡ï¼ˆé»˜è®¤å€¼ï¼š<span class="hljs-literal">false</span>ï¼‰
  -x, --shell                        è·³è¿‡ä»»åŠ¡è§£æä»¥æ›´å¥½åœ°æ”¯æŒshellï¼ˆé»˜è®¤å€¼ï¼š<span class="hljs-literal">false</span>ï¼‰
  -h, --help                         è¾“å‡ºç”¨æ³•ä¿¡æ¯
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li><strong>--allow-empty</strong>ï¼šä½¿ç”¨æ­¤å‚æ•°å…è®¸åˆ›å»ºç©ºçš„gitæäº¤ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“LITERä»»åŠ¡æ’¤æ¶ˆæ‰€æœ‰é˜¶æ®µæ€§çš„æ›´æ”¹æ—¶ï¼ŒLITETé˜¶æ®µå°†æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå¹¶ä¸­æ­¢æäº¤ã€‚</li>
</ul>
<h2 data-id="heading-5">git commitæäº¤è§„èŒƒ</h2>
<p>é€šå¸¸ä½¿ç”¨ Google AnguarJS è§„èŒƒçš„è¦æ±‚ã€‚
æ ¼å¼è¦æ±‚ï¼š</p>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-tag"><<span class="hljs-name">type</span>></span>(<span class="hljs-tag"><<span class="hljs-name">scope</span>></span>): <span class="hljs-tag"><<span class="hljs-name">subject</span>></span>
<span class="hljs-tag"><<span class="hljs-name">BLANK</span> <span class="hljs-attr">LINE</span>></span>
<span class="hljs-tag"><<span class="hljs-name">body</span>></span>
<span class="hljs-tag"><<span class="hljs-name">BLANK</span> <span class="hljs-attr">LINE</span>></span>
<span class="hljs-tag"><<span class="hljs-name">footer</span>></span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li><code><type></code>ä»£è¡¨æŸæ¬¡æäº¤çš„ç±»å‹ï¼Œæ¯”å¦‚æ˜¯ä¿®å¤ä¸€ä¸ª bug æˆ–æ˜¯å¢åŠ ä¸€ä¸ª featureï¼Œå…·ä½“ç±»å‹å¦‚ä¸‹ï¼š</li>
</ul>













































<table><thead><tr><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>feat</td><td>æ–°å¢feature</td></tr><tr><td>fix</td><td>ä¿®å¤bug</td></tr><tr><td>docs</td><td>ä»…ä»…ä¿®æ”¹äº†æ–‡æ¡£ï¼Œæ¯”å¦‚README, CHANGELOG, CONTRIBUTEç­‰ç­‰;</td></tr><tr><td>style</td><td>ä»…ä»…ä¿®æ”¹äº†ç©ºæ ¼ã€æ ¼å¼ç¼©è¿›ã€é€—å·ç­‰ç­‰ï¼Œä¸æ”¹å˜ä»£ç é€»è¾‘;</td></tr><tr><td>refactor</td><td>ä»£ç é‡æ„ï¼Œæ²¡æœ‰åŠ æ–°åŠŸèƒ½æˆ–è€…ä¿®å¤bug</td></tr><tr><td>perf</td><td>ä¼˜åŒ–ç›¸å…³ï¼Œæ¯”å¦‚æå‡æ€§èƒ½ã€ä½“éªŒ</td></tr><tr><td>test</td><td>æµ‹è¯•ç”¨ä¾‹ï¼ŒåŒ…æ‹¬å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ç­‰</td></tr><tr><td>chore</td><td>æ”¹å˜æ„å»ºæµç¨‹ã€æˆ–è€…å¢åŠ ä¾èµ–åº“ã€å·¥å…·ç­‰</td></tr><tr><td>revert</td><td>å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬</td></tr></tbody></table>
<ul>
<li><code>scope</code>ï¼šè¯´æ˜commitå½±å“çš„èŒƒå›´ã€‚scopeä¾æ®é¡¹ç›®è€Œå®šï¼Œä¾‹å¦‚åœ¨ä¸šåŠ¡é¡¹ç›®ä¸­å¯ä»¥ä¾æ®èœå•æˆ–è€…åŠŸèƒ½æ¨¡å—åˆ’åˆ†ï¼Œå¦‚æœæ˜¯ç»„ä»¶åº“å¼€å‘ï¼Œåˆ™å¯ä»¥ä¾æ®ç»„ä»¶åˆ’åˆ†ã€‚</li>
<li><code>subject</code>:æ˜¯commitçš„ç®€çŸ­æè¿°ï¼›</li>
<li><code>body</code>:æäº¤ä»£ç çš„è¯¦ç»†æè¿°ï¼›</li>
<li><code>footer</code>:å¦‚æœä»£ç çš„æäº¤æ˜¯ä¸å…¼å®¹å˜æ›´æˆ–å…³é—­ç¼ºé™·ï¼Œåˆ™footerå¿…éœ€ï¼Œå¦åˆ™å¯ä»¥çœç•¥ã€‚</li>
</ul>
<h2 data-id="heading-6">å®ç°</h2>
<ul>
<li>
<p>é¦–å…ˆæˆ‘ä»¬æ¥å®‰è£…éœ€è¦ç”¨åˆ°çš„ä¾èµ–ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
</li>
<li>
<p>æ‰§è¡Œ <code>yarn add husky -D</code> å®‰è£…huskyã€‚</p>
</li>
<li>
<p>æ¥ç€æ‰§è¡Œ <code>yarn set-script prepare "husky install"</code> ä¹‹åï¼Œå¯ä»¥åœ¨package.jsonæ–‡ä»¶çš„scriptsé…ç½®é¡¹ä¸­çœ‹åˆ° <code>"prepare": "husky install"</code></p>
</li>
<li>
<p>ç»§ç»­æ‰§è¡Œ <code>yarn prepare</code>ä¹‹åï¼Œå¯ä»¥åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹çœ‹åˆ°å¤šäº†å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ç›®å½•ï¼š</p>
</li>
</ul>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6e452c75dcd4453d9f09d48ce4528c61~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li>
<p>husky å‡†å¤‡å¥½ä¹‹åï¼Œæˆ‘ä»¬æ¥ç€æ¥å®‰è£…å…¶ä»–çš„ç”¨äºè§„èŒƒï¼Œæ£€æŸ¥ä»£ç çš„ä¾èµ–ã€‚</p>
</li>
<li>
<p>æ‰§è¡Œ<code>yarn add lint-staged -D</code></p>
</li>
<li>
<p>æ‰§è¡Œ<code>yarn add eslint prettier -D</code></p>
</li>
<li>
<p>åœ¨package.jsonæ–‡ä»¶ä¸‹æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p>
</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-string">"lint-staged"</span>: &#123;
    <span class="hljs-string">"src/**/*.&#123;js,jsx,ts,tsx,json&#125;"</span>: [
      <span class="hljs-string">"prettier --write"</span>,
      <span class="hljs-string">"eslint"</span>,
      <span class="hljs-string">"git add"</span>
    ]
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>
<p>æ‰§è¡Œ<code>yarn add @commitlint/cli @commitlint/config-conventional -D</code>å®‰è£…commitlintç›¸å…³ä¾èµ–ï¼Œç”¨æ¥å¸®åŠ©æˆ‘ä»¬åœ¨å¤šäººå¼€å‘æ—¶ï¼Œéµå®ˆ git æäº¤çº¦å®šã€‚</p>
</li>
<li>
<p>æ‰§è¡Œ<code>echo "module.exports = &#123;extends: ['@commitlint/config-conventional']&#125;" > commitlint.config.js</code>åœ¨æ ¹ç›®å½•åˆ›å»º commitlint.config.js æ–‡ä»¶ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥æ‰‹åŠ¨åˆ›å»ºæ­¤æ–‡ä»¶ï¼‰ï¼Œå…¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-built_in">module</span>.exports = &#123;
  <span class="hljs-attr">extends</span>: [
    <span class="hljs-string">"@commitlint/config-conventional"</span>
  ],
  <span class="hljs-comment">// ä»¥ä¸‹æ—¶æˆ‘ä»¬è‡ªå®šä¹‰çš„è§„åˆ™</span>
  <span class="hljs-attr">rules</span>: &#123;
    <span class="hljs-string">'type-enum'</span>: [
      <span class="hljs-number">2</span>,
      <span class="hljs-string">'always'</span>,
      [
        <span class="hljs-string">'bug'</span>, <span class="hljs-comment">// æ­¤é¡¹ç‰¹åˆ«é’ˆå¯¹bugå·ï¼Œç”¨äºå‘æµ‹è¯•åé¦ˆbugåˆ—è¡¨çš„bugä¿®æ”¹æƒ…å†µ</span>
        <span class="hljs-string">'feat'</span>, <span class="hljs-comment">// æ–°åŠŸèƒ½ï¼ˆfeatureï¼‰</span>
        <span class="hljs-string">'fix'</span>, <span class="hljs-comment">// ä¿®è¡¥bug</span>
        <span class="hljs-string">'docs'</span>, <span class="hljs-comment">// æ–‡æ¡£ï¼ˆdocumentationï¼‰</span>
        <span class="hljs-string">'style'</span>, <span class="hljs-comment">// æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰</span>
        <span class="hljs-string">'refactor'</span>, <span class="hljs-comment">// é‡æ„ï¼ˆå³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹bugçš„ä»£ç å˜åŠ¨ï¼‰</span>
        <span class="hljs-string">'test'</span>, <span class="hljs-comment">// å¢åŠ æµ‹è¯•</span>
        <span class="hljs-string">'chore'</span>, <span class="hljs-comment">// æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨</span>
        <span class="hljs-string">'revert'</span>, <span class="hljs-comment">// feat(pencil): add â€˜graphiteWidthâ€™ option (æ’¤é”€ä¹‹å‰çš„commit)</span>
        <span class="hljs-string">'merge'</span> <span class="hljs-comment">// åˆå¹¶åˆ†æ”¯ï¼Œ ä¾‹å¦‚ï¼š mergeï¼ˆå‰ç«¯é¡µé¢ï¼‰ï¼š feature-xxxxä¿®æ”¹çº¿ç¨‹åœ°å€</span>
      ]
    ]
  &#125;
&#125;;

<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>
<p>å¦‚æœè¿˜éœ€è¦åˆ«çš„ä»£ç ä¼˜åŒ–ä¾èµ–åŒ…ï¼Œå¯ä»¥æ¥ç€è¿›è¡Œå®‰è£…</p>
</li>
<li>
<p>è‡³æ­¤ï¼Œå‡†å¤‡å¥½æˆ‘ä»¬éœ€è¦çš„ä¾èµ–åŒ…ä¹‹åï¼Œæˆ‘ä»¬å¼€å§‹æ·»åŠ é’©å­</p>
</li>
<li>
<p>æ‰§è¡Œ<code>yarn husky add .husky/commit-msg 'yarn commitlint --edit "$1"'</code>ä¹‹åï¼Œä¼šçœ‹åˆ°åœ¨æ ¹ç›®å½•çš„<code>.husky</code>æ–‡ä»¶å¤¹ä¸‹å¤šäº†ä¸€ä¸ª <code>commit-msg</code> æ–‡ä»¶ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š</p>
</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js">#!<span class="hljs-regexp">/bin/</span>sh
. <span class="hljs-string">"$(dirname "</span>$<span class="hljs-number">0</span><span class="hljs-string">")/_/husky.sh"</span>

yarn commitlint --edit <span class="hljs-string">"$1"</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>
<p>ç´§æ¥ç€ï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸Šä¸€æ­¥æ·»åŠ çš„é’©å­æ·»åŠ åˆ°gitä¸­å»ï¼Œæ‰§è¡Œ<code>git add .husky/commit-msg</code></p>
</li>
<li>
<p>æ‰§è¡Œ<code>yarn husky add .husky/pre-commit 'yarn lint-staged --allow-empty "$1"'</code>ä¹‹åï¼Œä¼šçœ‹åˆ°åœ¨æ ¹ç›®å½•çš„<code>.husky</code>æ–‡ä»¶å¤¹ä¸‹å¤šäº†ä¸€ä¸ª <code>pre-commit</code> æ–‡ä»¶ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š</p>
</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js">#!<span class="hljs-regexp">/bin/</span>sh
. <span class="hljs-string">"$(dirname "</span>$<span class="hljs-number">0</span><span class="hljs-string">")/_/husky.sh"</span>

yarn lint-staged --allow-empty <span class="hljs-string">"$1"</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li>
<p>åŒæ ·çš„ï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸Šä¸€æ­¥æ·»åŠ çš„é’©å­æ·»åŠ åˆ°gitä¸­å»ï¼Œæ‰§è¡Œ<code>git add .husky/pre-commit</code></p>
</li>
<li>
<p>æ¥ä¸‹æ¥ï¼Œå°±æ˜¯æ£€éªŒæˆ‘ä¹ˆé…ç½®çš„æ—¶å€™äº†ï¼šå½“æˆ‘ä»¬æŒ‰ç…§ commitè§„èŒƒæ­£ç¡®æäº¤æ—¶ï¼Œå¯ä»¥åœ¨æ§åˆ¶å°çœ‹åˆ°å¦‚ä¸‹è¾“å‡º</p>
</li>
</ul>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2f95bad7174b422cab42b6ef64686bbd~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li>å½“æˆ‘ä»¬ä¸æŒ‰ç…§é…ç½®çš„è§„èŒƒæ¥æäº¤commitæ—¶ï¼Œå°±ä¼šå‘ç°å¦‚ä¸‹æŠ¥é”™ï¼Œå¹¶é˜»æ­¢ä½ æäº¤ä»£ç </li>
</ul>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ea5260a7b47c4d32b9aa1d526d64b397~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li>è‡³æ­¤ï¼Œæˆ‘ä»¬çš„é’©å­é…ç½®å·²ç»å®Œç¾æ”¶å®˜ï¼</li>
</ul>
<h2 data-id="heading-7">å†™åœ¨æœ€å</h2>
<p>å†™ä½œä¸æ˜“ï¼Œæ¬¢è¿ç‚¹ï¼ˆä¸€ï¼‰èµï¼ˆé”®ï¼‰æ”¶ï¼ˆä¸‰ï¼‰è—ï¼ˆè¿ï¼‰ï¼Œè‹¥æœ‰é”™è¯¯çš„åœ°æ–¹ï¼Œæ¬¢è¿è¯„è®ºæŒ‡æ­£ï¼ï¼ï¼</p>
<p>æˆ‘æ˜¯å°æ†¨æ†¨ï¼Œä¸€ä¸ªæŒç»­æ€§å­¦ä¹ ï¼Œä¸é—´æ–­å†™bugçš„å‰ç«¯å·¥ç¨‹å¸ˆã€‚å…³æ³¨æˆ‘ï¼Œä¸è¿·è·¯ã€‚ä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·è¿›æ­¥ã€‚</p></div>  
</div>
            