
---
title: 'éƒ½2021äº†ï¼Œä½ è¿˜åœ¨ç”¨replaceå—'
categories: 
 - ç¼–ç¨‹
 - æ˜é‡‘
 - åˆ†ç±»
headimg: 'https://picsum.photos/400/300?random=3552'
author: æ˜é‡‘
comments: false
date: Sun, 04 Jul 2021 03:16:18 GMT
thumbnail: 'https://picsum.photos/400/300?random=3552'
---

<div>   
<div class="markdown-body"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><blockquote>
<p>å‰è¨€ï¼šä½ æ˜¯å¦æœ‰è¿™æ ·çš„å›°æ‰°ï¼šæƒ³ç”¨ä¸€ä¸ªæŒ‡å®šçš„å­—ç¬¦ä¸²æ›¿æ¢åŸå­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„éƒ¨åˆ†ï¼Œæ¯”å¦‚ç”¨â€œ*â€æ›¿æ¢â€œaabbccdaâ€ä¸­æ‰€æœ‰çš„å­—ç¬¦â€˜aâ€™ï¼Œç„¶åæŸ¥éStringçš„æ‰€æœ‰æ–¹æ³•ï¼Œåªæ‰¾åˆ°replaceæ–¹æ³•ï¼Œä½†æ˜¯replaceåªèƒ½æ›¿æ¢ç¬¬ä¸€ä¸ªç¬¦åˆçš„å­—ç¬¦aï¼Œåªèƒ½é€šè¿‡å…¶ä»–çš„ä¸€äº›æ–¹å¼è¿›è¡Œå…¨éƒ¨æ›¿æ¢ã€‚jsä¸­æ€ä¹ˆæ²¡æœ‰å…¨éƒ¨æ›¿æ¢çš„æ–¹æ³•å‘¢ï¼Ÿé‚£ä¹ˆï¼Œä»Šå¤©å®ƒæ¥äº†--replaceAllã€‚</p>
</blockquote>
<ul>
<li>String.prototype.replaceçš„å±€é™æ€§</li>
</ul>
<p>æ­£å¦‚å‰è¨€æ‰€è¯´ï¼Œå½“æˆ‘ä»¬æƒ³è¦å°†å­—ç¬¦ä¸²â€œaabbccdaâ€ä¸­çš„â€œaâ€æ›¿æ¢ä¸ºâ€œ*â€æ—¶ï¼Œæƒ³åˆ°çš„æ–¹æ³•æ˜¯replaceï¼Œä½†æ˜¯çœ‹ä¸€ä¸‹replaceæ–¹æ³•çš„å®šä¹‰ï¼š</p>
<blockquote>
<p>replace() æ–¹æ³•è¿”å›ä¸€ä¸ªç”±æ›¿æ¢å€¼ï¼ˆreplacementï¼‰æ›¿æ¢éƒ¨åˆ†æˆ–æ‰€æœ‰çš„æ¨¡å¼ï¼ˆpatternï¼‰åŒ¹é…é¡¹åçš„æ–°å­—ç¬¦ä¸²ã€‚æ¨¡å¼å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œæ›¿æ¢å€¼å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…ä¸€ä¸ªæ¯æ¬¡åŒ¹é…éƒ½è¦è°ƒç”¨çš„å›è°ƒå‡½æ•°ã€‚å¦‚æœpatternæ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™ä»…æ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ã€‚</p>
</blockquote>
<p>æ‰€ä»¥ï¼Œå¦‚æœç›´æ¥ç”¨replaceæ–¹æ³•æ›¿æ¢ï¼Œåˆ™åªä¼šæ›¿æ¢ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å€¼ï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-string">'aabbccda'</span>.replace(<span class="hljs-string">'a'</span>, <span class="hljs-string">'*'</span>); <span class="hljs-comment">// "*abbccda"</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>é‚£ä¹ˆå¦‚ä½•æ‰èƒ½å…¨éƒ¨æ›¿æ¢å‡ºç°çš„â€œaâ€ï¼Ÿä»¥ä¸‹æä¾›ä¸¤ç§å¸¸ç”¨çš„æ–¹æ³•ï¼š<br>
ï¼ˆ1ï¼‰æ­£åˆ™è¡¨è¾¾å¼</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-string">'aabbccda'</span>.replace(<span class="hljs-regexp">/a/g</span>, <span class="hljs-string">'*'</span>); <span class="hljs-comment">// "**bbccd*"</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>ï¼ˆ2ï¼‰å­—ç¬¦ä¸²çš„splitæ–¹æ³•</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-string">'aabbccda'</span>.split(<span class="hljs-string">'a'</span>).join(<span class="hljs-string">'*'</span>); <span class="hljs-comment">// "**bbccd*"</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>è™½ç„¶ä¸Šé¢ä¸¤ç§æ–¹å¼å¯ä»¥è¾¾åˆ°å…¨éƒ¨æ›¿æ¢çš„ç›®çš„ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰æ›´ç›´æ¥çš„æ–¹æ³•å‘¢ï¼Ÿ</p>
<ul>
<li>String.prototype.replaceAll</li>
</ul>
<p>replaceAllæ–¹æ³•ç›®å‰å¤„äºstage4é˜¶æ®µï¼Œé¢„è®¡ä¼šåœ¨ES2021å‘å¸ƒã€‚å®ƒçš„ä½¿ç”¨æ–¹æ³•å¾ˆç®€å•ï¼Œå’Œreplaceä¸€æ ·ï¼š</p>
<blockquote>
<p>replaceAll() æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œæ–°å­—ç¬¦ä¸²æ‰€æœ‰æ»¡è¶³ pattern çš„éƒ¨åˆ†éƒ½å·²è¢«replacement æ›¿æ¢ã€‚patternå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–ä¸€ä¸ª RegExpï¼Œ replacementå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–ä¸€ä¸ªåœ¨æ¯æ¬¡åŒ¹é…è¢«è°ƒç”¨çš„å‡½æ•°ã€‚åŸå§‹å­—ç¬¦ä¸²ä¿æŒä¸å˜ã€‚</p>
</blockquote>
<p>è¯­æ³•ï¼š</p>
<blockquote>
<p>const newStr = str.replaceAll(regexp|substr, newSubstr|function)</p>
</blockquote>
<p>é‚£ä¹ˆï¼Œå‰é¢æåˆ°çš„é—®é¢˜å°±å¯ä»¥ç”¨replaceAllæ–¹æ³•è§£å†³ï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-string">'aabbccda'</span>.replaceAll(<span class="hljs-string">'a'</span>, <span class="hljs-string">'*'</span>); <span class="hljs-comment">// "**bbccd*"</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Œä½†æ˜¯ä½¿ç”¨replaceAllæ–¹æ³•æ—¶éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼š</p>
<blockquote>
<p>ç‰¹åˆ«æ³¨æ„ğŸ“¢ï¼šå¦‚æœregexp|substrä¸ºä¸€ä¸ªéå…¨å±€çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ™replaceAllæŠ›å‡ºé”™è¯¯ã€‚</p>
</blockquote>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-string">'aabbccda'</span>.replaceAll(<span class="hljs-regexp">/a/</span>, <span class="hljs-string">'*'</span>); <span class="hljs-comment">// Uncaught TypeError: String.prototype.replaceAll called with a non-global RegExp argument</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>ä¸ºä»€ä¹ˆä¼šæŠ¥é”™å‘¢ï¼Ÿ</p>
<blockquote>
<p>replaceAllæ–¹æ³•æ˜¯æ›¿æ¢æ‰€æœ‰çš„ï¼Œä½†æ˜¯æ­£åˆ™è¡¨è¾¾å¼æ˜¯éå…¨å±€çš„ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ä¸çŸ¥é“è¦æ€ä¹ˆå¤„ç†äº†ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ã€‚</p>
</blockquote>
<ul>
<li>ä»¥ä¸Šå°±æ˜¯replaceAllçš„ä½¿ç”¨æ–¹æ³•ï¼Œä½ å­¦ä¼šäº†å—ï¼Ÿ</li>
</ul></div>  
</div>
            