
---
title: '如何优雅地反转有符号整数'
categories: 
 - 编程
 - 掘金
 - 分类
headimg: 'https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eb6662d850034c7ca1666f54b037bd65~tplv-k3u1fbpfcp-watermark.image'
author: 掘金
comments: false
date: Tue, 29 Jun 2021 07:59:52 GMT
thumbnail: 'https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eb6662d850034c7ca1666f54b037bd65~tplv-k3u1fbpfcp-watermark.image'
---

<div>   
<div class="markdown-body"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eb6662d850034c7ca1666f54b037bd65~tplv-k3u1fbpfcp-watermark.image" alt="src=http___picture.ik123.com_uploads_allimg_161203_3-1612030ZG5.jpg&refer=http___picture.ik123.jpg" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-0">题目描述</h3>
<p><strong>整数反转</strong></p>
<p>给你一个 32 位的有符号整数 x ，返回将 x 中的数字部分反转后的结果。</p>
<p>如果反转后整数超过 32 位的有符号整数的范围 [−231,  231 − 1] ，就返回 0。</p>
<p>假设环境不允许存储 64 位整数（有符号或无符号）。</p>
<p>示例:</p>
<pre><code class="hljs language-js copyable" lang="js">输入：x = <span class="hljs-number">123</span>
输出：<span class="hljs-number">321</span>
示例 <span class="hljs-number">2</span>：

输入：x = -<span class="hljs-number">123</span>
输出：-<span class="hljs-number">321</span>
示例 <span class="hljs-number">3</span>：

输入：x = <span class="hljs-number">120</span>
输出：<span class="hljs-number">21</span>
示例 <span class="hljs-number">4</span>：

输入：x = <span class="hljs-number">0</span>
输出：<span class="hljs-number">0</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-1">题目分析</h3>
<p>这题之所以是简单题，是因为确实有简单解法，大部分都知道。</p>
<h4 data-id="heading-2">常规解法</h4>
<p>此题看起来非常简单，就是一个字符串反转问题。一串数字在js中可以转化为字符串，然后调用反转api就可以了，就像这样：</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">var</span> s = <span class="hljs-number">123</span>;
s= s.toString() <span class="hljs-comment">// '123'</span>
s= s.split(<span class="hljs-string">''</span>).reverse().join(<span class="hljs-string">''</span>) <span class="hljs-comment">// '321'</span>
s= <span class="hljs-built_in">parseInt</span>(s) <span class="hljs-comment">// 321</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<p>这种写法问题不大，不过此题还要包括有符号整数，即负数的情况，这种情况下，得先求绝对值，完了后再变成负的。因为一个负整数经过.toString()后，负号也变字符串了，所以负整数就得这样处理：</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">var</span> s= -<span class="hljs-number">123</span>;
s = <span class="hljs-built_in">Math</span>.abs(s);
s= s.toString() <span class="hljs-comment">// '123'</span>
s= s.split(<span class="hljs-string">''</span>).reverse().join(<span class="hljs-string">''</span>) <span class="hljs-comment">// '321'</span>
s= <span class="hljs-built_in">parseInt</span>(s) <span class="hljs-comment">// 321</span>
s= -s
<span class="copy-code-btn">复制代码</span></code></pre>
<p>最后总结下来就是这样写：</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">var</span> reverse = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">x</span>) </span>&#123;
    <span class="hljs-keyword">var</span> res = <span class="hljs-number">0</span>;f=<span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span>(x<<span class="hljs-number">0</span>)&#123;
        x=<span class="hljs-built_in">Math</span>.abs(x);
        f = <span class="hljs-literal">true</span>
    &#125;
    res= x.toString()
    res= res.split(<span class="hljs-string">''</span>).reverse().join(<span class="hljs-string">''</span>)
    res= <span class="hljs-built_in">parseInt</span>(res)
    <span class="hljs-keyword">if</span>(f)res = -res;
    <span class="hljs-keyword">if</span> (res < <span class="hljs-built_in">Math</span>.pow(-<span class="hljs-number">2</span>, <span class="hljs-number">31</span>) || res > <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">31</span>) - <span class="hljs-number">1</span>) &#123;
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    &#125;
    <span class="hljs-keyword">return</span> res;
&#125;;
<span class="copy-code-btn">复制代码</span></code></pre>
<p>需要注意是题目中提到此有符号整数是有范围的，所以在后面要加上相关判断。</p>
<h4 data-id="heading-3">高级解法</h4>
<p>下面来介绍一种高级解法，所谓的高级解法也不过是用到了一点数学知识而已。
这个解法的关键思路就是每次循环时把原始数字的末位数取出来并保存，然后在下一次遍历时将保存的值乘以10，再加上当前取出的末位数。这样循环下去，直到原始数字被拆解完。</p>
<p>用代码表达起来就是这样：</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">let</span> rev = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">while</span> (x !== <span class="hljs-number">0</span>) &#123;
        <span class="hljs-keyword">const</span> rmder = x % <span class="hljs-number">10</span>; <span class="hljs-comment">//取最末位数字(带符号)</span>
        x = ~~(x / <span class="hljs-number">10</span>); <span class="hljs-comment">//两次按位取反，可以去除小数部分</span>
        rev = rev * <span class="hljs-number">10</span> + rmder;
        <span class="hljs-keyword">if</span> (rev < <span class="hljs-built_in">Math</span>.pow(-<span class="hljs-number">2</span>, <span class="hljs-number">31</span>) || rev > <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">31</span>) - <span class="hljs-number">1</span>) &#123;
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        &#125;
    &#125;
    <span class="hljs-keyword">return</span> rev;
<span class="copy-code-btn">复制代码</span></code></pre>
<p>关键的就是这两行代码 "const rmder = x % 10;  x = ~ ~(x / 10);"第一句就是为了取出末位数字，第二句就是为了得到原始数字在失去了末位数字之后的值。</p>
<p>最终的结果rev = rev * 10 + rmder；也比较好理解,每取出一个余数，反转过来就要在下次循环时逐次乘以10倒推晋升到高分位。比如，原来是123，第一次遍历后得到3，再遍历就是32，最后就是321了，3逐渐从个位增长到十分位最后再百分位；</p>
<p>整个过程对有符号整数即负数也是适用的。</p>
<p>最后的最后就是要注意下数值范围就可以了。</p>
<h3 data-id="heading-4">复杂度分析</h3>
<p>就说下高级解法的</p>
<p>时间复杂度就是O(log|x|),即原始十进制数字的位数<br>
究竟复杂度是O(1)，常量阶的变量</p>
<p>题目来源：力扣（LeetCode）<br>
链接：<a href="https://leetcode-cn.com/problems/reverse-integer" target="_blank" rel="nofollow noopener noreferrer">leetcode-cn.com/problems/re…</a></p>
<p>参考：</p>
<ol>
<li><a href="https://leetcode-cn.com/problems/reverse-integer/solution/zheng-shu-fan-zhuan-by-leetcode-solution-bccn/" target="_blank" rel="nofollow noopener noreferrer">leetcode-cn.com/problems/re…</a></li>
</ol></div>  
</div>
            