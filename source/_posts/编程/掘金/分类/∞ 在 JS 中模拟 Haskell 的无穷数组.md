
---
title: 'âˆ åœ¨ JS ä¸­æ¨¡æ‹Ÿ Haskell çš„æ— ç©·æ•°ç»„'
categories: 
 - ç¼–ç¨‹
 - æ˜é‡‘
 - åˆ†ç±»
headimg: 'https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b0e88e1993b64700a83505ccbde3ba19~tplv-k3u1fbpfcp-watermark.image'
author: æ˜é‡‘
comments: false
date: Fri, 30 Apr 2021 07:26:37 GMT
thumbnail: 'https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b0e88e1993b64700a83505ccbde3ba19~tplv-k3u1fbpfcp-watermark.image'
---

<div>   
<div class="markdown-body"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><h1 data-id="heading-0">Haskell çš„æ— ç©·æ•°ç»„</h1>
<p>Haskellæ˜¯ä¸€ç§æ ‡å‡†åŒ–çš„ï¼Œé€šç”¨çš„çº¯å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ï¼Œæœ‰æƒ°æ€§æ±‚å€¼å’Œå¼ºé™æ€ç±»å‹ã€‚å› ä¸ºæœ‰æƒ°æ€§æ±‚å€¼ï¼Œæ‰€ä»¥åœ¨ Haskell ä¸­ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªæ— é™æ•°ç»„ã€‚ä¾‹å¦‚</p>
<ul>
<li>[0..], åˆ›å»ºä¸€ä¸ª 0, 1, 2... ä¸æ–­é€’å¢çš„æ•°ç»„</li>
<li>repeat 0, åˆ›å»ºä¸€ä¸ªå…¨æ˜¯ 0 é•¿åº¦ä¸ºæ­£æ— ç©·çš„æ•°ç»„</li>
<li>let a = 1:2:a
<ul>
<li>åˆ›å»ºä¸€ä¸ªæ•°ç»„ aï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ 1ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯2ï¼Œå‰©ä¸‹æ¥çš„æ˜¯ a ï¼ˆæ²¡é”™ï¼Œå¯ä»¥é€’å½’å®šä¹‰ï¼‰</li>
<li>å¾—åˆ°ä¸€ä¸ª [1, 2, 1, 2, 1, 2...] æ— é™é‡å¤çš„æ•°ç»„</li>
</ul>
</li>
</ul>
<h1 data-id="heading-1">ç”¨æ— ç©·æ•°ç»„è§£åºåˆ—é—®é¢˜</h1>
<p>æ— ç©·æ•°ç»„å¯¹åºåˆ—çš„æè¿°èƒ½åŠ›å¾ˆå¼ºã€‚å®šä¹‰ç¬¦å· "++" ä»£è¡¨é“¾æ¥ä¸¤ä¸ªåºåˆ—ï¼Œé‚£ä¹ˆ</p>
<p>ç­‰å·®æ•°åˆ—å¯ä»¥è¿™æ ·æè¿°</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><msub><mi>a</mi><mn>0</mn></msub><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">[</mo><msub><mi>a</mi><mn>0</mn></msub><mo stretchy="false">]</mo><mo>+</mo><mo>+</mo><mi>f</mi><mo stretchy="false">(</mo><msub><mi>a</mi><mn>0</mn></msub><mo>+</mo><mi>b</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(a_0, b) = [a_0] ++ f(a_0 + b, b)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">+</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span></span></span></span></span></div>
<p>æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ä¸€èˆ¬æè¿°æ–¹å¼æ˜¯</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn><mspace linebreak="newline"></mspace><mi>f</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mo>+</mo><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(0) = 1 \newline f(1) = 1 f(n) = f(n -1) + f(n-2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">)</span></span></span></span></span></div>
<p>ä½†é€šè¿‡é€’å½’çš„æ— ç©·æ•°ç»„çš„æ–¹å¼æˆ‘ä»¬è¿˜å¯ä»¥è¿™æ ·è¡¨è¾¾</p>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">[</mo><mi>a</mi><mo stretchy="false">]</mo><mo>+</mo><mo>+</mo><mi>f</mi><mo stretchy="false">(</mo><mi>b</mi><mo separator="true">,</mo><mi>a</mi><mo>+</mo><mi>b</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(a, b) = [a] ++ f(b, a +b)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">a</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">+</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span></span></span></span></span></li>
<li>æ–æ³¢é‚£å¥‘æ•°åˆ— = <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(1, 1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></li>
</ul>
<p>å¯¹äºä¸‹é¢è¿™é“é¢˜ä¹Ÿå¯ä»¥ç”¨é€’å½’çš„æ–¹æ³•æè¿°</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b0e88e1993b64700a83505ccbde3ba19~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer">
<a href="http://link.zhihu.com/?target=https%3A//www.codewars.com/kata/5672682212c8ecf83e000050" target="_blank" rel="nofollow noopener noreferrer">åŸé¢˜é“¾æ¥</a></p>
<p>å…ˆå–ä¸ªå…³å­ï¼Œçœ‹çœ‹æ™®é€šçš„è§£å†³æ€è·¯æ˜¯ä»€ä¹ˆæ ·çš„ã€‚</p>
<h2 data-id="heading-2">ä¸€èˆ¬è§£æ³• ï¼ˆTypeScriptï¼‰</h2>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9be128220d7549d7b563816d266b7dc0~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>é€šè¿‡é“¾è¡¨å®ç°ã€‚</p>
<h2 data-id="heading-3">Haskell è§£æ³•</h2>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/886cd1df174443bfb1bd832fec0d813b~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>çœ‹èµ·æ¥ç®€å•å¾ˆå¤šæœ‰æ²¡æœ‰ï¼</p>
<h3 data-id="heading-4">ç†è§£ Haskell è§£æ³•</h3>
<p>ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘ä»¬å¯ä»¥æ³›åŒ–åºåˆ— u çš„å®šä¹‰åˆ° f(n)</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1be575eb50994016adefba3cb0b773fc~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>åœ¨è¿™ä¸ªå®šä¹‰ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦çš„åºåˆ— u å°±ç­‰äºæ’åºåçš„ f(1)ã€‚</p>
<p>å¯ä»¥æ³¨æ„åˆ° f(n) ç¬¦åˆè¿™æ ·çš„æ€§è´¨ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">&#123;</mo><mi>n</mi><mo stretchy="false">&#125;</mo><mo>âˆª</mo><mi>f</mi><mo stretchy="false">(</mo><mn>2</mn><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>âˆª</mo><mi>f</mi><mo stretchy="false">(</mo><mn>3</mn><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(n) = \&#123;n\&#125; \cup f(2n + 1) \cup f(3n+1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">&#123;</span><span class="mord mathnormal">n</span><span class="mclose">&#125;</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆª</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord">2</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆª</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord">3</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></div>
<p>Haskell çš„è§£æ³•å¯ä»¥ç†è§£ä¸ºé€šè¿‡æ— ç©·æ•°ç»„å»æè¿°äº†è¿™ä¸ªé€’å½’çš„æ€§è´¨ã€‚</p>
<p>å› ä¸º Haskell çš„è¯­æ³•æ¯”è¾ƒä¸ä¼—ä¸åŒï¼Œä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œä¸‹é¢æ˜¯å°†å®ƒæœ´ç´ åœ°ç¿»è¯‘æˆ JS ä¹‹åçš„æ ·å­</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/462acef835664c83b3cb92a86bbe7cde~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>next å¯¹åº”ä¸Šæ–‡æåˆ°çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>ã€‚next ä¸­çš„é€’å½’æ˜¯æ²¡æœ‰è¾¹ç•Œæ¡ä»¶çš„ï¼Œåœ¨æ²¡æœ‰æƒ°æ€§æ±‚å€¼ç‰¹æ€§çš„ JS å½“ä¸­å°±ä¼šæ­»å¾ªç¯ã€‚è€Œåœ¨ Haskell ä¸­ï¼Œä¸€ä¸ªæ•°ç»„è¢«å®šä¹‰åå…¶ä¸­çš„å€¼æ˜¯æ²¡æœ‰è¢«æ±‚å‡ºæ¥çš„ï¼Œåªæœ‰å½“å…¶ä¸­çš„å€¼è¢«æœ€å¤–å±‚çš„ IO è·å–çš„æ—¶å€™æ‰ä¼šå»è®¡ç®—å…·ä½“çš„å€¼ã€‚</p>
<p>è€Œåœ¨ JS ä¸­æˆ‘ä»¬æ˜¯å¦æœ‰è¯­è¨€ç‰¹æ€§å¯ä»¥å®ç°æƒ°æ€§æ±‚å€¼å‘¢ï¼Ÿä¹Ÿæœ‰ï¼é‚£å°±æ˜¯ Generator ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ Generator æ„é€ ä¸€ä¸ªç±»ä¼¼çš„è§£</p>
<h2 data-id="heading-5">åœ¨ JS ä¸­é€šè¿‡ Generator æ¨¡ä»¿æ— ç©·æ•°ç»„</h2>
<p>é€šè¿‡æ— ç©·æ•°ç»„æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ f(n) çš„æ€§è´¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">&#123;</mo><mi>n</mi><mo stretchy="false">&#125;</mo><mo>âˆª</mo><mi>f</mi><mo stretchy="false">(</mo><mn>2</mn><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>âˆª</mo><mi>f</mi><mo stretchy="false">(</mo><mn>3</mn><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(n) = \&#123;n\&#125; \cup f(2n + 1) \cup f(3n+1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">&#123;</span><span class="mord mathnormal">n</span><span class="mclose">&#125;</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆª</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord">2</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆª</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord">3</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span> å®ç°ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2e5c34a0c96445d09115809448ab4a10~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p><strong>æ€§èƒ½å¯¹æ¯”</strong></p>
<p>é€šè¿‡ Generator çš„æ–¹å¼åœ¨æ€§èƒ½ä¸Šä¸€å®šä¼šæœ‰æ‰€æŸè€—ï¼Œä»¥ä¸‹æ˜¯ index = 1e6 æ—¶çš„è€—æ—¶å¯¹æ¯”ã€‚</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e56d91154ba84745bf7091e861a88760~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>æ€§èƒ½è¿˜æ˜¯æ¯” Haskell å¥½çš„ï¼</p>
<h1 data-id="heading-6">åœ¨ JavaScript ä¸­å®ç°ä¸€ä¸ªæƒ°æ€§æ•°ç»„</h1>
<h2 data-id="heading-7">Specification</h2>
<p>åˆšåˆšçš„ä¾‹å­ä¸­æˆ‘ä»¬ä»…é€šè¿‡ Generator æ¨¡ä»¿äº† Haskell è§£æ³•ï¼Œé‚£æœ‰æ²¡æœ‰å¯èƒ½åœ¨ JS å½“ä¸­å°è£…ä¸€ä¸ªæƒ°æ€§æ•°ç»„å‘¢ï¼Ÿå®ƒéœ€è¦ç¬¦åˆä»¥ä¸‹è§„æ ¼</p>
<ul>
<li>å€¼çš„è®¡ç®—æ˜¯ Lazy çš„</li>
<li>å·²ç»è¢«è®¡ç®—çš„å€¼ä¼šè¢«ç¼“å­˜</li>
<li>é•¿åº¦å¯ä»¥æ˜¯æ— ç©·å¤§çš„</li>
<li>æ•°ç»„å†…å®¹ä¸èƒ½è¢«æ”¹å˜</li>
<li>å¯è·å–é•¿åº¦</li>
<li>å¯ä»¥è¿æ¥å‡ ä¸ªæƒ°æ€§æ•°ç»„ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„æƒ°æ€§æ•°ç»„</li>
<li>å¯è¢«éå†</li>
<li>å¯è·å–æŒ‡å®šä¸‹æ ‡çš„å…ƒç´ </li>
<li>å®šä¹‰å¯ä»¥æ˜¯é€’å½’çš„</li>
</ul>
<p>ä»è€Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ä½¿ç”¨å®ƒ</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8be3b5345e2c41f4b261b1a23e7300a4~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5f8cc8ec81fa4853888ce4970f7ce5cc~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-8">v0. é€’å½’ Generator</h2>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/996d6cfb49824a179b8fae85d4db2a1e~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>æœ´ç´ çš„ LazyArray å®ç°ï¼ˆå®¹æ˜“çˆ†æ ˆï¼‰ LazyArray@v0</p>
<p>ç›´æ¥é€šè¿‡é€’å½’åœ°è°ƒç”¨ self generator å‡½æ•°å°±å¯ä»¥å®Œæˆ~</p>
<p>ä½†è¿™ä¸ªå®ç°æ–¹å¼æœ‰ä¸€ä¸ªé—®é¢˜ï¼šå¤ªå®¹æ˜“çˆ†æ ˆäº†ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä»£ç å°±ä¼šç›´æ¥å¯¼è‡´æº¢å‡ºã€‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8d7a48bb63d04da5b370c3cc6546dc1f~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>å› ä¸ºåœ¨é€’å½’çš„æ–¹å¼ä¸­è°ƒç”¨æ ˆæ˜¯è¿™æ ·çš„</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/19e4f5d168d44b0c940bba2cd71c9d9c~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>è€Œæ ˆçš„æ·±åº¦æœ‰é™ï¼Œæ ¹æ®å®¿ä¸»ç¯å¢ƒä¸åŒåœ¨<a href="http://link.zhihu.com/?target=https%3A//stackoverflow.com/questions/7826992/browser-javascript-stack-size-limit" target="_blank" rel="nofollow noopener noreferrer">å‡ åƒåˆ°å‡ ä¸‡ä¸ç­‰</a>ã€‚</p>
<h2 data-id="heading-9">v1. é˜²çˆ†æ ˆä¼˜åŒ–ï¼ˆå­˜åœ¨ Bugï¼‰</h2>
<p>é‚£æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥è§£å†³è¿™æ ·çš„çˆ†æ ˆé—®é¢˜å‘¢ â€”â€” å°†é€’å½’è½¬ä¸ºè¿­ä»£ã€‚</p>
<p>ä½† LazyArray çš„å®šä¹‰æ˜¯è¦æ”¯æŒé€’å½’çš„ã€‚æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥è®©ä¸€ä¸ªé€’å½’çš„å®šä¹‰é€šè¿‡è¿­ä»£çš„æ–¹å¼æ¥è¡¨è¾¾å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æ›¿æ¢é€’å½’è¿‡ç¨‹ä¸­ä½¿ç”¨çš„å‡½æ•°~</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2a96581939bd456390fafe4d252d1472~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>æ­¤æ—¶æˆ‘ä»¬çš„è°ƒç”¨è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè°ƒç”¨æ ˆå§‹ç»ˆåªæœ‰ä¸€å±‚ã€‚</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/692b2072798d4ef69cf41314fb9c04ac~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>è¿™ä¸‹æ€ä¹ˆéƒ½ä¸ä¼šæº¢å‡ºäº†~</p>
<p>emmmmmmï¼Œä½†æ˜¯è¿™ä¸ªç‰ˆæœ¬<strong>æ˜¯æœ‰ Bug çš„</strong>ã€‚å› ä¸ºè¿™ä¸ªä¼˜åŒ–å‡è®¾äº†æ¯ä¸ª self å‡½æ•°ä¸­ yield çš„å€¼éƒ½æ˜¯ä¼šè¢« yield åˆ°æœ€å¤–å±‚çš„ã€‚ä¾‹å¦‚åœ¨è¿›è¡Œäº†è¿™ä¸€é¡¹ä¼˜åŒ–åï¼Œä¸‹é¢çš„ä¾‹å­ä¸­çš„ map å°±èµ·ä¸äº†ä½œç”¨äº†</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5f7aa704d7ae4ef2a74018e238f61e35~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>å› ä¸ºæˆ‘ä»¬å°†å…¶ä¸­çš„ self(n) çš„ Generator å±è”½äº†ï¼Œå¯¼è‡´ map æ‹¿åˆ°äº†ç©ºçš„åºåˆ—ã€‚</p>
<p>æ‰€ä»¥åœ¨è¿›è¡Œè¿™é¡¹ä¼˜åŒ–æ—¶æˆ‘ä»¬è¿˜éœ€è¦åˆ¤æ–­ä¸‹ä¸€ä¸ª self å‡½æ•°è¿”å›çš„ Generator æ˜¯ä¸æ˜¯ç›´æ¥è¢«ä¸Šä¸€å±‚çš„ self å‡½æ•°çš„ Generator æ¶ˆè´¹çš„ã€‚åªæœ‰è¿™æ ·æˆ‘ä»¬æ‰èƒ½è¿›è¡Œä¼˜åŒ–ã€‚</p>
<h2 data-id="heading-10">v2. ç¬¦åˆæ¡ä»¶æ‰è¿›è¡Œè½¬é€’å½’ä¸ºè¿­ä»£</h2>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4096a1ea6daf4673bfa90b8bd5495eb4~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>ä½¿ç”¨å®ƒé‡æ–°è§£ä¸€é Twice Linear ä¹Ÿæ˜¯å¯ä»¥çš„ ï¼ˆğŸ˜… å†™èµ·æ¥çš„å¤æ‚åº¦æ²¡å•¥å˜åŒ–ï¼‰</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">import</span> &#123; LazyArray &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">"https://raw.githubusercontent.com/zxch3n/lab/master/lazy-array/lazy-array.ts"</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">merge</span>(<span class="hljs-params">a: Iterator<<span class="hljs-built_in">number</span>>, b: Iterator<<span class="hljs-built_in">number</span>></span>) </span>&#123;
  <span class="hljs-keyword">let</span> va = a.next().value!;
  <span class="hljs-keyword">let</span> vb = b.next().value!;
  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;
    <span class="hljs-keyword">if</span> (va < vb) &#123;
      <span class="hljs-keyword">yield</span> va;
      va = a.next().value;
    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (va > vb) &#123;
      <span class="hljs-keyword">yield</span> vb;
      vb = b.next().value;
    &#125; <span class="hljs-keyword">else</span> &#123;
      <span class="hljs-keyword">yield</span> vb;
      va = a.next().value;
      vb = b.next().value;
    &#125;
  &#125;
&#125;

<span class="hljs-keyword">const</span> f = LazyArray.createFactory<<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>>(<span class="hljs-function">(<span class="hljs-params">n: <span class="hljs-built_in">number</span>, self</span>) =></span> &#123;
  <span class="hljs-keyword">return</span> LazyArray.concat([n], merge(self(<span class="hljs-number">2</span> * n + <span class="hljs-number">1</span>), self(<span class="hljs-number">3</span> * n + <span class="hljs-number">1</span>)));
&#125;);

<span class="hljs-keyword">const</span> ans = f(<span class="hljs-number">1</span>);
<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">solve</span>(<span class="hljs-params">i: <span class="hljs-built_in">number</span></span>) </span>&#123;
  <span class="hljs-keyword">return</span> ans.get(i);
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>LazyArray çš„å®ç°ï¼š<a href="https://github.com/zxch3n/lab/tree/master/lazy-array" target="_blank" rel="nofollow noopener noreferrer">zxch3n/lab</a></p>
<p>TwiceLinear ç›¸å…³ä»£ç ï¼š<a href="https://github.com/zxch3n/blog/tree/master/twice_linear" target="_blank" rel="nofollow noopener noreferrer">zxch3n/blog</a></p></div>  
</div>
            