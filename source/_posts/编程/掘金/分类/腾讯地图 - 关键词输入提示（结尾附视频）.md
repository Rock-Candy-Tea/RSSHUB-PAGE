
---
title: '腾讯地图 - 关键词输入提示（结尾附视频）'
categories: 
 - 编程
 - 掘金
 - 分类
headimg: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/07e0cfd3e3f34fecbfdb59a8fdfc4612~tplv-k3u1fbpfcp-zoom-1.image'
author: 掘金
comments: false
date: Tue, 13 Jul 2021 22:44:12 GMT
thumbnail: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/07e0cfd3e3f34fecbfdb59a8fdfc4612~tplv-k3u1fbpfcp-zoom-1.image'
---

<div>   
<div class="markdown-body"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><h2 data-id="heading-0">一、功能介绍</h2>
<p>关键词输入提示接口可以用于获取输入关键字的补完与提示，帮助用户快速输入。可以通过配合前端程序实现Autocomplete（自动完成）的效果。</p>
<h2 data-id="heading-1">二、密钥申请</h2>
<h3 data-id="heading-2">1. 用户登录</h3>
<p>打开腾讯位置服务主页：<a href="https://link.juejin.cn/?target=https%3A%2F%2Fat.umtrack.com%2FPH5LHj" target="_blank" rel="nofollow noopener noreferrer" title="https://at.umtrack.com/PH5LHj" ref="nofollow noopener noreferrer">lbs.qq.com</a>，点击右上角的登录按钮：
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/07e0cfd3e3f34fecbfdb59a8fdfc4612~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-3">2. 验证信息</h3>
<p>点击控制台，进入开发者信息界面，补全基本用户信息，完成验证。
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/91bc2349a3dc446b847b073897856baf~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-4">3. 申请密钥</h3>
<p>点击左侧key与配额下的key管理：
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4f5b0e02768a46b782164c2d64bc786d~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer">点击创建新密钥，填写Key名称、描述、验证码，等待审核通过：
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/890a0b57edc64432b97a544bcb1e73bb~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer">密钥申请通过后，可以点击设置按钮修改名称及描述，并可以选择启用的产品，以及对调用规则进行限制：
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e2d3416c47a9451da3415bd31c3cf5a6~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer">同时，可以在查看配额界面查看各接口的用量情况：
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c388db6b47f54c5e815a2441bc5a68b4~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-5">三、操作步骤</h2>
<h3 data-id="heading-6">1. 开发文档入口</h3>
<p>滑动到上方菜单的开发文档 -> 选择服务端下的WebService API：
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cf1ff0673eeb476898d9b0dfbf0748ed~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer">点击左侧的关键词输入提示：
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c5b71802875c46bba625a04d90359381~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer">直达地址：<a href="https://link.juejin.cn/?target=https%3A%2F%2Fat.umtrack.com%2FP5DaOn" target="_blank" rel="nofollow noopener noreferrer" title="https://at.umtrack.com/P5DaOn" ref="nofollow noopener noreferrer">lbs.qq.com/service/web…</a></p>
<h3 data-id="heading-7">2. 接口测试</h3>
<p>可以直接使用Postman工具来测试，或者使用Postwomen（Postman他女朋友，唉，连工具都成双入对了，写个代码都要被虐，罢了，好好打工）。
由文档可知，接口的请求类型为<strong>GET</strong>，默认的数据返回格式为<strong>JSON</strong>。必填参数有三个：</p>
<ul>
<li>key:开发者密钥</li>
<li>keyword：搜索关键字</li>
<li>region：搜索范围，必填的限制条件（可以通过region_fix来设置是否扩大范围）</li>
</ul>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f943fc985ca642398b46d5ce9eea1cc7~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-8">3. 返回结果</h3>
<p>以下为返回结果，为了完整展示数据结构，删减了data中的部分数据：</p>
<pre><code class="copyable">&#123;
    "status": 0,
    "message": "query ok",
    "count": 100,
    "data": [
        &#123;
            "id": "14178584199053362783",
            "title": "中关村",
            "address": "北京市海淀区",
            "category": "地名地址:热点区域:商圈类",
            "type": 0,
            "location": &#123;
                "lat": 39.981047,
                "lng": 116.320787
            &#125;,
            "adcode": 110108,
            "province": "北京市",
            "city": "北京市",
            "district": "海淀区"
        &#125;,
        &#123;
            "id": "2199027905900",
            "title": "中关村[地铁站]",
            "address": "地铁4号线大兴线",
            "category": "基础设施:交通设施:地铁站",
            "type": 2,
            "location": &#123;
                "lat": 39.984055,
                "lng": 116.316478
            &#125;,
            "adcode": 110108,
            "province": "北京市",
            "city": "北京市",
            "district": "海淀区"
        &#125;
    ],
    "request_id": "1136352410315519097"
&#125;

<span class="copy-code-btn">复制代码</span></code></pre>
<p>字段含义可见下表（可在接口文档中找到）：
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4fd89a93c6604895acfa96a837c841e2~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer">四、使用案例
由于接口为纯HTTP接口，所以在效果实现上还需要使用项目中的一些组件。本例使用最简的jquery-ui来实现autocomplete效果，下载地址为：<a href="https://link.juejin.cn/?target=http%3A%2F%2Fjqueryui.com%2Fdownload%2F" target="_blank" rel="nofollow noopener noreferrer" title="http://jqueryui.com/download/" ref="nofollow noopener noreferrer">jqueryui.com/download/。</a></p>
<h3 data-id="heading-9">1. 基础界面</h3>
<p>首先构建一个基础界面，创建一个文本框，并依照jquery-ui的用法进行绑定。</p>
<pre><code class="copyable"><!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title></title>
<!--引入css样式文件-->
<link rel="stylesheet" type="text/css" href="css/jquery-ui.min.css"/>
<!--引入所需的jquery库文件-->
<script src="js/jquery-1.7.1.min.js" type="text/javascript" charset="utf-8"></script>
<!--引入jquery-ui文件-->
<script src="js/jquery-ui.min.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
$(function() &#123;
    $("#search").autocomplete(&#123;//为文本框完成绑定
        source: function(request,response)&#123;
//使用自定义函数处理
&#125;
    &#125;);
&#125;);
</script>
</head>
<body>
<div class="ui-widget">
<label for="search">搜索框: </label>
<input type="text" id="search">
</div>
</body>
</html>

<span class="copy-code-btn">复制代码</span></code></pre>
<p>效果如下：
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bae96f31e82a4c2587102e5044aa786c~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-10">2. 动态响应</h3>
<p>在source对应的函数中需要完成接收文本框的值，以及向接口请求数据，最终进行数据封装的过程。需要注意，由于该过程涉及到用户的不断操作，所以建议将ajax设置为同步方式。</p>
<pre><code class="copyable">                $("#search").autocomplete(&#123;//为文本框完成绑定
        source: function(request,response)&#123;
//从request对象中获得文本框内容
var keyword = request.term;
//定义数组，封装最终结果
var obj = [];
$.ajax(&#123;
url:"https://apis.map.qq.com/ws/place/v1/suggestion",
type:"get",
dataType:"json",
async:false,//关闭异步
data:&#123;
"key":"替换为自己的key",
"keyword":keyword,
"region":"北京"
&#125;,success:function(resp)&#123;
for(i in resp.data)&#123;
//此处可以根据需要自定义要显示的内容以及封装的数据
obj.push(&#123;
"label":resp.data[i].title + "["+resp.data[i].province+"-"+resp.data[i].city+"-"+resp.data[i].district+"]",
"value":resp.data[i].title
&#125;);
//label为提示显示的内容
//value为选中后补全出现在文本框中的内容
&#125;
&#125;
&#125;);
//将obj最为结果返回
response(obj);
&#125;
    &#125;);
<span class="copy-code-btn">复制代码</span></code></pre>
<p>测试可知，支持中文与拼音的检索，最终效果如下：</p>
<ul>
<li>拼音搜索</li>
</ul>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4740068cf1af4bc0a6ad7cd03f67e425~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<ul>
<li>选中后</li>
</ul>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f4ee22383d2043e2b0bf73e19af65319~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer">此处功能需要的效果可以根据项目的需要进行调整。</p>
<h3 data-id="heading-11">3. 完整案例源码</h3>
<ul>
<li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fcodechina.csdn.net%2Fu012039040%2Flbs" target="_blank" rel="nofollow noopener noreferrer" title="https://codechina.csdn.net/u012039040/lbs" ref="nofollow noopener noreferrer">腾讯位置服务案例</a></li>
</ul>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5c125185797946c1a007c998f72b59aa~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-12">五、视频直达</h2>
<p>视频地址：<a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1b54y1p7Ny" target="_blank" rel="nofollow noopener noreferrer" title="https://www.bilibili.com/video/BV1b54y1p7Ny" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1b5…</a>，喜欢的小伙伴儿一定要三连加关注哦~</p></div>  
</div>
            