
---
title: '前端工程化中的重要环节——自动化构建'
categories: 
 - 编程
 - 掘金
 - 分类
headimg: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8cb56a7d6bbb44c0816e62a8712f8561~tplv-k3u1fbpfcp-zoom-1.image'
author: 掘金
comments: false
date: Mon, 24 May 2021 19:56:53 GMT
thumbnail: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8cb56a7d6bbb44c0816e62a8712f8561~tplv-k3u1fbpfcp-zoom-1.image'
---

<div>   
<div class="markdown-body"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><h2 data-id="heading-0"><strong>自动化构建的概念</strong></h2>
<p>**自动化构建是前端工程化中非常重要的一个环节。**在开始之前我们先从字面意义上来解读一下，自动化其实就是将手动的部分交给机器完成，构建可以理解为转换的意思，其实就是将我们写的代码转换成能够上线运行的代码。</p>
<p>那自动化构建，就是<strong>将我们写的原代码自动的转换成能够上线运行的代码。</strong></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8cb56a7d6bbb44c0816e62a8712f8561~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<p>这个转换的过程也被称为<strong>自动化构建工作流</strong>。</p>
<p>比如使用最新的 EcmaScript 语法提高编码效率，使用 Sass 或者 less 增强 CSS 的可编程性，使用模板引擎抽象页面中重复的 HTML 等等，这些在浏览器中是无法被直接支持运行的。自动化构建工具，就是将这些不被支持的代码转换成可以直接运行的代码。</p>
<p>总的来说，自动化构建，可以让我们脱离运行环境带来的各种兼容性等问题，从而能够使用提高效率的语法、规范和标准。</p>
<h2 data-id="heading-1">npm scripts 自动化构建</h2>
<p>什么是 npm scripts ？npm 允许在 package.json 文件中，使用 scripts 字段定义脚本命令，字段名就是命令执行的关键字，字段值是具体要执行的命令。</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3d07b058798944b5972a2a4b8df2de09~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<p>配置完成后，命令行执行 npm run foo 就能够看到 foo.js 的执行结果。</p>
<p>同时，npm scripts 是可以一次执行多条命令任务的，但是需要注意的是，命令任务的执行<strong>有****串行执行</strong>和<strong>并行执行</strong>的区别，串行和并行分别是什么含义呢？</p>
<p><strong>串行执行（series）</strong>：任务之间使用 && ( 两个 & 符号 ) 连接，任务之间有先后顺序，前一个任务执行结束，才能后执行下一个任务，就类似接力赛跑。</p>
<p><strong>并行执行（parallel）</strong>：任务之间使用 & ( 一个 & 符号 ) 连接，任务之间没有先后顺序，同时执行可以提高执行效率，就类似多人进行百米赛跑。</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc6844d39c7c4503bbe3fec712517525~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<p>将 less 代码转为CSS并压缩，先确保 less 和 minify 已经安装成功：npm i less minify -g，less 和 minify 的具体用法，查看对应文档即可：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2c7a2bec7f674437a181d805b16b41f5~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<p>之前我们需要先执行 less 转换命令，然后再执行代码压缩的 minify 命令，而配置好 scripts 之后，只需要执行 npm run styles 一条命令，就可以执行这两个不同的任务了。这也就是自动化构建的核心思想。</p>
<p>另外需要注意的是 windows 系统环境下， & 并行执行是不被支持的，我们可以借助 npm-run-all 插件来实现不同任务的执行。</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/33071f60d2694b1a998d685dc925c6c7~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-2">自动化构建工具</h2>
<p>我们使用最多的其实就是 npm scripts 了，在 packag.json 文件中配置，可以一次执行多个命令。</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1c2e966f34d045bcb3bf57071d09a6f9~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-3">Grunt</h3>
<p><a href="https://www.gruntjs.net/" target="_blank" rel="nofollow noopener noreferrer">www.gruntjs.net/</a>：JavaScript 世界的构建工具。</p>
<p>Grunt 生态系统非常庞大，并且一直在增长。由于拥有数量庞大的插件可供选择，因此，你可以利用 Grunt 自动完成任何事，并且花费最少的代价。</p>
<h3 data-id="heading-4">Gulp</h3>
<p><a href="https://www.gulpjs.com.cn/" target="_blank" rel="nofollow noopener noreferrer">www.gulpjs.com.cn/</a> : 用自动化构建工具增强你的工作流程！</p>
<p>用自动化构建工具增强你的工作流程！</p>
<h3 data-id="heading-5">FIS</h3>
<p><a href="http://fis.baidu.com/" target="_blank" rel="nofollow noopener noreferrer">fis.baidu.com/</a> : FIS3 , 为你定制的前端工程构建工具。</p>
<p>解决前端开发中自动化工具、性能优化、模块化框架、开发规范、代码部署、开发流程等问题。</p>
<h2 data-id="heading-6">Gulp 的基本使用</h2>
<ul>
<li>
<p>全局安装 gulp 客户端 npm install- g gulp-ci ;</p>
</li>
<li>
<p>初始化项目 npm init -y</p>
</li>
<li>
<p>安装 gulp 依赖包 npm install gulp -D</p>
</li>
<li>
<p>新建 gulpfile 文件 ( gulpfile.js) ;</p>
</li>
<li>
<p>在 gulpfile js 中，创建 gulp 任务;</p>
</li>
<li>
<p>执行 gulp 任务 gulp </p>
</li>
</ul>
<p>gulpfile.js：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/39ec7d41055b4a039ca4f1fadc5951ee~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<p>执行命令 gulp foo</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9eaed933e76e4c2483f54a68d96c2143~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<p>我们能够看到一个报错信息，提示任务没有完成，你是不是忘记发送异步完成的信号了。</p>
<p>这个错误是在新版的 gulp 中才会出现的，原因就是 gulp 约定所有任务都是异步的，所以在代码中，我们可以使用一个异步回调函数的方式，完成异步信号的发出。</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/05eaeb4fa41e4c5b941f3dcedfc06acc~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<p>如果导出的成员名称为 default ，及默认执行的成员方法，命令行中不需要指定成员名即可执行。</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d7ed81b5842447a4842fc20af9ce51bb~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer"></p></div>  
</div>
            