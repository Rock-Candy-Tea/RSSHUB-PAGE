
---
title: 'å‰ç«¯ç»„ä»¶åŒ–å®æˆ˜ä¹‹ Button'
categories: 
 - ç¼–ç¨‹
 - æ˜é‡‘
 - åˆ†ç±»
headimg: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/58285f3cce144972b2ccb88e11efd73f~tplv-k3u1fbpfcp-zoom-1.image'
author: æ˜é‡‘
comments: false
date: Thu, 29 Jul 2021 16:34:17 GMT
thumbnail: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/58285f3cce144972b2ccb88e11efd73f~tplv-k3u1fbpfcp-zoom-1.image'
---

<div>   
<div class="markdown-body"><style>.markdown-body&#123;color:#383838;font-size:15px;line-height:37.5px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:120px&#125;.markdown-body ::selection&#123;color:#fff;background-color:#a862ea&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;margin:30px 0 15px;color:#a862ea&#125;.markdown-body h1&#123;line-height:2;font-size:1.4em&#125;.markdown-body h1~p:first-of-type:first-letter&#123;color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder&#125;.markdown-body h2&#123;font-size:1.2em&#125;.markdown-body h3&#123;font-size:1.1em&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:2em&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;padding-left:.2em&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:10px&#125;.markdown-body li::marker&#123;color:#a862ea&#125;.markdown-body li,.markdown-body p&#123;opacity:.9;vertical-align:baseline;transition:all .1s ease&#125;.markdown-body li:hover,.markdown-body p:hover&#123;opacity:1&#125;.markdown-body a&#123;display:inline-block;color:#a862ea;cursor:pointer;padding-bottom:2px;text-decoration:none;position:relative&#125;.markdown-body a:after&#123;content:"";position:absolute;width:98%;height:2px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out&#125;.markdown-body a:hover:after&#123;transform:scaleX(1);transform-origin:bottom left&#125;.markdown-body a:active,.markdown-body a:link&#123;color:#a862ea&#125;.markdown-body img&#123;max-width:100%;user-select:none;margin:1em 0;box-shadow:0 0 20px 0 #e7daff;transition:transform .2s ease 0s;background-color:#f8f5ff&#125;.markdown-body img:hover&#123;opacity:1;transform:translateY(-2px)&#125;.markdown-body blockquote&#123;padding:.5em 1em;margin:15px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:4px solid #a862ea;background-color:#f8f5ff&#125;.markdown-body blockquote>p&#123;margin:0&#125;.markdown-body code&#123;padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff&#125;.markdown-body pre&#123;margin:2em 0;box-shadow:0 0 20px #e7daff&#125;.markdown-body pre>code&#123;display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:22.5px;color:#383838;border-radius:3px;scroll-behavior:smooth&#125;.markdown-body pre>code::-webkit-scrollbar&#123;height:6px;background-color:#f8f5ff&#125;.markdown-body pre>code::-webkit-scrollbar-thumb&#123;background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px&#125;.markdown-body hr&#123;margin:2em 0;border-top:1px solid #a862ea&#125;.markdown-body table&#123;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #e7daff&#125;.markdown-body thead&#123;color:#a862ea;background:#f8f5ff&#125;.markdown-body td,.markdown-body th&#123;padding:1em .5em&#125;.markdown-body tr&#123;background-color:#fcfcfc&#125;@media (max-width:720px)&#123;.markdown-body&#123;font-size:12px&#125;&#125;</style><blockquote>
<p>âš ï¸æœ¬æ–‡ä¸ºæ˜é‡‘ç¤¾åŒºé¦–å‘ç­¾çº¦æ–‡ç« ï¼Œæœªè·æˆæƒç¦æ­¢è½¬è½½</p>
</blockquote>
<blockquote>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯<a href="https://link.juejin.cn/?target=https%3A%2F%2Fyoungjuning.js.org" target="_blank" rel="nofollow noopener noreferrer" title="https://youngjuning.js.org" ref="nofollow noopener noreferrer">æ´›ç«¹ğŸ‹</a>ï¼Œä¸€åªä½åœ¨æ­åŸçš„æœ¨ç³»å‰ç«¯ğŸ§šğŸ»â€â™€ï¸ï¼Œå¦‚æœä½ å–œæ¬¢æˆ‘çš„æ–‡ç« ğŸ“šï¼Œå¯ä»¥é€šè¿‡ç‚¹èµå¸®æˆ‘èšé›†çµåŠ›â­ï¸ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ <a href="https://juejin.cn/post/6983854006124675108" target="_blank" title="https://juejin.cn/post/6983854006124675108">ã€Šæ¯ä¸ªå‰ç«¯éƒ½åº”è¯¥æ‹¥æœ‰è‡ªå·±çš„ç»„ä»¶åº“,å°±åƒæ¯ä¸ªå¤å¤©éƒ½æœ‰è¥¿ç“œğŸ‰ã€‹</a> ä¸€æ–‡ä¸­ï¼Œæ´›ç«¹å¸¦é¢†å°é»‘ä»é›¶æ­å»ºäº†ä¸€ä¸ªç»„ä»¶åº“é¡¹ç›®ï¼Œå®Œæˆäº†é¡¹ç›®ç»“æ„ã€æ„å»ºã€æµ‹è¯•ã€æ–‡æ¡£ç­‰åŸºç¡€å·¥ç¨‹åŒ–å·¥ä½œå¹¶å®Œæˆäº†ç¬¬ä¸€ä¸ªç»„ä»¶ Iconã€‚æœ¬æœŸå»¶ç»­ä¸ŠæœŸçš„ç»„ä»¶å·¥ç¨‹åŒ–çš„ä¸»é¢˜ï¼Œå¤æ—¥ç‚çƒ­ï¼Œç‚¹ä¸Šä¸€æ¯æ¨æç”˜éœ²ï¼Œå’Œæ´›ç«¹èµ´ä¸€åœº Button å¼€å‘ä¹‹çº¦å§ã€‚èµ´çº¦åï¼Œä½ å°†ä¼šæ”¶è·ä»¥ä¸‹çš„å†…å®¹ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/58285f3cce144972b2ccb88e11efd73f~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<blockquote>
<p>PSï¼šé…åˆ<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fyoungjuning%2Fvant-react-native" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/youngjuning/vant-react-native" ref="nofollow noopener noreferrer">ä»“åº“</a>å’Œ<a href="https://link.juejin.cn/?target=https%3A%2F%2Fvant-react-native.js.org%2F" target="_blank" rel="nofollow noopener noreferrer" title="https://vant-react-native.js.org/" ref="nofollow noopener noreferrer">ç»„ä»¶åº“æ–‡æ¡£</a>é˜…è¯»æœ¬æ–‡æ•ˆæœæ›´ä½³å–²ï¼</p>
</blockquote>
<h2 data-id="heading-1">Button ä¸è®¾è®¡å¿ƒç†å­¦</h2>
<p>ä½œä¸ºå‰ç«¯å·¥ç¨‹å¸ˆï¼Œå…¥è¡Œè‡³ä»Šæ¥è§¦æœ€å¤šçš„å°±æ˜¯è®¾è®¡å¸ˆäº†ã€‚è€³æ¿¡ç›®æŸ“ä¸‹è™½è¯´æ²¡å­¦ä¼šä»€ä¹ˆè®¾è®¡å·¥å…·ï¼Œä½†æ˜¯å¯¹è®¾è®¡ä¸äººçš„å¿ƒç†æœ‰äº†ä¸€å®šè®¤è¯†ã€‚</p>
<p>æ´›ç«¹è®¤ä¸ºä»»ä½•äº‹ç‰©éƒ½ä¸å¯èƒ½å‡­ç©ºå‡ºç°ï¼Œè‡ªæœ‰å…¶ä¼ æ‰¿ã€‚ä½¿ç”¨å¹¿æ³›çš„åŸºç¡€ç•Œé¢å…ƒç´  Button ä¹Ÿä¸ä¾‹å¤–ï¼Œæˆ‘ä»¬ç”Ÿæ´»ä¸­å°±æœ‰éšå¤„å¯è§çš„æŒ‰é’®ã€‚ä¸¾ä¸ªæ —å­ğŸŒ°ï¼Œæ¯å¤©ä¸Šç­ä¸‹ç­å¿…ç„¶è¦æŒ‰çš„ç”µæ¢¯æŒ‰é’®ã€æ‰‹æœºéŸ³é‡æŒ‰é’®ã€å°ç±³ 9 é¸¡è‚‹çš„å°çˆ±åŒå­¦å”¤èµ·æŒ‰é’®ã€‚è¦ææ¸…æ¥šä¸ºä»€ä¹ˆéœ€è¦æŒ‰é’®ï¼Œæˆ‘ä»¬æœ‰å¿…è¦æ¢ç©¶ä¸‹ç”Ÿæ´»ä¸­è¿™äº›æŒ‰é’®çš„ä½œç”¨ã€‚</p>
<h3 data-id="heading-2">ç‚¹ä¸€ä¸‹æŒ‰é’®çš„å¿«æ„Ÿ</h3>
<p>æƒ³è±¡ä¸€ä¸‹æŠŠé”®ç›˜æŒ‰é”®æ¢æˆè§¦æ‘¸å±ï¼Œä½ æœ€åœ¨ä¹çš„ä¸€å®šæ˜¯å®Œç¾è¿˜åŸç‰©ç†é”®çš„æ•²å‡»æ„Ÿï¼Œåƒæ´›ç«¹ç”¨æ‰‹æœºè™šæ‹Ÿé”®ç›˜å°±å–œæ¬¢è®¾ç½®æŒ‰é”®éœ‡åŠ¨å’ŒéŸ³æ•ˆã€‚é€šè¿‡æ‰“å‡»ï¼ˆç‚¹å‡»ï¼‰è·å¾—å¿«æ„Ÿæ˜¯è¾ƒä¸ºæ™®éçš„äººæ€§ã€‚æŒ‰é’®åœ¨æŒ‰ä¸‹ã€æ¾å¼€æ—¶æœ‰ä¸°å¯Œçš„è´¨æ„Ÿå’Œäº¤äº’æ„Ÿï¼Œå®Œç¾æ»¡è¶³äº†äººä»¬ç‚¹ä¸€ä¸‹çš„å¿«æ„Ÿã€‚</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/542a6bbb880e4594ae384ee0bd1e511d~tplv-k3u1fbpfcp-watermark.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-3">ç°å®çš„å®ç”¨æ€§</h3>
<p>ä» BB æœºåˆ°è¯ºåŸºäºšå†åˆ°å¦‚ä»Šçš„æ™ºèƒ½æœºï¼Œå®ä½“æŒ‰é’®å‰Šå‡åˆ°åªå‰©ä¸‹éŸ³é‡é”®å’Œå¼€å…³æœºé”®ã€‚æŒ‰é”®è™½ç„¶å…‰ç§ƒç§ƒæ²¡æœ‰ä»»ä½•æ ‡è¯†ï¼Œä½†æˆ‘ä»¬å°±æ˜¯çŸ¥é“å®ƒçš„åŠŸèƒ½ã€‚è¯•æƒ³ä¸€ä¸‹æ²¡æœ‰è¿™ä¸ªæ¥è‡ªè¿œå¤æ—¶ä»£çš„å¼€å…³é”®ï¼Œä½ æ‰‹é‡Œçš„æ‰‹æœºå°±æ˜¯ä¸€å—æ¿ç –ã€‚</p>
<h3 data-id="heading-4">ç–¯ç‹‚æš—ç¤ºç”¨æˆ·ï¼Œè¾¾åˆ°ä¸å¯å‘Šäººç›®çš„</h3>
<p>å°ç±³ 9 å•ç‹¬å”¤èµ·å°çˆ±åŒå­¦çš„æŒ‰é”®ç»å¸¸ä¼šè¢«è¯¯æŒ‰ï¼Œä¹‹å‰æˆ‘è¿˜ä¸ç†è§£è¿™ä¹ˆè ¢çš„è®¾è®¡çš„ç›®çš„ã€‚åœ¨ç®€å•ç ”ç©¶äº†ç‚¹è®¾è®¡å¿ƒç†å­¦æˆ‘æ˜ç™½äº†ã€‚å°çˆ±çš„è®¾è®¡è€…ä¸ºäº† äº§å“æ—¥æ´»å’Œ AI è®­ç»ƒå°±æ˜¯æ•…æ„è¿™ä¸ªè®¾è®¡çš„ã€‚</p>
<p>å°ç±³ 10 è™½ç„¶ç§»é™¤äº†å•ç‹¬çš„å”¤èµ·é”®ï¼Œå´æŠŠåŸæ¥çš„ç”µæºé”®æ”¹æˆäº†ä¸€é”®å¤šç”¨ã€‚æ¯æ¬¡æƒ³è¦é‡å¯æ‰‹æœºè¿˜å¾—å…ˆå”¤èµ·ä¸€ä¸‹å°çˆ±åŒå­¦ã€‚ä¸å¾—ä¸è¯´ï¼Œå°çˆ±åŒå­¦å°ç±³äº²å¥³å„¿ã€‚</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/633381b8c2c342ed94bf024dbc19cf76~tplv-k3u1fbpfcp-watermark.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<p>åæ§½å½’åæ§½ï¼Œå°ç±³è¿™ä¸ªæŒ‰é’®ç¡®å®èµ·åˆ°äº†åŸ¹å…»ç”¨æˆ·ä¹ æƒ¯çš„ä»»åŠ¡ã€‚å½“ç”¨æˆ·çŸ¥æ‚‰æŸä¸ªæŒ‰é’®èƒ½æŒ‡å‘æŸä¸ªæ“ä½œï¼Œæˆ–è€…è·å–æŸç±»ä¿¡æ¯åï¼Œé•¿æ­¤ä»¥å¾€ç”¨æˆ·å°±ä¼šå½¢æˆä½¿ç”¨ä¹ æƒ¯ã€‚å¦‚æœæŸæ“ä½œèƒ½å¤Ÿä¸ºç”¨æˆ·å’Œå‚å•†æŒç»­å¸¦æ¥ä»·å€¼ï¼Œé‚£å°±å¯ä»¥è®©æŒ‰é’®çš„ä½ç½®æ›´åŠ é†’ç›®ï¼ŒæŒç»­åŸ¹å…»ç”¨æˆ·ç‚¹å‡»ä¹ æƒ¯ã€‚</p>
<h3 data-id="heading-5">æŒ‡å¼•ç”¨æˆ·æ“ä½œ</h3>
<p>è¿™ä¸ªåœ¨ Web å¼€å‘ä¸­æ˜¯æœ€å¸¸è§çš„ä½¿ç”¨åœºæ™¯ï¼Œæ¯ä¸ªå¯äº¤äº’é¡µé¢ä¸Šéƒ½æœ‰è¿™ç±»æŒ‰é’®çš„å‡ºç°ï¼Œç”¨æ¥æŒ‡å¼•ç”¨æˆ·ä¸‹ä¸€æ­¥è¯¥æ€ä¹ˆåšã€‚æ¯”å¦‚è¡¨å•çš„æäº¤å’Œé‡ç½®ã€‚</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d2c2a8abbe84471f96a67e18196c53fb~tplv-k3u1fbpfcp-watermark.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<p>è™½ç„¶æŒ‰é’®ä¹Ÿå¸¸ä½œä¸ºè¡¨å•å…ƒç´ ï¼Œä½†æ˜¯åŒºåˆ«äºå…¶ä»–è¡¨å•å…ƒç´ ï¼ŒæŒ‰é’®å› å…¶å¤©ç„¶åœ°è‡ªè¯´æ˜æ€§ï¼Œä¸éœ€è¦ Label å¯¹å…¶è¿›è¡Œè¾…åŠ©è¯´æ˜ï¼Œå•°å—¦è¿™ä¹ˆå¤šï¼Œæ˜å‹ä»¬åº”è¯¥åœ¨çœ‹åˆ°ä¸€ä¸ªæŒ‰é’®æ—¶ï¼Œåº”è¯¥ä¹Ÿä¼šæœ‰ä»è®¾è®¡ä¸Šå“é‰´çš„æ„è¯†äº†ï¼Œæ¬¢è¿å°†å¯¹ä¸‹å›¾çš„å“é‰´åœ¨è¯„è®ºåŒºå‘Šè¯‰æ´›ç«¹ã€‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/88c6754b28984fc3866319c35790fc03~tplv-k3u1fbpfcp-watermark.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-6">ç»„ä»¶ä¸»é¢˜åŒ–</h2>
<p>åœ¨å¼€å§‹å¼€å‘å…·ä½“ç»„ä»¶ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆçº¦å®šå¥½ç»„ä»¶ä¸»é¢˜åŒ–çš„è§„èŒƒã€‚ä¹‹å‰ antd-mobile-rn å°±å› ä¸ºè®¾è®¡é—®é¢˜ï¼Œä¸­é€”èŠ±è´¹å¤§åŠ›æ°”é‡æ„ã€‚å‡ ä¹æ‰€æœ‰çš„ç»„ä»¶åº“éƒ½ä¼šå°†è‰²å½©ã€å¸ƒå±€è¿™äº›ä»¥ css å˜é‡çš„å½¢å¼æä¾›ç»™ä½¿ç”¨è€…å’Œå¼€å‘è€…ä¸ºï¼ŒReact Native ä¸åŒçš„æ˜¯æ ·å¼åŸºäº CSS in JSï¼Œä¸è¿‡é“ç†ç›¸é€šï¼Œå‚ç…§ vant çš„<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fyouzan%2Fvant%2Fblob%2Fdev%2Fsrc%2Fstyle%2Fvar.less" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/youzan/vant/blob/dev/src/style/var.less" ref="nofollow noopener noreferrer">è®¾è®¡èµ„æº</a>ï¼Œæˆ‘ä»¬æŠ½å‡ºäº†ä¸€å¥— JavaScript å¸¸é‡ï¼š</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">// packages/themes</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> Theme &#123;
  <span class="hljs-string">'animation-duration-base'</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-string">'animation-duration-fast'</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-string">'animation-timing-function-enter'</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-string">'animation-timing-function-leave'</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-string">'font-size-xs'</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-string">'font-size-sm'</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-string">'font-size-md'</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-string">'font-size-lg'</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-string">'font-weight-bold'</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-comment">// å˜é‡è¿‡å¤šï¼Œè¿™é‡Œä»…å±•ç¤ºéƒ¨åˆ†å˜é‡</span>
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>æœ‰äº†è¿™äº› JS å¸¸é‡ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¾è®¡ä¸»é¢˜ç³»ç»Ÿã€‚åŸºäº CSS in JS çš„ä¸»é¢˜åŒ–è®¾è®¡ä¸€èˆ¬æ˜¯åŸºäº React Context å®ç°ï¼Œéœ€è¦æä¾› ThemeProvider ä¼ å…¥ä¸»é¢˜ä¸Šä¸‹æ–‡ï¼ŒThemeConsumerã€WithThemeï¼ˆé«˜é˜¶ç±»ç»„ä»¶ï¼‰ã€withThemeï¼ˆé«˜é˜¶å‡½æ•°ç»„ä»¶ï¼‰ æˆ– useThemeï¼ˆReact Hooksï¼‰ä½œä¸ºæ¶ˆè´¹è€…è·å–ä¸Šä¸‹æ–‡ã€‚è‡ªå·±å®ç°ä¹Ÿä¸éš¾ï¼Œä¸è¿‡æ›´æ–‡ä»»åŠ¡æ¯”è¾ƒç´§æ€¥ï¼Œæˆ‘ä»¬å…ˆåŸºäº <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fcssinjs%2Ftheming" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/cssinjs/theming" ref="nofollow noopener noreferrer">cssinjs/theming</a> å®ç°åŠŸèƒ½ï¼ŒåæœŸæœ‰éœ€è¦å†å›æ¥é€ è½®å­ä¹Ÿä¸è¿Ÿã€‚ä¸‹é¢ğŸ‘‡å°±æ˜¯æˆ‘ä»¬åŸºäº theming çš„ <code>createTheming</code> å‡½æ•°åˆ›å»ºè‡ªå®šä¹‰ä¸»é¢˜ä¸Šä¸‹æ–‡ã€‚</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">import</span> &#123; createTheming &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'theming'</span>;
<span class="hljs-keyword">const</span> context = React.createContext(defaultTheme);
<span class="hljs-keyword">const</span> theming = createTheming(context);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> &#123; ThemeProvider, withTheme, useTheme &#125; = theming;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<blockquote>
<p>ä¸»é¢˜åŠŸèƒ½æ˜¯é€šç”¨çš„ï¼Œå› æ­¤æˆ‘å°†ä¸»é¢˜ç›¸å…³çš„èƒ½åŠ›éƒ½æ”¾åœ¨ <code>@vant-react-native/theme</code> åŒ…ä¸­å‘å¸ƒã€‚</p>
</blockquote>
<h2 data-id="heading-7">Button çš„å®ç°</h2>
<p>React Native å†…ç½®çš„ Button ç»„ä»¶çš„æ ·å¼æ˜¯å›ºå®šçš„ï¼Œåªèƒ½è¿›è¡Œä¸€äº›ç®€å•çš„è®¾ç½®ã€‚ä¸”å†…ç½®çš„ Button ç»„ä»¶åœ¨ Android å’Œ ios ä¸¤ä¸ªå¹³å°ä¸Šçš„è¡¨ç°å¹¶ä¸ä¸€è‡´ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æ ¹æ®æ›´åº•å±‚çš„ç»„ä»¶è¿›è¡Œå°è£…ã€‚æˆ‘ä»¬å¯¹æ¯” ant-design-mobile-rn å’Œ react-native-elements åé‡‡ç”¨äº†å‰è€…ä½¿ç”¨çš„ <code>TouchableHighlight</code> ç»„ä»¶ã€‚ç”±äºç»§æ‰¿è‡ª TouchableHighlightï¼Œæ‰€ä»¥æˆ‘ä»¬ç»„ä»¶çš„ Props ç±»å‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">import</span> &#123; TouchableHighlightProps &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;
<span class="hljs-keyword">interface</span> ButtonProps <span class="hljs-keyword">extends</span> TouchableHighlightProps &#123;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-8">æŒ‰é’®ç±»å‹</h3>
<p>vant çš„ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fyouzan.github.io%2Fvant%2F%23%2Fzh-CN%2Fbutton%23an-niu-lei-xing" target="_blank" rel="nofollow noopener noreferrer" title="https://youzan.github.io/vant/#/zh-CN/button#an-niu-lei-xing" ref="nofollow noopener noreferrer">Button</a> æ”¯æŒ <code>default</code>ã€<code>primary</code>ã€<code>info</code>ã€<code>warning</code>ã€<code>danger</code> äº”ç§ç±»å‹ï¼Œé»˜è®¤ä¸º <code>default</code>ã€‚ç°åœ¨ï¼Œç»„ä»¶çš„åŸºæœ¬å®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-comment">// ...</span>
<span class="hljs-keyword">import</span> React, &#123; FunctionComponent &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> &#123; Text, View &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;

<span class="hljs-keyword">interface</span> ButtonProps &#123;
  <span class="hljs-keyword">type</span>?: <span class="hljs-string">'default'</span> | <span class="hljs-string">'primary'</span> | <span class="hljs-string">'info'</span> | <span class="hljs-string">'warning'</span> | <span class="hljs-string">'danger'</span>;
&#125;

<span class="hljs-keyword">const</span> Button: FunctionComponent<ButtonProps> = <span class="hljs-function"><span class="hljs-params">props</span> =></span> &#123;
  <span class="hljs-comment">// ...</span>
&#125;;
<span class="hljs-comment">// ...</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>æˆ‘ä»¬çš„ç»„ä»¶ä¸ºäº†é€‚åº”ä¸»é¢˜åŒ–éœ€æ±‚ï¼Œæ ·å¼ä¸èƒ½æ˜¯å†™æ­»åœ¨ç»„ä»¶é‡Œçš„ï¼Œè€Œæ˜¯è¦é€šè¿‡ä¸Šä¸‹æ–‡è·å–æ ·å¼å¸¸é‡ã€‚æˆ‘ä»¬æ€è·¯æ˜¯é¦–å…ˆä½¿ç”¨ <code>useTheme</code> ä»ä¸Šä¸‹æ–‡ä¸­è·å–ä¸»é¢˜ï¼Œç„¶åç”±äºæ ·å¼å®šä¹‰è¾ƒå¤šï¼Œæˆ‘ä»¬ä¸ºæ¯ä¸ªç»„ä»¶ç¼–å†™ä¸€ä¸ª <code>useStyle</code> hook æ”¾åœ¨å•ç‹¬çš„ style.ts æ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">import</span> &#123; StyleSheet &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;
<span class="hljs-keyword">import</span> &#123; Theme, useTheme &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'@vant-react-native/theme'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useStyle = <span class="hljs-function"><span class="hljs-params">props</span> =></span> &#123;
  <span class="hljs-keyword">const</span> theme = useTheme<Theme>();

  <span class="hljs-keyword">const</span> getBackgroundColor = <span class="hljs-function">() =></span> &#123;
    <span class="hljs-keyword">switch</span> (props.type) &#123;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'primary'</span>:
        <span class="hljs-keyword">return</span> theme[<span class="hljs-string">'success-color'</span>];
      <span class="hljs-keyword">case</span> <span class="hljs-string">'info'</span>:
        <span class="hljs-keyword">return</span> theme[<span class="hljs-string">'primary-color'</span>];
      <span class="hljs-keyword">case</span> <span class="hljs-string">'warning'</span>:
        <span class="hljs-keyword">return</span> theme[<span class="hljs-string">'warning-color'</span>];
      <span class="hljs-keyword">case</span> <span class="hljs-string">'danger'</span>:
        <span class="hljs-keyword">return</span> theme[<span class="hljs-string">'danger-color'</span>];
      <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">return</span> theme.white;
    &#125;
  &#125;;

  <span class="hljs-keyword">const</span> getTextColor = <span class="hljs-function">() =></span> &#123;
    <span class="hljs-keyword">if</span> (props.type === <span class="hljs-string">'default'</span>) &#123;
      <span class="hljs-keyword">return</span> theme.black;
    &#125; <span class="hljs-keyword">else</span> &#123;
      <span class="hljs-keyword">return</span> theme.white;
    &#125;
  &#125;;

  <span class="hljs-keyword">const</span> getBorderRadius = <span class="hljs-function">() =></span> &#123;
    <span class="hljs-keyword">if</span> (props.round) &#123;
      <span class="hljs-keyword">return</span> theme[<span class="hljs-string">'border-radius-max'</span>];
    &#125;
    <span class="hljs-keyword">if</span> (props.square) &#123;
      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    &#125;
    <span class="hljs-keyword">return</span> theme[<span class="hljs-string">'border-radius-sm'</span>];
  &#125;;

  <span class="hljs-keyword">const</span> styles = StyleSheet.create(&#123;
    <span class="hljs-attr">container</span>: &#123;
      <span class="hljs-attr">alignItems</span>: <span class="hljs-string">'center'</span>,
      <span class="hljs-attr">backgroundColor</span>: getBackgroundColor(),
      <span class="hljs-attr">borderColor</span>: getBorderColor(),
      <span class="hljs-attr">borderRadius</span>: theme[<span class="hljs-string">'border-radius-sm'</span>],
      <span class="hljs-attr">borderWidth</span>: theme[<span class="hljs-string">'border-width-base'</span>],
      <span class="hljs-attr">flexDirection</span>: <span class="hljs-string">'row'</span>,
      <span class="hljs-attr">flex</span>: <span class="hljs-number">1</span>,
      <span class="hljs-attr">justifyContent</span>: <span class="hljs-string">'center'</span>,
      <span class="hljs-attr">opacity</span>: <span class="hljs-number">1</span>,
      <span class="hljs-attr">paddingHorizontal</span>: <span class="hljs-number">15</span>,
    &#125;,
    <span class="hljs-attr">indicator</span>: &#123;
      <span class="hljs-attr">marginRight</span>: theme[<span class="hljs-string">'padding-xs'</span>],
    &#125;,
    <span class="hljs-attr">textStyle</span>: &#123;
      <span class="hljs-attr">color</span>: getTextColor(),
      <span class="hljs-attr">fontSize</span>: <span class="hljs-number">14</span>,
    &#125;,
    <span class="hljs-attr">wrapper</span>: &#123;
      <span class="hljs-attr">borderRadius</span>: theme[<span class="hljs-string">'border-radius-sm'</span>],
      <span class="hljs-attr">height</span>: <span class="hljs-number">44</span>,
    &#125;,
  &#125;);
  <span class="hljs-keyword">return</span> styles;
&#125;;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>åŸºäº <code>useStyle</code> æˆ‘ä»¬ä¾¿å¯å®Œæˆä¸€ä¸ªæ”¯æŒå¤šç±»å‹çš„ Button ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-tsx copyable" lang="tsx"><span class="hljs-keyword">const</span> Button: FunctionComponent<ButtonProps> = <span class="hljs-function"><span class="hljs-params">props</span> =></span> &#123;
  <span class="hljs-keyword">const</span> styles = useStyle(props);
  <span class="hljs-keyword">const</span> &#123; style, ...restProps &#125; = props;
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag"><<span class="hljs-name">TouchableHighlight</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;[styles.wrapper,</span> <span class="hljs-attr">style</span>]&#125; &#123;<span class="hljs-attr">...restProps</span>&#125;></span>
      <span class="hljs-tag"><<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;styles.container&#125;</span>></span>
        &#123;typeof props.children === 'string' ? (
          <span class="hljs-tag"><<span class="hljs-name">Text</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;styles.textStyle&#125;</span>></span>&#123;props.children&#125;<span class="hljs-tag"></<span class="hljs-name">Text</span>></span>
        ) : (
          props.children
        )&#125;
      <span class="hljs-tag"></<span class="hljs-name">View</span>></span>
    <span class="hljs-tag"></<span class="hljs-name">TouchableHighlight</span>></span></span>
  );
&#125;;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<blockquote>
<p>æ³¨æ„ï¼šå­ç»„ä»¶å¯èƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯èƒ½æ˜¯ç»„ä»¶ï¼Œæ‰€ä»¥éœ€è¦åˆ¤æ–­ç±»å‹ã€‚</p>
</blockquote>
<p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4a0b412c227e4dc994b818294165240d~tplv-k3u1fbpfcp-watermark.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-9">æœ´ç´ æŒ‰é’®</h3>
<p>æœ´ç´ æŒ‰é’®çš„æ–‡å­—ä¸ºæŒ‰é’®é¢œè‰²ï¼ŒèƒŒæ™¯ä¸ºç™½è‰²ï¼Œæˆ‘ä»¬é€šè¿‡ <code>plain</code> å±æ€§å°†æŒ‰é’®è®¾ç½®ä¸ºæœ´ç´ æŒ‰é’®ã€‚è°ƒç ”äº† antd å’Œ react-native-elements å‘ç°å®ƒä»¬éƒ½æ˜¯å®šä¹‰äº†å¾ˆå¤šæ ·å¼ï¼Œç„¶ååœ¨ç»„ä»¶å†…é€šè¿‡é€»è¾‘åˆ¤æ–­è®¡ç®—å…·ä½“æ ·å¼çš„å€¼ã€‚ä¸ªäººå¾ˆä¸å–œæ¬¢è¿™ç§æ–¹å¼ï¼Œä¸æ˜¯å½»åº•çš„ CSS in JSï¼Œæˆ‘çš„å¤„ç†æ–¹å¼æ˜¯å°†æ‰€æœ‰æœ‰å…³æ ·å¼è®¡ç®—çš„éƒ½å°è£…åœ¨æ¯ä¸ªç»„ä»¶çš„ <code>useStyle</code> é’©å­ä¸­ï¼Œæ¯”å¦‚å½“å¼•å…¥æœ´ç´ æŒ‰é’®å±æ€§æ—¶ï¼Œç›¸å¯¹äºæ™®é€šæŒ‰é’®æ”¹å˜çš„æœ‰å®¹å™¨èƒŒæ™¯è‰²ã€å®¹å™¨è¾¹æ¡†å’Œå­—ä½“é¢œè‰²ã€‚æ‰€ä»¥æˆ‘ä»¬å°†è¿™ä¸‰ä¸ªå±æ€§çš„å€¼éƒ½é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„å‡½æ•°è®¡ç®—ã€‚å¯¹æ¯” antd çš„æºç ï¼Œä¼šå‘ç°ä¸ä»…ä»£ç æ›´æ˜“è¯»ï¼Œç”šè‡³ä»£ç é‡ä¹Ÿå°‘äº†ã€‚</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">const</span> getBackgroundColor = <span class="hljs-function">() =></span> &#123;
  <span class="hljs-keyword">if</span> (props.plain) &#123;
    <span class="hljs-keyword">return</span> theme.white;
  &#125;
  <span class="hljs-comment">// ...</span>
&#125;;

<span class="hljs-keyword">const</span> getTextColor = <span class="hljs-function">() =></span> &#123;
  <span class="hljs-keyword">if</span> (props.plain) &#123;
    <span class="hljs-keyword">switch</span> (props.type) &#123;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'primary'</span>:
        <span class="hljs-keyword">return</span> theme[<span class="hljs-string">'success-color'</span>];
      <span class="hljs-keyword">case</span> <span class="hljs-string">'info'</span>:
        <span class="hljs-keyword">return</span> theme[<span class="hljs-string">'primary-color'</span>];
      <span class="hljs-keyword">case</span> <span class="hljs-string">'warning'</span>:
        <span class="hljs-keyword">return</span> theme[<span class="hljs-string">'warning-color'</span>];
      <span class="hljs-keyword">case</span> <span class="hljs-string">'danger'</span>:
        <span class="hljs-keyword">return</span> theme[<span class="hljs-string">'danger-color'</span>];
      <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">return</span> theme[<span class="hljs-string">'gray-3'</span>];
    &#125;
  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (props.type === <span class="hljs-string">'default'</span>) &#123;
    <span class="hljs-keyword">return</span> theme.black;
  &#125; <span class="hljs-keyword">else</span> &#123;
    <span class="hljs-keyword">return</span> theme.white;
  &#125;
&#125;;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0fc1bedf56fe4dd0a31e6d18b048665c~tplv-k3u1fbpfcp-watermark.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-10">ç»†è¾¹æ¡†</h3>
<p>vant å®ç°ç»†è¾¹æ¡†æ˜¯é€šè¿‡è®¾ç½® <code>hairline</code> å±æ€§å¯ä»¥å±•ç¤º 0.5px çš„ç»†è¾¹æ¡†ã€‚ä½†æ˜¯æ‰‹æœºä¸Šç”±äºåˆ†è¾¨ç‡çš„å½±å“ï¼Œè´¸ç„¶è®¾ç½® 0.5 ä¼šå¯¼è‡´è¾¹æ¡†ä¸æ˜¾ç¤ºçš„å…¼å®¹é—®é¢˜ã€‚å¥½åœ¨ React Native ä¸ºæˆ‘ä»¬æä¾›äº† <code>StyleSheet.hairlineWidth</code> å¸¸é‡æ¥å…¼å®¹æœ€ç»†è¾¹æ¡†é—®é¢˜ï¼Œä¸‹é¢æ˜¯å®˜æ–¹å¯¹å®ƒçš„å®šä¹‰ï¼š</p>
<blockquote>
<p>hairlineWidth è¿™ä¸€å¸¸é‡å§‹ç»ˆæ˜¯ä¸€ä¸ªæ•´æ•°çš„åƒç´ å€¼ï¼ˆçº¿çœ‹èµ·æ¥ä¼šåƒå¤´å‘ä¸ä¸€æ ·ç»†ï¼‰ï¼Œå¹¶ä¼šå°½é‡ç¬¦åˆå½“å‰å¹³å°æœ€ç»†çš„çº¿çš„æ ‡å‡†ã€‚å¯ä»¥ç”¨ä½œè¾¹æ¡†æˆ–æ˜¯ä¸¤ä¸ªå…ƒç´ é—´çš„åˆ†éš”çº¿ã€‚ç„¶è€Œï¼Œä½ ä¸èƒ½æŠŠå®ƒâ€œè§†ä¸ºä¸€ä¸ªå¸¸é‡â€ï¼Œå› ä¸ºä¸åŒçš„å¹³å°å’Œä¸åŒçš„å±å¹•åƒç´ å¯†åº¦ä¼šå¯¼è‡´ä¸åŒçš„ç»“æœã€‚</p>
<p>å¦‚æœæ¨¡æ‹Ÿå™¨ç¼©æ”¾è¿‡ï¼Œå¯èƒ½ä¼šçœ‹ä¸åˆ°è¿™ä¹ˆç»†çš„çº¿ã€‚</p>
</blockquote>
<p>ç”±äº <code>hairline</code> åªå½±å“äº†å®¹å™¨ <code>borderWidth</code> å±æ€§ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç¼–å†™å•ç‹¬çš„æ ·å¼è®¡ç®—å‡½æ•°ï¼š</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">const</span> styles = StyleSheet.create(&#123;
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">container</span>: &#123;
    <span class="hljs-comment">// ...</span>
    <span class="hljs-attr">borderWidth</span>: props.hairline ? theme[<span class="hljs-string">'border-width-hairline'</span>] : theme[<span class="hljs-string">'border-width-base'</span>],
  &#125;,
&#125;);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/43d80d537b07487d9043d718e6541f7e~tplv-k3u1fbpfcp-watermark.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-11">ç¦ç”¨çŠ¶æ€</h3>
<p>è¡¨å•å…ƒç´ æˆ–è€…è¯´å¯è§¦æ‘¸å¯ç‚¹å‡»çš„å…ƒç´ ä¸€èˆ¬éƒ½æœ‰ç¦ç”¨çŠ¶æ€ï¼Œvant ä¸­æ˜¯é€šè¿‡ disabled å±æ€§æ¥ç¦ç”¨æŒ‰é’®ï¼Œç¦ç”¨çŠ¶æ€ä¸‹æŒ‰é’®ä¸å¯ç‚¹å‡»ã€‚TouchableHighlight ç»§æ‰¿åœ°æœ‰ <code>disabled</code> å±æ€§ï¼Œæˆ‘ä»¬åªéœ€è¦è®¾ç½®ä¸€äº›ç¦ç”¨çŠ¶æ€ä¸‹çš„æŒ‰é’®æ ·å¼å°±å¯ä»¥ï¼ŒæŸ¥çœ‹ vant æºç æˆ‘ä»¬å‘ç°åªéœ€è¦ä¿®æ”¹é€æ˜åº¦ä¸º 0.5 å³å¯ï¼š</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">const</span> styles = StyleSheet.create(&#123;
  <span class="hljs-attr">container</span>: &#123;
    <span class="hljs-comment">// ...</span>
    <span class="hljs-attr">opacity</span>: props.disabled ? <span class="hljs-number">0.5</span> : <span class="hljs-number">1</span>,
    <span class="hljs-comment">// ...</span>
  &#125;,
&#125;);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/892589086d07426a8346319d8466bccf~tplv-k3u1fbpfcp-watermark.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-12">åŠ è½½çŠ¶æ€</h3>
<p>vant æ˜¯é€šè¿‡ <code>loading</code> å±æ€§è®¾ç½®æŒ‰é’®ä¸ºåŠ è½½çŠ¶æ€ï¼ŒåŠ è½½çŠ¶æ€ä¸‹é»˜è®¤ä¼šéšè—æŒ‰é’®æ–‡å­—ï¼Œå¯ä»¥é€šè¿‡ <code>loading-text</code> è®¾ç½®åŠ è½½çŠ¶æ€ä¸‹çš„æ–‡å­—ã€‚æˆ‘ä»¬å€ŸåŠ© React Native çš„ ActivityIndicator ç»„ä»¶å¯ä»¥è½»æ¾å®ç°è¿™ä¸ªç‰¹æ€§ï¼š</p>
<pre><code class="hljs language-tsx copyable" lang="tsx"><span class="hljs-comment">// ...</span>
<TouchableHighlight &#123;...restProps&#125;>
  <span class="xml"><span class="hljs-tag"><<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;styles.contentWrapper&#125;</span>></span>
    &#123;props.loading ? (
      <span class="hljs-tag"><></span>
        <span class="hljs-tag"><<span class="hljs-name">ActivityIndicator</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span> <span class="hljs-attr">color</span>=<span class="hljs-string">&#123;indicatorColor&#125;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;styles.indicator&#125;</span> /></span>
        &#123;props.loadingText ? <span class="hljs-tag"><<span class="hljs-name">Text</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;styles.textStyle&#125;</span>></span>&#123;props.loadingText&#125;<span class="hljs-tag"></<span class="hljs-name">Text</span>></span> : null&#125;
      <span class="hljs-tag"></></span></span>
    ) : <span class="hljs-literal">null</span>&#125;
  </View>
</TouchableHighlight>
<span class="hljs-comment">// ...</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>æ ·å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useIndicatorColor = (props: ButtonProps): <span class="hljs-function"><span class="hljs-params">string</span> =></span> &#123;
  <span class="hljs-keyword">const</span> theme = useTheme<Theme>();
  <span class="hljs-keyword">if</span> (props.plain) &#123;
    <span class="hljs-keyword">switch</span> (props.type) &#123;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'primary'</span>:
        <span class="hljs-keyword">return</span> theme[<span class="hljs-string">'success-color'</span>];
      <span class="hljs-keyword">case</span> <span class="hljs-string">'info'</span>:
        <span class="hljs-keyword">return</span> theme[<span class="hljs-string">'primary-color'</span>];
      <span class="hljs-keyword">case</span> <span class="hljs-string">'warning'</span>:
        <span class="hljs-keyword">return</span> theme[<span class="hljs-string">'warning-color'</span>];
      <span class="hljs-keyword">case</span> <span class="hljs-string">'danger'</span>:
        <span class="hljs-keyword">return</span> theme[<span class="hljs-string">'danger-color'</span>];
      <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">return</span> theme.black;
    &#125;
  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (props.type === <span class="hljs-string">'default'</span>) &#123;
    <span class="hljs-keyword">return</span> theme.black;
  &#125; <span class="hljs-keyword">else</span> &#123;
    <span class="hljs-keyword">return</span> theme.white;
  &#125;
&#125;;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/27c4340df2254245a3c830bf667a2e28~tplv-k3u1fbpfcp-watermark.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-13">æŒ‰é’®å½¢çŠ¶</h3>
<p>é»˜è®¤çš„æŒ‰é’®æœ‰å€¼ä¸º 2 çš„åœ†è§’ï¼Œvant ä¸­é€šè¿‡ <code>square</code> è®¾ç½®æ–¹å½¢æŒ‰é’®ï¼Œé€šè¿‡ <code>round</code> è®¾ç½®åœ†å½¢æŒ‰é’®ã€‚æŒ‰ä¾‹ï¼Œæˆ‘ä»¬é€šè¿‡åˆ¤æ–­è®¾ç½®æ ·å¼ï¼š</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">const</span> getBorderRadius = <span class="hljs-function">() =></span> &#123;
  <span class="hljs-keyword">if</span> (props.round) &#123;
    <span class="hljs-keyword">return</span> theme[<span class="hljs-string">'border-radius-max'</span>];
  &#125;
  <span class="hljs-keyword">if</span> (props.square) &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
  &#125;
  <span class="hljs-keyword">return</span> theme[<span class="hljs-string">'border-radius-sm'</span>];
&#125;;
<span class="hljs-keyword">const</span> styles = StyleSheet.create(&#123;
  <span class="hljs-attr">container</span>: &#123;
    <span class="hljs-attr">borderColor</span>: getBorderColor(),
  &#125;,
  <span class="hljs-attr">wrapper</span>: &#123;
    <span class="hljs-attr">borderRadius</span>: getBorderRadius(),
  &#125;,
&#125;);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d1402517566e49d1a1920fd9b3f7bb20~tplv-k3u1fbpfcp-watermark.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-14">æŒ‰é’®å°ºå¯¸</h3>
<p>Antd RN åªæä¾›äº† largeã€small ä¸¤ä¸ªå°ºå¯¸ï¼Œè€Œåœ¨ vant ä¸­æ”¯æŒ largeã€normalã€smallã€mini å››ç§å°ºå¯¸ï¼Œé»˜è®¤ä¸º normalã€‚è™½ç„¶å†™åˆ°è¿™é‡Œå·²ç»å¾ˆç–²å€¦äº†ï¼Œæ¨æç”˜éœ²ä¹Ÿæ—©å–å®Œäº†ï¼Œä½†æ˜¯ä¸ºäº†å®Œæ•´å¤åŸï¼Œè¿˜æ˜¯ç»­ä¸Šä¸€æ¯å’–å•¡ç»§ç»­è‚ã€‚æ ¹æ® vant è®¾è®¡ç¨¿æˆ‘ä»¬æ–°å¢ä¸‰ä¸ªæ ·å¼è·å–å‡½æ•°å¹¶åŠ¨æ€åŒ–æŒ‡å®šæ ·å¼ï¼š</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">const</span> getSizeHeight = <span class="hljs-function">() =></span> &#123;
  <span class="hljs-keyword">switch</span> (props.size) &#123;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'large'</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-number">50</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'small'</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-number">32</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'mini'</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-number">24</span>;
    <span class="hljs-keyword">default</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-number">44</span>;
  &#125;
&#125;;
<span class="hljs-keyword">const</span> getSizePadding = <span class="hljs-function">() =></span> &#123;
  <span class="hljs-keyword">switch</span> (props.size) &#123;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'small'</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-number">8</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'mini'</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-number">4</span>;
    <span class="hljs-keyword">default</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-number">15</span>;
  &#125;
&#125;;
<span class="hljs-keyword">const</span> getSizeFontSize = <span class="hljs-function">() =></span> &#123;
  <span class="hljs-keyword">switch</span> (props.size) &#123;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'large'</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-number">16</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'small'</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-number">12</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'mini'</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-number">10</span>;
    <span class="hljs-keyword">default</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-number">14</span>;
  &#125;
&#125;;

<span class="hljs-keyword">const</span> styles = StyleSheet.create(&#123;
  <span class="hljs-attr">container</span>: &#123;
    <span class="hljs-attr">paddingHorizontal</span>: getSizePadding(),
  &#125;,
  <span class="hljs-attr">textStyle</span>: &#123;
    <span class="hljs-attr">fontSize</span>: getSizeFontSize(),
  &#125;,
  <span class="hljs-attr">wrapper</span>: &#123;
    <span class="hljs-attr">height</span>: getSizeHeight(),
  &#125;,
&#125;);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/59c01002f25b477d85ed26fa1e21c86b~tplv-k3u1fbpfcp-watermark.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-15">è‡ªå®šä¹‰é¢œè‰²</h3>
<p>å¦‚æœä¸æ˜¯è‡ªå·±äº²è‡ªå¤åˆ» Vantï¼Œæ˜¯æ²¡æƒ³åˆ°ä¸€ä¸ª Button èƒ½ç©å‡ºè¿™ä¹ˆå¤šèŠ±ï¼Œæ”¯æŒç‰¹æ€§è¿™ä¹ˆå¤šè€å¿ƒå’Œä»£ç ç®¡ç†éƒ½æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚å½“ç„¶äº†ï¼Œæ´›ç«¹é‡‡å–çš„æ ·å¼ç®¡ç†æ–¹å¼æ¯”è¾ƒåæ¿€ï¼Œå¤§å®¶æœ‰å¥½çš„æ–¹å¼ä¹Ÿå¯ä»¥åœ¨è¯„è®ºåŒºè®¨è®ºã€‚</p>
<p>é€šè¿‡ <code>color</code> å±æ€§è‡ªå®šä¹‰æŒ‰é’®çš„é¢œè‰²ã€‚æˆ‘ä»¬å¯ä»¥å¾—å‡ºéœ€æ±‚ï¼Œä¸ç®¡ type æ˜¯ä»€ä¹ˆï¼Œ<code>color</code> å±æ€§éœ€å§‹ç»ˆè¦†ç›–åŸæœ‰æ ·å¼ï¼Œcolor èƒ½å½±å“çš„å°±æ˜¯èƒŒæ™¯è‰²ã€å­—ä½“é¢œè‰²å’Œè¾¹æ¡†é¢œè‰²ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹ <code>getBackgroundColor</code>ã€<code>getTextColor</code>ã€<code>getBorderColor</code> æ ·å¼å‡½æ•°åœ¨åˆé€‚çš„åœ°æ–¹åŠ ä¸Šä»¥ä¸‹ä»£ç å³å¯ï¼š</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">if</span> (props.color) &#123;
  <span class="hljs-keyword">return</span> props.color;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8efffdbfd6424618be6152895a53e8ee~tplv-k3u1fbpfcp-watermark.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-16">åŒå‡»äº‹ä»¶çš„å®ç°</h2>
<p>æˆ‘ä»¬ä» React Native å†…ç½®çš„ TouchableHighlight ç»„ä»¶ç»§æ‰¿äº†å¾ˆå¤šäº‹ä»¶ï¼Œå…¶ä¸­ onPressã€onLongPress åˆ†åˆ«ä»£è¡¨å•å‡»å’Œé•¿æŒ‰ã€‚ä½†å”¯ç‹¬â€œåŒå‡» 666â€çš„åŒå‡»äº‹ä»¶æ²¡æœ‰å§“åã€‚ä¹‹å‰åœ¨å®é™…ä¸šåŠ¡æ›¾ç»å°è£…è¿‡åŒå‡»äº‹ä»¶ï¼Œè¿™æ¬¡æˆ‘ä»¬å°±ç›´æ¥å°±å†…ç½®äº†ã€‚</p>
<p>å®ç°æ€è·¯æ˜¯å»¶æ—¶æ‰§è¡Œå•å‡»äº‹ä»¶ï¼ˆé»˜è®¤ 200 æ¯«ç§’ï¼‰ï¼Œç„¶åè®°å½•ç‚¹å‡»æ¬¡æ•°å’Œä¸¤æ¬¡æ—¶é—´é—´éš”ï¼Œå½“è¯†åˆ«ä¸ºç¬¬äºŒæ¬¡ç‚¹å‡»ä¸”æ—¶é—´é—´éš”å°äºå•å‡»å»¶æ—¶æ—¶é—´ã€‚é‚£ä¹ˆå°±å–æ¶ˆå•å‡»äº‹ä»¶å»¶æ—¶ï¼Œå¹¶ç«‹å³æ‰§è¡ŒåŒå‡»äº‹ä»¶ã€‚å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-tsx copyable" lang="tsx"><span class="hljs-keyword">let</span> lastTime = <span class="hljs-number">0</span>;
<span class="hljs-keyword">let</span> clickCount = <span class="hljs-number">1</span>;
<span class="hljs-keyword">let</span> timeout = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">const</span> _onPress = <span class="hljs-function">(<span class="hljs-params">event: GestureResponderEvent</span>) =></span> &#123;
  <span class="hljs-keyword">const</span> now = <span class="hljs-built_in">Date</span>.now();
  <span class="hljs-keyword">if</span> (timeout) &#123;
    <span class="hljs-built_in">clearTimeout</span>(timeout);
  &#125;
  timeout = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =></span> &#123;
    props.onPress(event);
    clickCount = <span class="hljs-number">1</span>;
    lastTime = <span class="hljs-number">0</span>;
  &#125;, props.delayDoublePress);
  <span class="hljs-keyword">if</span> (clickCount === <span class="hljs-number">2</span> && now - lastTime <= props.delayDoublePress) &#123;
    <span class="hljs-built_in">clearTimeout</span>(timeout);
    clickCount = <span class="hljs-number">1</span>;
    lastTime = <span class="hljs-number">0</span>;
    props.onDoublePress(event);
  &#125; <span class="hljs-keyword">else</span> &#123;
    clickCount++;
    lastTime = now;
  &#125;
&#125;;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å¤§å®¶ä¼šå‘ç°è¿™é‡Œçš„å®ç°ç³…åˆäº†å‡½æ•°é˜²æŠ–ã€èŠ‚æµä»¥åŠè®¡æ•°å™¨çš„åŸç†ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è‡ªè¡Œå¤ä¹ ä¸‹åŸç†ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚</p>
<h2 data-id="heading-17">API æ–‡æ¡£</h2>
<p>ä¸€ä¸ªç»„ä»¶çš„æ–‡æ¡£ï¼Œé™¤äº† Demoï¼Œè¿˜éœ€è¦å±•ç¤ºå‡ºæ¥å¯ç”¨çš„ Propsï¼ŒDumi å†…ç½®çš„ <code><API></API></code> ç»„ä»¶å¯ä»¥æ ¹æ®ç»„ä»¶è‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£ã€‚é¦–å…ˆæˆ‘ä»¬åƒä¸‹é¢ä¸€æ ·ç¼–å†™ Props æ³¨é‡Šï¼š</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">interface</span> ButtonProps <span class="hljs-keyword">extends</span> TouchableHighlightProps &#123;
  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@description       </span>Can be set to primaryã€infoã€warningã€danger
   * <span class="hljs-doctag">@description</span>.zh-CN ç±»å‹ï¼Œå¯é€‰å€¼ä¸º primaryã€infoã€warningã€danger
   */</span>
  <span class="hljs-keyword">type</span>?: <span class="hljs-string">'default'</span> | <span class="hljs-string">'primary'</span> | <span class="hljs-string">'info'</span> | <span class="hljs-string">'warning'</span> | <span class="hljs-string">'danger'</span>;
  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@description       </span>Can be set to largeã€smallã€mini
   * <span class="hljs-doctag">@description</span>.zh-CN å°ºå¯¸ï¼Œå¯é€‰å€¼ä¸º
   */</span>
  size?: <span class="hljs-string">'large'</span> | <span class="hljs-string">'normal'</span> | <span class="hljs-string">'small'</span> | <span class="hljs-string">'mini'</span>;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>ç„¶ååœ¨ Markdown ä¸­å¼•å…¥ API ç»„ä»¶å³å¯ï¼š</p>
<pre><code class="hljs language-md copyable" lang="md"><span class="xml"><span class="hljs-tag"><<span class="hljs-name">API</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./index.tsx"</span>></span></span><span class="xml"><span class="hljs-tag"></<span class="hljs-name">API</span>></span></span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å†…ç½®ç»„ä»¶ API æ²¡æœ‰å¤„ç†ç»§æ‰¿çš„æƒ…å†µï¼Œæˆ‘ä»¬åç»­ä¼šè‡ªå®šä¹‰ä¸€ä¸ª API ç»„ä»¶ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ï¼Œæµè§ˆ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fvant-react-native.js.org%2Fcomponents%2Fbutton%23api" target="_blank" rel="nofollow noopener noreferrer" title="https://vant-react-native.js.org/components/button#api" ref="nofollow noopener noreferrer">Button æ–‡æ¡£</a> å¯ä»¥æŸ¥çœ‹ç°åœ¨çš„æ•ˆæœï¼š</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7bedac7240334ff79c4142005a66b158~tplv-k3u1fbpfcp-watermark.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-18">å·¥ç¨‹åŒ–ä¸²è®²</h2>
<p>ç”±äºå¾ˆéš¾åœ¨ä¸€ç¯‡æ–‡ç« ä¸­å°†ç»„ä»¶å¼€å‘ç›¸å…³çš„å·¥ç¨‹åŒ–è®²å®Œï¼Œåœ¨æœ¬ç¯‡å¼€å§‹ Button ä¹‹æ—…å‰ï¼Œæˆ‘ä»¬è¿˜æ˜¯æœ‰ä¸€äº›å·¥ç¨‹åŒ–ç›¸å…³çš„äº‹æƒ…è¦ä»‹ç»ä¸€ä¸‹ã€‚</p>
<h3 data-id="heading-19">ç»„ä»¶åˆ›å»ºè„šæ‰‹æ¶</h3>
<blockquote>
<p>å°é»‘ï¼šæ´›ç«¹ï¼Œ<code>lerna create</code> å‘½ä»¤åˆ›å»ºå‡ºæ¥çš„æ¨¡å—å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œä»¥åè¦åˆ›å»ºå¾ˆå¤šå¾ˆå¤šç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªåˆ›å»ºç»„ä»¶æ¨¡å—çš„è„šæ‰‹æ¶å—ï¼Ÿ</p>
</blockquote>
<p>lerna ä½¿ç”¨èµ·æ¥æ˜¯æœ‰ä¸å°‘ç—›ç‚¹çš„ï¼Œ<code>lerna create</code> å‘½ä»¤æ²¡åŠæ³•æŒ‡å®šæ¨¡æ¿ï¼Œè€ƒè™‘åˆ°ä¹‹åçš„å‡ åä¸Šç™¾ä¸ªç»„ä»¶æ¯æ¬¡åˆ›å»ºéƒ½è¦è¿›è¡Œé¡¹ç›®ç»“æ„ã€Typescript é…ç½®ã€å•å…ƒæµ‹è¯•é…ç½®ã€Babel é…ç½®ç­‰ç­‰å·¥ä½œæ­¥éª¤ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å†™ä¸€ä¸ªè„šæ‰‹æ¶ã€‚</p>
<h4 data-id="heading-20">æ¨¡æ¿è§£æ</h4>
<p>è¯´åˆ°æ¨¡æ¿è§£æï¼Œç›¸ä¿¡å¤§å®¶å’Œæˆ‘ä¸€æ ·æƒ³åˆ°çš„æ˜¯ vue-cli çš„ template è§£æã€‚é€šè¿‡é˜…è¯» <a href="https://link.juejin.cn/?target=https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fvue-cli%402.9.6%2Flib%2Fgenerate.js" target="_blank" rel="nofollow noopener noreferrer" title="https://cdn.jsdelivr.net/npm/vue-cli@2.9.6/lib/generate.js" ref="nofollow noopener noreferrer">vue-cli@2.9.6 generate.js</a> æºç ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†æå‡ºå°¤å¤§æ˜¯åŸºäº metalsmithã€handlebarsã€consolidate è¿™ä¸‰ä¸ªåŒ…æ¥å®ç°æ¨¡æ¿è§£æèƒ½åŠ›çš„ã€‚è®©äººä¸å®‰çš„æ˜¯å…¶ä¸­ metalsmith åº“æœ‰é•¿è¾¾ 5 å¹´æ²¡æœ‰ç»´æŠ¤äº†ï¼Œæ´›ç«¹æŒ‘é€‰å¼€æºé¡¹ç›®ä¸€èˆ¬å¯¹ç»´æŠ¤åº¦å¾ˆæ•æ„Ÿï¼Œæœ¬ç€è½®å­è¦ç”¨è‡ªå·±é€ çš„åŸåˆ™ï¼Œæˆ‘ç¿»çœ‹äº† Metalsmith çš„ Readme å‘ç°è¿™ä¸ªæ’ä»¶æ— éæ˜¯é€šè¿‡é€’å½’è¯»æ–‡ä»¶çš„æ–¹å¼æ¸²æŸ“æ¨¡æ¿ï¼Œå¹¶ä¸”å®ƒçš„é™æ€ç½‘ç«™ç”Ÿæˆçš„èƒ½åŠ›å¯¹æˆ‘ä»¬æ¨¡æ¿è§£æçš„éœ€æ±‚ä¹Ÿæ˜¯å¤šä½™çš„ã€‚</p>
<p>è¯´å¹²å°±å¹²ï¼Œåœ¨å’Œ <a href="https://juejin.cn/user/3175045313873943" target="_blank" title="https://juejin.cn/user/3175045313873943">@æ—å°å¸…</a> åŒå­¦ç®€å•æ²Ÿé€šåï¼Œæˆ‘åŠ¨æ‰‹é€ äº† <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fyoungjuning%2Fhandlebars-template-compiler" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/youngjuning/handlebars-template-compiler" ref="nofollow noopener noreferrer">handlebars-template-compiler</a> è¿™ä¸ªè½®å­ï¼Œå…¶ä¸»è¦åŸç†å¦‚ä¸‹ï¼š</p>
<ol>
<li>ä½¿ç”¨ recursive-readdir é€’å½’è·å–æ‰€æœ‰æ–‡ä»¶è·¯å¾„</li>
</ol>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">const</span> files = <span class="hljs-keyword">await</span> recursive(rootDir);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ol start="2">
<li>ä½¿ç”¨ <code>handlebars.compile</code> æ–¹æ³•ä½¿ç”¨å…ƒæ•°æ®å¯¹æ¨¡æ¿è¿›è¡Œæ¸²æŸ“</li>
</ol>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">const</span> content = fs.readFileSync(file).toString();
<span class="hljs-keyword">const</span> result = handlebars.compile(content)(meta);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ol start="3">
<li>ä½¿ç”¨ <code>fs.writeFileSync</code> API é‡å†™æ–‡ä»¶</li>
</ol>
<p>å¦å¤–ï¼Œé€šè¿‡å¼•å…¥ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fmicromatch" target="_blank" rel="nofollow noopener noreferrer" title="https://www.npmjs.com/package/micromatch" ref="nofollow noopener noreferrer">glob</a> æ¨¡å¼åŒ¹é…å®ç°äº† <code>exclude</code> é…ç½®ä»¥åŠåªå¤„ç†æŒ‡å®šåç¼€ï¼ˆé»˜è®¤ <code>**/*.tpl.*</code>ï¼‰çš„æ–‡ä»¶æ¥é¿å…ä¸å¿…è¦çš„æ¸²æŸ“ã€‚ï¼ˆPSï¼šNPM ä¸€å‘¨æœ‰äº† 300 å¤šä¸‹è½½ï¼Œæœ‰éœ€è¦çš„æ˜å‹å€¼å¾—ä¸€è¯•ğŸ˜„ï¼‰</p>
<h4 data-id="heading-21">Node CLIï¼ˆ@vant-react-native/scriptsï¼‰æ­å»º</h4>
<p>è¿™é‡Œæ´›ç«¹å°è¯•ç”¨æœ€ç®€æ´çš„è¯­è¨€ä¸ºå¤§å®¶æè¿°ä¸€ä¸ªè„šæ‰‹æ¶çš„è¯ç”Ÿï¼Œæºç åœ¨ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fyoungjuning%2Fvant-react-native%2Ftree%2Fmain%2Fpackages%2Fscripts" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/youngjuning/vant-react-native/tree/main/packages/scripts" ref="nofollow noopener noreferrer">packages/scripts</a> ç›®å½•ä¸‹ï¼Œæ²¡æœ‰æ¥è§¦è¿‡ CLI çš„æ˜å‹è¯·ç›¸ä¿¡æˆ‘ï¼ŒNode CLI å¾ˆå®¹æ˜“ä¸Šæ‰‹çš„ã€‚æ¥è§¦è¿‡çš„åŒå­¦ä¹Ÿå¯ä»¥æŸ¥æ¼è¡¥ç¼ºå€Ÿé‰´ä¸€äºŒã€‚</p>
<ol>
<li><code>package.json</code> æ–‡ä»¶çš„ <code>bin</code> å­—æ®µæ˜¯æˆ‘ä»¬è„šæ‰‹æ¶çš„å…¥å£</li>
</ol>
<pre><code class="hljs language-json copyable" lang="json"><span class="hljs-comment">// æŒ‡å®šå¯æ‰§è¡Œæ–‡ä»¶çš„ä½ç½®ä»¥åŠåˆ«å</span>
<span class="hljs-string">"bin"</span>: &#123;
  <span class="hljs-attr">"vant"</span>: <span class="hljs-string">"./bin/cli.js"</span>
&#125;,
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ol start="2">
<li>å®šä¹‰ <code>./bin/cli.js</code> ä¸ºå¯æ‰§è¡Œæ–‡ä»¶å¹¶è°ƒç”¨ <code>init</code> æ–¹æ³•ã€‚</li>
</ol>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// ç”±äºæˆ‘ä»¬çš„è„šæœ¬æ˜¯ Node ç¼–å†™çš„ï¼Œæ‰€ä»¥éœ€è¦æŒ‡å®š node æ‰€åœ¨ä½ç½®</span>
#!<span class="hljs-regexp">/usr/</span>bin/env node
<span class="hljs-keyword">const</span> &#123; init &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../lib'</span>);
<span class="hljs-comment">// è¿™ä¸ªåœ°æ–¹å‚è€ƒäº† create-react-native çš„è®¾è®¡</span>
<span class="hljs-comment">// æœ¬æ–‡ç‚¹èµè¿‡ 300ï¼Œä¸‹ä¸€ç¯‡æ´›ç«¹å¸¦å°é»‘ä¸ºå¤§å®¶å¸¦æ¥ã€ŠåŸºäº TypeScript é‡æ„ create-react-nativeã€‹</span>
init();
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ol start="3">
<li>ç„¶ååœ¨ <code>src/index.ts</code> ä¸­åˆå§‹åŒ– commander è¿™ä¸ªä¹…è´Ÿç››åçš„å‘½ä»¤è¡Œæ¡†æ¶</li>
</ol>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">const</span> init = (): <span class="hljs-function"><span class="hljs-params">void</span> =></span> &#123;
  <span class="hljs-keyword">const</span> packageJson = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../package.json'</span>);
  program.version(packageJson.version).description(packageJson.description);
  <span class="hljs-comment">// ...</span>
  program.parse(process.argv);
&#125;;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ol start="4">
<li>ä¸ºäº†æ–¹ä¾¿ç®¡ç†å‘½ä»¤ï¼Œæˆ‘ä»¬å°†å‘½ä»¤éƒ½æ”¾ç½®åœ¨ <code>src/commands</code> ç›®å½•ä¸‹å¹¶é€šè¿‡ <code>fs.readdirSync</code> API åŠ¨æ€æ‰«ææ³¨å†Œã€‚</li>
</ol>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">const</span> init = (): <span class="hljs-function"><span class="hljs-params">void</span> =></span> &#123;
  <span class="hljs-comment">// è¿™æ®µä»£ç å€Ÿé‰´è‡ª NeteaseCloudMusicApi é¡¹ç›®ï¼Œä½œè€…çš„ä»£ç å¾ˆæœ‰è®¾è®¡æ„Ÿï¼Œæ¨èé˜…è¯»ã€‚</span>
  fs.readdirSync(path.join(__dirname, <span class="hljs-string">'commands'</span>)).forEach(<span class="hljs-function">(<span class="hljs-params">file: <span class="hljs-built_in">string</span></span>) =></span> &#123;
    <span class="hljs-keyword">if</span> (!file.endsWith(<span class="hljs-string">'.js'</span>)) <span class="hljs-keyword">return</span>;
    <span class="hljs-built_in">require</span>(path.join(__dirname, <span class="hljs-string">'commands'</span>, file));
  &#125;);
  <span class="hljs-comment">// ...</span>
&#125;;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ol start="5">
<li>æœ€ååœ¨ <code>commands</code> ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª <code>create.ts</code> æ–‡ä»¶ç¼–å†™å‘½ä»¤</li>
</ol>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">import</span> &#123; program &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'commander'</span>;
program
  .command(<span class="hljs-string">'create <name> [loc]'</span>)
  .description(<span class="hljs-string">'Create a new vant-react-native package'</span>)
  .action(<span class="hljs-function">(<span class="hljs-params">name,loc</span>) =></span> &#123;
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Hello Luozhu'</span>);
  &#125;)
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h4 data-id="heading-22">è„šæ‰‹æ¶å®ç°</h4>
<p>ä¸Šä¸€å°ç»“ï¼Œæˆ‘ä»¬åˆå§‹åŒ–äº† CLI å¹¶æ·»åŠ äº† <code>create</code> å‘½ä»¤ï¼Œè¿™ä¸€å°èŠ‚æˆ‘ä»¬å°±æ¥å®ç°ä¸€ä¸‹è„šæ‰‹æ¶åŠŸèƒ½ã€‚</p>
<p>æˆ‘ä»¬é¦–å…ˆåœ¨ <code>packages/scripts</code> ç›®å½•ä¸‹åˆ›å»ºç»„ä»¶æ¨¡æ¿</p>
<pre><code class="hljs language-sh copyable" lang="sh">.
â”œâ”€â”€ README.tpl.md <span class="hljs-comment"># tpl åç¼€åœ¨ç”Ÿæˆç»„ä»¶æ¨¡æ¿çš„æ—¶å€™ä¼šè¢« handlebars-template-compiler è‡ªåŠ¨å»æ‰ã€‚</span>
â”œâ”€â”€ package.tpl.json
â”œâ”€â”€ src
â”‚   â””â”€â”€ index.ts <span class="hljs-comment"># æ²¡æœ‰ tpl åç¼€åˆ™ä¸ä¼šè¢«ç¼–è¯‘ï¼Œæ¨¡æ¿å¾ˆå¤§æ—¶å¯ä»¥èŠ‚çœæ—¶é—´ã€‚</span>
â””â”€â”€ tsconfig.json
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>ç„¶åæˆ‘ä»¬æ˜ç¡®æˆ‘ä»¬çš„æ¨¡æ¿å…ƒæ•°æ®çš„æ•°æ®ç»“æ„ï¼Œæˆ‘è¿™é‡Œçš„æ•°æ®ç»“æ„æ˜¯ï¼š</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">interface</span> IMeta &#123;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  version: <span class="hljs-built_in">string</span>;
  description: <span class="hljs-built_in">string</span>;
  author: <span class="hljs-built_in">string</span>;
  email: <span class="hljs-built_in">string</span>;
  url: <span class="hljs-built_in">string</span>;
  directory: <span class="hljs-built_in">string</span>;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>æœ‰äº†æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ inquirer æ¨¡å—å¼•å¯¼ç”¨æˆ·è¾“å…¥ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">import</span> inquirer <span class="hljs-keyword">from</span> <span class="hljs-string">'inquirer'</span>;
<span class="hljs-comment">// ...</span>
<span class="hljs-comment">// getQuestions è¿‡é•¿ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥æŸ¥çœ‹ï¼šhttp://tny.im/UFbg</span>
<span class="hljs-keyword">const</span> answer: IMeta = <span class="hljs-keyword">await</span> inquirer.prompt(getQuestions(name));
<span class="hljs-comment">// ...</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>tmp-promise</code> æ¨¡å—åˆ›å»ºä¸€ä¸ªç³»ç»Ÿä¸´æ—¶æ–‡ä»¶å¤¹ï¼Œå¹¶å°†å‰æ–‡æåˆ°çš„ template æ–‡ä»¶å¤¹çš„å†…å®¹æ‹·è´è¿›å»ï¼š</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">import</span> tmp <span class="hljs-keyword">from</span> <span class="hljs-string">'tmp-promise'</span>;
<span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">'fs-extra'</span>;
<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>;
<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">const</span> tmpdir = <span class="hljs-keyword">await</span> tmp.dir(&#123; <span class="hljs-attr">unsafeCleanup</span>: <span class="hljs-literal">true</span> &#125;);
fs.copySync(path.join(__dirname, <span class="hljs-string">'../../template'</span>), tmpdir.path);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>æœ€åï¼Œæˆ‘ä»¬å¯¹ä¸´æ—¶æ–‡ä»¶å¤¹çš„å†…å®¹è¿›è¡Œç¼–è¯‘å†æ‹·è´åˆ°æŒ‡å®šä½ç½®å³å¯ï¼š</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">import</span> htc <span class="hljs-keyword">from</span> <span class="hljs-string">'handlebars-template-compiler'</span>;
<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">await</span> htc<IMeta>(answer, tmpdir.path);
fs.copySync(tmpdir.path, <span class="hljs-string">`<span class="hljs-subst">$&#123;process.cwd()&#125;</span>/packages/<span class="hljs-subst">$&#123;locPath&#125;</span>`</span>);
<span class="hljs-comment">// ...</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>æŠ˜è…¾è¿™ä¸€é¡¿ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸‹æˆæœå§ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4ba477bcbd8b4ef6b880c7e8e5a095bc~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-23">Github CODEOWENERS</h3>
<p>å¤§å‹çš„å¼€æºé¡¹ç›®æœ€éš¾çš„ä¸æ˜¯æŠ€æœ¯é—®é¢˜ï¼ŒæŠ€æœ¯å¤§å’–æ°¸è¿œä¸ä¼šç¼ºã€‚æœ€éš¾çš„å…¶å®æ˜¯åä½œå’ŒåæœŸç»´æŠ¤ã€‚è¯•æƒ³ä¸€ä¸‹ä¸€ä¸ªæˆç™¾ä¸Šåƒäººå‚ä¸çš„é¡¹ç›®å½“æœ‰æ–°çš„ pr æ—¶ï¼Œæ­£å¸¸äººæ ¹æœ¬æ— åŠ›å»å¿«é€Ÿæ£€ç´¢å‡ºéœ€è¦è°å» review ä»£ç ã€‚æˆ‘ä»¬çš„ vant-react-native ç”±äºæ˜¯å°†æ¯ä¸ªç»„ä»¶å•ç‹¬å‘åŒ…ç»´æŠ¤ï¼Œå½“å‚ä¸çš„å°ä¼™ä¼´å¤šäº†ä¹Ÿä¼šäº§ç”Ÿè¿™ä¸ªå›°æ‰°ã€‚</p>
<p>è€Œ GitHub CODEOWNERSï¼ˆä»£ç æ‰€æœ‰è€…ï¼‰å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Œåœ¨ 5000+ è´¡çŒ®è€…å‚ä¸çš„ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FDefinitelyTyped%2FDefinitelyTyped" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/DefinitelyTyped/DefinitelyTyped" ref="nofollow noopener noreferrer">DefinitelyTyped</a> é¡¹ç›®ä¸­æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°å®ƒçš„èº«å½±ã€‚å®˜æ–¹å¯¹ä»£ç æ‰€æœ‰è€…å®šä¹‰å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>ä½ å¯ä»¥ä½¿ç”¨ CODEOWNERS æ–‡ä»¶å®šä¹‰è´Ÿè´£ä»“åº“ä»£ç çš„ä¸ªäººæˆ–å›¢é˜Ÿã€‚å½“æœ‰äººä¿®æ”¹ä»£ç å¹¶æ‰“å¼€ä¸€ä¸ª pull request æ—¶ï¼Œå°†è‡ªåŠ¨è¯·æ±‚ä»£ç æ‰€æœ‰è€…è¿›è¡Œå®¡æŸ¥ã€‚</p>
</blockquote>
<p>CODEOWNERS æ–‡ä»¶ä½¿ç”¨éµå¾ª gitignore æ–‡ä»¶ä¸­æ‰€ç”¨å¤§å¤šæ•°è§„åˆ™çš„æ¨¡å¼ï¼ŒCODEOWNERS æ–‡ä»¶ä½ç½®ä¸€èˆ¬ä½äº <code>.github/</code> ç›®å½•ä¸‹ã€‚</p>
<p>åœ¨ vant-react-nativeï¼Œæ´›ç«¹æ˜¯ä»“åº“çš„æœ€ç»ˆè´Ÿè´£äººï¼Œæ‰€ä»¥æ˜¯æœŸæœ›æ¯ä¸ª pr éƒ½å¯ä»¥åˆ†é…ç»™è‡ªå·±å®¡æŸ¥ä¸€ä¸‹çš„ã€‚é‚£ä¹ˆæˆ‘ä»¬è¿™å°±æ¥å®éªŒä¸€ä¸‹å§ï¼Œæ–°å»ºä¸€ä¸ª <code>.github/CODEOWNERS</code> æ–‡ä»¶å¹¶å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="copyable"># This is a comment.
# Each line is a file pattern followed by one or more owners.

# These owners will be the default owners for everything in
# the repo. Unless a later match takes precedence,
# @youngjuning will be requested for review when someone opens a pull request.
*       @youngjuning

# In this example, @doctocat owns any files in the build/logs
# directory at the root of the repository and any of its
# subdirectories.
/packages/ @luozhu1994
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>ä¸€èˆ¬å¦‚æœæ–‡ä»¶å…·æœ‰ä»£ç æ‰€æœ‰è€…ï¼Œåˆ™åœ¨æ‰“å¼€æ‹‰å–è¯·æ±‚ä¹‹å‰å¯ä»¥çœ‹åˆ°ä»£ç æ‰€æœ‰è€…æ˜¯è°ã€‚åœ¨ä»“åº“ä¸­ï¼Œä½ å¯ä»¥æ‰¾åˆ°æ–‡ä»¶å¹¶æ‚¬åœäºä¸€ä¸ªé”å›¾æ ‡ä¸Šï¼Œæ‚¬æµ®ä¹‹åä¼šå‘Šè¯‰ä½ è¯¥æ–‡ä»¶æ‰€æœ‰è€…æ˜¯è°ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/726bd5144a104902ae27ad31e1d46f93~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<p>ç„¶åæˆ‘ä»¬æäº¤ä¸€ä¸ª pr çœ‹çœ‹æ•ˆæœï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bf4cb8b7ef5c41989660e735e621fc4e~tplv-k3u1fbpfcp-zoom-1.image" alt loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-24">NPM å‘åŒ…è‡ªåŠ¨åŒ–</h3>
<p>å‘åŒ…æƒé™ä¸€èˆ¬åªæœ‰ä»“åº“æ‰€æœ‰è€…ä¸€ä¸ªäººæ‹¥æœ‰ï¼Œä½†æ˜¯ owner åŒæ—¶ç»´æŠ¤å¥½å‡ ä¸ª NPM è´¦å·ï¼Œæˆ–è€…æ˜¯ owner å¿½ç„¶å¾ˆå¿™å°†å‘å¸ƒæƒé™äº¤ç»™å…¶ä»–äººç®¡ç†å‘˜ä½†æ˜¯ä¸ä¾¿å‘ŠçŸ¥ NPM è´¦å·è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿç­”æ¡ˆæ˜¯å°† NPM å‘åŒ… CDï¼ˆæŒç»­éƒ¨ç½²ï¼‰åŒ–ï¼Œå…¬å¸ä¸€èˆ¬ä¼šåŸºäº Gitlab æˆ–è‡ªå»ºå¹³å°å®ç°è¯¥åŠŸèƒ½ã€‚ä½œä¸ºå¼€æºé¡¹ç›®ï¼Œæˆ‘ä»¬å½“ç„¶æ˜¯ä½¿ç”¨ GitHub Actionã€‚</p>
<p>æ­£å¸¸çš„å•åŒ…é¡¹ç›®ï¼Œä½¿ç”¨ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FJS-DevTools%2Fnpm-publish" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/JS-DevTools/npm-publish" ref="nofollow noopener noreferrer">npm-publish</a> æˆ– <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fpascalgn%2Fnpm-publish-action" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/pascalgn/npm-publish-action" ref="nofollow noopener noreferrer">npm-publish-action</a> è¿™ä¸¤ä¸ª GitHub Actionï¼Œè¿™å¹¶æ²¡æœ‰å¥½è®²çš„ã€‚ä½†æ˜¯åŸºäº lerna çš„å¤šåŒ…å•ä½“ä»“åº“å¹¶æ²¡æœ‰ç°æˆçš„æ’ä»¶å¯ä»¥ç”¨ï¼Œç…§ä¾‹ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹è‡ªå·±å®ç°çš„æ­¥éª¤ï¼š</p>
<ol>
<li>åˆ¤æ–­ commit message æ˜¯å¦ä»¥ <code>chore(release):</code> å¼€å¤´
<blockquote>
<p>é€šè¿‡ GitHub Action <code>startsWith(github.event.head_commit.message, 'chore(release):')</code> å®ç°</p>
</blockquote>
</li>
<li>é€šè¿‡ NPM publish token è®¤è¯ç™»å½•
<blockquote>
<p>é€šè¿‡ <code>npm config set //registry.npmjs.org/:_authToken=$&#123;&#123; secrets.NPM_TOKEN &#125;&#125;</code> è®¤è¯</p>
</blockquote>
</li>
<li>æ‰§è¡Œ <code>lerna publish from-package --yes</code> å‘å¸ƒ
<blockquote>
<p>éœ€è¦æœ¬åœ°å…ˆæ‰§è¡Œ <code>lerna version</code> ç³»åˆ—å‘½ä»¤æå‡ç‰ˆæœ¬</p>
</blockquote>
</li>
</ol>
<p>å®Œæ•´ GitHub Action å®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-yml copyable" lang="yml"><span class="hljs-attr">name:</span> <span class="hljs-string">npm-publish</span>

<span class="hljs-attr">on:</span>
  <span class="hljs-attr">push:</span>
    <span class="hljs-attr">branches:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">main</span>

<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">npm-publish:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    <span class="hljs-attr">if:</span> <span class="hljs-string">startsWith(github.event.head_commit.message,</span> <span class="hljs-string">'chore(release):'</span><span class="hljs-string">)</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v2</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">c-hive/gha-yarn-cache@v2</span> <span class="hljs-comment"># ç¼“å­˜ node_modules åŠ å¿«æ„å»ºé€Ÿåº¦</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">Packages</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">yarn</span> <span class="hljs-string">install</span> <span class="hljs-string">--registry=https://registry.npmjs.org/</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Authenticate</span> <span class="hljs-string">with</span> <span class="hljs-string">Registry</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">|
          npm config set //registry.npmjs.org/:_authToken=$&#123;NPM_TOKEN&#125;
</span>        <span class="hljs-attr">env:</span>
          <span class="hljs-attr">NPM_TOKEN:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">secrets.NPM_TOKEN</span> <span class="hljs-string">&#125;&#125;</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Publish</span> <span class="hljs-string">package</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">lerna</span> <span class="hljs-string">publish</span> <span class="hljs-string">from-package</span> <span class="hljs-string">--yes</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>ä¸ºäº†åœ¨å‘å¸ƒååŠæ—¶è·å–é€šçŸ¥ï¼Œæ´›ç«¹ä½¿ç”¨äº† <code>peter-evans/commit-comment</code> æ’ä»¶åœ¨å‘å¸ƒå¤±è´¥æˆ–æˆåŠŸåå¯¹ç›¸åº” commit è¿›è¡Œè¯„è®ºï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ”¶åˆ°é‚®ä»¶å’Œç«™å†…é€šçŸ¥ã€‚</p>
<pre><code class="hljs language-yml copyable" lang="yml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Create</span> <span class="hljs-string">commit</span> <span class="hljs-string">comment</span> <span class="hljs-string">after</span> <span class="hljs-string">publish</span> <span class="hljs-string">successfully</span>
  <span class="hljs-attr">if:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">success()</span> <span class="hljs-string">&#125;&#125;</span>
  <span class="hljs-attr">uses:</span> <span class="hljs-string">peter-evans/commit-comment@v1</span>
  <span class="hljs-attr">with:</span>
    <span class="hljs-attr">body:</span> <span class="hljs-string">|
      Hello Dear @youngjuning. This commit has been publish to NPM successfully.
      > Created by [commit-comment][1]
</span>
      [<span class="hljs-number">1</span>]<span class="hljs-string">:</span> <span class="hljs-string">https://github.com/peter-evans/commit-comment</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Create</span> <span class="hljs-string">commit</span> <span class="hljs-string">comment</span> <span class="hljs-string">after</span> <span class="hljs-string">publish</span> <span class="hljs-string">unsuccessfully</span>
  <span class="hljs-attr">if:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">failure()</span> <span class="hljs-string">&#125;&#125;</span>
  <span class="hljs-attr">uses:</span> <span class="hljs-string">peter-evans/commit-comment@v1</span>
  <span class="hljs-attr">with:</span>
    <span class="hljs-attr">body:</span> <span class="hljs-string">|
      Hello Dear @youngjuning. This commit has been publish to NPM unsuccessfully.
      > Created by [commit-comment][1]
</span>
      [<span class="hljs-number">1</span>]<span class="hljs-string">:</span> <span class="hljs-string">https://github.com/peter-evans/commit-comment</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-25">è‡´è°¢</h2>
<p>æˆªæ­¢å‘ç¨¿æ—¶ï¼Œ<a href="https://juejin.cn/post/6983854006124675108" target="_blank" title="https://juejin.cn/post/6983854006124675108">æ¯ä¸ªå‰ç«¯éƒ½å€¼å¾—æ‹¥æœ‰è‡ªå·±çš„ç»„ä»¶åº“ï¼Œå°±åƒæ¯ä¸ªå¤å¤©éƒ½æ‹¥æœ‰è¥¿ç“œğŸ‰</a> å·²è·å¾—è¿‘ 1600 èµã€è¶… 4 ä¸‡é˜…è¯»ğŸ“–ï¼Œå†æ¬¡å†æ¬¡æ„Ÿè°¢æ˜å‹çš„æ”¯æŒã€ç¼–è¾‘ Zoe çš„é­ç­–ï¼Œæœˆå½±å¤§ä½¬çš„è½¬è½½ã€æœ‹å‹çš„è½¬å‘ä»¥åŠè‡ªå·±çš„åšæŒã€‚</p>
<h2 data-id="heading-26">è¿‘æœŸå¥½æ–‡</h2>
<ul>
<li><a href="https://juejin.cn/post/6983854006124675108" target="_blank" title="https://juejin.cn/post/6983854006124675108">æ¯ä¸ªå‰ç«¯éƒ½å€¼å¾—æ‹¥æœ‰è‡ªå·±çš„ç»„ä»¶åº“ï¼Œå°±åƒæ¯ä¸ªå¤å¤©éƒ½æ‹¥æœ‰è¥¿ç“œğŸ‰</a></li>
<li><a href="https://juejin.cn/post/6969544464113074189" target="_blank" title="https://juejin.cn/post/6969544464113074189">åŸºäº lerna çš„å¤šåŒ… JavaScript é¡¹ç›®æ­å»ºç»´æŠ¤</a></li>
<li><a href="https://juejin.cn/post/6877462747631026190" target="_blank" title="https://juejin.cn/post/6877462747631026190">ä¸€æ–‡æå®š Conventional Commits</a></li>
<li><a href="https://juejin.cn/post/6955402195311263751" target="_blank" title="https://juejin.cn/post/6955402195311263751">2021 å¹´æœ€å€¼å¾—ä½¿ç”¨çš„ Node.js æ¡†æ¶</a></li>
<li><a href="https://juejin.cn/column/6972556324022255624" target="_blank" title="https://juejin.cn/column/6972556324022255624">React é¢è¯•å¿…çŸ¥å¿…ä¼šç³»åˆ—</a></li>
<li><a href="https://juejin.cn/column/6962102040684134436" target="_blank" title="https://juejin.cn/column/6962102040684134436">Go è¯­è¨€æ•™ç¨‹ç³»åˆ—</a></li>
</ul>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºã€Œ<a href="https://juejin.cn/user/325111174662855" target="_blank" title="https://juejin.cn/user/325111174662855">æ˜é‡‘ä¸“æ </a>ã€ï¼ŒåŒæ­¥äºå…¬ä¼—å·ã€Œç¨‹åºäººç”Ÿã€å’Œã€Œ<a href="https://link.juejin.cn/?target=https%3A%2F%2Fyoungjuning.js.org%2F" target="_blank" rel="nofollow noopener noreferrer" title="https://youngjuning.js.org/" ref="nofollow noopener noreferrer">æ´›ç«¹çš„å®˜æ–¹ç½‘ç«™</a>ã€ã€‚</p>
</blockquote></div>  
</div>
            