
---
title: '《全栈导航》网站挂掉-我是如何排查问题'
categories: 
 - 编程
 - 掘金
 - 分类
headimg: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/255594ef11d64db2bbe040cb2f9fe5e7~tplv-k3u1fbpfcp-watermark.image'
author: 掘金
comments: false
date: Fri, 13 Aug 2021 21:13:46 GMT
thumbnail: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/255594ef11d64db2bbe040cb2f9fe5e7~tplv-k3u1fbpfcp-watermark.image'
---

<div>   
<div class="markdown-body"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><h2 data-id="heading-0">问题</h2>
<p>我突然发现，网站刷新的时候打不开了，如果是路由跳转进去，是正常的</p>
<blockquote>
<p>但是网站常常链接会被别人收藏，或者直接分享打开，直接打不开肯定不好</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/255594ef11d64db2bbe040cb2f9fe5e7~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<blockquote>
<p>问题分析：此网站我是采用的nuxt.js开发的，一般这种错误类型，通过网络请求的数据，然后在对象下的某属性丢失，造成错误类型</p>
</blockquote>
<h3 data-id="heading-1">排查</h3>
<p>通过检查，是在父级页面请求的数据，传到子组件数据丢失</p>
<h4 data-id="heading-2">page.js 页面</h4>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-tag"><<span class="hljs-name">template</span>></span>
    <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"aritcle-detail"</span>></span>
        <span class="hljs-tag"><<span class="hljs-name">Header</span> /></span>
        <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"wp clearfix"</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">Detail</span> <span class="hljs-attr">:detail</span>=<span class="hljs-string">"detail"</span>></span><span class="hljs-tag"></<span class="hljs-name">Detail</span>></span>
        <span class="hljs-tag"></<span class="hljs-name">div</span>></span>
        <span class="hljs-tag"><<span class="hljs-name">Footer</span> /></span>
    <span class="hljs-tag"></<span class="hljs-name">div</span>></span>
<span class="hljs-tag"></<span class="hljs-name">template</span>></span>
<span class="hljs-tag"><<span class="hljs-name">script</span>></span><span class="javascript">
<span class="hljs-keyword">import</span> &#123; apiNavthemeDetail &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'@/api/navtheme'</span>
<span class="hljs-keyword">import</span> Detail <span class="hljs-keyword">from</span> <span class="hljs-string">'@/web/article/Detail'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;
    <span class="hljs-attr">components</span>:&#123;
        Detail
    &#125;,
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">asyncData</span>(<span class="hljs-params">&#123; $axios, app, store, params,route &#125;</span>)</span> &#123;
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'router'</span>,params.id);
        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> apiNavthemeDetail(&#123; <span class="hljs-attr">id</span>: params.id &#125;);
        <span class="hljs-keyword">return</span> &#123;
            <span class="hljs-attr">detail</span>: res.data,
            params
        &#125;
    &#125;,
    <span class="hljs-function"><span class="hljs-title">mounted</span>(<span class="hljs-params"></span>)</span> &#123;
         <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =></span> &#123;
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'params'</span>, <span class="hljs-built_in">this</span>.params)
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'detail'</span>, <span class="hljs-built_in">this</span>.detail)
        &#125;, <span class="hljs-number">3000</span>)
    &#125;
&#125;
</span><span class="hljs-tag"></<span class="hljs-name">script</span>></span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h4 data-id="heading-3">Detail子组件</h4>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-tag"><<span class="hljs-name">template</span>></span>
    <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"detail"</span>></span>
        <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"detail-left"</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"info"</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"header"</span>></span>
                    <span class="hljs-tag"><<span class="hljs-name">h1</span>></span>&#123;&#123;detail.title&#125;&#125;<span class="hljs-tag"></<span class="hljs-name">h1</span>></span>
                    <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"meta"</span>></span>
                        <span class="hljs-tag"><<span class="hljs-name">span</span>></span>
                            &#123;&#123;detail.member.it_name&#125;&#125;次
                        <span class="hljs-tag"></<span class="hljs-name">span</span>></span>
                    <span class="hljs-tag"></<span class="hljs-name">div</span>></span>
                <span class="hljs-tag"></<span class="hljs-name">div</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"user"</span>></span>
                    <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"user-left"</span>></span>
                        <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"img"</span>></span>
                            <span class="hljs-tag"><<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">"detail.member.userhead"</span> <span class="hljs-attr">alt</span> /></span>
                        <span class="hljs-tag"></<span class="hljs-name">div</span>></span>
                        <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"name"</span>></span>
                            <span class="hljs-tag"><<span class="hljs-name">b</span>></span>&#123;&#123;detail.member.username&#125;&#125;<span class="hljs-tag"></<span class="hljs-name">b</span>></span>
                            <span class="hljs-tag"><<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"user-title"</span>></span>&#123;&#123;detail.member.description&#125;&#125;<span class="hljs-tag"></<span class="hljs-name">span</span>></span>
                        <span class="hljs-tag"></<span class="hljs-name">div</span>></span>
                    <span class="hljs-tag"></<span class="hljs-name">div</span>></span>
                <span class="hljs-tag"></<span class="hljs-name">div</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content article-md"</span>></span>
                    <span class="hljs-tag"><<span class="hljs-name">no-ssr</span>></span>
                        <span class="hljs-tag"><<span class="hljs-name">mavon-editor</span>
                            <span class="hljs-attr">class</span>=<span class="hljs-string">"detail-md itnavs-markdown"</span>
                            <span class="hljs-attr">:value</span>=<span class="hljs-string">"detail['content']"</span>
                            <span class="hljs-attr">:subfield</span>=<span class="hljs-string">"false"</span>
                            <span class="hljs-attr">:defaultOpen</span>=<span class="hljs-string">"'preview'"</span>
                            <span class="hljs-attr">:toolbarsFlag</span>=<span class="hljs-string">"false"</span>
                            <span class="hljs-attr">:editable</span>=<span class="hljs-string">"false"</span>
                        /></span>
                    <span class="hljs-tag"></<span class="hljs-name">no-ssr</span>></span>
                <span class="hljs-tag"></<span class="hljs-name">div</span>></span>
            <span class="hljs-tag"></<span class="hljs-name">div</span>></span>
            <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"community"</span>></span>
                <span class="hljs-tag"><<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"@/assets/images/qzdh.jpg"</span> <span class="hljs-attr">alt</span> /></span>
            <span class="hljs-tag"></<span class="hljs-name">div</span>></span>
        <span class="hljs-tag"></<span class="hljs-name">div</span>></span>
    <span class="hljs-tag"></<span class="hljs-name">div</span>></span>
<span class="hljs-tag"></<span class="hljs-name">template</span>></span>
<span class="hljs-tag"><<span class="hljs-name">script</span>></span><span class="javascript">
<span class="hljs-keyword">import</span> Rightuser <span class="hljs-keyword">from</span> <span class="hljs-string">'./Rightuser'</span>
<span class="hljs-keyword">import</span> Casually <span class="hljs-keyword">from</span> <span class="hljs-string">'./Casually'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;
    <span class="hljs-attr">components</span>: &#123;
        Rightuser,
        Casually
    &#125;,
    <span class="hljs-attr">props</span>: [<span class="hljs-string">'detail'</span>],
&#125;
</span><span class="hljs-tag"></<span class="hljs-name">script</span>></span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-4">查看服务器日志</h3>
<p>nuxt.js 是node进程，启动的是用pm2，如有不懂，清查看我之前写的<a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.vipbic.com%2Farchives.html" target="_blank" rel="nofollow noopener noreferrer" title="https://www.vipbic.com/archives.html" ref="nofollow noopener noreferrer">【文章】</a></p>
<pre><code class="hljs language-js copyable" lang="js">pm2 logs
<span class="copy-code-btn">复制代码</span></code></pre>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f310a2f80196464ea5b93631ced59ba3~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<blockquote>
<p>此处得出结论，认为是服务没有查找数据，我们查看服务端代码</p>
</blockquote>
<pre><code class="hljs language-php copyable" lang="php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">detail</span>(<span class="hljs-params"></span>)</span>&#123;
        <span class="hljs-variable">$id</span> = input(<span class="hljs-string">'id'</span>);
        <span class="hljs-variable">$navtheme</span> = <span class="hljs-keyword">new</span> NavthemeModel();
        <span class="hljs-variable">$detail</span> = <span class="hljs-variable">$navtheme</span>->where(<span class="hljs-string">'id'</span>,<span class="hljs-variable">$id</span>)->with([<span class="hljs-string">'member'</span>=><span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-variable">$query</span></span>)</span>&#123;
            <span class="hljs-variable">$query</span>->field(<span class="hljs-string">'it_name'</span>);
        &#125;,<span class="hljs-string">'taxonomic'</span>=><span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-variable">$query</span></span>)</span>&#123;
            <span class="hljs-variable">$query</span>->field(<span class="hljs-string">'name,id,parentid'</span>);
            <span class="hljs-variable">$query</span>->with(<span class="hljs-string">'primary'</span>);
        &#125;])->find();
        <span class="hljs-variable">$navtheme</span>->where(<span class="hljs-string">'id'</span>,<span class="hljs-variable">$id</span>)->inc(<span class="hljs-string">'hits'</span>,<span class="hljs-number">1</span>)->update();
        <span class="hljs-variable">$detail</span>[<span class="hljs-string">'recommended'</span>] = <span class="hljs-variable">$navtheme</span>->recommended();
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>->showWebData([<span class="hljs-string">'data'</span>=><span class="hljs-variable">$detail</span>]);
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<p>推测，<code>$navtheme</code>去查找时失败，未查找到相关数据，导致member类型空，那么在客户端前端写法</p>
<pre><code class="hljs language-js copyable" lang="js">detail.member <span class="hljs-comment">// 为undefined</span>
detail.member.it_name <span class="hljs-comment">// 报错，undefined 下面没有数据属性，导致nuxt.js异常</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<p>代码一直我未动过，为啥出现这种情况，不得奇解</p>
<p>经过排查，我尝试在这里，打印id</p>
<pre><code class="hljs language-php copyable" lang="php"><span class="hljs-variable">$id</span> = input(<span class="hljs-string">'id'</span>);
dump(<span class="hljs-variable">$id</span>)
<span class="copy-code-btn">复制代码</span></code></pre>
<blockquote>
<p>得出结论：null，那么问题找到了，也就会客户端穿过来的参数id，没有接受到，导致没有查询到数据</p>
</blockquote>
<blockquote>
<p>此时又有问题，前端和后端都是我写的，都跑了大半年没问题，怎么突然参数丢失了，为了验证，此刻我们可以查看nginx日志</p>
</blockquote>
<h4 data-id="heading-5">nginx日志</h4>
<p>通过宝塔面板可以查看到可视化查看nginx日志，当然也可以用命令行去查看，会更细致一些</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/49dd540b65e74f66adccc46bdb19a4d6~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<blockquote>
<p>经过排查在参数丢失</p>
</blockquote>
<h3 data-id="heading-6">确认前端是否传入参数</h3>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">asyncData</span>(<span class="hljs-params">&#123; $axios, app, store, params, router &#125;</span>)</span> &#123;
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'router '</span>,router.id)
<span class="hljs-built_in">console</span>.log(params.id)
&#125;,
<span class="copy-code-btn">复制代码</span></code></pre>
<p>nuxt.js <code>asyncData</code> 函数是在服务端执行，所以在客户端是看不到的，需要在服务端看，我继续使用pm2 logs查看</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e9b9319866ff4e9aaaea34dd730fa810~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<blockquote>
<p>结论：前端传递参数，后端没有接受到参数，在传输过程中丢失，前端使用的是用的axios.js</p>
</blockquote>
<h3 data-id="heading-7">axios.js参数传输过程中丢失</h3>
<p>首先确认axios.js版本，是否过于老旧</p>
<pre><code class="hljs language-json copyable" lang="json">&#123;
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"nuxt-itnavs"</span>,
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"1.0.0"</span>,
  <span class="hljs-attr">"private"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">"scripts"</span>: &#123;
    <span class="hljs-attr">"dev"</span>: <span class="hljs-string">"nuxt"</span>,
    <span class="hljs-attr">"build"</span>: <span class="hljs-string">"nuxt build"</span>,
    <span class="hljs-attr">"start"</span>: <span class="hljs-string">"nuxt start"</span>,
    <span class="hljs-attr">"generate"</span>: <span class="hljs-string">"nuxt generate"</span>
  &#125;,
  <span class="hljs-attr">"dependencies"</span>: &#123;
    <span class="hljs-attr">"axios"</span>: <span class="hljs-string">"^0.21.1"</span>,
  &#125;,
  <span class="hljs-attr">"devDependencies"</span>: &#123;
    <span class="hljs-attr">"@nuxtjs/style-resources"</span>: <span class="hljs-string">"^1.0.0"</span>,
    <span class="hljs-attr">"vue-img-cutter"</span>: <span class="hljs-string">"^2.1.10"</span>
  &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<p>再次回到，问题所在 <code>我突然发现，网站刷新的时候打不开了，如果是路由跳转进去，是正常的</code>，清看开头，意思是直接进来的有问题，路由跳转的没问题</p>
<blockquote>
<p>在这个问题，需要搞懂nuxt.js的执行机制，nuxt.js主要解决了seo渲染问题，原理，先拿到数据，然后拼接成html模板，返回客户端，这样有了真实数据dom节点</p>
</blockquote>
<blockquote>
<p>我记得在axios.js 0.18之前的版本存在post参数丢失，参数传递了，后端接受不了，后来版本修复了此问题</p>
</blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Faxios-http.com%2Fzh%2Fdocs%2Fintro" target="_blank" rel="nofollow noopener noreferrer" title="https://axios-http.com/zh/docs/intro" ref="nofollow noopener noreferrer">Axios-中文文档</a></p>
<h4 data-id="heading-8">查看axios.js封装</h4>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// loca 其妙设计如果请求的过的数据直接取，不用发送请求</span>
<span class="hljs-keyword">const</span> post = <span class="hljs-keyword">async</span>(url, params, hand = &#123; <span class="hljs-attr">loca</span>: <span class="hljs-literal">false</span> &#125;) => &#123;
    <span class="hljs-keyword">if</span> (process.server) &#123;
        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> http.post(handLastUrl(url), params);
        <span class="hljs-keyword">return</span> res.data;
    &#125; <span class="hljs-keyword">else</span> &#123;
        <span class="hljs-keyword">let</span> key = url.replace(<span class="hljs-regexp">/\//g</span>, <span class="hljs-string">'A'</span>);
        <span class="hljs-keyword">if</span> (key && hand.loca && <span class="hljs-built_in">window</span>[key]) &#123;
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>[key];
        &#125;
        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> http.post(handLastUrl(url), params);
        <span class="hljs-keyword">if</span> (hand.loca) &#123;
            <span class="hljs-built_in">window</span>[key] = res.data;
        &#125;
        <span class="hljs-keyword">return</span> res.data;
    &#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<blockquote>
<p>通过排查由于axios默认发送数据时，数据格式是Request Payload，而并非我们常用的Form Data格式，PHP后端未必能正常获取到，所以在发送之前，需要使用qs模块对其进行处理</p>
</blockquote>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">import</span> qs <span class="hljs-keyword">from</span> <span class="hljs-string">'qs'</span>; <span class="hljs-comment">// 引用之前记得安装 npm i qs -S</span>
http.post(handLastUrl(url), qs.stringify(params));
<span class="copy-code-btn">复制代码</span></code></pre>
<h4 data-id="heading-9">方法二</h4>
<p>如果想快速解决问题， 把参数直接带在url，不过这种情况，最好放置一些类似id，数据比较少的数据进行传输</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">const</span> apiTaxonomicItems = <span class="hljs-function">(<span class="hljs-params">params</span>) =></span> &#123;
    <span class="hljs-keyword">return</span> post(<span class="hljs-string">`<span class="hljs-subst">$&#123;prefix&#125;</span>/taxonomic/items?id=<span class="hljs-subst">$&#123;params.id&#125;</span>`</span>, params)
&#125;
<span class="hljs-keyword">export</span> &#123;
    apiTaxonomicItems,
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<p>修改后，打包后编译</p>
<pre><code class="hljs language-bash copyable" lang="bash">npm run build // 客户端
<span class="copy-code-btn">复制代码</span></code></pre>
<p>打包完成后上传，.nuxt,static,nuxt.config.js,package.json,这四个文件</p>
<pre><code class="hljs language-bash copyable" lang="bash">pm2 restart all // 服务端 pm2重启
<span class="copy-code-btn">复制代码</span></code></pre>
<p>此刻网站可以正常访问，详情页面刷新也都没问题，<a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.itnavs.com%2F" target="_blank" rel="nofollow noopener noreferrer" title="https://www.itnavs.com/" ref="nofollow noopener noreferrer">【全栈导航】</a></p>
<h3 data-id="heading-10">写到最后</h3>
<p>今天是七夕节，祝大家节日快乐，</p>
<p>人总是这样，大道理都懂，小情绪却难以自控，从幼稚到成熟，从单纯到复杂，我们都曾不堪一击，也终将刀枪不入。</p></div>  
</div>
            