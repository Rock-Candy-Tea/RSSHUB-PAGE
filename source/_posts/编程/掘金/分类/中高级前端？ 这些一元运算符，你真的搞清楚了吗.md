
---
title: '中高级前端？ 这些一元运算符，你真的搞清楚了吗'
categories: 
 - 编程
 - 掘金
 - 分类
headimg: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/20d23ad43a56491c8ffbe283cd682a5a~tplv-k3u1fbpfcp-watermark.image'
author: 掘金
comments: false
date: Thu, 26 Aug 2021 16:13:46 GMT
thumbnail: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/20d23ad43a56491c8ffbe283cd682a5a~tplv-k3u1fbpfcp-watermark.image'
---

<div>   
<div class="markdown-body"><style>@charset "UTF-8";.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;margin-bottom:5px;font-size:30px;font-weight:500&#125;.markdown-body h1:before&#123;content:"#";margin-right:10px;color:#1976d2&#125;.markdown-body h2&#123;font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out&#125;.markdown-body h2:hover&#123;border-color:#1976d2&#125;.markdown-body h3&#123;font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:20px;font-weight:500&#125;.markdown-body h5&#123;font-size:16px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter&#123;text-transform:capitalize&#125;.markdown-body em&#123;text-emphasis:dot;text-emphasis-position:under&#125;.markdown-body img&#123;display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important&#125;.markdown-body hr&#123;position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible&#125;.markdown-body hr:after&#123;content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center&#125;.markdown-body code&#123;font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75;border-radius:0 4px&#125;.markdown-body pre>code&#123;font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent&#125;.markdown-body a:after&#123;content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat&#125;.markdown-body a:hover&#123;border-color:#027fff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after&#123;display:none!important&#125;.markdown-body table&#123;margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6&#125;.markdown-body table img&#123;box-shadow:none!important&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body del&#123;color:rgba(0,0,0,.6)&#125;.markdown-body blockquote&#123;position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out&#125;.markdown-body blockquote:hover&#123;border-color:#1976d2&#125;.markdown-body blockquote:after,.markdown-body blockquote:before&#123;position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6&#125;.markdown-body blockquote:before&#123;content:"“";top:4px;left:6px&#125;.markdown-body blockquote:after&#123;content:"”";right:8px;bottom:-8px&#125;.markdown-body blockquote>p,.markdown-body blockquote blockquote&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body details&#123;outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px&#125;.markdown-body details summary&#123;cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px&#125;.markdown-body details summary:hover::-webkit-details-marker&#123;color:#1976d2&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><h2 data-id="heading-0">前言</h2>
<p>一元运算符，不太起眼，作用很大，请别忽视她！ 走近她，爱上她！</p>
<h2 data-id="heading-1">定义</h2>
<p>只需要一个操作数的运算符称为一元运算符。</p>
<p>还是代码容易懂：</p>
<pre><code class="hljs language-js copyable" lang="js">+<span class="hljs-number">1</span> <span class="hljs-comment">// 一个操作数</span>

<span class="hljs-number">1</span> + <span class="hljs-number">2</span> <span class="hljs-comment">// 两个操作数</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-2">一元运算符清单</h2>





































<table><thead><tr><th>运算符</th><th>说明</th></tr></thead><tbody><tr><td><strong><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FOperators%2Fdelete" target="_blank" rel="nofollow noopener noreferrer" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/delete" ref="nofollow noopener noreferrer">delete</a></strong></td><td>删除对象的属性</td></tr><tr><td><strong><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FOperators%2Fvoid" target="_blank" rel="nofollow noopener noreferrer" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/void" ref="nofollow noopener noreferrer">void</a></strong></td><td>对给定的表达式进行求值，然后返回 undefined</td></tr><tr><td><strong><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FOperators%2Ftypeof" target="_blank" rel="nofollow noopener noreferrer" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/typeof" ref="nofollow noopener noreferrer">typeof</a></strong></td><td>返回数据的基本类型</td></tr><tr><td><strong><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FOperators%2FUnary_plus" target="_blank" rel="nofollow noopener noreferrer" title="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Unary_plus" ref="nofollow noopener noreferrer">+</a></strong></td><td>将操作转换为Number类型</td></tr><tr><td><strong><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FOperators%2FUnary_negation" target="_blank" rel="nofollow noopener noreferrer" title="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Unary_negation" ref="nofollow noopener noreferrer">-</a></strong></td><td>将操作转换为Number类型并取反</td></tr><tr><td><strong><a href="https://link.juejin.cn/?target=https%3A%2F%2Ftc39.es%2Fecma262%2F%23sec-bitwise-not-operator" target="_blank" rel="nofollow noopener noreferrer" title="https://tc39.es/ecma262/#sec-bitwise-not-operator" ref="nofollow noopener noreferrer">~</a></strong></td><td>按位非运算符</td></tr><tr><td><strong><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FOperators%2FLogical_NOT" target="_blank" rel="nofollow noopener noreferrer" title="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_NOT" ref="nofollow noopener noreferrer">!</a></strong></td><td>逻辑非运算符</td></tr></tbody></table>
<h2 data-id="heading-3">delete</h2>
<h3 data-id="heading-4">基本说明</h3>
<p><strong>delete 操作符用于删除对象的某个属性。</strong><br>
对于所有情况都是true, 除非属性是一个自身的 不可配置的属性。<br>
在这种情况下，</p>
<ul>
<li>非严格模式返回 false。</li>
<li>在严格模式下，如果是属性是一个自己不可配置的属性，会抛出TypeError。</li>
</ul>
<p><strong>什么是不可配置属性</strong>, 看一段代码就知道：</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">var</span> Employee = &#123;&#125;;
<span class="hljs-built_in">Object</span>.defineProperty(Employee, <span class="hljs-string">'name'</span>, &#123; 
    <span class="hljs-attr">configurable</span>: <span class="hljs-literal">false</span>
&#125;);

<span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">delete</span> Employee.name);  <span class="hljs-comment">// returns false</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<p>通过<code>Object.defineProperty</code>设置 <code>configurable: false</code></p>
<h3 data-id="heading-5">注意事项</h3>
<p>除了很多属性删除不掉外，还有下面要注意：</p>
<ol>
<li>
<p>delete 删除不了原型上的属性</p>
</li>
<li>
<p>当你删除一个数组元素时，数组的长度不受影响。</p>
</li>
<li>
<p><strong>delete 方法会可能破坏对象的形状，同样会导致 V8 为该对象重新生成新的隐藏类</strong>，导致性能降低。</p>
<p>关于delete的性能问题更多可参见 <a href="https://juejin.cn/post/6972702293636415519" target="_blank" title="https://juejin.cn/post/6972702293636415519">Why系列：如无必要, don't 使用delete</a></p>
</li>
<li>
<p>在严格模式下，如果对一个变量的直接引用、函数的参数或者函数名使用delete操作，将会抛出语法错误（SyntaxError）</p>
</li>
</ol>
<pre><code class="copyable">function func(param) &#123;
  // SyntaxError in strict mode.
  console.log(delete param); // false
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-6">实战</h3>
<p>我们平时可能碰不到使用<code>delete</code>的场景。<br>
我们临时在对象上添加一些临时方法或者中间状态值，进行一些列操作后，再删除这些属性。</p>
<p>来一个经典案列，手写<code>call</code>:</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// 不考虑node环境, 不考虑严格模式, 不考虑被freeze</span>
<span class="hljs-built_in">Function</span>.prototype.call = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context</span>)</span>&#123;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">this</span> !== <span class="hljs-string">'function'</span>) &#123;
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'not a funciton'</span>)
    &#125;    
    <span class="hljs-keyword">var</span> argsArr = [];
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i< <span class="hljs-built_in">arguments</span>.length; i++)&#123;
        argsArr.push(<span class="hljs-string">"arguments["</span> + i + <span class="hljs-string">"]"</span>);
    &#125;    
    <span class="hljs-keyword">var</span>  context  = context == <span class="hljs-literal">null</span> ? <span class="hljs-built_in">window</span> : <span class="hljs-built_in">Object</span>(context);   
    <span class="hljs-comment">// 保留现场</span>
    <span class="hljs-keyword">var</span> hasFn =  (<span class="hljs-string">"__fn__"</span> <span class="hljs-keyword">in</span> context); <span class="hljs-comment">// 不推荐做法</span>
    <span class="hljs-keyword">var</span> originFn;
    <span class="hljs-keyword">if</span>(hasFn)&#123;
       originFn = context.__fn__;
    &#125;; 
    
    context.__fn__ =  <span class="hljs-built_in">this</span>;
    
    <span class="hljs-keyword">var</span> code = <span class="hljs-string">"context.__fn__("</span> +  argsArr.join(<span class="hljs-string">","</span>)  +  <span class="hljs-string">")"</span>;
    <span class="hljs-keyword">var</span> result = <span class="hljs-built_in">eval</span>(code);

    <span class="hljs-keyword">if</span>(hasFn)&#123;
        context.__fn__ = originFn
    &#125;<span class="hljs-keyword">else</span> &#123;
        <span class="hljs-keyword">delete</span> context.__fn__;
    &#125;
    <span class="hljs-keyword">return</span> result;    
&#125;

<span class="copy-code-btn">复制代码</span></code></pre>
<p>我们把<code>context</code>的属性<code>__fn__</code>来指向当前函数，执行完毕之后，根据之前是否也有<code>__fn__</code>属性，来决定是<code>delete</code>还是复原原值。</p>
<h2 data-id="heading-7">void</h2>
<h3 data-id="heading-8">基本说明</h3>
<p>void 运算符 对给定的表达式进行求值，然后返回 undefined。</p>
<h3 data-id="heading-9">使用场景</h3>
<p>老版本的的一些浏览器 undefined 是可以被改写的，看图:<br>
这是我用IE11仿真IE8的效果</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/20d23ad43a56491c8ffbe283cd682a5a~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>所以，所以在这种情况下 <code>void 0</code> 比<code>undefined</code>靠谱。
<code>void</code> 这个一元运算法除了这个 准备返回 <code>undefined</code>外， 还有另外两件常见的用途：</p>
<ol>
<li>
<p>a标签的href，就是什么都不做<br>
<code><a href="javascript:void(0);"></code></p>
</li>
<li>
<p>IIFE立即执行</p>
</li>
</ol>
<pre><code class="hljs language-js copyable" lang="js">;<span class="hljs-keyword">void</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">msg</span>)</span>&#123;
    <span class="hljs-built_in">console</span>.log(msg)
&#125;(<span class="hljs-string">"你好啊"</span>);

<span class="copy-code-btn">复制代码</span></code></pre>
<p>当然更直接的方式是:</p>
<pre><code class="hljs language-js copyable" lang="js">;(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">msg</span>)</span>&#123;
    <span class="hljs-built_in">console</span>.log(msg)
&#125;)(<span class="hljs-string">"你好啊"</span>);
<span class="copy-code-btn">复制代码</span></code></pre>
<p>因箭头函数的诞生，有一个新的用途：<a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FOperators%2Fvoid%23%25E5%259C%25A8%25E7%25AE%25AD%25E5%25A4%25B4%25E5%2587%25BD%25E6%2595%25B0%25E4%25B8%25AD%25E9%2581%25BF%25E5%2585%258D%25E6%25B3%2584%25E6%25BC%258F" target="_blank" rel="nofollow noopener noreferrer" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/void#%E5%9C%A8%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E4%B8%AD%E9%81%BF%E5%85%8D%E6%B3%84%E6%BC%8F" ref="nofollow noopener noreferrer">在箭头函数中避免泄漏</a></p>
<pre><code class="copyable">button.onclick = () => void doSomething();
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-10"><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FOperators%2Ftypeof" target="_blank" rel="nofollow noopener noreferrer" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/typeof" ref="nofollow noopener noreferrer">typeof</a></h2>
<p>操作符返回一个字符串，表示未经计算的操作数的类型。</p>
<p>ES5以前的基础数据类型大家倒背如流，<code>typeof null === "object" </code>这个梗自然也不用提。<br>
<a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FGlossary%2FSymbol" target="_blank" rel="nofollow noopener noreferrer" title="https://developer.mozilla.org/zh-CN/docs/Glossary/Symbol" ref="nofollow noopener noreferrer">Symbol</a> (ECMAScript 2015 新增) 也是常客，<a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FGlossary%2FBigInt" target="_blank" rel="nofollow noopener noreferrer" title="https://developer.mozilla.org/zh-CN/docs/Glossary/BigInt" ref="nofollow noopener noreferrer">BigInt</a> 也应该不陌生。</p>
<pre><code class="copyable">typeof BigInt(10) // bigint
typeof Symbol.for("key") // symbol
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-11">暂时性死区</h3>
<p>加入了块级作用域的 <code>let</code> 和 <code>const</code> 之后，在其被声明之前对块中的 let 和 const 变量使用 typeof 会抛出一个 ReferenceError。 我们称之为 <strong>暂时性死区</strong></p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">typeof</span> newLetVariable; <span class="hljs-comment">// ReferenceError</span>
<span class="hljs-keyword">typeof</span> newConstVariable; <span class="hljs-comment">// ReferenceError</span>
<span class="hljs-keyword">typeof</span> newClass; <span class="hljs-comment">// ReferenceError</span>

<span class="hljs-keyword">let</span> newLetVariable;
<span class="hljs-keyword">const</span> newConstVariable = <span class="hljs-string">'hello'</span>;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">newClass</span></span>&#123;&#125;;
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-12">特别的<code>document.all</code></h3>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">typeof</span> <span class="hljs-built_in">document</span>.all === <span class="hljs-string">'undefined'</span>; <span class="hljs-comment">// true</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<p><code>document.all</code>返回页面的所有元素，应该说不算是一个标准的API.<br>
IE4时代的产物，这个甚至作为判断是不是IE浏览器的方法。</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">if</span>(<span class="hljs-built_in">document</span>.all)&#123;
    <span class="hljs-comment">//is IE</span>
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<p>其他浏览器厂商觉得这个<code>document.all</code>很有用，但是又不想影响现有运行的网站。 所以， document.all 返回的是所有元素，但是<code>typeof</code>的值却是<code>undefined</code>，是不是有点好笑。</p>
<p>甚至到IE10都没改变：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/23a70788378141bc8614a0c65b08e5d5~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>IE11终结了这种状态：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/363395833b624c63beb3fe3c1657d0a4~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h3 data-id="heading-13">判断数据类型的方法</h3>
<ol>
<li>typeof<br>
识别基础数据类型和引用数据类型。</li>
<li>instanceof<br>
识别引用类型，基本原理查询原型链。</li>
<li>constructor<br>
识别引用类型，但是这个玩意不准，contructor可以被改写， 次选方案吧。</li>
<li>Object.prototype.toString<br>
识别基础数据类型和引用数据类型。</li>
<li>鸭子类型检测<br>
我们看看周下载量达到<strong>800万</strong> <code>is-promise</code>库的源码</li>
</ol>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isPromise</span>(<span class="hljs-params">obj</span>) </span>&#123;
  <span class="hljs-keyword">return</span> !!obj && (<span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">'object'</span> || <span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">'function'</span>) 
  && <span class="hljs-keyword">typeof</span> obj.then === <span class="hljs-string">'function'</span>;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<p>当然结合使用效果更佳。</p>
<h2 data-id="heading-14"><strong><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FOperators%2FUnary_plus" target="_blank" rel="nofollow noopener noreferrer" title="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Unary_plus" ref="nofollow noopener noreferrer">+</a></strong> 和 <strong><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FOperators%2FUnary_negation" target="_blank" rel="nofollow noopener noreferrer" title="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Unary_negation" ref="nofollow noopener noreferrer">-</a></strong></h2>
<p>先来一个趣味题：  求最后的输出结果</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">var</span> a = b = <span class="hljs-number">1</span>;
<span class="hljs-built_in">console</span>.log(+a++ + + +b++)  <span class="hljs-comment">// 2  等同于 +a + + +b  == a + b</span>

<span class="hljs-keyword">var</span> a = b = <span class="hljs-number">1</span>;
<span class="hljs-built_in">console</span>.log(++a+ + + ++b)  <span class="hljs-comment">// 4   等同于 (++a)+ + + (++b) ==  a + b</span>

<span class="hljs-keyword">var</span> a = b = <span class="hljs-number">1</span>;
<span class="hljs-built_in">console</span>.log(-a-- + - -b--) <span class="hljs-comment">// 0   等同于 -a + - -b = -a + b</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<p>一元 + 运算符将其操作数转换为数字类型。</p>









































<table><thead><tr><th>参数类型</th><th>结果</th></tr></thead><tbody><tr><td>Undefined</td><td>NaN</td></tr><tr><td>Null</td><td>+0</td></tr><tr><td>Boolean</td><td>true返回1，反之返回0</td></tr><tr><td>String</td><td>空字符串变为0，如果出现任何一个非有效数字字符，结果都是NaN</td></tr><tr><td>Number</td><td>不转换，返回原值</td></tr><tr><td>Symbol</td><td>TypeError</td></tr><tr><td>BigInt</td><td>TypeError</td></tr><tr><td>Object</td><td>toPrimitive=>valueOf=>toString=>Number()</td></tr></tbody></table>
<ol>
<li>先调用对象的 Symbol.toPrimitive 这个方法，如果不存在这个方法</li>
<li>再调用对象的 valueOf 获取原始值，如果获取的值不是原始值</li>
<li>再调用对象的 toString 把其变为字符串</li>
<li>最后再把字符串基于Number()方法转换为数字</li>
</ol>
<p>更多转换细节<a href="https://link.juejin.cn/?target=https%3A%2F%2Ftc39.es%2Fecma262%2Fmultipage%2Fecmascript-language-expressions.html%23sec-unary-plus-operator" target="_blank" rel="nofollow noopener noreferrer" title="https://tc39.es/ecma262/multipage/ecmascript-language-expressions.html#sec-unary-plus-operator" ref="nofollow noopener noreferrer"> Unary + Operator</a></p>
<p>一元<code>-</code>和<code>+</code> 极其类似，只不过最后再取个反。</p>
<h2 data-id="heading-15"><strong><a href="https://link.juejin.cn/?target=https%3A%2F%2Ftc39.es%2Fecma262%2F%23sec-bitwise-not-operator" target="_blank" rel="nofollow noopener noreferrer" title="https://tc39.es/ecma262/#sec-bitwise-not-operator" ref="nofollow noopener noreferrer">~</a></strong></h2>
<p>将其操作数的位反转, 这可能不太好理解。
给个公式你就能明白了</p>
<pre><code class="hljs language-js copyable" lang="js">~x = -(x + <span class="hljs-number">1</span>)
<span class="copy-code-btn">复制代码</span></code></pre>
<p>其还会去掉小数位, 是去掉，<strong>不是四舍五入</strong></p>
<pre><code class="hljs language-js copyable" lang="js">~<span class="hljs-number">2.3</span>  <span class="hljs-comment">// -3</span>
~<span class="hljs-number">2.6</span>  <span class="hljs-comment">// -3</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<p>来个例子<code>~5</code> = <code>-(5+1)</code> = <code>-6</code></p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-built_in">console</span>.log(~<span class="hljs-number">5</span>);<span class="hljs-comment">// -6</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-16">取反</h3>
<p>那么我们就可以根据这写一个取反函数 :</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reveNumber</span> (<span class="hljs-params">val: number</span>) </span>&#123;
  <span class="hljs-keyword">return</span> ~val + <span class="hljs-number">1</span>
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<p>推导：</p>
<pre><code class="hljs language-js copyable" lang="js">~val + <span class="hljs-number">1</span> = -(val + <span class="hljs-number">1</span>) + <span class="hljs-number">1</span> = -val - <span class="hljs-number">1</span> + <span class="hljs-number">1</span>  = -val
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-17">取整数位</h3>
<p>这个我想肯定有很多人用过</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getIntPart</span>(<span class="hljs-params">val: number</span>)</span>&#123;
    <span class="hljs-keyword">return</span> ~~val;
&#125;

toInt(<span class="hljs-number">3.4</span>)  <span class="hljs-comment">// 3</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<p><strong>推导:</strong><br>
<strong>因为~会丢掉小数部分</strong>，来回折腾两次就只剩下整数部分啦。</p>
<pre><code class="hljs language-js copyable" lang="js"> ~~val = ~(-(val + <span class="hljs-number">1</span>))  = -(-(val + <span class="hljs-number">1</span>) + <span class="hljs-number">1</span>) = -(-val -<span class="hljs-number">1</span> + <span class="hljs-number">1</span>) = val
<span class="copy-code-btn">复制代码</span></code></pre>
<p>额外注意：<br>
由于对数字<code>~-1</code>和<code>~4294967295</code> (232-1) 使用32位表示形式，结果均为0。</p>
<h2 data-id="heading-18"><strong><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FOperators%2FLogical_NOT" target="_blank" rel="nofollow noopener noreferrer" title="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_NOT" ref="nofollow noopener noreferrer">!</a></strong></h2>
<p>取反，返回布尔值。</p>
<p>下面情况返回真，其余为假：</p>
<ul>
<li><code>null</code></li>
<li><code>NaN</code></li>
<li><code>0</code></li>
<li><code>""</code> or <code>''</code> or <code>``</code></li>
<li><code>undefined</code></li>
</ul>
<h3 data-id="heading-19"><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FOperators%2FLogical_NOT%23double_not_!!" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Logical_NOT#double_not_!!" target="_blank" rel="nofollow noopener noreferrer" ref="nofollow noopener noreferrer">双非(<code>!!</code>)</a></h3>
<p>两个<code>！</code>运算符显式地强制将任何值转换为相应的布尔值。</p>
<pre><code class="hljs language-js copyable" lang="js">!!(&#123;&#125;) <span class="hljs-comment">// true</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<p>我们经常喜欢用 <code>!</code>和 <code>!!</code>进行是非判断，其实是不严密，这点一定要清除，所以最好加上一些前置判断或者明确的知道数据类型。</p>
<h3 data-id="heading-20">混淆之数字</h3>
<p>我们可以通过一些<strong>符号生成数字和字母</strong>，在混淆的时候有用，比如：</p>
<pre><code class="hljs language-js copyable" lang="js">+[]  <span class="hljs-comment">// 0</span>
+!+[] <span class="hljs-comment">// 1 </span>
+!+[]+!+[] <span class="hljs-comment">// 2</span>
(![]+[])[+!![]] <span class="hljs-comment">// a</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<p>是不是很有意思, 主要思路就是类型转换+数组下标</p>
<h2 data-id="heading-21">写在最后</h2>
<p>如果你觉得不错，你的一赞一评就是我前行的最大动力。</p>
<p><strong>技术交流群请到 <a href="https://juejin.cn/pin/6994350401550024741" title="https://juejin.cn/pin/6994350401550024741" target="_blank">这里来</a>。
或者添加我的微信 dirge-cloud，一起学习。</strong></p>
<h2 data-id="heading-22">参考引用</h2>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FOperators%23unary_operators" target="_blank" rel="nofollow noopener noreferrer" title="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators#unary_operators" ref="nofollow noopener noreferrer">一元运算符</a><br>
<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Flizhongzhen11%2Flizz-blog%2Fissues%2F72" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/lizhongzhen11/lizz-blog/issues/72" ref="nofollow noopener noreferrer">重学js —— 一元运算符（delete/void/typeof/+/-/~/!）</a><br>
<a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.w3cplus.com%2Fjavascript%2Fdeep-in-delete.html" target="_blank" rel="nofollow noopener noreferrer" title="https://www.w3cplus.com/javascript/deep-in-delete.html" ref="nofollow noopener noreferrer">深入理解 JavaScript 中的 delete 操作符</a><br>
<a href="https://link.juejin.cn/?target=http%3A%2F%2Fperfectionkills.com%2Funderstanding-delete%2F" target="_blank" rel="nofollow noopener noreferrer" title="http://perfectionkills.com/understanding-delete/" ref="nofollow noopener noreferrer">深入分析 delete</a><br>
<a href="https://juejin.cn/post/6844903693364674567" target="_blank" title="https://juejin.cn/post/6844903693364674567">~，&，|，^等位运算符在JavaScript中的一些应用</a><br>
<a href="https://juejin.cn/post/6847902222978662407" target="_blank" title="https://juejin.cn/post/6847902222978662407">记一次校招面试回忆，迟来的位运算符小解</a><br>
<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Falongite%2Fimplicitjs" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/alongite/implicitjs" ref="nofollow noopener noreferrer">implicit.js</a></p>
</blockquote></div>  
</div>
            