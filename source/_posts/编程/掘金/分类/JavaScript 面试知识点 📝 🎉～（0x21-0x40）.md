
---
title: 'JavaScript é¢è¯•çŸ¥è¯†ç‚¹ ğŸ“ ğŸ‰ï½ï¼ˆ0x21-0x40ï¼‰'
categories: 
 - ç¼–ç¨‹
 - æ˜é‡‘
 - åˆ†ç±»
headimg: 'https://picsum.photos/400/300?random=4787'
author: æ˜é‡‘
comments: false
date: Sat, 28 Aug 2021 19:57:59 GMT
thumbnail: 'https://picsum.photos/400/300?random=4787'
---

<div>   
<div class="markdown-body html cache"><style>@charset "UTF-8";.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:#353535&#125;.markdown-body h1&#123;padding-bottom:4px;font-size:30px&#125;.markdown-body h1,.markdown-body h2&#123;margin-top:36px;margin-bottom:10px;line-height:1.5;color:#005bb7&#125;.markdown-body h2&#123;position:relative;padding-left:16px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h2:before&#123;content:"ã€Œ";position:absolute;top:-6px;left:-10px&#125;.markdown-body h2:after&#123;content:"ã€";position:absolute;top:6px;right:auto&#125;.markdown-body h3&#123;position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:#005bb7;padding-left:6px&#125;.markdown-body h3:before&#123;content:"Â»";padding-right:6px;color:#2196f3&#125;.markdown-body h4&#123;margin-top:24px;font-size:16px&#125;.markdown-body h4,.markdown-body h5&#123;padding-bottom:0;margin-bottom:10px;line-height:1.5;color:#005bb7;padding-left:6px&#125;.markdown-body h5&#123;margin-top:18px;font-size:14px&#125;.markdown-body h6&#123;padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:#005bb7;padding-left:6px&#125;.markdown-body p&#123;line-height:inherit;margin-top:16px;margin-bottom:16px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#007fff,rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),#007fff);border-width:0;overflow:visible&#125;.markdown-body hr:after&#123;content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center&#125;.markdown-body code&#123;padding:.065em .4em;font-size:.87em;color:#c2185b;word-break:break-word;overflow-x:auto;background-color:#fff4f4;border-radius:2px&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8&#125;.markdown-body pre>code::-webkit-scrollbar&#123;width:4px;height:4px&#125;.markdown-body pre>code::-webkit-scrollbar-track&#123;background-color:#bedcff&#125;.markdown-body pre>code::-webkit-scrollbar-thumb&#123;background-color:#2196f3;border-radius:10px&#125;.markdown-body a&#123;position:relative;text-decoration:none;color:#3da8f5;border-bottom:1px solid #bedcff&#125;.markdown-body a:hover&#123;color:#007fff;border-bottom-color:#007fff&#125;.markdown-body a:active&#123;color:#007fff&#125;.markdown-body a:after&#123;position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid #bedcff;transition:top .3s,opacity .3s;transform:translateZ(0)&#125;.markdown-body a:hover:after&#123;top:0;opacity:1;border-bottom-color:#007fff&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #c3e0fd;border-spacing:0;border-collapse:collapse&#125;.markdown-body table thead&#123;color:#000;text-align:left;font-size:14px;background:#f6f6f6&#125;.markdown-body table tr:nth-child(2n)&#123;background-color:#f7fbff&#125;.markdown-body table tr:hover&#123;background-color:#e0edf7&#125;.markdown-body table td,.markdown-body table th&#123;padding:12px 8px;line-height:24px;border:1px solid #c3e0fd&#125;.markdown-body table th&#123;color:#005bb7;background-color:#dff0ff&#125;.markdown-body table td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#8c8c8c;border-left:4px solid #2196f3;background-color:#f0fdff;padding:1px 20px;margin:22px 0&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body b,.markdown-body blockquote>b,.markdown-body blockquote>strong,.markdown-body strong&#123;color:#2196f3&#125;.markdown-body em,.markdown-body i&#123;color:#4fc3f7&#125;.markdown-body del&#123;color:#ccc&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:4px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body details>summary&#123;outline:none;color:#005bb7;font-size:20px;font-weight:bolder;border-bottom:1px solid #bedcff;cursor:pointer&#125;.markdown-body details>p&#123;padding:10px 20px;margin:10px 0 0;color:#666;background-color:#f0fdff;border:2px dashed #2196f3&#125;.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection&#123;color:#005bb7;background-color:rgba(160,200,255,.15)&#125;.markdown-body p::selection&#123;color:#c80000&#125;.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection&#123;background-color:transparent&#125;.markdown-body code::selection&#123;background-color:#ffeaeb&#125;.markdown-body pre>code::selection&#123;background-color:rgba(160,200,255,.25)&#125;.markdown-body ol ::selection,.markdown-body ul ::selection&#123;background-color:rgba(160,200,255,.15)&#125;.markdown-body .contains-task-list&#123;padding-left:14px;list-style:none&#125;.markdown-body .contains-task-list input[type=checkbox]&#123;position:relative&#125;.markdown-body .contains-task-list input[type=checkbox]:before&#123;content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1&#125;.markdown-body .contains-task-list input[type=checkbox]:checked:after&#123;content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><h2 data-id="heading-0">TOC</h2>
<ul>
<li><a href="https://juejin.cn/post/7001664785645305887" target="_blank" title="https://juejin.cn/post/7001664785645305887">JavaScript é¢è¯•çŸ¥è¯†ç‚¹ ğŸ“ ğŸ‰ï½ï¼ˆ0x01-0x20ï¼‰</a></li>
<li><em><strong>> <a href="https://juejin.cn/post/7001673224350072845" target="_blank" title="https://juejin.cn/post/7001673224350072845">JavaScript é¢è¯•çŸ¥è¯†ç‚¹ ğŸ“ ğŸ‰ï½ï¼ˆ0x21-0x40ï¼‰</a></strong></em></li>
<li><a href="https://juejin.cn/post/7001689046213165093" target="_blank" title="https://juejin.cn/post/7001689046213165093">JavaScript é¢è¯•çŸ¥è¯†ç‚¹ ğŸ“ ğŸ‰ï½ï¼ˆ0x41-0x60ï¼‰</a></li>
<li><a href="https://juejin.cn/post/7001694334043029541" target="_blank" title="https://juejin.cn/post/7001694334043029541">JavaScript é¢è¯•çŸ¥è¯†ç‚¹ ğŸ“ ğŸ‰ï½ï¼ˆ0x61-0x80ï¼‰</a></li>
</ul>
<h3 data-id="heading-1">è®°å¾—<strong>ä¸‰è¿+å…³æ³¨</strong>å—·å—·ï½</h3>
<h2 data-id="heading-2">0x21 ä»€ä¹ˆæ˜¯ Post Message</h2>
<p>Worker æ¥å£çš„ <code>postMessage()</code> æ–¹æ³•å¯ä»¥å‘ Worker çš„å†…éƒ¨ä½œç”¨åŸŸå‘é€ä¸€ä¸ªæ¶ˆæ¯ï¼Œå‚æ•°æ˜¯è¿™æ˜¯è¦å‘é€ç»™ Worker çš„æ•°æ®ã€‚æ•°æ®å¯ä»¥æ˜¯ç”±ç»“æ„åŒ–å…‹éš†ç®—æ³•å¤„ç†çš„ä»»ä½•å€¼æˆ– JavaScript å¯¹è±¡ï¼ŒåŒ…æ‹¬å¾ªç¯å¼•ç”¨ã€‚</p>
<p>Worker å¯ä»¥ä½¿ç”¨ <code>DedicatedWorkerGlobalScope.postMessage</code> æ–¹æ³•å°†ä¿¡æ¯å‘é€å›ç”Ÿæˆå®ƒçš„çº¿ç¨‹ã€‚</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-comment">// Worker çº¿ç¨‹ï¼š</span>
worker.postMessage(&#123;
    <span class="hljs-attr">msg</span>: <span class="hljs-string">"From Worker çº¿ç¨‹"</span>,
&#125;);
worker.onmessage = <span class="hljs-function">(<span class="hljs-params">event</span>) =></span> &#123;
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"ä¸»çº¿ç¨‹ï¼š"</span> + event.data);
&#125;;

<span class="hljs-keyword">var</span> worker = <span class="hljs-keyword">new</span> Worker(<span class="hljs-string">"./worker.md.js"</span>);
worker.postMessage(<span class="hljs-string">"From ä¸»çº¿ç¨‹"</span>);
worker.onmessage = <span class="hljs-function">(<span class="hljs-params">event</span>) =></span> &#123;
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Worker çº¿ç¨‹ï¼š"</span> + event.data);
&#125;;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-3">0x22 åŒæ„Ÿå¹å·çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>åŒæ„Ÿå¹å·ï¼ˆie. åŒå¦å®šï¼Œ<code>!!</code>ï¼‰èƒ½å¤Ÿç¡®ä¿ç»“æœç±»å‹æ˜¯å¸ƒå°”å€¼ã€‚å¦‚æœå®ƒæ˜¯å‡çš„ï¼ˆä¾‹å¦‚ <code>0</code>ã€<code>null</code>ã€<code>undefined</code> ç­‰ï¼‰ï¼Œå®ƒå°†æ˜¯ <code>false</code>ï¼Œå¦åˆ™ä¸º <code>true</code>ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¡¨è¾¾å¼æµ‹è¯• IE ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> isIE8 = <span class="hljs-literal">false</span>;
isIE8 = !!navigator.userAgent.match(<span class="hljs-regexp">/MSIE 8.0/</span>);
<span class="hljs-built_in">console</span>.log(isIE8); <span class="hljs-comment">// true / false</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å¦‚æœä¸ç”¨åŒå¦å®šï¼Œè¿”å›çš„å°±æ˜¯åŸæ¥çš„å€¼ï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-built_in">console</span>.log(navigator.userAgent.match(<span class="hljs-regexp">/MSIE 8.0/</span>)); <span class="hljs-comment">// Array [] / null</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<blockquote>
<p><strong>æç¤ºï¼š</strong> <code>!!</code> ä¸æ˜¯ä¸ªæ–°çš„æ“ä½œç¬¦ï¼Œåªæ˜¯ä¸¤ä¸ªå¦å®šæ“ä½œç¬¦ï¼</p>
</blockquote>
<h2 data-id="heading-4">0x23 ä»€ä¹ˆæ˜¯ delete æ“ä½œç¬¦ï¼Ÿ</h2>
<p><code>delete</code> å…³é”®å­—å¯ç”¨äºåˆ é™¤ä¸€ä¸ª Object çš„å±æ€§ï¼Œæˆ–è€…æ˜¯å€¼ï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> user = &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">"John"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span> &#125;;
<span class="hljs-keyword">delete</span> user.age;

<span class="hljs-built_in">console</span>.log(user); <span class="hljs-comment">// &#123;name: "John"&#125;</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-5">0x24 ä»€ä¹ˆæ˜¯ <code>typeof</code> æ“ä½œç¬¦</h2>
<p><code>typeof</code> è¿ç®—ç¬¦è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒæŒ‡ç¤ºå˜é‡æˆ–è¡¨è¾¾å¼çš„ç±»å‹ï¼Œæ‰€æœ‰çš„å¯èƒ½çš„è¾“å‡ºå¦‚ä¸‹è¡¨ï¼š</p>













































<table><thead><tr><th>ç±»å‹</th><th>ç»“æœ</th></tr></thead><tbody><tr><td>Undefined</td><td>"undefined"</td></tr><tr><td>Null</td><td>"object"ï¼ˆè§ä¸‹æ–‡ï¼‰</td></tr><tr><td>Boolean</td><td>"boolean"</td></tr><tr><td>Number</td><td>"number"</td></tr><tr><td>BigIntï¼ˆECMAScript 2020 æ–°å¢ï¼‰</td><td>"bigint"</td></tr><tr><td>String</td><td>"string"</td></tr><tr><td>Symbolï¼ˆECMAScript 2015 æ–°å¢ï¼‰</td><td>"symbol"</td></tr><tr><td>Function å¯¹è±¡ï¼ˆæŒ‰ç…§ ECMA-262 è§„èŒƒå®ç° [[Call]]ï¼‰</td><td>"function"</td></tr><tr><td>æ‰€æœ‰å…¶ä»–å¯¹è±¡</td><td>"object"</td></tr></tbody></table>
<h3 data-id="heading-6">24.1 typeof null</h3>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">typeof</span> <span class="hljs-literal">null</span>); <span class="hljs-comment">// "object"</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>åœ¨ JavaScript æœ€åˆçš„å®ç°ä¸­ï¼ŒJavaScript ä¸­çš„å€¼æ˜¯ç”±ä¸€ä¸ªè¡¨ç¤ºç±»å‹çš„æ ‡ç­¾å’Œå®é™…æ•°æ®å€¼è¡¨ç¤ºçš„ã€‚å¯¹è±¡çš„ç±»å‹æ ‡ç­¾æ˜¯ 0ã€‚ç”±äº null ä»£è¡¨çš„æ˜¯ç©ºæŒ‡é’ˆï¼ˆå¤§å¤šæ•°å¹³å°ä¸‹å€¼ä¸º 0x00ï¼‰ï¼Œå› æ­¤ï¼Œnull çš„ç±»å‹æ ‡ç­¾æ˜¯ 0ï¼Œ<code>typeof null</code> ä¹Ÿå› æ­¤è¿”å› <code>"object"</code>ã€‚</p>
<h2 data-id="heading-7">0x25 window å’Œ document çš„åŒºåˆ«ï¼ŸBOM å’Œ DOMï¼Ÿ</h2>
<p>é¦–å…ˆï¼Œä¸¤è€…ä¹‹é—´çš„é€»è¾‘æ˜¯ï¼š<code>window -> document</code>ã€‚</p>
<h3 data-id="heading-8">25.1 <code>window</code> å¯¹è±¡</h3>
<p><code>window</code> æ˜¯æµè§ˆå™¨ä¸­çš„å…¨å±€ <code>this</code> æŒ‡å‘ï¼Œä»£è¡¨æµè§ˆå™¨ä¸­çš„ä¸€ä¸ªæ‰“å¼€çš„çª—å£æˆ–è€…æ¡†æ¶ã€‚<code>window</code> å¯¹è±¡ä¼šåœ¨æˆ–è€…æ¯æ¬¡å‡ºç°æ—¶è¢«è‡ªåŠ¨åˆ›å»ºã€‚<code>window</code> å¯¹è±¡å®ç°äº†æ ¸å¿ƒ JavaScript æ‰€å®šä¹‰çš„å…¨å±€å±æ€§å’Œæ–¹æ³•ï¼Œå¦‚ <code>window.alert()</code>ã€<code>window.print()</code>â€¦â€¦</p>
<h3 data-id="heading-9">25.2 <code>document</code> å¯¹è±¡</h3>
<p>ä»£è¡¨æ•´ä¸ª HTML æ–‡æ¡£ï¼Œå¯ä»¥ç”¨æ¥è®¿é—®é¡µé¢ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œå¯ä»¥é€šè¿‡ <code>window.document</code> å±æ€§è®¿é—®è¯¥å¯¹è±¡ã€‚</p>
<h3 data-id="heading-10">25.3 BOM æµè§ˆå™¨å¯¹è±¡æ¨¡å‹</h3>
<p>æä¾›äº†ç‹¬ç«‹äºå†…å®¹è€Œä¸æµè§ˆå™¨çª—å£è¿›è¡Œäº¤äº’çš„å¯¹è±¡ã€‚æè¿°äº†ä¸æµè§ˆå™¨è¿›è¡Œäº¤äº’çš„æ–¹æ³•å’Œæ¥å£ï¼Œå¯ä»¥å¯¹æµè§ˆå™¨çª—å£è¿›è¡Œè®¿é—®å’Œæ“ä½œï¼Œè­¬å¦‚å¯ä»¥å¼¹å‡ºæ–°çš„çª—å£ï¼Œæ”¹å˜çŠ¶æ€æ ä¸­çš„æ–‡æœ¬ã€‚</p>
<h3 data-id="heading-11">25.4 DOM æ–‡æ¡£å¯¹è±¡æ¨¡å‹</h3>
<p>DOM æ˜¯é’ˆå¯¹ HTML çš„åŸºäºæ ‘çš„ APIã€‚æè¿°äº†å¤„ç†ç½‘é¡µå†…å®¹çš„æ–¹æ³•å’Œæ¥å£ï¼Œæ˜¯ HTML çš„ APIï¼ŒDOM æŠŠæ•´ä¸ªé¡µé¢è§„åˆ’æˆç”±èŠ‚ç‚¹å±‚çº§æ„æˆçš„æ–‡æ¡£ã€‚</p>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> åªæœ‰ JS çš„å®¿ä¸»ç¯å¢ƒæ˜¯æµè§ˆå™¨çš„æ—¶å€™æ‰æœ‰ DOM å’Œ BOM ï¼Œåœ¨ Node ä¸­æ˜¯æ²¡æœ‰è¿™ä¸¤ä¸ªå¯¹è±¡çš„ã€‚</p>
</blockquote>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB;
    window ---> document
    e["frames[]"] --> window
    history --> window
    location --> window
    navigator --> window
    screen --> window
    dot2[...] --> window
    subgraph DOM
        a["anchors[]"] --> document
        b["forms[]"] --> document
        c["applets[]"] --> document
        d["images[]"] --> document
        dot[...] --> document
    end
</code></pre>
<h2 data-id="heading-12">0x26 å¦‚ä½•è®¿é—®æ ‡ç­¾é¡µå†å²ï¼Ÿ</h2>
<p>æˆ‘ä»¬å¯ä»¥ç›´æ¥è®¿é—® <code>window.history</code> è·å–æµè§ˆå™¨å†å²ï¼Œå…¶ä¸­ï¼š</p>
<ul>
<li><code>length</code>ï¼šè®¿é—®å½“å‰æ ‡ç­¾é¡µçš„å†å²çš„é•¿åº¦ã€‚</li>
<li><code>back()</code>ï¼šè¿”å›ä¸Šä¸€é¡µï¼Œç›¸å½“äº <code>window.history.go(-1)</code>ã€‚</li>
<li><code>forward()</code>ï¼šå‰å¾€ä¸‹ä¸€é¡µï¼ˆå¦‚æœå­˜åœ¨ï¼‰ï¼Œç›¸å½“äºç›¸å½“äº <code>window.history.go(1)</code>ã€‚</li>
<li><code>go(n)</code>ï¼šå‰å¾€ç¬¬ n ä¸ªè®°å½•ï¼ˆç›¸å¯¹äºå½“å‰è®°å½•ï¼‰ã€‚</li>
<li><code>pushState()</code>ï¼šæ¨å…¥æµè§ˆè®°å½•ã€‚</li>
<li><code>replaceState()</code>ï¼šæ›´æ–°æœ€æ–°çºªå½•ä¸ºç»™å®šæ•°æ®ã€‚</li>
</ul>
<h2 data-id="heading-13">0x27 å¦‚ä½•åˆ¤æ–­å¤§å°å†™é”®çŠ¶æ€ï¼Ÿ</h2>
<p><code>KeyboardEvent</code> ä¸ºæˆ‘ä»¬æä¾›äº†è·å–å¤§å°å†™çš„ APIï¼š<code>KeyboardEvent.prototype.getModifierState("CapsLock")</code>ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨å¦‚ä¸‹ä»£ç å³å¯ï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">"keydown"</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =></span> &#123;
  <span class="hljs-built_in">console</span>.log(event.getModifierState(<span class="hljs-string">"CapsLock"</span>));
&#125;);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-14">0x28 NaNã€isNaN å’Œ Number.isNaNï¼Ÿ</h2>
<p><code>NaN</code> æ˜¯å…¨å±€å¯¹è±¡çš„å±æ€§ï¼Œæ¢å¥è¯è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ã€‚</p>
<p><code>NaN</code> çš„æŒ‡ç¤ºä¸æ˜¯ä¸€ä¸ªæ•°å­— â€”â€” ä¸ <code>Number.NaN</code> çš„å€¼ç›¸åŒã€‚åœ¨ç°ä»£æµè§ˆå™¨ä¸­ï¼Œ<code>NaN</code> æ˜¯ä¸å¯é…ç½®ã€ä¸å¯å†™çš„å±æ€§ã€‚å³ä½¿æƒ…å†µå¹¶éå¦‚æ­¤ï¼Œä¹Ÿè¦é¿å…è¦†ç›–å®ƒã€‚<code>NaN</code> åœ¨ç¨‹åºä¸­å¾ˆå°‘ä½¿ç”¨ã€‚</p>
<p>æœ‰äº”ç§ä¸åŒç±»å‹çš„æ“ä½œä¼šè¿”å› <code>NaN</code>ï¼š</p>
<ul>
<li>æ— æ³•è§£ææ•°å­—ï¼ˆä¾‹å¦‚ <code>parseInt("blabla")</code> æˆ– <code>Number(undefined)</code>ï¼‰</li>
<li>ç»“æœä¸æ˜¯å®æ•°çš„æ•°å­¦è¿ç®—ï¼ˆä¾‹å¦‚ <code>Math.sqrt(-1)</code>ï¼‰</li>
<li>å‚æ•°çš„æ“ä½œæ•°æ˜¯ <code>NaN</code>ï¼ˆä¾‹å¦‚ <code>7 ** NaN</code>ï¼‰</li>
<li>ä¸ç¡®å®šå½¢å¼ï¼ˆä¾‹å¦‚ <code>0 * Infinity</code>ï¼Œæˆ– <code>undefined + undefined</code>ï¼‰</li>
<li>ä»»ä½•æ¶‰åŠå­—ç¬¦ä¸²ä¸”ä¸æ˜¯åŠ æ³•è¿ç®—çš„è¿ç®—ï¼ˆä¾‹å¦‚ <code>"foo" / 3</code>ï¼‰</li>
</ul>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>isNaN</code> æ–¹æ³•å¹¶ä¸ç­‰åŒäº <code>Number.isNaN</code>ï¼Œå…¶ä¸­ <code>isNaN</code> å±äºå…¨å±€æ–¹æ³•ï¼Œåªåˆ¤æ–­å‚æ•°æ˜¯å¦ä¸º<strong>ä¸æ˜¯ä¸€ä¸ªæ•°å­—</strong>ï¼Œè€Œ <code>Number.isNaN</code> åªç®¡ä¼ å‚æ˜¯å¦ä¸º <code>NaN</code>ï¼ˆç‰¹å®šå€¼ï¼‰ï¼Œå¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Number</span>.isNaN(&#123;&#125;)); <span class="hljs-comment">// false</span>
<span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">isNaN</span>(&#123;&#125;)); <span class="hljs-comment">// true</span>
<span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Number</span>.isNaN(<span class="hljs-literal">NaN</span>)); <span class="hljs-comment">// true</span>
<span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">isNaN</span>(<span class="hljs-literal">NaN</span>)); <span class="hljs-comment">// true</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-15">0x29 ä»€ä¹ˆæ˜¯äº‹ä»¶æµï¼Ÿä»€ä¹ˆæ˜¯äº‹ä»¶ä»£ç†ï¼Ÿä»€ä¹ˆæ˜¯äº‹ä»¶å†’æ³¡ï¼Ÿä»€ä¹ˆæ˜¯äº‹ä»¶æ•è·ï¼Ÿ</h2>
<p>äº‹ä»¶æµï¼Œå…¶å®æŒ‡çš„å°±æ˜¯äº‹ä»¶åœ¨ <code>document</code> ä¸ç›®æ ‡èŠ‚ç‚¹ä¹‹é—´ä¼ é€’çš„è¿‡ç¨‹ï¼Œå¦‚å›¾ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    document -->|æ•è·| html
    html -->|æ•è·| body
    body -->|æ•è·| div
    div -->|æ•è·| TextNode
    TextNode -->|å†’æ³¡| div
    div -->|å†’æ³¡| body
    body -->|å†’æ³¡| html
    html -->|å†’æ³¡| document
</code></pre>
<h3 data-id="heading-16">29.1 äº‹ä»¶å†’æ³¡ä¸æ•è·</h3>
<p>äº‹ä»¶å†’æ³¡æ˜¯ä¸€ç§äº‹ä»¶æµï¼Œå³ä»ä¸‹è‡³ä¸Šï¼Œä»ç›®æ ‡è§¦å‘çš„å…ƒç´ é€çº§å‘ä¸Šä¼ æ’­ï¼Œç›´åˆ° window å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph BT;
    TextNode -->|å†’æ³¡| div
    div -->|å†’æ³¡| body
    body -->|å†’æ³¡| html
    html -->|å†’æ³¡| document
</code></pre>
<p>äº‹ä»¶æ•è·ä¹Ÿæ˜¯ä¸€ç§äº‹ä»¶æµï¼Œä¸è¿‡å®ƒæ˜¯ä»ä¸Šåˆ°ä¸‹ï¼Œä» window å¯¹è±¡ä¸€ç›´åˆ°ç›®æ ‡è§¦å‘çš„å…ƒç´ ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB;
    document -->|æ•è·| html
    html -->|æ•è·| body
    body -->|æ•è·| div
    div -->|æ•è·| TextNode
</code></pre>
<h3 data-id="heading-17">29.2 äº‹ä»¶å§”æ‰˜</h3>
<p>å¦‚æœæœ‰å¤šä¸ª DOM èŠ‚ç‚¹éœ€è¦ç›‘å¬äº‹ä»¶çš„æƒ…å†µä¸‹ï¼Œç»™æ¯ä¸ª DOM ç»‘å®šç›‘å¬å‡½æ•°ï¼Œä¼šæå¤§çš„å½±å“é¡µé¢çš„æ€§èƒ½ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥é€šè¿‡äº‹ä»¶å§”æ‰˜æ¥è¿›è¡Œä¼˜åŒ–ã€‚äº‹ä»¶å§”æ‰˜åˆ©ç”¨çš„å°±æ˜¯å†’æ³¡çš„åŸç†ã€‚</p>
<p>æ¯”å¦‚è¯´ï¼Œæœ‰ä¸€ç»„éå¸¸é•¿çš„ <code>ul>li</code> åˆ—è¡¨ã€‚</p>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-tag"><<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"list"</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>></span><span class="hljs-tag"></<span class="hljs-name">li</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>></span><span class="hljs-tag"></<span class="hljs-name">li</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>></span><span class="hljs-tag"></<span class="hljs-name">li</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>></span><span class="hljs-tag"></<span class="hljs-name">li</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>></span><span class="hljs-tag"></<span class="hljs-name">li</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>></span><span class="hljs-tag"></<span class="hljs-name">li</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>></span><span class="hljs-tag"></<span class="hljs-name">li</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>></span><span class="hljs-tag"></<span class="hljs-name">li</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>></span><span class="hljs-tag"></<span class="hljs-name">li</span>></span>
<span class="hljs-tag"></<span class="hljs-name">ul</span>></span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>æˆ‘ä»¬è¦å¯¹ç‚¹å‡»äº‹ä»¶åšç›‘å¬ï¼Œåªéœ€è¦ï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">const</span> list = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"list"</span>);
list.addEventListener(<span class="hljs-string">"click"</span>, <span class="hljs-function">(<span class="hljs-params">ev</span>) =></span> &#123;
  <span class="hljs-built_in">console</span>.log(ev.target); <span class="hljs-comment">// [Element] <li class="item"></span>
&#125;);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<ul>
<li><code>ev.target</code>ï¼šè§¦å‘äº‹ä»¶å…ƒç´ ã€‚</li>
<li><code>ev.currentTarget</code>ï¼šç»‘å®šäº‹ä»¶çš„å…ƒç´ ã€‚</li>
</ul>
<p>ä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼Œæ˜¾ç„¶èƒ½å¤Ÿåšåˆ°ï¼š</p>
<ul>
<li><strong>åŠ¨æ€ç›‘å¬ï¼š</strong> ä½¿ç”¨äº‹ä»¶å§”æ‰˜å¯ä»¥<strong>è‡ªåŠ¨ç»‘å®š</strong>åŠ¨æ€æ·»åŠ çš„å…ƒç´ ï¼Œæ— éœ€å†é’ˆå¯¹è¯¥èŠ‚ç‚¹ç»‘å®š <code>onclick</code> ç­‰äº‹ä»¶ã€‚</li>
<li><strong>æé«˜æ€§èƒ½ï¼š</strong> èŠ‚çº¦æ€§èƒ½æ¶ˆè€—ï¼Œä¹ŸèŠ‚çº¦ä»£ç çš„ä½¿ç”¨ã€‚</li>
</ul>
<h2 data-id="heading-18">0x30 å¦‚ä½•ç¡®è®¤å¹¶å‘é€ä¸€ä»½è¡¨å•ï¼Ÿ</h2>
<p>ç®€å•ç²—æš´ <code>.submit()</code>ï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript">form.submit();
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-19">0x31 onloadã€onreadystatechangeã€DOMContentLoadedâ€¦â€¦çš„åŒºåˆ«ï¼Ÿ</h2>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB;
  onpagehide --> onbeforeunload
  onbeforeunload --> onunload
  onunload --> domLoading
  domLoading --> domInteractive
  domInteractive --> readystatechange1[interactive]
  readystatechange1 --> domComplete
  domComplete --> readystatechange2[complete]
  readystatechange2 --> onload
  onload --> onpageshow
</code></pre>
<h2 data-id="heading-20">0x32 CORS ç©¶ç«Ÿæ€ä¹ˆè§£ï¼Ÿ</h2>
<p>é¦–å…ˆæˆ‘ä»¬è¦äº†è§£ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰ CORS é™åˆ¶ï¼Ÿ</p>
<p>â€”â€” æ˜¯çš„ï¼ŒSame-Origin ç­–ç•¥ï¼Œä»¥é˜² CSRF äº‹ä»¶ã€‚</p>
<p>æ¯å½“æµè§ˆå™¨å¯¹ä¸€ä¸ªåŸŸå‘å‡º HTTP è¯·æ±‚ï¼Œéƒ½ä¼šå¸¦ä¸Šè¿™ä¸ªåŸŸæ‰€å±çš„ <code>cookie</code>ã€‚è¿™å¯¹è®¤è¯æˆ–ç»´æŒ session ç­‰åŠŸèƒ½éå¸¸æœ‰ç”¨ã€‚æ¯”å¦‚ï¼Œå½“ä½ è®¿é—® <code>hoarfroster.space</code> è·å¾—äº†ç®¡ç†å‘˜æƒé™è®¤è¯çš„æ—¶å€™ï¼Œä½ çš„æµè§ˆå™¨å°±ä¼šå­˜å‚¨ä¸€ä¸ªäºè¿™ä¸ªåŸŸç›¸å…³ä¼šè¯çš„ cookie <code>session=s-admin-1941</code>ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR;
  client["å®¢æˆ·ç«¯ hoarfroster.space"] -->|usrname=...&pwd=...| site["hoarfroster.space"]
  site -->|Set-Cookie: session=s-admin-1941| client
</code></pre>
<p>è€Œå¦‚æœæˆ‘ç°åœ¨åœ¨ä¸€ä¸ªç›—ç‰ˆç½‘ç«™â€¦â€¦ç½‘ç«™ä½¿ç”¨ XMLHttpRequest è®¿é—® <code>hoarfroster.space</code>ï¼Ÿå¦‚æœæ²¡æœ‰ CORS é™åˆ¶â€¦â€¦</p>
<p>æµè§ˆå™¨ä¼šå¸¦ä¸Š cookie å•Šï¼</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR;
  client["å®¢æˆ·ç«¯ hacker.com"] -->|session=s-admin-1941| site["hoarfroster.space"]
</code></pre>
<p>ä»€ä¹ˆé¬¼ï¼Ÿ<code>hacker.com</code> ä¹Ÿèƒ½å¤Ÿè·å¾—æˆ‘çš„ç®¡ç†å‘˜æƒé™ï¼Ÿï¼Ÿï¼Ÿ</p>
<h3 data-id="heading-21">32.1 åŒæºç­–ç•¥</h3>
<p>æ¯æ¬¡å‘èµ·è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨éƒ½ä¼šéªŒè¯é“¾æ¥åœ°å€æ˜¯å¦åŒ¹é…ã€‚å¦‚æœä¸æ˜¯åŒæºï¼ˆåŒåŸŸåï¼ŒåŒç«¯å£ï¼‰ï¼Œå°±ä¼šéªŒè¯ HTTP è¯·æ±‚çš„ Response æ ‡å¤´çš„ <code>Access-Control-Allow-Origin</code> æ˜¯å¦æ»¡è¶³è¦æ±‚ï¼š</p>
<ul>
<li><code>Access-Control-Allow-Origin: hacker.com</code>ï¼šå…è®¸ hacker.com çš„è·¨åŸŸè®¿é—®ã€‚</li>
<li><code>Access-Control-Allow-Origin: *</code>ï¼šå…è®¸æ‰€æœ‰ç½‘ç«™çš„è·¨åŸŸè®¿é—®ã€‚</li>
</ul>
<h3 data-id="heading-22">32.2 è§£å†³æ–¹æ¡ˆ</h3>
<ol>
<li>æœåŠ¡å™¨æ·»åŠ  <code>Access-Control-Allow-Origin: hacker.com</code>ã€‚</li>
<li>ä½¿ç”¨æœåŠ¡å™¨ä»£ç†ï¼ˆåŒæºç­–ç•¥åªé™åˆ¶æµè§ˆå™¨ -> æœåŠ¡å™¨ï¼Œä¸é™åˆ¶æœåŠ¡å™¨ -> æœåŠ¡å™¨ï¼‰ã€‚</li>
<li>JSONPï¼ˆè§ #91ï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-23">0x33 ä»€ä¹ˆæ˜¯äº‹ä»¶ï¼Ÿ</h2>
<p>äº‹ä»¶ï¼ŒæŒ‡æŸä¸€ç‰¹å®šç¬é—´ï¼Œåœ¨ å‰ç«¯æŒ‡ä»£æ–‡æ¡£æˆ–è€…æµè§ˆå™¨ä¸­å‘ç”Ÿçš„ä¸€äº›ç‰¹å®šäº¤äº’ç¬é—´ï¼Œå¦‚ PostMessage çš„ <code>onmessage</code> äº‹ä»¶ï¼Œç‚¹å‡»çš„ <code>onclick</code> äº‹ä»¶ï¼Œè¾“å…¥çš„ <code>onkeydown</code> äº‹ä»¶ï¼Œæ”¹å˜çª—å£å¤§å°çš„ <code>onresize</code> äº‹ä»¶ç­‰ã€‚</p>
<p>äº‹ä»¶å¤„ç†å°±æ˜¯å½“äº‹ä»¶è¢«è§¦å‘åï¼Œæµè§ˆå™¨å“åº”è¿™ä¸ªäº‹ä»¶çš„è¡Œä¸ºï¼Œè€Œè¿™ä¸ªè¡Œä¸ºæ‰€å¯¹åº”çš„ä»£ç å³ä¸ºäº‹ä»¶å¤„ç†ç¨‹åºã€‚</p>
<h2 data-id="heading-24">0x34 preventDefaultã€stopImmediatePropagation å’Œ stopPropagation æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ</h2>
<p>å‰è€…ç”¨äºé˜»æ–­äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼Œå¦‚æˆ‘æƒ³è¦ç¦æ­¢å³é”®èœå•ï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-built_in">document</span>.body.oncontextmenu = <span class="hljs-function">(<span class="hljs-params">evt</span>) =></span> evt.preventDefault();
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><code>stopPropagation</code> ç”¨äºé˜»æ–­äº‹ä»¶çš„ä¼ æ’­ï¼ˆåŒ…æ‹¬æ•è·ä¸å†’æ³¡ï¼‰ã€‚å¦å¤–ï¼Œ<code>stopImmediatePropagation</code> ç”¨äºé˜»æ–­å½“å‰å…ƒç´ çš„ç›‘å¬å™¨çš„è§¦å‘ï¼ˆä¼šé˜»æ­¢äº‹ä»¶ä¼ æ’­ï¼Œä¹Ÿä¼šé˜»æ­¢å½“å‰å…ƒç´ ä¸ŠåŒä¸€äº‹ä»¶ç›‘å¬å™¨çš„è§¦å‘ï¼‰ã€‚</p>
<h2 data-id="heading-25">0x35 PWA æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>æ¸è¿›å¼ Web åº”ç”¨ç¨‹åºæ˜¯ä½¿ç”¨æ–°å…´ Web æµè§ˆå™¨ API å’ŒåŠŸèƒ½ä»¥åŠä¼ ç»Ÿæ¸è¿›å¼å¢å¼ºç­–ç•¥çš„ Web åº”ç”¨ç¨‹åºï¼Œèƒ½ä¸ºè·¨å¹³å° Web åº”ç”¨ç¨‹åºå¸¦æ¥ç±»ä¼¼äºæœ¬æœºåº”ç”¨ç¨‹åºçš„ç”¨æˆ·ä½“éªŒã€‚</p>
<p>PWA çš„å¥½å¤„å¦‚ä¸‹ï¼š</p>
<ol>
<li>å¯ä»¥å®‰è£…ï¼ˆadd-to-screenï¼‰ä¸ºå›¾æ ‡åº”ç”¨ç¨‹åºã€‚</li>
<li>å¯ä»¥ä½¿ç”¨ Service Worker å¤„ç†ç½‘ç»œè¯·æ±‚ã€ç¼“å­˜ï¼Œæ”¯æŒ<strong>æ— ç½‘ç»œæ¡ä»¶</strong>ç¦»çº¿ä½¿ç”¨ã€‚</li>
<li>å¯ä»¥ä½¿ç”¨æ¨é€ã€é€šçŸ¥ APIã€‚</li>
<li>å¯ä»¥ä½¿ç”¨å®¢æˆ·ç«¯å­˜å‚¨ã€‚</li>
<li>å¯ä»¥ä½¿ç”¨ IndexedDBã€‚</li>
<li>â€¦â€¦</li>
</ol>
<h2 data-id="heading-26">0x36 æ€æ ·åˆ‡æ¢é¡µé¢ï¼Ÿ</h2>
<ol>
<li>window.location.href = "<a href="https://link.juejin.cn/?target=http%3A%2F%2Fhoarfroster.space" target="_blank" rel="nofollow noopener noreferrer" title="http://hoarfroster.space" ref="nofollow noopener noreferrer">hoarfroster.space</a>"</li>
<li>location = "<a href="https://link.juejin.cn/?target=http%3A%2F%2Fhoarfroster.space" target="_blank" rel="nofollow noopener noreferrer" title="http://hoarfroster.space" ref="nofollow noopener noreferrer">hoarfroster.space</a>"</li>
<li>window.open("<a href="https://link.juejin.cn/?target=http%3A%2F%2Fhoarfroster.space" target="_blank" rel="nofollow noopener noreferrer" title="http://hoarfroster.space" ref="nofollow noopener noreferrer">hoarfroster.space</a>", "_blank")</li>
<li>window.open("<a href="https://link.juejin.cn/?target=http%3A%2F%2Fhoarfroster.space" target="_blank" rel="nofollow noopener noreferrer" title="http://hoarfroster.space" ref="nofollow noopener noreferrer">hoarfroster.space</a>", "_self")</li>
<li>window.location.replace("<a href="https://link.juejin.cn/?target=http%3A%2F%2Fhoarfroster.space" target="_blank" rel="nofollow noopener noreferrer" title="http://hoarfroster.space" ref="nofollow noopener noreferrer">hoarfroster.space</a>") â€”â€” ä¸ä¼šä¿ç•™å†å²è®°å½•ï¼Œä¸å¯å›é€€ã€‚</li>
<li>window.location.assign("<a href="https://link.juejin.cn/?target=http%3A%2F%2Fhoarfroster.space" target="_blank" rel="nofollow noopener noreferrer" title="http://hoarfroster.space" ref="nofollow noopener noreferrer">hoarfroster.space</a>")</li>
</ol>
<h2 data-id="heading-27">0x37 å¦‚ä½•åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«ç‰¹å®šå­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦æ»¡è¶³ï¼Ÿ</h2>
<h3 data-id="heading-28">37.1 RegExp</h3>
<h4 data-id="heading-29">37.1.1 RegExp.test</h4>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">RegExp</span>(<span class="hljs-regexp">/str/</span>).test(<span class="hljs-string">"strStr"</span>)); <span class="hljs-comment">// true</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å¦å¤–ä¹Ÿå¯ä»¥ç”¨ <code>RegExp.exec</code> ååˆ¤æ–­æ•°ç»„é•¿åº¦ï¼Œä¸è¿‡å¤ªç¹çï¼Œæ€§èƒ½ä¹Ÿä¸ä½³ã€‚</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">RegExp</span>(<span class="hljs-regexp">/str/</span>).exec(<span class="hljs-string">"strStr"</span>).length > <span class="hljs-number">0</span>); <span class="hljs-comment">// true</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h4 data-id="heading-30">37.1.2 String.match</h4>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-built_in">console</span>.log(<span class="hljs-string">"strStr"</span>.match(<span class="hljs-string">"str"</span>) !== <span class="hljs-literal">null</span>); <span class="hljs-comment">// true</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h4 data-id="heading-31">37.1.3 String.search</h4>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-built_in">console</span>.log(<span class="hljs-string">"strStr"</span>.search(<span class="hljs-built_in">RegExp</span>(<span class="hljs-regexp">/str/</span>)) !== -<span class="hljs-number">1</span>); <span class="hljs-comment">// true</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-32">37.2 String</h3>
<h4 data-id="heading-33">37.2.1 String.indexOf()</h4>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-built_in">console</span>.log(<span class="hljs-string">"strStr"</span>.indexOf(<span class="hljs-string">"str"</span>)); <span class="hljs-comment">// true</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h4 data-id="heading-34">37.2.2 String.search</h4>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-built_in">console</span>.log(<span class="hljs-string">"strStr"</span>.search(<span class="hljs-string">"str"</span>) !== -<span class="hljs-number">1</span>); <span class="hljs-comment">// true</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h4 data-id="heading-35">37.2.3 String.match</h4>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-built_in">console</span>.log(<span class="hljs-string">"strStr"</span>.match(<span class="hljs-string">"str"</span>) !== <span class="hljs-literal">null</span>); <span class="hljs-comment">// true</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-36">0x38 JavaScript çš„å„ç§å¾ªç¯ï¼Ÿ</h2>
<p>å‡ºäºç›®çš„ä¸åŒï¼Œæˆ‘ä»¬å…¶å®å¯ä»¥åˆ†ä¸ºå‡ ä¸ªéƒ¨åˆ†æ¥è°ˆï¼š</p>
<ul>
<li>çº¯å¾ªç¯ï¼ˆå•çº¯æ•°å­—å¾ªç¯ï¼‰</li>
<li>æ•°ç»„éå†</li>
<li>æ•°ç»„èµ‹å€¼</li>
<li>æ•°ç»„ä¿®æ”¹ï¼ˆåŸæ•°ç»„ä¿®æ”¹ï¼‰</li>
<li>æ•°ç»„ç­›é€‰</li>
</ul>
<p><code>for</code> å¾ªç¯ä¹Ÿæœ‰å¾ˆå¤šå˜å½¢ï¼Œä¾‹å¦‚ <code>for</code>ã€<code>for</code>ï¼ˆå€’åºï¼‰ã€<code>forâ€¦of</code>ã€<code>forEach</code>ã€<code>forâ€¦in</code>ã€<code>forâ€¦await</code>ã€‚</p>
<p>åœ¨æ€§èƒ½ä¸Šï¼Œåœ¨ä¸åŒå¹³å°ï¼Œä¸åŒæµè§ˆå™¨ç¯å¢ƒä¸‹ï¼Œå¾ªç¯çš„è¿è¡Œé€Ÿåº¦äº‹å®ä¸Šæœ‰ä¸å°çš„å·®å¼‚ã€‚</p>
<h2 data-id="heading-37">0x39 å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºç©ºï¼Ÿ</h2>
<h3 data-id="heading-38">39.1 for-in</h3>
<p>æ ¹æ® <code>for...in</code> éå†å¯¹è±¡ï¼Œå¦‚æœå­˜åœ¨åˆ™è¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code></p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params">obj</span>) </span>&#123;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i <span class="hljs-keyword">in</span> obj) &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  &#125;
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-39">39.2 JSON.stringify</h3>
<p>åˆ©ç”¨ <code>JSON</code> è‡ªå¸¦çš„ <code>JSON.stringify()</code> æ–¹æ³•æ¥åˆ¤æ–­ï¼Œå¤§æ¦‚æ€è·¯å°±æ˜¯è½¬åŒ–ä¸ºå­—ç¬¦ä¸² <code>&#123;&#125;</code> æ¥è¿›è¡Œåˆ¤æ–­</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params">obj</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">JSON</span>.stringify(obj) === <span class="hljs-string">"&#123;&#125;"</span>) &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  &#125;
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-40">39.3 Object.keys</h3>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨ ES6 ä¸­ <code>Object.keys()</code> æ¥è¿›è¡Œåˆ¤æ–­ï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">const</span> test = <span class="hljs-function">(<span class="hljs-params">obj</span>) =></span> (<span class="hljs-built_in">Object</span>.keys(obj).length === <span class="hljs-number">0</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-41">0x40 ä»€ä¹ˆæ˜¯ argumentsï¼Ÿ</h2>
<p><code>arguments</code> æ˜¯ä¸€ä¸ªå¯¹åº”äºä¼ é€’ç»™é™¤ç®­å¤´å‡½æ•°å¤–çš„å‡½æ•°çš„å‚æ•°çš„ç±»æ•°ç»„å¯¹è±¡å±€éƒ¨å˜é‡ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>arguments</code> å¯¹è±¡åœ¨å‡½æ•°ä¸­å¼•ç”¨å‚æ•°ã€‚</p>
<p><code>arguments</code> ä¸æ˜¯ä¸€ä¸ª <code>Array</code> ä½†ç±»ä¼¼äº <code>Array</code>ï¼Œæ„å‘³ç€<strong>ä¸å­˜åœ¨ <code>forEach</code>ã€<code>map</code> ç­‰æ–¹æ³•ï¼Œåªæœ‰ <code>length</code> å±æ€§</strong>ã€‚</p>
<blockquote>
<p><strong>æç¤ºï¼š</strong> å¦‚æœä½ ç¼–å†™çš„æ˜¯å…¼å®¹ ES6 çš„ä»£ç ï¼Œé‚£ä¹ˆåº”è¯¥ä½¿ç”¨ Rest å‚æ•°ã€‚</p>
</blockquote>
<h3 data-id="heading-42">40.1 æ€§èƒ½é—®é¢˜</h3>
<p>æœ‰å¤šç§ä½¿ç”¨ <code>arguments</code> çš„æ“ä½œä¼šå¯¼è‡´å‡½æ•°æ— æ³•ä¼˜åŒ–ï¼Œä½¿ç”¨ <code>arguments</code> æ—¶å¿…é¡»éå¸¸å°å¿ƒã€‚</p>
<h4 data-id="heading-43">40.1.1 é‡æ–°å®šä¹‰ä¸€ä¸ªå‘½åçš„å‚æ•°ï¼Œå´åˆä½¿ç”¨äº† <code>arguments</code></h4>
<p>ï¼ˆæ³¨ï¼šéä¸¥æ ¼æ¨¡å¼ä¸‹ï¼‰</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">defaultArgsReassign</span>(<span class="hljs-params">a, b</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length < <span class="hljs-number">2</span>) b = <span class="hljs-number">5</span>;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><strong>ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯å­˜å‚¨å‚æ•°ä¸ºæ–°å˜é‡ï¼Œæ¯”å¦‚è¯´ï¼š</strong></p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">defaultArgsReassign</span>(<span class="hljs-params">a, _b</span>) </span>&#123;
  <span class="hljs-keyword">let</span> b = _b;
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length < <span class="hljs-number">2</span>) b = <span class="hljs-number">5</span>;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><strong>ä¸è¿‡å¦‚æœå°±ä¸Šè¿°å‡½æ•°è€Œè¨€ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šç›´æ¥è¿™æ ·åšï¼š</strong></p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">defaultArgsReassign</span>(<span class="hljs-params">a, b</span>) </span>&#123;
  <span class="hljs-keyword">if</span> (b === <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>) b = <span class="hljs-number">5</span>;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>ä¸è¿‡å…¶å®è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœå‡½æ•°åé¢ä¼šä½¿ç”¨åˆ° <code>arguments</code>ï¼Œç»´æŠ¤æ—¶å¾ˆå®¹æ˜“å¿˜è®°å…ˆå‰é‡æ–°èµ‹å€¼çš„å¯¹è±¡ï¼Œå¯¼è‡´ <code>arguments</code> è·å–åˆ°çš„å‚æ•°ä¸å…¨ã€‚</p>
<p><strong>å¦å¤–ï¼Œå¦ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ã€‚</strong></p>
<h4 data-id="heading-44">40.1.2 arguments æ³„æ¼</h4>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">leaksArguments1</span>(<span class="hljs-params"></span>) </span>&#123;
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">arguments</span>;
&#125;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">leaksArguments2</span>(<span class="hljs-params"></span>) </span>&#123;
  <span class="hljs-keyword">var</span> args = [].slice.call(<span class="hljs-built_in">arguments</span>);
&#125;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">leaksArguments3</span>(<span class="hljs-params"></span>) </span>&#123;
  <span class="hljs-keyword">var</span> a = <span class="hljs-built_in">arguments</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">return</span> a;
  &#125;;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>ä¸Šè¿°ä¸‰ä¸ªå‡½æ•°ä¼šå°† <code>arguments</code> å¯¹è±¡æ³„æ¼ï¼Œå¯¼è‡´å…¶æ— æ³•å›æ”¶ã€‚<strong><code>arguments</code> å¯¹è±¡ä¸åº”è¯¥è¢«ä¼ é€’ç»™åˆ«çš„å‡½æ•°ï¼Œæˆ–ä»¥ä»»ä½•å…¶ä»–æ–¹å¼æ³„æ¼åˆ°å‡½æ•°ä»¥å¤–ï¼</strong></p>
<p><strong>ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯ä»¥å¾ªç¯æ–¹å¼åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼š</strong></p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">doesntLeakArguments</span>(<span class="hljs-params"></span>) </span>&#123;
  <span class="hljs-comment">// `.length` åªæ˜¯ä¸€ä¸ªæ•´å‹ï¼Œä¸ä¼šæ³„æ¼ arguments å¯¹è±¡æœ¬èº«</span>
  <span class="hljs-keyword">var</span> args = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-built_in">arguments</span>.length);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i < args.length; ++i) &#123;
    <span class="hljs-comment">// i æ€»æ˜¯ arguments å¯¹è±¡ä¸­çš„åˆè§„çš„ index</span>
    args[i] = <span class="hljs-built_in">arguments</span>[i];
  &#125;
  <span class="hljs-keyword">return</span> args;
&#125;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">anotherNotLeakingExample</span>(<span class="hljs-params"></span>) </span>&#123;
  <span class="hljs-keyword">var</span> i = <span class="hljs-built_in">arguments</span>.length;
  <span class="hljs-keyword">var</span> args = [];
  <span class="hljs-keyword">while</span> (i--) args[i] = <span class="hljs-built_in">arguments</span>[i];
  <span class="hljs-keyword">return</span> args;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>è™½è¯´å¤šäº†ä¸å°‘ä»£ç ï¼Œä½†è¿™å´å®Œå…¨å€¼å¾—æˆ‘ä»¬è¿™ä¹ˆåšã€‚æ¯•ç«Ÿä¼˜åŒ–æ€»æ˜¯ä¼šéœ€è¦æ›´å¤šçš„ä»£ç ï¼Œæ„å‘³ç€èƒ½å¤Ÿæ›´æ˜ç¡®åœ°ç¡®å®šè¯­ä¹‰ã€‚</p>
<h4 data-id="heading-45">40.1.3 å¯¹å‚æ•°çš„é‡æ–°èµ‹å€¼</h4>
<p>è¿™ç§ä»£ç ä¹Ÿå°±åªèƒ½åœ¨éä¸¥æ ¼æ¨¡å¼è¿è¡Œï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assignToArguments</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-built_in">arguments</span> = <span class="hljs-number">3</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">arguments</span>;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šæ²¡å¿…è¦ç®¡ä»–ï¼Œåæ­£ä¸¥æ ¼æ¨¡å¼ç›´æ¥æŠ›å‡ºé”™è¯¯â€¦â€¦</strong></p>
<h3 data-id="heading-46">40.2 ä»€ä¹ˆæ˜¯å®‰å…¨çš„ arguments ç”¨æ³•</h3>
<p>åªåœ¨ä»¥ä¸‹æƒ…å†µä¸‹ä½¿ç”¨ï¼š</p>
<ul>
<li><code>arguments.length</code>ï¼›</li>
<li>å½“ i æ˜¯ä¸€ä¸ªåˆè§„çš„ index æ—¶å€™ï¼Œè®¿é—® <code>arguments[i]</code>ï¼›</li>
<li>æ°¸è¿œä¸è¦è„±ç¦» <code>.length</code> æˆ– <code>[i]</code> è®¿é—® <code>arguments</code> å¯¹è±¡ï¼›</li>
<li>ä¸¥æ ¼ä½¿ç”¨ <code>fn.apply(ctx, arguments)</code> æ˜¯å¯ä»¥çš„ï¼Œä½† <code>.slice</code> æ˜¯ä¸å¯¹çš„ï¼
<ul>
<li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå‘å‡½æ•°æ·»åŠ å±æ€§ï¼ˆ<code>fn.prop = '1'</code>ï¼‰æˆ–ç»‘å®šå‡½æ•°ï¼ˆ<code>fn.bind()</code>ï¼‰ç”Ÿæˆçš„æ–°å‡½æ•°ä¸­ä¼šæœ‰éšè—ç±»ï¼Œä¹Ÿå› æ­¤ï¼Œæ­¤æ—¶ä½¿ç”¨ <code>apply</code> ä¸å†å®‰å…¨ã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> åœ¨ä»¥ä¸Šå®‰å…¨ç”¨æ³•ä¸‹ï¼Œä½¿ç”¨ <code>arguments</code> ä¸ä¼šå¯¼è‡´ <code>arguments</code> å¯¹è±¡çš„åˆ†é…ã€‚</p>
</blockquote></div>  
</div>
            