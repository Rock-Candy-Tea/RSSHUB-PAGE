
---
title: '性能优化第01期 - 建立性能知识体系'
categories: 
 - 编程
 - 掘金
 - 分类
headimg: 'https://picsum.photos/400/300?random=6206'
author: 掘金
comments: false
date: Wed, 01 Sep 2021 20:59:14 GMT
thumbnail: 'https://picsum.photos/400/300?random=6206'
---

<div>   
<div class="markdown-body html cache"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><h4 data-id="heading-0">优化准则</h4>
<p>作为一名合格的程序员，性能优化是一个必修的课题</p>
<p><strong>不宜过早优化</strong>：在典型的互联网开发模式中，追求的是快速的迭代和试错，过早的优化往往会成为一种无用功</p>
<p><strong>不宜过度优化</strong>：在项目的不同阶段，对系统的性能都会有不一样的要求。如果能满足预期，就没有必要花费时间精力去优化</p>
<p><strong>而是要追求合适的性价比</strong>：在项目的不同阶段使用合理的方案来达到预期的效果即可</p>
<h4 data-id="heading-1">从输入URL到页面加载完成，发生了什么？</h4>
<ul>
<li>
<p>DNS解析</p>
<p>操作系统会先检查自己本地的 hosts 文件是否有这个 URL 地址的映射关系</p>
<p>如果本地 hosts 里没有地址的映射，则查找本地 DNS 解析器缓存</p>
<p>如果本地 DNS 服务器区域文件与缓存解析都失效，则通过 DNS 服务器迭代查询来处理</p>
<p>作用：使用分布式集群的工作方式，通过 DNS 服务器将主机域名转换为 IP 地址</p>
</li>
<li>
<p>建立TCP连接（三次握手）</p>
<p>客户端与服务器利用 SYN 报文段交换彼此的初始序列号，互相维持一个具有连接特性的状态</p>
<p>Chrome 浏览器有个机制，同一个域名同时最多只能建立 6 个 TCP 连接</p>
</li>
<li>
<p>客户端发起HTTP请求</p>
<p>由于HTTP协议具有管线化的特点，允许在第一个应答被完全发送之前就可以发送第二个请求（可以一次性发送多个请求），以降低通信延迟</p>
<p>但在接收 response 返回时，必须依照请求的顺序接收。如果前一个请求遇到了阻塞，后面的请求即使已经处理完毕，仍然需要等待阻塞的请求处理完，也叫 队头阻塞</p>
</li>
<li>
<p>服务端处理请求</p>
<p>可通过设置不同的响应头来实现不同的功能</p>
</li>
<li>
<p>浏览器解析渲染页面</p>
<p>1、根据 HTML 解析出 DOM 树</p>
<p>2、根据 CSS 解析出 CSS 规则树</p>
<p>3、结合 DOM 树和 CSS 规则树，生成渲染树</p>
<p>4、根据渲染树计算 DOM 节点的信息（节点的大小、位置）</p>
<p>5、根据计算好的信息绘制页面（CSS的颜色、背景、字体等）</p>
</li>
<li>
<p>关闭TCP连接（四次挥手）</p>
<p>确保数据的完整性，当被动方的数据全部传输给主动方后进行连接的关闭</p>
</li>
</ul>
<h4 data-id="heading-2">总结</h4>
<p>所谓性能优化，就是保证输入 URL 到页面加载完成的整个过程足够的快，任何一个环节出现问题都会影响到系统的性能</p></div>  
</div>
            