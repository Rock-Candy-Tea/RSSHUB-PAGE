
---
title: '四、注释'
categories: 
 - 编程
 - 掘金
 - 分类
headimg: 'https://picsum.photos/400/300?random=9229'
author: 掘金
comments: false
date: Sun, 11 Jul 2021 21:06:30 GMT
thumbnail: 'https://picsum.photos/400/300?random=9229'
---

<div>   
<div class="markdown-body"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><p>可读性：★★★★✰  理解难度：★★★✰✰</p>
<h3 data-id="heading-0">概述</h3>
<p>注释并不像《辛德勒名单》。它们并不“纯粹的好”。实际上，注释最多也就是一种必需的恶。</p>
<p>作者并不推荐写不必要的注释，只有在不得不的情况下才需要注释。</p>
<h3 data-id="heading-1">1.注释不能美化糟糕的代码</h3>
<p>“别给糟糕的代码加注释，重新写吧。”</p>
<p>使用注释的优先级：<code>用代码来阐述（没有注释） > 使用注释 > 坏的注释</code>。</p>
<h3 data-id="heading-2">2.好注释</h3>
<p>有的注释是必需的，也是有利的。</p>
<h5 data-id="heading-3">1) 对意图的解释</h5>
<p>描述你写这段代码的目的。</p>
<p>有时，当你看到注释，也许不同意程序员给这个问题提供的解决方案，但至少你知道他想干什么。</p>
<h5 data-id="heading-4">2) 阐释</h5>
<p>有时，把一些晦涩难懂的参数或者返回值翻译为通俗易懂的形式，也是有用的。</p>
<p>比如underscore.js库的一些方法说明：</p>
<pre><code class="hljs language-js copyable" lang="js">underscore.rest(useList) <span class="hljs-comment">// 返回数组中除第一个元素外的其他元素。</span>
underscore.flatten(useList) <span class="hljs-comment">// 把嵌套多层的数组转化成一层，[1,2,[3]] => [1,2,3]</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h5 data-id="heading-5">3) 警示</h5>
<p>对于一些方法调用的缺陷的说明，或者提醒关闭某个被开启的线程。</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// 注意：这个方法可能会消耗一些性能</span>
<span class="hljs-function"><span class="hljs-title">traverse</span>(<span class="hljs-params">list</span>)</span> &#123;&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h5 data-id="heading-6">4) TODO注释</h5>
<p>有时，由于时间或者环境关系，一些需要后期完善的部分，可以通过todo注释标注出来。但是一定要记得定期解决掉这些备注的todo事项。不过还是尽量不要使用，因为<code>Later equals never</code></p>
<h5 data-id="heading-7">5) 强调</h5>
<p>有时，需要强调一下某段逻辑看似不合理，但是为何还是这么做了，说明其不合理的重要性。以防止读者无法理解，或者被轻易改掉。</p>
<h3 data-id="heading-8">3.坏注释</h3>
<p>哪些注释会显得特别没有必要。</p>
<h5 data-id="heading-9">1) 自言自语</h5>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">try</span> &#123;
doSmthing()
&#125; <span class="hljs-keyword">catch</span>() &#123;
<span class="hljs-comment">// 现在还不太清楚这个异常怎么处理，后面想好再说吧。</span>
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h5 data-id="heading-10">2) 多余的注释</h5>
<p>有时，读多余的注释的时间没准比读代码的时间还要长。</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// 这是一个对用户列表的遍历，目的是为了找出名字长度多于2个字的用户，并且把他们放入集合a</span>
<span class="hljs-keyword">let</span> a = []
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>; i<userList.length; i++) &#123;
<span class="hljs-keyword">if</span> (userList[i].name.length > <span class="hljs-number">2</span>) &#123;
a.push(userList[i])
&#125;
&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h5 data-id="heading-11">3) 误导性注释</h5>
<p>有时，比起不写注释更具杀伤性的行为是写误导性注释。不仅不能有所帮助，甚至会引起不必要的麻烦。</p>
<p>所以一定要保证注释的准确性。</p>
<h5 data-id="heading-12">4) 死板型注释</h5>
<p>方法本身的意思已经一目了然，没有必要增加一些多余的模板。</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">/*
* @param title CD的名称
* @param author CD的创作者
* @param publishDate CD的发行时间
* @param time CD的时长
*/</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addCD</span>(<span class="hljs-params">title, author, publishDate, time</span>)
</span><span class="copy-code-btn">复制代码</span></code></pre>
<h5 data-id="heading-13">4) 日志型注释</h5>
<p>有时，有的同学会写一些修改的日志作为注释，类似谁修改过代码，什么时间点修改的。</p>
<p>这些日志型的注释我们现代的代码编辑器都记录的很清楚，没有必要画蛇添足。</p>
<h5 data-id="heading-14">5) 标记型注释</h5>
<p>有时，为了方便查找，有的同学会使用一些标记型注释，这种注释临时使用后，记得删除，否则多了之后，代码会显示凌乱丑陋。</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// 这里 ///////////////////////</span>
<span class="hljs-function"><span class="hljs-title">doSmthing</span>(<span class="hljs-params"></span>)</span> &#123;&#125;
<span class="copy-code-btn">复制代码</span></code></pre>
<h5 data-id="heading-15">6) 注释掉的代码</h5>
<p>有时，有的同学会把不用的代码注释掉。其他人又不敢删除，他们会想，依然放在那儿，一定有其用途。这种方式同样会使得程序丑陋不堪。</p>
<p>如果是担心代码无法恢复，大可不必，现代编辑器对于修改的记录都十分完善。</p>
<pre><code class="hljs language-js copyable" lang="js">doSmthing()
<span class="hljs-comment">// for (let i=0; i<users.length; i++) &#123;</span>
<span class="hljs-comment">//if (a) &#123;</span>
<span class="hljs-comment">//doAction()</span>
<span class="hljs-comment">//&#125;</span>
<span class="hljs-comment">// &#125;</span>
doSmthingElse()
<span class="copy-code-btn">复制代码</span></code></pre>
<blockquote>
<p>本文参考《代码整洁之道》（Robert C. Martin著，韩磊译）。</p>
</blockquote>
<blockquote>
<p>浙江大华技术股份有限公司-软研-智慧城市产品研发部招聘高级前端，欢迎来撩，有意向可发送简历到<a href="https://link.juejin.cn/?target=mailto%3Achen_zhen%40dahuatech.com" target="_blank" title="mailto:chen_zhen@dahuatech.com" ref="nofollow noopener noreferrer">chen_zhen@dahuatech.com</a>，长期有效</p>
</blockquote>
<p>上一篇：三、函数</p>
<p>下一篇：五、格式</p></div>  
</div>
            