
---
title: 'RN çš„ Animated'
categories: 
 - ç¼–ç¨‹
 - æ˜é‡‘
 - åˆ†ç±»
headimg: 'https://picsum.photos/400/300?random=7055'
author: æ˜é‡‘
comments: false
date: Thu, 26 Aug 2021 04:23:37 GMT
thumbnail: 'https://picsum.photos/400/300?random=7055'
---

<div>   
<div class="markdown-body"><style>@charset "UTF-8";.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:#353535&#125;.markdown-body h1&#123;padding-bottom:4px;font-size:30px&#125;.markdown-body h1,.markdown-body h2&#123;margin-top:36px;margin-bottom:10px;line-height:1.5;color:#005bb7&#125;.markdown-body h2&#123;position:relative;padding-left:16px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h2:before&#123;content:"ã€Œ";position:absolute;top:-6px;left:-10px&#125;.markdown-body h2:after&#123;content:"ã€";position:absolute;top:6px;right:auto&#125;.markdown-body h3&#123;position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:#005bb7;padding-left:6px&#125;.markdown-body h3:before&#123;content:"Â»";padding-right:6px;color:#2196f3&#125;.markdown-body h4&#123;margin-top:24px;font-size:16px&#125;.markdown-body h4,.markdown-body h5&#123;padding-bottom:0;margin-bottom:10px;line-height:1.5;color:#005bb7;padding-left:6px&#125;.markdown-body h5&#123;margin-top:18px;font-size:14px&#125;.markdown-body h6&#123;padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:#005bb7;padding-left:6px&#125;.markdown-body p&#123;line-height:inherit;margin-top:16px;margin-bottom:16px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#007fff,rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),#007fff);border-width:0;overflow:visible&#125;.markdown-body hr:after&#123;content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center&#125;.markdown-body code&#123;padding:.065em .4em;font-size:.87em;color:#c2185b;word-break:break-word;overflow-x:auto;background-color:#fff4f4;border-radius:2px&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8&#125;.markdown-body pre>code::-webkit-scrollbar&#123;width:4px;height:4px&#125;.markdown-body pre>code::-webkit-scrollbar-track&#123;background-color:#bedcff&#125;.markdown-body pre>code::-webkit-scrollbar-thumb&#123;background-color:#2196f3;border-radius:10px&#125;.markdown-body a&#123;position:relative;text-decoration:none;color:#3da8f5;border-bottom:1px solid #bedcff&#125;.markdown-body a:hover&#123;color:#007fff;border-bottom-color:#007fff&#125;.markdown-body a:active&#123;color:#007fff&#125;.markdown-body a:after&#123;position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid #bedcff;transition:top .3s,opacity .3s;transform:translateZ(0)&#125;.markdown-body a:hover:after&#123;top:0;opacity:1;border-bottom-color:#007fff&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #c3e0fd;border-spacing:0;border-collapse:collapse&#125;.markdown-body table thead&#123;color:#000;text-align:left;font-size:14px;background:#f6f6f6&#125;.markdown-body table tr:nth-child(2n)&#123;background-color:#f7fbff&#125;.markdown-body table tr:hover&#123;background-color:#e0edf7&#125;.markdown-body table td,.markdown-body table th&#123;padding:12px 8px;line-height:24px;border:1px solid #c3e0fd&#125;.markdown-body table th&#123;color:#005bb7;background-color:#dff0ff&#125;.markdown-body table td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#8c8c8c;border-left:4px solid #2196f3;background-color:#f0fdff;padding:1px 20px;margin:22px 0&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body b,.markdown-body blockquote>b,.markdown-body blockquote>strong,.markdown-body strong&#123;color:#2196f3&#125;.markdown-body em,.markdown-body i&#123;color:#4fc3f7&#125;.markdown-body del&#123;color:#ccc&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:4px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body details>summary&#123;outline:none;color:#005bb7;font-size:20px;font-weight:bolder;border-bottom:1px solid #bedcff;cursor:pointer&#125;.markdown-body details>p&#123;padding:10px 20px;margin:10px 0 0;color:#666;background-color:#f0fdff;border:2px dashed #2196f3&#125;.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection&#123;color:#005bb7;background-color:rgba(160,200,255,.15)&#125;.markdown-body p::selection&#123;color:#c80000&#125;.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection&#123;background-color:transparent&#125;.markdown-body code::selection&#123;background-color:#ffeaeb&#125;.markdown-body pre>code::selection&#123;background-color:rgba(160,200,255,.25)&#125;.markdown-body ol ::selection,.markdown-body ul ::selection&#123;background-color:rgba(160,200,255,.15)&#125;.markdown-body .contains-task-list&#123;padding-left:14px;list-style:none&#125;.markdown-body .contains-task-list input[type=checkbox]&#123;position:relative&#125;.markdown-body .contains-task-list input[type=checkbox]:before&#123;content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1&#125;.markdown-body .contains-task-list input[type=checkbox]:checked:after&#123;content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><p><strong>è¿™æ˜¯æˆ‘å‚ä¸8æœˆæ›´æ–‡æŒ‘æˆ˜çš„ç¬¬26å¤©ï¼Œæ´»åŠ¨è¯¦æƒ…æŸ¥çœ‹ï¼š<a href="https://juejin.cn/post/6987962113788493831" title="https://juejin.cn/post/6987962113788493831" target="_blank">8æœˆæ›´æ–‡æŒ‘æˆ˜</a></strong></p>
<h2 data-id="heading-0">å‰è¨€</h2>
<blockquote>
<p>â€œå…«æœˆçš„è‰²å½©æ˜¯ç”¨é‡‘å­é“¸å°±çš„ï¼Œæ˜äº®è€Œçè´µï¼›å…«æœˆçš„è‰²å½©æ˜¯ç”¨é˜³å…‰é…¿é€ çš„ï¼ŒèŠ¬èŠ³è€Œç¿çƒ‚ã€‚â€</p>
</blockquote>
<p>æœªæ¥çš„æ—¥å­ï¼Œæ„¿ä½ æŠŠè‡ªå·±è°ƒè‡³æœ€ä½³çŠ¶æ€ï¼Œç¼“ç¼“åŠªåŠ›ï¼Œæ…¢æ…¢å˜å¥½ Y(^o^)Y</p>
<p><code>react native</code> åœ¨æ—¥å¸¸çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸ºäº†æé«˜ç”¨æˆ·çš„ä½“éªŒåº¦ï¼Œé€šå¸¸ä¼šåŠ å…¥ä¸€äº›åŠ¨ç”»ã€‚<code>react native</code> ä¹Ÿä¸ºå¼€å‘ä¸­æä¾›äº†å®ç°åŠ¨ç”»æ•ˆæœçš„<code>Animated</code>åº“ã€‚</p>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯Animated</h3>
<p><code>Animated</code>åº“æ—¨åœ¨ä½¿åŠ¨ç”»å˜å¾—æµç•…ï¼Œå¼ºå¤§å¹¶æ˜“äºæ„å»ºå’Œç»´æŠ¤ã€‚<code>Animated</code>ä¾§é‡äºè¾“å…¥å’Œè¾“å‡ºä¹‹é—´çš„å£°æ˜æ€§å…³ç³»ï¼Œä»¥åŠä¸¤è€…ä¹‹é—´çš„å¯é…ç½®å˜æ¢ï¼Œæ­¤å¤–è¿˜æä¾›äº†ç®€å•çš„ <code>start/stop</code>æ–¹æ³•æ¥æ§åˆ¶åŸºäºæ—¶é—´çš„åŠ¨ç”»æ‰§è¡Œï¼Œç›´æ¥é“¾å¼è°ƒç”¨å³å¯ã€‚</p>
<p>åˆ›å»ºåŠ¨ç”»æœ€åŸºæœ¬çš„å·¥ä½œæµç¨‹æ˜¯å…ˆåˆ›å»ºä¸€ä¸ª <code>Animated.Value</code> ï¼Œå°†å®ƒè¿æ¥åˆ°åŠ¨ç”»ç»„ä»¶çš„ä¸€ä¸ªæˆ–å¤šä¸ªæ ·å¼å±æ€§ï¼Œç„¶åä½¿ç”¨<code>Animated.timing()</code>é€šè¿‡åŠ¨ç”»æ•ˆæœå±•ç¤ºæ•°æ®çš„å˜åŒ–ã€‚</p>
<p>æ³¨æ„å®ƒçš„ç”¨æ³•ï¼š</p>
<blockquote>
<p>åœ¨å‡½æ•°æ˜¯ç»„ä»¶ä¸­ï¼Œç”¨useRef Hookæ¥è¿”å›ä¸€ä¸ªå¯ä¿®æ”¹çš„ ref å¼•ç”¨ã€‚ref å¯¹è±¡çš„currentå±æ€§åœ¨åˆå§‹åŒ–æ—¶è¢«èµ‹äºˆç»™å®šçš„åŠ¨ç”»å€¼ï¼Œä¸”åœ¨ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå†…ä¿å­˜ä¸è¢«é”€æ¯ã€‚</p>
</blockquote>
<blockquote>
<p>åœ¨ class ç»„ä»¶ä¸­ï¼Œåœ¨ class ç»„ä»¶ä¸­ä½¿ç”¨ä¸€ä¸ªçŠ¶æ€å˜é‡æˆ–æ˜¯æˆå‘˜å˜é‡æ¥å­˜æ”¾å®ƒã€‚ä¸è¦ç›´æ¥ä¿®æ”¹åŠ¨ç”»å€¼</p>
</blockquote>
<h3 data-id="heading-2"><code>Animated</code> çš„å€¼ç±»å‹</h3>
<ul>
<li><code>Animated.Value()</code> ç”¨äºå•ä¸ªå€¼</li>
<li><code>Animated.ValueXY()</code> ç”¨äºçŸ¢é‡å€¼</li>
</ul>
<p><code>Animated.Value()</code> å¯ä»¥ä½œä¸ºæ ·å¼æˆ–è€…å…¶ä»–å±æ€§çš„å€¼ï¼Œå¯ä»¥ç”¨åœ¨ä»»æ„å¤šä¸ªå±æ€§ä¸Šã€‚</p>
<pre><code class="copyable">const opacityVal = useRef(new Animated.Value(0)).current;

...
return(
  <Animated.View
        style=&#123;[
          &#123;
            opacity: opacityVal // Bind opacity to animated value
          &#125;
        ]&#125;
      >
        <Text>opacity</Text>
      </Animated.View>
)
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-3">åŠ¨ç”»é…ç½®</h3>
<p><code>Animated</code>æä¾›äº†ä¸‰ç§ç‰¹å®šçš„å‡½æ•°æ›²çº¿ï¼Œç”¨äºæ§åˆ¶åŠ¨ç”»å€¼éšæ—¶é—´çš„å˜åŒ–è¿‡ç¨‹ï¼š</p>
<ul>
<li><code>Animated.decay()</code> ä»¥æŒ‡å®šçš„åˆå§‹é€Ÿåº¦å¼€å§‹å˜åŒ–ï¼Œç„¶åå˜åŒ–é€Ÿåº¦è¶Šæ¥è¶Šæ…¢ç›´è‡³åœä¸‹ã€‚</li>
<li><code>Animated.spring()</code> æä¾›äº†ä¸€ä¸ªåŸºç¡€çš„å¼¹ç°§ç‰©ç†æ¨¡å‹.</li>
<li><code>Animated.timing()</code> ä½¿ç”¨<code>easing</code> å‡½æ•°è®©æ•°å€¼éšæ—¶é—´åŠ¨èµ·æ¥ã€‚</li>
</ul>
<h3 data-id="heading-4">å¯ç”¨åŠ¨ç”»</h3>
<p>åœ¨<code>Animated</code>ä¸Šé“¾å¼è°ƒç”¨<code>start()</code>æ¥å¯åŠ¨åŠ¨ç”»ï¼Œstart()å¯ä»¥ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œä»¥ä¾¿åœ¨åŠ¨ç”»å®Œæˆæ—¶å¾—åˆ°é€šçŸ¥è°ƒç”¨ã€‚å¦‚æœåŠ¨ç”»è¿è¡Œæ­£å¸¸ï¼Œåˆ™å®Œæˆå›è°ƒæ”¶åˆ°çš„å€¼ä¸º<code>&#123;finishedï¼štrue&#125;</code>ã€‚å¦‚æœåŠ¨ç”»æ˜¯å› ä¸ºè°ƒç”¨äº†<code>stop()</code>è€Œç»“æŸï¼ˆä¾‹å¦‚ï¼Œå› ä¸ºå®ƒè¢«æ‰‹åŠ¿æˆ–å…¶ä»–åŠ¨ç”»ä¸­æ–­ï¼‰ï¼Œåˆ™å®ƒä¼šæ”¶åˆ°<code>&#123;finishedï¼šfalse&#125;</code>ã€‚</p>
<pre><code class="copyable">const onClick = () => &#123;
    // Will change opacityVal value to 1 in 5 seconds
    Animated.timing(opacityVal, &#123;
      toValue: 1,
      duration: 5000
    &#125;).start();
  &#125;;

<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-5">ç»“è¯­</h2>
<p>ä»Šå¤©çš„æ–‡ç« æ˜¯ç®€å•å›é¡¾ä¸€ä¸‹<code>Animated</code>çš„è¦ç‚¹å’ŒåŸºæœ¬ä½¿ç”¨æ–¹æ³•ã€‚æ˜å¤©ç»§ç»­ä½¿ç”¨<code>Animated</code>æ¥å®Œæˆä¸€ä¸ªç§»åŠ¨ç«¯çš„æ»‘åŠ¨åˆ é™¤åŠŸèƒ½ã€‚</p>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¸®åˆ°äº†ä½ ï¼Œæ¬¢è¿ç‚¹èµğŸ‘å’Œå…³æ³¨â­ï¸ã€‚</p>
<p>æ–‡ç« å¦‚æœ‰é”™è¯¯ä¹‹å¤„ï¼Œå¸Œæœ›åœ¨è¯„è®ºåŒºæŒ‡æ­£ğŸ™ğŸ™ã€‚</p></div>  
</div>
            