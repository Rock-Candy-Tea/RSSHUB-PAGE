
---
title: 'JavaScript é¢è¯•çŸ¥è¯†ç‚¹ ğŸ“ ğŸ‰ï½ï¼ˆ0x61 - 0x80ï¼‰'
categories: 
 - ç¼–ç¨‹
 - æ˜é‡‘
 - åˆ†ç±»
headimg: 'https://picsum.photos/400/300?random=3286'
author: æ˜é‡‘
comments: false
date: Sat, 28 Aug 2021 19:58:07 GMT
thumbnail: 'https://picsum.photos/400/300?random=3286'
---

<div>   
<div class="markdown-body html cache"><style>@charset "UTF-8";.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:#353535&#125;.markdown-body h1&#123;padding-bottom:4px;font-size:30px&#125;.markdown-body h1,.markdown-body h2&#123;margin-top:36px;margin-bottom:10px;line-height:1.5;color:#005bb7&#125;.markdown-body h2&#123;position:relative;padding-left:16px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h2:before&#123;content:"ã€Œ";position:absolute;top:-6px;left:-10px&#125;.markdown-body h2:after&#123;content:"ã€";position:absolute;top:6px;right:auto&#125;.markdown-body h3&#123;position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:#005bb7;padding-left:6px&#125;.markdown-body h3:before&#123;content:"Â»";padding-right:6px;color:#2196f3&#125;.markdown-body h4&#123;margin-top:24px;font-size:16px&#125;.markdown-body h4,.markdown-body h5&#123;padding-bottom:0;margin-bottom:10px;line-height:1.5;color:#005bb7;padding-left:6px&#125;.markdown-body h5&#123;margin-top:18px;font-size:14px&#125;.markdown-body h6&#123;padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:#005bb7;padding-left:6px&#125;.markdown-body p&#123;line-height:inherit;margin-top:16px;margin-bottom:16px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#007fff,rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),#007fff);border-width:0;overflow:visible&#125;.markdown-body hr:after&#123;content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center&#125;.markdown-body code&#123;padding:.065em .4em;font-size:.87em;color:#c2185b;word-break:break-word;overflow-x:auto;background-color:#fff4f4;border-radius:2px&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8&#125;.markdown-body pre>code::-webkit-scrollbar&#123;width:4px;height:4px&#125;.markdown-body pre>code::-webkit-scrollbar-track&#123;background-color:#bedcff&#125;.markdown-body pre>code::-webkit-scrollbar-thumb&#123;background-color:#2196f3;border-radius:10px&#125;.markdown-body a&#123;position:relative;text-decoration:none;color:#3da8f5;border-bottom:1px solid #bedcff&#125;.markdown-body a:hover&#123;color:#007fff;border-bottom-color:#007fff&#125;.markdown-body a:active&#123;color:#007fff&#125;.markdown-body a:after&#123;position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid #bedcff;transition:top .3s,opacity .3s;transform:translateZ(0)&#125;.markdown-body a:hover:after&#123;top:0;opacity:1;border-bottom-color:#007fff&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #c3e0fd;border-spacing:0;border-collapse:collapse&#125;.markdown-body table thead&#123;color:#000;text-align:left;font-size:14px;background:#f6f6f6&#125;.markdown-body table tr:nth-child(2n)&#123;background-color:#f7fbff&#125;.markdown-body table tr:hover&#123;background-color:#e0edf7&#125;.markdown-body table td,.markdown-body table th&#123;padding:12px 8px;line-height:24px;border:1px solid #c3e0fd&#125;.markdown-body table th&#123;color:#005bb7;background-color:#dff0ff&#125;.markdown-body table td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#8c8c8c;border-left:4px solid #2196f3;background-color:#f0fdff;padding:1px 20px;margin:22px 0&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body b,.markdown-body blockquote>b,.markdown-body blockquote>strong,.markdown-body strong&#123;color:#2196f3&#125;.markdown-body em,.markdown-body i&#123;color:#4fc3f7&#125;.markdown-body del&#123;color:#ccc&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:4px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body details>summary&#123;outline:none;color:#005bb7;font-size:20px;font-weight:bolder;border-bottom:1px solid #bedcff;cursor:pointer&#125;.markdown-body details>p&#123;padding:10px 20px;margin:10px 0 0;color:#666;background-color:#f0fdff;border:2px dashed #2196f3&#125;.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection&#123;color:#005bb7;background-color:rgba(160,200,255,.15)&#125;.markdown-body p::selection&#123;color:#c80000&#125;.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection&#123;background-color:transparent&#125;.markdown-body code::selection&#123;background-color:#ffeaeb&#125;.markdown-body pre>code::selection&#123;background-color:rgba(160,200,255,.25)&#125;.markdown-body ol ::selection,.markdown-body ul ::selection&#123;background-color:rgba(160,200,255,.15)&#125;.markdown-body .contains-task-list&#123;padding-left:14px;list-style:none&#125;.markdown-body .contains-task-list input[type=checkbox]&#123;position:relative&#125;.markdown-body .contains-task-list input[type=checkbox]:before&#123;content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1&#125;.markdown-body .contains-task-list input[type=checkbox]:checked:after&#123;content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><h2 data-id="heading-0">TOC</h2>
<ul>
<li><a href="https://juejin.cn/post/7001664785645305887" target="_blank" title="https://juejin.cn/post/7001664785645305887">JavaScript é¢è¯•çŸ¥è¯†ç‚¹ ğŸ“ ğŸ‰ï½ï¼ˆ0x01-0x20ï¼‰</a></li>
<li><a href="https://juejin.cn/post/7001673224350072845" target="_blank" title="https://juejin.cn/post/7001673224350072845">JavaScript é¢è¯•çŸ¥è¯†ç‚¹ ğŸ“ ğŸ‰ï½ï¼ˆ0x21-0x40ï¼‰</a></li>
<li><a href="https://juejin.cn/post/7001689046213165093" target="_blank" title="https://juejin.cn/post/7001689046213165093">JavaScript é¢è¯•çŸ¥è¯†ç‚¹ ğŸ“ ğŸ‰ï½ï¼ˆ0x41-0x60ï¼‰</a></li>
<li><em><strong>> <a href="https://juejin.cn/post/7001694334043029541" target="_blank" title="https://juejin.cn/post/7001694334043029541">JavaScript é¢è¯•çŸ¥è¯†ç‚¹ ğŸ“ ğŸ‰ï½ï¼ˆ0x61-0x80ï¼‰</a></strong></em></li>
</ul>
<h3 data-id="heading-1">è®°å¾—<strong>ä¸‰è¿+å…³æ³¨</strong>å—·å—·ï½</h3>
<h2 data-id="heading-2">0x61 å¦‚ä½•å®ç° AJAXï¼Ÿ</h2>
<p>å…·ä½“æ¥è¯´ï¼ŒAJAX åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ã€‚</p>
<p>1.åˆ›å»º XMLHttpRequest å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯åˆ›å»ºä¸€ä¸ªå¼‚æ­¥è°ƒç”¨å¯¹è±¡ 2.åˆ›å»ºä¸€ä¸ªæ–°çš„ HTTP è¯·æ±‚ï¼Œå¹¶æŒ‡å®šè¯¥ HTTP è¯·æ±‚çš„æ–¹æ³•ã€URL åŠéªŒè¯ä¿¡æ¯ 3.è®¾ç½®å“åº” HTTP è¯·æ±‚çŠ¶æ€å˜åŒ–çš„å‡½æ•° 4.å‘é€ HTTP è¯·æ±‚ 5.è·å–å¼‚æ­¥è°ƒç”¨è¿”å›çš„æ•°æ® 6.ä½¿ç”¨ JavaScript å’Œ DOM å®ç°å±€éƒ¨åˆ·æ–°</p>
<p>ä¸€èˆ¬å®ç°ï¼š</p>
<h3 data-id="heading-3">1. å¦‚ä½•ä¿®æ”¹é¡µé¢ URL è€Œä¸åˆ·æ–°é¡µé¢ï¼Ÿ</h3>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>window.history.pushState</code> æ–¹æ³•ï¼Œä¿®æ”¹å¯¼èˆªæ åœ°å€ã€‚</p>
<h4 data-id="heading-4">2. å®Œæ•´å®ç°</h4>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">const</span> SERVER_URL = <span class="hljs-string">"/server"</span>;

<span class="hljs-keyword">let</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();

<span class="hljs-comment">// åˆ›å»º Http è¯·æ±‚</span>
xhr.open(<span class="hljs-string">"GET"</span>, SERVER_URL, <span class="hljs-literal">true</span>);

<span class="hljs-comment">// è®¾ç½®çŠ¶æ€ç›‘å¬å‡½æ•°</span>
xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.readyState !== <span class="hljs-number">4</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// å½“è¯·æ±‚æˆåŠŸæ—¶</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.status === <span class="hljs-number">200</span>) &#123;
        handle(<span class="hljs-built_in">this</span>.response);
    &#125; <span class="hljs-keyword">else</span> &#123;
        <span class="hljs-built_in">console</span>.error(<span class="hljs-built_in">this</span>.statusText);
    &#125;
&#125;;

<span class="hljs-comment">// è®¾ç½®è¯·æ±‚å¤±è´¥æ—¶çš„ç›‘å¬å‡½æ•°</span>
xhr.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-built_in">console</span>.error(<span class="hljs-built_in">this</span>.statusText);
&#125;;

<span class="hljs-comment">// è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯</span>
xhr.responseType = <span class="hljs-string">"json"</span>;
xhr.setRequestHeader(<span class="hljs-string">"Accept"</span>, <span class="hljs-string">"application/json"</span>);

<span class="hljs-comment">// å‘é€ Http è¯·æ±‚</span>
xhr.send(<span class="hljs-literal">null</span>);

<span class="hljs-comment">// promise å°è£…å®ç°ï¼š</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getJSON</span>(<span class="hljs-params">url</span>) </span>&#123;
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª promise å¯¹è±¡</span>
    <span class="hljs-keyword">let</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>&#123;
        <span class="hljs-keyword">let</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();

        <span class="hljs-comment">// æ–°å»ºä¸€ä¸ª http è¯·æ±‚</span>
        xhr.open(<span class="hljs-string">"GET"</span>, url, <span class="hljs-literal">true</span>);

        <span class="hljs-comment">// è®¾ç½®çŠ¶æ€çš„ç›‘å¬å‡½æ•°</span>
        xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.readyState !== <span class="hljs-number">4</span>) <span class="hljs-keyword">return</span>;

            <span class="hljs-comment">// å½“è¯·æ±‚æˆåŠŸæˆ–å¤±è´¥æ—¶ï¼Œæ”¹å˜ promise çš„çŠ¶æ€</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.status === <span class="hljs-number">200</span>) &#123;
                resolve(<span class="hljs-built_in">this</span>.response);
            &#125; <span class="hljs-keyword">else</span> &#123;
                reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-built_in">this</span>.statusText));
            &#125;
        &#125;;

        <span class="hljs-comment">// è®¾ç½®é”™è¯¯ç›‘å¬å‡½æ•°</span>
        xhr.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
            reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-built_in">this</span>.statusText));
        &#125;;

        <span class="hljs-comment">// è®¾ç½®å“åº”çš„æ•°æ®ç±»å‹</span>
        xhr.responseType = <span class="hljs-string">"json"</span>;

        <span class="hljs-comment">// è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯</span>
        xhr.setRequestHeader(<span class="hljs-string">"Accept"</span>, <span class="hljs-string">"application/json"</span>);

        <span class="hljs-comment">// å‘é€ http è¯·æ±‚</span>
        xhr.send(<span class="hljs-literal">null</span>);
    &#125;);

    <span class="hljs-keyword">return</span> promise;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-5">0x62 undefined ä¸ null çš„åŒºåˆ«ï¼Ÿ</h2>
<p>å¾ˆå¤šçš„ç¼–ç¨‹è¯­è¨€éƒ½æœ‰ä¸€ç§è¡¨ç¤ºç©ºå€¼çš„ç±»å‹ï¼Œå«åš <code>null</code>ã€‚å®ƒæŒ‡ç¤ºäº†ä¸€ä¸ªå˜é‡å½“å‰å¹¶æ²¡æœ‰æŒ‡å‘ä»»ä½•å¯¹è±¡ â€”â€” ä¾‹å¦‚ï¼ŒæŸä¸ªå˜é‡è¿˜æ²¡æœ‰åˆå§‹åŒ–çš„æ—¶å€™ã€‚</p>
<p>ä½œä¸ºä¸åŒï¼ŒJavaScript åˆ™æ‹¥æœ‰ä¸¤ç§è¡¨ç¤ºç©ºå€¼çš„ç±»å‹ï¼Œä¸€ç§æ˜¯ <code>undefined</code>ï¼Œå¦ä¸€ç§åˆ™æ˜¯ <code>null</code>ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æµ‹è¯•å®ƒä»¬çš„åŒºåˆ«ï¼Œä»¥åŠå¦‚ä½•å»æŒ‘é€‰æœ€ä½³çš„ç±»å‹æˆ–é¿å…å»ä½¿ç”¨å®ƒä»¬ã€‚</p>
<h3 data-id="heading-6"><code>undefined</code> vs. <code>null</code></h3>
<p>ä¸¤ä¸ªå€¼éƒ½å¾ˆæ˜¯ç›¸åƒï¼Œå¹¶ä¸”é€šå¸¸è¢«ç›¸äº’æ›¿ä»£ç€ä½¿ç”¨ï¼Œä¹Ÿå› æ­¤ï¼Œä»–ä»¬ä¹‹é—´çš„åŒºåˆ«å¾ˆæ˜¯ç»†å¾®ã€‚</p>
<h4 data-id="heading-7"><code>undefined</code>ã€<code>null</code> åœ¨ ECMAScript è¯­è¨€æ ‡å‡†ä¸Šçš„å¯¹æ¯”</h4>
<p>ECMAScript è¯­è¨€æ ‡å‡†æŒ‰ç…§å¦‚ä¸‹å†…å®¹æè¿°ä»–ä»¬ï¼š</p>
<ul>
<li><code>undefined</code> æ˜¯åœ¨ä¸€ä¸ªå˜é‡è¿˜æ²¡æœ‰è¢«èµ‹å€¼æ—¶å€™ä½¿ç”¨çš„ã€‚<sup><a href="https://link.juejin.cn/?target=https%3A%2F%2Ftc39.es%2Fecma262%2F%23sec-undefined-value" target="_blank" rel="nofollow noopener noreferrer" title="https://tc39.es/ecma262/#sec-undefined-value" ref="nofollow noopener noreferrer">å‡ºå¤„</a></sup></li>
<li><code>null</code> è¡¨ç¤ºä»»ä½•æœ‰æ„åœ°ç¼ºçœå¯¹è±¡å€¼ã€‚<sup><a href="https://link.juejin.cn/?target=https%3A%2F%2Ftc39.es%2Fecma262%2F%23sec-null-value" target="_blank" rel="nofollow noopener noreferrer" title="https://tc39.es/ecma262/#sec-null-value" ref="nofollow noopener noreferrer">å‡ºå¤„</a></sup></li>
</ul>
<p>æˆ‘ä»¬ç­‰ä¸‹å°±ä¼šæ¢ç´¢ä¸€ä¸‹ä½œä¸ºç¨‹åºå‘˜ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•å»ä»¥æœ€ä½³çš„æ–¹å¼ä½¿ç”¨è¿™ä¸¤ä¸ªå€¼ã€‚</p>
<h4 data-id="heading-8">ä¸¤ä¸ªç©ºå€¼ â€”â€” ä¸€ä¸ªä¸èƒ½å¼¥è¡¥çš„é”™è¯¯</h4>
<p>åœ¨ JavaScript ä¸­åŒæ—¶æœ‰ä¸¤ä¸ªè¡¨ç¤ºç©ºå€¼çš„å€¼ç°åœ¨è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªè®¾è®¡é”™è¯¯ï¼ˆå“ªæ€•æ˜¯ JavaScript ä¹‹çˆ¶ Brendan Eich ä¹Ÿè¿™ä¹ˆè®¤ä¸ºï¼‰ã€‚</p>
<p>é‚£ä¹ˆä¸ºä»€ä¹ˆä¸ä» JavaScript ä¸­åˆ é™¤è¿™ä¸¤ä¸ªå€¼ä¹‹ä¸€å‘¢ï¼ŸJavaScript çš„ä¸€é¡¹æ ¸å¿ƒåŸåˆ™æ˜¯æ°¸ä¸ç ´åå‘åçš„å…¼å®¹æ€§ã€‚è¯¥åŸåˆ™å…·æœ‰<a href="https://link.juejin.cn/?target=https%3A%2F%2Fexploringjs.com%2Fimpatient-js%2Fch_history.html%23backward-compatibility" target="_blank" rel="nofollow noopener noreferrer" title="https://exploringjs.com/impatient-js/ch_history.html#backward-compatibility" ref="nofollow noopener noreferrer">å¥½å¤„</a>ï¼Œä½†åŒæ—¶ä¹Ÿæ‹¥æœ‰ç€æœ€å¤§çš„ç¼ºç‚¹ï¼Œå³æ— æ³•å¼¥è¡¥è®¾è®¡é”™è¯¯ã€‚</p>
<h4 data-id="heading-9"><code>undefined</code> å’Œ <code>null</code> çš„å†å²</h4>
<p>åœ¨ Javaï¼ˆå½±å“äº† JavaScript å¾ˆå¤šæ–¹é¢çš„è¯­è¨€ï¼‰ä¸­åˆå§‹å€¼ä¾èµ–äºä¸€ä¸ªå˜é‡çš„é™æ€ç±»å‹ï¼š</p>
<ul>
<li>ä»¥å¯¹è±¡å€¼ä¸ºç±»å‹çš„å˜é‡åˆå§‹åŒ–ä¸º <code>null</code>ã€‚</li>
<li>æ¯ä¸ªåŸºæœ¬ç±»å‹éƒ½æ‹¥æœ‰å®ƒçš„åˆå§‹å€¼ï¼Œä¾‹å¦‚ <code>int</code> æ•´å‹å¯¹åº” <code>0</code>ã€‚</li>
</ul>
<p>åœ¨ JavaScript ä¸­ï¼Œæ¯ä¸€ä¸ªå˜é‡éƒ½å¯ä»¥å­˜å‚¨å¯¹è±¡å€¼æˆ–åŸå§‹å€¼ï¼Œæ„å‘³ç€å¦‚æœ <code>null</code> è¡¨ç¤ºä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆ JavaScript ä¹ŸåŒæ—¶éœ€è¦ä¸€ä¸ªåˆå§‹å€¼è¡¨ç¤ºæ—¢ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ä¹Ÿä¸æ‹¥æœ‰åŸå§‹å€¼ï¼Œè¿™å°±æ˜¯ <code>undefined</code>ã€‚</p>
<h4 data-id="heading-10"><code>undefined</code> çš„å‡ºç°åœºåˆ</h4>
<p>å¦‚æœä¸€ä¸ªå˜é‡ <code>myVar</code> è¿˜æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œé‚£ä¹ˆå®ƒçš„å€¼å°±æ˜¯ <code>undefined</code>ï¼š</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">let</span> myVar;
assert.equal(myVar, <span class="hljs-literal">undefined</span>);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å¦‚æœä¸€ä¸ªå±æ€§ <code>.unknownProp</code> ä¸å­˜åœ¨ï¼Œè®¿é—®è¿™ä¸ªå±æ€§å°±ä¼šç”Ÿæˆ <code>undefined</code> å€¼ï¼š</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">const</span> obj = &#123;&#125;;
assert.equal(obj.unknownProp, <span class="hljs-literal">undefined</span>);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å¦‚æœä¸€ä¸ªå‡½æ•°æ²¡æœ‰æ˜ç¡®è¿”å›ä»»ä½•å†…å®¹ï¼Œé‚£ä¹ˆé»˜è®¤å°±ä¼šè¿”å› <code>undefined</code>ï¼š</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myFunc</span>(<span class="hljs-params"></span>) </span>&#123;
&#125;

assert.equal(myFunc(), <span class="hljs-literal">undefined</span>);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å¦‚æœä¸€ä¸ªå‡½æ•°æ‹¥æœ‰ä¸€ä¸ª <code>return</code> è¯­å¥ä½†æ²¡æœ‰æŒ‡å®šä»»ä½•è¿”å›å€¼ï¼Œé‚£ä¹ˆä¹Ÿä¼šé»˜è®¤è¿”å› <code>undefined</code>ï¼š</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myFunc</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">return</span>;
&#125;

assert.equal(myFunc(), <span class="hljs-literal">undefined</span>);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å¦‚æœä¸€ä¸ªå‚æ•° <code>x</code> æ²¡æœ‰ä¼ å®å‚ï¼Œé‚£ä¹ˆå°±ä¼šè¢«åˆå§‹åŒ–ä¸º <code>undefined</code>ï¼š</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myFunc</span>(<span class="hljs-params">x</span>) </span>&#123;
    assert.equal(x, <span class="hljs-literal">undefined</span>);
&#125;

myFunc();
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>é€šè¿‡ <code>obj?.someProp</code> è®¿é—®çš„<a href="https://link.juejin.cn/?target=https%3A%2F%2Fexploringjs.com%2Fimpatient-js%2Fch_single-objects.html%23optional-chaining" target="_blank" rel="nofollow noopener noreferrer" title="https://exploringjs.com/impatient-js/ch_single-objects.html#optional-chaining" ref="nofollow noopener noreferrer">å¯é€‰é“¾</a>åœ¨<code> obj</code> æ˜¯ <code>undefined</code> æˆ– <code>null</code> çš„æ—¶å€™è¿”å› <code>undefined</code>ï¼š</p>
<pre><code class="hljs language-repl copyable" lang="repl">> undefined?.someProp
undefined
> null?.someProp
undefined
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h4 data-id="heading-11"><code>null</code> çš„å‡ºç°åœºåˆ</h4>
<p>ä¸€ä¸ªå¯¹è±¡çš„åŸå‹è¦ä¹ˆæ˜¯å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè¦ä¹ˆæ˜¯åŸå‹é“¾æœ«å°¾çš„ <code>null</code>ã€‚<code>Object.prototype</code> æ²¡æœ‰åŸå‹ï¼š</p>
<pre><code class="hljs language-repl copyable" lang="repl">> Object.getPrototypeOf(Object.prototype)
null
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼ˆä¾‹å¦‚ <code>/a/</code>ï¼‰åŒ¹é…ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ <code>x</code>ï¼‰ï¼Œæˆ‘ä»¬è¦ä¹ˆå¾—åˆ°ä¸€ä¸ªå­˜å‚¨ç€åŒ¹é…æ•°æ®çš„å¯¹è±¡ï¼ˆå¦‚æœåŒ¹é…æˆåŠŸï¼‰ï¼Œè¦ä¹ˆå¾—åˆ° <code>null</code>ï¼ˆå¦‚æœåŒ¹é…å¤±è´¥ï¼‰ã€‚</p>
<pre><code class="hljs language-repl copyable" lang="repl">> /a/.exec('x')
null
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fexploringjs.com%2Fimpatient-js%2Fch_json.html" target="_blank" rel="nofollow noopener noreferrer" title="https://exploringjs.com/impatient-js/ch_json.html" ref="nofollow noopener noreferrer">JSON æ•°æ®æ ¼å¼</a> ä¸æ”¯æŒ <code>undefined</code>ï¼Œåªæ”¯æŒ <code>null</code>ï¼š</p>
<pre><code class="hljs language-repl copyable" lang="repl">> JSON.stringify(&#123;a: undefined, b: null&#125;)
'&#123;"b":null&#125;'
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-12">ä¸“é—¨ç”¨æ¥å¯¹ä»˜ <code>undefined</code> å’Œ <code>null</code> çš„æ“ä½œç¬¦</h3>
<h4 data-id="heading-13"><code>undefined</code> ä»¥åŠé»˜è®¤å‚æ•°å€¼</h4>
<p>ä¸€ä¸ªå‚æ•°çš„é»˜è®¤å€¼ä¼šåœ¨ä»¥ä¸‹æƒ…å†µä¸‹è¢«ä½¿ç”¨ï¼š</p>
<ul>
<li>è¿™ä¸ªå‚æ•°è¢«æˆ‘ä»¬å¿½ç•¥æ‰äº†ã€‚</li>
<li>è¿™ä¸ªå‚æ•°è¢«èµ‹äºˆ <code>undefined</code> å€¼ã€‚</li>
</ul>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myFunc</span>(<span class="hljs-params">arg = <span class="hljs-string">"abc"</span></span>) </span>&#123;
    <span class="hljs-keyword">return</span> arg;
&#125;

assert.equal(myFunc(<span class="hljs-string">"hello"</span>), <span class="hljs-string">"hello"</span>);
assert.equal(myFunc(), <span class="hljs-string">"abc"</span>);
assert.equal(myFunc(<span class="hljs-literal">undefined</span>), <span class="hljs-string">"abc"</span>);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å½“æŒ‡å‘å®ƒçš„å€¼ä¸ºä¸€ä¸ªå…ƒå€¼æ—¶ï¼Œ<code>undefined</code> ä¹Ÿä¼šè§¦å‘é»˜è®¤å‚æ•°å€¼ã€‚</p>
<p>ä»¥ä¸‹çš„ä¾‹å­ç¤ºèŒƒäº†è¿™ä¸ªç‰¹æ€§æœ‰ç”¨çš„åœ°æ–¹ï¼š</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">concat</span>(<span class="hljs-params">str1 = <span class="hljs-string">""</span>, str2 = <span class="hljs-string">""</span></span>) </span>&#123;
    <span class="hljs-keyword">return</span> str1 + str2;
&#125;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">twice</span>(<span class="hljs-params">str</span>) </span>&#123;
    <span class="hljs-comment">// (A)</span>
    <span class="hljs-keyword">return</span> concat(str, str);
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>åœ¨ A è¡Œï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰åˆ¶å®šå‚æ•° <code>str</code> çš„é»˜è®¤å€¼ï¼Œè€Œå½“è¿™ä¸ªå‚æ•°è¢«å¿½ç•¥æ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°†è¯¥çŠ¶æ€è½¬å‘åˆ° <code>concat()</code>ï¼Œè®©å…¶é€‰æ‹©é»˜è®¤å€¼ã€‚</p>
<h4 data-id="heading-14"><code>undefined</code>ï¼Œè§£æ„é»˜è®¤å€¼</h4>
<p>è§£æ„ä¸‹çš„é»˜è®¤å€¼çš„å·¥ä½œæ–¹å¼ä¸å‚æ•°é»˜è®¤å€¼ç±»ä¼¼ â€”â€” å¦‚æœå˜é‡åœ¨æ•°æ®ä¸­ä¸åŒ¹é…æˆ–ä¸ <code>undefined</code> åŒ¹é…ï¼Œåˆ™ä½¿ç”¨å®ƒä»¬ï¼š</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">const</span> [a = <span class="hljs-string">"a"</span>] = [];
assert.equal(a, <span class="hljs-string">"a"</span>);

<span class="hljs-keyword">const</span> [b = <span class="hljs-string">"b"</span>] = [<span class="hljs-literal">undefined</span>];
assert.equal(b, <span class="hljs-string">"b"</span>);

<span class="hljs-keyword">const</span> &#123;<span class="hljs-attr">prop</span>: c = <span class="hljs-string">"c"</span>&#125; = &#123;&#125;;
assert.equal(c, <span class="hljs-string">"c"</span>);

<span class="hljs-keyword">const</span> &#123;<span class="hljs-attr">prop</span>: d = <span class="hljs-string">"d"</span>&#125; = &#123;<span class="hljs-attr">prop</span>: <span class="hljs-literal">undefined</span>&#125;;
assert.equal(d, <span class="hljs-string">"d"</span>);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h4 data-id="heading-15"><code>undefined</code>ã€<code>null</code> å’Œå¯é€‰é“¾</h4>
<p>å¦‚æœé€šè¿‡ <code>value?.prop</code> ä½¿ç”¨äº†<a href="https://link.juejin.cn/?target=https%3A%2F%2Fexploringjs.com%2Fimpatient-js%2Fch_single-objects.html%23optional-chaining" target="_blank" rel="nofollow noopener noreferrer" title="https://exploringjs.com/impatient-js/ch_single-objects.html#optional-chaining" ref="nofollow noopener noreferrer">å¯é€‰é“¾</a>ï¼š</p>
<ul>
<li>å¦‚æœ <code>value</code> æ˜¯ <code>undefined</code> æˆ– <code>null</code> çš„ï¼Œå°†ä¼šè¿”å› <code>undefined</code>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœ <code>value.prop</code> æŠ›å‡ºé”™è¯¯ï¼Œå°±ä¼šè¿”å› <code>undefined</code>ã€‚</li>
<li>å¦åˆ™ä¼šè¿”å› <code>value.prop</code>.</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getProp</span>(<span class="hljs-params">value</span>) </span>&#123;
    <span class="hljs-comment">// å¯é€‰çš„é™æ€å±æ€§è®¿é—®</span>
    <span class="hljs-keyword">return</span> value?.prop;
&#125;

assert.equal(getProp(&#123;<span class="hljs-attr">prop</span>: <span class="hljs-number">123</span>&#125;), <span class="hljs-number">123</span>);
assert.equal(getProp(<span class="hljs-literal">undefined</span>), <span class="hljs-literal">undefined</span>);
assert.equal(getProp(<span class="hljs-literal">null</span>), <span class="hljs-literal">undefined</span>);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>ä»¥ä¸‹çš„ä¸¤ä¸ªæ“ä½œä¹Ÿå¾ˆæ˜¯ç±»ä¼¼çš„å·¥ä½œï¼š</p>
<pre><code class="hljs language-js copyable" lang="js">obj?.[Â«exprÂ»] <span class="hljs-comment">// å¯é€‰çš„åŠ¨æ€å±æ€§è®¿é—®</span>
func?.(Â«arg0Â», Â«arg1Â») <span class="hljs-comment">// å¯é€‰çš„å‡½æ•°æˆ–æ–¹æ³•è°ƒç”¨</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h4 data-id="heading-16"><code>undefined</code>ã€<code>null</code> å’Œç©ºåˆå¹¶</h4>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fexploringjs.com%2Fimpatient-js%2Fch_operators.html%23nullish-coalescing-operator" target="_blank" rel="nofollow noopener noreferrer" title="https://exploringjs.com/impatient-js/ch_operators.html#nullish-coalescing-operator" ref="nofollow noopener noreferrer">ç©ºåˆå¹¶æ“ä½œç¬¦ <code>??</code></a> å¯è®©æˆ‘ä»¬åœ¨ä¸€ä¸ªå€¼æ˜¯ <code>undefined</code> æˆ– <code>null</code> æ—¶ï¼Œä½¿ç”¨é»˜è®¤å€¼ï¼š</p>
<pre><code class="hljs language-repl copyable" lang="repl">> undefined ?? 'default value'
'default value'
> null ?? 'default value'
'default value'

> 0 ?? 'default value'
0
> 123 ?? 'default value'
123
> '' ?? 'default value'
''
> 'abc' ?? 'default value'
'abc'
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2F2ality.com%2F2020%2F06%2Flogical-assignment-operators.html" target="_blank" rel="nofollow noopener noreferrer" title="https://2ality.com/2020/06/logical-assignment-operators.html" ref="nofollow noopener noreferrer">ç©ºåˆå¹¶èµ‹å€¼æ“ä½œç¬¦ <code>??=</code></a> åˆå¹¶äº†ç©ºåˆå¹¶æ“ä½œç¬¦ä¸èµ‹å€¼æ“ä½œç¬¦ï¼š</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setName</span>(<span class="hljs-params">obj</span>) </span>&#123;
    obj.name ??= <span class="hljs-string">"(Unnamed)"</span>;
    <span class="hljs-keyword">return</span> obj;
&#125;

assert.deepEqual(setName(&#123;&#125;), &#123;<span class="hljs-attr">name</span>: <span class="hljs-string">"(Unnamed)"</span>&#125;);
assert.deepEqual(setName(&#123;<span class="hljs-attr">name</span>: <span class="hljs-literal">undefined</span>&#125;), &#123;<span class="hljs-attr">name</span>: <span class="hljs-string">"(Unnamed)"</span>&#125;);
assert.deepEqual(setName(&#123;<span class="hljs-attr">name</span>: <span class="hljs-literal">null</span>&#125;), &#123;<span class="hljs-attr">name</span>: <span class="hljs-string">"(Unnamed)"</span>&#125;);
assert.deepEqual(setName(&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">"Jane"</span>&#125;), &#123;<span class="hljs-attr">name</span>: <span class="hljs-string">"Jane"</span>&#125;);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-17">0x63 æˆ‘ä»¬åº”è¯¥å¦‚ä½•å¤„ç† <code>undefined</code> ä¸ <code>null</code>ï¼Ÿ</h2>
<p>ä»¥ä¸‹çš„éƒ¨åˆ†è§£é‡Šäº†åœ¨æˆ‘ä»¬ä»£ç ä¸­æœ€å¸¸è§çš„å¤„ç† <code>undefined</code> å’Œ <code>null</code> çš„æ–¹æ³•ï¼š</p>
<h3 data-id="heading-18">å®é™…å€¼æ—¢ä¸æ˜¯ <code>undefined</code> ä¹Ÿä¸æ˜¯ <code>null</code></h3>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›å±æ€§ <code>file.title</code> å§‹ç»ˆå­˜åœ¨å¹¶ä¸”å§‹ç»ˆæ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆæœ‰ä¸¤ç§å¸¸è§çš„æ–¹æ³•å¯ä»¥å®ç°æ­¤ç›®çš„ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œåœ¨æ­¤åšå®¢æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä»…æ£€æŸ¥ <code>undefined</code> å’Œ <code>null</code>ï¼Œè€Œä¸æ£€æŸ¥å€¼æ˜¯å¦ä¸ºå­—ç¬¦ä¸²ã€‚ä½ éœ€è¦è‡ªå·±å†³å®šæ˜¯å¦è¦æ·»åŠ æ£€æŸ¥å™¨ï¼Œä½œä¸ºé™„åŠ çš„å®‰å…¨ä¿éšœæªæ–½ã€‚</p>
<h4 data-id="heading-19">åŒæ—¶ç¦æ­¢ <code>undefined</code> å’Œ <code>null</code></h4>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createFile</span>(<span class="hljs-params">title</span>) </span>&#123;
    <span class="hljs-keyword">if</span> (title === <span class="hljs-literal">undefined</span> || title === <span class="hljs-literal">null</span>) &#123;
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"`title` must not be nullish"</span>);
    &#125;
    <span class="hljs-comment">// Â·Â·Â·</span>
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ä¸ªæ–¹æ³•ï¼Ÿ</p>
<ul>
<li>
<p>æˆ‘ä»¬å¸Œæœ›ä»¥ç›¸åŒçš„æ–¹å¼å¤„ç† <code>undefined</code> å’Œ <code>null</code>ï¼Œå› ä¸º JavaScript ä»£ç å°±æ˜¯ç»å¸¸é‚£æ ·åšï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// æ£€æŸ¥ä¸€ä¸ªå±æ€§æ˜¯å¦å­˜åœ¨</span>
<span class="hljs-keyword">if</span> (!obj.requiredProp) &#123;
  obj.requiredProp = <span class="hljs-number">123</span>;
&#125;

<span class="hljs-comment">// é€šè¿‡ç©ºåˆå¹¶æ“ä½œç¬¦ä½¿ç”¨é»˜è®¤å€¼</span>
<span class="hljs-keyword">const</span> myValue = myParameter ?? <span class="hljs-string">"some default"</span>;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
</li>
<li>
<p>å¦‚æœæˆ‘ä»¬çš„ä»£ç ä¸­å‡ºç°äº†é—®é¢˜ï¼Œè®© <code>undefined</code> æˆ– <code>null</code> å‡ºç°äº†ï¼Œæˆ‘ä»¬éœ€è¦è®©å®ƒå°½æ—©ç»“æŸæ‰§è¡Œå¹¶æŠ›å‡ºé”™è¯¯ã€‚</p>
</li>
</ul>
<h4 data-id="heading-20">åŒæ—¶å¯¹ <code>undefined</code> å’Œ <code>null</code> ä½¿ç”¨é»˜è®¤å€¼</h4>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createFile</span>(<span class="hljs-params">title</span>) </span>&#123;
    title ??= <span class="hljs-string">"(Untitled)"</span>;
    <span class="hljs-comment">// Â·Â·Â·</span>
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>æˆ‘ä»¬ä¸èƒ½ä½¿ç”¨å‚æ•°é»˜è®¤å€¼ï¼Œå› ä¸ºå®ƒåªä¼šè¢« <code>undefined</code> è§¦å‘ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¾èµ–äº<a href="https://link.juejin.cn/?target=https%3A%2F%2F2ality.com%2F2020%2F06%2Flogical-assignment-operators.html" target="_blank" rel="nofollow noopener noreferrer" title="https://2ality.com/2020/06/logical-assignment-operators.html" ref="nofollow noopener noreferrer">ç©ºåˆå¹¶èµ‹å€¼è¿ç®—ç¬¦ <code>??=</code></a>ã€‚</p>
<p>ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ä¸ªæ–¹æ³•ï¼Ÿ</p>
<ul>
<li>æˆ‘ä»¬å¸Œæœ›ä»¥ç›¸åŒæ–¹å¼å¯¹å¾… <code>undefined</code> å’Œ <code>null</code>ï¼ˆè§ä¸Šæ–‡ï¼‰ã€‚</li>
<li>æˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„ä»£ç æ— å£°ä½†æœ‰åŠ›åœ°å¯¹å¾… <code>undefined</code> å’Œ <code>null</code>ã€‚</li>
</ul>
<h3 data-id="heading-21"><code>undefined</code> æˆ– <code>null</code> æ˜¯ä¸€ä¸ªè¢«å¿½ç•¥çš„å€¼</h3>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›å±æ€§ <code>file.title</code> æ˜¯å­—ç¬¦ä¸²æˆ–æ˜¯è¢«å¿½ç•¥çš„å€¼ï¼ˆå³ <code>file</code> æ²¡æœ‰æ ‡é¢˜ï¼‰ï¼Œé‚£ä¹ˆæœ‰å‡ ç§æ–¹æ³•å¯ä»¥å®ç°æ­¤ç›®çš„ã€‚</p>
<h4 data-id="heading-22"><code>null</code> æ˜¯è¢«å¿½ç•¥å€¼</h4>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createFile</span>(<span class="hljs-params">title</span>) </span>&#123;
    <span class="hljs-keyword">if</span> (title === <span class="hljs-literal">undefined</span>) &#123;
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"`title` ä¸åº”è¯¥æ˜¯ undefined"</span>);
    &#125;
    <span class="hljs-keyword">return</span> &#123;title&#125;;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>æˆ–è€…ï¼Œ<code>undefined</code> ä¹Ÿå¯ä»¥è§¦å‘é»˜è®¤å€¼ï¼š</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createFile</span>(<span class="hljs-params">title = <span class="hljs-string">"(Untitled)"</span></span>) </span>&#123;
    <span class="hljs-keyword">return</span> &#123;title&#125;;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>ä¸ºä»€ä¹ˆè¦é€‰æ‹©è¿™ä¸ªæ–¹æ³•ï¼Ÿ</p>
<ul>
<li>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç©ºå€¼æ¥è¡¨ç¤ºè¢«å¿½ç•¥ã€‚</li>
<li>æˆ‘ä»¬ä¸å¸Œæœ›ç©ºå€¼è§¦å‘å‚æ•°é»˜è®¤å€¼å¹¶ç ´åé»˜è®¤å€¼ã€‚</li>
<li>æˆ‘ä»¬æƒ³å°†ç©ºå€¼å­—ç¬¦ä¸²åŒ–ä¸º JSONï¼ˆè¿™æ˜¯æˆ‘ä»¬æ— æ³•å¯¹ <code>undefined</code> è¿›è¡Œçš„å¤„ç†ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-23"><code>undefined</code> æ˜¯è¢«å¿½ç•¥çš„å€¼</h4>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createFile</span>(<span class="hljs-params">title</span>) </span>&#123;
    <span class="hljs-keyword">if</span> (title === <span class="hljs-literal">null</span>) &#123;
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"`title` ä¸åº”è¯¥æ˜¯ null"</span>);
    &#125;
    <span class="hljs-keyword">return</span> &#123;title&#125;;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ç§æ–¹æ³•ï¼Ÿ</p>
<ul>
<li>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç©ºå€¼æ¥è¡¨ç¤ºè¢«å¿½ç•¥ã€‚</li>
<li>æˆ‘ä»¬ç¡®å®å¸Œæœ›ç©ºå€¼è§¦å‘å‚æ•°æˆ–è§£æ„é»˜è®¤å€¼ã€‚</li>
</ul>
<p><code>undefined</code> çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯å®ƒé€šå¸¸æ˜¯åœ¨ JavaScript ä¸­æ„å¤–èµ‹äºˆçš„ â€”â€” åœ¨æœªåˆå§‹åŒ–çš„å˜é‡ï¼Œå±æ€§åç§°ä¸­çš„é”™å­—ï¼Œå¿˜è®°ä»å‡½æ•°ä¸­è¿”å›å†…å®¹ç­‰ã€‚</p>
<h4 data-id="heading-24">ä¸ºä»€ä¹ˆä¸åŒæ—¶å°† <code>undefined</code> å’Œ <code>null</code> çœ‹ä½œæ˜¯è¢«å¿½ç•¥çš„å€¼ï¼Ÿ</h4>
<p>å½“æ¥æ”¶åˆ°ä¸€ä¸ªå€¼æ—¶ï¼Œå°† <code>undefined</code> å’Œ <code>null</code> éƒ½è§†ä¸º â€œç©ºå€¼â€ æ˜¯æœ‰æ„ä¹‰çš„ã€‚ ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬åˆ›å»ºå€¼æ—¶ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æ¨¡æ£±ä¸¤å¯ï¼Œä»¥é¿å…ä¸å¿…è¦çš„éº»çƒ¦ã€‚</p>
<p>è¿™æŒ‡å‘äº†å¦ä¸€ç§è§’åº¦ï¼šå¦‚æœæˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¢«å¿½ç•¥çš„å€¼ï¼Œä½†åˆä¸æƒ³ä½¿ç”¨ <code>undefined</code> æˆ– <code>null</code> ä½œä¸ºè¢«å¿½ç•¥å€¼æ—¶è¯¥æ€ä¹ˆåŠï¼Ÿçœ‹çœ‹ä¸‹æ–‡å§ï¼š</p>
<h3 data-id="heading-25">å…¶ä»–å¤„ç†è¢«å¿½ç•¥å€¼çš„æ–¹æ³•</h3>
<h4 data-id="heading-26">ç‰¹æ®Šå€¼</h4>
<p>æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªç‰¹æ®Šå€¼ï¼Œæ¯å½“å±æ€§è¢«å¿½ç•¥æ—¶ <code>.title</code> æ—¶å°±ä½¿ç”¨è¯¥å€¼ï¼š</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">const</span> UNTITLED = <span class="hljs-built_in">Symbol</span>(<span class="hljs-string">"UNTITLED"</span>);
<span class="hljs-keyword">const</span> file = &#123;
    <span class="hljs-attr">title</span>: UNTITLED,
&#125;;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h4 data-id="heading-27">Null å¯¹è±¡æ¨¡å¼</h4>
<p><strong>Null å¯¹è±¡æ¨¡å¼</strong> æ¥è‡ª OOPï¼ˆé¢å¯¹å¯¹è±¡ç¼–ç¨‹ï¼‰ï¼š</p>
<ul>
<li>ä¸€ä¸ªå…¬å…±è¶…ç±»çš„æ‰€æœ‰å­ç±»éƒ½å…·æœ‰ç›¸åŒçš„æ¥å£ã€‚</li>
<li>æ¯ä¸ªå­ç±»å®ç°ä¸€ç§ä¸åŒçš„æ¨¡å¼ä¾›å…¶å®ä¾‹ä½¿ç”¨ã€‚</li>
<li>è¿™äº›æ¨¡å¼ä¹‹ä¸€æ˜¯ <code>null</code>ã€‚</li>
</ul>
<p>åœ¨ä¸‹æ–‡ä¸­ï¼Œ<code>UntitledFile</code> ç»§æ‰¿äº† â€œnullâ€ æ¨¡å¼ã€‚</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">// Abstract superclass</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">File</span> </span>&#123;
    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">content</span>)</span> &#123;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">new</span>.target === File) &#123;
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Canâ€™t instantiate this class"</span>);
        &#125;
        <span class="hljs-built_in">this</span>.content = content;
    &#125;
&#125;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TitledFile</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">File</span> </span>&#123;
    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">content, title</span>)</span> &#123;
        <span class="hljs-built_in">super</span>(content);
        <span class="hljs-built_in">this</span>.title = title;
    &#125;

    <span class="hljs-function"><span class="hljs-title">getTitle</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.title;
    &#125;
&#125;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UntitledFile</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">File</span> </span>&#123;
    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">content</span>)</span> &#123;
        <span class="hljs-built_in">super</span>(content);
    &#125;

    <span class="hljs-function"><span class="hljs-title">getTitle</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-keyword">return</span> <span class="hljs-string">"(Untitled)"</span>;
    &#125;
&#125;

<span class="hljs-keyword">const</span> files = [
    <span class="hljs-keyword">new</span> TitledFile(<span class="hljs-string">"Dear diary!"</span>, <span class="hljs-string">"My Diary"</span>),
    <span class="hljs-keyword">new</span> UntitledFile(<span class="hljs-string">"Reminder: pick a title!"</span>),
];

assert.deepEqual(
    files.map(<span class="hljs-function">(<span class="hljs-params">f</span>) =></span> f.getTitle()),
    [<span class="hljs-string">"My Diary"</span>, <span class="hljs-string">"(Untitled)"</span>]
);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åªä¸ºæ ‡é¢˜ï¼ˆè€Œä¸æ˜¯æ•´ä¸ªæ–‡ä»¶å¯¹è±¡ï¼‰ä½¿ç”¨ç©ºå¯¹è±¡æ¨¡å¼ã€‚</p>
<h4 data-id="heading-28">â€œä¹Ÿè®¸â€ç±»å‹</h4>
<p>â€œä¹Ÿè®¸â€ç±»å‹æ˜¯ä¸€ç§å‡½æ•°ç¼–ç¨‹æŠ€æœ¯ï¼š</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTitle</span>(<span class="hljs-params">file</span>) </span>&#123;
    <span class="hljs-keyword">switch</span> (file.title.kind) &#123;
        <span class="hljs-keyword">case</span> <span class="hljs-string">"just"</span>:
            <span class="hljs-keyword">return</span> file.title.value;
        <span class="hljs-keyword">case</span> <span class="hljs-string">"nothing"</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"(Untitled)"</span>;
        <span class="hljs-keyword">default</span>:
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>();
    &#125;
&#125;

<span class="hljs-keyword">const</span> files = [
    &#123;
        <span class="hljs-attr">title</span>: &#123;<span class="hljs-attr">kind</span>: <span class="hljs-string">"just"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"My Diary"</span>&#125;,
        <span class="hljs-attr">content</span>: <span class="hljs-string">"Dear diary!"</span>,
    &#125;,
    &#123;
        <span class="hljs-attr">title</span>: &#123;<span class="hljs-attr">kind</span>: <span class="hljs-string">"nothing"</span>&#125;,
        <span class="hljs-attr">content</span>: <span class="hljs-string">"Reminder: pick a title!"</span>,
    &#125;,
];

assert.deepEqual(
    files.map(<span class="hljs-function">(<span class="hljs-params">f</span>) =></span> getTitle(f)),
    [<span class="hljs-string">"My Diary"</span>, <span class="hljs-string">"(Untitled)"</span>]
);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>æˆ‘ä»¬æœ¬å¯ä»¥é€šè¿‡æ•°ç»„å¯¹ "just" å’Œ "nothing" è¿›è¡Œç¼–ç ï¼Œä½†æˆ‘ä»¬çš„æ–¹æ³•çš„å¥½å¤„æ˜¯ TypeScript å¯¹å…¶æœ‰å¾ˆå¥½çš„æ”¯æŒï¼ˆé€šè¿‡<a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.typescriptlang.org%2Fdocs%2Fhandbook%2Funions-and-intersections.html%23discriminate-unions" target="_blank" rel="nofollow noopener noreferrer" title="https://www.typescriptlang.org/docs/handbook/unions-and-intersections.html#discriminate-unions" ref="nofollow noopener noreferrer">å¯è¾¨è¯†è”åˆ</a>ï¼‰ã€‚</p>
<h3 data-id="heading-29">æˆ‘çš„æ–¹æ³•</h3>
<p>æˆ‘ä¸å–œæ¬¢å°† <code>undefined</code> ç”¨ä½œè¢«å¿½ç•¥çš„å€¼çš„åŸå› æœ‰ä¸‰ä¸ªï¼š</p>
<ul>
<li><code>undefined</code> é€šå¸¸æ˜¯åœ¨ JavaScript ä¸­æ„å¤–å‡ºç°çš„ã€‚</li>
<li><code>undefined</code> ä¼šè§¦å‘å‚æ•°å’Œè§£æ„çš„é»˜è®¤å€¼ï¼ˆå‡ºäºæŸäº›åŸå› ï¼ŒæŸäº›äººæ›´å–œæ¬¢ <code>undefined</code>ï¼‰ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œå¦‚æœéœ€è¦ç‰¹æ®Šå€¼ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹æ³•ä¹‹ä¸€ï¼š</p>
<ul>
<li>æˆ‘å°† <code>null</code> ç”¨ä½œè¢«å¿½ç•¥çš„å€¼ã€‚ï¼ˆé¡ºä¾¿è¯´ä¸€å¥ï¼ŒTypeScript ç›¸å¯¹è¾ƒå¥½åœ°æ”¯æŒäº†è¿™ç§æ–¹æ³•ã€‚ï¼‰</li>
<li>æˆ‘é€šè¿‡ä¸Šè¿°çš„å…¶ä¸­ä¸€ç§æŠ€æœ¯é¿å…äº†åŒæ—¶å‡ºç° <code>undefined</code> å’Œ <code>null</code> çš„æƒ…å†µï¼Œä¼˜ç‚¹åœ¨ä¹è®©ä»£ç æ›´å¹²å‡€ï¼Œè€Œç¼ºç‚¹åœ¨äºéœ€è¦åšå‡ºæ›´å¤šçš„å·¥ä½œã€‚</li>
</ul>
<h2 data-id="heading-30">0x64 this ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p><code>this</code> æ˜¯ JavaScript ä¸­çš„ä¸€ä¸ªå…³é”®è¯ï¼ŒæŒ‡å‘çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆæˆ‘ä»¬ç§°ä¹‹ä¸ºå‡½æ•°æ‰§è¡Œçš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼‰ã€‚</p>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> this çš„æŒ‡å‘å¹¶ä¸æ˜¯å‡½æ•°è¢«å£°æ˜æ—¶çš„ç¯å¢ƒã€‚</p>
</blockquote>
<p>å…·ä½“åˆ°å®é™…å¼€å‘ä¸­ï¼Œ<code>this</code> çš„æŒ‡å‘å¤§è‡´å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š</p>
<ul>
<li>
<ol>
<li>åœ¨ä¸€ä¸ªæ–¹æ³•ä¸­è°ƒç”¨çš„ <code>this</code> æŒ‡å‘æ‰€æœ‰è€…å¯¹è±¡ï¼›</li>
</ol>
</li>
<li>
<ol start="2">
<li>å•ç‹¬å®šä¹‰çš„ <code>this</code> æŒ‡å‘å…¨å±€å¯¹è±¡ï¼›</li>
</ol>
</li>
<li>
<ol start="3">
<li>åœ¨ä¸€ä¸ªå‡½æ•°ä¸­è°ƒç”¨çš„ <code>this</code> æŒ‡å‘å…¨å±€å¯¹è±¡ï¼›</li>
</ol>
<ul>
<li>ç‰¹åˆ«çš„ï¼Œåœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹ï¼‰è°ƒç”¨çš„ <code>this</code> æŒ‡å‘ <code>undefined</code>ï¼›</li>
</ul>
</li>
<li>
<ol start="4">
<li>åœ¨ä¸€ä¸ªäº‹ä»¶ä¸­çš„ <code>this</code> æŒ‡å‘æ¥æ”¶äº‹ä»¶çš„å…ƒç´ ï¼›</li>
</ol>
</li>
<li>
<ol start="5">
<li>ä½¿ç”¨ <code>apply</code>ã€<code>call</code> è°ƒç”¨çš„æ–¹æ³•çš„ <code>this</code> æŒ‡å‘å‚æ•°ä¸­çš„ <code>this</code>ï¼›</li>
</ol>
</li>
</ul>
<h2 data-id="heading-31">0x65 ["1", "2", "3"].map ä¼ å…¥ parseInt å’Œ parseFloat çš„ç»“æœåˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>é¦–å…ˆæˆ‘ä»¬è¦è®¤è¯†åˆ°ï¼Œmap ç›¸å½“äºç»™ä¼ å…¥çš„å‡½æ•°ä¸‰ä¸ªå‚æ•° <code>(element, index, array)</code>ï¼Œä¸Šè¿°ä»£ç å‚æ•°ç›¸å½“äºï¼š</p>
<pre><code class="hljs language-text copyable" lang="text">['1', 0, ["1", "2", "3"]]
['2', 1, ["1", "2", "3"]]
['3', 2, ["1", "2", "3"]]
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-32">parseInt</h3>
<p><code>parseInt</code> æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œä¹Ÿå°±æ˜¯ <code>map</code> ä¼ ç»™ä»–ä¸‹é¢çš„å‚æ•°ï¼š</p>
<pre><code class="hljs language-text copyable" lang="text">['1', 0]
['2', 1]
['3', 2]
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>æ³¨æ„åˆ°ï¼š</p>
<ul>
<li><code>radix</code> ç­‰äº 1 æ—¶ radix ä¸æ»¡è¶³ <code>[2, +36]</code>ï¼Œè§£ä¸º 0ï¼›</li>
<li><code>radix</code> ç­‰äº 2 æ—¶ï¼ˆç¬¬äºŒã€ä¸‰è¡Œï¼‰ï¼Œä¼ å…¥æ•°ä¸æ»¡è¶³å¯¹åº”æ•°å­—ï¼ˆäºŒè¿›åˆ¶æ•°ä¸åº”è¯¥æœ‰ 3ï¼‰;</li>
</ul>
<p>æ‰€ä»¥ç»“æœåº”è¯¥ä¸º <code>[0, NaN, NaN]</code>ã€‚</p>
<h3 data-id="heading-33">parseFloat</h3>
<p>ä¸ºä»€ä¹ˆ <code>parseFloat</code> çš„ç»“æœæ­£å¸¸ï¼ŸåŸå› å¾ˆç®€å•ï¼Œ<code>parseFloat</code> åªæ¥å—ä¸€ä½å‚æ•°ï¼Œç›¸å½“äºä¼ å…¥ï¼š</p>
<pre><code class="hljs language-text copyable" lang="text">['1', '2', '3']
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>æ‰€ä»¥å¾ˆæ˜¾ç„¶ï¼Œç»“æœå°±æ˜¯ <code>[1, 2, 3]</code>ã€‚</p>
<h2 data-id="heading-34">0x66 inner/outerHTML/Text ç­‰çš„åŒºåˆ«ï¼Ÿ</h2>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-tag"><<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"a"</span>></span>d<span class="hljs-tag"><<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"b"</span>></span>e<span class="hljs-tag"></<span class="hljs-name">span</span>></span>f<span class="hljs-tag"></<span class="hljs-name">span</span>></span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>é’ˆå¯¹ <code>#b</code> å…ƒç´ ï¼Œåˆ†åˆ«æ“ä½œï¼š</p>
<ul>
<li>ä»¤è¯»å–ä¸ºè¾“å‡ºï¼›</li>
<li>ä»¤è®¾ç½®ä¸º <code><span id="c">g</span></code>ï¼Œè¾“å‡º <code>#a</code> å…ƒç´  <code>innerHTML</code>ï¼›</li>
</ul>


























<table><thead><tr><th></th><th>innerHTML</th><th>outerHTML</th><th>innerText</th><th>outerText</th></tr></thead><tbody><tr><td>è¯»å–</td><td><code>e</code></td><td><code><span id="b">e</span></code></td><td><code>e</code></td><td><code>e</code></td></tr><tr><td>è®¾ç½®</td><td><code>d<span id="b"><span id="c">g</span></span>f</code></td><td><code>d<span id="c">g</span>f</code></td><td><code>d<span id="b">&lt;span id="c">g&lt;/span></span>f</code></td><td><code>d&lt;span id="c">g&lt;/span>f</code></td></tr></tbody></table>
<h2 data-id="heading-35">0x67 å¸¸è§ DOM èŠ‚ç‚¹çš„æ“ä½œï¼Ÿ</h2>
<h3 data-id="heading-36">1. è·å–èŠ‚ç‚¹</h3>
<ul>
<li><code>getElementsByClassName</code>ï¼šæ ¹æ®ç±»åæŸ¥æ‰¾å…ƒç´ ï¼Œ<strong>å¤šä¸ªç±»åç”¨ç©ºæ ¼åˆ†éš”</strong>ï¼Œè¿”å›ä¸€ä¸ª <code>HTMLCollection</code>ã€‚</li>
<li><code>getElementsByTagName</code>ï¼šæ ¹æ®æ ‡ç­¾æŸ¥æ‰¾å…ƒç´ ï¼Œè¿”å›ä¸€ä¸ª <code>HTMLCollection</code>ã€‚
<ul>
<li><code>getElementByTagNameNS</code>ï¼šæ ¹æ®æ ‡ç­¾+å‘½åç©ºé—´æŸ¥æ‰¾å…ƒç´ ï¼Œè¿”å›ä¸€ä¸ª <code>HTMLCollection</code>ã€‚</li>
</ul>
</li>
<li><code>querySelector</code>ï¼šä½¿ç”¨ CSS Query æŸ¥è¯¢å…ƒç´ ï¼Œè¿”å›å•ä¸ª <code>Node</code>ï¼Œå¦‚æœåŒ¹é…åˆ°å¤šä¸ªç»“æœï¼Œåªè¿”å›ç¬¬ä¸€ä¸ªã€‚
<ul>
<li><code>querySelectorAll</code>ï¼šè¿”å›ä¸€ä¸ª <code>NodeList</code>ã€‚</li>
</ul>
</li>
<li><code>document.getElementById</code>ï¼šæ ¹æ® ID æŸ¥æ‰¾å…ƒç´ ï¼ˆå¤§å°å†™æ•æ„Ÿï¼‰ï¼Œå¦‚æœæœ‰å¤šä¸ªç»“æœï¼Œåªè¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ ï¼›</li>
<li><code>document.getElementsByName</code>ï¼šæ ¹æ®å…ƒç´ çš„ <code>name</code> å±æ€§æŸ¥æ‰¾ï¼Œè¿”å›ä¸€ä¸ª <code>NodeList</code>ã€‚</li>
<li><code>document.forms</code>ï¼šè·å–å½“å‰é¡µé¢æ‰€æœ‰è¡¨å•ï¼Œè¿”å›ä¸€ä¸ª <code>HTMLCollection</code>ã€‚</li>
</ul>
<h3 data-id="heading-37">2. åˆ›å»ºèŠ‚ç‚¹</h3>
<h4 data-id="heading-38">1. createElement/createElementNS</h4>
<p>ç®—æ˜¯æœ€å¸¸è§çš„åˆ›å»ºå…ƒç´ çš„æ–¹æ³•ï¼Œé€šè¿‡ <code>createElement</code> åˆ›å»ºçš„å…ƒç´ å¹¶ä¸å±äº <code>document</code> å¯¹è±¡ï¼Œå®ƒåªæ˜¯åˆ›å»ºå‡ºæ¥ï¼Œå¹¶æœªæ·»åŠ åˆ° html æ–‡æ¡£ä¸­ï¼Œè¦è°ƒç”¨ <code>appendChild</code> æˆ– <code>insertBefore</code> ç­‰æ–¹æ³•å°†å…¶æ·»åŠ åˆ° HTML æ–‡æ¡£ä¸­ã€‚</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">const</span> el = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"div"</span>);
<span class="hljs-built_in">document</span>.body.appendChild(el);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å¦å¤–ï¼Œæ”¯æŒ <code>options</code> ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œæ¥å—ä¸€ä¸ª <code>ElementCreationOptions</code> ç±»å‹çš„å¯¹è±¡ï¼ˆå•å±æ€§ <code>is</code> æŒ‡ç¤ºæ˜¯å¦ä¸ºå…ˆå‰ä½¿ç”¨ <code>customElements.define()</code> å®šä¹‰çš„å…ƒç´ ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ExpandingList</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HTMLUListElement</span> </span>&#123;
    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-built_in">super</span>();
        <span class="hljs-comment">// ä¸€äº›æ“ä½œ</span>
    &#125;
&#125;

customElements.define(<span class="hljs-string">"expanding-list"</span>, ExpandingList, &#123;<span class="hljs-attr">extends</span>: <span class="hljs-string">"ul"</span>&#125;);

<span class="hljs-keyword">let</span> expandingList = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"ul"</span>, &#123;<span class="hljs-attr">is</span>: <span class="hljs-string">"expanding-list"</span>&#125;);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å¦å¤–ï¼Œ<code>createElementNS</code> æ”¯æŒåˆ›å»ºå¸¦æœ‰å‘½åç©ºé—´çš„å…ƒç´ ã€‚</p>
<h4 data-id="heading-39">2. createTextNode</h4>
<p>è¯¥æ–¹æ³•ç”¨äºåˆ›å»ºä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">const</span> el = <span class="hljs-built_in">document</span>.createTextNode(<span class="hljs-string">"ä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹"</span>);
<span class="hljs-built_in">document</span>.body.appendChild(el);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h4 data-id="heading-40">3. cloneNode å…‹éš†èŠ‚ç‚¹</h4>
<p><code>Node.cloneNode([deep])</code> å…¶ä¸­ <code>deep</code> å‚æ•°ä¸ºå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºæ˜¯å¦å¤åˆ¶å­èŠ‚ç‚¹ã€‚</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">const</span> el = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">"#clone"</span>).cloneNode(<span class="hljs-literal">true</span>);
<span class="hljs-built_in">document</span>.body.appendChild(el);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h4 data-id="heading-41">4. createDocumentFragment</h4>
<p>è¯¥æ–¹æ³•ç”¨æ¥åˆ›å»ºä¸€ä¸ªç©ºçš„ <code>DocumentFragment</code>ï¼Œä¹Ÿå°±æ˜¯æ–‡æ¡£ç¢ç‰‡ï¼Œè¡¨ç¤ºä¸€ç§è½»é‡çº§çš„æ–‡æ¡£ï¼Œä¸»è¦ç”¨äºå­˜å‚¨ä¸´æ—¶èŠ‚ç‚¹ã€‚åœ¨å¤§é‡æ“ä½œ DOM æ—¶ä½¿ç”¨æ–‡æ¡£ç¢ç‰‡å¯ä»¥é¿å…é¡µé¢å¤šæ¬¡æ¸²æŸ“ï¼Œå¯ä»¥æå¤§æå‡æ€§èƒ½ã€‚</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">const</span> frg = <span class="hljs-built_in">document</span>.createDocumentFragment();
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i < <span class="hljs-number">3</span>; i++) frg.appendChild(<span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"div"</span>));
<span class="hljs-built_in">document</span>.body.appendChild(frg);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<pre><code class="hljs language-html copyable" lang="html">
<span class="hljs-tag"><<span class="hljs-name">body</span>></span>
<span class="hljs-tag"><<span class="hljs-name">div</span>></span><span class="hljs-tag"></<span class="hljs-name">div</span>></span>
<span class="hljs-tag"><<span class="hljs-name">div</span>></span><span class="hljs-tag"></<span class="hljs-name">div</span>></span>
<span class="hljs-tag"><<span class="hljs-name">div</span>></span><span class="hljs-tag"></<span class="hljs-name">div</span>></span>
<span class="hljs-tag"></<span class="hljs-name">body</span>></span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h4 data-id="heading-42">5. createCDATASection</h4>
<p>è¯¥æ–¹æ³•ç”¨äºåˆ›å»ºä¸€ä¸ª CDATA éƒ¨åˆ†ï¼Œæ¥å—ä¸€ä¸ª <code>data</code> å‚æ•°ï¼Œç”¨äºæ·»åŠ æ•°æ®åˆ° CDATA ä¸­ã€‚</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">const</span> CDATASectionNode = <span class="hljs-built_in">document</span>.createCDATASection(data);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h4 data-id="heading-43">6. createComment</h4>
<p>è¯¥æ–¹æ³•ç”¨äºåˆ›å»ºä¸€ä¸ªæ–°çš„æ³¨é‡ŠèŠ‚ç‚¹ï¼Œæ¥å—ä¸€ä¸ª <code>data</code> å‚æ•°ï¼Œç”¨äºæ·»åŠ æ•°æ®åˆ°æ³¨é‡Šä¸­ã€‚</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">const</span> CommentNode = <span class="hljs-built_in">document</span>.createComment(data);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-44">3. ä¿®æ”¹èŠ‚ç‚¹ï¼ˆæ·»åŠ /æ›¿æ¢/åˆ é™¤ï¼‰</h3>
<h4 data-id="heading-45">1. appendChild/prependChild</h4>
<p>è¯¥æ–¹æ³•ç”¨äºæ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹åˆ°çˆ¶èŠ‚ç‚¹çš„æŒ‡å®šä½ç½®ï¼Œå…¶ä¸­ <code>appendChild</code> ä¸ºåˆ°å­èŠ‚ç‚¹æœ«å°¾ï¼Œ<code>prependChild</code> ä¸ºåˆ°å­èŠ‚ç‚¹èµ·å§‹ï¼ˆå¦‚æœèŠ‚ç‚¹å·²åœ¨å¯¹åº”æ–‡æ¡£ä¸­å­˜åœ¨ï¼Œå°†ä¼šç§»åŠ¨è¯¥èŠ‚ç‚¹åˆ°æ–°ä½ç½®ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript">Node.appendChild(aChild);
Node.prependChild(aChild);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å…¶ä¸­ <code>aChild</code>ï¼š</p>
<ul>
<li><code>Node</code>ï¼šæ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå¦‚æ–‡æœ¬èŠ‚ç‚¹ï¼‰ï¼›</li>
<li><code>Element</code>ï¼šæ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼ˆå¦‚ div å…ƒç´ ï¼‰ï¼›</li>
<li><code>DocumentFragment</code>ï¼šæŠŠ <code>DocumentFragment</code> ä¸­çš„å…¨éƒ¨èŠ‚ç‚¹ç§»åŠ¨åˆ°æŒ‡å®šçˆ¶èŠ‚ç‚¹ä¸­ï¼›</li>
</ul>
<blockquote>
<p><strong>æç¤ºï¼š</strong> æœ‰æ–°çš„ API å¯ç”¨ï¼Œè§ #2 Element.append() ä¸ Element.prepend()ï¼ˆå¯ä»¥åŒæ—¶æ’å…¥å¤šä¸ªèŠ‚ç‚¹ï¼ï¼‰</p>
</blockquote>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-built_in">document</span>.body.appendChild(<span class="hljs-built_in">document</span>.createTextNode(<span class="hljs-string">"ä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹"</span>));
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h4 data-id="heading-46">2. append/prepend</h4>
<p>è¯¥æ–¹æ³•ç”¨äºåœ¨ç›®æ ‡çˆ¶èŠ‚ç‚¹çš„æŒ‡å®šä½ç½®æ’å…¥ä¸€ç»„èŠ‚ç‚¹æˆ–æ–‡å­—èŠ‚ç‚¹ï¼Œå…¶ä¸­ <code>append</code> ä¸ºåˆ°å­èŠ‚ç‚¹æœ«å°¾ï¼Œ<code>prepend</code> ä¸ºåˆ°å­èŠ‚ç‚¹èµ·å§‹ï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript">Document.append(...nodesOrDOMStrings);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å…¶ä¸­ <code>nodesOrDOMStrings</code>ï¼š</p>
<ul>
<li>ä¸€ç»„èŠ‚ç‚¹ï¼Œç›´æ¥æ’å…¥ï¼›</li>
<li><code>DOMString</code> æ–‡å­—ï¼Œè½¬åŒ–ä¸ºæ–‡å­—èŠ‚ç‚¹ï¼›</li>
</ul>
<h4 data-id="heading-47">3. insertBefore</h4>
<pre><code class="hljs language-javascript copyable" lang="javascript">Node.insertBefore(newNode, referenceNode);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å…¶ä¸­ <code>refreneceNode</code> æŒ‡ç¤ºè¦åœ¨å“ªä¸€ä¸ªèŠ‚ç‚¹å‰æ’å…¥ï¼Œå¦‚æœä¸º <code>null</code> åˆ™ä¼šåœ¨çˆ¶èŠ‚ç‚¹æœ«å°¾æ’å…¥ã€‚è€Œ <code>newNode</code> ä¹Ÿæ”¯æŒ <code>DocumentFragment</code>ã€‚</p>
<p>å¦‚æœç»™å®šèŠ‚ç‚¹å·²å­˜åœ¨äºæ–‡æ¡£ä¸­ï¼Œ<code>insertBefore()</code> åˆ™å°†å…¶ä»å½“å‰ä½ç½®ç§»åŠ¨åˆ°æ–°ä½ç½®ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å°†å…¶é™„åŠ åˆ°æŒ‡å®šçš„æ–°çˆ¶èŠ‚ç‚¹ä¹‹å‰ï¼Œå®ƒå°†è‡ªåŠ¨ä»å…¶ç°æœ‰çˆ¶èŠ‚ç‚¹ä¸­åˆ é™¤ï¼‰ã€‚</p>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> <code>refreneceNode</code> ä¸å¯çœç•¥ï¼Œå¿…é¡»æ˜ç¡®æŒ‡ç¤ºä¸º <code>null</code> æˆ– <code>Node</code>ï¼Œå¦åˆ™ä¼šæœ‰æ„å¤–çš„ç»“æœï¼Œå…¶ä¸­ï¼š</p>
<p>Gecko: Exception "Not enough arguments[Node.insertBefore]", <a href="https://link.juejin.cn/?target=https%3A%2F%2Fbugzilla.mozilla.org%2Fshow_bug.cgi%3Fid%3D119489" target="_blank" rel="nofollow noopener noreferrer" title="https://bugzilla.mozilla.org/show_bug.cgi?id=119489" ref="nofollow noopener noreferrer">Bugzilla</a></p>
<p>Chromium: TypeError: Failed to execute 'insertBefore' on 'Node': 2 arguments required, but only 1 present. <a href="https://link.juejin.cn/?target=https%3A%2F%2Fbugs.chromium.org%2Fp%2Fchromium%2Fissues%2Fdetail%3Fid%3D419780" target="_blank" rel="nofollow noopener noreferrer" title="https://bugs.chromium.org/p/chromium/issues/detail?id=419780" ref="nofollow noopener noreferrer">Chromium Bugs</a></p>
<p>IE: å¯ä»¥æ’å…¥</p>
</blockquote>
<h4 data-id="heading-48">4. insertAdjacentElement</h4>
<p><code>insertAdjacentElement()</code> æ–¹æ³•ç”¨äºåœ¨ç›¸å¯¹äºè°ƒç”¨å®ƒçš„å…ƒç´ çš„ç»™å®šä½ç½®æ’å…¥ç»™å®šå…ƒç´ èŠ‚ç‚¹ã€‚</p>
<pre><code class="hljs language-javascript copyable" lang="javascript">targetElement.insertAdjacentElement(position, element);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å…¶ä¸­ <code>position</code> å¿…é¡»ä¸º <code>DOMString</code> çš„ä»¥ä¸‹å­—ç¬¦ä¸²ä¹‹ä¸€ï¼š</p>
<ul>
<li><code>'beforebegin'</code>: åœ¨ <code>targetElement</code> ä¹‹å‰ ã€‚</li>
<li><code>'afterbegin'</code>: åœ¨ <code>targetElement</code> ä¹‹ä¸­å­èŠ‚ç‚¹èµ·å§‹ã€‚</li>
<li><code>'beforeend'</code>: åœ¨ <code>targetElement</code> ä¹‹ä¸­å­èŠ‚ç‚¹æœ«å°¾ã€‚</li>
<li><code>'afterend'</code>: åœ¨ <code>targetElement</code> ä¹‹åã€‚</li>
</ul>
<h4 data-id="heading-49">5. insertAdjacentHTML</h4>
<p>è¯¥æ–¹æ³•ç”¨äºæ’å…¥ä¸€æ®µ HTML ä»£ç ï¼ˆä¼šè‡ªåŠ¨è§£æä¸ºå…ƒç´ èŠ‚ç‚¹ï¼‰ï¼Œ<code>position</code> å‚æ•°ä¸ #4 è¦æ±‚ä¸€è‡´ï¼Œè¯­æ³•ä¸ºï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript">element.insertAdjacentHTML(position, text);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å…¶ä¸­ <code>text</code> ä¸º HTML æˆ– XML æ–‡æœ¬ã€‚</p>
<h4 data-id="heading-50">6. insertAdjacentText</h4>
<p>è¯¥æ–¹æ³•ç”¨äºæ’å…¥ä¸€æ®µæ–‡å­—ï¼Œ<code>position</code> å‚æ•°ä¸ #4 è¦æ±‚ä¸€è‡´ï¼Œè¯­æ³•ä¸ºï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript">element.insertAdjacentText(position, text);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å…¶ä¸­ <code>text</code> ä¸ºéœ€è¦æ’å…¥çš„çº¯æ–‡æœ¬ï¼ˆåŸçŠ¶ç›´æ¥æ’å…¥ï¼‰ã€‚</p>
<h4 data-id="heading-51">7. replaceChild</h4>
<p>è¯¥æ–¹æ³•ç”¨äºå°†ä¸€ä¸ªèŠ‚ç‚¹æ›¿æ¢ä¸ºå¦ä¸€ä¸ªèŠ‚ç‚¹ï¼Œéœ€è¦ç”±è¢«æ›¿æ¢èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript">parentNode.replaceChild(newChild, oldChild);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h4 data-id="heading-52">8. removeChild</h4>
<p>è¯¥æ–¹æ³•ç”¨äºåˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ï¼Œéœ€è¦ç”±è¢«åˆ é™¤èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript">parentNode.removeChild(child); <span class="hljs-comment">// è¿”å›è¢«åˆ é™¤èŠ‚ç‚¹å¼•ç”¨ï¼Œå¯ä»¥è¿›ä¸€æ­¥æ“ä½œ</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å¦å¤–å¦‚æœè¢«åˆ é™¤èŠ‚ç‚¹ä¸æ˜¯æŸèŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼Œä¼šæŠ¥é”™ã€‚æ‰€ä»¥ä¸€èˆ¬æˆ‘ä»¬éƒ½è¿™ä¹ˆåšï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeNode</span>(<span class="hljs-params">node</span>) </span>&#123;
    <span class="hljs-keyword">if</span> (!node) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (node.parentNode) node.parentNode.removeChild(node);
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-53">4. èŠ‚ç‚¹å…³ç³»</h3>
<h4 data-id="heading-54">1. çˆ¶å­å…³ç³»</h4>
<ul>
<li><code>parentNode</code> çˆ¶èŠ‚ç‚¹ï¼›</li>
<li><code>parentElement</code> çˆ¶å…ƒç´ èŠ‚ç‚¹ï¼›</li>
<li><code>children</code> HTMLChildrenï¼Œå…¨éƒ¨éƒ½æ˜¯ <code>Element</code>ï¼ŒæŒ‡ä»£å­å…ƒç´ èŠ‚ç‚¹é›†åˆï¼›</li>
<li><code>childNodes</code> NodeListï¼Œå…¨éƒ¨éƒ½æ˜¯èŠ‚ç‚¹ï¼ŒæŒ‡ä»£å­èŠ‚ç‚¹é›†åˆï¼›</li>
<li><code>firstChild</code> ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œå…¶ä¸­ï¼š
<ul>
<li><code>firstElementChild</code> ç¬¬ä¸€ä¸ªå­å…ƒç´ èŠ‚ç‚¹ï¼ˆç¬¬ä¸€ä¸ªèŠ‚ç‚¹éœ€ä¸º <code>Element</code> å¦åˆ™è¿”å› <code>null</code>ï¼‰ï¼›</li>
</ul>
</li>
<li><code>lastChild</code> æœ€åä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œå…¶ä¸­ï¼š
<ul>
<li><code>lastElementChild</code> æœ€åä¸€ä¸ªå­å…ƒç´ èŠ‚ç‚¹ï¼ˆæœ€åä¸€ä¸ªèŠ‚ç‚¹éœ€ä¸º <code>Element</code> å¦åˆ™è¿”å› <code>null</code>ï¼‰ï¼›</li>
</ul>
</li>
</ul>
<h4 data-id="heading-55">2. å…„å¼Ÿå…³ç³»</h4>
<ul>
<li><code>previousSibling</code> å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå…¶ä¸­ï¼š
<ul>
<li><code>previousElementSibling</code> å‰ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ï¼ˆå‰ä¸€ä¸ªèŠ‚ç‚¹éœ€ä¸º <code>Element</code> å¦åˆ™è¿”å› <code>null</code>ï¼‰ï¼›</li>
</ul>
</li>
<li><code>nextSibling</code> ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå…¶ä¸­ï¼š
<ul>
<li><code>nextElementSibling</code> ä¸‹ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ï¼ˆä¸‹ä¸€ä¸ªèŠ‚ç‚¹éœ€ä¸º <code>Element</code> å¦åˆ™è¿”å› <code>null</code>ï¼‰ï¼›</li>
</ul>
</li>
</ul>
<h2 data-id="heading-56">0x68 å†…å­˜æ³„æ¼ä¸é¿å…æªæ–½ï¼Ÿ</h2>
<p>å¸¸è§çš„å†…å­˜æ³„æ¼æœ‰ï¼š</p>
<h3 data-id="heading-57">1. å…¨å±€å˜é‡</h3>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span>(<span class="hljs-params"></span>) </span>&#123;
    evt = <span class="hljs-string">"fn"</span>;
&#125;

fn();
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>ä¸Šè¿°ä»£ç åœ¨å…¨å±€æƒ…å†µä¸‹è¿è¡Œï¼Œå®¹æ˜“è‡´ä½¿æ„å¤–çš„å…¨å±€å˜é‡çš„äº§ç”Ÿã€‚</p>
<p>è§£å†³æ–¹æ³•ï¼šåœ¨ JavaScript æ–‡ä»¶å¤´éƒ¨åŠ ä¸Š <code>'use strict';</code>ï¼Œå¯ç”¨ä¸¥æ ¼æ¨¡å¼è§£æ JavaScript ï¼Œå³å¯é¿å…æ„å¤–çš„å…¨å±€å˜é‡ã€‚</p>
<h3 data-id="heading-58">2. è®¡æ—¶å™¨ä¸å›è°ƒ</h3>
<p>å‡ºäº <code>setInterval</code> ä¸äº‹ä»¶ç›‘å¬å™¨æ˜¯æŒç»­å­˜åœ¨çš„ï¼Œæµè§ˆå™¨ä¼šè®¤ä¸ºç›¸å…³å†…å­˜æ˜¯å¿…é¡»å†…å­˜ï¼Œå°†ä¼šå¯¼è‡´å†…å­˜çš„æ— æ³•å›æ”¶ï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =></span> &#123;
    <span class="hljs-comment">// ä¸€äº›æ“ä½œâ€¦â€¦</span>
&#125;);

<span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">"click"</span>, <span class="hljs-function">() =></span> &#123;
    <span class="hljs-comment">// ä¸€äº›æ“ä½œâ€¦â€¦</span>
&#125;);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>è¿™ä¸ªæ—¶å€™ï¼Œæ˜ç¡®ä½¿ç”¨ <code>clearInterval</code>ï¼ˆç›®å‰è€Œè¨€ï¼Œæµè§ˆå™¨ææ‡‚äº† DOM ä¸ JavaScript ä¹‹é—´çš„å…³ç³»ï¼Œæ— éœ€ <code>removeEventListener</code> äº†ï¼‰çœŸçš„æŒºé‡è¦çš„ã€‚</p>
<h3 data-id="heading-59">3. DOM å¼•ç”¨</h3>
<p><code>getElementById</code>ã€<code>querySelector</code> ç”šè‡³ <code>createElement</code> è¿™äº›æ“ä½œéƒ½ä¼šä¿å­˜ä½å…ƒç´ èŠ‚ç‚¹åˆ°å†…å­˜å½“ä¸­ã€‚å½“æˆ‘ä»¬åˆ é™¤å…ƒç´ æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†æ‰€æœ‰çš„å¼•ç”¨ä¸€å¹¶åˆ é™¤ï¼Œå¦åˆ™å…ƒç´ ä»ç„¶ä¼šä¿å­˜åœ¨ JavaScript å†…å­˜å½“ä¸­ã€‚</p>
<p>æ¯”å¦‚è¯´ï¼Œä¸‹é¢çš„ä»£ç ï¼Œç”±äº <code>el</code> çš„å­˜åœ¨ï¼Œå³ä¾¿ DOM èŠ‚ç‚¹ä¸­åˆ é™¤äº† <code>el.ref</code>ï¼ˆie. <code>#el</code>ï¼‰å…ƒç´ ï¼Œ<code>el</code> ä¿å­˜ç€ <code>el.ref</code> çš„å¼•ç”¨ï¼Œå¯¼è‡´å†…å­˜ä¸­å…ƒç´ å¹¶æœªåˆ é™¤ã€‚</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> el = &#123;<span class="hljs-attr">name</span>: <span class="hljs-string">"el"</span>, <span class="hljs-attr">ref</span>: <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"el"</span>)&#125;;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleClickEvt</span>(<span class="hljs-params"></span>) </span>&#123;
    el.ref.innerHTML = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime();
&#125;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeEl</span>(<span class="hljs-params"></span>) </span>&#123;
    el.ref.parentElement.removeChild(el.ref);
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> è¿˜éœ€è¦æ³¨æ„çˆ¶å­èŠ‚ç‚¹ä¹‹é—´çš„å¼•ç”¨å…³ç³»ï¼Œæ¯”å¦‚è¯´ <code>li</code> ä¼šè®© <code>ul</code> ä¸èƒ½è¢«åˆ é™¤ï¼Œ<code>td</code> ä¼šå½±å“æ•´ä¸ªè¡¨æ ¼ç­‰ã€‚</p>
</blockquote>
<h3 data-id="heading-60">4. é—­åŒ…</h3>
<p>äº‹å®ä¸Šï¼Œé—­åŒ…ä¸ #2 çš„æƒ…å†µç±»ä¼¼ï¼Œé—­åŒ…å‡½æ•°å†…çš„å¼•ç”¨ä¼šå¯¼è‡´å¤–ä½œç”¨åŸŸçš„å˜é‡æ— æ³•åˆ é™¤ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆå…¶å®æŒºç®€å•çš„ï¼Œåœ¨å¼•ç”¨å <code>ref = undefined</code> å³å¯ã€‚</p>
<h2 data-id="heading-61">0x69 åˆ¤æ–­è¿è¡Œç¯å¢ƒä¸ºæµè§ˆå™¨æˆ–å…¶ä»–ç¯å¢ƒï¼Ÿ</h2>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-built_in">this</span> === <span class="hljs-built_in">window</span> ? <span class="hljs-string">"browser"</span> : <span class="hljs-string">"node"</span>;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-62">0x70 script æ ‡ç­¾åœ¨ body æ ‡ç­¾å‰åçš„å·®åˆ«ï¼Ÿ</h2>
<p>äº‹å®ä¸Šï¼Œ<code><body></code> å†…çš„ <code><script></code> ä¼šåœ¨ <code><body></code> åŠ è½½æ¸²æŸ“å®Œæˆå‰æ‰§è¡Œï¼Œè€Œ <code><body></code> å¤–çš„ <code><script></code> ä¼šåœ¨ DOMContentLoaded ä¹‹å‰ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code><body></code> å†…çš„ <code><script></code> ä¼šé˜»å¡ <code><body></code> çš„æ¸²æŸ“ã€‚</p>
<p>ä¸ç‰¹åˆ«å‡†ç¡®çš„æ—¶é—´çº¿ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB;
    send[Send Request] --> receive[Receive Data]
    receive --> parse[Parse HTML]
    parse --> recalculate[Recalculate Style]
    recalculate --> layout[Layout]
    layout --> update[Update Layer Tree]
    update --> paint[Paint]
    paint --> composite[Composite Layers]
    composite --> receive2[Receive Data]
    receive2 --> parse2[Parse HTML]
    parse2 --> dot[...]
    dot --> finish[Finish Loading]
    finish --> evaluate1[Evaluate Script 1.js]
    evaluate1 --> parse3[Parse HTML]
    parse3 --> dot2[...]
    dot2 --> evaluate2[Evaluate Script 2.js]
    evaluate2 --> evtLoad[Event: domInteractive + DOMContentLoaded + domComplete + load + pageshow]
</code></pre>
<ul>
<li><code><body></code> å†… <code><script></code> å½±å“ <code><body></code> çš„æ¸²æŸ“ã€‚</li>
<li><code><body></code> å†…å¤–ä¸ DOMContentLoaded æ— å…³ï¼Œéƒ½é˜»å¡ã€‚</li>
<li><code><script></code> æ”¾ <code><body></code> å¤–æ˜¯å¾ˆæœ‰é“ç†çš„ã€‚</li>
<li><code><script></code> åŠ  <code>async</code>ã€<code>defer</code> ç­‰æ ‡ç­¾ï¼ŒåŠ¨æ€åŠ è½½æ‰æ˜¯æœ€æœ‰æ•ˆç‡çš„ã€‚</li>
</ul>
<h2 data-id="heading-63">0x71 ç§»åŠ¨ç«¯çš„ç‚¹å‡»äº‹ä»¶çš„æœ‰å»¶è¿Ÿï¼Œæ—¶é—´æ˜¯å¤šä¹…ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰ï¼Ÿæ€ä¹ˆè§£å†³è¿™ä¸ªå»¶æ—¶ï¼Ÿ</h2>
<p>æ—©æœŸå±å¹•å°ºå¯¸å°ï¼ŒApple ä¸ºäº†è¯†åˆ«ç”¨æˆ·æ˜¯ä¸ºäº†åŒå‡»æ”¾å¤§è¿˜æ˜¯ç‚¹å‡»ï¼Œæ·»åŠ äº† <code>300ms</code> çš„å»¶è¿Ÿç”¨äºè¯†åˆ«ï¼ˆå…¶ä»–çš„å‚å•†ä¹Ÿå¾ˆèµåŒï¼Œè·Ÿè¿›äº†è¿™ä¸€ä¸¾æªï¼‰ã€‚</p>
<h3 data-id="heading-64">è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-65">ç¦ç”¨ç¼©æ”¾</h4>
<p>å½“ HTML æ–‡æ¡£å¤´éƒ¨åŒ…å«å¦‚ä¸‹ <code>meta</code> æ ‡ç­¾æ—¶ï¼š</p>
<pre><code class="hljs language-html copyable" lang="html">
<span class="hljs-tag"><<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"user-scalable=no"</span>/></span>
<span class="hljs-tag"><<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"initial-scale=1,maximum-scale=1"</span>/></span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>æ„å‘³ç€æ”¾å¤§æ“ä½œä¸å¯ç”¨ï¼Œç¦ç”¨äº†ç¼©æ”¾ï¼Œä¹Ÿå°±ç¦ç”¨äº† 300ms çš„å»¶è¿Ÿã€‚</p>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> å¹¶ä¸æ¨ä»‹è¿™ç§æ–¹æ³• â€”â€” ç”¨æˆ·ä¹Ÿä¼šæ— æ³•æ”¾å¤§çœ‹å›¾ç‰‡ï¼Œçœ‹æ–‡å­—â€¦â€¦</p>
</blockquote>
<h4 data-id="heading-66">æ›´æ”¹é»˜è®¤çš„è§†å£å®½åº¦</h4>
<p>è¿™æ˜¯ Google Chrome å›¢é˜Ÿç»™å‡ºçš„<a href="https://link.juejin.cn/?target=https%3A%2F%2Fdevelopers.google.com%2Fweb%2Fupdates%2F2013%2F12%2F300ms-tap-delay-gone-away" target="_blank" rel="nofollow noopener noreferrer" title="https://developers.google.com/web/updates/2013/12/300ms-tap-delay-gone-away" ref="nofollow noopener noreferrer">å»ºè®®æ–¹æ³•</a>ï¼š</p>
<pre><code class="hljs language-html copyable" lang="html">
<span class="hljs-tag"><<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width"</span>/></span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>é€šè¿‡ç»™æµè§ˆå™¨è®¾ç½®å®½åº¦ï¼Œé™å®šäº†æµè§ˆå™¨ä¸ä¼šé‡‡ç”¨åŒå‡»ç¼©æ”¾ç­–ç•¥ï¼Œä½†æˆ‘ä»¬ä¾æ—§å¯ä»¥æ”¾å¤§çœ‹å›¾ç‰‡çœ‹æ–‡å­—ã€‚</p>
<h2 data-id="heading-67">0x72 ä»€ä¹ˆæ˜¯ Proxy ï¼Ÿ</h2>
<p><code>Proxy</code> çš„ç”¨é€”ä¸€èˆ¬åŒ…æ‹¬å¯¹æ•°æ®çš„å¤„ç†ã€å¯¹æ„é€ å‡½æ•°çš„å¤„ç†ã€å¯¹æ•°æ®çš„éªŒè¯ã€‚ è¯´ç™½äº†ï¼Œå°±æ˜¯åœ¨æˆ‘ä»¬è®¿é—®å¯¹è±¡å‰æ·»åŠ äº†ä¸€å±‚æ‹¦æˆªï¼Œå¯ä»¥è¿‡æ»¤å¾ˆå¤šæ“ä½œï¼Œè€Œè¿™äº›è¿‡æ»¤å®Œå…¨ç”±æˆ‘ä»¬æ¥å®šä¹‰ã€‚</p>
<p><code>Proxy</code> å¯¹è±¡ç”¨äºåˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„ä»£ç†ï¼Œä»è€Œå®ç°åŸºæœ¬æ“ä½œçš„æ‹¦æˆªå’Œè‡ªå®šä¹‰ï¼ˆå¦‚å±æ€§æŸ¥æ‰¾ã€èµ‹å€¼ã€æšä¸¾ã€å‡½æ•°è°ƒç”¨ç­‰ï¼‰ï¼Œæ¯”å¦‚è¯´ï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Proxy</span>(
    &#123;&#125;,
    &#123;
        <span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">obj, prop</span>) </span>&#123;
            <span class="hljs-keyword">return</span> prop <span class="hljs-keyword">in</span> obj ? obj[prop] : <span class="hljs-string">"default"</span>;
        &#125;,
        <span class="hljs-attr">set</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">obj, prop, value</span>) </span>&#123;
            <span class="hljs-keyword">if</span> (prop === <span class="hljs-string">"name"</span> && <span class="hljs-keyword">typeof</span> value !== <span class="hljs-string">"string"</span>)
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">"Object property name should be String."</span>);
            <span class="hljs-keyword">else</span> obj[prop] = value;
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        &#125;,
    &#125;
);

p.name = <span class="hljs-string">"Hoarfroster"</span>;
p.name = <span class="hljs-number">1</span>; <span class="hljs-comment">// TypeError: Object property name should be String.</span>
<span class="hljs-built_in">console</span>.log(p.name); <span class="hljs-comment">// "Hoarfroster"</span>
<span class="hljs-built_in">console</span>.log(p.id); <span class="hljs-comment">// "default"</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-68">Proxy æ•æ‰å™¨åˆ—è¡¨</h3>





























































<table><thead><tr><th>åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>handler.getPrototypeOf()</code></td><td><code>Object.getPrototypeOf</code> æ–¹æ³•çš„æ•æ‰å™¨ã€‚</td></tr><tr><td><code>handler.setPrototypeOf()</code></td><td><code>Object.setPrototypeOf</code> æ–¹æ³•çš„æ•æ‰å™¨ã€‚</td></tr><tr><td><code>handler.isExtensible()</code></td><td><code>Object.isExtensible</code> æ–¹æ³•çš„æ•æ‰å™¨ã€‚</td></tr><tr><td><code>handler.preventExtensions()</code></td><td><code>Object.preventExtensions</code> æ–¹æ³•çš„æ•æ‰å™¨ã€‚</td></tr><tr><td><code>handler.getOwnPropertyDescriptor()</code></td><td><code>Object.getOwnPropertyDescriptor</code> æ–¹æ³•çš„æ•æ‰å™¨ã€‚</td></tr><tr><td><code>handler.defineProperty()</code></td><td><code>Object.defineProperty</code> æ–¹æ³•çš„æ•æ‰å™¨ã€‚</td></tr><tr><td><code>handler.has()</code></td><td><code>in</code> æ“ä½œç¬¦çš„æ•æ‰å™¨ã€‚</td></tr><tr><td><code>handler.get()</code></td><td>å±æ€§è¯»å–æ“ä½œçš„æ•æ‰å™¨ã€‚</td></tr><tr><td><code>handler.set()</code></td><td>å±æ€§è®¾ç½®æ“ä½œçš„æ•æ‰å™¨ã€‚</td></tr><tr><td><code>handler.deleteProperty()</code></td><td><code>delete</code> æ“ä½œç¬¦çš„æ•æ‰å™¨ã€‚</td></tr><tr><td><code>handler.ownKeys()</code></td><td><code>Object.getOwnPropertyNames</code> æ–¹æ³•å’Œ <code>Object.getOwnPropertySymbols</code> æ–¹æ³•çš„æ•æ‰å™¨ã€‚</td></tr><tr><td><code>handler.apply()</code></td><td>å‡½æ•°è°ƒç”¨æ“ä½œçš„æ•æ‰å™¨ã€‚</td></tr><tr><td><code>handler.construct()</code></td><td><code>new</code> æ“ä½œç¬¦çš„æ•æ‰å™¨ã€‚</td></tr></tbody></table>
<h2 data-id="heading-69">0x73 Array çš„ mapã€filterã€reduceï¼Ÿ</h2>
<p>Array çš„ mapã€filter éƒ½ç”¨äºéå†è·å¾—æ•°ç»„ï¼Œreduce ç”¨äºå¯¹æ•°ç»„è¿›è¡Œæ“ä½œå åŠ è·å¾—å€¼ã€‚æˆ‘ä»¬å¯ä»¥ç†è§£ï¼š</p>
<ol>
<li><code>filter</code> ç”¨äºç­›é€‰è¿‡æ»¤ã€‚</li>
</ol>
<ul>
<li>å±•ç¤ºå®¡æ ¸æ•°æ®</li>
<li>æ˜¾ç¤ºåªå…³æ³¨æˆ‘çš„äºº</li>
<li>éç©ºå­—ç¬¦ä¸²ç»„</li>
</ul>
<ol start="2">
<li><code>map</code> ç”¨äºå¯¹æ•°ç»„æ¯ä¸€ä¸ªå…ƒç´ è¿›è¡Œæ“ä½œå˜æ¢ã€‚</li>
</ol>
<ul>
<li>è·å–åˆ—è¡¨æ¯ä¸€é¡¹ç›®æ–‡å­—</li>
<li>è·å–æ•°ç»„æ¯ä¸€å…ƒç´ å¹³æ–¹å€¼</li>
<li>è·å–ä¸€ç»„å¯¹è±¡ç‰¹å®šå±æ€§çš„æ•°ç»„</li>
</ul>
<ol start="3">
<li><code>reduce</code> ç”¨äºå¯¹æ¯ä¸€ä¸ªå…ƒç´ æ“ä½œï¼ˆå¹¶å°†ç»“æœä¼ å…¥ä¸‹ä¸€ä¸ªå…ƒç´ çš„å›è°ƒä¸­ï¼‰ã€‚</li>
</ol>
<ul>
<li>è·å–æ•°ç»„æœ€å¤§æœ€å°å€¼</li>
<li>è·å–æ ‡å‡†å·®ä¸å¹³æ–¹å·®</li>
</ul>
<h2 data-id="heading-70">0x74 å¦‚ä½•æ¸…ç©ºä¸€ä¸ª Arrayï¼Ÿ</h2>
<ol>
<li><code>list.length = 0;</code></li>
<li><code>list = [];</code></li>
<li><code>list.splice(0, [])</code></li>
</ol>
<h2 data-id="heading-71">0x75 ä»‹ç»é˜²æŠ–èŠ‚æµåŸç†ã€åŒºåˆ«ä»¥åŠåº”ç”¨ï¼Œå¹¶ç”¨ JavaScript è¿›è¡Œå®ç°ã€‚</h2>
<p>ä¸¤è€…å…¶å®â€¦â€¦é˜²æŠ–èƒ½å¤Ÿç”¨èŠ‚æµçš„æ–¹æ³•è§£å†³ï¼Œç®—æ˜¯èŠ‚æµçš„ç‰¹æ®Šæ¡ˆä¾‹ï¼ˆåªæ‰§è¡Œ 1 æ¬¡ä¸”ä¸ºæœ€åä¸€æ¬¡çš„èŠ‚æµï¼‰ã€‚</p>
<h3 data-id="heading-72">é˜²æŠ–</h3>
<p>åœ¨äº‹ä»¶è¢«è§¦å‘ n ç§’åå†æ‰§è¡Œå›è°ƒï¼Œå¦‚æœåœ¨è¿™ n ç§’å†…åˆè¢«è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶ã€‚é€‚ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>éªŒè¯çŸ­ä¿¡è¯·æ±‚åœºæ™¯ï¼šé˜²æ­¢å¤šæ¬¡å‘é€çŸ­ä¿¡ï¼Œåªå…è®¸ 60s è¯·æ±‚ä¸€æ¬¡ã€‚</li>
<li>æœç´¢æ¡†è”æƒ³åœºæ™¯ï¼šé˜²æ­¢è”æƒ³å‘é€è¯·æ±‚è¿‡å¤šæ¬¡æ•°ï¼Œé™åˆ¶ 1s åªå‘é€ä¸€æ¬¡è¾“å…¥ã€‚</li>
</ul>
<p>ç®€å•å®ç°ï¼ˆ<code>timeout</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Debounce</span> </span>&#123;
    <span class="hljs-function"><span class="hljs-title">toggle</span>(<span class="hljs-params">callback, wait</span>)</span> &#123;
        <span class="hljs-built_in">clearTimeout</span>(<span class="hljs-built_in">this</span>.timeout);
        <span class="hljs-built_in">this</span>.timeout = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
            callback.apply(<span class="hljs-built_in">this</span>, <span class="hljs-built_in">arguments</span>);
        &#125;, wait);
    &#125;

    timeout = <span class="hljs-literal">null</span>;
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-73">èŠ‚æµ</h3>
<p>ä¸€å®šæ—¶é—´å†…åªå…è®¸è§¦å‘ n æ¬¡ï¼Œé€‚ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>ä¸€åˆ†é’Ÿå†…æœ€å¤šå‘è¨€ 10 æ¬¡ã€‚</li>
<li>ä¸€å¤©å†…æœ€å¤šä½¿ç”¨ä¸€æ¬¡ç‰¹æ®Šæƒé™ã€‚</li>
</ul>
<p>ç®€å•å®ç°ï¼ˆåˆ—è¡¨ï¼Œ<code>shift</code> + <code>push</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Throttle</span> </span>&#123;
    <span class="hljs-function"><span class="hljs-title">toggle</span>(<span class="hljs-params">callback</span>)</span> &#123;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> e <span class="hljs-keyword">of</span> <span class="hljs-built_in">this</span>.list) &#123;
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime() - e > <span class="hljs-number">5000</span>) <span class="hljs-built_in">this</span>.list.shift();
        &#125;
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.list.length < <span class="hljs-number">3</span>) &#123;
            <span class="hljs-built_in">this</span>.list.push(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime());
            callback.call();
        &#125;
    &#125;

    list = [];
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-74">0x76 å¦‚ä½•è‡ªå®šä¹‰äº‹ä»¶ï¼Ÿ</h2>
<p>äº‹ä»¶æœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€ç§æ¶ˆæ¯ï¼Œé€šå¸¸ç”¨äºå¤šæ¨¡å—å¤šå¯¹è±¡ä¹‹é—´çš„é€šä¿¡ã€‚ç„¶è€Œ JavaScript åŸç”Ÿçš„äº‹ä»¶æ€»æ•°æœ‰é™ï¼Œé¢å¯¹ä¸€äº›å…¶ä»–ç”¨ä¾‹ï¼Œæˆ‘ä»¬å°±éœ€è¦é¢ä¸´ä¸€ä¸ªæŠ‰æ‹©äº† â€”â€” ç”¨ç°æˆçš„äº‹ä»¶å¿½ç•¥è¯­ä¹‰ï¼Œè¿˜æ˜¯åˆ›å»ºæ–°çš„äº‹ä»¶ï¼Ÿ</p>
<p>ç›®å‰å®ç°è‡ªå®šä¹‰äº‹ä»¶çš„ä¸¤ç§ä¸»è¦æ–¹å¼æ˜¯ <code>Event()</code> æ„é€ å‡½æ•°å’Œ <code>CustomEvent()</code> æ„é€ å‡½æ•°ã€‚</p>
<h3 data-id="heading-75">1. Event()</h3>
<p><code>Event()</code> äº‹ä»¶æœ¬èº«æä¾›äº†æ„é€ å‡½æ•°ï¼Œä¾›æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹ä»¶å¯¹è±¡ <code>Event</code>ã€‚</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> myEvent = <span class="hljs-keyword">new</span> Event(typeArg, eventInit);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li><code>typeArg</code>ï¼šDOMString ç±»å‹ï¼Œè¡¨ç¤ºåˆ›å»ºäº‹ä»¶çš„åç§°ï¼›</li>
<li><code>eventInit</code>ï¼šå¯é€‰é…ç½®é¡¹ï¼ŒåŒ…æ‹¬ï¼š
<ul>
<li><code>bubbles</code>ï¼šæ˜¯å¦å†’æ³¡ã€‚</li>
<li><code>cancelable</code>ï¼šæ˜¯å¦å¯å–æ¶ˆã€‚</li>
<li><code>composed</code>ï¼šæ˜¯å¦å¯ä»¥ä» Shadow DOM ä¼ é€’åˆ°ä¸€èˆ¬çš„ DOMã€‚</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> evtPing = <span class="hljs-keyword">new</span> Event(<span class="hljs-string">"ping"</span>, &#123;<span class="hljs-attr">bubbles</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">cancelable</span>: <span class="hljs-literal">false</span>&#125;);
<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">"ping"</span>, <span class="hljs-function">() =></span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"pong"</span>));
<span class="hljs-built_in">document</span>.dispatchEvent(evtPing);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-76">2. CustomEvent()</h3>
<p>ä½¿ç”¨æ–¹æ³•ä¸ <code>Event</code> æ„é€ å‡½æ•°å®Œå…¨ä¸€è‡´ï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> evtPing = <span class="hljs-keyword">new</span> CustomEvent(<span class="hljs-string">"ping"</span>, &#123;
    <span class="hljs-attr">bubbles</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">cancelable</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">detail</span>: &#123;<span class="hljs-attr">from</span>: <span class="hljs-string">"top"</span>&#125;,
&#125;);
<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">"ping"</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =></span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"pong"</span>, e.detail.from));
<span class="hljs-built_in">document</span>.dispatchEvent(evtPing);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-77">åŒºåˆ«</h3>
<ol>
<li>CustomEvent æ„é€ å‡½æ•° <code>eventInit</code> å‚æ•°é™¤æ”¯æŒ <code>detail</code> å‚æ•°å¤–ï¼Œæ¥å—å…¶ä»– <code>Event</code> ä¸­çš„å‚æ•°ã€‚</li>
<li>CustomEvent å¯ä»¥ä¼ é€’æ•°æ®ã€‚</li>
</ol>
<h2 data-id="heading-78">0x77 JSONP æ˜¯ä»€ä¹ˆï¼Ÿæ‰‹å†™ä¸€ä¸ª JSONPã€‚</h2>
<ol>
<li>æˆ‘ä»¬éœ€è¦è·å– JSONï¼Œä½†å—é™äºåŒæºç­–ç•¥ã€‚</li>
<li>å¸¦ <code>src</code> çš„å…ƒç´ ä¼¼ä¹ä¸å—é™åˆ¶ã€‚</li>
<li>æˆ‘ä»¬ä¼¼ä¹å¯ä»¥ç”¨ <code><script></code> åŠ¨æ€åŠ è½½ JSON æ•°æ®ã€‚</li>
<li>åŠ¨æ€åŠ è½½åæˆ‘ä»¬éœ€è¦æ‰§è¡Œæ•°æ®ã€‚</li>
<li>æˆ‘ä»¬å¯ä»¥ç”¨ JavaScript å®šä¹‰å…¨å±€å‡½æ•°ä¾›å›è°ƒã€‚</li>
<li>æˆ‘ä»¬åªéœ€è¦å‘é€å›è°ƒå‡½æ•°åã€‚</li>
</ol>
<p>äº‹å®ä¸Šï¼ŒJSONP å·²ç»è¢«å¤§å®¶å¹¿æ³›ä½¿ç”¨ã€‚æœ€å¸¸è§çš„æ¡ˆä¾‹å°±æ˜¯ Discuz! çš„ fwin æ§ä»¶ã€‚</p>
<h3 data-id="heading-79">æ‰‹å†™ä¸€ä¸ª JSONPï¼ˆPHP + JavaScriptï¼‰ï¼š</h3>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-built_in">window</span>.jsonp = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">url, callback</span>) </span>&#123;
    <span class="hljs-keyword">var</span> funcName = <span class="hljs-string">"handeler"</span> + <span class="hljs-built_in">Math</span>.random().toString().replace(<span class="hljs-string">"."</span>, <span class="hljs-string">""</span>);
    <span class="hljs-keyword">var</span> parameter = <span class="hljs-string">"?callback="</span> + funcName;
    <span class="hljs-keyword">var</span> scriptEle = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"script"</span>);
    scriptEle.src = url + parameter;
    <span class="hljs-built_in">window</span>[funcName] = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>&#123;
        callback(data);
        <span class="hljs-built_in">document</span>.body.removeChild(scriptEle);
    &#125;;
    <span class="hljs-built_in">document</span>.body.appendChild(scriptEle);
&#125;;

jsonp(<span class="hljs-string">"http://127.0.0.1/tmp.php"</span>, <span class="hljs-built_in">console</span>.log); <span class="hljs-comment">// &#123;name: "Hoarfroster"&#125;</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<pre><code class="hljs language-php copyable" lang="php"><span class="hljs-meta"><?php</span>
<span class="hljs-variable">$callback</span> = <span class="hljs-variable">$_GET</span>[<span class="hljs-string">'callback'</span>];
<span class="hljs-keyword">exit</span>(<span class="hljs-variable">$callback</span>.<span class="hljs-string">"(&#123;'name': 'Hoarfroster'&#125;)"</span>);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>å‘ï¼Œåæ­£åœ¨ <code>https://www.google.com/</code> ä¸ŠæˆåŠŸè®¿é—®åˆ° <code>http://127.0.0.1/</code> äº†ã€‚</p>
<h2 data-id="heading-80">0x78 JavaScript ç§æ€æ ·è°ƒè¯•ï¼Ÿ</h2>
<blockquote>
<p>åªè¦ä½ å†™ä»£ç ï¼Œæ€»ä¼šæœ‰å‡ºé”™ï¼ˆç¬‘ï¼‰ã€‚</p>
</blockquote>
<p>ç¼–ç¨‹ä»£ç å¯èƒ½åŒ…å«è¯­æ³•é”™è¯¯æˆ–é€»è¾‘é”™è¯¯ï¼Œå…¶ä¸­è®¸å¤šé”™è¯¯å¾ˆéš¾è¯Šæ–­ã€‚</p>
<p>ä¸å°‘æƒ…å†µä¸‹ï¼Œå³ä¾¿ä»£ç å‡ºç°äº†é”™è¯¯ï¼Œä¹Ÿæœ‰å¯èƒ½æ²¡æœ‰ä»»ä½•æ˜¾æ€§çš„è¡¨éœ²ï¼Œç›´åˆ°é”™è¯¯ç´¯ç§¯åçš„å¤§çˆ†å‘ã€‚æ²¡æœ‰é”™è¯¯æ¶ˆæ¯ï¼Œæˆ‘ä»¬ä¹Ÿä¸ä¼šå¾—åˆ°åœ¨ä½•å¤„æœç´¢é”™è¯¯çš„æŒ‡ç¤ºã€‚</p>
<h3 data-id="heading-81">92.1 è°ƒè¯•å·¥å…·</h3>
<p>å¹¸è¿çš„äº‹ï¼Œæ‰€æœ‰ç°ä»£æµè§ˆå™¨éƒ½å†…ç½®æœ‰ JavaScript è°ƒè¯•å™¨ã€‚æ‰“å¼€æ§åˆ¶å°ï¼Œé€‰æ‹© <code>Console</code> æˆ– <code>Source</code>ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿçœ‹åˆ°ç‰¹å®šçš„è°ƒè¯•å·¥å…·ã€‚</p>
<h4 data-id="heading-82">92.1.1 æ§åˆ¶å°æ‰“å°</h4>
<p>Console API ä¸ºæˆ‘ä»¬æä¾›äº†ä¸å°‘æ‰“å°ä¿¡æ¯çš„æ–¹æ³•ï¼Œè¯¸å¦‚ <code>console.log</code> æ‰“å°æ—¥å¿—ï¼Œ<code>console.dir</code> æ‰“å°å¯¹è±¡ï¼Œ<code>console.table</code> æ‰“å°è¡¨æ ¼â€¦â€¦</p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨æ§åˆ¶å°çš„ <code>Console</code> ä¸€æ çœ‹åˆ°æ‰“å°çš„è¾“å‡ºã€‚</p>
<h4 data-id="heading-83">92.1.2 debugger</h4>
<p>åœ¨ <code>Source</code> ä¸€æ æˆ‘ä»¬èƒ½å¤Ÿçœ‹åˆ° debugger è°ƒè¯•å·¥å…·ç»„ï¼Œæœ‰æ–­ç‚¹å·¥å…·ï¼Œè°ƒç”¨æ ˆæ˜¾ç¤ºã€XHR/fetch æ–­ç‚¹ã€DOM æ–­ç‚¹ã€å…¨å±€ç›‘å¬å™¨ã€äº‹ä»¶ç›‘å¬å™¨ç­‰ã€‚</p>
<h2 data-id="heading-84">0x79 å¦‚ä½•åŠ¨æ€åŠ è½½ CSS å’Œ JS æ–‡ä»¶ï¼Ÿ</h2>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">let</span> dynamicLoading = &#123;
    <span class="hljs-attr">css</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">path</span>) </span>&#123;
        <span class="hljs-keyword">if</span> (!path || path.length === <span class="hljs-number">0</span>) &#123;
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'argument "path" is required !'</span>);
        &#125;
        <span class="hljs-keyword">let</span> head = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'head'</span>)[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">let</span> link = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'link'</span>);
        link.href = path;
        link.rel = <span class="hljs-string">'stylesheet'</span>;
        link.type = <span class="hljs-string">'text/css'</span>;
        head.appendChild(link);
    &#125;,
    <span class="hljs-attr">js</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">path</span>) </span>&#123;
        <span class="hljs-keyword">if</span> (!path || path.length === <span class="hljs-number">0</span>) &#123;
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'argument "path" is required !'</span>);
        &#125;
        <span class="hljs-keyword">let</span> head = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'head'</span>)[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">let</span> script = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'script'</span>);
        script.src = path;
        script.type = <span class="hljs-string">'text/javascript'</span>;
        head.appendChild(script);
    &#125;
&#125;

<span class="hljs-comment">//åŠ¨æ€åŠ è½½ CSS æ–‡ä»¶</span>
dynamicLoading.css(<span class="hljs-string">"test.css"</span>);

<span class="hljs-comment">//åŠ¨æ€åŠ è½½ JS æ–‡ä»¶</span>
dynamicLoading.js(<span class="hljs-string">"test.js"</span>);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h2 data-id="heading-85">0x80 å¦‚ä½•åœ¨å­—ç¬¦ä¸²é—´æ‹¼æ¥å˜é‡</h2>
<p>åœ¨ JavaScript ä¸­ï¼Œä½¿ç”¨å­—ç¬¦ä¸²è¿æ¥æœ‰ 4 ç§æ–¹å¼ã€‚</p>
<h3 data-id="heading-86">1. ä½¿ç”¨åŠ å·è¿ç®—ç¬¦</h3>
<p>è¿æ¥å­—ç¬¦ä¸²æœ€ç®€ä¾¿çš„æ–¹æ³•æ˜¯ä½¿ç”¨åŠ å·è¿ç®—ç¬¦ã€‚ä¸‹é¢ä»£ç ä½¿ç”¨åŠ å·è¿ç®—ç¬¦è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">var</span> s1 = <span class="hljs-string">"abc"</span>, s2 = <span class="hljs-string">"def"</span>;
<span class="hljs-built_in">console</span>.log(s1 + s2);
<span class="hljs-comment">//è¿”å›å­—ç¬¦ä¸²â€œabcdefâ€</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-87">2. ä½¿ç”¨concat()æ–¹æ³•</h3>
<p>ä½¿ç”¨å­—ç¬¦ä¸² concat() æ–¹æ³•å¯ä»¥æŠŠå¤šä¸ªå‚æ•°æ·»åŠ åˆ°æŒ‡å®šå­—ç¬¦ä¸²çš„å°¾éƒ¨ã€‚è¯¥æ–¹æ³•çš„å‚æ•°ç±»å‹å’Œä¸ªæ•°æ²¡æœ‰é™åˆ¶ï¼Œå®ƒä¼šæŠŠæ‰€æœ‰å‚æ•°éƒ½è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åæŒ‰é¡ºåºè¿æ¥åˆ°å½“å‰å­—ç¬¦ä¸²çš„å°¾éƒ¨æœ€åè¿”å›è¿æ¥åçš„å­—ç¬¦ä¸²ã€‚ ä¸‹é¢ä»£ç ä½¿ç”¨ concat() æ–¹æ³•æŠŠå¤šä¸ªå­—ç¬¦ä¸²è¿æ¥åœ¨ä¸€èµ·ã€‚</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">var</span> s1 = <span class="hljs-string">"abc"</span>;
<span class="hljs-keyword">var</span> s2 = s1.concat(<span class="hljs-string">"d"</span>, <span class="hljs-string">"e"</span>, <span class="hljs-string">"f"</span>);
<span class="hljs-comment">//è°ƒç”¨concat() è¿æ¥å­—ç¬¦ä¸²</span>
<span class="hljs-built_in">console</span>.log(s2);
<span class="hljs-comment">// è¿”å›å­—ç¬¦ä¸²â€œabcdefâ€ </span>
<span class="hljs-comment">// concat() æ–¹æ³•ä¸ä¼šä¿®æ”¹åŸå­—ç¬¦ä¸²çš„å€¼ï¼Œä¸æ•°ç»„çš„ concat() æ–¹æ³•æ“ä½œç›¸ä¼¼ã€‚</span>
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<h3 data-id="heading-88">3. ä½¿ç”¨join()æ–¹æ³•</h3>
<p>åœ¨ç‰¹å®šçš„æ“ä½œç¯å¢ƒä¸­ï¼Œä¹Ÿå¯ä»¥å€ŸåŠ©æ•°ç»„çš„ join() æ–¹æ³•æ¥è¿æ¥å­—ç¬¦ä¸²ï¼Œå¦‚ HTML å­—ç¬¦ä¸²è¾“å‡ºç­‰ã€‚ ä¸‹é¢ä»£ç æ¼”ç¤ºäº†å¦‚ä½•å€ŸåŠ©æ•°ç»„çš„æ–¹æ³•æ¥è¿æ¥å­—ç¬¦ä¸²ã€‚</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-keyword">var</span> s = <span class="hljs-string">"JavaScript"</span>, a = [];
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i < <span class="hljs-number">1000</span>; i++) &#123;
    a.push(s);
    <span class="hljs-keyword">var</span> str = a.join(<span class="hljs-string">""</span>);
    a = <span class="hljs-literal">null</span>;
    <span class="hljs-built_in">document</span>.write(str);
&#125;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>åœ¨ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨ for è¯­å¥æŠŠ 1000 ä¸ª <code>"JavaScript"</code> å­—ç¬¦ä¸²è£…å…¥æ•°ç»„ï¼Œç„¶åè°ƒç”¨æ•°ç»„çš„ <code>join()</code> æ–¹æ³•æŠŠå…ƒç´ çš„å€¼è¿æ¥æˆä¸€ä¸ªé•¿é•¿çš„å­—ç¬¦ä¸²ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨å®Œååº”è¯¥ç«‹å³æ¸…é™¤æ•°ç»„ï¼Œé¿å…å ç”¨ç³»ç»Ÿèµ„æºã€‚</p>
<p>åœ¨ä¼ ç»Ÿæµè§ˆå™¨ä¸­ï¼Œä½¿ç”¨æ•°ç»„çš„ <code>join()</code> æ–¹æ³•è¿æ¥è¶…å¤§å­—ç¬¦ä¸²æ—¶ï¼Œé€Ÿåº¦ä¼šå¾ˆå¿«ï¼Œæ˜¯æ¨èçš„æœ€ä½³æ–¹æ³•ã€‚éšç€ç°ä»£æµè§ˆå™¨ä¼˜åŒ–äº†åŠ å·è¿ç®—ç¬¦çš„ç®—æ³•ï¼Œä½¿ç”¨åŠ å·è¿ç®—ç¬¦è¿æ¥å­—ç¬¦ä¸²é€Ÿåº¦ä¹Ÿéå¸¸å¿«ï¼ŒåŒæ—¶ä½¿ç”¨ç®€å•ã€‚ä¸€èˆ¬æ¨èä½¿ç”¨åŠ å·è¿ç®—ç¬¦æ¥è¿æ¥å­—ç¬¦ä¸²ï¼Œè€Œ <code>concat()</code> å’Œ <code>join()</code> æ–¹æ³•å¯ä»¥ç”¨åœ¨ç‰¹å®šçš„ä»£ç ç¯å¢ƒä¸­ã€‚</p>
<h3 data-id="heading-89">4. ä½¿ç”¨ ` åŒ…è£¹å­—ç¬¦ä¸²ï¼Œå¹¶ä½¿ç”¨ $&#123;&#125; å®ç°æ‹¼æ¥</h3>
<p>å¯¹äºä½¿ç”¨ ` åŒ…è£¹çš„å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨ <code>$&#123;&#125;</code> å¹¶åœ¨èŠ±æ‹¬å·å†…æ‰§è¡Œå†…è”æ–¹æ³•ç­‰å¤æ‚æ“ä½œè¿›è¡Œæ‹¼æ¥ã€‚æ¯”å¦‚è¯´ï¼š</p>
<pre><code class="hljs language-javascript copyable" lang="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
&#125;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f1</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">return</span> <span class="hljs-string">"tmp"</span>
&#125;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f2</span>(<span class="hljs-params"></span>) </span>&#123;
    <span class="hljs-keyword">return</span> <span class="hljs-string">"persistent"</span>;
&#125;

<span class="hljs-keyword">let</span> tmpVar = <span class="hljs-string">"tmp"</span>;

<span class="hljs-keyword">let</span> str = <span class="hljs-string">`value of variable <span class="hljs-subst">$&#123;tmpVar&#125;</span> is <span class="hljs-subst">$&#123;f() === <span class="hljs-number">1</span> ? f1() : f2()&#125;</span>.`</span>;
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre></div>  
</div>
            