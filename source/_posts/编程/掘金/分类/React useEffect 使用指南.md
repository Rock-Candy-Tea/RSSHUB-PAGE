
---
title: 'React useEffect ä½¿ç”¨æŒ‡å—'
categories: 
 - ç¼–ç¨‹
 - æ˜é‡‘
 - åˆ†ç±»
headimg: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c43365c28bd54bb0a9a54dd60efa1038~tplv-k3u1fbpfcp-watermark.image'
author: æ˜é‡‘
comments: false
date: Sat, 28 Aug 2021 03:30:17 GMT
thumbnail: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c43365c28bd54bb0a9a54dd60efa1038~tplv-k3u1fbpfcp-watermark.image'
---

<div>   
<div class="markdown-body html cache"><style>.markdown-body&#123;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333&#125;.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6&#123;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px&#125;.markdown-body h1&#123;font-size:30px;margin-bottom:5px&#125;.markdown-body h2&#123;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec&#125;.markdown-body h3&#123;font-size:18px;padding-bottom:0&#125;.markdown-body h4&#123;font-size:16px&#125;.markdown-body h5&#123;font-size:15px&#125;.markdown-body h6&#123;margin-top:5px&#125;.markdown-body p&#123;line-height:inherit;margin-top:22px;margin-bottom:22px&#125;.markdown-body img&#123;max-width:100%&#125;.markdown-body hr&#123;border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px&#125;.markdown-body code&#123;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em&#125;.markdown-body code,.markdown-body pre&#123;font-family:Menlo,Monaco,Consolas,Courier New,monospace&#125;.markdown-body pre&#123;overflow:auto;position:relative;line-height:1.75&#125;.markdown-body pre>code&#123;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8&#125;.markdown-body a&#123;text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff&#125;.markdown-body a:active,.markdown-body a:hover&#123;color:#275b8c&#125;.markdown-body table&#123;display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6&#125;.markdown-body thead&#123;background:#f6f6f6;color:#000;text-align:left&#125;.markdown-body tr:nth-child(2n)&#123;background-color:#fcfcfc&#125;.markdown-body td,.markdown-body th&#123;padding:12px 7px;line-height:24px&#125;.markdown-body td&#123;min-width:120px&#125;.markdown-body blockquote&#123;color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8&#125;.markdown-body blockquote:after&#123;display:block;content:""&#125;.markdown-body blockquote>p&#123;margin:10px 0&#125;.markdown-body ol,.markdown-body ul&#123;padding-left:28px&#125;.markdown-body ol li,.markdown-body ul li&#123;margin-bottom:0;list-style:inherit&#125;.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item&#123;list-style:none&#125;.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul&#123;margin-top:0&#125;.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul&#123;margin-top:3px&#125;.markdown-body ol li&#123;padding-left:6px&#125;.markdown-body .contains-task-list&#123;padding-left:0&#125;.markdown-body .task-list-item&#123;list-style:none&#125;@media (max-width:720px)&#123;.markdown-body h1&#123;font-size:24px&#125;.markdown-body h2&#123;font-size:20px&#125;.markdown-body h3&#123;font-size:18px&#125;&#125;</style><h2 data-id="heading-0"><em>useEffect</em> ä»‹ç»</h2>
<p><em>useEffect</em> æ˜¯åœ¨ React æ–‡æ¡£ä¸­ä»‹ç»çš„ç¬¬äºŒä¸ª React hookã€‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c43365c28bd54bb0a9a54dd60efa1038~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<p>ä»å‘½åå¯çŸ¥ï¼Œä¸ Effect å‰¯ä½œç”¨æœ‰å…³ï¼Œé‚£ä¹ˆ<strong>ä»€ä¹ˆæ˜¯å‰¯ä½œç”¨å‘¢</strong>ï¼Ÿ</p>
<p>åœ¨ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FMostlyAdequate%2Fmostly-adequate-guide" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/MostlyAdequate/mostly-adequate-guide" ref="nofollow noopener noreferrer">ã€Šmostly adequate guideã€‹</a>ä¸€ä¹¦ä¸­ï¼Œæ˜¯è¿™æ ·å®šä¹‰çš„ï¼š</p>
<blockquote>
<p>A side effect is a change of system state or observable interaction with the outside world that occurs during the calculation of a result.</p>
</blockquote>
<p>å¯¹åº”çš„ä¸­æ–‡æ„æ€æ˜¯ï¼šå‰¯ä½œç”¨æ˜¯åœ¨è®¡ç®—ç»“æœçš„è¿‡ç¨‹ä¸­ï¼Œç³»ç»ŸçŠ¶æ€çš„ä¸€ç§å˜åŒ–ï¼Œæˆ–è€…ä¸å¤–éƒ¨ä¸–ç•Œè¿›è¡Œçš„
å¯è§‚å¯Ÿçš„äº¤äº’ã€‚</p>
<p><strong>äº§ç”Ÿå‰¯ä½œç”¨çš„æƒ…å½¢</strong>ï¼šä¿®æ”¹ DOMã€å‘é€ http è¯·æ±‚ã€ä¿®æ”¹ URL queryã€ä¿®æ”¹ cookieã€sessionStorageã€localStorage å’Œ <code>console.log</code> ç­‰ã€‚å¯è§ï¼Œå‰¯ä½œç”¨æ— æ³•é¿å…ï¼Œè€Œä¸”éå¸¸å¸¸è§ï¼Œ<em>useEffect</em>Â å¯ä»¥è®©æˆ‘ä»¬åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œã€‚</p>
<p><strong><em>useEffect</em> çš„å‚æ•°</strong>: æˆ‘ä»¬æŸ¥çœ‹ <em>useEffect</em> çš„å£°æ˜ï¼Œ åœ¨ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FDefinitelyTyped%2FDefinitelyTyped%2Fblob%2Fmaster%2Ftypes%2Freact%2Findex.d.ts%23L1085" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/react/index.d.ts#L1085" ref="nofollow noopener noreferrer">react/index.d.ts</a> å¯ä»¥çœ‹åˆ° <code>useEffect</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ effect çš„å›è°ƒï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ deps ä¾èµ–é¡¹ï¼Œå¯é€‰ï¼Œç±»å‹æ˜¯æ•°ç»„ï¼Œä¼šæ ¹æ®ä¾èµ–é¡¹ï¼Œå†³å®šæ˜¯å¦è°ƒç”¨ EffectCallbackã€‚</p>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fcarbon.now.sh%2F%3Fbg%3Drgba%2528171%252C%2B184%252C%2B195%252C%2B1%2529%26t%3Done-light%26wt%3Dnone%26l%3Djavascript%26ds%3Dtrue%26dsyoff%3D20px%26dsblur%3D68px%26wc%3Dtrue%26wa%3Dfalse%26pv%3D56px%26ph%3D56px%26ln%3Dfalse%26fl%3D1%26fm%3DHack%26fs%3D14px%26lh%3D133%2525%26si%3Dfalse%26es%3D2x%26wm%3Dfalse%26code%3D%25252F%25252F%252520Similar%252520to%252520componentDidMount%252520and%252520componentDidUpdate%25253A%25250AuseEffect%2528%25250A%252520%252520%2528%2529%252520%25253D%25253E%252520%25257B%25250A%252520%252520%252520%252520%25252F%25252F%252520Update%252520the%252520document%252520title%252520using%252520the%252520browser%252520API%25250A%252520%252520%252520%252520document.title%252520%25253D%252520%252560Clicked%252520%252524%25257Bcount%25257D%252520times%252560%25253B%252520%252520%25257D%2529%25253B%25250A%252520%252520%25257D%25250A%2529%25250A%25250A%25250A%25252F%25252F%252520Photo%252520by%252520Ignacio%252520Aguilar%252520on%252520Unsplash" target="_blank" rel="nofollow noopener noreferrer" title="https://carbon.now.sh/?bg=rgba%28171%2C+184%2C+195%2C+1%29&t=one-light&wt=none&l=javascript&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=false&pv=56px&ph=56px&ln=false&fl=1&fm=Hack&fs=14px&lh=133%25&si=false&es=2x&wm=false&code=%252F%252F%2520Similar%2520to%2520componentDidMount%2520and%2520componentDidUpdate%253A%250AuseEffect%28%250A%2520%2520%28%29%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%252F%252F%2520Update%2520the%2520document%2520title%2520using%2520the%2520browser%2520API%250A%2520%2520%2520%2520document.title%2520%253D%2520%2560Clicked%2520%2524%257Bcount%257D%2520times%2560%253B%2520%2520%257D%29%253B%250A%2520%2520%257D%250A%29%250A%250A%250A%252F%252F%2520Photo%2520by%2520Ignacio%2520Aguilar%2520on%2520Unsplash" ref="nofollow noopener noreferrer"><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dee09d9d326f47d5b7c5850f5dd916df~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></a></p>
<p><strong><em>useEffect</em> è°ƒç”¨æ—¶æœº</strong>ï¼š</p>
<ol>
<li>ä¸æ¸²æŸ“çš„å…ˆåå…³ç³»ï¼šReact ä¼šç­‰å¾…æµè§ˆå™¨å®Œæˆç”»é¢æ¸²æŸ“ä¹‹åæ‰ä¼šå»¶è¿Ÿè°ƒç”¨Â <em>useEffect</em></li>
<li>è°ƒç”¨æ¬¡æ•°ï¼šåœ¨ä¸ä¼  deps ä¾èµ–é¡¹æƒ…å†µä¸‹ï¼Œ<em>useEffect</em>Â ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“åéƒ½æ‰§è¡Œ</li>
</ol>
<h2 data-id="heading-1"><em>useEffect</em> ä¾èµ–é¡¹</h2>
<p>æ¥ä¸‹æ¥ä¼šä»‹ç» <strong>é€šè¿‡æ§åˆ¶ä¾èµ–é¡¹ï¼Œæœ‰æ¡ä»¶åœ°æ‰§è¡Œ EffectCallbackï¼Œå¯ç”¨äºæ€§èƒ½ä¼˜åŒ–</strong>ã€‚</p>
<h3 data-id="heading-2">ä¸€ã€ä¸ä¼ ä¾èµ–é¡¹</h3>
<p><strong>è°ƒç”¨æ—¶æœºï¼š</strong> åœ¨ä¸ä¼  deps ä¾èµ–é¡¹æƒ…å†µä¸‹ï¼Œ<em>useEffect</em>Â ä¼šåœ¨<strong>æ¯æ¬¡æ¸²æŸ“åéƒ½æ‰§è¡Œ</strong>ï¼Œå³å®ƒåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“ä¹‹å<em>å’Œ</em>æ¯æ¬¡æ›´æ–°ä¹‹åéƒ½ä¼šæ‰§è¡Œã€‚ç›¸å½“äºåœ¨ <code>componentDidMount</code> å’Œ <code>componentDidUpdate</code> ä¸¤ä¸ªç±»æ–¹æ³•ä¸­æ‰§è¡Œã€‚</p>
<p>é€‚åˆäº effect çš„å›è°ƒé‡Œè®¡ç®—é‡å°ï¼Œä¸ä¼šè§¦å‘æ¸²æŸ“çš„æƒ…å½¢ã€‚</p>
<p>ä¸ºé™ä½å¼€å‘éš¾åº¦ï¼ŒReact æ–‡æ¡£æ¨èè¿™ç§ä½¿ç”¨æ–¹å¼ï¼Œå¯ç‚¹å‡»æŸ¥çœ‹ <a href="https://link.juejin.cn/?target=https%3A%2F%2Freact.docschina.org%2Fdocs%2Fhooks-effect.html%23explanation-why-effects-run-on-each-update" target="_blank" rel="nofollow noopener noreferrer" title="https://react.docschina.org/docs/hooks-effect.html#explanation-why-effects-run-on-each-update" ref="nofollow noopener noreferrer">è§£é‡Š: ä¸ºä»€ä¹ˆæ¯æ¬¡æ›´æ–°çš„æ—¶å€™éƒ½è¦è¿è¡Œ Effect</a></p>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fcarbon.now.sh%2F%3Fbg%3Drgba%2528171%252C%2B184%252C%2B195%252C%2B1%2529%26t%3Done-light%26wt%3Dnone%26l%3Djavascript%26ds%3Dtrue%26dsyoff%3D20px%26dsblur%3D68px%26wc%3Dtrue%26wa%3Dfalse%26pv%3D56px%26ph%3D56px%26ln%3Dfalse%26fl%3D1%26fm%3DHack%26fs%3D14px%26lh%3D133%2525%26si%3Dfalse%26es%3D2x%26wm%3Dfalse%26code%3D%25252F%25252F%252520Similar%252520to%252520componentDidMount%252520and%252520componentDidUpdate%25253A%25250AuseEffect%2528%25250A%252520%252520%2528%2529%252520%25253D%25253E%252520%25257B%25250A%252520%252520%252520%252520%25252F%25252F%252520Update%252520the%252520document%252520title%252520using%252520the%252520browser%252520API%25250A%252520%252520%252520%252520document.title%252520%25253D%252520%252560Clicked%252520%252524%25257Bcount%25257D%252520times%252560%25253B%252520%252520%25257D%2529%25253B%25250A%252520%252520%25257D%25250A%2529%25250A%25250A%25250A%25252F%25252F%252520Photo%252520by%252520Ignacio%252520Aguilar%252520on%252520Unsplash" target="_blank" rel="nofollow noopener noreferrer" title="https://carbon.now.sh/?bg=rgba%28171%2C+184%2C+195%2C+1%29&t=one-light&wt=none&l=javascript&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=false&pv=56px&ph=56px&ln=false&fl=1&fm=Hack&fs=14px&lh=133%25&si=false&es=2x&wm=false&code=%252F%252F%2520Similar%2520to%2520componentDidMount%2520and%2520componentDidUpdate%253A%250AuseEffect%28%250A%2520%2520%28%29%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%252F%252F%2520Update%2520the%2520document%2520title%2520using%2520the%2520browser%2520API%250A%2520%2520%2520%2520document.title%2520%253D%2520%2560Clicked%2520%2524%257Bcount%257D%2520times%2560%253B%2520%2520%257D%29%253B%250A%2520%2520%257D%250A%29%250A%250A%250A%252F%252F%2520Photo%2520by%2520Ignacio%2520Aguilar%2520on%2520Unsplash" ref="nofollow noopener noreferrer"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8658fa920e1f4d8e96eda68ff7347abe~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></a></p>
<h3 data-id="heading-3">äºŒã€ä¾èµ–é¡¹ä¸ºç©ºæ•°ç»„</h3>
<p><strong>è°ƒç”¨æ—¶æœºï¼š</strong> å½“ä¸éœ€è¦åœ¨æ¯æ¬¡æ¸²æŸ“åéƒ½æ‰§è¡Œï¼Œå¸Œæœ›<strong>åªåœ¨å®ƒç¬¬ä¸€æ¬¡æ¸²æŸ“ä¹‹åæ‰§è¡Œ</strong>ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ <em>useEffect</em> çš„ä¾èµ–é¡¹è®¾ä¸ºç©ºæ•°ç»„ï¼Œç›¸å½“äºä»¥å‰çš„ class ç»„ä»¶çš„ <code>componentDidMount</code>ã€‚</p>
<p>ä»¥ä¸‹ä¸¾ä¸‰ä¸ªä¾‹å­</p>
<ol>
<li>
<p>å¼•ç”¨å®˜æ–¹æ–‡æ¡£çš„<a href="https://link.juejin.cn/?target=https%3A%2F%2Freact.docschina.org%2Fdocs%2Fhooks-faq.html%23what-can-i-do-if-my-effect-dependencies-change-too-often" target="_blank" rel="nofollow noopener noreferrer" title="https://react.docschina.org/docs/hooks-faq.html#what-can-i-do-if-my-effect-dependencies-change-too-often" ref="nofollow noopener noreferrer">ä¾‹å­</a>ï¼Œè®¾å®š Interval å®šæ—¶å™¨ã€‚</p>
<p>è¿™ä¸ªä¾‹å­éœ€æ±‚æ˜¯è®© state count æ¯ç§’è‡ªåŠ ä¸€ã€‚å¦‚æœä¸ä¼ ä¾èµ–é¡¹ï¼Œå°±ä¼šæ¯ç§’éƒ½ <code>setInterval</code>, ä¸ç¬¦åˆéœ€æ±‚ã€‚æ­£ç¡®åšæ³•æ˜¯ï¼Œåªåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“ä¹‹åæ‰§è¡Œã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fcarbon.now.sh%2F%3Fbg%3Drgba%2528171%252C%2B184%252C%2B195%252C%2B1%2529%26t%3Done-light%26wt%3Dnone%26l%3Djavascript%26ds%3Dtrue%26dsyoff%3D20px%26dsblur%3D68px%26wc%3Dtrue%26wa%3Dfalse%26pv%3D56px%26ph%3D56px%26ln%3Dfalse%26fl%3D1%26fm%3DHack%26fs%3D14px%26lh%3D133%2525%26si%3Dfalse%26es%3D2x%26wm%3Dfalse%26code%3D%25252F%25252F%252520Similar%252520to%252520componentDidMount%252520and%252520componentDidUpdate%25253A%25250AuseEffect%2528%25250A%252520%252520%2528%2529%252520%25253D%25253E%252520%25257B%25250A%252520%252520%252520%252520%25252F%25252F%252520Update%252520the%252520document%252520title%252520using%252520the%252520browser%252520API%25250A%252520%252520%252520%252520document.title%252520%25253D%252520%252560Clicked%252520%252524%25257Bcount%25257D%252520times%252560%25253B%252520%252520%25257D%2529%25253B%25250A%252520%252520%25257D%25250A%2529%25250A%25250A%25250A%25252F%25252F%252520Photo%252520by%252520Ignacio%252520Aguilar%252520on%252520Unsplash" target="_blank" rel="nofollow noopener noreferrer" title="https://carbon.now.sh/?bg=rgba%28171%2C+184%2C+195%2C+1%29&t=one-light&wt=none&l=javascript&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=false&pv=56px&ph=56px&ln=false&fl=1&fm=Hack&fs=14px&lh=133%25&si=false&es=2x&wm=false&code=%252F%252F%2520Similar%2520to%2520componentDidMount%2520and%2520componentDidUpdate%253A%250AuseEffect%28%250A%2520%2520%28%29%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%252F%252F%2520Update%2520the%2520document%2520title%2520using%2520the%2520browser%2520API%250A%2520%2520%2520%2520document.title%2520%253D%2520%2560Clicked%2520%2524%257Bcount%257D%2520times%2560%253B%2520%2520%257D%29%253B%250A%2520%2520%257D%250A%29%250A%250A%250A%252F%252F%2520Photo%2520by%2520Ignacio%2520Aguilar%2520on%2520Unsplash" ref="nofollow noopener noreferrer"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5be9f857f8fb4ebcbcb4b80b77e4086d~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></a></p>
</li>
<li>
<p>è¿›è¡Œæ•°æ®è¯·æ±‚ã€‚</p>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fcarbon.now.sh%2F%3Fbg%3Drgba%2528171%252C%2B184%252C%2B195%252C%2B1%2529%26t%3Done-light%26wt%3Dnone%26l%3Djavascript%26ds%3Dtrue%26dsyoff%3D20px%26dsblur%3D68px%26wc%3Dtrue%26wa%3Dfalse%26pv%3D56px%26ph%3D56px%26ln%3Dfalse%26fl%3D1%26fm%3DHack%26fs%3D14px%26lh%3D133%2525%26si%3Dfalse%26es%3D2x%26wm%3Dfalse%26code%3D%25252F%25252F%252520Similar%252520to%252520componentDidMount%252520and%252520componentDidUpdate%25253A%25250AuseEffect%2528%25250A%252520%252520%2528%2529%252520%25253D%25253E%252520%25257B%25250A%252520%252520%252520%252520%25252F%25252F%252520Update%252520the%252520document%252520title%252520using%252520the%252520browser%252520API%25250A%252520%252520%252520%252520document.title%252520%25253D%252520%252560Clicked%252520%252524%25257Bcount%25257D%252520times%252560%25253B%252520%252520%25257D%2529%25253B%25250A%252520%252520%25257D%25250A%2529%25250A%25250A%25250A%25252F%25252F%252520Photo%252520by%252520Ignacio%252520Aguilar%252520on%252520Unsplash" target="_blank" rel="nofollow noopener noreferrer" title="https://carbon.now.sh/?bg=rgba%28171%2C+184%2C+195%2C+1%29&t=one-light&wt=none&l=javascript&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=false&pv=56px&ph=56px&ln=false&fl=1&fm=Hack&fs=14px&lh=133%25&si=false&es=2x&wm=false&code=%252F%252F%2520Similar%2520to%2520componentDidMount%2520and%2520componentDidUpdate%253A%250AuseEffect%28%250A%2520%2520%28%29%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%252F%252F%2520Update%2520the%2520document%2520title%2520using%2520the%2520browser%2520API%250A%2520%2520%2520%2520document.title%2520%253D%2520%2560Clicked%2520%2524%257Bcount%257D%2520times%2560%253B%2520%2520%257D%29%253B%250A%2520%2520%257D%250A%29%250A%250A%250A%252F%252F%2520Photo%2520by%2520Ignacio%2520Aguilar%2520on%2520Unsplash" ref="nofollow noopener noreferrer"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/53f53d059441472eacc0a80356fdc0cd~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></a></p>
</li>
<li>
<p>ä» URLSearchParams è·å–æ•°æ®ï¼Œç”¨äºåˆå§‹åŒ– stateã€‚</p>
<p>è¿™ä¸ªä¾‹å­æ˜¯åœ¨é¡µç é€‰æ‹©å™¨ï¼Œä» URL query ä¸­è·å– pageï¼Œç”¨äºåˆå§‹åŒ– page stateã€‚</p>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fcarbon.now.sh%2F%3Fbg%3Drgba%2528171%252C%2B184%252C%2B195%252C%2B1%2529%26t%3Done-light%26wt%3Dnone%26l%3Djavascript%26ds%3Dtrue%26dsyoff%3D20px%26dsblur%3D68px%26wc%3Dtrue%26wa%3Dfalse%26pv%3D56px%26ph%3D56px%26ln%3Dfalse%26fl%3D1%26fm%3DHack%26fs%3D14px%26lh%3D133%2525%26si%3Dfalse%26es%3D2x%26wm%3Dfalse%26code%3D%25252F%25252F%252520Similar%252520to%252520componentDidMount%252520and%252520componentDidUpdate%25253A%25250AuseEffect%2528%25250A%252520%252520%2528%2529%252520%25253D%25253E%252520%25257B%25250A%252520%252520%252520%252520%25252F%25252F%252520Update%252520the%252520document%252520title%252520using%252520the%252520browser%252520API%25250A%252520%252520%252520%252520document.title%252520%25253D%252520%252560Clicked%252520%252524%25257Bcount%25257D%252520times%252560%25253B%252520%252520%25257D%2529%25253B%25250A%252520%252520%25257D%25250A%2529%25250A%25250A%25250A%25252F%25252F%252520Photo%252520by%252520Ignacio%252520Aguilar%252520on%252520Unsplash" target="_blank" rel="nofollow noopener noreferrer" title="https://carbon.now.sh/?bg=rgba%28171%2C+184%2C+195%2C+1%29&t=one-light&wt=none&l=javascript&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=false&pv=56px&ph=56px&ln=false&fl=1&fm=Hack&fs=14px&lh=133%25&si=false&es=2x&wm=false&code=%252F%252F%2520Similar%2520to%2520componentDidMount%2520and%2520componentDidUpdate%253A%250AuseEffect%28%250A%2520%2520%28%29%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%252F%252F%2520Update%2520the%2520document%2520title%2520using%2520the%2520browser%2520API%250A%2520%2520%2520%2520document.title%2520%253D%2520%2560Clicked%2520%2524%257Bcount%257D%2520times%2560%253B%2520%2520%257D%29%253B%250A%2520%2520%257D%250A%29%250A%250A%250A%252F%252F%2520Photo%2520by%2520Ignacio%2520Aguilar%2520on%2520Unsplash" ref="nofollow noopener noreferrer"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d19f9fdf7cf04366beb3f5b070fc658b~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></a></p>
</li>
</ol>
<h3 data-id="heading-4">ä¸‰ã€ä¾èµ–é¡¹ä¸ºéç©ºæ•°ç»„</h3>
<p><strong>è°ƒç”¨æ—¶æœºï¼š</strong> å½“ä¾èµ–é¡¹ä¸ºéç©ºæ•°ç»„ï¼Œåˆ™ <strong>åœ¨æ¯æ¬¡æ¸²æŸ“åï¼Œéç©ºæ•°ç»„ä¸Šçš„ state æœ‰æ›´æ–°</strong>æ—¶ï¼Œå°±ä¼šæ‰§è¡Œ <em>EffectCallback</em>ï¼Œå³ <em>useEffect</em> ä¼ å…¥å›è°ƒå‡½æ•°ã€‚</p>
<p>å‰æ–‡æåˆ°äº† â€œå½“ä¾èµ–é¡¹ä¸ºéç©ºæ•°ç»„ï¼Œåˆ™åœ¨æ¯æ¬¡æ¸²æŸ“åï¼Œéç©ºæ•°ç»„ä¸Šçš„ state æœ‰æ›´æ–°æ—¶ï¼Œå°±ä¼šæ‰§è¡ŒÂ <em>EffectCallback</em> â€</p>
<p><strong>è¿™é‡Œçš„æ›´æ–°æ˜¯æŒ‡ä»€ä¹ˆå‘¢ï¼Ÿæ˜¯æŒ‡å¯¹ä¾èµ–é¡¹è¿›è¡Œæµ…æ¯”è¾ƒ</strong>ï¼Œå¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªstateï¼Œè¿›è¡Œä¸Šæ¬¡æ¸²æŸ“åçš„å€¼ï¼Œè·Ÿè¿™æ¬¡æ¸²æŸ“åçš„å€¼ï¼Œè¿›è¡Œæµ…æ¯”è¾ƒï¼Œä¸ç›¸ç­‰æ—¶ï¼Œå°±æ‰§è¡Œ <em>EffectCallback</em>ã€‚</p>
<p>æµ…æ¯”è¾ƒå¦‚ä½•æ¯”è¾ƒå‘¢ï¼Ÿ</p>
<p>åœ¨ JavaScript ä¸­ï¼Œæ•°æ®ç±»å‹åˆ†ä¸º <em>å€¼ç±»å‹</em> å’Œ <em>å¼•ç”¨ç±»å‹</em>ã€‚</p>
<p>å¯¹äº<strong>å€¼ç±»å‹çš„æµ…æ¯”è¾ƒæ˜¯å¯¹æ¯”å€¼æ˜¯å¦ç›¸ç­‰</strong>ã€‚</p>
<p>æœ‰ boolean number string ä¸‰ç§ï¼Œæ¯”å¦‚ <code>true !== false</code>ã€<code>1 !== 2</code> å’Œ <code>'1' !== '2'</code> ã€‚</p>
<p>å¯¹äº<strong>å¼•ç”¨ç±»å‹çš„æµ…æ¯”è¾ƒæ˜¯å¯¹æ¯”å¯¹è±¡çš„å¼•ç”¨ï¼Œå¯¹æ¯”å¯¹è±¡æŒ‡å‘çš„å†…å­˜åœ°å€</strong>ã€‚æœ‰ object array function ç­‰ç±»å‹ã€‚</p>
<h2 data-id="heading-5"><em>useEffect</em> æ¸…é™¤æœºåˆ¶</h2>
<p><strong>è§¦å‘æ—¶æœºï¼š</strong> åœ¨ä¾èµ–é¡¹ä¸ºç©ºæ•°ç»„ä¸‹ï¼Œç›¸å½“äº class ç»„ä»¶çš„ <em>componentWillUnmount</em> ã€‚</p>
<p>æˆ‘ä»¬æŸ¥çœ‹ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FDefinitelyTyped%2FDefinitelyTyped%2Fblob%2Fmaster%2Ftypes%2Freact%2Findex.d.ts%23L902" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/react/index.d.ts#L902" ref="nofollow noopener noreferrer">react/index.d.ts#L902</a>ï¼Œå¯ä»¥å‘ç° useEffet å›è°ƒå‡½æ•° <em>EffectCallback</em> çš„è¿”å›å€¼ <code>void | Destructor</code>ï¼Œå…¶ä¸­ <code>Destructor</code> æ˜¯å¯é€‰çš„ææ„å‡½æ•°ã€‚</p>
<pre><code class="hljs language-ts copyable" lang="ts"><span class="hljs-keyword">type</span> EffectCallback = <span class="hljs-function">() =></span> (<span class="hljs-built_in">void</span> | Destructor);
<span class="copy-code-btn">å¤åˆ¶ä»£ç </span></code></pre>
<p>æˆ‘ä»¬å†é‡æ–°çœ‹ä¸Šé¢è®¡æ•°å™¨çš„ä¾‹å­ï¼Œå®é™…ä¸Šåœ¨ç»„ä»¶é”€æ¯æ—¶ï¼Œè¿˜éœ€è¦æ¸…é™¤è®¡æ—¶å™¨ <code>clearInterval</code>ï¼Œå¯é€šè¿‡åœ¨ <em>EffectCallback</em> è¿”å› <code>() => clearInterval(id)</code> å»å®ç°ã€‚</p>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fcarbon.now.sh%2F%3Fbg%3Drgba%2528171%252C%2B184%252C%2B195%252C%2B1%2529%26t%3Done-light%26wt%3Dnone%26l%3Djavascript%26ds%3Dtrue%26dsyoff%3D20px%26dsblur%3D68px%26wc%3Dtrue%26wa%3Dfalse%26pv%3D56px%26ph%3D56px%26ln%3Dfalse%26fl%3D1%26fm%3DHack%26fs%3D14px%26lh%3D133%2525%26si%3Dfalse%26es%3D2x%26wm%3Dfalse%26code%3D%25252F%25252F%252520Similar%252520to%252520componentDidMount%252520and%252520componentDidUpdate%25253A%25250AuseEffect%2528%25250A%252520%252520%2528%2529%252520%25253D%25253E%252520%25257B%25250A%252520%252520%252520%252520%25252F%25252F%252520Update%252520the%252520document%252520title%252520using%252520the%252520browser%252520API%25250A%252520%252520%252520%252520document.title%252520%25253D%252520%252560Clicked%252520%252524%25257Bcount%25257D%252520times%252560%25253B%252520%252520%25257D%2529%25253B%25250A%252520%252520%25257D%25250A%2529%25250A%25250A%25250A%25252F%25252F%252520Photo%252520by%252520Ignacio%252520Aguilar%252520on%252520Unsplash" target="_blank" rel="nofollow noopener noreferrer" title="https://carbon.now.sh/?bg=rgba%28171%2C+184%2C+195%2C+1%29&t=one-light&wt=none&l=javascript&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=false&pv=56px&ph=56px&ln=false&fl=1&fm=Hack&fs=14px&lh=133%25&si=false&es=2x&wm=false&code=%252F%252F%2520Similar%2520to%2520componentDidMount%2520and%2520componentDidUpdate%253A%250AuseEffect%28%250A%2520%2520%28%29%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%252F%252F%2520Update%2520the%2520document%2520title%2520using%2520the%2520browser%2520API%250A%2520%2520%2520%2520document.title%2520%253D%2520%2560Clicked%2520%2524%257Bcount%257D%2520times%2560%253B%2520%2520%257D%29%253B%250A%2520%2520%257D%250A%29%250A%250A%250A%252F%252F%2520Photo%2520by%2520Ignacio%2520Aguilar%2520on%2520Unsplash" ref="nofollow noopener noreferrer"><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e46052886e8f42e3b0cb8be42dedc037~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></a></p>
<p><strong>æ›´å‡†ç¡®çš„è§¦å‘æ—¶æœºï¼š</strong> å½“ä¾èµ–é¡¹æ›´æ–°æ—¶ï¼Œå…ˆè°ƒç”¨ä¸Šä¸€æ¬¡æ¸²æŸ“åæ‰§è¡Œçš„ <em>EffectCallback</em> çš„é”€æ¯å‡½æ•°</p>
<p>ä»£ç ç¤ºä¾‹ï¼šæˆ‘ä»¬ç»§ç»­å¤ç”¨è®¡æ•°å™¨çš„ä¾‹å­ï¼Œå°†æ¯ç§’è‡ªåŠ ä¸€ï¼Œæ”¹ä¸ºç”±å‚æ•°é…ç½®æ¯éš”å‡ ç§’è‡ªåŠ ä¸€ï¼Œä¿®æ”¹ä»£ç ä½ç½®å¦‚ä¸‹ï¼š</p>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fcarbon.now.sh%2F%3Fbg%3Drgba%2528171%252C%2B184%252C%2B195%252C%2B1%2529%26t%3Done-light%26wt%3Dnone%26l%3Djavascript%26ds%3Dtrue%26dsyoff%3D20px%26dsblur%3D68px%26wc%3Dtrue%26wa%3Dfalse%26pv%3D56px%26ph%3D56px%26ln%3Dfalse%26fl%3D1%26fm%3DHack%26fs%3D14px%26lh%3D133%2525%26si%3Dfalse%26es%3D2x%26wm%3Dfalse%26code%3D%25252F%25252F%252520Similar%252520to%252520componentDidMount%252520and%252520componentDidUpdate%25253A%25250AuseEffect%2528%25250A%252520%252520%2528%2529%252520%25253D%25253E%252520%25257B%25250A%252520%252520%252520%252520%25252F%25252F%252520Update%252520the%252520document%252520title%252520using%252520the%252520browser%252520API%25250A%252520%252520%252520%252520document.title%252520%25253D%252520%252560Clicked%252520%252524%25257Bcount%25257D%252520times%252560%25253B%252520%252520%25257D%2529%25253B%25250A%252520%252520%25257D%25250A%2529%25250A%25250A%25250A%25252F%25252F%252520Photo%252520by%252520Ignacio%252520Aguilar%252520on%252520Unsplash" target="_blank" rel="nofollow noopener noreferrer" title="https://carbon.now.sh/?bg=rgba%28171%2C+184%2C+195%2C+1%29&t=one-light&wt=none&l=javascript&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=false&pv=56px&ph=56px&ln=false&fl=1&fm=Hack&fs=14px&lh=133%25&si=false&es=2x&wm=false&code=%252F%252F%2520Similar%2520to%2520componentDidMount%2520and%2520componentDidUpdate%253A%250AuseEffect%28%250A%2520%2520%28%29%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%252F%252F%2520Update%2520the%2520document%2520title%2520using%2520the%2520browser%2520API%250A%2520%2520%2520%2520document.title%2520%253D%2520%2560Clicked%2520%2524%257Bcount%257D%2520times%2560%253B%2520%2520%257D%29%253B%250A%2520%2520%257D%250A%29%250A%250A%250A%252F%252F%2520Photo%2520by%2520Ignacio%2520Aguilar%2520on%2520Unsplash" ref="nofollow noopener noreferrer"><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f4a0649f67be419d83bb223e7126a757~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></a></p>
<p>å¯ä»¥<a href="https://link.juejin.cn/?target=https%3A%2F%2Fcodepen.io%2Fliveabean%2Fpen%2FExXVPZo%3Feditors%3D0011" target="_blank" rel="nofollow noopener noreferrer" title="https://codepen.io/liveabean/pen/ExXVPZo?editors=0011" ref="nofollow noopener noreferrer">åœ¨ codepen ä¸Šå°è¯•æœ¬ä»£ç </a> çš„å®é™…è¿è¡Œæ•ˆæœ ğŸ˜Š</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3702b0c832594b048778f6563e3fc520~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy" referrerpolicy="no-referrer"></p>
<h2 data-id="heading-6">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn/?target=https%3A%2F%2Freactjs.org%2Fdocs%2Fhooks-intro.html" target="_blank" rel="nofollow noopener noreferrer" title="https://reactjs.org/docs/hooks-intro.html" ref="nofollow noopener noreferrer">React æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn/?target=http%3A%2F%2Fgk.link%2Fa%2F10wzH" target="_blank" rel="nofollow noopener noreferrer" title="http://gk.link/a/10wzH" ref="nofollow noopener noreferrer">æå®¢æ—¶é—´ -ã€ŠReact Hooks æ ¸å¿ƒåŸç†ä¸å®æˆ˜ã€‹</a></li>
</ul></div>  
</div>
            