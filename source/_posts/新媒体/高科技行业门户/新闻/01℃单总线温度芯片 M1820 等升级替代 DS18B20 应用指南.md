
---
title: '0.1℃单总线温度芯片 M1820 等升级替代 DS18B20 应用指南'
categories: 
 - 新媒体
 - 高科技行业门户
 - 新闻
headimg: 'https://mp.ofweek.com/Upload/News/Img/member44852/202206/10101627185490.jpg'
author: 高科技行业门户
comments: false
date: Fri, 10 Jun 2022 02:18:00 GMT
thumbnail: 'https://mp.ofweek.com/Upload/News/Img/member44852/202206/10101627185490.jpg'
---

<div>   
<p style="text-indent: 2em; text-align: left;">不少美信 DS18B20 用户，想要用更高精度或更快读温速度的单总线温度芯片进行应用 升级。敏源第 4 代高精度温度芯片 M1820（TO92S 封装）、M1601（SOT23 封装）、 M601（DFN8 封装）等，最高测温精度±0．1℃，同时也有±0．5℃精度的产品。温度芯片内 置 16 bit ADC，温度转换时间 10．5／5．5／4ms 可配置，客户把原有 DS18B20 应用例程做如 下简单修改即可：</p><p style="text-indent: 2em; text-align: left;">1、温度转换时间 DS18B20 温度转换时间最快 500ms，M1820、M1601、M601 系列温度转换时间 10．5／5．5／4ms（默认出厂配置 10．5ms），配置方式见下：</p><p style="text-indent: 2em; text-align: left;">ConvertTemp（）；</p><p style="text-indent: 2em; text-align: left;">Delay＿ms（11）；／／不同重复性下转换时间不同，此处延时必须大于对应的转换时间。</p><p style="text-indent: 2em; text-align: left;">＠brief 设置周期测量频率和重复性</p><p style="text-indent: 2em; text-align: left;">＊ ＠param mps 要设置的周期测量频率（每秒测量次数），可能为下列其一</p><p style="text-indent: 2em; text-align: left;">＊＠arg CFG＿MPS＿Single：每执行 ConvertTemp 一次，启动一次温度测量</p><p style="text-indent: 2em; text-align: left;">＊＠arg CFG＿MPS＿Half：每执行 ConvertTemp 一次，启动每秒 0．5 次重复测量</p><p style="text-indent: 2em; text-align: left;">＊＠arg CFG＿MPS＿1：每执行 ConvertTemp 一次，启动每秒 1 次重复测量</p><p style="text-indent: 2em; text-align: left;">＊＠arg CFG＿MPS＿2：每执行 ConvertTemp 一次，启动每秒 2 次重复测量</p><p style="text-indent: 2em; text-align: left;">＊＠arg CFG＿MPS＿4：每执行 ConvertTemp 一次，启动每秒 4 次重复测量</p><p style="text-indent: 2em; text-align: left;">＊＠arg CFG＿MPS＿10：每执行 ConvertTemp 一次，启动每秒 10 次重复测量</p><p style="text-indent: 2em; text-align: left;">＊ ＠param repeatability：要设置的重复性值，可能为下列其一</p><p style="text-indent: 2em; text-align: left;">＊＠arg CFG＿Repeatbility＿Low：设置低重复性，转换时间 4ms</p><p style="text-indent: 2em; text-align: left;">＊＠arg CFG＿Repeatbility＿Medium：设置中重复性，转换时间 5．5ms</p><p style="text-indent: 2em; text-align: left;">＊＠arg CFG＿Repeatbility＿High：设置高重复性，转换时间 10．5ms</p><p style="text-indent: 2em; text-align: left;">＊ ＠retval 无</p><p style="text-indent: 2em; text-align: left;">bool OW＿SetConfig（uint8＿t mps， uint8＿t repeatability）</p><p style="text-indent: 2em; text-align: left;">｛ uint8＿t scrb［sizeof（M1820＿SCRATCHPAD＿READ）］；</p><p style="text-indent: 2em; text-align: left;">M1820＿SCRATCHPAD＿READ ＊scr ＝ （M1820＿SCRATCHPAD＿READ ＊） scrb；</p><p style="text-indent: 2em; text-align: left;">读 9 个字节。第 7 字节是系统配置<span class="hrefStyle"><a href="https://ee.ofweek.com/tag-%E5%AF%84%E5%AD%98%E5%99%A8.HTM" target="_blank" title="寄存器">寄存器</a></span>，第 8 字节是系统状态寄存器。最后字节是 前 8 个的校验和 CRC if（OW＿M1820＿ReadScratchpad＿SkipRom（scrb） ＝＝ FALSE）</p><p style="text-indent: 2em; text-align: left;">｛ return FALSE； 读暂存器组水平 ｝</p><p style="text-indent: 2em; text-align: left;">计算接收的前 8 个字节的校验和，并与接收的第 9 个 CRC 字节比较。</p><p style="text-indent: 2em; text-align: left;">if（scrb［8］ ！＝ MY＿OW＿CRC8（scrb， 8））</p><p style="text-indent: 2em; text-align: left;">｛ return FALSE； CRC 验证未通过 ｝</p><p style="text-indent: 2em; text-align: left;">scr－＞Cfg ＆＝ ～CFG＿Repeatbility＿Mask；</p><p style="text-indent: 2em; text-align: left;">scr－＞Cfg ｜＝ repeatability；</p><p style="text-indent: 2em; text-align: left;">scr－＞Cfg ＆＝ ～CFG＿MPS＿Mask；</p><p style="text-indent: 2em; text-align: left;">scr－＞Cfg ｜＝ mps；</p><p style="text-indent: 2em; text-align: left;">OW＿M1820＿WriteScratchpad＿SkipRom（scrb＋4）；</p><p style="text-indent: 2em; text-align: left;">return TRUE； ｝</p><p style="text-indent: 2em; text-align: left;">2、温度寄存器</p><p style="text-indent: 2em; text-align: left;">DS18B20 分辨率 9－12bit ADC，M1820、M1601、M601 系列为 16bit ADC，温度 寄存器格式不同，计算公式也不同，修改如下：</p><p style="text-indent: 2em; text-align: left;">float M1820＿OutputtoTemp（int16＿t out）</p><p style="text-indent: 2em; text-align: left;">｛ return （（float）out／256．0 ＋ 40．0）； ｝</p><p style="text-indent: 2em; text-align: left;">3、睡眠模式</p><p style="text-indent: 2em; text-align: left;">M1820、M601、M1601 系列进入睡眠时，需要把 Scratchpad 寄存器的 9 个字节全 部读完，无需发送发送指令，读取函数按如下进行修改：</p><p style="text-indent: 2em; text-align: left;">bool ReadTempWaiting＿SkipRom（uint16＿t ＊iTemp）</p><p style="text-indent: 2em; text-align: left;">｛ uint8＿t scrb［sizeof（MY18E20＿SCRATCHPAD＿READ）］；</p><p style="text-indent: 2em; text-align: left;">MY18E20＿SCRATCHPAD＿READ ＊scr ＝ （MY18E20＿SCRATCHPAD＿READ ＊） scrb； 读 9 个字节。前两个是温度转换结果，最后字节是前 8 个的校验和－－CRC。 if（MY18E20＿ReadScratchpad＿SkipRom（scrb） ＝＝ FALSE）</p><p style="text-indent: 2em; text-align: left;">｛ return FALSE； 读寄存器失败 ｝</p><p style="text-indent: 2em; text-align: left;">计算接收的前 8 个字节的校验和，并与接收的第 9 个 CRC 字节比较。 if（scrb［8］ ！＝ MY＿OW＿CRC8（scrb， 8））</p><p style="text-indent: 2em; text-align: left;">｛ return FALSE； CRC 验证未通过 ｝</p><p style="text-indent: 2em; text-align: left;">将温度测量结果的两个字节合成为 16 位字。 ＊iTemp＝（uint16＿t）scr－＞T＿msb＜＜8 ｜ scr－＞T＿lsb； return TRUE； ｝</p><p style="text-indent: 2em; text-align: left;">4、暂存器</p><p style="text-indent: 2em; text-align: left;">使用 M1820、M1601、M601 系列时，暂存器配置只需按芯片手册定义进行修订即 可。</p><p style="text-align:center"><img src="https://mp.ofweek.com/Upload/News/Img/member44852/202206/10101627185490.jpg" alt="0.1℃单总线温度芯片 M1820 等升级替代 DS18B20 应用指南" referrerpolicy="no-referrer"></p><p style="text-align:center"><img src="https://mp.ofweek.com/Upload/News/Img/member44852/202206/10101635675479.jpg" alt="0.1℃单总线温度芯片 M1820 等升级替代 DS18B20 应用指南" referrerpolicy="no-referrer"></p><p style="text-indent: 2em; text-align: left;">与 DS18B20 相比，M1820、M1601、M601 系列除了更高精 度外，还具有更宽电压范围（1．8～5．5V）、更低功耗（测温平均电 流 5μA＠3．3V，1Hz）、温度一致性好、测温分辨率高等优点。</p><p style="text-indent: 2em; text-align: left;">选型可参见下表。</p><p style="text-align:center"><img src="https://mp.ofweek.com/Upload/News/Img/member44852/202206/10101713327772.jpg" alt="0.1℃单总线温度芯片 M1820 等升级替代 DS18B20 应用指南" referrerpolicy="no-referrer"></p><p style="text-align:center"><img src="https://mp.ofweek.com/Upload/News/Img/member44852/202206/10101720742848.jpg" alt="0.1℃单总线温度芯片 M1820 等升级替代 DS18B20 应用指南" referrerpolicy="no-referrer"></p><p style="text-indent: 2em; text-align: left;"><br></p><p>       <span style="color:#999999;font-family:  <span class='hrefStyle'><a href='https://ee.ofweek.com/tag-%E5%BE%AE%E8%BD%AF.HTM' target='_blank' title='微软'>微软</a></span>雅黑;font-size:14px;">原文标题 : 0.1℃单总线温度芯片 M1820 等升级替代 DS18B20 应用指南</span></p> 
  
</div>
            