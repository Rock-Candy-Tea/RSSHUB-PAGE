
---
title: '栈板识别'
categories: 
 - 新媒体
 - 高科技行业门户
 - 新闻
headimg: 'https://cors.zfour.workers.dev/?http://images.ofweek.com/Upload/News/2021-10/15/liteng/1634276706013002235.png'
author: 高科技行业门户
comments: false
date: Fri, 15 Oct 2021 05:57:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://images.ofweek.com/Upload/News/2021-10/15/liteng/1634276706013002235.png'
---

<div>   
<p style="text-indent: 2em; text-align: left;">欢迎来到识别专栏的第二篇技术专题文章-栈板识别！全文将详细讲解栈板识别的各项技术要点。文章较长，请耐心观看哦～</p><p style="text-indent: 2em; text-align: left;">阅读前，如您对栈板还有任何疑问可以戳这里了解栈板。另：文中托盘及栈板均指栈板。</p><p style="text-indent: 2em; text-align: left;"><strong><span style="font-size: 20px;">一、使用场景</span></strong></p><p style="text-indent: 2em; text-align: left;">在工厂仓库中，利用自动叉车进行货物搬运是非常常见的应用场景，通常货物搬运需要借助托盘进行转运，同时大部分工厂环境内无法设置机械限位保证托盘摆放位置的一致性，因此 AMR 进行托盘叉取时需要借助视觉辅助识别托盘准确位置，通过 AMR 位置调整进行准确地叉取。</p><p style="text-indent: 2em; text-align: left;"><strong><span style="font-size: 20px;">二、相机配置及标定</span></strong></p><p style="text-indent: 2em; text-align: left;"><strong><span style="font-size: 18px;">2.1、相机网络配置</span></strong></p><p style="text-indent: 2em; text-align: left;">本公司选用图漾相机型号为 FM851-RI，主要用于叉车类 AMR 进行栈板识别功能，其原理是利用双目结构光获取物体的 3D 点云，通过托盘特殊的形状结构进行识别定位，通常将相机安装于叉车叉齿中部。</p><p style="text-indent: 2em; text-align: left;">1．打开 Roboshop Pro，点击【其他】，选择【相机网络配置】</p><p style="text-align:center"><img src="https://cors.zfour.workers.dev/?http://images.ofweek.com/Upload/News/2021-10/15/liteng/1634276706013002235.png" title="1634276706013002235.png" alt="image.png" referrerpolicy="no-referrer"></p><p style="text-indent: 2em; text-align: left;">2．打开后的界面</p><p style="text-align:center"><img src="https://cors.zfour.workers.dev/?http://images.ofweek.com/Upload/News/2021-10/15/liteng/1634276713790020953.png" title="1634276713790020953.png" alt="image.png" referrerpolicy="no-referrer"></p><p style="text-indent: 2em; text-align: left;">3．确认已通过以太网连接相机后，点击刷新按钮（右上角蓝色图标）</p><p style="text-align:center"><img src="https://cors.zfour.workers.dev/?http://images.ofweek.com/Upload/News/2021-10/15/liteng/1634276762891089228.png" title="1634276762891089228.png" alt="image.png" referrerpolicy="no-referrer"></p><p style="text-indent: 2em; text-align: left;">4．修改IP中的地址为所需地址，通常相机配置为192．168．192．xxx，按下【OK】按钮</p><p style="text-align: center;"><img src="https://cors.zfour.workers.dev/?http://images.ofweek.com/Upload/News/2021-10/15/liteng/1634276794757045369.png" title="1634276794757045369.png" alt="image.png" referrerpolicy="no-referrer"></p><p><span style="text-align: left; text-indent: 2em;">5．出现“Update Success”则表示修改成功，结束操作。</span></p><p style="text-align:center"><img src="https://cors.zfour.workers.dev/?http://images.ofweek.com/Upload/News/2021-10/15/liteng/1634276801992041310.png" title="1634276801992041310.png" alt="image.png" referrerpolicy="no-referrer"></p><p style="text-indent: 2em; text-align: left;"><strong><span style="font-size: 18px;">2.2、相机外参标定</span></strong></p><p style="text-indent: 2em; text-align: left;">对于安装在地面叉车或者叉车上面用于二维码识别功能以及识别栈板功能的相机，可以参考下面进行相机的标定，首先需要标定支架，其中【标定支架设计图纸从以下链接中下载：</p><p style="text-indent: 2em; text-align: left;">https：／／ecm．seer－group．com／outpublish．html？code＝Bd52f510677024763b9f7b6d169c80f6f＆lang＝zh－cn＃view</p><p style="text-indent: 2em; text-align: left;">（密码：8145CBEC）】，支架安装如下图所示：</p><p style="text-align:center"><img src="https://cors.zfour.workers.dev/?http://images.ofweek.com/Upload/News/2021-10/15/liteng/1634276818675014458.png" title="1634276818675014458.png" alt="image.png" referrerpolicy="no-referrer"></p><p style="text-indent: 2em; text-align: left;">其中支架必须和地牛叉齿严密贴合，保证支架垂直于地面，同时支架也与货架腿保持垂直。接下来在支架上面需要粘贴两个二维码，＊＊左边需要粘贴ID＝0的二维码，右边粘贴ID＝1的二维码＊＊。</p><p style="text-indent: 2em; text-align: left;">在参数配置中分别配置如上图所示的各个参数：</p><p style="text-indent: 2em; text-align: left;">＊＊Tag＿Height： 二维码的中心距离地面的高度＊＊</p><p style="text-indent: 2em; text-align: left;">＊＊Tag＿disFromCenter： 二维码距离里程中心的X方向距离＊＊</p><p style="text-indent: 2em; text-align: left;">＊＊Tag＿Size： 二维码的大小＊＊</p><p style="text-indent: 2em; text-align: left;">＊＊disBetweenTag： 两个二维码中心之间的距离＊＊</p><p style="text-align:center"><img src="https://cors.zfour.workers.dev/?http://images.ofweek.com/Upload/News/2021-10/15/liteng/1634276825386084140.png" title="1634276825386084140.png" alt="image.png" referrerpolicy="no-referrer"></p><p style="text-indent: 2em; text-align: left;">各个参数配置完成后，然后确认模型文件中相机类型下不要勾选3Dcamera，如下图：</p><p style="text-align:center"><img src="https://cors.zfour.workers.dev/?http://images.ofweek.com/Upload/News/2021-10/15/liteng/1634276920398018874.png" title="1634276920398018874.png" alt="image.png" referrerpolicy="no-referrer"></p><p style="text-indent: 2em; text-align: left;">然后保存推送之后，可以在其他选项中，选中该品牌相机进行标定。标定成功后即可输出相机安装位置的标定参数，</p><p style="text-indent: 2em; text-align: left;">同时在标定结束后，可以在roboshop通过首页，<span class="hrefStyle"><a href="https://robot.ofweek.com/" target="_blank" title="机器人">机器人</a></span>文件，选中robokit cameraData文件夹，进入可以以 tag开头命名的jpg文件，下载该文件可以看到标定结果，如下图所示：</p><p style="text-align:center"><img src="https://cors.zfour.workers.dev/?http://images.ofweek.com/Upload/News/2021-10/15/liteng/1634277484599017924.png" title="1634277484599017924.png" alt="image.png" referrerpolicy="no-referrer"></p><p style="text-indent: 2em; text-align: left;">在结果图中可以看到左边识别到的tag为ID＝0，右边的tag为ID＝1，说明识别成功。</p><p style="text-indent: 2em; text-align: left;"><strong><span style="font-size: 20px;">三、识别文件配置以及叉取</span></strong></p><p style="text-indent: 2em; text-align: left;"><strong><span style="font-size: 18px;">3.1识别文件参数配置解释</span></strong></p><p style="text-indent: 2em; text-align: left;">使用栈板识别功能时，需要配置识别文件，在Roboshop识别文件选项中可以看到，选中pallet选项，然后修改属性窗口中相关参数。</p><p style="text-align:center"><img src="https://cors.zfour.workers.dev/?http://images.ofweek.com/Upload/News/2021-10/15/liteng/1634277501598026995.png" title="1634277501598026995.png" alt="image.png" referrerpolicy="no-referrer"></p><p style="text-indent: 2em; text-align: left;">默认当前只能识别左右对称的栈板，即中间孔的尺寸是一致的。在使用栈板识别功能前，需要在识别文件选项配置pallet相关参数，分别为：</p><p style="text-indent: 2em; text-align: left;">pallet＿width：栈板宽度</p><p style="text-indent: 2em; text-align: left;">pallet＿height：栈板高度</p><p style="text-indent: 2em; text-align: left;">pocket＿width：中间孔宽度</p><p style="text-indent: 2em; text-align: left;">pocket＿height：中间孔高度</p><p style="text-indent: 2em; text-align: left;">pocket＿spacing：中间腿宽度</p><p style="text-indent: 2em; text-align: left;">栈板高度指栈板支撑柱的高度，不包括支撑柱之间连接物体的高度，栈板的厚度（栈板高度减去中间孔高度）要大于3cm以上，小于3cm可能会识别不到</p><p style="text-indent: 2em; text-align: left;">如下图所示：</p><p style="text-align:center"><img src="https://cors.zfour.workers.dev/?http://images.ofweek.com/Upload/News/2021-10/15/liteng/1634277507769028357.png" title="1634277507769028357.png" alt="image.png" referrerpolicy="no-referrer"></p><p style="text-indent: 2em; text-align: left;"><strong><span style="font-size: 20px;">3.2 栈板摆放要求及相关参数配置说明</span></strong></p><p style="text-indent: 2em; text-align: left;">栈板摆放时栈板和机器人之间坐标系的偏差角一般小于 20°（下图中 α），水平偏差如下图（b）中 dis，小于 30cm。栈板距离相机一般大于 1m，小于 3m。如下图所示：</p><p style="text-align:center"><img src="https://cors.zfour.workers.dev/?http://images.ofweek.com/Upload/News/2021-10/15/liteng/1634277526793083145.png" title="1634277526793083145.png" alt="image.png" referrerpolicy="no-referrer"></p><p style="text-indent: 2em; text-align: left;"><span style="font-size: 20px;">3.3、栈板识别叉车运动参数说明</span></p><p style="text-indent: 2em; text-align: left;">参数配置中：</p><p style="text-indent: 2em; text-align: left;">RecQRCode＿AheadDist， 单位 m， 识别规划前置距离</p><p style="text-indent: 2em; text-align: left;">RecQRCode＿BackLength， 单位 m，  识别规划后置距离</p><p style="text-indent: 2em; text-align: left;">（距离大致为叉车的里程中心和货叉上到位开关的距离。如果这个值偏大，会导致货物 DI 提前触发报错。如果这个值偏小，会导致地面叉车到点后没有触发到位 DI 报错。）</p><p style="text-indent: 2em; text-align: left;">RecQRCode＿PathSpeed，  单位 m／s， 识别路径的行驶速度</p><p style="text-indent: 2em; text-align: left;">RecOnePathRatio，单位弧度，识别生成单条路径正切阈值</p><p style="text-indent: 2em; text-align: left;">图示说明：</p><p style="text-align:center"><img src="https://cors.zfour.workers.dev/?http://images.ofweek.com/Upload/News/2021-10/15/liteng/1634277546826036608.png" title="1634277546826036608.png" alt="image.png" referrerpolicy="no-referrer"></p><p style="text-align:center"><img src="https://cors.zfour.workers.dev/?http://images.ofweek.com/Upload/News/2021-10/15/liteng/1634277567377031350.png" title="1634277567377031350.png" alt="image.png" referrerpolicy="no-referrer"></p><p style="text-indent: 2em; text-align: left;"><strong><span style="font-size: 18px;">3.4、识别操作使用说明</span></strong></p><p style="text-align:center"><img src="https://cors.zfour.workers.dev/?http://images.ofweek.com/Upload/News/2021-10/15/liteng/1634277572729007219.png" title="1634277572729007219.png" alt="image.png" referrerpolicy="no-referrer"></p><p style="text-indent: 2em; text-align: left;">在完成上述识别文件的配置之后，只需要在栈板点位对应的前置点属性中配置识别模型文件，即 pallet 文件。接着要进行执行动作的配置：</p><p style="text-align:center"><img src="https://cors.zfour.workers.dev/?http://images.ofweek.com/Upload/News/2021-10/15/liteng/1634277577181078164.png" title="1634277577181078164.png" alt="image.png" referrerpolicy="no-referrer"></p><p style="text-indent: 2em; text-align: left;">选中栈板所在位置的 AP 点，执行动作，然后按照上图所示执行 Load 动作，在成功识别后机器人将会前往 AP 点对栈板进行叉取。</p> 
  
</div>
            