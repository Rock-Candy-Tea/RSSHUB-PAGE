
---
title: '简单搭建自己的私人密码库！Bitwarden 部署安装教程 (免费 1Password 替代品)'
categories: 
 - 新媒体
 - 异次元软件世界
 - 首页
headimg: 'https://img.iplaysoft.com/wp-content/uploads/2021/bitwarden-self-host/bitwarden.jpg'
author: 异次元软件世界
comments: false
date: Wed, 17 Nov 2021 12:43:01 GMT
thumbnail: 'https://img.iplaysoft.com/wp-content/uploads/2021/bitwarden-self-host/bitwarden.jpg'
---

<div>   
<ul id="link1111"><li>
<a target="_blank" rel="nofollow" href="https://www.iplaysoft.com/blackfriday.html">黑色星五期优惠汇总必看清单</a>  |  
<a target="_blank" rel="nofollow" href="https://www.iplaysoft.com/news/4313">爱奇艺年卡 + 京东 Plus = 123元</a>  |  
<a target="_blank" rel="nofollow" href="https://www.iplaysoft.com/news/5606">群晖 NAS 必买好价</a></li><li>
<a target="_blank" rel="nofollow" href="https://www.iplaysoft.com/news/3880">腾讯云每日秒杀</a>  |  
<a target="_blank" rel="nofollow" href="https://www.iplaysoft.com/go/aliyunsale">阿里云 0.25 折起</a>  |  
<a target="_blank" rel="nofollow" href="https://www.iplaysoft.com/go/pdpost">PD17 官网 8 折</a>  |  
<a target="_blank" rel="nofollow" href="https://www.iplaysoft.com/p/baiduwenku-vip">QQ音乐 + 爱奇艺 = 169元</a></li></ul><p>日常生活中我们几乎每个人都会拥有大量<a href="https://www.iplaysoft.com/tag/%E7%BD%91%E7%AB%99" target="_blank" rel="noopener">网站</a>帐号，时间久远了密码很容易忘记。因此，像 <a href="https://www.iplaysoft.com/go/1ppost" target="_blank" rel="noopener">1Password</a> 等密码管理 + 同步 + 一键登录的工具成为了很多人的首选。</p><p>然而 1Password 毕竟要付费，也有人会担心这类工具有隐私泄露的风险。其实，如果你有一台自己的 <a href="https://www.iplaysoft.com/go/vps" target="_blank" rel="noopener">VPS 服务器</a>，那么就能用开源的 <a href="https://www.iplaysoft.com/bitwarden.html" target="_blank" rel="noopener">Bitwarden</a> 部署搭建一个私人专属的<a href="https://www.iplaysoft.com/tag/%E5%AF%86%E7%A0%81" target="_blank" rel="noopener">密码</a>管理服务来代替 1Password！这样不仅免费，重要的是，所有的数据均保存在自己服务器上，更加放心……</p><p class="aligncenter"><a class="button" target="_blank" isconvert="1" href="https://www.iplaysoft.com/go/qcloud"><i class="ipsicon ipsicon-link ipsicon-rspace"></i>腾讯云双 11 优惠秒杀</a></p><p style="text-align: center;">「<a href="https://www.iplaysoft.com/go/qcloud" target="_blank" rel="noopener">推荐服务器：腾讯云</a>  |  <a href="https://www.iplaysoft.com/go/aliyun" target="_blank" rel="noopener">阿里云</a>  |  <a href="https://www.iplaysoft.com/go/vps" target="_blank" rel="noopener">更多</a>」</p><h3>用 Bitwarden 部署免费安全的私人密码库 / 密码管理器</h3><div style="margin:40px auto 50px auto;overflow:hidden;"><div style="float:left;width:336px;height:280px;">  </div><div class="_0m2z60jvil9q" style="float:left;width:336px;height:280px;margin-left:10px">
  </div></div><div class="clear"></div><p>异次元之前就推荐过「<a href="https://www.iplaysoft.com/bitwarden.html" target="_blank" rel="noopener">Bitwarden 免费密码管理器</a>」了，它<a href="https://www.iplaysoft.com/tag/%E5%BC%80%E6%BA%90" target="_blank" rel="noopener">开源</a>免费，跨平台支持 Windows、Mac、Linux、iOS、Android 平台，同时也提供了 <a href="https://www.iplaysoft.com/google-chrome.html" target="_blank" rel="noopener">Chrome</a>、<a href="https://www.iplaysoft.com/microsoft-edge.html" target="_blank" rel="noopener">Edge</a>、Firefox、Safari 等浏览器扩展可实现快速填充帐号密码一键登录网站，是一款非常不错的 <strong><a href="https://www.iplaysoft.com/go/1ppost" target="_blank" rel="noopener">1Password</a> 免费替代品</strong>。</p><p><img loading="lazy" class="aligncenter size-medium" src="https://img.iplaysoft.com/wp-content/uploads/2021/bitwarden-self-host/bitwarden.jpg" alt="Bitwarden 密码管理器" width="680" height="450" referrerpolicy="no-referrer"></p><p>而最重要的是，Bitwarden 支持本地托管，可以<strong>搭建私人专属密码库</strong>，部署到自己的<a href="https://www.iplaysoft.com/go/vps" target="_blank" rel="noopener">服务器</a>、 <a href="https://www.iplaysoft.com/go/nas" target="_blank" rel="noopener">NAS</a>、<a href="https://www.iplaysoft.com/raspberrypi.html" target="_blank" rel="noopener">树莓派</a>等设备上去，所有的密码数据、通讯都不会经过第三方，更能让人放心。特别是如果你本来就有用 <a href="https://www.iplaysoft.com/go/vps" target="_blank" rel="noopener">VPS</a> 搭建过「私有的<a href="https://www.iplaysoft.com/tag/%E7%BD%91%E7%9B%98" target="_blank" rel="noopener">网盘</a>、<a href="https://www.iplaysoft.com/wordpress.html" target="_blank" rel="noopener">博客</a>」，那么加一个密码管理器也是十分实用的。</p><h3>搭建 Bitwarden 前的准备</h3><h4>服务器：</h4><p>准备一台稳定靠谱的<a href="https://www.iplaysoft.com/go/vps" target="_blank" rel="noopener">服务器</a>，强烈推荐「<a href="https://www.iplaysoft.com/go/qcloud" target="_blank" rel="noopener">腾讯云</a>、<a href="https://www.iplaysoft.com/go/aliyun" target="_blank" rel="noopener">阿里云</a>」等国内大厂！趁最近双 11 秒杀或各种活动优惠入手的话是非常便宜的，大家可以根据实际需求选择带宽和配置。</p><p class="aligncenter"><a class="button" target="_blank" isconvert="1" href="https://www.iplaysoft.com/go/vps"><i class="ipsicon ipsicon-link ipsicon-rspace"></i>值得推荐的服务器</a></p><p>单做密码管理的话要求很低，但如果你希望能多用途利用，那么优先选择内存和带宽高点的机型。网络好的话也可以选择 <a href="https://www.iplaysoft.com/p/vultr-promotion" target="_blank" rel="noopener">Vultr</a>、<a href="https://www.iplaysoft.com/go/bandwagon" target="_blank" rel="noopener">搬瓦工</a>、<a href="https://www.iplaysoft.com/go/linode" target="_blank" rel="noopener">Linode</a>、<a href="https://www.iplaysoft.com/go/digitalocean" target="_blank" rel="noopener">DigitalOcean</a> 等国外几大口碑主机商。</p><h4>域名：</h4><p>另外你还需要<a href="https://www.iplaysoft.com/go/domain" target="_blank" rel="noopener">注册一个域名</a>用于访问你的服务器。然后进入你的域名 DNS 解析后台，<span style="color: #ff6600;">新增一条 A 记录指向你的服务器 IP</span> (这一步最好先做，因为部分 DNS 生效会比较久)，这里假设我使用域名为 <code>bitwarden.iplaysoft.com</code>。</p><h3>简单搭建部署 Bitwarden 教程：</h3><p>这篇教程以「<a href="https://www.iplaysoft.com/centos.html" target="_blank" rel="noopener">CentOS</a>」为例子，<a href="https://www.iplaysoft.com/ubuntu.html" target="_blank" rel="noopener">Ubuntu</a>、<a href="https://www.iplaysoft.com/debian.html" target="_blank" rel="noopener">Debian</a> 等系统也能作为参考 (无非主要就是 yum 改成 apt-get 了)。我们主要使用到 “<a href="https://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html?utm_source=iplaysoft.com&hmsr=iplaysoft.com" target="_blank" rel="noopener">Docker</a>” 进行部署，它能帮你一键安装配置并<a href="https://www.iplaysoft.com/tag/%E8%99%9A%E6%8B%9F" target="_blank" rel="noopener">虚拟</a>化运行 Bitwarden 需要用到的全部组件，省去你一个个手动安装和配置运行环境的各种麻烦。</p><h4>安装 Docker</h4><p>如果你的<a href="https://www.iplaysoft.com/go/vps" target="_blank" rel="noopener">服务器</a>上已经安装了 <strong>Docker</strong> 和 <strong>Docker Compose</strong>，这一步就可以跳过了。Docker 要求 CentOS 系统的内核版本高于 3.10，可以运行 <code>uname -r</code> 查看版本。</p><link rel="stylesheet" type="text/css" href="https://cdn.iplaysoft.com/common/lib/highlight/styles/atom-one-dark.css"> <pre class="language-bash"><code># 1、（可选）更新系统的软件包
yum update -y

# 2、安装 docker 依赖的软件包
yum install -y yum-utils device-mapper-persistent-data lvm2

# 3、添加 docker 的 yum 源
yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo

# 4、通过 yum 安装 docker
sudo yum install docker-ce docker-ce-cli containerd.io
# 如上述命令出错，可能是系统上已有旧版本 Docker，需要先卸载旧版本
# 卸载命令：yum remove docker docker-common docker-selinux docker-engine docer-io

# 5、启动 Docker 服务并设置开机启动
sudo systemctl start docker
sudo systemctl enable docker

# 6、测试 docker 是否安装成功 (查看版本号)
docker version
# 有 client 和 service 两部分表示 docker 安装并启动成功了（有部分错误不用管）</code></pre><h4>安装 Docker Compose：</h4><pre class="language-bash"><code># 1、首先前往 https://github.com/docker/compose/releases/latest 查看最新的 docker-compose 版本号，比如截稿时最新版本为 2.1.1。

# 2、下载最新版本的 docker-compose，你需要将下面的 2.1.1 替换成最新的版本号
sudo curl -L "https://github.com/docker/compose/releases/download/2.1.1/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose

# 3、授予可执行权限
sudo chmod +x /usr/local/bin/docker-compose

# 4、测试是否安装成功（可能需要重启系统）
docker-compose -v
# 安装成功会显示 docker-compose 版本</code></pre><h3>安装 Bitwarden 服务端</h3><p>确认服务器已成功安装好 Docker 和 Docker Compose 之后，我们就可以来安装 Bitwarden 了。其实 Bitwarden 官方就已经提供了非常方便的一键安装<a href="https://www.iplaysoft.com/tag/%E8%84%9A%E6%9C%AC" target="_blank" rel="noopener">脚本</a>，我们只需执行即可。</p><pre class="language-bash"><code># 1、下载 Bitwarden 的安装脚本
curl -Lso bitwarden.sh https://go.btwrdn.co/bw-sh && chmod 700 bitwarden.sh

# 2、执行安装程序
./bitwarden.sh install
# 由于 docker 镜像的体积比较大，国内网络可能遇到中途卡住不动的情况，可按下 Ctrl+C 终止再重试，多次不行的话，可以参考网上的其他教程为 Docker 配置代里。</code></pre><p>接着，安装脚本会一步步提示你输入，下面是部分重点选项：</p><ol><li>Enter the domain name for your Bitwarden instance<br>
输入你要给 Bitwarden 分配的<a href="https://www.iplaysoft.com/go/domain" target="_blank" rel="noopener">域名</a>，这里例子为 bitwarden.iplaysoft.com</li><li>Do you want to use Let’s Encrypt to generate a free SSL certificate? (y/n)<br>
是否使用 Let's Encrypt 自动生成免费的 SSL 证书，一般选 y (你有自己的证书也可以选 n，后面需要配置证书的路径)</li><li>Enter the database name for your Bitwarden instance<br>
输入用于 Bitwarden 的数据库名称</li><li>Enter your installation id / Enter your installation key<br>
你需要访问 <a href="https://bitwarden.com/host?utm_source=iplaysoft.com&hmsr=iplaysoft.com" target="_blank" rel="noopener">https://bitwarden.com/host</a> 获取一组安装 ID 和安装密钥 Key (官网被 xx 无法访问的话，只能各显神通了)</li></ol><h4>修改配置文件 (端口号、SSL 证书等)：</h4><ul><li>如果你需要使用自己的 SSL 证书、<strong>修改默认的端口号</strong>等需求，可以编辑配置文件 <code>./bwdata/config.yml</code>。比如你的服务器本身就有<a href="https://www.iplaysoft.com/tag/%E7%BD%91%E7%AB%99" target="_blank" rel="noopener">网站</a>占用了 80、443 端口，那么可以修改配置里的 http_port 和 https_port 端口号来避免冲突。比如我改成 8080 和 8888，这样日后我访问时的域名就是 https://bitwarden.iplaysoft.com:8888 了。</li><li>要注意的是，<a href="https://www.iplaysoft.com/go/qcloud" target="_blank" rel="noopener">腾讯云</a>、<a href="https://www.iplaysoft.com/go/aliyun" target="_blank" rel="noopener">阿里云</a>等机器默认的「<strong>安全组规则</strong>」会阻止非常用端口的访问，如使用非 80/443 端口，需要登录后台修改安全组规则允许你设置的端口才行。</li><li>另外，如果你使用「<a href="https://www.iplaysoft.com/go/btmb" target="_blank" rel="noopener">宝塔面板</a>」，或者懂得修改 Nginx 的配置，也可以对你的 bitwarden 服务进行“反代”，有<a href="https://www.iplaysoft.com/tag/%E5%BB%BA%E7%AB%99" target="_blank" rel="noopener">建站</a>经验的朋友，可以查查相关的资料，搞定应该不难。</li><li><span style="color: #ff6600;">修改完后，必须执行一下 <code>./bitwarden.sh rebuild</code> 命令才能让新配置生效</span>。</li></ul><h4>(可选) 修改环境配置文件：</h4><ul><li>另外，在环境配置文件 <code>./bwdata/env/global.override.env</code> 里还有诸如 SMTP、启用 Yubico、启用系统管理员门户、是否禁止用户注册等设置。</li><li>其中，如果你的 Bitwarden 打算是私人使用，建议在注册完自己账号之后，改成 “<strong>禁止用户注册</strong>”，对应的项为：<code>globalSettings__disableUserRegistration=false</code></li><li>修改此文件后，<span style="color: #ff6600;">需要重启 Bitwarden 容器才能生效</span>，重启命令为：<br>
<code>./bitwarden.sh restart</code></li></ul><h4>启动 Bitwarden 服务</h4><pre><code>./bitwarden.sh start</code></pre><p>首次启动 Bitwarden 可能时间会比较长，因为安装脚本要从 Docker Hub 下载全部需要的组件的镜像，比如 MySQL 体积就比较大，耐心等待完成即可。之后，可以使用 <code>docker ps</code> 命令来查看是否有 Bitwarden 的进程。</p><p style="text-align: center;"><span style="color: #ff6600;">“OK，至此一切搞定了！”</span></p><p>正常的话就能通过域名访问了，例如 <code>https://bitwarden.iplaysoft.com:8888</code>。这里就是你自己的 Bitwarden 私人密码库网页版了，之后就能<a href="https://www.iplaysoft.com/bitwarden.html" target="_blank" rel="noopener">去下载各种客户端使用了</a>，登录时填入咱自己的 Bitwarden 服务器地址即可。</p><p><img class="lazyload aligncenter size-medium" src="https://img.iplaysoft.com/wp-content/uploads/2021/bitwarden-self-host/bitwarden_apps.jpg" alt="bitwarden 密码管理器客户端" width="680" height="450" referrerpolicy="no-referrer"></p><p>尽管目前无论从颜值还是使用体验上都仍比不上付费的 <a href="https://www.iplaysoft.com/go/1ppost" target="_blank" rel="noopener">1Password</a>，但 Bitwarden 免费开源、支持私有化部署也有着相当的优势。上手习惯之后，你会发现 Bitwarden 还是挺好用的，毕竟它也拥有全平台客户端支持，基本能满足一般人对密码管理器的所有期待。而且它也<strong>支持无缝导入 1Password 的数据</strong>，确实算是相当不错的 1Password 免费替代方案了。</p><h4>后续维护命令：</h4><table class="entry-table" border="1" cellpadding="8" cellspacing="0" width="100%"><tbody><tr><th colspan="100%">bitwarden.sh 脚本可以使用的命令</th></tr><tr><td width="50.00%">install</td><td width="50.00%">启动安装程序</td></tr><tr><td width="50.00%">start</td><td width="50.00%">启动所有容器</td></tr><tr><td width="50.00%">restart</td><td width="50.00%">重新启动所有容器（与启动相同）</td></tr><tr><td width="50.00%">stop</td><td width="50.00%">停止所有容器</td></tr><tr><td width="50.00%">update</td><td width="50.00%">更新 Bitwarden 版本</td></tr><tr><td width="50.00%">updatedb</td><td width="50.00%">更新/初始化数据库</td></tr><tr><td width="50.00%">updateself</td><td width="50.00%">更新 bitwarden.sh 文件本身</td></tr><tr><td width="50.00%">updateconf</td><td width="50.00%">更新所有容器，而无需重新启动正在运行的实例</td></tr><tr><td width="50.00%">renewcert</td><td width="50.00%">续订证书</td></tr><tr><td width="50.00%">rebuild</td><td width="50.00%">重建 config.yml 的配置</td></tr><tr><td width="50.00%">help</td><td width="50.00%">列出所有命令</td></tr></tbody></table><h5>(可选) 备份 Bitwarden 密码数据</h5><p>Bitwarden 的全部数据都保存在 <code>./bwdata</code> 目录下，建议你定期<a href="https://www.iplaysoft.com/tag/%E5%A4%87%E4%BB%BD" target="_blank" rel="noopener">备份</a>这个目录的全部内容到其他地方以防意外。其中的内容包括：</p><ul><li>./bwdata/env - 实例的环境变量，包括数据库和证书密码</li><li>./bwdata/core/attachments - 实例的密码库项目的附件</li><li>./bwdata/mssql/data - 实例的数据库数据</li></ul><p>每天 Bitwarden 也会自动对 MySQL 容器 中的数据库进行备份。备份文件默认保存在 ./bwdata/mssql/backups 目录中，保留 30 天。</p><h3>总结：</h3><p>尽管这篇文章看起来很长，但实际上如果你熟悉 <a href="https://www.iplaysoft.com/os/linux-platform" target="_blank" rel="noopener">Linux</a> 操作，搭建部署本地托管的 Bitwarden 还是挺简单的。而除了<a href="https://www.iplaysoft.com/go/vps" target="_blank" rel="noopener">服务器</a>，你还可以部署在家里的<a href="https://www.iplaysoft.com/raspberrypi.html" target="_blank" rel="noopener">树莓派</a>或 <a href="https://www.iplaysoft.com/go/nas" target="_blank" rel="noopener">NAS</a> 上 (可能需要<a href="https://www.iplaysoft.com/tag/%E7%A9%BF%E9%80%8F" target="_blank" rel="noopener">内网穿透</a>)。</p><p>对于喜欢<a href="https://www.iplaysoft.com/tag/%E5%AD%A6%E4%B9%A0" target="_blank" rel="noopener">学习</a>、喜欢折腾、有自己<a href="https://www.iplaysoft.com/go/vps" target="_blank" rel="noopener">服务器</a>的人，都建议试试用 Bitwarden 自建部署专属个人的密码库，这不仅完全免费，而且数据全部拽在自己手里，更有安全感！加上 Bitwarden 本身各平台客户端和浏览器<a href="https://www.iplaysoft.com/tag/%E6%8F%92%E4%BB%B6" target="_blank" rel="noopener">插件</a>都非常齐全，使用体验佳，能满足绝大多数人对密码管理的要求了。</p><div id="post_download" class="entry-dl-area"><h3 class="entry-dl-area-head"><span class="h3_icon ipsicon ipsicon-download ipsicon-rspace"></span>相关文件下载地址</h3><p>官方网站：<a href="https://bitwarden.com/?utm_source=iplaysoft.com&hmsr=iplaysoft.com" target="_blank" rel="noopener">访问</a><br>
软件性质：免费<br>
相关链接：<a href="https://www.iplaysoft.com/go/1ppost" target="_blank" rel="noopener">1Password</a>  |  <a href="https://www.iplaysoft.com/go/vps" target="_blank" rel="noopener">VPS 服务器推荐</a></p><p><a href="https://www.iplaysoft.com/bitwarden.html" target="_blank" rel="noopener">Bitwarden 客户端介绍+下载</a>  |  <a href="https://www.iplaysoft.com/tag/%E5%AF%86%E7%A0%81" target="_blank" rel="noopener">密码相关</a>  |  <a href="https://www.iplaysoft.com/tag/%E6%9C%8D%E5%8A%A1%E5%99%A8" target="_blank" rel="noopener">服务器相关</a></p></div>  
</div>
            