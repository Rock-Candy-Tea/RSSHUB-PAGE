
---
title: '数据分析-建模分析基本流程'
categories: 
 - 新媒体
 - 鸟哥笔记
 - 首页
headimg: 'https://qnssl.niaogebiji.com/1013467293605aa2cf382615.29058408.png'
author: 鸟哥笔记
comments: false
date: Wed, 24 Mar 2021 02:39:03 GMT
thumbnail: 'https://qnssl.niaogebiji.com/1013467293605aa2cf382615.29058408.png'
---

<div>   
<div style="height: 6px"></div>
                        <p></p><section data-role="outer" label="Powered by 135editor.com"><section data-role="paragraph"><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">日常的数据分析工作中，除了基本的拆解法、对比法做分析外，也经常需要用到模型的方法来做预测或者分类。这里会介绍建模分析的基本流程及常见处理方法。<br></p><section data-tools="135编辑器" data-id="99882"><section><section><h1 label="一级标题" style="background-image: url("/img/article/h1_icon.png"); background-size: 16px 20px; margin: 25px 0px 20px; padding-left: 22px; font-size: 20px; font-weight: 600; color: rgb(33, 38, 41); line-height: 30px; background-position: 0px 5px; background-repeat: no-repeat no-repeat;">0<span data-original-title title>1 </span>描述性分析</h1></section></section></section><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">在拿到数据后，不能着急立刻开始清洗数据或者模型训练，而是先了解数据（除建模分析外，其他的数据开发也要做这一步），这样才能避免后期的踩坑，否则十有八九是要复工的。那“了解数据”这一环节，具体要了解哪些东西呢？</p><blockquote><ol class=" list-paddingleft-2"><li><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">了解各个特征的业务含义和计算逻辑</p></li><li><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">各个特征的分布是否符合预期</p></li><li><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">特征之间的相关性如何，是否符合基本逻辑</p></li><li><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">特征和目标值的相关性如何，是否符合基本逻辑</p></li></ol></blockquote><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">在相关性分析这里，数值型变量之间可通过计算相关系数或者画图呈现；数值型变量和分类变量可通过箱线图呈现关系。</p><section data-tools="135编辑器" data-id="99882"><section><section><h1 label="一级标题" style="background-image: url("/img/article/h1_icon.png"); background-size: 16px 20px; margin: 25px 0px 20px; padding-left: 22px; font-size: 20px; font-weight: 600; color: rgb(33, 38, 41); line-height: 30px; background-position: 0px 5px; background-repeat: no-repeat no-repeat;">0<span data-original-title title data-num="2">2 </span>缺失值处理</h1></section></section></section><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">在初步了解数据后，需要做一些数据预处理的行为。第一步就是对缺失值处理，一般根据样本量多少以及缺失比例，来判断是“宁缺毋滥”的删除，还是缺失值填充。具体处理的思路可以是这样的：</p><section data-role="list"></section><blockquote><section data-role="list"><ol class=" list-paddingleft-2"><li><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">统计计算样本量n，各个特征数据缺失率y，各样本数据特征缺失率x</p></li><li><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">特征缺失率x比较高的样本一般都建议删除；因为多个特征都缺失，填补也比较困难，即使填补信息偏差也会比较大。</p></li><li><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">如果某特征缺失率y比较大，则删除此特征；如果特征缺失率低且样本量比较大的话，可删除特征缺失的样本。如果样本量少不可删除，则对缺失值做填充。</p></li></ol></section></blockquote><h3 label="三级标题" style="background-image: url("/img/article/h3_icon.png"); background-size: 8px 20px; margin: 25px 0px 20px; padding-left: 12px; font-size: 16px; font-weight: 600; color: rgb(33, 38, 41); line-height: 30px; background-position: 0px 5px; background-repeat: no-repeat no-repeat;"><strong>缺失值填充的方法有：</strong></h3><section data-role="list"><blockquote><ol class=" list-paddingleft-2"><li><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">根据特征的众数、中位数或者平均值来填充；也可以对样本做分类，根据所在类的平均值众数等填充；</p></li><li><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">通过回归法来做样本填充，缺失值作为因变量，其他特征做自变量去预测；</p></li><li><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">还可通过比较复杂的方法，如多重插补法。</p></li></ol></blockquote></section><section data-tools="135编辑器" data-id="99882"><section><section><h1 label="一级标题" style="background-image: url("/img/article/h1_icon.png"); background-size: 16px 20px; margin: 25px 0px 20px; padding-left: 22px; font-size: 20px; font-weight: 600; color: rgb(33, 38, 41); line-height: 30px; background-position: 0px 5px; background-repeat: no-repeat no-repeat;">0<span data-original-title title data-num="3">3 </span>异常数据处理</h1></section></section></section><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">处理完缺失值后，需要做异常数据处理。之前介绍过一篇异常数据处理的方法，数据分析-异常数据识别；这篇介绍了多种适应不同场景下的异常数据识别方法。</p><section data-tools="135编辑器" data-id="99882"><section><section><h1 label="一级标题" style="background-image: url("/img/article/h1_icon.png"); background-size: 16px 20px; margin: 25px 0px 20px; padding-left: 22px; font-size: 20px; font-weight: 600; color: rgb(33, 38, 41); line-height: 30px; background-position: 0px 5px; background-repeat: no-repeat no-repeat;">0<span data-original-title title data-num="4">4 </span>数据标准化处理</h1></section></section></section><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">对于很多模型，如线性回归、逻辑回归、Kmeans聚类等，需要计算不同特征的系数，或者计算样本距离。这种情况下，如果不同特征的数值量级差的特别大，会严重影响系数和距离的计算，甚至这种计算都会失去意义。所以在建模前必须要做的就是要去量纲，做标准化处理。当然有些模型是不需要做数据标准化处理的，如决策树、随机森林、朴素贝叶斯等。</p><h3 label="三级标题" style="background-image: url("/img/article/h3_icon.png"); background-size: 8px 20px; margin: 25px 0px 20px; padding-left: 12px; font-size: 16px; font-weight: 600; color: rgb(33, 38, 41); line-height: 30px; background-position: 0px 5px; background-repeat: no-repeat no-repeat;"><strong>当前最常用的数据标准化处理方法有：</strong></h3><section data-role="list"><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;"><strong>1. 最小—最大规范化</strong></p></section><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">(x-min)/(max-min)，将其规范到[0,1]之间</p><section data-role="list"><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;"><strong>2. z值规范化</strong></p></section><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">(x-均值)/标准差，将其规范为均值为0，标准差为1；</p><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">如果这种情况，受离群点影响比较大的话，可以用中位数代替均值，用绝对标准差代替标准差。</p><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">还需要注意的是，如果样本分布非常有偏的话，可以先做box-cox变换，将其往正态分布变换后再标准化。</p><section data-tools="135编辑器" data-id="99882"><section hm_fix="400:368"><section><h1 label="一级标题" style="background-image: url("/img/article/h1_icon.png"); background-size: 16px 20px; margin: 25px 0px 20px; padding-left: 22px; font-size: 20px; font-weight: 600; color: rgb(33, 38, 41); line-height: 30px; background-position: 0px 5px; background-repeat: no-repeat no-repeat;">0<span data-original-title title data-num="5">5 </span>特征选择</h1></section></section></section><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">在做完基本的数据清洗以及特征变换后，需要做的是特征选择，一般做特征选择的原因是：</p><section data-role="list"><ol class=" list-paddingleft-2"><li><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">某些特征存在多重共线性，这种情况对线性回归和逻辑回归影响比较大；</p></li><li><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">特征太多，有些特征增加了模型复杂性却与模型无关，不能全部入模，需要筛选出价值更高的特征。</p></li></ol></section><h2 label="二级标题" style="background-image: url("/img/article/h2_icon.png"); background-size: 8px 20px; margin: 25px 0px 20px; padding-left: 12px; font-size: 18px; font-weight: 600; color: rgb(33, 38, 41); line-height: 30px; background-position: 0px 5px; background-repeat: no-repeat no-repeat;"><strong>5.1 多重共线性</strong></h2><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;"><strong>是什么</strong>：模型的解释变量之间由于存在精确相关关系或高度相关关系而使模型估计失真或难以估计准确；</p><h3 label="三级标题" style="background-image: url("/img/article/h3_icon.png"); background-size: 8px 20px; margin: 25px 0px 20px; padding-left: 12px; font-size: 16px; font-weight: 600; color: rgb(33, 38, 41); line-height: 30px; background-position: 0px 5px; background-repeat: no-repeat no-repeat;"><strong>影响</strong><strong>：</strong></h3><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">1）影响模型的稳定性，而且影响模型的解释；<br></p><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">举个例子，假设消费支出=0.3*收入，这样可能的模型输出的是：</p><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">消费支出+收入</p><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">1.3*收入</p><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">1.6*收入-消费支出</p><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">同样的数值输出，不同的公式计算，会非常模型解释和稳定性的。</p><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">2）线性回归模型，会导致最小二乘估计无法计算系数，即使可计算系数方差也很大，即1）中提到的不稳定。</p><h3 label="三级标题" style="background-image: url("/img/article/h3_icon.png"); background-size: 8px 20px; margin: 25px 0px 20px; padding-left: 12px; font-size: 16px; font-weight: 600; color: rgb(33, 38, 41); line-height: 30px; background-position: 0px 5px; background-repeat: no-repeat no-repeat;"><strong>怎么识别</strong><strong>：</strong></h3><section data-role="list"><ol class=" list-paddingleft-2"><li><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">计算特征之间的相关系数，对于相关性特别高的特征，根据业务需要保留有代表性的特征</p></li><li><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">方差膨胀因子（VIF）</p></li></ol></section><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">计算每个特征被其他特征拟合的情况，如特征j，被其他特征线性拟合的决定系数为R2；通常拟合越好，决定系数就越大且最大可达到1。</p><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px; text-align: center;"><img src="https://qnssl.niaogebiji.com/1013467293605aa2cf382615.29058408.png" title="鸟哥笔记,数据运营,须臾即永恒,数据模型,分析方法,数据指标,数据分析" alt="鸟哥笔记,数据运营,须臾即永恒,数据模型,分析方法,数据指标,数据分析" referrerpolicy="no-referrer"></p><p><br></p><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">所以，当方差膨胀因子过大，说明此特征存在多重共线性。一般大于10会认为有比较强的多重共线性问题。</p><h3 label="三级标题" style="background-image: url("/img/article/h3_icon.png"); background-size: 8px 20px; margin: 25px 0px 20px; padding-left: 12px; font-size: 16px; font-weight: 600; color: rgb(33, 38, 41); line-height: 30px; background-position: 0px 5px; background-repeat: no-repeat no-repeat;"><strong>怎么解决</strong><strong>：</strong></h3><section data-role="list"><ol class=" list-paddingleft-2"><li><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">删除共线性强的特征</p></li><li><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">线性回归模型的话，可采用岭回归的估算方式解决</p></li></ol></section><h2 label="二级标题" style="background-image: url("/img/article/h2_icon.png"); background-size: 8px 20px; margin: 25px 0px 20px; padding-left: 12px; font-size: 18px; font-weight: 600; color: rgb(33, 38, 41); line-height: 30px; background-position: 0px 5px; background-repeat: no-repeat no-repeat;"><strong>5.2 特征太多</strong><br></h2><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">不同的模型和应用场景下特征筛选方式不同：</p><section data-role="list"></section><blockquote><section data-role="list"><ol class=" list-paddingleft-2"><li><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">对于二分类问题来说，筛选逻辑是：筛选出对二分类结果区分度比较高的特征；可以通过计算IV（information value）值的大小来筛选，一般IV值越大，此特征对二分类结果更有区分度。</p></li><li><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">对于回归预测问题，主要针对多元线性回归。筛选特征的方法有：</p></li></ol></section><ol class=" list-paddingleft-2"><section data-role="list"><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">特征子集选择法、正则化法以及降维法。</p></section></ol></blockquote><ol class=" list-paddingleft-2"><section data-role="list"></section></ol><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;"><strong>1. 特征子集选择法</strong></p><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">特征子集选择法有向前逐步选择法和向后逐步选择法：</p><ul class=" list-paddingleft-2"><li><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;"><strong>向前逐步选择</strong></p></li></ul><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">具体方法就是从0个特征开始，一个一个逐步从剩余特征中添加使得模型拟合误差最小的特征，在添加过程中得到模型拟合最优的特征组合。</p><ul class=" list-paddingleft-2"><li><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;"><strong>向后逐步选择</strong></p></li></ul><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">和向前逐步选择类似，只是反过来了，让所有特征入模，再一步一步剔除效果不好的特征，从而达到最优。</p><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;"><strong>2. 正则化压缩无意义特征的系数</strong></p><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">比较好用的方法是lasso。一般的线形回归我们只会希望它的误差平方和最小，但是lasso的目标函数在原有目标函数后面加了一项系数惩罚项。这样让目标函数最小，可以实现无意义特征的系数为0，从而实现特征选择。</p><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px; text-align: center;"><img src="https://qnssl.niaogebiji.com/2125772222605aa2cf8d9524.25466191.png" title="鸟哥笔记,数据运营,须臾即永恒,数据模型,分析方法,数据指标,数据分析" alt="鸟哥笔记,数据运营,须臾即永恒,数据模型,分析方法,数据指标,数据分析" referrerpolicy="no-referrer"></p><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;"><strong>3. PCA降维</strong></p><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">这个是将原有有一定线性关系的特征线形组合成新的相互独立的特征，所以不适合原有特征已经相互独立的情况。</p><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">以上就是数据建模的前期准备流程，做完这些内容就可以开始模型训练，对模型结果进行预测分析啦，而这部分则是不同模型会有不同的具体处理方法。总之，模型训练前的数据分析、数据清洗以及特征选择非常重要，甚至他们是决定建模是否成功的关键因素，所以这部分工作一定要做细做准确。</p><p label="正文" style="font-size: 16px; color: rgb(33, 38, 41); margin-bottom: 25px;">感谢阅读，以上就是我要分享的内容 ^_^</p><p label="图片描述" style="font-size: 12px; color: rgb(129, 131, 134); text-align: center; font-weight: 300; line-height: 30px; margin-bottom: 25px;">-END-<br></p></section></section><p></p>                        <div style="height: 1px"></div>
                      
</div>
            