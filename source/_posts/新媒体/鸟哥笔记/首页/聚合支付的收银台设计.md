
---
title: '聚合支付的收银台设计'
categories: 
 - 新媒体
 - 鸟哥笔记
 - 首页
headimg: 'https://qnssl.niaogebiji.com/18085681266111e385d99468.76511760.png'
author: 鸟哥笔记
comments: false
date: Tue, 10 Aug 2021 02:43:28 GMT
thumbnail: 'https://qnssl.niaogebiji.com/18085681266111e385d99468.76511760.png'
---

<div>   
<div style="height: 6px"></div>
                        <p>为了满足理财产品在不同使用场景、不同客户群体的充值入金、消费出金、收单代付、分账结算等支付需求，金融企业往往会对接多家支付通道实现聚合支付。</p><p><br></p><p>聚合支付的核心功能之一是收银台，它可以帮助金融企业解决体外支付问题，且不用对接多个支付机构或商业银行。</p><p><br></p><p>收银台包括支付通道、支付方式和支付网关，通过路由支付通道的不同支付方式，实现支付网关的聚合支付。</p><p><br></p><p>比如用户在APP、H5、PC、小程序和API等业务端，购买理财产品后，通过路由支付通道的收银台，来聚合微信支付、支付宝支付、云闪付支付、银行卡支付等支付方式，支付网关基于用户自主选择的支付方式进行消费支付和收款结算等过程。</p><p> </p><p><img src="https://qnssl.niaogebiji.com/18085681266111e385d99468.76511760.png" title="鸟哥笔记,产品设计,朱学敏,内容产品,用户需求,功能设计,用户需求" alt="鸟哥笔记,产品设计,朱学敏,内容产品,用户需求,功能设计,用户需求" referrerpolicy="no-referrer"></p><p><br></p><p>随着金融企业多产品线的业务发展，收银台面向平台用户、商家客户、特约商户提供了不同的支付方式，比如APP收银台、H5收银台、PC收银台、小程序收银台、API收银台和硬件收银台等，可解决多角色多场景的支付需求。</p><section data-support="96编辑器" data-style-id="17526"><section><section><section><section><section><h1 label="一级标题" style="background-image: url("/img/article/h1_icon.png"); background-size: 16px 20px; background-position: 0px 5px; background-repeat: no-repeat; margin: 25px 0px 20px; padding-left: 22px; font-size: 20px; font-weight: 600; color: rgb(33, 38, 41); line-height: 30px; text-align: center;"><strong>收银台支付流程</strong></h1></section></section></section></section></section></section><p></p><p>从角色和事项两个维度梳理收银台的业务逻辑，并将收银台的信息流和资金流流程化，可帮助我们快速了解整个收银台的支付流程：</p><p><br></p><p><strong>其一，收银台信息流。</strong></p><p>首先，按找业务角色分为个人用户、理财平台、支付通道和收银台等；其次，按功能属性分为：选择理财产品、输入购买金额、选择支付方式、输入支付密码。最后，按操作流程抽象地描述业务进行的次序，以及流转过程中传递的支付信息。</p><p><br></p><p><strong>其二，收银台资金流。</strong></p><p>用户购买理财产品支付成功后，会将用户银行账户资金代收记账到特约商户备付金账户，再根据分账指令，批量代付到分账接收方的理财子账户。</p><p><br></p><p><img src="https://qnssl.niaogebiji.com/18557487176111e386170057.15087562.png" title="鸟哥笔记,产品设计,朱学敏,内容产品,用户需求,功能设计,用户需求" alt="鸟哥笔记,产品设计,朱学敏,内容产品,用户需求,功能设计,用户需求" referrerpolicy="no-referrer"></p><p><br></p><p>在业务端，用户在理财产品页操作购买，在收银台页输入购买金额和支付方式，在订单支付页输入支付密码，获得订单支付结果。在服务端，系统根据路由规则调用支付通道，收银台反显支付方式，检验订单提交参数，并将支付处理结果返给用户。</p><p><br></p><p></p><section data-support="96编辑器" data-style-id="17526"><section><section><section><section><section><h1 label="一级标题" style="background-image: url("/img/article/h1_icon.png"); background-size: 16px 20px; background-position: 0px 5px; background-repeat: no-repeat; margin: 25px 0px 20px; padding-left: 22px; font-size: 20px; font-weight: 600; color: rgb(33, 38, 41); line-height: 30px; text-align: center;"><strong>收银台功能设计</strong></h1></section></section></section></section></section></section><h3></h3><p>在用户侧的充值入金、消费出金，和商家侧的收单代付、分账结算，都需要借助收银台进行订单支付。收银台功能设计最核心的是三个功能是：支付通道、支付方式和支付网关。</p><p><br></p><p><strong>其一，收银台的支付通道设计。</strong></p><p>根据路由规则匹配可用的支付通道，比如通联支付、首信易支付、银盛支付、宝付支付、拉卡拉支付等，一般是按业务中台系统设计的路由比例选择支付通道，也可以优先默认的支付通道。</p><p><br></p><p>支付通道的选择对理财平台来说至关重要，我们一般会考虑通道支付的手续费、垫资结算的手续费、支付系统的稳定性、资金账户所限额度、通道对接改造程度等。根据理财平台的业务发展需要，一般至少会对接两家以上的支付通道，能够在因外界因素导致通道关闭或系统问题导致通道崩溃时，随时自动切换其他支付通道。</p><p><br></p><p><strong>其二，收银台的支付方式选择。</strong></p><p>通过支付通道聚合主流的支付方式，比如微信支付、支付宝支付、云闪付、银行卡支付、账户支付等进行聚合支付，用户绑定支付账户openid后，默认选择时记录用户最近一次购买理财产品所选择的支付方式。</p><p><br></p><p>支付方式的选择是为了更好的满足不同用户群体的个性化需求，所以收银台会全量聚合支付方式，我们只需在业务中台系统配置可用的支付方式的业务贡献策略、优先排序策略、通道开关策略即可。</p><p><br></p><p><strong>其三，收银台的支付网关处理。</strong></p><p>依托支付网关整合不同的资金交易业务，比如付款、收款、支付转账、账户余额、账户充值、账户提现、银行退款、银行对账、清分核算等，通过标准接口API路由分发到银联、网银等支付渠道，进行统一订单处理，可提高资金交易的时效性。</p><p><br></p><p>支付网关整合不同银行或支付机构的支付通道接口，调用支付通道接口完成签约、支付、代扣、分账、结算、退款等支付操作，避免了支付通道之间资金交易的差异。</p><p> </p><p><img src="https://qnssl.niaogebiji.com/8981438996111e386620436.25645233.png" title="鸟哥笔记,产品设计,朱学敏,内容产品,用户需求,功能设计,用户需求" alt="鸟哥笔记,产品设计,朱学敏,内容产品,用户需求,功能设计,用户需求" referrerpolicy="no-referrer"></p><p><br></p><p><br></p><p>理财平台用户选择支付方式，业务中台系统路由支付通道，收银台聚合多种支付方式，支付网关系统上送支付订单，其实都是基于收银台进行订单相关支付业务。</p><p><br></p><p>在支付系统中，我们只需根据理财用户、平台商户、聚合收银台、支付渠道等业务角色，设计收银台的相关支付功能即可。</p><p></p><section data-support="96编辑器" data-style-id="17526"><section><section><section><section><section><h1 label="一级标题" style="background-image: url("/img/article/h1_icon.png"); background-size: 16px 20px; background-position: 0px 5px; background-repeat: no-repeat; margin: 25px 0px 20px; padding-left: 22px; font-size: 20px; font-weight: 600; color: rgb(33, 38, 41); line-height: 30px; text-align: center;"><strong>收银台支付案例</strong></h1></section></section></section></section></section></section><p></p><p>任何涉及线上资金交易场景都离不开收银台，比如账户转账、红包返现、消费付款、钱包充值、生活缴费和投资理财等。以投资理财为例，在买入或卖出等支付环节，都离不开收银台。用户购买理财产品的支付流程，如图3.3-4所示：</p><ul class=" list-paddingleft-2"><li><p>第一步：用户在理财产品的详情页，点击“买入”后，根据支付路由规则分配支付机构，并显示支付机构聚合的支付方式；</p><p><br></p></li><li><p>第二步：用户在收银台页面，用户输入买入金额和选择支付方式后，点击“确认买入”时，首次会调用会员绑定支付账户接口，上送操作类型、支付账户类型、支付账户用户标识等信息，支付机构返回绑定微信、支付宝等平台的用户openid。绑定支付账户成功后，调用消费出金接口请求，上送商户订单号、购买金额、手续费、支付方式、商品类型、交易验证方式、订单过期时间、访问终端类型等信息至支付机构；</p><p><br></p></li><li><p>第三步：用户在支付页面，点击“立即支付”唤起收银台（微信、支付宝等）的聚合支付；</p><p><br></p></li><li><p>第四步：用户选择扣款方式，输入支付密码并校验成功之后执行支付，支付机构会提交订单给银联或网银处理；</p><p><br></p></li><li><p>第五步：银行处理支付订单并返回处理结果，收银台接受支付结果信息，理财平台落地订单处理（更新订单状态）并通知用户支付结果。</p></li></ul><p> </p><p><img src="https://qnssl.niaogebiji.com/1838735956111e3869e6810.25972721.png" title="鸟哥笔记,产品设计,朱学敏,内容产品,用户需求,功能设计,用户需求" alt="鸟哥笔记,产品设计,朱学敏,内容产品,用户需求,功能设计,用户需求" referrerpolicy="no-referrer"></p><p><br></p><p>在理财业务端上，收银台是支付环节的关键流程，解决了不同客户群体的不同支付方式需求，也统一了不同商户的不同支付产品界面的问题。</p><p><br></p><p>但要想从0到1设计一个收银台，必须深入了解支付系统的签约、认证、支付、收单、分账、结算、对账、退款等业务，从根本上提升收银台的支付效率。</p><p><br></p><p></p><section><section><article data-id="4390" data-use="1" data-author="Wxeditor"></article><p label="图片描述" style="font-size: 12px; color: rgb(129, 131, 134); text-align: center; font-weight: 300; line-height: 30px; margin-bottom: 25px;">-END-</p></section></section><section><mpprofile data-pluginname="mpprofile" data-id="MzAxNzcxNzQ0OQ==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/VIEYkPX70nUJ20NtZdsHic5AcVp7PR3u6pmSMz8zuPZ35oDYqTreC5sOvMP5fxUkY8KHkOjzBekKeBBva7tvZHg/0?wx_fmt=png" data-nickname="朱学敏聊产品" data-alias="PMLoop" data-signature="《产品闭环》作者！只聊金融「支付、理财、贷款」，我就BB金融怎么了？" data-from="0"></mpprofile></section><section><mpcps frameborder="0" data-datakey="1628173063168_0.07651357504194256" data-uid="1628173063166" data-type="1" data-product data-templateid="list" data-pid="12867056" data-color="#fa7834" data-categoryid="3" data-appuin="3208869061"></mpcps></section><p></p>                        <div style="height: 1px"></div>
                      
</div>
            