
---
title: '内存无脑插满性能就好？其实不一定'
categories: 
 - 新媒体
 - ZAKER
 - channel
headimg: 'https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202209/631f51eb8e9f097cf204277f_1024.jpg'
author: ZAKER
comments: false
date: Mon, 12 Sep 2022 16:40:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202209/631f51eb8e9f097cf204277f_1024.jpg'
---

<div>   
<p>内存对 DIY 玩家来说是再熟悉不过的硬件了，即使是新手玩家都能对内存的容量、频率、时序等参数有一定了解。在实际的装机过程中，有的玩家以为把内存随便插到主板上能点亮就行，或者直接插满 4 条内存追求性能，但不合理的内存插法可能会限制性能的发挥甚至影响平台的稳定性，" 插满 " 也不代表性能就好。今天，我们就来科普一下正确的内存安装姿势。</p><p></p><div class="img_box" id="id_imagebox_0" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_0" data-original="http://zkres2.myzaker.com/202209/631f51eb8e9f097cf204277f_1024.jpg" data-height="514" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202209/631f51eb8e9f097cf204277f_1024.jpg" referrerpolicy="no-referrer"></div></div><strong>为什么内存插法有讲究</strong><p></p><p>我们都知道，当 CPU 要运行某个程序时，就要先把程序从硬盘调用到内存里面，CPU 再和内存进行数据交换。这主要是因为 CPU 的速度比硬盘快得多，如果让 CPU 直接运行硬盘中的程序，那硬盘的速度会成为性能瓶颈，为了确保 CPU 的高效工作，就需要一个性能更强的数据暂存区—内存。别看当前顶级 PCIe 4.0 SSD 的读写速度已经达到 7000MB/s 以上，比 DDR2 400 内存都快。但这只是顺序读写性能，而 CPU 需要运行的程序和数据是不确定的，这就要求非常强的随机读写性能和并发 IO 性能，并且由于它还要和 CPU 进行数据交换，还必须做到极低的延迟，因此只有内存才能充当数据暂存区的角色。</p><p></p><div class="img_box" id="id_imagebox_1" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_1" data-original="http://zkres2.myzaker.com/202209/631f51eb8e9f097cf2042780_1024.jpg" data-height="496" data-width="800" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202209/631f51eb8e9f097cf2042780_1024.jpg" referrerpolicy="no-referrer"></div></div>高带宽和低延迟的特性使得内存只能使用并行总线，但并行总线对抗干扰和校验的要求很高，CPU 是通过物理方式也就是电路访问内存进行数据交换的。如果我们了解一下 CPU 的针脚定义，就可以发现无论是 Intel 还是 AMD CPU 的内存插槽，都布置在与内存相关的针脚一侧，缩短内存与 CPU 之间的距离是降低延迟和传输损失最直接的优化方式。<p></p><p></p><div class="img_box" id="id_imagebox_2" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_2" data-original="http://zkres1.myzaker.com/202209/631f51eb8e9f097cf2042781_1024.jpg" data-height="554" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202209/631f51eb8e9f097cf2042781_1024.jpg" referrerpolicy="no-referrer"></div></div>但是大家在查看主板说明书时，可能会发现很多主板都推荐将内存条装在 2、4 插槽上，而不是离 CPU 更近的 1、3 插槽。这是因为多通道内存插槽为了实现高速并行，就要遵循数据信号等长布线的原则，理论上每个内存插槽到 CPU 的距离都应该相等。但通过甩线工艺来保证线路等长的方法受到材料科学、电感分布等限制，不同的主板有不同的布线方案，而布线方案的差异才是内存最佳插法的决定因素。<p></p><p><strong>3 种主流的内存布线方案</strong></p><p></p><div class="img_box" id="id_imagebox_3" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_3" data-original="http://zkres2.myzaker.com/202209/631f51eb8e9f097cf2042782_1024.jpg" data-height="380" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202209/631f51eb8e9f097cf2042782_1024.jpg" referrerpolicy="no-referrer"></div></div>现在我们已经知道，主板内存与 CPU 相连的线路结构设计是十分重要的，那么不同内存布线方案之间究竟有什么区别呢？目前消费级的酷睿和锐龙 CPU 都支持双通道内存技术，CPU 内部集成两个内存控制器，每个控制器控制一个内存通道。根据每个内存通道对应的 DIMM 插槽（内存插槽）数量，分为 1 DPC 和 2 DPC。1 DPC ( DIMM Per Channel ) 意思是每个通道只做 1 个内存插槽。同理，2 DPC 即为每个内存通道对应 2 个内存插槽。<p></p><p><strong>直连：</strong>1 DPC 也叫做直连布线方案，是直接从 CPU 布线连接到内存插槽上，这种布线方案常见于只有两条内存插槽的 ITX 主板以及高端的超频主板上（大部分内存超频的世界纪录用的就是这类主板）。这种布线的好处是数据可以直接通往各自通道的内存，使内存能获得最优的电气性能和最少的信号干扰。最典型的例子就是我们使用技嘉 AB350N-Gaming WIFI 的 ITX 主板，能轻松超到 DDR4 4600MHz 的内存频率，这在 4 内存槽的 B350 主板上是很难实现的。</p><p><strong>T-Type：</strong>2 DPC 布线方案被广泛使用在 4 内存槽的消费级主板上，2 DPC 又分为 T-Type ( T-Topology ) 和 D-Type ( Daisy Chain ) 方案。T-Type 布线方案是同一内存通道从处理器插座引线出来，分别连接两条内存插槽，可以简单的理解为并联布线。T-Type 布线的特点是能尽可能的保证同一内存通道中，两根插槽到达 CPU 的物理距离等长，从而减小信号延迟差异。理论上采用 T-Type 布线的主板插入四条内存时，能获得最好的电气性能。缺点是仅插入两条内存时，空着的内存插槽残线就变成接收干扰的 " 天线 "，反而降低了电气性能。</p><p><strong>D-Type：</strong>由于 T-Type 在只插两条内存时对性能影响较大，而大多数玩家受制于预算并不会购买 4 条内存，与其追求插满的性能表现，不如退而求其次兼顾主流玩家。现在主流主板都采用 D-Type 布线方案，也叫菊花链。菊花链的布局方式是从处理器插座直接引线到第一个内存槽上，再由 1 内存槽直连 2 内存槽，3、4 内存槽同理，可以简单的理解为串联布线。菊花链布线的优势是当插入 2、4 内存槽时就能实现最好的电气性能，但当 4 条内存都插满时，同一通道内的内存到达 CPU 的物理距离不同，会产生延迟干扰。</p><p>具体到双条内存的插法上，采用 T-Type 布线方案的主板，如果只插 1、3 插槽，信号会向左进行一次折返，这种折返是会产生干扰和损耗，2、4 插槽虽然同样有 T-Type 布线方案的残线影响，但少了折返损耗，电气性能依然更好。而菊花链布线就更好理解了，插 2、4 插槽时没有残线干扰，信号直通内存。而在安装单条内存时，也优先选择更靠近 CPU 但不会产生残线的 2 插槽。当然，这只是普遍的规律，在实际的装机过程中最好参考主板说明书。</p><p>这里再教大家一个分辨 4 内存插槽的老主板内存布线方案的技巧：去官网主板的介绍页面，详细参数中一般会有内存兼容表（QVL），如果频率最高几档的是插满 4 根，那就是 T-Type，反之 2 根的就是菊花链。</p><p></p><div class="img_box" id="id_imagebox_4" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_4" data-original="http://zkres1.myzaker.com/202209/631f51eb8e9f097cf2042783_1024.jpg" data-height="499" data-width="913" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202209/631f51eb8e9f097cf2042783_1024.jpg" referrerpolicy="no-referrer"></div></div><strong>不同内存插法的性能实战研究</strong><p></p><p>当我们了解 T-Type 和菊花链内存布线的特性以后，就可以理解为什么大多数主板厂商推荐将内存条装在 2、4 插槽上了。但大家可能依然对不同内存插法的性能表现没有具体的概念，毕竟纸上得来终觉浅，接下来我们就进行实际测试来验证。本次测试平台所使用的主板为 ROG MAXIMUS Z690 HERO，采用目前主流主板的菊花链内存布线方案。测试内存是 4 条宇瞻 NOX 暗黑女神 DDR5 5200 内存。</p><p><strong>测试平台</strong></p><p>处理器：Intel 酷睿 i9 12900K</p><p>内存：宇瞻 NOX 暗黑女神 DDR5 5200 16GB×4</p><p>主板：ROG MAXIMUS Z690 HERO</p><p>显卡：ROG STRIX RTX3090 O24G</p><p>硬盘：WD_BLACK SN850 1TB</p><p>电源：ROG 雷神 1200W</p><p>操作系统：Windows 11 专业版</p><p>本次测试分为频率和内存延迟测试，默认打开内存 XMP1 设定，首先我们将内存安装到理论性能最差的 1、3 插槽，发现只有把频率降低至 4400MHz 时才能开机。2、4 插槽和内存插满时都能跑到 5200MHz，但在默认参数下，内存插满时并不能直接提升频率到 5200Mz 以上。</p><p>接着我们以 4400MHz 为基准，使用 AIDA64 分别对三种内存插法进行测试，每种插法进行 4 次测试并记录下延迟表现。可以看到在同一运行频率下，1、3 插槽的表现是最差的，平均延迟达到 90ns，4 条内存插满时的延迟为 89ns，2、4 插槽的表现最好，只有 88.7ns，可见不同内存插法的实际延迟表现与理论表现吻合。</p><p></p><div class="img_box" id="id_imagebox_5" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_5" data-original="http://zkres1.myzaker.com/202209/631f51eb8e9f097cf2042784_1024.jpg" data-height="192" data-width="745" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202209/631f51eb8e9f097cf2042784_1024.jpg" referrerpolicy="no-referrer"></div></div>总结：内存插的对，游戏自然快<p></p><p>这次我们给大家科普了主板内存布线方案和内存插法的关系，并且用实际测试验证了采用不同内存插法的性能表现。在当前采用菊花链内存布线方案的主流主板上，如果把内存安装在 1、3 插槽会大幅影响内存的性能表现，这在运行频率和抗干扰要求更高的 DDR5 内存上尤为明显。而内存插满和 2、4 插槽插法的性能差距看似不大，同频率下，内存插满甚至有 2% 左右的带宽优势，但后者可以通过拉高频率或者超频方式轻松做到更低延迟和更大的带宽，这显然对游戏帧率提升的帮助大得多。对普通游戏玩家来说，内存采用 2、4 插槽插法是性价比最高的，插满反而会在一定程度上影响性能表现。当然，如果你是需要运行专业软件的创意工作者，插满内存可以显著提升工作效率。</p><p><strong><strong></strong></strong></p><div id="recommend_bottom"></div><div id="article_bottom"></div>  
</div>
            