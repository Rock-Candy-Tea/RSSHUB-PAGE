
---
title: '机器学习如何彻底改变游戏中的物理模拟'
categories: 
 - 新媒体
 - ZAKER
 - channel
headimg: 'https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202109/613ed13b8e9f097a7c254edb_1024.jpg'
author: ZAKER
comments: false
date: Mon, 13 Sep 2021 18:00:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202109/613ed13b8e9f097a7c254edb_1024.jpg'
---

<div>   
<p></p><div class="img_box" id="id_imagebox_0" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_0" data-original="http://zkres1.myzaker.com/202109/613ed13b8e9f097a7c254edb_1024.jpg" data-height="281" data-width="500" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202109/613ed13b8e9f097a7c254edb_1024.jpg" referrerpolicy="no-referrer"></div></div><strong>编译：琰琰</strong><p></p><p><strong>编辑：王晔</strong></p><p>量子力学奠基者之一、英国理论物理学家保罗 · 狄拉克（Paul Dirac）在 1929 年说过：" 大部分物理和化学所需要的数学理论的定律都是已知的，但这些定律的方程太复杂无法求得精确解 "。他认为，从蛋白质折叠、材料失效到气候变化，所有的物理现象都可以模拟为量子计算。但由于控制方程太复杂，科学家无法在现实的时间尺度上求解。</p><p>那么，这是否意味着我们永远无法实现实时物理模拟？</p><p>以前物理学家通过模型开发、求近似解等方法可以在较短时间内达到预期的结果。然而，随着研究、软件和硬件技术的进步，实时仿真只能在极限条件下才能够实现，这一点在视频游戏物理学中最为明显。</p><p>模拟物理现象（如碰撞、变形、破裂和流体流动）属于密集型计算。在游戏中实时模拟此类现象需要对不同的算法进行了大量的简化和优化。目前最先进模拟方法是刚体物理学（rigid body physics），它可以确保两个物体在碰撞和反弹的过程中不会发生变形或断裂，这是模拟虚拟游戏的基础。当两个物体碰撞时，算法能够进行实时检测并采用适当的力模拟碰撞。</p><p>如下，电子游戏中的 " 摧毁 " 可能是刚体物理学应用的最佳示例。</p><p></p><div class="img_box" id="id_imagebox_1" onclick><div class="content_img_div"><img class="lazy opacity_0 zaker_gif_cache" id="img_1" data-original="http://zkres1.myzaker.com/202109/613ed13b8e9f097a7c254edc_1024.jpg" data-gif-url="http://zkres1.myzaker.com/202109/613ed13b8e9f097a7c254edc_raw.gif" data-height="484" data-width="887" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202109/613ed13b8e9f097a7c254edc_1024.jpg" referrerpolicy="no-referrer"></div></div>需要说明的是，刚体物理学可用于模拟不变形物体的碰撞，但虚拟游戏中往往存在着大量可变形物体，比如头发、衣服。而要想解决这个问题就需要用到柔体动力学（soft-body dynamics）。<p></p><p>以下是模拟可变形物体的四种方法（按复杂度排序）</p><p>弹簧质量模型（Spring-Mass Model）</p><p>由命名可知，弹簧相互连接的点的质量系统代表模型检测的目标，我们可将其视为三维胡克定律网络。胡克定律是力学弹性理论中的一条基本定律，它表明受力固体材料中的应力与应变（单位变形量）之间成线性关系。</p><p>该模型的主要缺点是建立质量弹簧网络时需要大量的人力成本，并且材料特性与模型参数之间没有严密的逻辑关系。但尽管如此，该模型在 "BeamNG.Drive" 赛车游戏中也达到了非常不错的效果，如下图，基于弹簧 - 质量模型的实时车辆模拟器，可用于模拟车辆变形。</p><p></p><div class="img_box" id="id_imagebox_2" onclick><div class="content_img_div"><img class="lazy opacity_0 zaker_gif_cache" id="img_2" data-original="http://zkres1.myzaker.com/202109/613ed13b8e9f097a7c254edd_1024.jpg" data-gif-url="http://zkres1.myzaker.com/202109/613ed13b8e9f097a7c254edd_raw.gif" data-height="482" data-width="886" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202109/613ed13b8e9f097a7c254edd_1024.jpg" referrerpolicy="no-referrer"></div></div>基于位置的动力学（Position-bsed Dynamics，PBD）<p></p><p>运动学模拟的方法通常基于力学模型，如粒子加速度遵循牛顿第二定律计算，通过积分计算获取每个时刻的速度和位置。</p><p>在基于位置的动力学，通过求解约束方程的准静态问题来计算位置。PBD 方法的精确度较低，但计算速度优于基于强制的方法，因此非常适合游戏、动画电影等视觉场景。游戏中人物的头发、衣服的运动通常都是采用该模型来实现。PBD 不仅局限于可变形固体，还可用于模拟刚体物体和流体。更多内容可参考这篇关于 PBD 方法的综述 [ 2 ] 。</p><p></p><div class="img_box" id="id_imagebox_3" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_3" data-original="http://zkres1.myzaker.com/202109/613ed13b8e9f097a7c254ede_1024.jpg" data-height="372" data-width="1228" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202109/613ed13b8e9f097a7c254ede_1024.jpg" referrerpolicy="no-referrer"></div></div>有限元法（finite element method ，FEM）<p></p><p>有限元方法计算变形材料是基于弹性场理论求解应力 - 应变方程。</p><p>它本质上遵循 3D 胡克定律，首先将材料划分为四面体的有限元，通过求解线性矩阵方程，获得每个时刻步长上顶点上的应力和应变。FEM 是一种基于网格的软体动力学模拟方法，它的优点是精确度高，且模型参数与材料特性（如杨氏模量和泊松比）直接相关。一般而言，FEM 模拟在工程应用方面不能实时运行，但最近知名半导体公司 AMD 发布多线程 FEM 库，表明 FEMFX 在游戏中可实时模拟变形材料。</p><p></p><div class="img_box" id="id_imagebox_4" onclick><div class="content_img_div"><img class="lazy opacity_0 zaker_gif_cache" id="img_4" data-original="http://zkres1.myzaker.com/202109/613ed13b8e9f097a7c254edf_1024.jpg" data-gif-url="http://zkres1.myzaker.com/202109/613ed13b8e9f097a7c254edf_raw.gif" data-height="550" data-width="1016" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202109/613ed13b8e9f097a7c254edf_1024.jpg" referrerpolicy="no-referrer"></div></div>AMD 的实时有限元解算器 FEMFX 模拟木材断裂<p></p><p></p><div class="img_box" id="id_imagebox_5" onclick><div class="content_img_div"><img class="lazy opacity_0 zaker_gif_cache" id="img_5" data-original="http://zkres2.myzaker.com/202109/613ed13b8e9f097a7c254ee0_1024.jpg" data-gif-url="http://zkres2.myzaker.com/202109/613ed13b8e9f097a7c254ee0_raw.gif" data-height="550" data-width="1015" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202109/613ed13b8e9f097a7c254ee0_1024.jpg" referrerpolicy="no-referrer"></div></div>AMD 的 FEMFX 模拟塑性变形<p></p><p>材料点法（Material Point Method ，MPM）</p><p>MPM 是一种高精度的无网格方法，它比基于网格的方法更适合模拟变形、断裂、多材料系统和粘弹性流体，因为运行效率和分辨率更高。MPM 是目前最先进的无网格混合欧拉 / 拉格朗日的方法，是细胞内粒子（PIC）和流体隐式粒子（FLIP）等传统方法的升级。</p><p>MPM 模拟不是实时运行的，在一个含有一百万个点的系统中，MPM 每帧大约需要半分钟。详细内容可见 MPM 综述文章 [ 3 ] 。</p><p></p><div class="img_box" id="id_imagebox_6" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_6" data-original="http://zkres1.myzaker.com/202109/613ed13b8e9f097a7c254ee1_1024.jpg" data-height="641" data-width="1220" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202109/613ed13b8e9f097a7c254ee1_1024.jpg" referrerpolicy="no-referrer"></div></div>一片面包的撕裂模拟需要 1100 万 MPM 粒子<p></p><p>机器学习与物理模拟</p><p>以上四种方法与机器学习有什么关系呢？</p><p>我们注意到，基于传统方法，模型的计算速度、精度 / 分辨率等指标已经陷入了一种瓶颈。物理解算器经过过去几十年的优化，其发生阶跃式改进的空间已所剩无几。而在此背景下，机器学习就派上了用场。</p><p>最近，牛津大学 [ 5 ] 、Ubisoft La Forge 实验室 [ 6 ] 、DeepMind 公司 [ 7,8 ] 以及苏黎世联邦理工学院 [ 9 ] 的研究表明，深度神经网络可以学习物理间的相互作用并实现模拟，重点是速度可以提高多个数量级。其过程大致为：生成数以百万计的模拟数据——通过神经网络进行训练——使用经过训练的模型模拟物理解算器。</p><p>其中，生成数据和训练模型阶段会耗费大量时间，但经过训练的神经网络模型在模拟物理阶段速度会非常快。例如，牛津大学的研究人员 [ 5 ] 开发了一种被称为：深度仿真器网络搜索（Deep Emulator Network Search，DENSE）的方法，该方法将模拟速度提高了 20 亿倍，并通过了 10 个科学案例的验证，包括天体物理学、气候、聚变和高能物理学。</p><p>在游戏领域，Ubisoft La Forge 研究团队开发的模型使用简单的前馈网络，通过在三个时间帧中对 3D 网格对象的顶点位置进行训练来学习预测下一帧 [ 6 ] 。该模型本质上是将预测与模拟数据集中的已知位置进行对比，并通过反向传播来调整模型参数，以最小化预测误差。</p><p>该团队使用 Maya 的 nCloth 物理解算器生成模拟数据，这是一种针对布料优化的高级弹簧质量模型。他们还实施了主成分分析（PCA），实验表明，仅在最重要的基础上进行训练，神经网络模拟物理的速度比物理解算器快 5000 倍。</p><p></p><div class="img_box" id="id_imagebox_7" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_7" data-original="http://zkres2.myzaker.com/202109/613ed13b8e9f097a7c254ee2_1024.jpg" data-height="484" data-width="1564" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202109/613ed13b8e9f097a7c254ee2_1024.jpg" referrerpolicy="no-referrer"></div></div>数据驱动下的布料和粘性材料的物理模拟<p></p><p>同样，DeepMind 的团队近期在图形网络方面的工作也取得了惊人的成果 [ 7 ] 。与传统神经网络的每一层节点相连不同，图神经网络直接具有类似于图的网络结构。利用图网络模型，该研究团队成功地模拟了各种刚性、柔性材料，如沙子、水、黏液等。</p><p>该模型预测的不是粒子的位置，而是加速度。它使用欧拉积分计算速度和位置；使用一系列物理解算器（包括 PBD、SPH 和 MPM）生成模拟数据。由于没有针对速度进行特殊优化，该模型没有明显快于物理解算器，但它证明了机器学习与物理可以进行有效的结合。</p><p></p><div class="img_box" id="id_imagebox_8" onclick><div class="content_img_div"><img class="lazy opacity_0 zaker_gif_cache" id="img_8" data-original="http://zkres2.myzaker.com/202109/613ed13b8e9f097a7c254ee3_1024.jpg" data-gif-url="http://zkres2.myzaker.com/202109/613ed13b8e9f097a7c254ee3_raw.gif" data-height="324" data-width="639" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202109/613ed13b8e9f097a7c254ee3_1024.jpg" referrerpolicy="no-referrer"></div></div>复杂物理模拟与深度学习预测之间的比较<p></p><p>虽然该研究领域仍处于初级阶段，但我们观察到基于深度学习的技术进一步增强了物理模拟。从量子力学、分子动力学到微观结构以及经典物理，各种规模和复杂度的物理现象都有很多模拟模型，我们相信，机器学习和物理学二者结合将创造巨大的潜在价值。</p><div id="recommend_bottom"></div><div id="article_bottom"></div>  
</div>
            