
---
title: '_呔！妖怪，哪里跑_——轻松入门信号处理'
categories: 
 - 新媒体
 - ZAKER
 - channel
headimg: 'https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d0096_1024.jpg'
author: ZAKER
comments: false
date: Thu, 18 Nov 2021 19:36:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d0096_1024.jpg'
---

<div>   
<p>你还记得吧？在西天取经途中，孙悟空用紫金葫芦，轻松地收服了金角大王。</p><p></p><div class="img_box" id="id_imagebox_0" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_0" data-original="http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d0096_1024.jpg" data-height="283" data-width="504" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d0096_1024.jpg" referrerpolicy="no-referrer"></div></div>孙悟空手持紫金葫芦（图片来源：86 版《西游记》）<p></p><p>不过，也有听故事的小朋友提出：<strong>" 紫金葫芦好像一次只能装进一个妖怪，如果金角大王他们会分身术怎么办？"</strong></p><p>如果这样的话，紫金葫芦就要升级一下了！造出紫金葫芦的太上老君可能需要学习一门课——信号处理。</p><p>如果说 " 妖怪 " 等同于信号，" 捉妖 " 就是我们常说的信号处理，" 紫金葫芦 " 就是机器。下面就告诉你，" 葫芦 " 是怎么在茫茫众多的 " 妖怪分身 " 里找到正主，提取到我们需要的信号的。</p><p><strong>这是升级版紫葫芦的使用说明书 ↓↓↓</strong></p><p></p><div class="img_box" id="id_imagebox_1" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_1" data-original="http://zkres1.myzaker.com/202111/619715bc8e9f0967f00d0097_1024.jpg" data-height="666" data-width="770" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202111/619715bc8e9f0967f00d0097_1024.jpg" referrerpolicy="no-referrer"></div></div><strong>功能 1. 捕捉分身怪（测距离）</strong><p></p><p>金角大王使用分身术时，虽然分身会比真身轻，但肉眼无法分辨，妖怪也不会配合称重，当真假金角大王站成一排时，该如何找到它呢 ?</p><p></p><div class="img_box" id="id_imagebox_2" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_2" data-original="http://zkres1.myzaker.com/202111/619715bc8e9f0967f00d0098_1024.jpg" data-height="360" data-width="866" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202111/619715bc8e9f0967f00d0098_1024.jpg" referrerpolicy="no-referrer"></div></div>用户可拿升级版紫金葫芦，挨个叫声 " 金角大王 "。由于真身比分身重，当紫金葫芦吸入金角大王的真身时，葫芦最重，因而收服哪个 " 金角大王 " 后葫芦最重，哪个就是真身。<p></p><p></p><div class="img_box" id="id_imagebox_3" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_3" data-original="http://zkres1.myzaker.com/202111/619715bc8e9f0967f00d0099_1024.jpg" data-height="424" data-width="731" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202111/619715bc8e9f0967f00d0099_1024.jpg" referrerpolicy="no-referrer"></div></div>同样的原理，机器测量物体距离时也会遇到信号 " 分身 " 的干扰。机器为测目标的距离，会先发射一段信号，信号抵达目标后会发生反射。机器通过接收反射信号，即可确定信号的传播时间，从而确定目标距离（传播时间 × 信号的传播速度 /2，除以 2 是因为信号来回往返）。<p></p><p></p><div class="img_box" id="id_imagebox_4" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_4" data-original="http://zkres1.myzaker.com/202111/619715bc8e9f0967f00d009a_1024.jpg" data-height="388" data-width="655" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202111/619715bc8e9f0967f00d009a_1024.jpg" referrerpolicy="no-referrer"></div></div>（信号的发射、反射）<p></p><p>实际中，我们已知发射信号的形状，也就是接收信号该有的形状，即<strong>期望信号（Desired Signal）</strong>，由于传播环境中存在噪声，接收信号不可能完全与期望信号相同。</p><p></p><div class="img_box" id="id_imagebox_5" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_5" data-original="http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d009b_1024.jpg" data-height="703" data-width="938" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d009b_1024.jpg" referrerpolicy="no-referrer"></div></div>（若无噪声，传播 1 秒的接收信号）<p></p><p>当<strong>信噪比</strong>（<strong>Signal to Noise Ratio, SNR</strong>。信号与噪声功率之比，常采用对数形式，单位为分贝 dB）较高时，期望信号会 " 浸泡 " 在噪声中。</p><p></p><div class="img_box" id="id_imagebox_6" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_6" data-original="http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d009c_1024.jpg" data-height="728" data-width="971" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d009c_1024.jpg" referrerpolicy="no-referrer"></div></div>（信噪比为 20dB 时，信号与噪声易于区分）<p></p><p></p><div class="img_box" id="id_imagebox_7" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_7" data-original="http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d009d_1024.jpg" data-height="713" data-width="950" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d009d_1024.jpg" referrerpolicy="no-referrer"></div></div>（信噪比为 10dB 时，信号与噪声尚可区分）<p></p><p>但更为常见的是，由于<strong>信噪比很低</strong>（可为负），期望信号会 " 淹没 " 在噪声中，类似于金角大王的真身藏在分身中，这时肉眼将无法判断期望信号位于哪一段。</p><p></p><div class="img_box" id="id_imagebox_8" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_8" data-original="http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d009e_1024.jpg" data-height="443" data-width="591" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d009e_1024.jpg" referrerpolicy="no-referrer"></div></div>（信噪比为 0dB 时，信号 " 淹没 " 在噪声中，难以区分）<p></p><p>那声 " 金角大王 " 是紫金葫芦收服妖怪的机关，机器测距过程中也有一种 " 机关 " 可提取 " 藏 " 在接收信号中的期望信号，它就是<strong>相关函数（Correlation Function）</strong>。</p><p>相关函数，是将<strong>每一段接收信号都与期望信号相乘再求和</strong>。以如下正弦信号为例，只有当两信号形状完全相同时，任意位置才是相互加强，相关函数最大。否则，两信号必然有加强有减弱，相关函数也就无法达到最大。</p><p></p><div class="img_box" id="id_imagebox_9" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_9" data-original="http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d009f_1024.jpg" data-height="708" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d009f_1024.jpg" referrerpolicy="no-referrer"></div></div>（相关函数示意图）<p></p><p>由于噪声是随机的，不可能与期望信号形状相同，因此在求相关函数时，含有期望信号的那一部分的结果必然最大。</p><p>类似于最重的葫芦对应金角大王的真身，<strong>哪一段信号的相关函数最大，期望信号就在哪一段</strong>，也就确定了信号的传播时间 / 目标距离。</p><p></p><div class="img_box" id="id_imagebox_10" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_10" data-original="http://zkres1.myzaker.com/202111/619715bc8e9f0967f00d00a0_1024.jpg" data-height="675" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202111/619715bc8e9f0967f00d00a0_1024.jpg" referrerpolicy="no-referrer"></div></div>（信噪比为 0dB 时，相关函数的峰值点果然在 1 秒处）<p></p><p><strong>功能 2. 捕捉变形怪（测速度）</strong></p><p>如果金角大王不光会分身术，真身还会变化术，可变胖或变瘦，而紫金葫芦必须参考金角大王原本的模样，那么该如何找到并捕捉它 ?</p><p></p><div class="img_box" id="id_imagebox_11" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_11" data-original="http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d00a1_1024.jpg" data-height="254" data-width="710" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d00a1_1024.jpg" referrerpolicy="no-referrer"></div></div>用户可将金角大王的画像（真身的模样）来回拉扯，作为紫金葫芦的参考。当画像拉扯到某一程度，和面前的 " 胖子 "（变化的真身）长一样时，紫金葫芦就能找到它，同时还能知道它变胖了多少。<p></p><p></p><div class="img_box" id="id_imagebox_12" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_12" data-original="http://zkres1.myzaker.com/202111/619715bc8e9f0967f00d00a2_1024.jpg" data-height="466" data-width="737" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202111/619715bc8e9f0967f00d00a2_1024.jpg" referrerpolicy="no-referrer"></div></div>在上一节的描述中，我们所说的机器测距都是以目标<strong>静止</strong>为前提。若目标在机器的径向上（也就是二者连线方向）是运动的，由于<strong>多普勒效应（Doppler Effect）</strong>，期望信号将不再是原始发射信号，而是被拉伸 / 压缩后的发射信号，拉伸 / 压缩程度与目标的径向速度有关。<p></p><p></p><div class="img_box" id="id_imagebox_13" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_13" data-original="http://zkres1.myzaker.com/202111/619715bc8e9f0967f00d00a3_1024.jpg" data-height="542" data-width="655" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202111/619715bc8e9f0967f00d00a3_1024.jpg" referrerpolicy="no-referrer"></div></div>（目标相对机器的径向运动）<p></p><p>类似于金角大王变胖，<strong>期望信号</strong>和<strong>发射信号</strong>形状也不再一样，或者说<strong>期望信号变成了被拉伸 / 压缩后的发射信号</strong>。</p><p></p><div class="img_box" id="id_imagebox_14" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_14" data-original="http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d00a4_1024.jpg" data-height="805" data-width="996" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d00a4_1024.jpg" referrerpolicy="no-referrer"></div></div>（多普勒效应，导致信号拉伸 / 压缩）<p></p><p>此时，由于拉伸 / 压缩程度（目标速度）未知，因此无法利用上一节的相关函数测距离。</p><p></p><div class="img_box" id="id_imagebox_15" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_15" data-original="http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d00a5_1024.jpg" data-height="656" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d00a5_1024.jpg" referrerpolicy="no-referrer"></div></div>（信号拉伸 / 压缩，导致相关函数失效）<p></p><p>好比前面所说拉扯金角大王的画像，直至找到那个 " 胖子 "，我们可不同程度地拉伸 / 压缩原始发射信号，再求之与接收信号间的相关函数。不难理解，只有拉伸 / 压缩程度恰好与真实情况一致时，相关函数最大。</p><p></p><div class="img_box" id="id_imagebox_16" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_16" data-original="http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d00a6_1024.jpg" data-height="786" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d00a6_1024.jpg" referrerpolicy="no-referrer"></div></div>（拉伸 / 压缩发射信号，直到和接收信号重合）<p></p><p>另外，<strong>根据拉伸 / 压缩程度，即可估计出目标的径向速度</strong>。假设径向速度导致的多普勒频率为 +10Hz，下图表示在无噪声和有噪声情况下，给发射信号补偿 0Hz、+5Hz、+10Hz 后的相关函数。</p><p></p><div class="img_box" id="id_imagebox_17" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_17" data-original="http://zkres1.myzaker.com/202111/619715bc8e9f0967f00d00a7_1024.jpg" data-height="595" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202111/619715bc8e9f0967f00d00a7_1024.jpg" referrerpolicy="no-referrer"></div></div>（无噪声时，补偿不同频率后的相关函数）<p></p><p></p><div class="img_box" id="id_imagebox_18" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_18" data-original="http://zkres1.myzaker.com/202111/619715bc8e9f0967f00d00a8_1024.jpg" data-height="585" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202111/619715bc8e9f0967f00d00a8_1024.jpg" referrerpolicy="no-referrer"></div></div>（信噪比为 0dB 时，补偿不同频率后的相关函数）<p></p><p>可以看出，无论有无噪声，当恰好给发射信号补偿 +10Hz 时，相关函数的峰值最大，且确实在 1 秒处。这样一来，既估计出信号传播时间（目标距离），也估计出目标的径向速度。</p><p>这种方法叫做<strong>频率补偿（Frequency Compensation）</strong>。值得说明的是，单个机器只能测目标相对机器的径向速度，无法测切向速度。若想测目标完整的速度，至少需要两个机器。</p><p></p><div class="img_box" id="id_imagebox_19" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_19" data-original="http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d00a9_1024.jpg" data-height="438" data-width="753" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d00a9_1024.jpg" referrerpolicy="no-referrer"></div></div>（两个不共线的径向速度，可定目标完整的速度）<p></p><p><strong>功能 3. 远程捉妖怪（测方位）</strong></p><p>上述两个案例，都是默认金角大王（目标对象）的方位已知，可直接拿紫金葫芦（机器）对准它。但实际中，金角大王的方位往往未知。这时，需先确定它在哪个方位。</p><p></p><div class="img_box" id="id_imagebox_20" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_20" data-original="http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d00aa_1024.jpg" data-height="360" data-width="631" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d00aa_1024.jpg" referrerpolicy="no-referrer"></div></div>此时，一个葫芦无法做到测定金角大王的方位，需多个葫芦协同完成。假设用两个紫金葫芦，但由于金角大王太远，任何一个都收不走它（吸力太小）。<p></p><p>用户可不停地旋转葫芦，直到两葫芦与金角大王的距离一样，两葫芦的吸力也一样，这时总吸力最大，即可收走金角大王。当然，金角大王不能太远，否则两葫芦的吸力太小，也就无法收走金角大王。</p><p></p><div class="img_box" id="id_imagebox_21" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_21" data-original="http://zkres1.myzaker.com/202111/619715bc8e9f0967f00d00ab_1024.jpg" data-height="354" data-width="758" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202111/619715bc8e9f0967f00d00ab_1024.jpg" referrerpolicy="no-referrer"></div></div>紫金葫芦的这个设定来源于机器在测量目标方位时所需的接收器阵列：<p></p><p>若机器想测远处目标的方位，需一个接收器阵列。当目标不在接收器阵列正前方，各接收器与目标的距离不同，信号也不重合。只有旋转接收器阵列，直到各接收器与目标距离相同时，接收器的信号才完全重合，这些信号之和才最大。</p><p>因此，根据接收器阵列的旋转角度即可测量目标方位。</p><p></p><div class="img_box" id="id_imagebox_22" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_22" data-original="http://zkres1.myzaker.com/202111/619715bc8e9f0967f00d00ac_1024.jpg" data-height="633" data-width="908" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202111/619715bc8e9f0967f00d00ac_1024.jpg" referrerpolicy="no-referrer"></div></div>（只有当目标距各接收器距离一样，即 θ=0° 时，<p></p><p>信号才能重合）</p><p>当然，实际中无需真正旋转接收器阵列。根据<strong>欧拉公式（Euler Formula）</strong>，给各接收器乘以特定的权系数，可等价于旋转接收器。（原理详情见《为什么大人物讲话需要那么多话筒？》）</p><p></p><div class="img_box" id="id_imagebox_23" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_23" data-original="http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d00ad_1024.jpg" data-height="428" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d00ad_1024.jpg" referrerpolicy="no-referrer"></div></div>（给接收器阵列乘以特定权系数，等价于旋转它）<p></p><p>假设目标位于接收器阵列右上方 30°，旋转不同的角度（实际是不同的权系数），将阵列中各接收器的信号求和。再将其结果归一化（除以求和结果的最大值），就得如下<strong>波束图（Beam Pattern）</strong>。</p><p></p><div class="img_box" id="id_imagebox_24" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_24" data-original="http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d00ae_1024.jpg" data-height="554" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619715bc8e9f0967f00d00ae_1024.jpg" referrerpolicy="no-referrer"></div></div>（信号源自 +30° 方向的波束图）<p></p><p>可以看出，波束图的峰值确实对应 +30°，准确地估计出目标方位。这种方法就称为<strong>方位估计（Direction of Arrival, DOA）</strong>。</p><p>但是，如果目标距离过远，信号衰减过多，信噪比就会过低。这时，方位估计有可能误差较大。就相当于前面所说的金角大王不能太远，否则两葫芦的吸力太小，也就无法收走金角大王。</p><p><strong>总结</strong></p><p>捉妖之路，任重道远。各路妖怪，千差万别。但只要了解了妖怪的各种特点，就可针对性地提出捉妖之法。</p><p>类似的，不同场景中的信号也复杂多变，但只要能够摸清其中的规律，便可提取有用信息，实现<strong>信号处理（Signal Processing）</strong>。</p><div id="recommend_bottom"></div><div id="article_bottom"></div>  
</div>
            