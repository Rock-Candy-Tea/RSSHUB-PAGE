
---
title: '谷歌又买算法送手机了，最新方法让背景虚化细节到头发丝，真有单反的感觉了'
categories: 
 - 新媒体
 - ZAKER
 - channel
headimg: 'https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202202/6200b7bc8e9f09669d2117e1_1024.jpg'
author: ZAKER
comments: false
date: Sun, 06 Feb 2022 23:08:08 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202202/6200b7bc8e9f09669d2117e1_1024.jpg'
---

<div>   
<p>当真是买算法送手机！</p><p>这不，谷歌又给 " 亲儿子 "Pixel 6 塞福利了，让手机抠图也能细节到头发丝。</p><p>看这效果，原本模糊的头发轮廓，咻地一下，就变成了纤毫毕现的样子！</p><p></p><div class="img_box" id="id_imagebox_0" onclick><div class="content_img_div"><img class="lazy opacity_0 zaker_gif_cache" id="img_0" data-original="http://zkres1.myzaker.com/202202/6200b7bc8e9f09669d2117e1_1024.jpg" data-gif-url="http://zkres1.myzaker.com/202202/6200b7bc8e9f09669d2117e1_raw.gif" data-height="360" data-width="640" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202202/6200b7bc8e9f09669d2117e1_1024.jpg" referrerpolicy="no-referrer"></div></div>连发丝之间的缝隙也能精准抠到。<p></p><p></p><div class="img_box" id="id_imagebox_1" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_1" data-original="http://zkres1.myzaker.com/202202/6200b7bc8e9f09669d2117e2_1024.jpg" data-height="735" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202202/6200b7bc8e9f09669d2117e2_1024.jpg" referrerpolicy="no-referrer"></div></div>这样一来，就避免了使用人像模式拍照时人物与虚化背景割裂的情况，让人物照片的纵深感更加逼真。<p></p><p>四舍五入一下，这不就是手握单反拍照？（手动狗头）</p><p><b>Alpha 遮罩 + 监督学习</b></p><p>在介绍最新的方法之前，先来了解一下过去手机的人像模式拍照到底是怎么实现的。</p><p>传统方法是使用<strong>二进制</strong>将图像分割，然后对分离出的背景进行虚化，在视觉上产生一种纵深感，由此也就能更加突出人物主体了。</p><p></p><div class="img_box" id="id_imagebox_2" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_2" data-original="http://zkres1.myzaker.com/202202/6200b7bc8e9f09669d2117e3_1024.jpg" data-height="416" data-width="640" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202202/6200b7bc8e9f09669d2117e3_1024.jpg" referrerpolicy="no-referrer"></div></div>虽然带来的视觉效果非常明显，但是在细节上的表现还不够强大。<p></p><p>由此，谷歌将常用于电影制作和摄影修图的<strong>Alpha 遮罩</strong>搬到了手机上，提出了一个全新的神经网络，名叫 "Portrait matting"。</p><p>其中，主干网络是<strong>MobileNetV3</strong>。</p><p>这是一个轻量级网络，特点是参数少、计算量小、推理时间短，在 OCR、YOLO v3 等任务上非常常见，具体结构长这样：</p><p></p><div class="img_box" id="id_imagebox_3" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_3" data-original="http://zkres1.myzaker.com/202202/6200b7bc8e9f09669d2117e4_1024.jpg" data-height="340" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202202/6200b7bc8e9f09669d2117e4_1024.jpg" referrerpolicy="no-referrer"></div></div>在推理时，Portrait matting 首先将 RGB 图像和低分辨率的 Alpha 遮罩作为输入，用 MobileNetV3 来预测分辨率更高的 Alpha 遮罩。<p></p><p>然后再利用一个浅层网络和一系列残差块，来进一步提升 Alpha 遮罩的精细度。</p><p>其中，这个浅层网络更加依赖于低层特征，由此可以得到高分辨率的结构特征，从而预测出每个像素的 Alpha 透明度。</p><p>通过这种方式，模型能够细化初始输入时的 Alpha 遮罩，也就实现了如上细节到头发丝的抠图效果。谷歌表示，神经网络 Portrait matting 可以使用 Tensorflow Lite 在 Pixel 6 上运行。</p><p></p><div class="img_box" id="id_imagebox_4" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_4" data-original="http://zkres1.myzaker.com/202202/6200b7bc8e9f09669d2117e5_1024.jpg" data-height="314" data-width="640" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202202/6200b7bc8e9f09669d2117e5_1024.jpg" referrerpolicy="no-referrer"></div></div>此外，考虑到使用 Alpha 遮罩抠图时，背光太强往往会导致细节处理不好。<p></p><p>谷歌使用了<strong>体积视频捕捉方案</strong>The Relightables 来生成高质量的数据集。</p><p>这是谷歌在 2019 年提出的一个系统，由一个球形笼子组成，装有 331 个可编程 LED 灯和大约 100 个用于捕获体积视频的摄像机。</p><p>相比于一般的数据集，这种方法可以让人物主体的光照情况与背景相匹配，由此也就能呈现更为逼真的效果。</p><p></p><div class="img_box" id="id_imagebox_5" onclick><div class="content_img_div"><img class="lazy opacity_0 zaker_gif_cache" id="img_5" data-original="http://zkres1.myzaker.com/202202/6200b7bc8e9f09669d2117e6_1024.jpg" data-gif-url="http://zkres1.myzaker.com/202202/6200b7bc8e9f09669d2117e6_raw.gif" data-height="426" data-width="639" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202202/6200b7bc8e9f09669d2117e6_1024.jpg" referrerpolicy="no-referrer"></div></div>而且这种方法还能满足人像被放置在不同场景中时，光线变化的需求。<p></p><p></p><div class="img_box" id="id_imagebox_6" onclick><div class="content_img_div"><img class="lazy opacity_0 zaker_gif_cache" id="img_6" data-original="http://zkres2.myzaker.com/202202/6200b7bc8e9f09669d2117e7_1024.jpg" data-gif-url="http://zkres2.myzaker.com/202202/6200b7bc8e9f09669d2117e7_raw.gif" data-height="436" data-width="640" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202202/6200b7bc8e9f09669d2117e7_1024.jpg" referrerpolicy="no-referrer"></div></div>值得一提的，谷歌还在这一方法中使用了监督学习的策略。<p></p><p>这是因为神经网络在抠图上的准确度和泛化能力还有待提升，而纯人工标注的工作量又太大了。</p><p>所以，研究人员利用标记好的数据集来训练神经网络，从而大量数据中来提高模型泛化能力。</p><p></p><div class="img_box" id="id_imagebox_7" onclick><div class="content_img_div"><img class="lazy opacity_0 zaker_gif_cache" id="img_7" data-original="http://zkres1.myzaker.com/202202/6200b7bc8e9f09669d2117e8_1024.jpg" data-gif-url="http://zkres1.myzaker.com/202202/6200b7bc8e9f09669d2117e8_raw.gif" data-height="420" data-width="640" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202202/6200b7bc8e9f09669d2117e8_1024.jpg" referrerpolicy="no-referrer"></div></div><b>One More Thing</b><p></p><p>用算法来优化摄影效果，其实是谷歌的传统艺能了。</p><p>比如 Pixel 4 中，就使用算法来拍摄星空。</p><p></p><div class="img_box" id="id_imagebox_8" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_8" data-original="http://zkres2.myzaker.com/202202/6200b7bc8e9f09669d2117e9_1024.jpg" data-height="1279" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202202/6200b7bc8e9f09669d2117e9_1024.jpg" referrerpolicy="no-referrer"></div></div>HDR+ 算法更不必说，曾经引发过大众热议。<p></p><p></p><div class="img_box" id="id_imagebox_9" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_9" data-original="http://zkres2.myzaker.com/202202/6200b7bc8e9f09669d2117ea_1024.jpg" data-height="194" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202202/6200b7bc8e9f09669d2117ea_1024.jpg" referrerpolicy="no-referrer"></div></div>这一功能可以在相机启动时、没有按快门的情况下连续捕捉图像，并且会缓存最近保存的 9 张。这些照片将会与按下快门后的图像一并处理，最终得到一张最优的图像。<p></p><p>同时它还能让 Pixel 在夜间模式下拍照时，不用像其他手机那样长时间停留。</p><p>由于提升摄影效果不靠硬件，谷歌也将这些功能整合到一个 APP 上，适用于各种安卓手机。</p><p>感兴趣的小伙伴，可以去试玩看看 or 分享自己的体验 ~</p><div id="recommend_bottom"></div><div id="article_bottom"></div>  
</div>
            