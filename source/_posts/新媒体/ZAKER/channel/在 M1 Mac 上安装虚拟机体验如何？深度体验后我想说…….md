
---
title: '在 M1 Mac 上安装虚拟机体验如何？深度体验后我想说……'
categories: 
 - 新媒体
 - ZAKER
 - channel
headimg: 'https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202111/619b3d2cb15ec074e2293fd1_1024.jpg'
author: ZAKER
comments: false
date: Mon, 22 Nov 2021 00:08:48 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202111/619b3d2cb15ec074e2293fd1_1024.jpg'
---

<div>   
<p>掐指算来，Apple 正式将其桌面端设备的系统架构从 X86 转移到 ARM 也已经有一年左右的时间。这个过程之中 Apple 不仅通过 Rosetta 2 巧妙地解决了原来 X86 应用的兼容性问题，与此同时越来越多的应用开发商也适时地更新应用加入了对 Apple silicon 的原生支持。但对应的则是硬件架构上带来的封闭——虽然提供了所谓的一整套虚拟化实现接口，但一年多来支持 Apple silicon 的虚拟化软件却屈指可数。</p><p>作为 Mac 平台上较为老牌的商业虚拟化软件，VMware Fusion 在推进基于 M1 架构 Mac 虚拟机应用的进展却一直不快，一直到 2021 年 9 月才推出了首个技术预览版。再对比今年四月初就已推出基于 M1 架构正式版虚拟化软件的 Parallels Desktop，VMware Fusion 对于个人用户而言最大的优势可能就是免费了。</p><p>VMware Fusion 更新之后，我也在第一时间下载了 VMware Fusion 首个基于 M1 架构技术测试版，来看看这款商业虚拟化软件在 M1 架构下的表现如何。</p><p><strong>▍</strong><strong>能安装哪些系统</strong></p><p>因为基于 ARM64 架构，因此和 Parallels Desktop 类似，VMware Fusion for Apple silicon Public Tech Preview 也只支持同架构下的系统模拟。也就是说，安装的虚拟机系统也必须是基于 ARM64 的。</p><p>但相比 Parallels Desktop 官方原生支持 Windows ARM64，VMware Fusion for Apple silicon Public Tech Preview 明确说明将不会「官方」支持 ARM64 架构的 Windows 系统，仅支持基于 ARM64 的 Linux 发行套件。官方给出的解释则是微软并没有推出零售版本的 Windows 11 ARM64，由于软件协议上的限制导致无法获得官方支持。</p><p></p><div class="img_box" id="id_imagebox_0" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_0" data-original="http://zkres1.myzaker.com/202111/619b3d2cb15ec074e2293fd1_1024.jpg" data-height="851" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202111/619b3d2cb15ec074e2293fd1_1024.jpg" referrerpolicy="no-referrer"></div></div>VMware 的这些理由听上去就相当「牵强」，不过得益于社区论坛中的讨论组信息，我依旧找到了相对应的办法来实现了对 Windows 11 ARM64 的虚拟化支持，虽然整个安装流程比起在 Parallels Desktop 上安装 Windows ARM64 要复杂的多。<p></p><p>另外由于首个技术预览版只是初步的实现了基于 M1 架构的虚拟化，因此和基于 Intel 架构的 VMware Fusion 相比，这个预览版完全不支持安装 macOS 虚拟机，所以如果你想测试 Beta 版的 macOS 可能要另辟蹊径了。</p><p><strong>▍</strong><strong>并不算友好的虚拟机安装体验</strong></p><p>对比基于 Intel 架构的 VMware Fusion，在基于 M1 的 VMware Fusion for Apple silicon Public Tech Preview 中创建虚拟机的整个操作流程都不算顺手。以往在选择安装方法中，只要在「从光盘或映像中安装」时选择好对应的系统镜像，VMware Fusion 就会自动识别系统类型。</p><p>而在这个技术预览版中则只能识别 Linux 的系统安装镜像，就更别提像 Parallels Desktop 那样直接导入微软提供的官方 Windows 11 官方虚拟机镜像操作了，因为 VMware Fusion for Apple silicon Public Tech Preview「官方」就不支持 Windows。</p><p></p><div class="img_box" id="id_imagebox_1" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_1" data-original="http://zkres1.myzaker.com/202111/619b3d2cb15ec074e2293fd2_1024.jpg" data-height="645" data-width="752" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202111/619b3d2cb15ec074e2293fd2_1024.jpg" referrerpolicy="no-referrer"></div></div>当然安装 Windows 并不是没有办法，实际上这个技术预览版中还是留了那么几个「后门」，可以通过一些小技巧来实现 Windows 的安装。<p></p><p><b><strong>安装 Windows 11 Insider Preview ARM64 虚拟机</strong></b></p><p>尽管微软已经推出了自家的 ARM 架构硬件产品 Surface Pro X，也为其第一时间升级了 Windows 11，却没有提供独立的 Windows 11 ARM64 版的 ISO 安装镜像供下载。诚然，网上现成的资源已经一搜可得，但我们<strong>并不推荐下载使用这类来源不明的安装镜像</strong>。这不仅违反许可协议，更重要的是无法保障安全。</p><p>相比之下，以变通方式从官方渠道获得安装文件是更为稳妥的选择。截至目前，具体途径主要有两种：</p><p>从微软的「统一更新平台」（Unified Update Platform，UUP）下载所需文件，然后打包为 ISO 格式镜像并安装。</p><p>下载微软针对 Hyper-V 虚拟化平台提供的 Windows 预览体验计划版（Windows Insider Preview）虚拟系统盘文件，然后转换为其他虚拟机软件可以读取的格式并挂载。</p><p>比较而言，两种方法不分轩轾：第一种方法比较快捷，可以省去安装的时间；后一种方法则比较通用，得到的镜像文件也可以留备后用。</p><p>具体的安装方法，可以阅读少数派之前发布的 这篇文章。</p><p></p><div class="img_box" id="id_imagebox_2" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_2" data-original="http://zkres2.myzaker.com/202111/619b3d2cb15ec074e2293fd3_1024.jpg" data-height="851" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619b3d2cb15ec074e2293fd3_1024.jpg" referrerpolicy="no-referrer"></div></div>通过上述步骤之后，虽然我们已经成功在 VMware Fusion for Apple silicon Public Tech Preview 中安装了 Windows 11 ARM64 ，但实际上我们打开「设备管理器」可以看到依旧缺少不少驱动，相比 Parallels Desktop 全驱动支持，显然 VMware Fusion 的 Windows ARM64 虚拟化的完成度要低上不少。<p></p><p></p><div class="img_box" id="id_imagebox_3" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_3" data-original="http://zkres1.myzaker.com/202111/619b3d2cb15ec074e2293fd4_1024.jpg" data-height="851" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202111/619b3d2cb15ec074e2293fd4_1024.jpg" referrerpolicy="no-referrer"></div></div>同样在「系统 - 关于」中其实可以看到硬件的识别情况，CPU 部分被识别成了不知道什么型号的 2GHz 主频的 CPU，但相比 Parallels Desktop 识别成 1GHz 要好上那么一点。同时由于缺少显卡驱动支持，因此显示分辨率被固定在了 1024 × 768 这样的分辨率。<p></p><p></p><div class="img_box" id="id_imagebox_4" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_4" data-original="http://zkres1.myzaker.com/202111/619b3d2cb15ec074e2293fd5_1024.jpg" data-height="900" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202111/619b3d2cb15ec074e2293fd5_1024.jpg" referrerpolicy="no-referrer"></div></div>即便如此我们也是要试试 Windows 软件的支持情况。这里我依旧拿出了 Geekbench 这款跑分软件并测试处理器性能，这一次跑分成绩显示为单核 1424 分，多核 3746 分，对比上一次在 Parallels Desktop 下测试的分数，单核的跑分要低一些，但多核成绩要更好， 考虑到这一次对虚拟机的处理器核心数进行了再次分配，或许再增加核心成绩可能会更好一些。<p></p><p></p><div class="img_box" id="id_imagebox_5" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_5" data-original="http://zkres2.myzaker.com/202111/619b3d2cb15ec074e2293fd6_1024.jpg" data-height="900" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619b3d2cb15ec074e2293fd6_1024.jpg" referrerpolicy="no-referrer"></div></div>那么真实的性能表现如何呢？虽然虚拟机中并没有识别出显卡，但我依旧想要测试一下真正的显卡部分的性能，所以选择通过 Steam 安装了一款 2D 解谜游戏来进行测试。<p></p><p>整个安装过程倒是非常顺利，但在以 1024 × 768 分辨率下运行游戏时到还算流畅，但如果使用安装教程文章中「远程桌面」的形式来全窗口下运行就会发现游戏的整体帧数变成了仅为个位数，整个游戏过程宛如在播放幻灯片——显然在没有显卡驱动的情况下，整个虚拟机在运行依赖显卡的应用或者游戏体验都不尽如人意。</p><p></p><div class="img_box" id="id_imagebox_6" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_6" data-original="http://zkres1.myzaker.com/202111/619b3d2cb15ec074e2293fd7_1024.jpg" data-height="900" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202111/619b3d2cb15ec074e2293fd7_1024.jpg" referrerpolicy="no-referrer"></div></div>所以后面的软件测试还是回归一些 win 32 应用中，首先我又一次尝试了在 Parallels Desktop 无法正常运行的招商银行专业版，此前在 Parallels Desktop 上插入 U 盾会无法被虚拟机识别，但在 VMware Fusion 会弹出选框，询问是将其分配给虚拟机还是主机，并且在选择将设备分配给虚拟机之后，招商银行客户端顺利识别到 U 盾，并成功让网银登录。这一点要比 Parallels Desktop 上无法识别要好上不少。<p></p><p></p><div class="img_box" id="id_imagebox_7" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_7" data-original="http://zkres2.myzaker.com/202111/619b3d2cb15ec074e2293fd8_1024.jpg" data-height="900" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619b3d2cb15ec074e2293fd8_1024.jpg" referrerpolicy="no-referrer"></div></div>当然由于这一次的虚拟机从 Windows 10 变成了 Windows 11 ，因此我还特意测试了一些原本的 X64 应用来尝试新系统的「跨架构转译」性能。<p></p><p>根据此前微软说法，Windows 11 ARM64 中开始初步支持 X64 软件的仿真运行，这里我选择了 Typora 在 Windows 架构下的 X64 版本，但或许是目前仿真运行的框架仍然存在问题。当我运行安装包时会直接弹出和架构相关的错误提示——看来现阶段 Windows 11 ARM64 在仿真运行上依旧和 Windows 10 ARM64 一样仅支持 32 位的 X86 应用。</p><p></p><div class="img_box" id="id_imagebox_8" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_8" data-original="http://zkres2.myzaker.com/202111/619b3d2cb15ec074e2293fd9_1024.jpg" data-height="900" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619b3d2cb15ec074e2293fd9_1024.jpg" referrerpolicy="no-referrer"></div></div>相比 Windows 10，Windows 11 中改进了 Microsoft Store，并加入了对 Android 的支持。但微软提供的虚拟机镜像却并没有包括 Microsoft Store，很像 Windows 10 LTSC 这样的无 Store 的长期支持版本。所以我也尝试通过手动下载 App 包的形式，通过 powershell 以命令的形式安装。虽然我将依赖以及安装包都顺利导入安装，但或许是本身系统就存在不完善，因此最终 Microsoft Store 会在运行时直接闪退。<p></p><p></p><div class="img_box" id="id_imagebox_9" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_9" data-original="http://zkres2.myzaker.com/202111/619b3d2cb15ec074e2293fda_1024.jpg" data-height="900" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619b3d2cb15ec074e2293fda_1024.jpg" referrerpolicy="no-referrer"></div></div>而在有关 Android 的支持上，虽然我最终成功安装并打开了 Android 子系统的设置，但在打开开发人员模式设置上弹出 BIOS 并没有打开硬件虚拟化的提示框，显然通过嵌套虚拟化的形式在 macOS 上运行 Android 系统并不可行。<p></p><p></p><div class="img_box" id="id_imagebox_10" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_10" data-original="http://zkres2.myzaker.com/202111/619b3d2cb15ec074e2293fdb_1024.jpg" data-height="900" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619b3d2cb15ec074e2293fdb_1024.jpg" referrerpolicy="no-referrer"></div></div>安装 Windows 虚拟机的一个非常重要的需求就是打开一些 IE Only 的网站——以往在 Windows 10 中我们可以直接打开 IE，但在 Windows 11 中已经完全删除了 IE，不过 Edge 保留了一个 IE Mode，可以在设置中将一些只兼容 IE 的网站加入到不兼容列表中，这样当你打开这些特定网址的时候会自动使用 IE 内核进行访问，但需要说明的是这个 IE 并非是完整的浏览器，而且也没有内置 Flash 插件，访问一些老旧的 Flash 流媒体网站可能要另辟蹊径了。<p></p><p></p><div class="img_box" id="id_imagebox_11" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_11" data-original="http://zkres1.myzaker.com/202111/619b3d2cb15ec074e2293fdc_1024.jpg" data-height="448" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202111/619b3d2cb15ec074e2293fdc_1024.jpg" referrerpolicy="no-referrer"></div></div>也正因为采用的是非官方支持的方式实现了安装 Windows 11 ARM64 虚拟机，因此一些需要通过 VMware Tools 实现的功能自然都无法使用，比如和 Parallels Desktop 的「融合模式」接近的 Unity 模式完全无法开启，可以选择的只有「传统模式」和「全屏幕模式」，而由于分辨率被固定在 1024 × 768，因此全屏幕模式的画质可谓是「惨不忍睹」。<p></p><p></p><div class="img_box" id="id_imagebox_12" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_2" data-original="http://zkres2.myzaker.com/202111/619b3d2cb15ec074e2293fdd_1024.jpg" data-height="728" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619b3d2cb15ec074e2293fdd_1024.jpg" referrerpolicy="no-referrer"></div></div>同时 VMware Tool 的缺失还导致了跨系统的复制粘贴功能失效，传输文件除了通过「远程桌面」曲线救国之外，更为高效的方式就是通过 U 盘或者移动硬盘——通过切换分配来实现跨系统的文件传输。<p></p><p>总的来说，相比 Parallels Desktop 这种完成度很高的 M1 下的 Windows ARM64 模拟，VMware Fusion for Apple silicon Public Tech Preview 的完成度只能用「基本可用」来形容。唯一可以称赞的可能就是对部分 Windows 软件的支持度更好，另外跑分上在多核的性能上也要更强大一些。而如果官方依旧不选择支持 Windows，这种非官方的支持在使用体验上真的就不太令人满意。</p><p><b><strong>安装 Ubuntu Linux</strong></b></p><p>VMware Fusion for Apple silicon Public Tech Preview 官方支持的虚拟机系统只有 Linux，当然 Linux 也需要是采用 ARM64 架构的。这里我依旧选择了桌面端 Linux 最为流行的 Ubuntu 来测试。</p><p></p><div class="img_box" id="id_imagebox_13" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_13" data-original="http://zkres1.myzaker.com/202111/619b3d2cb15ec074e2293fde_1024.jpg" data-height="927" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202111/619b3d2cb15ec074e2293fde_1024.jpg" referrerpolicy="no-referrer"></div></div>这里在「选择安装方法」这里点击「从光盘或映像安装」，选择我们已经下载好的安装镜像然后点击继续，如果没有太多的要求就可以直接点击完成即可。<p></p><p></p><div class="img_box" id="id_imagebox_14" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_14" data-original="http://zkres2.myzaker.com/202111/619b3d2cb15ec074e2293fdf_1024.jpg" data-height="900" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619b3d2cb15ec074e2293fdf_1024.jpg" referrerpolicy="no-referrer"></div></div>由于 Ubuntu Desktop 安装镜像大多内置 Live CD，因此你可以不安装到虚拟磁盘中就可以体验系统，当然你可以点击安装系统进一步体验，不过我在安装的时候出现了无法正常重启虚拟机的情况，好在强制关闭虚拟机并卸载掉安装镜像后成功进入到系统中。<p></p><p></p><div class="img_box" id="id_imagebox_15" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_15" data-original="http://zkres2.myzaker.com/202111/619b3d2cb15ec074e2293fe0_1024.jpg" data-height="900" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/619b3d2cb15ec074e2293fe0_1024.jpg" referrerpolicy="no-referrer"></div></div>和 Windows 虚拟机类似，Ubuntu 中也存在显示驱动不完善的情况，分辨率依旧被固定在了 1024 × 768，大部分的软件也都可以顺利安装使用。当然如果你不需要 Linux 的图形化界面，那么也可以使用 Ubuntu 自己的虚机方案 Multipass 来体验会更好一些。<p></p><p><strong>▍</strong><strong>总结</strong></p><p>总的来说，相比已经极为完善的 Parallels Desktop，同样属于商业化虚拟机软件的 VMware Fusion 的首个 Apple silicon 架构技术预览版的完成度真的算是差强人意。由于官方已经提前表示不会在官方层面支持 Windows 11 ARM64，这使得这款虚拟软件以往诸多不亚于 Parallels Desktop 的使用体验都无法在这个技术预览版中得到展示，而非官方的 Windows 支持虽然堪用，但距离「好用」还有着不小的距离。</p><p>当然，VMware Fusion 首个 Apple silicon 架构的技术预览版也并非一无是处，尤其是在 Windows ARM64 下的性能跑分上， VMware Fusion 的多核跑分成绩是优于 Parallels Desktop 的，并且部分 Windows 软件的支持也更好，兼容性也更佳，对于一款免费的虚拟机软件而言已经相当不错。</p><p>而如果你并不看重两个的系统的融合体验，那么免费的 VMware Fusion 或许是你在 M1 架构 Mac 下的一个新的选择，当然如果想要少折腾以及更好的虚拟化使用体验，那么付费的 Parallels Desktop 依旧是目前 M1 Mac 下虚拟化的唯一选择。</p><div id="recommend_bottom"></div><div id="article_bottom"></div>  
</div>
            