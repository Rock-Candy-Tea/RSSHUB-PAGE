
---
title: '重启就是关机再开机？你以为错了……'
categories: 
 - 新媒体
 - ZAKER
 - channel
headimg: 'https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/6195f2108e9f096fc1645d8b_1024.jpg'
author: ZAKER
comments: false
date: Wed, 17 Nov 2021 23:09:55 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/6195f2108e9f096fc1645d8b_1024.jpg'
---

<div>   
<p>前两天小编在刷 pyq 的时候，看到了一朋友发的一张与客服的对话截图：</p><p></p><div class="img_box" id="id_imagebox_0" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_0" data-original="http://zkres2.myzaker.com/202111/6195f2108e9f096fc1645d8b_1024.jpg" data-height="3248" data-width="772" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/6195f2108e9f096fc1645d8b_1024.jpg" referrerpolicy="no-referrer"></div></div>真是 Amazing！虽然先前小编就有听说<strong>重启和关机后再开机不一样</strong>，但当电脑跳出 " 需要重启 " 的弹窗时，我依旧会选择 " 稍后重启 "，然后在使用完电脑后关机，下次使用时开机，当作重启 ……<p></p><p>小编当时还天真地以为，这样<strong>既没有打断正在进行的工作</strong>，<strong>还完成了重启</strong>，可谓是做到了<strong>效率的最大化</strong>……</p><p></p><div class="img_box" id="id_imagebox_1" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_1" data-original="http://zkres2.myzaker.com/202111/6195f2118e9f096fc1645d8c_1024.jpg" data-height="718" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/6195f2118e9f096fc1645d8c_1024.jpg" referrerpolicy="no-referrer"></div></div>今天亲眼见证了两种方式所带来的不同结果，小编决心好好探索一下：<p></p><p><strong>" 重启 " 和 " 关机后再开机 " 到底有哪些不同？</strong></p><p><strong>01</strong></p><p><strong>定性来看</strong></p><p>从最表层看，当我们点击 " 重启 " 后，计算机会自动进行注销用户、关闭系统、重新打开并装载系统等操作，<strong>主机似乎停了一下，但并没有完全关闭</strong>；</p><p></p><div class="img_box" id="id_imagebox_2" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_2" data-original="http://zkres1.myzaker.com/202111/6195f2118e9f096fc1645d8e_1024.jpg" data-height="1515" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202111/6195f2118e9f096fc1645d8e_1024.jpg" referrerpolicy="no-referrer"></div></div>而选择关机再开机，不仅中途<strong>主机会完全关闭</strong>，我们还要<strong>手动</strong>按一下主机上的电源键才能再次将系统开启。<p></p><p>所以从操作手段上，关机再开机相比重启要<strong>多按一次按钮</strong>；从主机经历的过程上看，关机再开机相比重启经历得更多。Emmm，似乎说了一段废话 ……</p><p>不过通过主机呈现出的不同状态，我们应该能感觉到两者肯定是有不同的。</p><p>在主机没有完全关闭的背后，究竟还藏着什么不为人知的秘密？</p><p><strong>02</strong></p><p><strong>定量来看</strong></p><p>想要深挖计算机重启背后的秘密，就要知道计算机在重启过程中都发生了什么。</p><p>首先我们来看看，操作系统是通过什么来区分重启和关机再开机的，这里就要引入一个概念——<strong>高级配置电源管理接口</strong>（Advanced Configuration and Power Interface），简称<strong>ACPI</strong>。</p><p>ACPI 是 1997 年由多家公司共同提出、制定的操作系统电源管理、硬件配置接口，是<strong>一种开放标准</strong>。</p><p></p><div class="img_box" id="id_imagebox_3" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_3" data-original="http://zkres2.myzaker.com/202111/6195f2118e9f096fc1645d90_1024.jpg" data-height="740" data-width="884" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/6195f2118e9f096fc1645d90_1024.jpg" referrerpolicy="no-referrer"></div></div>ACPI 整体框架图<p></p><p>相信大家看到上图的感觉一定是非常头大，因为小编自己也一样（狗头）</p><p>不过我们今天不是去深挖 ACPI 的，而是看 ACPI 是如何决定计算机的重启的。</p><p></p><div class="img_box" id="id_imagebox_4" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_4" data-original="http://zkres2.myzaker.com/202111/6195f2118e9f096fc1645d91_1024.jpg" data-height="240" data-width="240" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/6195f2118e9f096fc1645d91_1024.jpg" referrerpolicy="no-referrer"></div></div>ACPI 规范定义了一台兼容 ACPI 的计算机系统可以有以下<strong>七个状态</strong>（所谓的<strong>全局状态</strong>）：<p></p><p><strong>G0 ( S0 ) </strong>：<strong>正常工作状态</strong>。计算机的正常工作状态 - 操作系统和应用程序都在运行。</p><p><strong>G1</strong>：<strong>睡眠</strong>。这个状态还可以再细分为以下几种：</p><p>（1）<strong>S0ix</strong>：<strong>Modern Standby</strong>。在这种睡眠状态下，计算机还能联网，音乐还可以播放，其余大部分应用处于暂停的状态，轻按任意键即可登录账户并进入工作状态。</p><p>（2）<strong>S1</strong>：<strong>比较耗电的睡眠模式</strong>。CPU 的所有寄存器被刷新，并且停止执行指令，但 CPU 和内存的电源会被维持。</p><p>（3）<strong>S2</strong>：一种<strong>比 S1 更深的睡眠状态</strong>，会停止 CPU 的电源供应，这种模式通常不被采用。</p><p>（4）<strong>S3</strong>：称为<strong>Suspend to RAM</strong>，简称<strong>STR</strong>。这个模式就是我们计算机上常见的 " 睡眠 "</p><p>（5）<strong>S4</strong>：称为<strong>Suspend to Disk</strong>，也是我们常说的 " 休眠 "，其和 S3 的差别在于，S4 消耗的时间更长，而且如果此时系统断电，S3 状态下没有保存的数据会丢失，而 S4 状态下不会影响。</p><p><strong>G2 ( S5 ) </strong>：称为<strong>Soft Off</strong>。此状态和下面所所述的 G3 ( S6 ) 类似，不过在这个状态下，系统仍可以被部分设备（如键盘等）唤醒。</p><p><strong>G3 ( S6 ) </strong>：称为 Mechanical Off。此状态下所有部件断电，需要再次按下电源键才能唤醒。</p><p></p><div class="img_box" id="id_imagebox_5" onclick><div class="content_img_div"><img class="lazy opacity_0 zaker_gif_cache" id="img_5" data-original="http://zkres2.myzaker.com/202111/6195f2118e9f096fc1645d93_1024.jpg" data-gif-url="http://zkres2.myzaker.com/202111/6195f2118e9f096fc1645d93_raw.gif" data-height="240" data-width="240" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/6195f2118e9f096fc1645d93_1024.jpg" referrerpolicy="no-referrer"></div></div>虽然看起来我们一直没有提到重启，但从 ACPI 规范下计算机的几种状态，我们却可以看出其不同的运行模式和唤醒模式，这和我们马上要讲到的重启都是有关联的。<p></p><p>其实你可能想不到，重启也分很多个种类，而我们平时最常接触到的重启，叫<strong>hard reset</strong>，其通过信号通知所有芯片、外围网卡等等一起进行 reset 操作，使系统<strong>大多数寄存器</strong><strong>重置到缺省值</strong>（默认值），而后 CPU 从 reset vector 开始执行程序。</p><p>在这个过程中系统不会完全断电，不会进入 G3 ( S6 ) 的状态，CPU 在其它组件的协助下执行 reset 的相关程序。</p><p>而关机再开机的过程中，系统会<strong>完全切断电源</strong>，即进入 G3 ( S6 ) 的状态，让<strong>所有寄存器</strong>均<strong>恢复到初始状态</strong>，整个过程需要执行的程序会更多，速度上也会更慢一些。</p><p><strong>03</strong></p><p>重启和关机再开机该怎么选择？</p><p>我们选择重启计算机，可能是计算机进行了<strong>软件更新或者系统更新</strong>，亦或是<strong>系统的某个部件出了问题</strong>（就好比开头处那张截图里遇到的问题）</p><p></p><div class="img_box" id="id_imagebox_6" onclick><div class="content_img_div"><img class="lazy opacity_0 zaker_gif_cache" id="img_6" data-original="http://zkres2.myzaker.com/202111/6195f2118e9f096fc1645d94_1024.jpg" data-gif-url="http://zkres2.myzaker.com/202111/6195f2118e9f096fc1645d94_raw.gif" data-height="240" data-width="240" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202111/6195f2118e9f096fc1645d94_1024.jpg" referrerpolicy="no-referrer"></div></div>一般情况下，如果是系统希望我们进行重启，那就按照要求进行重启就行。因为在软件或系统进行更新，计算机需要<strong>重新加载配置文件</strong>，这时候重启会显得更加得有针对性并且效率较高。<p></p><p>而当计算机的部分功能出现障碍时，由于重启无法保证所有寄存器都恢复到默认状态，所以就会导致重启也可能解决不了问题，所以这时候就需要通过关机的方式来尝试解决。</p><p>写到这里，小编也不禁感叹，计算机这个系统真的太过庞大，一个小小的操作背后都隐藏有如此丰富的知识点，真心佩服研究计算机这个领域的大佬们，向你们学习！</p><div id="recommend_bottom"></div><div id="article_bottom"></div>  
</div>
            