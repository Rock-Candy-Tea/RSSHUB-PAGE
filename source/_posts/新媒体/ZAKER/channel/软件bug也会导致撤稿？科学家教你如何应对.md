
---
title: '软件bug也会导致撤稿？科学家教你如何应对'
categories: 
 - 新媒体
 - ZAKER
 - channel
headimg: 'https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202205/6295ad04b15ec054236c249c_1024.jpg'
author: ZAKER
comments: false
date: Mon, 30 May 2022 22:23:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202205/6295ad04b15ec054236c249c_1024.jpg'
---

<div>   
<p>原文作者：Jeffrey M. Perkel</p><p><strong>软件 bug 很烦人。用一些简单的策略能帮你避开它们，即使出现也能更快修复。</strong></p><p>Steven Weisberg 做研究生的时候，曾经帮助开发了一座大学校园——不过，是虚拟的。这个叫做虚拟 Silcton 的软件可以测试空间导航能力，先把虚拟校园的布局教给人们，再测试他们能否答出通向特定地标的方向 [ 1 ] 。已经有十几家实验室用过这款软件了，Weisberg 说。他现在是佛罗里达大学的一名认知神经科学家。</p><p>但是在 2020 年 2 月，测试这款软件的一名同事发现了一个问题：如果你的方向离目标差九十度以上，它的计算就不准确了。" 我一开始想的是，‘好奇怪啊’。"Weisberg 回忆道，但这是真的：他的软件里有错误，可能会导致计算结果和结论不正确。</p><p>" 我们得撤回每样东西了。" 他想。</p><p></p><div class="img_box" id="id_imagebox_0" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_0" data-original="http://zkres2.myzaker.com/202205/6295ad04b15ec054236c249c_1024.jpg" data-height="816" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202205/6295ad04b15ec054236c249c_1024.jpg" referrerpolicy="no-referrer"></div></div>绘图：Project Twins<p></p><p>谈到软件的时候，就免不了要出 bug ——特别是在学术界里，代码基本都是没接受过软件开发训练的研究生和博士后写的。但<strong>使用一些简单的策略就可以尽可能避免 bug 出现，并让修正 bug 变得更简单。</strong></p><p><strong>预防</strong></p><p>卡尔顿学院的心理学家 Julia Strand 研究的是有什么方法能帮人们在比如嘈杂餐馆这类环境里能把注意力集中在对话上。2018 年，她报告说如果视觉信号——比如电脑屏幕上闪耀的亮点——和对话一同出现的时候，就可以降低理解对话的认知难度 [ 2 ] 。这意味着一个简单的手机软件就能减少这种场合下的精神疲劳。</p><p>但这是错的。Strand 写测试软件的时候不小心犯了错，两种条件下开始计时的时间不一致，用她 2020 年的说法就是 " 好像起跑之前就开始计时了一样 "。</p><p>" 我整个人都不好了。" 她写道——这个错误可能会对她的学生、合作者、项目资金和职业都产生不好的影响。好在没有：她纠正了自己的论文，保住了项目，并获得了终身教职。但为了帮助其他人免遭这种事故，她制作了一套教学资源，叫做 Error Tight [ 3 ] 。</p><p>Error Tight 里面有很多实用的建议，相当于一张计算可重复性的检查表，例如：使用版本控制，记录代码和工作流程，给文件使用标准的命名法和存储结构。</p><p>其他一些建议则是原则性的。Strand 说，一个 " 少出错 " 的实验室，应当认识到即使是最细心的研究员也会出错。因此，她的团队采用了专业软件开发中常见的一项措施：<strong>代码审核</strong>。团队会让两个人审核自己的代码，主动寻找 bug，而不是假设 bug 不存在。</p><p>阿威罗大学的心理学博士生 Joana Grave 也使用了代码审核。2021 年，Grave 发现她为心理测试编写的代码有问题，会显示错误的图片，因此撤回了一篇论文。现在，团队中有经验的程序员会为她的程序进行复查，她说，而 Grave 会重复编码任务，以保证得到的答案是一致的。</p><p>科学用软件的审核很难，加利福尼亚大学戴维斯分校的生物信息学家 C. Titus Brown 警告说，" 如果我们研究的是最前沿的东西，可能只有一个人能理解代码。如果另一个人想理解代码可能需要花上很长时间。即使在他们理解之后，也可能问不出正确的问题。"</p><p>Weisberg 在推特上分享了一些<strong>其他会有帮助的做法。</strong>例如，将代码、数据和计算环境分享到 GitHub 或 Binder 这样的网站上；保证计算结果和其他方法得到的结果吻合；尽可能用大家常用的软件库而不是自己写算法，因为那些软件库通常已经被大量科学家仔仔细细验证过了。</p><p>无论代码是从哪里来的，使用之前都要验证——然后<strong>定期再验证一遍</strong><strong>，例如升级了操作系统之后</strong>，夏威夷大学的天然产物化学家 Philip Williams 说，" 如果有任何东西改过，那最好的做法就是回过头确认所有东西都没问题，而不是假设这些黑箱总会自己吐出正确答案。"</p><p>在另一个科学家发布的代码中，Williams 和同事们找到了一个他们所说的 " 故障 "。这份代码是用来解释核磁共振数据的 [ 4 ] ，但为排序集排序时，结果却会和用户的操作系统有关。要是他们把数据对照过一个有已知 " 正确 " 答案的模型数据集的话，可能就警觉到代码运行地有问题，他说。</p><p><strong>修正</strong></p><p>如果代码不可能不出错，人们至少应在开发方式上让 bug 更容易发现。乔治华盛顿大学的机械与航空工程师 Lorena Barba 说，当她和当时的研究生 Natalia Clementi 发现 2019 年发表的一篇论文 [ 5 ] 所使用的基础代码有错时，" 往 Slack 上互传了几个小时的‘屎了’和一大堆尖叫表情包 "。但两个人快速解决了这个问题，因为 Barba 的实验室里为所有发表过的论文都做了可重复性软件包（简称 repro-pack）。</p><p>repro-pack 是一个开放获取的档案包，其中包含了分析和重现论文内容所需要的所有脚本、数据集和配置文件。Barba 的团队会把档案包上传到公开访问的数据知识库里，例如 Zenodo 和 Figshare。一旦意识到代码中存在错误——他们不小心给一个方程少加了一项—— Clementi 取回了项目的 retro-pack，修正了代码，重新跑了一遍计算，并比较了结果。要是没有 repro-pack 的话，她就得回忆那些数据到底是怎么处理的了。" 可能需要花上几个月的时间测试这代码修好了没有。" 她说。但实际上只花了两天。</p><p>Brown 则花了长得多的时间才解决了 bug。他在 2020 年尝试使用实验室的宏基因组搜索工具 spacegraphcats 来解决一个新的问题。软件中有一步过滤写得很糟糕，某些数据被忽略了。" 我开始想，‘哦天，这可得让人怀疑原先那篇论文了。’ " 他不动声色地说。Brown 修软件花了不到两周，但把所有东西重新计算一遍让项目延迟了好几个月。</p><p>为了减少解决时间，好的文档很重要。迈阿密大学的海洋学家 Milan Curcic 在 2020 年和其他人共同执笔了一篇论文 [ 6 ] ，研究台风风速对海浪的影响。作为项目的一部分，Curcic 和同事重复了同一个实验室 2004 年进行的计算，结果发现原始代码进行计算的时候使用了错误的数据文件，产生了大约 30% 的 " 误差 "。</p><p>根据 Google Scholar 显示，那篇 2004 年的论文 [ 7 ] 被引用了 800 多次，论文中的预测结果直到现在仍然被用来进行台风预报，Curcic 说。但它使用 MATLAB 写的代码从来没传到网上过。而且文档非常差，Curcic 不得不一行一行读过去，才能理解它到底是怎么回事。当他找到错误的时候，他说，" 问题是到底是我理解错了，还是代码本身就错了？"</p><p>Strand 让组内成员<strong>互相读其他人的代码</strong>，一方面是有助于编程入门，另一方面也鼓励了他们好好写文档。" 代码内应当有足够详细的说明，即使是不知道如何写代码的人也能理解代码在做什么，数据又是如何在每一步发生改变。" 她说。</p><p>她还鼓励学生<strong>将错误视为科学的一部分，而不是个人的失败。</strong>" 要是一个实验室里有‘聪明细心的人不犯错’的文化，那就容易变成不肯承认错误的实验室。" 她说。</p><p>有 bug 不意味着一定会撤稿。Barba，Brown 和 Weisberg 的错误对于结果只有很小的影响，并且都不需要修改论文。2016 年，当时还是剑桥大学遗传学研究生的 Marcos Gallego Llorente 发现了自己写的代码中的一个错误。代码研究的是 4500 年前人类在非洲的迁徙模式。当他重新分析数据的时候，最终的结论没有变化，但是它的地理影响范围发生了变化，因此需要修改论文。</p><p>当时在明尼苏达大学任职的有机化学家 Thomas Hoye 和别人合写了一篇论文，其中使用的软件正是 Williams 发现 bug 的那一个。当 Williams 联系他的时候，Hoye 说，他没有 " 特别激烈的反应 "。他和同事修正了代码，更新了线上协议，然后继续工作。</p><p>" 到最后我不禁感受到，‘这就是科学应有的方式’。" 他说，" 找到问题，回头，改进，修正，于是有了进步。"</p><div id="recommend_bottom"></div><div id="article_bottom"></div>  
</div>
            