
---
title: '一觉醒来2T硬盘数据化为乌有，背后或是两名黑客在竞争式入侵'
categories: 
 - 新媒体
 - ZAKER
 - channel
headimg: 'https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202107/60dd4a768e9f091b3a78fd11_1024.jpg'
author: ZAKER
comments: false
date: Thu, 01 Jul 2021 05:03:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202107/60dd4a768e9f091b3a78fd11_1024.jpg'
---

<div>   
<p>一觉醒来，几个 T 的硬盘数据化为乌有。</p><p>不说暗无天日吧，也至少是惨绝人寰了。</p><p>毫不夸张的说，上周四的 6 月 24 日，<strong>西部数据</strong>硬盘的 My Book Live 用户就是这样的心情。</p><p></p><div class="img_box" id="id_imagebox_0" onclick><div class="content_img_div"><img class="lazy opacity_0 zaker_gif_cache" id="img_0" data-original="http://zkres1.myzaker.com/202107/60dd4a768e9f091b3a78fd11_1024.jpg" data-gif-url="http://zkres1.myzaker.com/202107/60dd4a768e9f091b3a78fd11_raw.gif" data-height="262" data-width="300" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202107/60dd4a768e9f091b3a78fd11_1024.jpg" referrerpolicy="no-referrer"></div></div>调查后一看，果然是有黑客利用安全漏洞入侵了设备，才导致硬盘被格式化。<p></p><p>而安全技术人员深入追查后，居然还发现可能有<strong>两名黑客</strong>在互掐式入侵！</p><p>一觉醒来……诶我数据呢？</p><p><strong>西部数据 *</strong>（Western Digital）*，全球知名硬盘厂商。</p><p>机械硬盘起家，一顿操作之后把产品线扩展到了移动硬盘、固态硬盘、NAS 硬盘等多个领域。</p><p>而<strong>My Book Live</strong>就是 NAS 硬盘中的一员。它容量够大，还能<strong>远程管理硬盘中的数据</strong>，建立属于用户自己的个人云。</p><p>但对于 My Book Live 用户来说，上周四绝对是一个噩梦。</p><p>因为他们一觉醒来一脸懵逼：诶我硬盘数据怎么没了？！</p><p></p><div class="img_box" id="id_imagebox_1" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_1" data-original="http://zkres2.myzaker.com/202107/60dd4a768e9f091b3a78fd12_1024.jpg" data-height="544" data-width="1920" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202107/60dd4a768e9f091b3a78fd12_1024.jpg" referrerpolicy="no-referrer"></div></div>不仅硬盘惨遭格式化，在网页登录管理控制端时还会声明<strong>登录密码无效</strong>。<p></p><p></p><div class="img_box" id="id_imagebox_2" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_2" data-original="http://zkres2.myzaker.com/202107/60dd4a768e9f091b3a78fd13_1024.jpg" data-height="492" data-width="909" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202107/60dd4a768e9f091b3a78fd13_1024.jpg" referrerpolicy="no-referrer"></div></div>西部数据官方很快做出回应：<p></p><p></p><div class="img_box" id="id_imagebox_3" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_3" data-original="http://zkres1.myzaker.com/202107/60dd4a768e9f091b3a78fd14_1024.jpg" data-height="936" data-width="1606" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202107/60dd4a768e9f091b3a78fd14_1024.jpg" referrerpolicy="no-referrer"></div></div>由于 My Book Live 使用时是通过<strong>一根以太网线</strong>连接到本地网络的，因此这份声明可以简单概括为：<p></p><p>入侵事件我们正在查，大家先拔网线！</p><p>当然，官方也确定了这一事实：是<strong>黑客入侵</strong>导致了部分 My Book Live 设备被恢复出厂设置，数据也被全部擦除。</p><p>两个漏洞，两名黑客</p><p>能被黑客入侵，那肯定就是存在<strong>安全漏洞</strong>了。</p><p>西数技术人员在发布的公告中指出，入侵者利用的是<strong>CVE-2018-18472</strong>这一<strong>命令注入漏洞</strong>。</p><p>利用这一漏洞，可以在没有用户交互的前提下获得 root 远程命令执行的权限。</p><p>换句话说，只要知道硬盘的 IP 地址，就可以对其进行任意操作，连登陆密码也不需要破解。</p><p>但问题是，这一漏洞在<strong>2018 年</strong>就已经由安全技术人员发现并公开了，只是官方一直没有采取相应措施。</p><p></p><div class="img_box" id="id_imagebox_4" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_4" data-original="http://zkres2.myzaker.com/202107/60dd4a768e9f091b3a78fd15_1024.jpg" data-height="273" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202107/60dd4a768e9f091b3a78fd15_1024.jpg" referrerpolicy="no-referrer"></div></div>西部数据对此的解释是：<p></p><p>CVE-2018-18472 这份漏洞报告影响的是 2010 年至 2012 年间销售的 My Book Live 设备。这些产品从 2014 年开始就已不再销售，也不再被我们的软件支持生命周期所覆盖。</p><p>就像是对官方的回应，5 天之后，技术人员从这次被黑的两台设备中再次发现了<strong>第二个漏洞</strong>！</p><p></p><div class="img_box" id="id_imagebox_5" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_5" data-original="http://zkres2.myzaker.com/202107/60dd4a768e9f091b3a78fd17_1024.jpg" data-height="692" data-width="1374" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202107/60dd4a768e9f091b3a78fd17_1024.jpg" referrerpolicy="no-referrer"></div></div><strong>△</strong>从这两台设备中提取的日志文件<p></p><p>这个新漏洞存在于一个包含了执行重置的 PHP 脚本的文件中，这一脚本允许用户恢复所有的默认配置，并擦除存储在设备上的所有数据。</p><p>但现在，用于<strong>保护</strong>这一重置命令的代码被<strong>注释</strong>掉了：</p><p>function post ( $urlPath, $queryParams = null, $ouputFormat = 'xml' ) &#123;</p><p> // if ( !authenticateAsOwner ( $queryParams ) ) </p><p> // &#123;</p><p> // header ( "HTTP/1.0 401 Unauthorized" ) ;</p><p> // return;</p><p> // &#125;</p><p>技术人员在分析上述两份日志文件之后，认为这两台设备受到了利用<strong>未授权重置</strong>这一新漏洞的攻击。</p><p>这就出现了一个很令安全人员困扰的问题：</p><p>明明已经通过「命令注入漏洞」获得 root 权限了，为什么还要再使用「未授权重置漏洞」进行擦除和重置呢？</p><p>再返回看看第一个漏洞，它在入侵设备时增加了这几行代码：</p><p>function put ( $urlPath, $queryParams=null, $ouputFormat='xml' ) &#123;</p><p> parse_str ( file_get_contents ( "php://input" ) , $changes ) ;</p><p> $langConfigObj = new LanguageConfiguration ( ) ;</p><p> if ( !isset ( $changes [ "submit" ] ) || sha1 ( $changes [ "submit" ] ) != "56f650e16801d38f47bb0eeac39e21a8142d7da1" ) </p><p> &#123;</p><p> die ( ) ;</p><p> &#125;</p><p>这样修改后，只要没有与某一特定的加密 SHA1 哈希值相对应的密码，任何人都不能利用这一漏洞。</p><p>而在其他被黑的设备中，被入侵修改的文件则使用了对应其他哈希值的<strong>不同密码</strong>。</p><p>因此，安全公司 Censys 的首席技术官 Derek Abdin 提出了一个假设：</p><p>在黑客 A 通过命令注入漏洞让设备感染恶意软件，形成了一种「僵尸网络」后，第二位黑客 B 又利用未授权重置这一新漏洞，实行了大规模的重置和擦除。</p><p>黑客 B 明显是一位<strong>竞争者</strong>，他试图控制、或是破坏黑客 A 的僵尸网络。</p><p>这次入侵可能是<strong>两名黑客</strong>在互掐！</p><p>官方：将为受攻击用户提供数据恢复服务</p><p>不管两位黑客出于什么目的在互扯头花，西数 My Book Live 用户已经表示真的遭不住了。</p><p>发出第一声呐喊的用户的 2T 数据已经木大了。</p><p></p><div class="img_box" id="id_imagebox_6" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_6" data-original="http://zkres1.myzaker.com/202107/60dd4a768e9f091b3a78fd18_1024.jpg" data-height="662" data-width="1682" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202107/60dd4a768e9f091b3a78fd18_1024.jpg" referrerpolicy="no-referrer"></div></div>而相同遭遇的用户还有更多：<p></p><p></p><div class="img_box" id="id_imagebox_7" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_7" data-original="http://zkres1.myzaker.com/202107/60dd4a768e9f091b3a78fd19_1024.jpg" data-height="244" data-width="1536" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202107/60dd4a768e9f091b3a78fd19_1024.jpg" referrerpolicy="no-referrer"></div></div>很多网友也对这西数硬盘的不作为感到极其不满：<p></p><p>3 年了，一个 REC 漏洞还是没修好。这意味着你硬盘上所有的数据都有可能被泄露给攻击者。</p><p></p><div class="img_box" id="id_imagebox_8" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_8" data-original="http://zkres2.myzaker.com/202107/60dd4a768e9f091b3a78fd1a_1024.jpg" data-height="474" data-width="1418" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202107/60dd4a768e9f091b3a78fd1a_1024.jpg" referrerpolicy="no-referrer"></div></div>西部数据官方对此作何回应呢？<p></p><p>他们在 29 日表示，将从 7 月份开始对数据丢失的用户提供数据恢复服务。</p><p></p><div class="img_box" id="id_imagebox_9" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_9" data-original="http://zkres2.myzaker.com/202107/60dd4a768e9f091b3a78fd1b_1024.jpg" data-height="606" data-width="1892" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202107/60dd4a768e9f091b3a78fd1b_1024.jpg" referrerpolicy="no-referrer"></div></div>而在做了技术分析之后，西部数据认为 " 没有任何证据表明西部数据的云服务、固件更新服务器或客户凭证被泄露 "。<p></p><p>同时也表示：</p><p>在这次攻击中被利用的漏洞仅限于 My Book Live 系列，该系列于 2010 年推向市场，并在 2015 年获得最后的固件更新。这些漏洞不影响我们目前的 My Cloud 产品系列。</p><p></p><div class="img_box" id="id_imagebox_10" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_10" data-original="http://zkres1.myzaker.com/202107/60dd4a768e9f091b3a78fd1c_1024.jpg" data-height="852" data-width="1904" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202107/60dd4a768e9f091b3a78fd1c_1024.jpg" referrerpolicy="no-referrer"></div></div>最后，他们还提到了一项以旧换新计划，用于支持 My Book Live 用户升级到 My Cloud 设备。<p></p><div id="recommend_bottom"></div><div id="article_bottom"></div>  
</div>
            