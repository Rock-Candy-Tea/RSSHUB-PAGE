
---
title: '一块自制自行车码表从B站火到GitHub，稚晖君点赞，网友催量产'
categories: 
 - 新媒体
 - ZAKER
 - channel
headimg: 'https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb485_1024.jpg'
author: ZAKER
comments: false
date: Fri, 23 Jul 2021 00:08:22 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb485_1024.jpg'
---

<div>   
<p>民间又有高手 " 出没 "：</p><p>一位 " 技术宅 " 自制的<strong>自行车码表</strong>在 B 站火了，短短几天引来<strong>20 多万人</strong>围观！</p><p></p><div class="img_box" id="id_imagebox_0" onclick><div class="content_img_div"><img class="lazy opacity_0 zaker_gif_cache" id="img_0" data-original="http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb485_1024.jpg" data-gif-url="http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb485_raw.gif" data-height="353" data-width="600" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb485_1024.jpg" referrerpolicy="no-referrer"></div></div>速度、距离、时间、卡路里、航向显示的记录功能自不用多提，还可显示经纬度和海拔。<p></p><p>它还配有<strong>离线地图</strong>，可显示你的<strong>实时位置与骑行轨迹</strong>：</p><p></p><div class="img_box" id="id_imagebox_1" onclick><div class="content_img_div"><img class="lazy opacity_0 zaker_gif_cache" id="img_1" data-original="http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb486_1024.jpg" data-gif-url="http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb486_raw.gif" data-height="300" data-width="300" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb486_1024.jpg" referrerpolicy="no-referrer"></div></div>在汽车、<strong>高铁</strong>上也能测速！<p></p><p></p><div class="img_box" id="id_imagebox_2" onclick><div class="content_img_div"><img class="lazy opacity_0 zaker_gif_cache" id="img_2" data-original="http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb487_1024.jpg" data-gif-url="http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb487_raw.gif" data-height="620" data-width="532" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb487_1024.jpg" referrerpolicy="no-referrer"></div></div>切换界面查看电量、骑行记录、GPS 定位、传感器等系统数据，相当丝滑：<p></p><p></p><div class="img_box" id="id_imagebox_3" onclick><div class="content_img_div"><img class="lazy opacity_0 zaker_gif_cache" id="img_3" data-original="http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb488_1024.jpg" data-gif-url="http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb488_raw.gif" data-height="661" data-width="600" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb488_1024.jpg" referrerpolicy="no-referrer"></div></div>再看细节上，<strong>UI 设计</strong>可是比市面上不少码表都要高级！（佳明：你直接报我身份证得了）<p></p><p>这要是告诉我它是某个大牌而非自制的（除了壳很明显以外），我可能都信了。</p><p>网友们也是纷纷 respect，称赞它打爆那些溢价离谱的码表：</p><p></p><div class="img_box" id="id_imagebox_4" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_4" data-original="http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb489_1024.jpg" data-height="160" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb489_1024.jpg" referrerpolicy="no-referrer"></div></div>" 完成度离谱 "，是不是很想要链接？<p></p><p></p><div class="img_box" id="id_imagebox_5" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_5" data-original="http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb48a_1024.jpg" data-height="218" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb48a_1024.jpg" referrerpolicy="no-referrer"></div></div>好家伙，连<strong>稚晖君</strong>都被吸引过来了（后来佳明也现身评论区 " 自黑 "，见后文）：<p></p><p></p><div class="img_box" id="id_imagebox_6" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_6" data-original="http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb48b_1024.jpg" data-height="191" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb48b_1024.jpg" referrerpolicy="no-referrer"></div></div>诶？稚晖君的真 · 自行车和这个码表是不是可以搭配使用？<p></p><p></p><div class="img_box" id="id_imagebox_7" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_7" data-original="http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb48c_1024.jpg" data-height="327" data-width="768" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb48c_1024.jpg" referrerpolicy="no-referrer"></div></div>除了在 B 站上很火，这个码表项目也登上了今日 GitHub 热榜：<p></p><p></p><div class="img_box" id="id_imagebox_8" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_8" data-original="http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb48d_1024.jpg" data-height="133" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb48d_1024.jpg" referrerpolicy="no-referrer"></div></div>而据网友粗略估算这个码表的硬件成本大概<strong>不到 300</strong>，如此优秀的它，是如何 DIY 出来的呢？<p></p><p><b>如何 DIY 一个自行车码表</b></p><p>X-TRACK 软件架构示意图如下：由 HAL、Framework 和 APP 三层组成，Framework 为核心。</p><p></p><div class="img_box" id="id_imagebox_9" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_9" data-original="http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb48e_1024.jpg" data-height="381" data-width="426" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb48e_1024.jpg" referrerpolicy="no-referrer"></div></div><strong>HAL 层</strong>负责底层芯片驱动和传感器原始数据获取；<p></p><p><strong>Framework</strong>又包括三个模块，分别负责图形渲染、页面生命周期管理和消息分发处理。</p><p>其中消息框架模块提供数据的分发和处理。</p><p>使用<strong>订阅发布机制</strong>，将 HAL 层的接收到的传感器数据发布，转发给对应的订阅者进行数据处理。</p><p>以 GPS 为例，GPS 数据处理节点每秒读取一次卫星数据，然后发起 publish，由消息框架将 GPS 数据推送给订阅者。</p><p>在运动数据处理节点中订阅 GPS 数据。在收到 GPS 数据之后，运动数据处理节点根据 GPS 数据计算总里程，平均速度等信息。在表盘页面中，拉取运动数据节点信息，将其显示在表盘页面中。</p><p>ps. 地图软件为 GPXSee。</p><p>实现主要有<strong>7</strong>步：</p><p>1、首先是<strong>硬件设计</strong>。</p><p>用 AD（Altium Designer）进行 PCB 板线路设计：</p><p></p><div class="img_box" id="id_imagebox_10" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_10" data-original="http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb48f_1024.jpg" data-height="573" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb48f_1024.jpg" referrerpolicy="no-referrer"></div></div>电路图和 PCB 文件也可以在 GitHub 详细查看。<p></p><p>2、然后就是被大家纷纷夸赞的 UI 设计：</p><p>设计软件是 Adobe AI。</p><p></p><div class="img_box" id="id_imagebox_11" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_11" data-original="http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb490_1024.jpg" data-height="521" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb490_1024.jpg" referrerpolicy="no-referrer"></div></div>3、接着在 3ds MAX 上进行外壳设计：<p></p><p></p><div class="img_box" id="id_imagebox_12" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_12" data-original="http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb491_1024.jpg" data-height="545" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb491_1024.jpg" referrerpolicy="no-referrer"></div></div>4、再然后就是软件设计了：<p></p><p>编程语言为 C++：</p><p></p><div class="img_box" id="id_imagebox_13" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_13" data-original="http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb492_1024.jpg" data-height="593" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb492_1024.jpg" referrerpolicy="no-referrer"></div></div>5、再使用模拟器直接在 PC 上模拟效果。<p></p><p></p><div class="img_box" id="id_imagebox_14" onclick><div class="content_img_div"><img class="lazy opacity_0 zaker_gif_cache" id="img_14" data-original="http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb493_1024.jpg" data-gif-url="http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb493_raw.gif" data-height="321" data-width="600" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb493_1024.jpg" referrerpolicy="no-referrer"></div></div>码表的图形界面采用了免费开源的 GUI 图形库<strong>LVGL</strong>。<p></p><p>成品使用了许多 LVGL 提供的基础控件，例如在地图页面的轨迹显示中使用了 line 控件，地图显示使用了 image 控件，在表盘页面的页面切换选择，使用了 button 控件。</p><p>6、调试调试，没问题就可进行编译下载。</p><p>这里用的是<strong>Keil</strong>。</p><p></p><div class="img_box" id="id_imagebox_15" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_15" data-original="http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb494_1024.jpg" data-height="602" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb494_1024.jpg" referrerpolicy="no-referrer"></div></div>7、最后，将最终程序烧录到单片机 ( AT32F403ACGU7 ) 上运行，再连上 ST-Link 进行调试。<p></p><p>成功！</p><p></p><div class="img_box" id="id_imagebox_16" onclick><div class="content_img_div"><img class="lazy opacity_0 zaker_gif_cache" id="img_16" data-original="http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb495_1024.jpg" data-gif-url="http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb495_raw.gif" data-height="354" data-width="600" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb495_1024.jpg" referrerpolicy="no-referrer"></div></div><strong>另外可能很多人不知道</strong>，UP 主用的这个 AT32 系列 MCU 是<strong>国产</strong>设计（重庆雅特力），可替代意法半导体 STM32F103 系列，主频更高、RAM 更大。<p></p><p>全部硬件配置如下：</p><p></p><div class="img_box" id="id_imagebox_17" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_17" data-original="http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb496_1024.jpg" data-height="565" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb496_1024.jpg" referrerpolicy="no-referrer"></div></div>内存有<strong>32GB</strong>，存下一个 1GB 多的北京地图不是事儿。<p></p><p>另外，除了开头提到的功能以外，它还支持地图缩放、计步功能、导出标准 GPX 格式的轨迹、RTC 自动根据 GPS 校准、掉电自动保存数据 ( JSON 格式文件 ) 、不过续航为 4 小时 ( 持续工作，始终亮屏 ) ……</p><p></p><div class="img_box" id="id_imagebox_18" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_18" data-original="http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb497_1024.jpg" data-height="540" data-width="960" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb497_1024.jpg" referrerpolicy="no-referrer"></div></div>整个设计的硬件和软件部分都<strong>已开源</strong>。<p></p><p><b>连 " 竞品 " 佳明都来点赞</b></p><p>怎么样？学会（废）了吗？</p><p>不少围观群众得这样一个<strong>UI 颜值爆表、功能丰富</strong>的自行车码表如果真的能有厂商合作生产的话，那还有<strong>佳明</strong>这些产品什么事儿？</p><p>有人在评论区 @Garmin 佳明，没想到还真把它引过来了：这下好了，<strong>连 " 竞品 " 都给 X-TRACK 点赞</strong>。</p><p></p><div class="img_box" id="id_imagebox_19" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_19" data-original="http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb499_1024.jpg" data-height="219" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb499_1024.jpg" referrerpolicy="no-referrer"></div></div>有人还算了一笔账，在某宝按教程买这些配件一共需要<strong>不到 300 元</strong>，比佳明上千的价格是便宜不少（虽然续航能力低一点）。<p></p><p></p><div class="img_box" id="id_imagebox_20" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_20" data-original="http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb49a_1024.jpg" data-height="334" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb49a_1024.jpg" referrerpolicy="no-referrer"></div></div><strong>催量产的网友真的非常非常多</strong>，不过真要商业化的话，除了续航能力，有<strong>自行车骑行爱好者</strong>认为还需支持 ant+、踏频、心率、功率设备的连接、防尘防水等功能，以及考虑现在的屏幕在阳光下的能见度等问题。<p></p><p></p><div class="img_box" id="id_imagebox_21" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_21" data-original="http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb49b_1024.jpg" data-height="197" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb49b_1024.jpg" referrerpolicy="no-referrer"></div></div><div class="img_box" id="id_imagebox_22" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_22" data-original="http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb49c_1024.jpg" data-height="160" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202107/60fa63b68e9f090a0f2cb49c_1024.jpg" referrerpolicy="no-referrer"></div></div>不知道未来，X-TRACK 还会不会被继续增加或改进呢？<p></p><p>毕竟毕业于<strong>电子信息专业</strong>的 UP 主说自己也算半个自行车爱好者。</p><p>最后，除了这个梦幻般的自行车码表，他还用 STM32 自制过智能手表、航模遥控器（被网友称赞可以直接拿来卖的程度）。</p><p></p><div class="img_box" id="id_imagebox_23" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_23" data-original="http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb49d_1024.jpg" data-height="486" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202107/60fa63b68e9f090a0f2cb49d_1024.jpg" referrerpolicy="no-referrer"></div></div>视频链接：<p></p><p>https://www.bilibili.com/video/BV1GB4y1K7VV</p><div id="recommend_bottom"></div><div id="article_bottom"></div>  
</div>
            