
---
title: '除了颗粒、主控，这个标准你买SSD也可以留意！'
categories: 
 - 新媒体
 - ZAKER
 - channel
headimg: 'https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202207/62d67d558e9f093ca145b0e4_1024.jpg'
author: ZAKER
comments: false
date: Tue, 19 Jul 2022 06:22:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202207/62d67d558e9f093ca145b0e4_1024.jpg'
---

<div>   
<p></p><div class="img_box" id="id_imagebox_0" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_0" data-original="http://zkres2.myzaker.com/202207/62d67d558e9f093ca145b0e4_1024.jpg" data-height="153" data-width="554" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202207/62d67d558e9f093ca145b0e4_1024.jpg" referrerpolicy="no-referrer"></div></div>现在 M.2 接口、NVMe 协议的 SSD 可以说是目前大家购买的主流了。每当有选购相关的话题，大家关心的都是颗粒、主控及相关的连续读写、随机读写性能。其实影响固态硬盘整体性能发挥的技术因素还有不少，比如我们今天要讲到的 NVMe 版本。<p></p><p><strong>什么是 NVMe？</strong></p><p>NVMe 大家说得很多，有些说是接口，有些说是协议。其实 NVMe（Non-Volatile Memory Express）是一种用于访问存储在基于 PCIe 的固态硬盘上的数据的规范，直译过来就是 " 非易失性内存主机控制器接口规范 "，说是协议，姑且也算对，说是接口，那么就不太准确了，至少应该说是 NVMe 规范 / 协议接口。</p><p>在 NVMe 之前，SSD 通过 SATA 或 SAS 接口连接到计算机，并使用高级主机控制器接口（AHCI）进行通信。这些技术是为传统的机械硬盘设计的，它在数据的随机访问和数据的一次性传输速度方面有实际的物理限制。到 2010 年末，主流消费者的固态硬盘被 SATA 所赋予的相对有限的吞吐量所制约。在专业和消费者市场上，这种限制是通过创造通过 PCI Express 连接的固态硬盘（通过接口卡或者直插 PCIe X1 接口）来克服的。</p><p></p><div class="img_box" id="id_imagebox_1" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_1" data-original="http://zkres1.myzaker.com/202207/62d67d558e9f093ca145b0e5_1024.jpg" data-height="199" data-width="554" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202207/62d67d558e9f093ca145b0e5_1024.jpg" referrerpolicy="no-referrer"></div></div>早期的 PCIe 接口的固态硬盘不仅速度提升不高，而且做启动盘操作繁琐<p></p><p>这种策略只允许制造商克服 SATA 固有的 6Gb/s（750MB/s）的速度限制，在考虑到总线其他资源开销的情况下，固态硬盘的最高速度为 550MB/s 左右。然而，这些硬盘要么使用 AHCI 而保留了几乎所有的随机 I/O 性能瓶颈，要么使用定制的接口规范，厂商之间的操作差异很大。由于这些驱动器的定制设计，使用时需要设备特定的软件驱动程序；因此，早期的 PCI Express 固态硬盘如当时的 Intel 910 等，在 Windows 上作为启动驱动器使用时比较复杂，或者在供应商不支持的情况下与 Linux 一起使用。</p><p>NVM Express 消除了这些问题，它提供了一个通用数据交互接口供硬盘使用，从一开始就是为了利用闪存颗粒的独特属性，特别是为了优化性能和减少延迟。其结果是存储性能的显著提高，使 NVMe 成为需要最高水平的吞吐量和效率的 SSD 的理想选择。</p><p><strong>为什么 NVMe 很重要？</strong></p><p>NVMe 使硬盘制造商能够创建更高性能的硬盘，而不受 SATA/SAS 和 AHCI 的吞吐量瓶颈的限制，这些都是为传统机械硬盘设计的。在机械硬盘上处理多个文件时，硬盘磁头必须在硬盘的各个部分高速移动，以便向磁盘读写数据。虽然缓存和其他固件技术掩盖了这一点，但机械硬盘实际上一次只能处理一个文件。</p><p>因此，为机械硬盘设计的 AHCI 只有一个命令队列，每个队列最多只能有 32 条命令。由于这种机械限制不存在于固态硬盘（SSD 没有磁头），AHCI 的这一属性是非常不利的。NVMe 通过允许多达 65535 个命令队列来解决这个问题，每个队列最多可以有 65536 个命令。 ( 这是由规范提供的，尽管实际利用这一点需要主控的支持）。</p><p></p><div class="img_box" id="id_imagebox_2" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_2" data-original="http://zkres1.myzaker.com/202207/62d67d558e9f093ca145b0e6_1024.jpg" data-height="709" data-width="554" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202207/62d67d558e9f093ca145b0e6_1024.jpg" referrerpolicy="no-referrer"></div></div>NVMe 提供了真正多任务、大队列的命令控制和数据吞吐能力<p></p><p>同样，NVMe 提供 2048 个 MSI-X 中断，而 AHCI 提供一个没有转向的中断。NVMe 的系统开销也同样减少了，因为 4K 命令参数在一次获取中执行，而 AHCI 需要两次主机 RAM 的获取。此外，NVMe 不需要为并行指令锁定。</p><p>从整体上看，NVMe 具有闪存优先的理念，不限制驱动器使用闪存的固态属性，这反过来又导致了更高的性能。</p><p><strong>NvME 1.3 vs NvME 1.4，改变了什么？</strong></p><p>NVMe 规范的最新版本是 1.4 版，于 2021 年 3 月发布。该规范的 1.3 版本是在 2017 年 4 月发布的。NVMe 1.4 中的一些重大变化包括。</p><p>支持主机内存缓冲区访问命令集，它允许主机直接访问 NVMe 设备的内存缓冲区，减少延迟和 CPU 开销。</p><p>新的端到端数据保护命令集，允许主机指定写入 NVMe 设备的数据应在整个数据路径中免受错误影响。</p><p>被动状态电源管理的增强，包括一个新的主机控制热管理功能，允许主机控制 NVMe 设备的温度阈值和冷却策略。</p><p>支持 Package Symphony Flow Control，它允许在菊花链配置中连接多个 NVMe 设备，并在它们之间进行流量控制。</p><p>一个新的写错误恢复通知基元，允许主机在写操作中发生错误时得到通知。</p><p>NVMe 1.4 还包括其他一些小的变化和改进。</p><p>简单来说，相比 NVMe1.3，NVMe 1.4 有三项重大改良，包括：NVM Sets、PLM ( Predictable Latency Mode ) 及 RRL ( Read Recovery Level ) 。NVM Sets 改良分工机制，举例 1 个 4TB SSD ( 内部 4 通道传输 ) ，但 NVMe 1.3 只看成单一 4TB 空间，只将数据随意写入 4TB 任何区域，导致各信道互相挤塞。</p><p>但凭 NVMe 1.4 的 NVM Sets 新指令，4TB 将划分为 4 个 1TB 空间，每条通道只独立存取 1 个 1TB 空间。NVM Sets 有效缩短延迟时间，兼减少刷写损耗。</p><p></p><div class="img_box" id="id_imagebox_3" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_3" data-original="http://zkres2.myzaker.com/202207/62d67d558e9f093ca145b0e7_1024.jpg" data-height="249" data-width="554" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202207/62d67d558e9f093ca145b0e7_1024.jpg" referrerpolicy="no-referrer"></div></div>NVM Sets 读写更有序，有效缩短延迟，提高颗粒寿命<p></p><p>而另一个大改动，莫过于 NVMe1.4 真正支持 PCIe4.0 了，这使得 SSD 的读写性能得到了进一步的提升。</p><p></p><div class="img_box" id="id_imagebox_4" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_4" data-original="http://zkres2.myzaker.com/202207/62d67d558e9f093ca145b0e8_1024.jpg" data-height="311" data-width="554" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202207/62d67d558e9f093ca145b0e8_1024.jpg" referrerpolicy="no-referrer"></div></div>聪明的主控厂商早就在宣传 NVMe1.4 标准作为卖点了<p></p><p><strong>因此，目前市面上的 NVMe 硬盘主流虽然是 1.3 和 1.4 版本，也有了 2.0 版本（顶级 PCIe4.0 产品），但总的来说，即使是 PCIe3.0 产品，NVMe1.4 版本的产品，相对老旧的 1.2 和 1.3 规范的产品，不仅速度提高，而且延迟缩短、颗粒的寿命更长、温度控制更为灵活</strong></p><p><strong>· END ·</strong></p><div id="recommend_bottom"></div><div id="article_bottom"></div>  
</div>
            