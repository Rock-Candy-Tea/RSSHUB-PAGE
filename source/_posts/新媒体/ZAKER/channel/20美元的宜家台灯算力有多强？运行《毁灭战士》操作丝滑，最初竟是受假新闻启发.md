
---
title: '20美元的宜家台灯算力有多强？运行《毁灭战士》操作丝滑，最初竟是受假新闻启发'
categories: 
 - 新媒体
 - ZAKER
 - channel
headimg: 'https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202106/60c82abc8e9f0961692ddcf5_1024.jpg'
author: ZAKER
comments: false
date: Tue, 15 Jun 2021 03:07:49 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202106/60c82abc8e9f0961692ddcf5_1024.jpg'
---

<div>   
<p></p><div class="img_box" id="id_imagebox_0" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_0" data-original="http://zkres1.myzaker.com/202106/60c82abc8e9f0961692ddcf5_1024.jpg" data-height="594" data-width="1280" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202106/60c82abc8e9f0961692ddcf5_1024.jpg" referrerpolicy="no-referrer"></div></div><strong>大数据文摘出品</strong><p></p><p><strong>作者：Caleb</strong></p><p>每逢佳节逛宜家的你，或许知道这款神奇的 LED 电灯。</p><p>这款售价大约 20 美元的电灯<strong>TRÅDFRI</strong>，可以随时进行调暗或调亮、设定想要的颜色，以及<strong>拿来玩《毁灭战士》</strong>。</p><p>是的，你没有看错。</p><p>因为 TRÅDFRI 的颜色调整功能，可以想象，其内部拥有一个计算机系统，而只要对其稍加改造，《毁灭战士》什么的，根本不在话下。</p><p>还是不信？实机演示一段：</p><p></p><div class="img_box" id="id_imagebox_1" onclick><div class="content_img_div"><img class="lazy opacity_0 zaker_gif_cache" id="img_1" data-original="http://zkres2.myzaker.com/202106/60c82abc8e9f0961692ddcf6_1024.jpg" data-gif-url="http://zkres2.myzaker.com/202106/60c82abc8e9f0961692ddcf6_raw.gif" data-height="338" data-width="600" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202106/60c82abc8e9f0961692ddcf6_1024.jpg" referrerpolicy="no-referrer"></div></div><div class="img_box" id="id_imagebox_2" onclick><div class="content_img_div"><img class="lazy opacity_0 zaker_gif_cache" id="img_2" data-original="http://zkres1.myzaker.com/202106/60c82abc8e9f0961692ddcf7_1024.jpg" data-gif-url="http://zkres1.myzaker.com/202106/60c82abc8e9f0961692ddcf7_raw.gif" data-height="338" data-width="600" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202106/60c82abc8e9f0961692ddcf7_1024.jpg" referrerpolicy="no-referrer"></div></div>怎么样，除了屏幕略小以外，整个<strong>操作手感还是相当丝滑</strong>的。<p></p><p>接下来就和文摘菌一起来揭秘这个神奇的电灯吧 ~</p><p><strong>被假新闻 " 欺骗 "，要完成《毁灭战士》的夙愿</strong></p><p>这个项目的来源还要追溯到一条假新闻。</p><p>去年多家外媒报道，有人成功地在验孕棒上运行了《毁灭战士》。</p><p>但其实，整个项目是在 PC 端运行的，所以作者并没有将其移植到验孕棒或 Cortex M4 板上。</p><p></p><div class="img_box" id="id_imagebox_3" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_3" data-original="http://zkres1.myzaker.com/202106/60c82abc8e9f0961692ddcf8_1024.jpg" data-height="381" data-width="689" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202106/60c82abc8e9f0961692ddcf8_1024.jpg" referrerpolicy="no-referrer"></div></div>但不管怎么样，这不失为一个有创意的想法。<p></p><p>在一次偶然的机会下，next-hack 的一个团队发现宜家 TRÅDFRI LED1923R5 灯具有很好的 <strong>MCU</strong>，以及 96+12kB 的<strong>RAM</strong>（总共 108kB），<strong>1MB 的闪存</strong>，和一个<strong>80MHz 的 Cortex M33</strong>。</p><p>更准确地说，这款新的宜家灯使用来自 Silicon Labs 的 MGM210L 射频模块，该模块是基于 EFR32MG21 射频微控制器。</p><p></p><div class="img_box" id="id_imagebox_4" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_4" data-original="http://zkres1.myzaker.com/202106/60c82abc8e9f0961692ddcf9_1024.jpg" data-height="705" data-width="700" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202106/60c82abc8e9f0961692ddcf9_1024.jpg" referrerpolicy="no-referrer"></div></div>台灯到货后，要用切割器将灯的塑料顶部弹出，同时还需要切割将其固定到位的胶水。之后，取下两个小螺丝，用小钳子取下 LED PCB。<p></p><p>然后就可以移除金属散热器，以露出高压 AC/DC 转换器，用钳子将它从灯中拉出。拆卸完成后大概是这样：</p><p></p><div class="img_box" id="id_imagebox_5" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_5" data-original="http://zkres1.myzaker.com/202106/60c82abc8e9f0961692ddcfa_1024.jpg" data-height="480" data-width="640" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202106/60c82abc8e9f0961692ddcfa_1024.jpg" referrerpolicy="no-referrer"></div></div>但其实，文摘菌要在这里拆个台，TRÅDFRI 台灯不是必需的，我们需要的只是它内部的<strong>MGM210L 模块</strong>而已。（工具灯实锤）<p></p><p>然后，需要从 PCB 中取出电源线和 IO 线。为此，他们使用了一块原型板，将其成型为接受带有 RF 模块的 DC-DC 板。为了后续安装的方便也可以在上面做一个切口。</p><p></p><div class="img_box" id="id_imagebox_6" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_6" data-original="http://zkres2.myzaker.com/202106/60c82abc8e9f0961692ddcfb_1024.jpg" data-height="516" data-width="640" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202106/60c82abc8e9f0961692ddcfb_1024.jpg" referrerpolicy="no-referrer"></div></div>电线连接到三个接头，将模块插入另一个原型板，该板将包含该项目的所有其他内容。<p></p><p></p><div class="img_box" id="id_imagebox_7" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_7" data-original="http://zkres2.myzaker.com/202106/60c82abc8e9f0961692ddcfc_1024.jpg" data-height="696" data-width="800" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202106/60c82abc8e9f0961692ddcfc_1024.jpg" referrerpolicy="no-referrer"></div></div>接着，还需要把电线直接焊接到 DC-DC 板触点上，3 个母头用于连接射频板，连接 2 针接头的音频部分。从背部看，已经变得眼花缭乱了。<p></p><p>然后是键盘的部分：</p><p></p><div class="img_box" id="id_imagebox_8" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_8" data-original="http://zkres2.myzaker.com/202106/60c82abc8e9f0961692ddcfe_1024.jpg" data-height="768" data-width="1024" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202106/60c82abc8e9f0961692ddcfe_1024.jpg" referrerpolicy="no-referrer"></div></div>毕竟这还只是一个电灯，还需要额外配备一个<strong>显示器</strong>，在这里选择廉价的彩色 1.8 英寸 TFT 160×128 SPI 显示器。该显示器具有兼容的 ILI9163 或 ST7735S 控制器，并且它们需要以 16MHz 运行。<p></p><p>由于最终处理器不足以存储 WAD 文件（共享软件版本至少为 4.1MB）。综合考虑之下，他们选用了<strong>外部 SPI 存储器</strong>。</p><p>在输入设备上，由于《毁灭战士》需要最少的键数是 7 或 8，74HC165 移位寄存器是不二之选。</p><p></p><div class="img_box" id="id_imagebox_9" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_9" data-original="http://zkres1.myzaker.com/202106/60c82abc8e9f0961692ddcff_1024.jpg" data-height="306" data-width="329" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202106/60c82abc8e9f0961692ddcff_1024.jpg" referrerpolicy="no-referrer"></div></div>硬件原理图如下：<p></p><p></p><div class="img_box" id="id_imagebox_10" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_10" data-original="http://zkres2.myzaker.com/202106/60c82abc8e9f0961692ddd00_1024.jpg" data-height="505" data-width="1141" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202106/60c82abc8e9f0961692ddd00_1024.jpg" referrerpolicy="no-referrer"></div></div><strong>距离《毁灭战士》正式运行还有亿步</strong><p></p><p>在编程上，该器件使用任何兼容 JLink 的 SWD 编程器进行编程。在编程结束时，可能会收到错误消息提示，直接忽略就行。</p><p></p><div class="img_box" id="id_imagebox_11" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_11" data-original="http://zkres1.myzaker.com/202106/60c82abc8e9f0961692ddd01_1024.jpg" data-height="351" data-width="364" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202106/60c82abc8e9f0961692ddd01_1024.jpg" referrerpolicy="no-referrer"></div></div>在 GitHub 中，存在已经转换好的共享软件<strong>DOOM1.wad</strong>（mg21DOOM1.wad）。如果 WAD 与共享软件版本不同，需要将其转换为与此端口兼容的特定格式。<p></p><p></p><div class="img_box" id="id_imagebox_12" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_12" data-original="http://zkres1.myzaker.com/202106/60c82abc8e9f0961692ddd02_1024.jpg" data-height="1108" data-width="2676" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202106/60c82abc8e9f0961692ddd02_1024.jpg" referrerpolicy="no-referrer"></div></div>GitHub 链接：<p></p><p>https://github.com/next-hack/MG21DOOM</p><p>转换后的 WAD 需要通过 YMODEM 协议发送到内部闪存。对于此，还需要一个 USB 到 TTL UART 的转换器。</p><p>上传 wad 的时候，记得打开设备电源，然后按住 "use""change weapon" 和 "alt"，以启动 Ymodem 接收。</p><p></p><div class="img_box" id="id_imagebox_13" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_13" data-original="http://zkres1.myzaker.com/202106/60c82abc8e9f0961692ddd03_1024.jpg" data-height="480" data-width="640" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202106/60c82abc8e9f0961692ddd03_1024.jpg" referrerpolicy="no-referrer"></div></div>想要了解安装过程中的细节部分，以及注意事项，可以点击下方链接：<p></p><p>https://next-hack.com/index.php/2021/06/12/lets-port-doom-to-an-ikea-tradfri-lamp/</p><p><strong>《毁灭战士》，永远的神！</strong></p><p>在黑客界，有一项由来已久的传统，那就是在看似不能运行《毁灭战士》的设备上，尝试去运行。</p><p>目前，这款开源射击游戏已经可以在广告牌卡车、烤面包机以及灯泡等各种设备上运行了。</p><p>比如 2014 年，澳大利亚黑客团队在 ATM 机上成功运行了《毁灭战士》。该团队使用 ATM 机上自带的控制按钮，没有借助外置控制器，不过他们仍然需要自制的软件和特定的电路板来将取款按键映射成开枪按键。</p><p>这些人还希望能利用上 ATM 机上的其它硬件部分，比如用菜单按钮更换武器、用数字键盘来控制人物移动或者让小票打印机打印出玩家完成的游戏关卡。</p><p></p><div class="img_box" id="id_imagebox_14" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_14" data-original="http://zkres1.myzaker.com/202106/60c82abc8e9f0961692ddd04_1024.jpg" data-height="646" data-width="1280" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202106/60c82abc8e9f0961692ddd04_1024.jpg" referrerpolicy="no-referrer"></div></div>同年，英国一个研究小组利用佳能 PIXMA 打印机的 web 界面修改打印机的固件，从而运行了这款经典游戏。<p></p><p></p><div class="img_box" id="id_imagebox_15" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_15" data-original="http://zkres2.myzaker.com/202106/60c82abc8e9f0961692ddd05_1024.jpg" data-height="517" data-width="690" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202106/60c82abc8e9f0961692ddd05_1024.jpg" referrerpolicy="no-referrer"></div></div>但这也引起了人们的担忧。该作者就表示，" 如果你能在打印机上运行《毁灭战士》，那么你也可以做一些更恶意的事。毕竟在公司环境中，没有人会去怀疑打印机。"<p></p><p>安全和发明脑洞，似乎无法兼得，对于如此矛盾，你怎么看，欢迎在评论区留言讨论 ~</p><div id="recommend_bottom"></div><div id="article_bottom"></div>  
</div>
            