
---
title: '数学大神攻克猜字游戏Wordle，求解算法成绩逼近理论极限，连信息论都用上了'
categories: 
 - 新媒体
 - ZAKER
 - channel
headimg: 'https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb13d_1024.jpg'
author: ZAKER
comments: false
date: Wed, 09 Feb 2022 00:07:38 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb13d_1024.jpg'
---

<div>   
<p>免费猜字小游戏<strong>Wordle</strong>正在席卷全球，火到以数百万美元的价格被收购，全球玩家数量也突破了 200 万。</p><p>如果你在微博、微信等地方看到这些神神秘秘的方块，那就是 Wordle 玩家在分享自己当日的战绩了。</p><p></p><div class="img_box" id="id_imagebox_0" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_0" data-original="http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb13d_1024.jpg" data-height="1950" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb13d_1024.jpg" referrerpolicy="no-referrer"></div></div>根据统计，大多数人类玩家需要猜测 4 次或以上才能取得胜利。<p></p><p>比如，2 月 5 日的题目在当天 30 多万份晒出战绩的玩家中，只有<strong>27%</strong>能在三次以内猜中。</p><p>这个游戏自然也成了程序员们的新竞技场，他们写出各种算法来比拼谁用的步数最少。</p><p>这其中，百万粉数学科普大神<strong>3Blue1Brown</strong>的玩法更为硬核——</p><p>他不光写出了求解算法，还用数学知识一步步优化至<strong>逼近理论极限</strong>，最终成绩平均<strong>3.138</strong>次猜测就能获胜。</p><p>并且他用统计办法找出了与人类常见策略不同的最佳开局单词<strong>crane</strong>。</p><p></p><div class="img_box" id="id_imagebox_1" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_1" data-original="http://zkres1.myzaker.com/202202/620364f88e9f09209c4cb13e_1024.jpg" data-height="697" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202202/620364f88e9f09209c4cb13e_1024.jpg" referrerpolicy="no-referrer"></div></div>他像往常一样把这个过程整理成视频分享出来，不仅展示了算法，还把其中涉及的信息论、统计学知识讲得明明白白。<p></p><p>视频发布一天之内就有上百万播放，围观的网友也纷纷在评论区表达了赞叹。</p><p>为了游戏点进来，为了精彩的信息论知识留下，太酷了！</p><p></p><div class="img_box" id="id_imagebox_2" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_2" data-original="http://zkres1.myzaker.com/202202/620364f88e9f09209c4cb13f_1024.jpg" data-height="224" data-width="818" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202202/620364f88e9f09209c4cb13f_1024.jpg" referrerpolicy="no-referrer"></div></div>他用了什么样的算法，理论极限又是怎么算出来的？下面一起来看看。<p></p><p><b>从每一次猜测中获得最多信息</b></p><p>Wordle 的游戏规则很简单，玩家需要猜出程序每天指定的一个 5 位英语单词谜底。</p><p>玩家可以随意提交一个英语单词，但必须是字典里有的，不能胡乱拼写。</p><p>如果字母在谜底中出现且位置对了就显示<strong>绿色</strong>，字母出现了但位置不对就显示<strong>黄色</strong>，字母在答案的单词中没出现就显示<strong>灰色</strong>。</p><p>根据反馈信息再进行下一轮猜测，在 6 次尝试之内猜出就算赢。</p><p></p><div class="img_box" id="id_imagebox_3" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_3" data-original="http://zkres1.myzaker.com/202202/620364f88e9f09209c4cb140_1024.jpg" data-height="552" data-width="374" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202202/620364f88e9f09209c4cb140_1024.jpg" referrerpolicy="no-referrer"></div></div>如何让步数尽量少？<p></p><p>3Blue1Brown 的总体思路是尽量<strong>从每一次猜测中获得最多的信息</strong>。</p><p>他先是找来了 26 个字母在英语文本中出现频率的统计数据，尝试在前两次尝试中覆盖最多高频字母。</p><p>比如<strong>other+nails</strong>的组合，就可以覆盖出现频率最高的 11 个字母中的 10 个，如果运气好就能确定下来一些字母。</p><p>即使这些字母都没出现依然是一种信息量很大的反馈，10 个常用字母都没出现的单词数量就大大减少了，让下一步猜测更简单。</p><p></p><div class="img_box" id="id_imagebox_4" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_4" data-original="http://zkres1.myzaker.com/202202/620364f88e9f09209c4cb141_1024.jpg" data-height="584" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202202/620364f88e9f09209c4cb141_1024.jpg" referrerpolicy="no-referrer"></div></div>不过在尝试过程中，又出现了新的问题。<p></p><p>同样用<strong>nails</strong>这几个字母，也可以拼成<strong>snail</strong>，这两种拼写顺序之间的差异，仅依据字母频率数据是无法衡量的。</p><p>下面需要一种新的计算方法。</p><p><b>如何计算信息量？</b></p><p>原版 Wordle 游戏里有一个数量<strong>12972</strong>的总单词列表，都能作为猜测词使用。</p><p>另外有一个<strong>2315</strong>个单词的列表，只有这些单词会出现在答案里 ( 据说是游戏作者的女朋友挑选的 ) 。</p><p>因为游戏是用 Javascript 写的，数据都在客户端，这些数据直接可以从源码里找到。</p><p>不过 3Blue1Brown 觉得让程序利用答案列表的话有点像作弊了，他果断<strong>给自己加大难度</strong>，只考虑总单词列表。</p><p>游戏中，每一次猜测都能从 12972 个单词中排除一些结果。</p><p>比如猜测<strong>weary</strong>，如果 W 位置正确同时 A 出现了，那么剩下的可选单词只剩 58 个。</p><p></p><div class="img_box" id="id_imagebox_5" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_5" data-original="http://zkres1.myzaker.com/202202/620364f88e9f09209c4cb142_1024.jpg" data-height="564" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202202/620364f88e9f09209c4cb142_1024.jpg" referrerpolicy="no-referrer"></div></div>这样对同一个猜测，从 5 个字母全没出现到 5 个字母全对的各种反馈的概率都可以计算出来。<p></p><p></p><div class="img_box" id="id_imagebox_6" onclick><div class="content_img_div"><img class="lazy opacity_0 zaker_gif_cache" id="img_6" data-original="http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb143_1024.jpg" data-gif-url="http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb143_raw.gif" data-height="506" data-width="900" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb143_1024.jpg" referrerpolicy="no-referrer"></div></div>这样，问题就变成了如何评估各种反馈情况包含的信息量。<p></p><p>3Blue1Brown 选择的办法，就是利用信息论祖师爷香农提出的<strong>信息熵</strong>概念。</p><p>信息熵描述的是事件的不确定性，单位就是大家知道的<strong>比特</strong>。</p><p>理解起来也不难，可以用<strong>扔硬币</strong>来解释。</p><p>扔 1 枚硬币只会出现正、反两种结果，而且概率相等。</p><p>扔 2 枚硬币就有正正、正反、反正、反反这 4 种结果，扔 3 枚有 8 种情况等等，也就是扔 n 次有 2 的 n 次方种结果。</p><p>当一个事件有两种结果且概率都是 1/2，其不确定性相当于<strong>扔 1 枚硬币</strong>，此时信息熵定义为<strong>1 比特</strong>。</p><p>如果一个事件有 8 种结果且概率都是 1/8，就相当于<strong>扔 3 枚硬</strong>币，此时信息熵就是<strong>3 比特</strong>。</p><p>信息量和信息熵的数量相等、意义相反，相当于衡量一则信息能消除多少不确定性。</p><p>设每种结果的概率为 p，信息量为 I，有如下等式。</p><p></p><div class="img_box" id="id_imagebox_7" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_7" data-original="http://zkres1.myzaker.com/202202/620364f88e9f09209c4cb144_1024.jpg" data-height="218" data-width="318" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202202/620364f88e9f09209c4cb144_1024.jpg" referrerpolicy="no-referrer"></div></div>稍作变换，可以得到信息量的计算公式。<p></p><p></p><div class="img_box" id="id_imagebox_8" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_8" data-original="http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb145_1024.jpg" data-height="668" data-width="382" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb145_1024.jpg" referrerpolicy="no-referrer"></div></div>回到 Wordle 游戏上，一次猜测获得的信息量可以用每种可能情况的概率与对应信息量相乘、再把结果相加来计算，也就是求数学期望。<p></p><p>以猜测<strong>weary</strong>为例，计算出获得的信息量为 4.9 比特。</p><p>代表这则信息消除的不确定性比扔 5 个硬币的不确定性少一点。</p><p></p><div class="img_box" id="id_imagebox_9" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_9" data-original="http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb146_1024.jpg" data-height="94" data-width="536" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb146_1024.jpg" referrerpolicy="no-referrer"></div></div>算法思路有了，接下来就可以交给程序，计算出所有 12972 个单词的能消除的信息熵。<p></p><p></p><div class="img_box" id="id_imagebox_10" onclick><div class="content_img_div"><img class="lazy opacity_0 zaker_gif_cache" id="img_10" data-original="http://zkres1.myzaker.com/202202/620364f88e9f09209c4cb147_1024.jpg" data-gif-url="http://zkres1.myzaker.com/202202/620364f88e9f09209c4cb147_raw.gif" data-height="506" data-width="900" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202202/620364f88e9f09209c4cb147_1024.jpg" referrerpolicy="no-referrer"></div></div>用同样的方法，可以再计算第二步、第三步猜测能消除的信息熵。<p></p><p></p><div class="img_box" id="id_imagebox_11" onclick><div class="content_img_div"><img class="lazy opacity_0 zaker_gif_cache" id="img_11" data-original="http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb148_1024.jpg" data-gif-url="http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb148_raw.gif" data-height="506" data-width="900" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb148_1024.jpg" referrerpolicy="no-referrer"></div></div>根据这些计算结果，程序就可以在每一次猜测时，选择所有可能单词里能消除信息熵最多的那个。<p></p><p>比如第一次猜<strong>slate</strong>获得一次反馈，此时还剩下 578 个单词可选，其中选<strong>ramin</strong>能消除最多的信息熵，这样一步一步猜直到猜出正确答案。</p><p></p><div class="img_box" id="id_imagebox_12" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_12" data-original="http://zkres1.myzaker.com/202202/620364f88e9f09209c4cb149_1024.jpg" data-height="606" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202202/620364f88e9f09209c4cb149_1024.jpg" referrerpolicy="no-referrer"></div></div>接下来，拿这个程序在所有 2135 种可能的答案上跑一遍，平均用了 4.124 步猜出正确答案。<p></p><p></p><div class="img_box" id="id_imagebox_13" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_13" data-original="http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb14a_1024.jpg" data-height="752" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb14a_1024.jpg" referrerpolicy="no-referrer"></div></div>3Blue1Brown 觉得这个成绩还不够好，至少没有超过普通人类玩家水平，还需要继续优化。<p></p><p><b>最终成绩逼近理论极限</b></p><p>成绩不够好的一个问题出在每个单词作为答案的可能性其实并不相同。</p><p>像 aahed aalii aargh 这种偏门单词虽然在允许猜测的总单词列表里，但并不在答案列表的 2315 个单词里。</p><p>找一个典型的例子，当遇到<strong>abbas</strong>（人名，阿巴斯）和<strong>abyss</strong>（深渊）二选一时，如果程序能知道 abyss 是常用词，就可以省下一步。</p><p></p><div class="img_box" id="id_imagebox_14" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_14" data-original="http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb14b_1024.jpg" data-height="616" data-width="964" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb14b_1024.jpg" referrerpolicy="no-referrer"></div></div>下一步改进方向就是引入词频统计数据，这样的数据集可以从 Wolfram 上找到。<p></p><p></p><div class="img_box" id="id_imagebox_15" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_15" data-original="http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb14c_1024.jpg" data-height="505" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb14c_1024.jpg" referrerpolicy="no-referrer"></div></div>这里遇到一个问题，比如<strong>which</strong>和<strong>braid</strong>的出现频率相差 1000 倍，但都可以算是常见单词，出现在答案列表里的可能性相差不大。<p></p><p></p><div class="img_box" id="id_imagebox_16" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_16" data-original="http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb14d_1024.jpg" data-height="721" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb14d_1024.jpg" referrerpolicy="no-referrer"></div></div>解决办法就是用<strong>Sigmoid 函数</strong>做处理，让更多数据靠近 0 或 1。<p></p><p></p><div class="img_box" id="id_imagebox_17" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_17" data-original="http://zkres1.myzaker.com/202202/620364f88e9f09209c4cb14e_1024.jpg" data-height="593" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202202/620364f88e9f09209c4cb14e_1024.jpg" referrerpolicy="no-referrer"></div></div>将处理后的词频数据与前面的信息量计算结果相结合，得到优化后的信息量计算方法。<p></p><p></p><div class="img_box" id="id_imagebox_18" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_18" data-original="http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb14f_1024.jpg" data-height="614" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb14f_1024.jpg" referrerpolicy="no-referrer"></div></div>在实际游戏中，也把信息量与词频结合考虑，就能让程序更倾向于选择常见单词。<p></p><p>比如在下面的情况中，<strong>words</strong>和<strong>dorms</strong>的信息量并不是最高的，但因为词频较高所以优先考虑。</p><p></p><div class="img_box" id="id_imagebox_19" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_19" data-original="http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb150_1024.jpg" data-height="619" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb150_1024.jpg" referrerpolicy="no-referrer"></div></div>优化后的成绩到了<strong>3.601</strong>，平均节省了半步。<p></p><p>如果加大计算量，每次根据<strong>两步搜索</strong>的结果选择单词可以进一步提高成绩。</p><p></p><div class="img_box" id="id_imagebox_20" onclick><div class="content_img_div"><img class="lazy opacity_0 zaker_gif_cache" id="img_20" data-original="http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb151_1024.jpg" data-gif-url="http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb151_raw.gif" data-height="506" data-width="900" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb151_1024.jpg" referrerpolicy="no-referrer"></div></div>而且根据两步搜索的计算结果，3Blue1Brown 认为能获得最大信息量的开局单词是<strong>crane</strong>。<p></p><p>此外还可以让程序知道具体哪 2315 个单词真的是在答案列表里的，用上所有这些技巧后，成绩再次提升到<strong>3.438</strong>。</p><p></p><div class="img_box" id="id_imagebox_21" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_21" data-original="http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb152_1024.jpg" data-height="505" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb152_1024.jpg" referrerpolicy="no-referrer"></div></div>实际上这个成绩的理论极限就不可能低于 3。<p></p><p>2315 种答案意味着有 11.17 比特的不确定性，而暴力搜索后，前两步能获得的最大信息量在 10.01 比特，还剩下 1.16。</p><p>也就是说第三步的难度比二选一还要难一点，没有算法能保证每次都正确。</p><p></p><div class="img_box" id="id_imagebox_22" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_22" data-original="http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb153_1024.jpg" data-height="612" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb153_1024.jpg" referrerpolicy="no-referrer"></div></div>不过 3Blue1Brown 还是找到了新办法进一步提升成绩。<p></p><p>让程序记住每个正确答案，并在下一局中把猜过的单词排除出去，最终成绩到达<strong>3.138</strong>，逼近了理论极限。</p><p></p><div class="img_box" id="id_imagebox_23" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_23" data-original="http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb154_1024.jpg" data-height="691" data-width="1080" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb154_1024.jpg" referrerpolicy="no-referrer"></div></div>看完整个视频后，有网友表示学到的信息论知识比上课学到的还多。<p></p><p>也有很多人对到底哪个单词才是最佳开局展开了讨论。</p><p>虽然两步搜索的结果是 crane，不过 3Blue1Brown 也不确定对于人类玩家来说是不是最佳开局单词。</p><p>毕竟实际游戏中人类很难像程序一样算出第二步的情况。</p><p>对于人类来说，<strong>soare</strong>和<strong>tares</strong>都是很好的开局。</p><p><b>还能挑战变态模式</b></p><p>程序写好后，3Blue1Brown 还做了更多尝试，比如原版 Wordle 的困难难度，成绩是 3.562，</p><p>还有一个 Wordle 变态版 Absurdle，这个版本不再限制尝试次数，但变态之处在于游戏 AI 会与玩家对抗。</p><p>玩家猜测一次后正确答案就会变化，在所有反馈可能性中挑选信息熵最大的那个，就像是在躲避玩家的猜测。</p><p>Absurdle 的作者之前还开发过一个变态版俄罗斯方块，每次都给你最不需要的方块。</p><p>对于这个变态版 Wordle，结果 3Blue1Brown 的程序也挑战成功。</p><p></p><div class="img_box" id="id_imagebox_24" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_24" data-original="http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb155_1024.jpg" data-height="566" data-width="806" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202202/620364f88e9f09209c4cb155_1024.jpg" referrerpolicy="no-referrer"></div></div>如果你看到这里也想挑战这个变态版试试，可以复制下方链接或点击阅读原文～<p></p><p>原版游戏地址：</p><p>https://www.powerlanguage.co.uk/wordle</p><p>变态版游戏地址：</p><p>https://qntm.org/files/absurdle/absurdle.html</p><div id="recommend_bottom"></div><div id="article_bottom"></div>  
</div>
            