
---
title: '苹果探索RISC-V架构，说好的All in ARM没了'
categories: 
 - 新媒体
 - ZAKER
 - channel
headimg: 'https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202109/6138ab2f8e9f094ee00a60c0_1024.jpg'
author: ZAKER
comments: false
date: Thu, 09 Sep 2021 06:23:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202109/6138ab2f8e9f094ee00a60c0_1024.jpg'
---

<div>   
<p>作为全球有数的科技行业巨头，苹果向芯片领域全面进军早已不是什么新闻了，如今从 iPhone 上的 A 系列芯片，到 Mac 与 iPad Pro 上的 Apple Silicon M1 也已经开始全面铺开。而现在，苹果方面或许又将视线投向了 RISC-V 架构。日前根据苹果官网的招聘信息显示，其正在招募 RISC-V 高级程序员，并且除了需要精通 RISC-V 外，还要掌握 ARM NEON 微架构方面的知识。</p><p></p><div class="img_box" id="id_imagebox_0" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_0" data-original="http://zkres2.myzaker.com/202109/6138ab2f8e9f094ee00a60c0_1024.jpg" data-height="349" data-width="600" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202109/6138ab2f8e9f094ee00a60c0_1024.jpg" referrerpolicy="no-referrer"></div></div>据相关信息显示，被录用的程序员将加入苹果的 " 矢量数值事业部 "，而该部门则在是负责设计、加强和改进在 iOS、macOS、watchOS、tvOS 上运行的各种嵌入式子系统。因此有观点认为，这表明苹果方面或正在研发 RISC-V 指令集架构解决方案，并且试图开始部署 RISC-V 架构产品。<p></p><p>相比于诞生于 1978 年的 x86 和 1985 年的 ARM，RISC-V 在这一领域可以说是个不折不扣的新秀。2010 年，加州大学伯克利分校的研究团队设计并推出了一套基于 BSD 协议许可的免费开放指令集架构 RISC-V，其原型芯片于 2013 年 1 月成功流片。而为了更好地推广 RISC-V，非盈利性组织 RISC-V 基金会（RISC-V Foundation）则在 2015 年成立。</p><p></p><div class="img_box" id="id_imagebox_1" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_1" data-original="http://zkres2.myzaker.com/202109/6138ab2f8e9f094ee00a60c1_1024.jpg" data-height="368" data-width="600" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202109/6138ab2f8e9f094ee00a60c1_1024.jpg" referrerpolicy="no-referrer"></div></div>据悉，RISC-V 是基于精简指令集（RISC）的开源指令集体系架构（ISA）。并且作为新兴产物，没有历史包袱的 RISC-V 可以说是当下业界潮流的代表，其架构短小精悍、指令数目少而精；采用模块化设计思路，基础的指令集由 RISC-V 基金会成员表决通过后以标准的形式发布，扩展指令集可定制自有灵活架构；基于 BSD 协议许可的全面开源。<p></p><p>事实上在许多业内人士看来，苹果进入 RISC-V 领域的原因，是因为其几乎从来不将鸡蛋放到同一个篮子里。从三星和台积电的芯片代工，到 Intel 与高通的基带等一系列事件，都证明了苹果从不会将 " 身家性命 " 交给合作伙伴，而是永远最相信自己手里攥着的东西。</p><p></p><div class="img_box" id="id_imagebox_2" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_2" data-original="http://zkres2.myzaker.com/202109/6138ab2f8e9f094ee00a60c2_1024.jpg" data-height="398" data-width="600" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202109/6138ab2f8e9f094ee00a60c2_1024.jpg" referrerpolicy="no-referrer"></div></div>如今，在苹果方面已经开始将桌面端产品从 x86 迁移到 ARM 的情况下，ARM 或许就从当年的亲密战友，变成了需要 " 提防 " 的对象。特别是在 NVIDIA 试图收购 ARM 这件事或将发生的情况下，NVIDIA 想要即当裁判员又当运动员的玩法或使得苹果如芒刺在背，也让其全面拥抱 ARM 的不确定性显露了出来。<p></p><p>当然，如今 NVIDIA 收购 ARM 能不能成还两说，但即便是抛开远期战略，当下苹果也有发力 RISC-V 的现实需求。此前，苹果方面自 A13 开始，就在芯片内部加入了被称为 AMX 的矩阵协处理器，也就是苹果的 " 机器学习加速器 "，作为补集集成于 CPU 中，获得了 6 倍于前代产品的矩阵加速性能。</p><p></p><div class="img_box" id="id_imagebox_3" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_3" data-original="http://zkres1.myzaker.com/202109/6138ab2f8e9f094ee00a60c3_1024.jpg" data-height="573" data-width="600" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202109/6138ab2f8e9f094ee00a60c3_1024.jpg" referrerpolicy="no-referrer"></div></div>由于 CPU、协处理器和加速器通常可以在共享的数据总线上交换数据，再加上苹果将 AMX 的调用和加速框架进行了绑定，只有需要加速框架库（Acclerate.framework）的程序才会去进行调用。所以带来的效果，就是对于涉及矩阵处理的较小工作负载时，使用 AMX 会优于 NPU，并且不需要耗费额外的电量。<p></p><p>既然 AMX 如此优秀，苹果方面为什么不去大张旗鼓地进行宣传，反而是将其模糊化，甚至官方文档中都没有出现相关描述呢？这或许是因为为了确保 ARM 生态不出现碎片化的问题，并保持一致的软件开发环境。</p><p>事实上，ARM 方面并不允许 ARM 体系的被许可人使用自定义指令扩展其指令集架构，唯一有此豁免的是 Cortex-M33 之后的产品。但不知是因为苹果 " 给的实在太多 "、还是其他原因，ARM 默认了苹果的这一操作。</p><p></p><div class="img_box" id="id_imagebox_4" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_4" data-original="http://zkres2.myzaker.com/202109/6138ab2f8e9f094ee00a60c4_1024.jpg" data-height="331" data-width="600" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202109/6138ab2f8e9f094ee00a60c4_1024.jpg" referrerpolicy="no-referrer"></div></div>但在 M1 发布后，有研究人员逆向工程了这款芯片，并公开了 AMX 的存在。也就使得现在的情况变为了，苹果在 ARM 授权体系里搞特殊的玩法 " 东窗事发 "，那么既然苹果可以这样做，那么同为大客户的高通和华为又行不行呢？所以苹果现在使用 RISC-V，在一定程度上可能也是给 ARM 一个台阶下。<p></p><p>那么问题就来了，现在普遍被认为只能执行简单任务的 RISC-V，能够胜任替代 AMX 的工作吗？答案是可以的。当下，RISC-V 基本只在相对简单的嵌入式领域逐步商业化，而没有涉及到高性能处理器领域，这是因为相比于 x86 和 ARM，RISC-V 没有与之相匹配的生态。</p><p></p><div class="img_box" id="id_imagebox_5" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_5" data-original="http://zkres2.myzaker.com/202109/6138ab2f8e9f094ee00a60c5_1024.jpg" data-height="239" data-width="600" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202109/6138ab2f8e9f094ee00a60c5_1024.jpg" referrerpolicy="no-referrer"></div></div>但这并不意味着 RISC-V 只能处理简单的问题，本身主打模块化、可扩展和开源的 RISC-V 就有着无限的可能，而标准版的 RISC-V 现在无法实现高性能的关键是没有出色的 SIMD（单指令多数据）指令（SIMD 是用来帮助 CPU 实现数据并行，提高运算效率、主要来加速多媒体数据），再加上开源生态不看重碎片化问题，也使得 RISC-V 在近几年里一直在物联网设备里打转。<p></p><p>至于说，为什么 RISC-V 在很长一段时间里没有用上 SIMD，用 RISC-V 基金会的董事会副主席、Google Brain 团队成员 David Patterson 就曾经给出过答案，是因为 "SIMD 指令被认为有害 "。而他给出的证据，是自 1978 年以来，IA-32 指令集已从 80 条增加到约 1400 条，主要是由 SIMD 推动，但 RISC-V 被设计出来的初衷是 " 大道至简 "，可需要不停迭代的 SIMD 却会让指令集变得越来越臃肿。</p><p></p><div class="img_box" id="id_imagebox_6" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_6" data-original="http://zkres2.myzaker.com/202109/6138ab2f8e9f094ee00a60c6_1024.jpg" data-height="409" data-width="600" src="https://cors.zfour.workers.dev/?http://zkres2.myzaker.com/202109/6138ab2f8e9f094ee00a60c6_1024.jpg" referrerpolicy="no-referrer"></div></div>目前，RISC-V 基金会的给出的方向是扩展 Vector 指令集，支持向量处理。然而，向量处理器（VFP）的处理机制有些类似于飞机，虽然运载量小但是速度快，而 SIMD 则更像轮船，尽管速度慢可是运载量大。所以对于苹果这样的企业来说，即便 SIMD 不完美，但是从商业的角度出发，选择 " 船运 " 而不是 " 空运 " 是理所当然的一件事，这也恰好契合如今的行业现状。<p></p><p>其实苹果试图将 RISC-V 与 SIMD 结合在一起的想法，已经如实地反应在了招聘信息中，要求具备 ARM NEON 技术知识，其实 NEON 就是 ARM 架构中的 SIMD 指令。所以将 SIMD 指令加入到 RISC-V，或许是苹果希望打造的异构计算体系，试图用 RISC-V 来代替 AMX，既解决了与 ARM 的纠葛，也满足了自身对于分散风险的需求。</p><p></p><div class="img_box" id="id_imagebox_7" onclick><div class="content_img_div perview_img_div"><img class="lazy opacity_0 " id="img_7" data-original="http://zkres1.myzaker.com/202109/6138ab2f8e9f094ee00a60c7_1024.jpg" data-height="322" data-width="600" src="https://cors.zfour.workers.dev/?http://zkres1.myzaker.com/202109/6138ab2f8e9f094ee00a60c7_1024.jpg" referrerpolicy="no-referrer"></div></div>但是需要注意的是，苹果方面探索 RISC-V，并不代表 RISC-V 本身将在苹果的努力下进入高速发展阶段。且不提苹果并没有表现出加入 RISC-V 基金会最高级别会员的想法，更为重要的是，RISC-V 的开源模式与苹果一贯的封闭生态是完全冲突的。所以在一些观点看来，按照苹果的风格，极有可能是在经过了魔改后闭源，来适配自己自成一体的软硬件体系。<p></p><p>事实上，如今 ARM 生态的其他参与者，有从 M1 和 A 系列仿生芯片的进步中获得收益吗？</p><p>【本文图片来自网络】</p><div id="recommend_bottom"></div><div id="article_bottom"></div>  
</div>
            