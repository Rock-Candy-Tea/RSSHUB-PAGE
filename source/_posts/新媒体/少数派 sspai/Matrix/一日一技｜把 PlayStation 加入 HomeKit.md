
---
title: '一日一技｜把 PlayStation 加入 HomeKit'
categories: 
 - 新媒体
 - 少数派 sspai
 - Matrix
headimg: 'https://cdn.sspai.com/2022/01/16/7c88b129d113011ed88ccf70e7323d41.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1'
author: 少数派 sspai
comments: false
date: Sun, 16 Jan 2022 14:16:30 GMT
thumbnail: 'https://cdn.sspai.com/2022/01/16/7c88b129d113011ed88ccf70e7323d41.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1'
---

<div>   
<div class="articleWidth-content" data-v-d534f82e><div class="update-wrap" data-v-d534f82e></div><div class="content wangEditor-txt minHeight" data-v-d534f82e><p>由于 HAP（HomeKit Accessories Protocol）的开放性质<sup class="ss-footnote" href="https://sspai.com/post/67784" title="关于 HAP 可以看此篇文章 https://sspai.com/post/67784" footnote-id="1">1</sup>，配合 HomeBridge / HomeAssistant 庞大的插件库，几乎做到了万物皆可 HomeKit 的程度。今天我们就来把家中的 PlayStation 游戏机的唤醒和休眠加入到 「家庭」应用中并控制。</p><figure class="ss-imgRows" figcaption="HomeKit 与 HomeBridge"><img src="https://cdn.sspai.com/2022/01/16/7c88b129d113011ed88ccf70e7323d41.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" alt data-original="https://cdn.sspai.com/2022/01/16/7c88b129d113011ed88ccf70e7323d41.png" referrerpolicy="no-referrer"><img src="https://cdn.sspai.com/2022/01/16/817d30126b5ff2b8d88f4d519f9e3548.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" alt data-original="https://cdn.sspai.com/2022/01/16/817d30126b5ff2b8d88f4d519f9e3548.png" referrerpolicy="no-referrer"></figure><hr><p>本文以 HomeBridge 为例，HomeBridge 运行在 Ubuntu 系统的树莓派上。安装和使用 HomeBridge 请参考这篇文章：<a href="https://sspai.com/post/59636">HomeBridge 操作指南：从零开始，将你的米家设备接入 Homekit</a></p><p>本次接入的原理是根据 Github 上开源的 PlayStation 唤醒软件进行配置，再接入到 HomeBridge 调用运行配置好的唤醒软件。从而达到曲线救国的 PlayStation 的 HomeKit 化，接下来我们就分步骤进行安装与配置。</p><h2>安装控制软件</h2><p>本方法使用 <a href="https://github.com/dhleong/playactor">playactor</a> 控制软件来操控 PlayStation 系统。由于 PlayStation 并不支持传统的 WoL ，现在有的方法原理都是基于索尼自家的 PS Remote Play 这款软件的原理进行开发的。</p><figure class="image ss-img-wrapper image_resized" style="width:459px;"><img src="https://cdn.sspai.com/2022/01/16/5f3fb4944267e12f09ff29ea7e23e681.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2022/01/16/5f3fb4944267e12f09ff29ea7e23e681.png" referrerpolicy="no-referrer"></figure><p>根据 playactor 项目的文档，本项目支持 PS4 的全部操作和 PS5 的部分操作。在加入 HomeKit 之后我们仅需要用到 Wake 与 Standby 两个指令即可。</p><figure class="table"><table><tbody><tr><td> </td><td>PS4</td><td>PS5</td></tr><tr><td style="border-bottom:1px solid var(--color-border-default);border-left:1px solid var(--color-border-default);border-right:1px solid var(--color-border-default);border-top:1px solid var(--color-border-default);padding:6px 13px;">Wake</td><td style="border-bottom:1px solid var(--color-border-default);border-left:1px solid var(--color-border-default);border-right:1px solid var(--color-border-default);border-top:1px solid var(--color-border-default);padding:6px 13px;">✅</td><td style="border-bottom:1px solid var(--color-border-default);border-left:1px solid var(--color-border-default);border-right:1px solid var(--color-border-default);border-top:1px solid var(--color-border-default);padding:6px 13px;">✅</td></tr><tr><td style="border-bottom:1px solid var(--color-border-default);border-left:1px solid var(--color-border-default);border-right:1px solid var(--color-border-default);border-top:1px solid var(--color-border-default);padding:6px 13px;">Standby</td><td style="border-bottom:1px solid var(--color-border-default);border-left:1px solid var(--color-border-default);border-right:1px solid var(--color-border-default);border-top:1px solid var(--color-border-default);padding:6px 13px;">✅</td><td style="border-bottom:1px solid var(--color-border-default);border-left:1px solid var(--color-border-default);border-right:1px solid var(--color-border-default);border-top:1px solid var(--color-border-default);padding:6px 13px;">✅</td></tr><tr><td style="border-bottom:1px solid var(--color-border-default);border-left:1px solid var(--color-border-default);border-right:1px solid var(--color-border-default);border-top:1px solid var(--color-border-default);padding:6px 13px;">Keyboard control</td><td style="border-bottom:1px solid var(--color-border-default);border-left:1px solid var(--color-border-default);border-right:1px solid var(--color-border-default);border-top:1px solid var(--color-border-default);padding:6px 13px;">✅</td><td style="border-bottom:1px solid var(--color-border-default);border-left:1px solid var(--color-border-default);border-right:1px solid var(--color-border-default);border-top:1px solid var(--color-border-default);padding:6px 13px;">❌</td></tr><tr><td style="border-bottom:1px solid var(--color-border-default);border-left:1px solid var(--color-border-default);border-right:1px solid var(--color-border-default);border-top:1px solid var(--color-border-default);padding:6px 13px;">Key/Button press</td><td style="border-bottom:1px solid var(--color-border-default);border-left:1px solid var(--color-border-default);border-right:1px solid var(--color-border-default);border-top:1px solid var(--color-border-default);padding:6px 13px;">✅</td><td style="border-bottom:1px solid var(--color-border-default);border-left:1px solid var(--color-border-default);border-right:1px solid var(--color-border-default);border-top:1px solid var(--color-border-default);padding:6px 13px;">❌</td></tr><tr><td style="border-bottom:1px solid var(--color-border-default);border-left:1px solid var(--color-border-default);border-right:1px solid var(--color-border-default);border-top:1px solid var(--color-border-default);padding:6px 13px;">App/Game start</td><td style="border-bottom:1px solid var(--color-border-default);border-left:1px solid var(--color-border-default);border-right:1px solid var(--color-border-default);border-top:1px solid var(--color-border-default);padding:6px 13px;">✅</td><td style="border-bottom:1px solid var(--color-border-default);border-left:1px solid var(--color-border-default);border-right:1px solid var(--color-border-default);border-top:1px solid var(--color-border-default);padding:6px 13px;">❌</td></tr></tbody></table></figure><p>首先我们进入到运行 HomeBridge 的主机中，安装软件。在终端中输入：</p><p><code>sudo npm install playactor</code></p><p>等待安装完成。如果是 Docker 中运行的 HomeBridge 请直接在 HomeBridge 的终端中安装软件。</p><h2>账号认证</h2><p>接下来我们进入到 HomeBridge 的后台：</p><p>点击右上角三个点，进入「终端」，接下来我们使用 HomeBridge 用户进行认证。</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2022/01/17/ed4724c57ed9cdb7891ee30b590b77d9.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2022/01/17/ed4724c57ed9cdb7891ee30b590b77d9.png" referrerpolicy="no-referrer"><figcaption>进入终端</figcaption></figure><ol><li>启动你的 PlayStation 4/5。</li><li>在「终端」中输入：<code>playactor browse</code> 运行。</li><li>屏幕上会显示你的 PlayStation 信息，如果你有多台 PlayStation 请分别记住他们的名字。</li><li>输入：<code>playactor login --host-name <你的主机名称> --no-open-urls</code>，此时屏幕上会显示一个 URL 地址，点进进入。</li><li>在地址中输入你的 PlayStation 账号密码。</li><li>转跳页面之后复制 URL 地址，拷贝进「终端」并回车。</li><li>根据提示，进入 PlayStation 的 <strong>设定-主机-远程游玩-关联设备 </strong>找到 8 位数字，输入到终端中。</li><li>PlayStation 右上角跳出正在远程控制时，证明认证成功。</li><li>在终端中输入：<code>playactor standby --host-name <你的主机名称></code>，若 PlayStation 开始进入休眠证明软件运行正常。</li></ol><h2>配置 HomeBridge</h2><p>接下来进入 HomeBridge 进行插件配置。这里有多种插件可以选择：</p><ul><li><a href="https://www.npmjs.com/package/homebridge-cmdswitch2">HomeBridge-cmdswitch2</a></li><li><a href="https://www.npmjs.com/package/homebridge-wol">HomeBridge-WoL</a></li></ul><p>笔者选择 WoL 插件进行接入，因为具有 Return Early 功能，按下开关之后不用等待响应。如使用 cmdswitch2 配置过程也大同小异。</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2022/01/16/article/60a548ea21622be8632645252321058a?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2022/01/16/article/60a548ea21622be8632645252321058a" referrerpolicy="no-referrer"></figure><p>配置以 GUI 为例，打开 WoL 插件：</p><ol><li>输设备名称。</li><li>在 <strong>Pinging configuration</strong> 中随便输入一个 IP 地址，在 Ping Command 中输入：<code>playactor check --host-name <你的主机名称> | grep -i '200 Ok'</code>。</li><li>随意设定一个 Ping command timeout 时间。</li><li>在 <strong>Wake configuration</strong> 中随便输入一个 MAC 地址，随便输入一个广播地址。</li><li>更改 Wake grace time 为 <strong>0</strong>。</li><li>输入 Wake command <code>playactor wake --host-name <你的主机名称></code>。</li><li>设定 Wake command timeout 为 <strong>45</strong>。</li><li>设定 <strong>Shutdown configuration</strong> 中的 Shutdown command 为<code>playactor standby --host-name <你的主机名称></code>。</li><li>在 <strong>Miscellaneous </strong>中打开 return early。</li></ol><figure class="ss-imgRows" figcaption><img src="https://cdn.sspai.com/2022/01/16/ca43ff67136eae8bd9ff032dd4ce9537.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" alt data-original="https://cdn.sspai.com/2022/01/16/ca43ff67136eae8bd9ff032dd4ce9537.png" referrerpolicy="no-referrer"><img src="https://cdn.sspai.com/2022/01/16/bc6fcf2626329811a807e1d60a33ae9e.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" alt data-original="https://cdn.sspai.com/2022/01/16/bc6fcf2626329811a807e1d60a33ae9e.png" referrerpolicy="no-referrer"></figure><figure class="image ss-img-wrapper image_resized" style="width:565px;"><img src="https://cdn.sspai.com/2022/01/16/a14025454e1cdab220f3640040126371.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2022/01/16/a14025454e1cdab220f3640040126371.png" referrerpolicy="no-referrer"></figure><p>保存并重启 HomeBridge ，此时你的 PlayStation 就已经接入 HomeKit 中了，可以实时查看状态，控制唤醒以及休眠。</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2022/01/16/99e91b0e6e081de3f35faa287d967a6f.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2022/01/16/99e91b0e6e081de3f35faa287d967a6f.png" referrerpolicy="no-referrer"></figure><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2022/01/16/4351a3f46333cf6a69fbd3d768aaa8ab.GIF" data-original="https://cdn.sspai.com/2022/01/16/4351a3f46333cf6a69fbd3d768aaa8ab.GIF" referrerpolicy="no-referrer"></figure><p>如果你使用 HomeAssistant 那么操作也大同小异，只需要举一反三就可以把你的 PlayStation 接入 HomeKit。</p><p>虽然 PlayStation 本身的唤醒机制就已经十分优秀了，使用 HomeKit 或者 Siri 唤醒可以说是多此一举。但是接入进 HomeKit 以后，可以联动触发非常多的场景。比如设定游戏模式等等，具体玩法就由各位自行探究了，本文仅作抛砖引玉。</p><hr><p> </p></div><div class="update-details-wrap" data-v-d534f82e></div><!----></div><div style="border:1px solid transparent;" data-v-d534f82e></div><div class="article-side sideTop" style="display:none;left:0;" data-v-7be936cf data-v-d534f82e><div class="download-guide-container" data-v-14f9065e data-v-7be936cf><div class="btn-wrapper" data-v-14f9065e><!----><button class="btn btn-view" data-v-14f9065e><i class="iconfont iconfont-phone" data-v-14f9065e></i></button></div><a href="https://sspai.com/s/JYjP" target="_blank" data-v-14f9065e><!----></a></div><div class="item-wrapper" data-v-7be936cf><button class="btn btn-charge" data-v-7be936cf><i class="iconfont" data-v-7be936cf></i></button><span class="count" data-v-7be936cf>20</span></div><div class="item-wrapper" data-v-7be936cf><button class="btn-mini btn-comment" data-v-7be936cf><i class="iconfont iconfont-comment" data-v-7be936cf></i></button><span class="count" data-v-7be936cf>13</span></div><div class="item-wrapper" data-v-7be936cf><span data-v-7be936cf><div role="tooltip" id="el-popover-7558" aria-hidden="true" class="el-popover el-popper popper-share right ss-popper-dark-border" style="width:undefinedpx;display:none;"><!----><div class="article-side-share-btn"><a href="https://service.weibo.com/share/share.php?url=null?ref=weibo&title=%E3%80%90%E4%B8%80%E6%97%A5%E4%B8%80%E6%8A%80%EF%BD%9C%E6%8A%8A%20PlayStation%20%E5%8A%A0%E5%85%A5%20HomeKit%E3%80%91%E7%94%B1%E4%BA%8EHAP%EF%BC%88HomeKitAccessoriesPatronal%EF%BC%89%E7%9A%84%E5%BC%80%E6%94%BE%E6%80%A7%E8%B4%A81%EF%BC%8C%E9%85%8D%E5%90%88HomeBridge%2FHomeAssistant%E5%BA%9E%E5%A4%A7%E7%9A%84%E6%8F%92%EF%BC%88%E6%9D%A5%E8%87%AA%20%40%E5%B0%91%E6%95%B0%E6%B4%BEsspai%EF%BC%89%E5%85%A8%E6%96%87%EF%BC%9A&pic=https%3A%2F%2Fcdn.sspai.com%2F2022%2F01%2F16%2F9134fd9ff7da5f0ade8c9e25b55fce99.png%3FimageMogr2%2Fauto-orient%2Fquality%2F95%2Fthumbnail%2F!1420x708r%2Fgravity%2FCenter%2Fcrop%2F1420x708%2Finterlace%2F1&appkey=3196502474#" target="_blank"><i class="iconfont iconfont-weibo-simple right-16"></i></a><span><div role="tooltip" id="el-popover-510" aria-hidden="true" class="el-popover el-popper" style="width:undefinedpx;display:none;"><!----><div style="text-align:center;"><div id="qr-code"></div><small class="qr-small">扫码分享</small></div></div><span class="el-popover__reference-wrapper"><i class="iconfont iconfont-wechat-simple right-16"></i></span></span><a href="https://twitter.com/share?text=%E3%80%90%E4%B8%80%E6%97%A5%E4%B8%80%E6%8A%80%EF%BD%9C%E6%8A%8A%20PlayStation%20%E5%8A%A0%E5%85%A5%20HomeKit%E3%80%91%E7%94%B1%E4%BA%8EHAP%EF%BC%88HomeKitAccessoriesPatronal%EF%BC%89%E7%9A%84%E5%BC%80%E6%94%BE%E6%80%A7%E8%B4%A81%EF%BC%8C%E9%85%8D%E5%90%88HomeBridge%2FHomeAssistant%E5%BA%9E%E5%A4%A7%E7%9A%84%E6%8F%92%EF%BC%88%E6%9D%A5%E8%87%AA%20%40%E5%B0%91%E6%95%B0%E6%B4%BEsspai%EF%BC%89%E5%85%A8%E6%96%87%EF%BC%9A&url=null" target="_blank" class="twitter"><i class="iconfont iconfont-twitter-simple right-16"></i></a></div></div><span class="el-popover__reference-wrapper"><button class="btn-mini btn-share" data-v-7be936cf><i class="iconfont iconfont-share" data-v-7be936cf></i></button></span></span></div><div class="item-wrapper" data-v-7be936cf><button class="btn-mini btn-collect" data-v-7be936cf><i class="iconfont iconfont-collect" data-v-7be936cf></i></button></div><!----></div><!---->  
</div>
            