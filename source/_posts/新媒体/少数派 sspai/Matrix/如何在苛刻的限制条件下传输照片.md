
---
title: '如何在苛刻的限制条件下传输照片'
categories: 
 - 新媒体
 - 少数派 sspai
 - Matrix
headimg: 'https://picsum.photos/400/300?random=7032'
author: 少数派 sspai
comments: false
date: Mon, 12 Jul 2021 10:43:52 GMT
thumbnail: 'https://picsum.photos/400/300?random=7032'
---

<div>   
<div class="articleWidth-content" data-v-e1f0100a><div class="content wangEditor-txt minHeight" data-v-e1f0100a><p>前些日子，朋友拿来一部 iPhone，想把上面的照片全部传输到 Mac 上，然后把旧的 iPhone 送去维修。但是有许多的限制条件，导致他无法成功传输照片，就让我来帮忙解决这个问题了。<br>操作条件如下：</p><ol><li>4000+ 照片</li><li>没有启用 iCloud 同步</li><li>AirDrop 传输图片存在丢图片的情况</li><li>没有 MFi 数据线，即使有 USB 2.0 的速度也不太够用</li><li>下载文件夹中有许多原来其他无关的文件</li></ol><p>综上所述，考虑依旧使用 AirDrop 方案来实现图片传输。考虑因素如下：</p><ol><li>4000+照片，USB2.0实际速度会低于 30MB/s，但是 AirDrop 可以达到 40MB/s 左右。</li><li>没有启用 iCloud 同步，从 Mac 相册直接下载图片也就不太现实。</li><li>AirDrop 丢图片的情况，猜测是原来图片存到了 iCloud 上面，在 iPhone 上只是一个链接的形式，在 AirDrop 的时候由于网络原因无法下载成功，所以才出现了丢图片的情况。</li><li>没有 MFi 数据线，使用未认证数据线连接 Mac 和 iPhone 没有充电，再次否定数据线传输方案。</li><li>为了解决下载文件夹原来的文件问题，可以用原来下载文件夹中的文件新建文件夹，然后临时移动到文稿或者其他位置。</li></ol><h3>实战</h3><ol><li>将原来下载文件夹中的文件移动到其他位置，为 AirDrop 腾出文件夹。</li><li>打开终端，输入如下命令监控文件夹内文件数量，此举是为了保证不再出现图片丢失的情况。</li></ol><pre class="language-shell"><code>每隔一秒统计一次「下载」文件夹内文件数量
➜ repeat 10000 &#123;sleep 1|ls -l ~/Downloads|wc -l&#125;
70
70
70</code></pre><ol><li>使用 iPhone 的 AirDrop 向 Mac 投递照片，每次 100 张传输。每次发送成功之后，要注意查看终端显示的照片数量，是否是增加了 100 张。Mac 接收到了全部照片之后，Mac 的 AirDrop 通知消息便会消失，这也可以作为照片是否成功传输的辅助判断。</li><li>投送完全部照片之后，全选照片新建文件夹，移动到 SSD，恢复「下载」文件夹的原始状态，工作完成。</li></ol><h3>其他工作</h3><p>如果需要修正 视频和照片的拍摄时间，可以参考以下两篇文章：<br><a href="https://sspai.com/post/55904">《如何导出正确的照片拍摄时间》</a><br><a href="https://sspai.com/post/65006">《相册导出正确的视频拍摄时间》</a></p><h3>反思</h3><p>原本统计照片的任务是要交给 fswatch 实现的，由于朋友的电脑上没有安装 Homebrew，遂放弃了这个选择。当时是写了一个 while(1) 的 shell 脚本实现统计数量，但是后来想起还可以使用 repeat 实现该功能，使用 repeat + sleep 即可在指定间隔秒数见统计照片数量。这样就可以安装 Homebrew 的过程，省力省时。<br>此方案使用的工具主要有两个：AirDrop 和 repeat 命令。都是系统自带的功能和命令，用最简单的方法实现了该需求。</p></div><!----></div><div style="border:1px solid transparent;" data-v-e1f0100a></div><div class="article-side sideTop" style="display:none;left:0;" data-v-7be936cf data-v-e1f0100a><div class="download-guide-container" data-v-14f9065e data-v-7be936cf><div class="btn-wrapper" data-v-14f9065e><!----><button class="btn btn-view" data-v-14f9065e><i class="iconfont iconfont-phone" data-v-14f9065e></i></button></div><a href="https://sspai.com/s/JYjP" target="_blank" data-v-14f9065e><!----></a></div><div class="item-wrapper" data-v-7be936cf><button class="btn btn-charge" data-v-7be936cf><i class="iconfont" data-v-7be936cf></i></button><span class="count" data-v-7be936cf>4</span></div><div class="item-wrapper" data-v-7be936cf><button class="btn-mini btn-comment" data-v-7be936cf><i class="iconfont iconfont-comment" data-v-7be936cf></i></button><span class="count" data-v-7be936cf>0</span></div><div class="item-wrapper" data-v-7be936cf><span data-v-7be936cf><div role="tooltip" id="el-popover-7912" aria-hidden="true" class="el-popover el-popper popper-share right ss-popper-dark-border" style="width:undefinedpx;display:none;"><!----><div class="article-side-share-btn"><a href="https://service.weibo.com/share/share.php?url=null?ref=weibo&title=%E3%80%90%E5%A6%82%E4%BD%95%E5%9C%A8%E8%8B%9B%E5%88%BB%E7%9A%84%E9%99%90%E5%88%B6%E6%9D%A1%E4%BB%B6%E4%B8%8B%E4%BC%A0%E8%BE%93%E7%85%A7%E7%89%87%E3%80%91%E5%A6%82%E4%BD%95%E8%8B%9B%E5%88%BB%E7%9A%84%E9%99%90%E5%88%B6%E6%9D%A1%E4%BB%B6%E4%B8%8B%E4%BC%A0%E8%BE%93%E7%85%A7%E7%89%87%E5%89%8D%E4%BA%9B%E6%97%A5%E5%AD%90%EF%BC%8C%E6%9C%8B%E5%8F%8B%E6%8B%BF%E6%9D%A5%E4%B8%80%E9%83%A8iPhone%EF%BC%8C%E6%83%B3%E6%8A%8A%E4%B8%8A%E9%9D%A2%E7%9A%84%E7%85%A7%E7%89%87%E5%85%A8%E9%83%A8%E4%BC%A0%E8%BE%93%E5%88%B0Mac%E4%B8%8A%EF%BC%8C%E7%84%B6%E5%90%8E%E6%8A%8A%E6%97%A7%E7%9A%84iPhone%E9%80%81%E5%8E%BB%E7%BB%B4%E4%BF%AE%E3%80%82%E4%BD%86%E6%98%AF%E6%9C%89%E8%AE%B8%E5%A4%9A%EF%BC%88%E6%9D%A5%E8%87%AA%20%40%E5%B0%91%E6%95%B0%E6%B4%BEsspai%EF%BC%89%E5%85%A8%E6%96%87%EF%BC%9A&pic=&appkey=3196502474#" target="_blank"><i class="icon icon-article_weibo right-16"></i></a><span><div role="tooltip" id="el-popover-6118" aria-hidden="true" class="el-popover el-popper" style="width:undefinedpx;display:none;"><!----><div style="text-align:center;"><div id="qr-code"></div><small class="qr-small">扫码分享</small></div></div><span class="el-popover__reference-wrapper"><i class="icon icon-article_weixin right-16"></i></span></span><a href="https://twitter.com/share?text=%E3%80%90%E5%A6%82%E4%BD%95%E5%9C%A8%E8%8B%9B%E5%88%BB%E7%9A%84%E9%99%90%E5%88%B6%E6%9D%A1%E4%BB%B6%E4%B8%8B%E4%BC%A0%E8%BE%93%E7%85%A7%E7%89%87%E3%80%91%E5%A6%82%E4%BD%95%E8%8B%9B%E5%88%BB%E7%9A%84%E9%99%90%E5%88%B6%E6%9D%A1%E4%BB%B6%E4%B8%8B%E4%BC%A0%E8%BE%93%E7%85%A7%E7%89%87%E5%89%8D%E4%BA%9B%E6%97%A5%E5%AD%90%EF%BC%8C%E6%9C%8B%E5%8F%8B%E6%8B%BF%E6%9D%A5%E4%B8%80%E9%83%A8iPhone%EF%BC%8C%E6%83%B3%E6%8A%8A%E4%B8%8A%E9%9D%A2%E7%9A%84%E7%85%A7%E7%89%87%E5%85%A8%E9%83%A8%E4%BC%A0%E8%BE%93%E5%88%B0Mac%E4%B8%8A%EF%BC%8C%E7%84%B6%E5%90%8E%E6%8A%8A%E6%97%A7%E7%9A%84iPhone%E9%80%81%E5%8E%BB%E7%BB%B4%E4%BF%AE%E3%80%82%E4%BD%86%E6%98%AF%E6%9C%89%E8%AE%B8%E5%A4%9A%EF%BC%88%E6%9D%A5%E8%87%AA%20%40%E5%B0%91%E6%95%B0%E6%B4%BEsspai%EF%BC%89%E5%85%A8%E6%96%87%EF%BC%9A&url=null" target="_blank" class="twitter"><i class="icon icon-article_twitter right-16"></i></a></div></div><span class="el-popover__reference-wrapper"><button class="btn-mini btn-share" data-v-7be936cf><i class="iconfont iconfont-share" data-v-7be936cf></i></button></span></span></div><div class="item-wrapper" data-v-7be936cf><button class="btn-mini btn-collect" data-v-7be936cf><i class="iconfont iconfont-collect" data-v-7be936cf></i></button></div><!----></div><!---->  
</div>
            