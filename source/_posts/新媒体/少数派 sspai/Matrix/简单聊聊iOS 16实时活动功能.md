
---
title: '简单聊聊iOS 16实时活动功能'
categories: 
 - 新媒体
 - 少数派 sspai
 - Matrix
headimg: 'https://cdn.sspai.com/2022/08/26/7092b7fca42aa8e981b1cc6280e30f91.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1'
author: 少数派 sspai
comments: false
date: Mon, 29 Aug 2022 06:24:58 GMT
thumbnail: 'https://cdn.sspai.com/2022/08/26/7092b7fca42aa8e981b1cc6280e30f91.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1'
---

<div>   
<div class="articleWidth-content" data-v-557a067a><div class="update-wrap" data-v-557a067a></div><div class="content wangEditor-txt minHeight" data-v-557a067a><p>在 WWDC22 上，Apple 发布 iOS 16 的时候，公布了一个功能叫实时活动，并向开发者开放 Live Activities API。</p><figure class="image ss-img-wrapper image_resized" style="width:533px;"><img src="https://cdn.sspai.com/2022/08/26/7092b7fca42aa8e981b1cc6280e30f91.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2022/08/26/7092b7fca42aa8e981b1cc6280e30f91.png" referrerpolicy="no-referrer"></figure><h2>那么什么实时活动呢？</h2><p>实时活动是一种新的交互式消息通知，用户可以在 iPhone 的锁屏界面看到事件的实时更新。比如球赛的比分、打车或订餐的订单状态、运动锻炼的实时数据等。这种消息通知形式允许开发者在实时活动期间更新单个交互式通知，而不是每次有状态更新时都发送新通知。通过减少发送的通知数量，同时使信息更易于访问。</p><figure class="image ss-img-wrapper image_resized" style="width:530px;"><img src="https://cdn.sspai.com/2022/08/26/af36be4dee4d130456b2e08a93cd6cd0.jpg?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2022/08/26/af36be4dee4d130456b2e08a93cd6cd0.jpg" referrerpolicy="no-referrer"><figcaption>Uber海外版团队设计的实时活动界面</figcaption></figure><hr><p>Apple 在 iOS 16 开发者测试版 Beta 4 首次向开发者提供 ActivityKit 开发套件，首次在真机实装，随后在 Beta 6 和 Beta 7 并没有在真机实装实时活动功能。开发者目前只能在模拟器测试这项功能，或者降级回 Beta 4 或 Beta 5。Apple 在开发者网站也明确表示实时活动不会在首个 iOS16 正式版推出，而是在今年晚些时候的正式版突出。下图是模仿目前已有的原神安卓小组件、iOS 小组件做的实时活动版小组件。到了 8 月 16 日一大早用手机更新 Beta 6 之后，手机就不能运行和测试实时活动了，随后也看到其他开发者反馈实时活动在 Beta 6 版本没有实装。本文后面的截图只能在模拟器截取了，但模拟器不能更改壁纸，只有黑色背景。</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2022/08/26/73bfffeec8e9601dc7b880385050dff1.jpeg?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2022/08/26/73bfffeec8e9601dc7b880385050dff1.jpeg" referrerpolicy="no-referrer"></figure><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2022/08/26/1baae704308994a12ad0db1d01943fbb.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2022/08/26/1baae704308994a12ad0db1d01943fbb.png" referrerpolicy="no-referrer"><figcaption>Xcode真机调试报错ActivityKit没实装</figcaption></figure><p>实时活动界面部分是小组件扩展，开发者使用 WidgetKit 功能和 SwiftUI 编写界面布局，ActivityKit 是处理配置、启动、更新和结束实时活动。实时活动是一种消息通知，是一种可以自定义界面布局和更新状态的消息通知。下图是普通类型的消息通知，或许以后能看到换了界面布局的降雨提醒。</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2022/08/26/9c1bb6d194421079c9ce9089a810f8fb.jpeg?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2022/08/26/9c1bb6d194421079c9ce9089a810f8fb.jpeg" referrerpolicy="no-referrer"><figcaption>普通的消息通知类型</figcaption></figure><h2><strong>实时活动要求和限制</strong></h2><p>与小组件不同的是，小组件是通过时间线机制更新界面数据，实时活动是通过远程推送或 ActivityKit 从主应用程序来启动、更新和结束实时活动。实时活动无法访问网络或接收位置更新，下图网络请求图片失败。</p><figure class="image ss-img-wrapper image_resized" style="width:377px;"><img src="https://cdn.sspai.com/2022/08/26/ca16311316b8f635cd6ef637d10a4105.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2022/08/26/ca16311316b8f635cd6ef637d10a4105.png" referrerpolicy="no-referrer"></figure><p><strong>ActivityKit 更新和远程推送通知更新的更新动态数据大小不能超过 4KB。</strong></p><p>实时活动界面不能包含可交互元素，例如按钮和 WebView。当用户点击实时活动界面，将会打开主应用程序。</p><p>自定义实时活动的用户界面时，系统会忽略任何自定义动画，但可以使用系统自带的时间文本动画，当实时活动的动态内容发生变化时，系统会执行一些动画。文本视图通过模糊的内容过渡动画内容变化，系统为图像和 SF Symbols 符号动画内容过渡，根据内容或状态更改从用户界面添加或删除视图，视图会淡入淡出。</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2022/08/26/4d5d3e42fe0770698d386fe21c122ecd.gif" data-original="https://cdn.sspai.com/2022/08/26/4d5d3e42fe0770698d386fe21c122ecd.gif" referrerpolicy="no-referrer"><figcaption>系统自带的时间文本动画</figcaption></figure><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2022/08/26/b6441cbcb2e567defe1dc0e053808d01.gif" data-original="https://cdn.sspai.com/2022/08/26/b6441cbcb2e567defe1dc0e053808d01.gif" referrerpolicy="no-referrer"><figcaption>系统为图像内容变化作出的动画效果</figcaption></figure><p>在<a target="_blank" rel="noopener noreferrer" href="https://developer.apple.com/documentation/activitykit/displaying-live-data-on-the-lock-screen-with-live-activities">开发者网站</a>的描述中，<strong>如果实时活动的高度超过 160，系统可能会截断它</strong>。在实际测试中，实时活动界面最小高度为 64，最大高度可以达到 220。目前实时活动功能还不是正式的版本，有可能在之后的测试版本会有改变。</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2022/08/26/03eda4bddd9e29c7c756964244834086.jpeg?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2022/08/26/03eda4bddd9e29c7c756964244834086.jpeg" referrerpolicy="no-referrer"></figure><p>当用户在 App 首次启动时，点击允许应用程序发送通知时，就代表允许 App 发送实时活动通知，不允许则不会收到实时活动的通知。之后在系统设置 - 对应的 App -实时活动，可以关闭/开启实时活动权限。</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2022/08/26/e324c8b29e2aa5585955db298473d948.jpeg?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2022/08/26/e324c8b29e2aa5585955db298473d948.jpeg" referrerpolicy="no-referrer"><figcaption>实时活动权限位置</figcaption></figure><p><strong>实时活动有 4 种活动状态，分别是：等待中、正在进行、成功、失败</strong></p><p>实时活动在锁屏界面显示的时候，用户可以左划，点击清除按钮将其清除。用户没有清除的情况下，实时活动最多可以处于活动状态 8 小时，如果用户或应用程序尚未结束活动状态，系统会自动结束它。在此结束状态下，实时活动会在锁定屏幕上最多保留 4 个小时，最后系统会将其删除。</p><figure class="image ss-img-wrapper image_resized" style="width:457px;"><img src="https://cdn.sspai.com/2022/08/26/63ea466cfa8bf8d9a3c14ea23b3a8ace.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2022/08/26/63ea466cfa8bf8d9a3c14ea23b3a8ace.png" referrerpolicy="no-referrer"></figure><hr><p>目前实时活动功能还在测试状态，开发者们还在为他们的 App 设计和测试这一项功能，下图是收集几款目前在测试中的实时活动的例子。</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2022/08/26/2bdb78f789c545d63a37d92694ea0a20.jpeg?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2022/08/26/2bdb78f789c545d63a37d92694ea0a20.jpeg" referrerpolicy="no-referrer"><figcaption>一些例子展示</figcaption></figure><p>关于实时活动这一功能的一些设想。在这个功能正式上线后，除了官方和大部分媒体提到的比赛比分、运动训练状态、行程状态、订单状态等这些功能以外，我们或许还可以看到这些功能：某餐饮 App 提醒你周四中午吃啥；原神体力、宝钱、参量质变仪到点提示上线领取；购物平台推送提醒商品抢购即将开启、正在抢购还剩余 69 件并且在不断减少等之类的功能。</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2022/08/26/a63bd1188b7f495753cbf5c6cdead430.jpeg?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2022/08/26/a63bd1188b7f495753cbf5c6cdead430.jpeg" referrerpolicy="no-referrer"></figure><hr><p>以上就是关于实时活动这个功能的一些介绍和想法。之前的一篇锁屏天气的文章和视频会有评论说解锁在桌面小组件就能看到天气了啊，左划负一屏添加小组件就能看到天气了啊。不过对于我这种手机懒得解锁的用户来说，对于锁屏实时活动这个功能是非常期待的。大家对于实时活动这个系统特性及功能有什么想法和期待呢？</p></div><div class="update-details-wrap" data-v-557a067a></div><!----></div><div style="border:1px solid transparent;" data-v-557a067a></div><div class="article-side sideTop" style="display:none;left:0;" data-v-cb5db094 data-v-557a067a><div class="download-guide-container" data-v-14f9065e data-v-cb5db094><div class="btn-wrapper" data-v-14f9065e><!----><button class="btn btn-view" data-v-14f9065e><i class="iconfont iconfont-phone" data-v-14f9065e></i></button></div><a href="https://sspai.com/s/JYjP" target="_blank" data-v-14f9065e><!----></a></div><div class="item-wrapper" data-v-cb5db094><button class="btn btn-charge" data-v-cb5db094><i class="iconfont" data-v-cb5db094></i></button><span class="count" data-v-cb5db094>18</span></div><div class="item-wrapper" data-v-cb5db094><button class="btn-mini btn-comment" data-v-cb5db094><i class="iconfont iconfont-comment" data-v-cb5db094></i></button><span class="count" data-v-cb5db094>9</span></div><div class="item-wrapper" data-v-cb5db094><span data-v-cb5db094><div role="tooltip" id="el-popover-3781" aria-hidden="true" class="el-popover el-popper popper-share right ss-popper-dark-border" style="width:undefinedpx;display:none;"><!----><div class="article-side-share-btn"><a href="https://service.weibo.com/share/share.php?url=null?ref=weibo&title=%E3%80%90%E7%AE%80%E5%8D%95%E8%81%8A%E8%81%8AiOS%2016%E5%AE%9E%E6%97%B6%E6%B4%BB%E5%8A%A8%E5%8A%9F%E8%83%BD%E3%80%91%E5%9C%A8WWDC22%E4%B8%8A%EF%BC%8CApple%E5%8F%91%E5%B8%83iOS16%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E5%85%AC%E5%B8%83%E4%BA%86%E4%B8%80%E4%B8%AA%E5%8A%9F%E8%83%BD%E5%8F%AB%E5%AE%9E%E6%97%B6%E6%B4%BB%E5%8A%A8%EF%BC%8C%E5%B9%B6%E5%90%91%E5%BC%80%E5%8F%91%E8%80%85%E5%BC%80%E6%94%BELiveActivitiesAPI%E3%80%82%E9%82%A3%E4%B9%88%E4%BB%80%E4%B9%88%E5%AE%9E%E6%97%B6%E6%B4%BB%EF%BC%88%E6%9D%A5%E8%87%AA%20%40%E5%B0%91%E6%95%B0%E6%B4%BEsspai%EF%BC%89%E5%85%A8%E6%96%87%EF%BC%9A&pic=https%3A%2F%2Fcdn.sspai.com%2F2022%2F08%2F26%2Fd7834a2529946df8e27a1208e33337d7.jpeg%3FimageMogr2%2Fauto-orient%2Fquality%2F95%2Fthumbnail%2F!1420x708r%2Fgravity%2FCenter%2Fcrop%2F1420x708%2Finterlace%2F1&appkey=3196502474#" target="_blank"><i class="iconfont iconfont-weibo-simple right-16"></i></a><span><div role="tooltip" id="el-popover-8757" aria-hidden="true" class="el-popover el-popper" style="width:undefinedpx;display:none;"><!----><div style="text-align:center;"><div id="qr-code"></div><small class="qr-small">扫码分享</small></div></div><span class="el-popover__reference-wrapper"><i class="iconfont iconfont-wechat-simple right-16"></i></span></span><a href="https://twitter.com/share?text=%E3%80%90%E7%AE%80%E5%8D%95%E8%81%8A%E8%81%8AiOS%2016%E5%AE%9E%E6%97%B6%E6%B4%BB%E5%8A%A8%E5%8A%9F%E8%83%BD%E3%80%91%E5%9C%A8WWDC22%E4%B8%8A%EF%BC%8CApple%E5%8F%91%E5%B8%83iOS16%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E5%85%AC%E5%B8%83%E4%BA%86%E4%B8%80%E4%B8%AA%E5%8A%9F%E8%83%BD%E5%8F%AB%E5%AE%9E%E6%97%B6%E6%B4%BB%E5%8A%A8%EF%BC%8C%E5%B9%B6%E5%90%91%E5%BC%80%E5%8F%91%E8%80%85%E5%BC%80%E6%94%BELiveActivitiesAPI%E3%80%82%E9%82%A3%E4%B9%88%E4%BB%80%E4%B9%88%E5%AE%9E%E6%97%B6%E6%B4%BB%EF%BC%88%E6%9D%A5%E8%87%AA%20%40%E5%B0%91%E6%95%B0%E6%B4%BEsspai%EF%BC%89%E5%85%A8%E6%96%87%EF%BC%9A&url=null" target="_blank" class="twitter"><i class="iconfont iconfont-twitter-simple right-16"></i></a></div></div><span class="el-popover__reference-wrapper"><button class="btn-mini btn-share" data-v-cb5db094><i class="iconfont iconfont-share" data-v-cb5db094></i></button></span></span></div><div class="item-wrapper" data-v-cb5db094><button class="btn-mini btn-collect" data-v-cb5db094><i class="iconfont iconfont-collect" data-v-cb5db094></i></button></div><!----></div><!---->  
</div>
            