
---
title: '总算实现了用 Typora 沉浸式写作的最后闭环'
categories: 
 - 新媒体
 - 少数派 sspai
 - Matrix
headimg: 'https://cdn.sspai.com/2021/05/05/article/6e42c7583bf8e6a33372ece80409f2dd?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1'
author: 少数派 sspai
comments: false
date: Wed, 05 May 2021 16:03:41 GMT
thumbnail: 'https://cdn.sspai.com/2021/05/05/article/6e42c7583bf8e6a33372ece80409f2dd?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1'
---

<div>   
<div class="articleWidth-content" data-v-e1f0100a><div class="content wangEditor-txt minHeight" data-v-e1f0100a><h2>一、背景概述</h2><p>之前用过 picgo 配置阿里的 oss 图床，但是苦于每次还得拖拽点了上传之后，再把图片的地址粘贴到文档里面，感觉还是很麻烦就转了一段时间用 teambition 的在线文档写作然后导出 word 使用，最近知道 typora 支持直接默认插入图片上传图床了，就果断来摸索配置一下使用了。</p><p>结果被阿里坑的够惨，记录一下踩坑历程。 主要解决 window 系统上 typora 客户端配置 picgo 图床工具和阿里云 OSS 的问题。满足沉浸式写作以及私人图床的便捷使用。</p><h2>二、准备内容</h2><ul><li>阿里云 OSS</li><li>PicGO 客户端</li><li>Typora 客户端</li></ul><h2>三、过程记录</h2><h3>1）安装两个软件</h3><p>不多赘述，分别进入对应的官网选择对应的系统版本安装下载即可</p><p><a href="http://typora.io/"><u>Typora 下载地址</u></a></p><p><a href="https://picgo.github.io/PicGo-Doc/zh/"><u>PicGo 下载地址</u></a></p><h3>2）购买阿里云的 OSS</h3><p>不多赘述，参考我另外一篇文章 <a href="https://sspai.com/post/56116"><u>《我花 9 块钱搭了一个配合个人博客使用的个人图床》 - 少数派 (sspai.com)</u></a></p><h3>3）配置 picgo</h3><p>这部分的配置基本没啥区别参照我 2 年前那篇文章即可，新增加的那个网址后缀字段不用管。</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/05/05/article/6e42c7583bf8e6a33372ece80409f2dd?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" alt="image-20210505231516433" data-original="https://cdn.sspai.com/2021/05/05/article/6e42c7583bf8e6a33372ece80409f2dd" referrerpolicy="no-referrer"></figure><p>但是那个被加密隐藏的 keysecret 这个录入就有个大坑！</p><p>这个内容从阿里云复制到 picgo 里面会自动把第一个字母变成空格！导致配置完成之后我一直上传都提示 403 错误，查看运行日志显示内容 「SignatureDoesNotMatch」。</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/05/05/article/e6f19abc8de6976d226c181148ba686b?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" alt="image-20210505231736090" data-original="https://cdn.sspai.com/2021/05/05/article/e6f19abc8de6976d226c181148ba686b" referrerpolicy="no-referrer"></figure><p>顾名思义就是 token 没验证通过的意思，但是加密项目又看不见只能找到配置的 json 文件，在里面可以看到明文的 keysecret，然后就发现有一个空格赫然在前。</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/05/05/article/870157af6e1ceea98c6a93290f567ba6?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" alt="image-20210505232125522" data-original="https://cdn.sspai.com/2021/05/05/article/870157af6e1ceea98c6a93290f567ba6" referrerpolicy="no-referrer"></figure><p>开始我还以为是复制过程中自己多了复制了一个，然后删除空格保存配置后再试发现还是 403 错误。最后实在想不通打开阿里云后台看着 keysecret 与配置文件里面的进行一一对比发现竟然少了第一位。</p><p>把后台的完整 copy 进去之后保存重试就成功了，可以说是一个非常丧心病狂的 bug 了。</p><h3>4）配置 typra</h3><p>进入全局图像设置页面</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/05/05/article/d4889720c755d5f4f05c27590708b51c?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" alt="image-20210505230423489" data-original="https://cdn.sspai.com/2021/05/05/article/d4889720c755d5f4f05c27590708b51c" referrerpolicy="no-referrer"></figure><p>按图配置相关参数</p><p>如果 picgo 安装在磁盘其他位置的相应的进行修改即可。</p><p>配置完成后，不管是</p><p>1、本地插入的图片</p><p>2、网络上复制过来的图片</p><p>3、剪切板里面直接粘贴的图片（截图</p><p>都会默认通过 picgo 上传至自己的私人图床然后回显图片的在文档中，从而大大提高写作过程中的配图效率以及各平台发布时的图片上传效率。</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/05/05/article/e34fa6bc6371a00071572ce51e9fc328?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" alt="image-20210505232631656" data-original="https://cdn.sspai.com/2021/05/05/article/e34fa6bc6371a00071572ce51e9fc328" referrerpolicy="no-referrer"></figure><h2>四、心得体会</h2><p>如果觉得还得安装一个 picgo 并保持在后台启动比较麻烦可以直接在上传服务中选择 picgo-core 这个选项。</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/05/05/article/6f7c10ac6d7102b9045027927614bfd7?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" alt="image-20210505233259724" data-original="https://cdn.sspai.com/2021/05/05/article/6f7c10ac6d7102b9045027927614bfd7" referrerpolicy="no-referrer"></figure><p>不过我看了一下缺少很多诸如自动按时间戳重命名图片，以及已上传图片相册查看，重复使用等功能（很多时候表情包是需要反复使用的，每次都上传一次太冗余且浪费流量了）有得有失，自己按需配置。</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/05/05/article/0263b77edc671638afb7ee286680efda?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" alt="image-20210505233916118" data-original="https://cdn.sspai.com/2021/05/05/article/0263b77edc671638afb7ee286680efda" referrerpolicy="no-referrer"></figure><p>在 PICGO 相册中删除图片无法直接执行到 OSS 文件夹中，真正需要删除文件还得进入阿里云后台，这里只是删除相册中的展示图片，建议可以把复用场合多的保留在这，一次性配图可以直接干掉，减少冗余。</p></div><!----></div><div style="border:1px solid transparent;" data-v-e1f0100a></div><div class="article-side sideTop" style="display:none;left:0;" data-v-7be936cf data-v-e1f0100a><div class="download-guide-container" data-v-14f9065e data-v-7be936cf><div class="btn-wrapper" data-v-14f9065e><!----><button class="btn btn-view" data-v-14f9065e><i class="iconfont iconfont-phone" data-v-14f9065e></i></button></div><a href="https://sspai.com/s/JYjP" target="_blank" data-v-14f9065e><!----></a></div><div class="item-wrapper" data-v-7be936cf><button class="btn btn-charge" data-v-7be936cf><i class="iconfont" data-v-7be936cf></i></button><span class="count" data-v-7be936cf>0</span></div><div class="item-wrapper" data-v-7be936cf><button class="btn-mini btn-comment" data-v-7be936cf><i class="iconfont iconfont-comment" data-v-7be936cf></i></button><span class="count" data-v-7be936cf>0</span></div><div class="item-wrapper" data-v-7be936cf><span data-v-7be936cf><div role="tooltip" id="el-popover-676" aria-hidden="true" class="el-popover el-popper popper-share right ss-popper-dark-border" style="width:undefinedpx;display:none;"><!----><div class="article-side-share-btn"><a href="https://service.weibo.com/share/share.php?url=null?ref=weibo&title=%E3%80%90%E6%80%BB%E7%AE%97%E5%AE%9E%E7%8E%B0%E4%BA%86%E7%94%A8%20Typora%20%E6%B2%89%E6%B5%B8%E5%BC%8F%E5%86%99%E4%BD%9C%E7%9A%84%E6%9C%80%E5%90%8E%E9%97%AD%E7%8E%AF%E3%80%91%E8%83%8C%E6%99%AF%E6%A6%82%E8%BF%B0%E4%B9%8B%E5%89%8D%E7%94%A8%E8%BF%87picgo%E9%85%8D%E7%BD%AE%E9%98%BF%E9%87%8C%E7%9A%84oss%E5%9B%BE%E5%BA%8A%EF%BC%8C%E4%BD%86%E6%98%AF%E8%8B%A6%E4%BA%8E%E6%AF%8F%E6%AC%A1%E8%BF%98%E5%BE%97%E6%8B%96%E6%8B%BD%E7%82%B9%E4%BA%86%E4%B8%8A%E4%BC%A0%E4%B9%8B%E5%90%8E%EF%BC%8C%E5%86%8D%E6%8A%8A%E5%9B%BE%E7%89%87%E7%9A%84%E5%9C%B0%E5%9D%80%E7%B2%98%E8%B4%B4%E5%88%B0%E6%96%87%E6%A1%A3%E9%87%8C%E9%9D%A2%EF%BC%8C%E6%84%9F%E8%A7%89%E8%BF%98%E6%98%AF%E5%BE%88%E9%BA%BB%E7%83%A6%E5%B0%B1%E8%BD%AC%E4%BA%86%E4%B8%80%E6%AE%B5%E6%97%B6%E9%97%B4%EF%BC%88%E6%9D%A5%E8%87%AA%20%40%E5%B0%91%E6%95%B0%E6%B4%BEsspai%EF%BC%89%E5%85%A8%E6%96%87%EF%BC%9A&pic=https%3A%2F%2Fcdn.sspai.com%2F2021%2F05%2F05%2Fa6c97cc05f27d81d23afbdb1807425e0.png%3FimageMogr2%2Fauto-orient%2Fquality%2F95%2Fthumbnail%2F!1420x708r%2Fgravity%2FCenter%2Fcrop%2F1420x708%2Finterlace%2F1&appkey=3196502474#" target="_blank"><i class="icon icon-article_weibo right-16"></i></a><span><div role="tooltip" id="el-popover-879" aria-hidden="true" class="el-popover el-popper" style="width:undefinedpx;display:none;"><!----><div style="text-align:center;"><div id="qr-code"></div><small class="qr-small">扫码分享</small></div></div><i class="icon icon-article_weixin right-16"></i></span><a href="https://twitter.com/share?text=%E3%80%90%E6%80%BB%E7%AE%97%E5%AE%9E%E7%8E%B0%E4%BA%86%E7%94%A8%20Typora%20%E6%B2%89%E6%B5%B8%E5%BC%8F%E5%86%99%E4%BD%9C%E7%9A%84%E6%9C%80%E5%90%8E%E9%97%AD%E7%8E%AF%E3%80%91%E8%83%8C%E6%99%AF%E6%A6%82%E8%BF%B0%E4%B9%8B%E5%89%8D%E7%94%A8%E8%BF%87picgo%E9%85%8D%E7%BD%AE%E9%98%BF%E9%87%8C%E7%9A%84oss%E5%9B%BE%E5%BA%8A%EF%BC%8C%E4%BD%86%E6%98%AF%E8%8B%A6%E4%BA%8E%E6%AF%8F%E6%AC%A1%E8%BF%98%E5%BE%97%E6%8B%96%E6%8B%BD%E7%82%B9%E4%BA%86%E4%B8%8A%E4%BC%A0%E4%B9%8B%E5%90%8E%EF%BC%8C%E5%86%8D%E6%8A%8A%E5%9B%BE%E7%89%87%E7%9A%84%E5%9C%B0%E5%9D%80%E7%B2%98%E8%B4%B4%E5%88%B0%E6%96%87%E6%A1%A3%E9%87%8C%E9%9D%A2%EF%BC%8C%E6%84%9F%E8%A7%89%E8%BF%98%E6%98%AF%E5%BE%88%E9%BA%BB%E7%83%A6%E5%B0%B1%E8%BD%AC%E4%BA%86%E4%B8%80%E6%AE%B5%E6%97%B6%E9%97%B4%EF%BC%88%E6%9D%A5%E8%87%AA%20%40%E5%B0%91%E6%95%B0%E6%B4%BEsspai%EF%BC%89%E5%85%A8%E6%96%87%EF%BC%9A&url=null" target="_blank" class="twitter"><i class="icon icon-article_twitter right-16"></i></a></div></div><button class="btn-mini btn-share" data-v-7be936cf><i class="iconfont iconfont-share" data-v-7be936cf></i></button></span></div><div class="item-wrapper" data-v-7be936cf><button class="btn-mini btn-collect" data-v-7be936cf><i class="iconfont iconfont-collect" data-v-7be936cf></i></button></div><!----></div><!---->  
</div>
            