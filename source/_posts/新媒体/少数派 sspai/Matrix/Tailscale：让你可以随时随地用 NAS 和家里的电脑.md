
---
title: 'Tailscale：让你可以随时随地用 NAS 和家里的电脑'
categories: 
 - 新媒体
 - 少数派 sspai
 - Matrix
headimg: 'https://cdn.sspai.com/2021/05/24/article/6b2ae36ea9f1b29d3efdadc5e75aade3?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1'
author: 少数派 sspai
comments: false
date: Mon, 24 May 2021 05:06:40 GMT
thumbnail: 'https://cdn.sspai.com/2021/05/24/article/6b2ae36ea9f1b29d3efdadc5e75aade3?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1'
---

<div>   
<div class="articleWidth-content" data-v-e1f0100a><div class="content wangEditor-txt minHeight" data-v-e1f0100a><h2 style="margin-left:0px;"><strong>背景</strong></h2><p style="margin-left:0px;">买了NAS，升级了千兆的宽带，用上了WebDAV的我，终于缓解了我256G的MacBook Air的存储焦虑。然而，这个焦虑伴随着我自由职业的生活的结束，重新步入职场，需要到公司上班，又一次出现了。<br>每当离开家，无法连上内网，NAS成了摆设。这怎么能忍？肯定得想办法。群晖QuickConnect、frp、ngrok这些方案似乎都不适合我，最后发现Tailscale这个工具，似乎就是我的救星。</p><h2 style="margin-left:0px;"><strong>Tailscale是什么，怎么用</strong></h2><h3 style="margin-left:0px;"><strong>是什么？</strong></h3><p style="margin-left:0px;">Tailscale属于一种虚拟组网工具，基于WireGuard。<br>他能帮助我们把安装了Tailscale服务的机器，都放到同一个局域网。也就是我在家里的NAS和PC，还有父母家的PC，甚至云服务器都能放到同一个局域网。</p><h3 style="margin-left:0px;"><strong>怎么用？</strong></h3><p style="margin-left:0px;">到<a href="https://tailscale.com/" target="_blank"><u>Tailscale官网</u></a>下载对应平台的应用。<br> </p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/05/24/article/6b2ae36ea9f1b29d3efdadc5e75aade3?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" alt data-original="https://cdn.sspai.com/2021/05/24/article/6b2ae36ea9f1b29d3efdadc5e75aade3" referrerpolicy="no-referrer"></figure><p style="margin-left:0px;"><br>选择Get Started，或者通过应用的登录授权，进入登录页面。<br> </p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/05/24/article/90a8bbf1cc97f533c10f42e53d8f0bfd?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" alt data-original="https://cdn.sspai.com/2021/05/24/article/90a8bbf1cc97f533c10f42e53d8f0bfd" referrerpolicy="no-referrer"></figure><p style="margin-left:0px;"><br>这里“只能”使用谷歌或者微软账号进行登录，使用自己邮箱进行属于增值付费业务。<br>当你使用了几台设备登录了后，你就可以看到这么一份带有IP的列表了。<br> </p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/05/24/article/de597790db293a10bb71a4d43e08898b?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" alt data-original="https://cdn.sspai.com/2021/05/24/article/de597790db293a10bb71a4d43e08898b" referrerpolicy="no-referrer"></figure><h3 style="margin-left:0px;"><strong>群晖NAS怎么安装Tailscale？</strong></h3><p style="margin-left:0px;">可以到GitHub看这份<a href="https://github.com/tailscale/tailscale-synology" target="_blank"><u>tailscale-synology的README</u></a>。<br>简单的意思就是到<a href="https://github.com/tailscale/tailscale-synology/releases" target="_blank"><u>release页面</u></a>去下载对应spk，比如我下载的是tailscale_1.8.3_amd64.spk。<br>下载好后到套件中心进行手动安装spk文件。<br>安装完成后进入ssh，执行<code>sudo tailscale up</code>命令，就会进入Tailscale的授权页面了。</p><h3 style="margin-left:0px;"><strong>M1版本的Mac怎么办？</strong></h3><p style="margin-left:0px;">不知道是不是我人品问题，我使用M1版的应用无法成功。<br>想了许多办法后，想到M1版本支持移动版本的Tailscale。切换到美国区，下载安装即可。</p><h2 style="margin-left:0px;"><strong>Tailscale能怎么玩</strong></h2><h3 style="margin-left:0px;"><strong>场景一</strong></h3><p style="margin-left:0px;">256G的MacBook Air的存储空间永远让人焦虑。拥有WebDav，能很好的拓展存储空间。在家的时候内网使用WebDav很简单，但出门后却无法使用。<br>而我使用了Tailscale，就可以内网连接我的群晖NAS提供的WebDav了。使用Tailscale中NAS的内网地址，进行拓展WebDav，随时随地可以查看NAS上面的照片，甚至我的Eagle的素材库，都直接使用WebDav中的就行了。<br> </p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/05/24/article/1362ee024fb615ff25de46e0adf05568?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" alt data-original="https://cdn.sspai.com/2021/05/24/article/1362ee024fb615ff25de46e0adf05568" referrerpolicy="no-referrer"></figure><h3 style="margin-left:0px;"><strong>场景二</strong></h3><p style="margin-left:0px;">远程使用PC的情况，可以通过teamviewer完成。但是使用RDP协议来远程操作，效果体验更佳。<br>那是不是PC机需要一直开机状态呢？岂不是会浪费电？<br>我的办法是通过群晖NAS做一个反向代理方便我进入家里的梅林路由器（其他路由器也可以），并修改我本地Mac的hosts文件来解析我自定义的域名。<br>反向代理可以在群晖NAS的控制面板中的应用程序门户中找到，配置反向代理服务器。<br> </p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/05/24/article/4c791f98600633f02c4195792ce974e3?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" alt data-original="https://cdn.sspai.com/2021/05/24/article/4c791f98600633f02c4195792ce974e3" referrerpolicy="no-referrer"></figure><p style="margin-left:0px;"><br>修改hosts的方法可以参考<a href="https://blog.geekdt.com/647.html" target="_blank"><u>host文件修改教程</u></a></p><pre class="language-markdown"><code>Windows系统
在C:\Windows\System32\drivers\etc\目录下有一个hosts文件，复制出来，修改后再粘贴回去（注意：一定要复制出来再修改，否则无法正常保存）

Android系统
安卓系统修改host文件需要root权限,并挂载系统分区read-only(ro)为read-write(rw)，文件位于C:\Windows\System32\drivers\etc\hosts，直接修改即可

iOS系统
文件位于/etc/hosts，似乎是需要越狱的，毕竟要修改系统文件

Linux/MacOS系统
文件位于/etc/hosts，有su权限即可修改了</code></pre><p style="margin-left:0px;">进入梅林路由器，进入网络工具中的通过网络唤醒界面，选择对应的PC即可。<br> </p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/05/24/article/89e6d2f3120cc594f17ad192d742b691?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" alt data-original="https://cdn.sspai.com/2021/05/24/article/89e6d2f3120cc594f17ad192d742b691" referrerpolicy="no-referrer"></figure><p style="margin-left:0px;"><br>当然，首先这台PC机需要配置好通过WOL唤醒才行。可以参考<a href="https://zhuanlan.zhihu.com/p/29100706" target="_blank"><u>网络唤醒全攻略(Wake On LAN)</u></a>。<br>等待电脑唤醒完成后，使用Jump Desktop（或者远程桌面）进行远程连接，就可以得到一个用户体验很不错的体验了。</p><h2 style="margin-left:0px;"><strong>总结</strong></h2><p style="margin-left:0px;">有了Tailscale的虚拟组网服务后，办公室和自由职业时期的居家办公体验，相差已经变得很小了。<br>一句话总结：就很棒！（一条小团团音）</p><h2 style="margin-left:0px;"><strong>参考文章</strong></h2><p style="margin-left:0px;"><a href="https://zhw.in/post/virtual-networking/" target="_blank"><u>虚拟组网工具推荐</u></a><br><a href="https://zhuanlan.zhihu.com/p/29100706" target="_blank"><u>网络唤醒全攻略(Wake On LAN)</u></a></p></div><!----></div><div style="border:1px solid transparent;" data-v-e1f0100a></div><div class="article-side sideTop" style="display:none;left:0;" data-v-7be936cf data-v-e1f0100a><div class="download-guide-container" data-v-14f9065e data-v-7be936cf><div class="btn-wrapper" data-v-14f9065e><!----><button class="btn btn-view" data-v-14f9065e><i class="iconfont iconfont-phone" data-v-14f9065e></i></button></div><a href="https://sspai.com/s/JYjP" target="_blank" data-v-14f9065e><!----></a></div><div class="item-wrapper" data-v-7be936cf><button class="btn btn-charge" data-v-7be936cf><i class="iconfont" data-v-7be936cf></i></button><span class="count" data-v-7be936cf>8</span></div><div class="item-wrapper" data-v-7be936cf><button class="btn-mini btn-comment" data-v-7be936cf><i class="iconfont iconfont-comment" data-v-7be936cf></i></button><span class="count" data-v-7be936cf>0</span></div><div class="item-wrapper" data-v-7be936cf><span data-v-7be936cf><div role="tooltip" id="el-popover-1677" aria-hidden="true" class="el-popover el-popper popper-share right ss-popper-dark-border" style="width:undefinedpx;display:none;"><!----><div class="article-side-share-btn"><a href="https://service.weibo.com/share/share.php?url=null?ref=weibo&title=%E3%80%90Tailscale%EF%BC%9A%E8%AE%A9%E4%BD%A0%E5%8F%AF%E4%BB%A5%E9%9A%8F%E6%97%B6%E9%9A%8F%E5%9C%B0%E7%94%A8%20NAS%20%E5%92%8C%E5%AE%B6%E9%87%8C%E7%9A%84%E7%94%B5%E8%84%91%E3%80%91%E8%83%8C%E6%99%AF%E4%B9%B0%E4%BA%86NAS%EF%BC%8C%E5%8D%87%E7%BA%A7%E4%BA%86%E5%8D%83%E5%85%86%E7%9A%84%E5%AE%BD%E5%B8%A6%EF%BC%8C%E7%94%A8%E4%B8%8A%E4%BA%86WebDAV%E7%9A%84%E6%88%91%EF%BC%8C%E7%BB%88%E4%BA%8E%E7%BC%93%E8%A7%A3%E4%BA%86%E6%88%91256G%E7%9A%84MacBookAir%E7%9A%84%E5%AD%98%E5%82%A8%E7%84%A6%E8%99%91%E3%80%82%E7%84%B6%E8%80%8C%EF%BC%8C%E8%BF%99%E4%B8%AA%E7%84%A6%E8%99%91%E4%BC%B4%E9%9A%8F%E7%9D%80%E6%88%91%E8%87%AA%E7%94%B1%E8%81%8C%EF%BC%88%E6%9D%A5%E8%87%AA%20%40%E5%B0%91%E6%95%B0%E6%B4%BEsspai%EF%BC%89%E5%85%A8%E6%96%87%EF%BC%9A&pic=https%3A%2F%2Fcdn.sspai.com%2F2021%2F05%2F24%2Fa258eba51b38be7b9db02b8690008eed.jpeg%3FimageMogr2%2Fauto-orient%2Fquality%2F95%2Fthumbnail%2F!1420x708r%2Fgravity%2FCenter%2Fcrop%2F1420x708%2Finterlace%2F1&appkey=3196502474#" target="_blank"><i class="icon icon-article_weibo right-16"></i></a><span><div role="tooltip" id="el-popover-1837" aria-hidden="true" class="el-popover el-popper" style="width:undefinedpx;display:none;"><!----><div style="text-align:center;"><div id="qr-code"></div><small class="qr-small">扫码分享</small></div></div><i class="icon icon-article_weixin right-16"></i></span><a href="https://twitter.com/share?text=%E3%80%90Tailscale%EF%BC%9A%E8%AE%A9%E4%BD%A0%E5%8F%AF%E4%BB%A5%E9%9A%8F%E6%97%B6%E9%9A%8F%E5%9C%B0%E7%94%A8%20NAS%20%E5%92%8C%E5%AE%B6%E9%87%8C%E7%9A%84%E7%94%B5%E8%84%91%E3%80%91%E8%83%8C%E6%99%AF%E4%B9%B0%E4%BA%86NAS%EF%BC%8C%E5%8D%87%E7%BA%A7%E4%BA%86%E5%8D%83%E5%85%86%E7%9A%84%E5%AE%BD%E5%B8%A6%EF%BC%8C%E7%94%A8%E4%B8%8A%E4%BA%86WebDAV%E7%9A%84%E6%88%91%EF%BC%8C%E7%BB%88%E4%BA%8E%E7%BC%93%E8%A7%A3%E4%BA%86%E6%88%91256G%E7%9A%84MacBookAir%E7%9A%84%E5%AD%98%E5%82%A8%E7%84%A6%E8%99%91%E3%80%82%E7%84%B6%E8%80%8C%EF%BC%8C%E8%BF%99%E4%B8%AA%E7%84%A6%E8%99%91%E4%BC%B4%E9%9A%8F%E7%9D%80%E6%88%91%E8%87%AA%E7%94%B1%E8%81%8C%EF%BC%88%E6%9D%A5%E8%87%AA%20%40%E5%B0%91%E6%95%B0%E6%B4%BEsspai%EF%BC%89%E5%85%A8%E6%96%87%EF%BC%9A&url=null" target="_blank" class="twitter"><i class="icon icon-article_twitter right-16"></i></a></div></div><button class="btn-mini btn-share" data-v-7be936cf><i class="iconfont iconfont-share" data-v-7be936cf></i></button></span></div><div class="item-wrapper" data-v-7be936cf><button class="btn-mini btn-collect" data-v-7be936cf><i class="iconfont iconfont-collect" data-v-7be936cf></i></button></div><!----></div><!---->  
</div>
            