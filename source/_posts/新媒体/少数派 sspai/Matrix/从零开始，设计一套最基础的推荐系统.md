
---
title: '从零开始，设计一套最基础的推荐系统'
categories: 
 - 新媒体
 - 少数派 sspai
 - Matrix
headimg: 'https://picsum.photos/400/300?random=7981'
author: 少数派 sspai
comments: false
date: Sun, 04 Apr 2021 15:01:39 GMT
thumbnail: 'https://picsum.photos/400/300?random=7981'
---

<div>   
<div class="articleWidth-content" data-v-e1f0100a><div class="content wangEditor-txt minHeight" data-v-e1f0100a><p>无论是在淘宝购物、在饿了么点外卖，还是在网易云音乐听歌、在抖音刷小视频，甚至是在招聘网站求职，我们总是避不开一个词语：猜你喜欢。</p><p>有时候，它叫「每日推荐」；有时候，它成了「综合排序」中的组成部分；有时候，它可能明确称为「广告」；也有时候，它就是你的列表中普通、平凡、毫无标识的一项；还有时候，它是通知栏推送过来的一条小提示。</p><p>今日头条和微博会直接把你最关心的新闻推送到你的时间流，让你不再需要从每天的报纸中翻找；淘宝和京东在你搜索商品后直接推荐给你最适合的价位、品牌，大大降低了购物的门槛；下午闲暇时光，豆瓣给你推送了书和电影，再和着网易云推送的几首小歌——科技给我们带来了慵懒的快乐，将选择强迫症们解放出来，真是令人心醉。</p><p>这样的推荐是如何做出的？为什么它们能够知道我所喜欢？以听歌为例，我们来尝试着设计一个最基础的推荐系统，为我们的听歌人兰兰推荐几首她可能喜欢的歌。</p><h2>偏好收集</h2><h3>显式的偏好收集</h3><p>巧妇难为无米之炊，如果没有对兰兰的基础认识，那么给她推荐歌曲就是盲人摸象、大海捞针。于是我们在歌曲推荐的伊始，就试着向兰兰提出几个问题：</p><ul><li>你是男生还是女生？</li><li>你在哪个城市？</li><li>你比较喜欢听下述哪几种音乐类型？</li><li>你喜欢下面哪几首歌？</li></ul><p>这些问题，有的比较直白，有的相对隐晦，但都是为了分析兰兰可能的喜好。这种直接的问询，可以称为「显式的偏好收集」。</p><h3>隐式的偏好收集</h3><p>相对的，当我们根据隐私政策，记录下兰兰在听歌过程中的操作：</p><ul><li>快速地切换下一首</li><li>听完了整首歌曲</li><li>手动点击「喜爱」</li><li>分享给了微信朋友</li></ul><p>这些行为被我们转译成兰兰对这首歌的喜好程度，从而完善了兰兰的听歌兴趣。相应的，我们把这个过程称为「隐式的偏好收集」。</p><p>两种方式各有利弊。显式的方式需要兰兰手动填写，兰兰会嫌麻烦，而且打扰了她听歌的心情，但是体现了兰兰自己的想法，更加准确、快速。而隐式的方式会自动收集数据，但是过度跟踪可能让兰兰比较反感，分析也容易产生比较大的噪音。</p><h2>基于内容的推荐</h2><p>现在，我们可以尝试给兰兰推荐音乐了。</p><p>基于内容的推荐策略十分简洁。我们假定已经对音乐库中的每一首歌充分解析，并给每一首歌打上了标签。那么，当兰兰听了一首歌，并对它表现出极大的兴趣，我们就从音乐库中寻找和这首歌标签相似的其他歌曲，推荐给兰兰。</p><p>举个例子，如果兰兰听了一首《两只老虎》，还加入了收藏夹。我们的系统记录下了这样一条：</p><ul><li>兰兰喜欢听「儿歌」</li></ul><p>于是，我们继续为她推送其他包含「儿歌」标签的歌曲，例如《小星星》。</p><p>整个过程完全依赖于歌曲之间的相似度，以及兰兰的偏好和歌曲之间的匹配程度。这还远远不够。</p><h2>协同过滤</h2><h3>基于听歌人的协同过滤</h3><p>为了给兰兰推荐更多好听的歌，我们又邀请了两个听歌人，小明和小玲。</p><p>这一次，小明、小玲、兰兰分别在自己的房里听歌。在听完《星星点灯》、《给自己的歌》之后，小明和兰兰都对这两首歌十分喜欢，而小玲却丝毫不感兴趣。那么，我们的系统记录下了这样一条：</p><ul><li>小明和兰兰的听歌兴趣相似</li></ul><p>我们挖了挖小明以前听过的歌，发现他也很喜欢《南方姑娘》。既然我们的系统认为小明和兰兰的爱好相近，于是我们尝试给兰兰推荐了这首《南方姑娘》。</p><p>因为这种方式是对听歌人进行分析，所以我们不妨把它称为「基于听歌人的协同过滤」。</p><h3>基于歌曲的协同过滤</h3><p>我们继续邀请其他听歌人进来为我们提供兴趣数据。这次，我们邀请到了小红和小白。</p><p>我们依然让他们各自在房里听歌。听了《梦醒时分》和《大海》之后，小红、小白不约而同地对它们表现出了极大的喜爱。这一次，我们的系统是这样记录的：</p><ul><li>《梦醒时分》和《大海》具有相似的听众</li></ul><p>当我们惊喜地发现兰兰也喜欢《梦醒时分》的时候，我们觉得她很可能也喜欢《大海》，于是就为她推送了这首歌。</p><p>这种方式的分析对象从听歌人换成了歌曲本身，我们可以称之为「基于歌曲的协同过滤」。</p><h2>非个性化的推荐</h2><p>前面介绍的几种方式，都可以使得每个人收到的歌单各不相同，称为「个性化推荐」。最后，我们还需要加入一些非个性化的推荐技术，来让我们的推荐系统更加实用。</p><p>我们首先加入「新歌榜」，这是对「新增内容」的一种优先策略。由于新歌刚刚加入曲库，数据还不足以支撑起推荐给大量听歌人，对新歌的优先策略可以给它们提供一定的冷启动过程。</p><p>我们还要加入「热歌榜」，这是对「热点内容」的优先策略。一首歌之所以会成为热门歌曲，大概就是符合大部分人的审美。虽然许多人通过个性化推荐的策略并没有匹配到这首歌，但是既然符合大部分人的审美，说不定他们也会喜欢这首热门歌曲，不妨一试。</p><p>这些个性化或者非个性化的推荐分别得到了一系列歌单，将它们按一定比例交替出现，亦或在不同的区域中分别展示，就成了我们为听歌人们推荐各自推荐的「猜你喜欢」啦。</p><p> </p><p> </p></div><!----></div><div style="border:1px solid transparent;" data-v-e1f0100a></div><div class="article-side sideTop" style="display:none;left:0;" data-v-7be936cf data-v-e1f0100a><div class="download-guide-container" data-v-14f9065e data-v-7be936cf><div class="btn-wrapper" data-v-14f9065e><!----><button class="btn btn-view" data-v-14f9065e><i class="iconfont iconfont-phone" data-v-14f9065e></i></button></div><a href="https://sspai.com/s/JYjP" target="_blank" data-v-14f9065e><!----></a></div><div class="item-wrapper" data-v-7be936cf><button class="btn btn-charge" data-v-7be936cf><i class="iconfont" data-v-7be936cf></i></button><span class="count" data-v-7be936cf>3</span></div><div class="item-wrapper" data-v-7be936cf><button class="btn-mini btn-comment" data-v-7be936cf><i class="iconfont iconfont-comment" data-v-7be936cf></i></button><span class="count" data-v-7be936cf>1</span></div><div class="item-wrapper" data-v-7be936cf><span data-v-7be936cf><div role="tooltip" id="el-popover-3615" aria-hidden="true" class="el-popover el-popper popper-share right ss-popper-dark-border" style="width:undefinedpx;display:none;"><!----><div class="article-side-share-btn"><a href="https://service.weibo.com/share/share.php?url=null?ref=weibo&title=%E3%80%90%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%8C%E8%AE%BE%E8%AE%A1%E4%B8%80%E5%A5%97%E6%9C%80%E5%9F%BA%E7%A1%80%E7%9A%84%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E3%80%91%E6%97%A0%E8%AE%BA%E6%98%AF%E5%9C%A8%E6%B7%98%E5%AE%9D%E8%B4%AD%E7%89%A9%E3%80%81%E5%9C%A8%E9%A5%BF%E4%BA%86%E4%B9%88%E7%82%B9%E5%A4%96%E5%8D%96%EF%BC%8C%E8%BF%98%E6%98%AF%E5%9C%A8%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E5%90%AC%E6%AD%8C%E3%80%81%E5%9C%A8%E6%8A%96%E9%9F%B3%E5%88%B7%E5%B0%8F%E8%A7%86%E9%A2%91%EF%BC%8C%E7%94%9A%E8%87%B3%E6%98%AF%E5%9C%A8%E6%8B%9B%E8%81%98%E7%BD%91%E7%AB%99%E6%B1%82%E8%81%8C%EF%BC%8C%E6%88%91%E4%BB%AC%E6%80%BB%E6%98%AF%E9%81%BF%E4%B8%8D%E5%BC%80%E4%B8%80%E4%B8%AA%E8%AF%8D%E8%AF%AD%EF%BC%9A%E7%8C%9C%E4%BD%A0%E5%96%9C%E6%AC%A2%E3%80%82%E6%9C%89%E6%97%B6%E5%80%99%EF%BC%8C%E5%AE%83%E5%8F%AB%EF%BC%88%E6%9D%A5%E8%87%AA%20%40%E5%B0%91%E6%95%B0%E6%B4%BEsspai%EF%BC%89%E5%85%A8%E6%96%87%EF%BC%9A&pic=https%3A%2F%2Fcdn.sspai.com%2F2021%2F04%2F04%2F02b962bab1c87e0183e4bf16e7df16ff.jpg%3FimageMogr2%2Fauto-orient%2Fquality%2F95%2Fthumbnail%2F!1420x708r%2Fgravity%2FCenter%2Fcrop%2F1420x708%2Finterlace%2F1&appkey=3196502474#" target="_blank"><i class="icon icon-article_weibo right-16"></i></a><span><div role="tooltip" id="el-popover-7650" aria-hidden="true" class="el-popover el-popper" style="width:undefinedpx;display:none;"><!----><div style="text-align:center;"><div id="qr-code"></div><small class="qr-small">扫码分享</small></div></div><i class="icon icon-article_weixin right-16"></i></span><a href="https://twitter.com/share?text=%E3%80%90%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%8C%E8%AE%BE%E8%AE%A1%E4%B8%80%E5%A5%97%E6%9C%80%E5%9F%BA%E7%A1%80%E7%9A%84%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E3%80%91%E6%97%A0%E8%AE%BA%E6%98%AF%E5%9C%A8%E6%B7%98%E5%AE%9D%E8%B4%AD%E7%89%A9%E3%80%81%E5%9C%A8%E9%A5%BF%E4%BA%86%E4%B9%88%E7%82%B9%E5%A4%96%E5%8D%96%EF%BC%8C%E8%BF%98%E6%98%AF%E5%9C%A8%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E5%90%AC%E6%AD%8C%E3%80%81%E5%9C%A8%E6%8A%96%E9%9F%B3%E5%88%B7%E5%B0%8F%E8%A7%86%E9%A2%91%EF%BC%8C%E7%94%9A%E8%87%B3%E6%98%AF%E5%9C%A8%E6%8B%9B%E8%81%98%E7%BD%91%E7%AB%99%E6%B1%82%E8%81%8C%EF%BC%8C%E6%88%91%E4%BB%AC%E6%80%BB%E6%98%AF%E9%81%BF%E4%B8%8D%E5%BC%80%E4%B8%80%E4%B8%AA%E8%AF%8D%E8%AF%AD%EF%BC%9A%E7%8C%9C%E4%BD%A0%E5%96%9C%E6%AC%A2%E3%80%82%E6%9C%89%E6%97%B6%E5%80%99%EF%BC%8C%E5%AE%83%E5%8F%AB%EF%BC%88%E6%9D%A5%E8%87%AA%20%40%E5%B0%91%E6%95%B0%E6%B4%BEsspai%EF%BC%89%E5%85%A8%E6%96%87%EF%BC%9A&url=null" target="_blank" class="twitter"><i class="icon icon-article_twitter right-16"></i></a></div></div><button class="btn-mini btn-share" data-v-7be936cf><i class="iconfont iconfont-share" data-v-7be936cf></i></button></span></div><div class="item-wrapper" data-v-7be936cf><button class="btn-mini btn-collect" data-v-7be936cf><i class="iconfont iconfont-collect" data-v-7be936cf></i></button></div><!----></div><!---->  
</div>
            