
---
title: '快人一步：使用 Tasker+AutoX 一键直达健康码'
categories: 
 - 新媒体
 - 少数派 sspai
 - Matrix
headimg: 'https://cdn.sspai.com/2021/04/02/a69e7fffcf1298d6b8a5f8a433cd5bab.jpg?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1'
author: 少数派 sspai
comments: false
date: Fri, 02 Apr 2021 12:24:10 GMT
thumbnail: 'https://cdn.sspai.com/2021/04/02/a69e7fffcf1298d6b8a5f8a433cd5bab.jpg?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1'
---

<div>   
<div class="articleWidth-content" data-v-e1f0100a><div class="content wangEditor-txt minHeight" data-v-e1f0100a><h2>没人能比我更快打开健康码</h2><p>在疫情常态化防控的当下，健康码似乎已经成为我们日常生活的一部分。</p><p>你也许经历过这样的场景：进入写字楼、商场时被要求出示健康码、或需要扫码登记行程。你掏出手机，找到微信/支付宝，搜索健康码小程序。等待程序加载完成后，还需要再手动选择一次。整个过程耗时 1-2 分钟，你就这样傻傻地站在原地操作，感受极差。</p><figure class="image ss-img-wrapper image_resized" style="width:293px;"><img src="https://cdn.sspai.com/2021/04/02/a69e7fffcf1298d6b8a5f8a433cd5bab.jpg?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/04/02/a69e7fffcf1298d6b8a5f8a433cd5bab.jpg" referrerpolicy="no-referrer"><figcaption>旧版北京健康宝每次打开都要点一次“确认”</figcaption></figure><p>那有没有快一点的方法呢？有的，不管是 iOS 还是 Android 都可以添加健康码小程序快捷方式到桌面，一键打开小程序。还可以通过设置，双击手机背面快速打开小程序（<a href="https://zhuanlan.zhihu.com/p/260077128" target="_blank">iOS教程</a>、<a href="https://sspai.com/post/61948" target="_blank">Android教程</a>）。</p><p>还能再给力一点吗？可以的。在 Android 手机上，我们可以通过 Tasker 触发 AutoX 脚本，让程序自动点击页面元素，实现真正的“一键直达”，效果如下图所示。</p><figure class="image ss-img-wrapper image_resized" style="width:299px;"><img src="https://cdn.sspai.com/2021/04/02/209c7cc97b33413800089702b7140e2b.gif" data-original="https://cdn.sspai.com/2021/04/02/209c7cc97b33413800089702b7140e2b.gif" referrerpolicy="no-referrer"><figcaption>一键直达健康宝扫码功能</figcaption></figure><h2>AutoX 是什么</h2><p>AutoX 是一个开源的 Android 自动化工具，使用 JS 作为脚本语言。主要特性如下：</p><ul><li>基于无障碍服务实现，无需 Root 权限即可完成自动化操作；</li><li>可以作为 Tasker 插件，与 Tasker 结合使用；</li><li>有完善的文档和示例程序，容易上手；</li><li>提供 JS IDE 和 VSCode 插件，用于编码和调试。</li></ul><h2>在 AutoX 中运行脚本</h2><ol><li>安装并设置权限：从 <a href="https://github.com/kkevsekk1/AutoX/releases" target="_blank">AutoX Release 页</a> 下载最新版本，并授予无障碍设置、后台运行等权限。</li><li>在 AutoX 中新建脚本，贴入以下示例脚本，保存并运行。</li></ol><pre class="language-javascript"><code>app.startActivity(&#123;
    action: "VIEW",
    data: "alipays://platformapi/startapp?appId=2021001135679870"    
&#125;);

// 等待小程序加载完成：页面常驻元素出现则认为页面已加载完成
while(!(text("本人健康码自查询").exists() && text("本人信息扫码登记").exists()))&#123;
    sleep(1);
&#125;

// 未登录状态持续点击“确定”以跳过各种声明、登录选项
while(!text("此处修改为你的姓名").exists() )&#123;
    if(text("确定").exists())&#123;
        click("确定");
    &#125;
    sleep(1);
&#125;

// 登录完成后（你的名字出现在页面上）进入目标功能
while(!click("本人信息扫码登记"));</code></pre><p>注：脚本涉及到的功能对应官方文档：<a href="http://doc.autoxjs.com/#/app?id=appintentoptions" target="_blank">意图Intent</a>、<a href="http://doc.autoxjs.com/#/widgetsBasedAutomation?id=uiselector" target="_blank">UiSelector</a>、<a href="http://doc.autoxjs.com/#/widgetsBasedAutomation?id=uiobject" target="_blank">UiObject</a>。</p><h2>添加脚本快捷方式到桌面</h2><p>方式一：长按桌面，添加 AutoX 的小部件，并选择脚本。</p><figure class="image ss-img-wrapper image_resized" style="width:436px;"><img src="https://cdn.sspai.com/2021/04/02/b022327f95cdb940ccb970391381cc4b.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/04/02/b022327f95cdb940ccb970391381cc4b.png" referrerpolicy="no-referrer"><figcaption>添加 AutoX 小部件到桌面</figcaption></figure><p>此处注意选择左侧小部件，我的手机上选择右侧的小部件会添加失败。</p><p>方式二：在 Tasker 中添加 AutoX 脚本任务，并在桌面添加 Tasker 快捷方式。这样操作的好处是可以为任务设置图标。</p><h3>在 Tasker 中添加 AutoX 脚本</h3><p>设置方式：新建任务→添加动作→插件→Autox.js→配置→选择脚本。</p><h3>为 Tasker 任务设置图标</h3><p>设置方式：在 Tasker 任务编辑页面，点击底部的“网格”状按钮，即可设置图标。</p><figure class="image ss-img-wrapper image_resized" style="width:457px;"><img src="https://cdn.sspai.com/2021/04/02/2c61c8e64a6368a7a184e01eff79585a.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/04/02/2c61c8e64a6368a7a184e01eff79585a.png" referrerpolicy="no-referrer"><figcaption>为 Tasker 任务设置图标</figcaption></figure><h3>添加 Tasker 快捷方式到桌面</h3><p>设置方式：在 Tasker 任务列表页面，按 Back 键返回桌面（注意不是 Home 键），添加“任务快捷方式”（左数第三个小部件）</p><figure class="image ss-img-wrapper image_resized" style="width:466px;"><img src="https://cdn.sspai.com/2021/04/02/09325bc68517bea0963db0829d7f85a5.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/04/02/09325bc68517bea0963db0829d7f85a5.png" referrerpolicy="no-referrer"><figcaption>添加 Tasker 快捷方式到桌面</figcaption></figure><h2>附：一些和正文相关的拓展内容</h2><h3>AutoX 的前世今生</h3><p><a href="https://github.com/kkevsekk1/AutoX" target="_blank">AutoX</a> 的前身是开源项目 <a href="https://github.com/hyb1996/Auto.js" target="_blank">Auto.js</a>，项目的最早版本可以回溯到 2017年1月。</p><p>2020年3月左右，原作者 <a href="https://github.com/hyb1996">hyb1996</a> 声明停止对免费版的维护，开始维护收费的 Pro 版。</p><p>Pro 版有很多<a href="https://pro.autojs.org/features#offline-services" target="_blank">新 Feature</a>，如支持 shizuku，可以在非 root 状态下执行高权限 shell 命令。但是<a href="https://pro.autojs.org/faq" target="_blank">对软件无障碍功能做了限制</a>，无法在黑名单范围内的应用中运行自动点击等功能。</p><p>2020年7月左右，新作者 <a href="https://github.com/kkevsekk1" target="_blank">kkevsekk1</a> 接管项目，在原有基础上对程序进行了若干<a href="http://doc.autoxjs.com/#/?id=autox-%e7%9a%84%e5%8a%9f%e8%83%bd" target="_blank">工程化改造</a>，主要服务开发人员。</p><p>衷心祝愿 Auto.js 两个分支后续都能有良性发展。</p><h3><strong>作为 Tasker 插件，AutoX 与 AutoInput 的差异是什么？</strong></h3><p>作为 Android 自动化的关注者，我在阅读我派的<strong> </strong><a href="https://sspai.com/post/57280" target="_blank">这篇文章</a> 后购买并使用 AutoInput 并轻度使用了一段时间。作为 Tasker 插件，两者都能实现“使用无障碍服务模拟用户操作”的功能。</p><p>AutoInput 的优势：上手门槛低，用户无需接触代码。</p><p>AutoX 的优势有：免费、性能更好，以及基于代码带来的优势——开发效率更高，可复用性更强（可在脚本内引用其他脚本、使用其他人封装的 <a href="http://doc.autoxjs.com/#/modules" target="_blank">Modules</a>），更适合 Power user 使用。</p><blockquote><p>正如 <a href="https://sspai.com/post/42361#ss-2-1513973978946:~:text=Workflow%20%E6%8F%90%E4%BE%9B%E7%9A%84%E5%B9%B6%E4%B8%8D%E6%98%AF%E5%AE%8C%E5%A4%87%E7%9A%84%E7%BC%96%E7%A8%8B%E8%83%BD%E5%8A%9B%EF%BC%8C%E8%BF%99%E5%AF%B9%E6%88%91%E8%BF%99%E4%B8%AA%E7%A8%8B%E5%BA%8F%E5%91%98%E6%9D%A5%E8%AF%B4%E5%B9%B6%E4%B8%8D%E6%98%AF%E4%B8%80%E4%B8%AA%E5%AE%8C%E7%BE%8E%E7%9A%84%E7%8A%B6%E6%80%81%EF%BC%8C%E6%88%91%E5%B8%8C%E6%9C%9B%E6%88%91%E7%9A%84%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7%E6%98%AF%E5%8F%AF%E4%BB%A5%E5%AE%8C%E5%85%A8%E7%94%B1%E8%87%AA%E5%B7%B1%E5%86%B3%E5%AE%9A%E4%BB%96%E7%9A%84%E5%8A%9F%E8%83%BD%EF%BC%8C%E4%BB%96%E7%9A%84%E7%95%8C%E9%9D%A2%EF%BC%8C%E4%BB%96%E7%9A%84%E4%B8%80%E5%88%87%E3%80%82" target="_blank">JSBox 作者所说</a>：我这一类人是不适合在 Workflow 上面拖来拖去的，因为 Workflow 提供的并不是完备的编程能力，这对我这个程序员来说并不是一个完美的状态，我希望我的效率工具是可以完全由自己决定他的功能，他的界面，他的一切。</p></blockquote><h3>北京健康宝图标资源包</h3><p>已提取北京健康宝常用功能的图标，方便大家使用，<a href="https://1drv.ms/u/s!AgBUJ7lUhmQjrzLPxGNKCPurVFqM?e=dsa3w6" target="_blank">点这里下载</a>。</p><h3>支付宝小程序 appid 获取方法</h3><p>大部分常用小程序都能在网上查到对应 ID，搜索 "支付宝"+"appid"+"小程序名称" 即可，善用前人智慧。</p><p>从分享链接中提取：进入支付宝小程序→点击右上角“更多”→分享→复制链接，得到短链接如：https://ur.alipay.com/2IcAMP</p><p>在 PC 端浏览器中访问短链接，页面第一次跳转后快速按 Esc，在浏览器地址栏得到长链接如：https://render.alipay.com/p/s/i/?scheme=alipays%3A%2F%2Fplatformapi%2Fstartapp%3FappId%3D2021001135679870%26page%3Dpages%252Fhome%252Findex%26enbsv%3D0.2.2103202323.33%26chInfo%3Dch_share__chsub_CopyLink</p><p>长链接中“appId%3D”后即为小程序 appid。</p></div><!----></div><div style="border:1px solid transparent;" data-v-e1f0100a></div><div class="article-side sideTop" style="display:none;left:0;" data-v-7be936cf data-v-e1f0100a><div class="download-guide-container" data-v-14f9065e data-v-7be936cf><div class="btn-wrapper" data-v-14f9065e><!----><button class="btn btn-view" data-v-14f9065e><i class="iconfont iconfont-phone" data-v-14f9065e></i></button></div><a href="https://sspai.com/s/JYjP" target="_blank" data-v-14f9065e><!----></a></div><div class="item-wrapper" data-v-7be936cf><button class="btn btn-charge" data-v-7be936cf><i class="iconfont" data-v-7be936cf></i></button><span class="count" data-v-7be936cf>1</span></div><div class="item-wrapper" data-v-7be936cf><button class="btn-mini btn-comment" data-v-7be936cf><i class="iconfont iconfont-comment" data-v-7be936cf></i></button><span class="count" data-v-7be936cf>4</span></div><div class="item-wrapper" data-v-7be936cf><span data-v-7be936cf><div role="tooltip" id="el-popover-5372" aria-hidden="true" class="el-popover el-popper popper-share right ss-popper-dark-border" style="width:undefinedpx;display:none;"><!----><div class="article-side-share-btn"><a href="https://service.weibo.com/share/share.php?url=null?ref=weibo&title=%E3%80%90%E5%BF%AB%E4%BA%BA%E4%B8%80%E6%AD%A5%EF%BC%9A%E4%BD%BF%E7%94%A8%20Tasker%2BAutoX%20%E4%B8%80%E9%94%AE%E7%9B%B4%E8%BE%BE%E5%81%A5%E5%BA%B7%E7%A0%81%E3%80%91%E6%B2%A1%E4%BA%BA%E8%83%BD%E6%AF%94%E6%88%91%E6%9B%B4%E5%BF%AB%E6%89%93%E5%BC%80%E5%81%A5%E5%BA%B7%E7%A0%81%E5%9C%A8%E7%96%AB%E6%83%85%E5%B8%B8%E6%80%81%E5%8C%96%E9%98%B2%E6%8E%A7%E7%9A%84%E5%BD%93%E4%B8%8B%EF%BC%8C%E5%81%A5%E5%BA%B7%E7%A0%81%E4%BC%BC%E4%B9%8E%E5%B7%B2%E7%BB%8F%E6%88%90%E4%B8%BA%E6%88%91%E4%BB%AC%E6%97%A5%E5%B8%B8%E7%94%9F%E6%B4%BB%E7%9A%84%E4%B8%80%E9%83%A8%E5%88%86%E3%80%82%E4%BD%A0%E4%B9%9F%E8%AE%B8%E7%BB%8F%E5%8E%86%E8%BF%87%E8%BF%99%E6%A0%B7%E7%9A%84%E5%9C%BA%E6%99%AF%EF%BC%9A%E8%BF%9B%E5%85%A5%E5%86%99%E5%AD%97%E6%A5%BC%E3%80%81%E5%95%86%E5%9C%BA%E6%97%B6%E8%A2%AB%E8%A6%81%E6%B1%82%E5%87%BA%E7%A4%BA%EF%BC%88%E6%9D%A5%E8%87%AA%20%40%E5%B0%91%E6%95%B0%E6%B4%BEsspai%EF%BC%89%E5%85%A8%E6%96%87%EF%BC%9A&pic=&appkey=3196502474#" target="_blank"><i class="icon icon-article_weibo right-16"></i></a><span><div role="tooltip" id="el-popover-6544" aria-hidden="true" class="el-popover el-popper" style="width:undefinedpx;display:none;"><!----><div style="text-align:center;"><div id="qr-code"></div><small class="qr-small">扫码分享</small></div></div><i class="icon icon-article_weixin right-16"></i></span><a href="https://twitter.com/share?text=%E3%80%90%E5%BF%AB%E4%BA%BA%E4%B8%80%E6%AD%A5%EF%BC%9A%E4%BD%BF%E7%94%A8%20Tasker%2BAutoX%20%E4%B8%80%E9%94%AE%E7%9B%B4%E8%BE%BE%E5%81%A5%E5%BA%B7%E7%A0%81%E3%80%91%E6%B2%A1%E4%BA%BA%E8%83%BD%E6%AF%94%E6%88%91%E6%9B%B4%E5%BF%AB%E6%89%93%E5%BC%80%E5%81%A5%E5%BA%B7%E7%A0%81%E5%9C%A8%E7%96%AB%E6%83%85%E5%B8%B8%E6%80%81%E5%8C%96%E9%98%B2%E6%8E%A7%E7%9A%84%E5%BD%93%E4%B8%8B%EF%BC%8C%E5%81%A5%E5%BA%B7%E7%A0%81%E4%BC%BC%E4%B9%8E%E5%B7%B2%E7%BB%8F%E6%88%90%E4%B8%BA%E6%88%91%E4%BB%AC%E6%97%A5%E5%B8%B8%E7%94%9F%E6%B4%BB%E7%9A%84%E4%B8%80%E9%83%A8%E5%88%86%E3%80%82%E4%BD%A0%E4%B9%9F%E8%AE%B8%E7%BB%8F%E5%8E%86%E8%BF%87%E8%BF%99%E6%A0%B7%E7%9A%84%E5%9C%BA%E6%99%AF%EF%BC%9A%E8%BF%9B%E5%85%A5%E5%86%99%E5%AD%97%E6%A5%BC%E3%80%81%E5%95%86%E5%9C%BA%E6%97%B6%E8%A2%AB%E8%A6%81%E6%B1%82%E5%87%BA%E7%A4%BA%EF%BC%88%E6%9D%A5%E8%87%AA%20%40%E5%B0%91%E6%95%B0%E6%B4%BEsspai%EF%BC%89%E5%85%A8%E6%96%87%EF%BC%9A&url=null" target="_blank" class="twitter"><i class="icon icon-article_twitter right-16"></i></a></div></div><button class="btn-mini btn-share" data-v-7be936cf><i class="iconfont iconfont-share" data-v-7be936cf></i></button></span></div><div class="item-wrapper" data-v-7be936cf><button class="btn-mini btn-collect" data-v-7be936cf><i class="iconfont iconfont-collect" data-v-7be936cf></i></button></div><!----></div><!---->  
</div>
            