
---
title: '用 GIt 在 Android 和 Windows 间同步 Obsidian 数据库'
categories: 
 - 新媒体
 - 少数派 sspai
 - Matrix
headimg: 'https://cdn.sspai.com/2021/09/28/61f5b3c159cda3f8f99ec3328995cdeb.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1'
author: 少数派 sspai
comments: false
date: Sun, 26 Sep 2021 06:45:48 GMT
thumbnail: 'https://cdn.sspai.com/2021/09/28/61f5b3c159cda3f8f99ec3328995cdeb.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1'
---

<div>   
<div class="articleWidth-content" data-v-6a669db8><div class="content wangEditor-txt minHeight" data-v-6a669db8><h2>前言</h2><p>如果你使用 <a href="https://help.obsidian.md/Obsidian/Android+app" target="_blank">Android 版 Obsidian</a>，一个必须考虑的问题就是如何与电脑端同步笔记。</p><p>对此，诚然可以选择官方的 <a href="https://help.obsidian.md/Licenses+%26+add-on+services/Obsidian+Sync" target="_blank">Obsidian Sync</a> 服务，或者使用 Dropbox 等第三方同步工具，但我最推荐的还是<strong>使用 Git 同步</strong>。理由在于：</p><ul><li>相比其他解决方案，Git 是开源的，不仅免费，而且安全性有保证；</li><li>作为最先进的分布式版本控制系统（没有之一），用 Git 可以方便地实现版本回溯和协同编辑等功能；</li><li>Git 支持多种操作系统（Windows、macOS、Linux、Android、iOS），可以按需托管在国内外多家平台上（国外的 <a href="https://github.com/">GitHub</a>、<a href="https://about.gitlab.com/">GitLab</a>，国内的 <a href="https://gitee.com/">Gitee</a>、<a href="https://coding.net/products/repo">CODING</a>）。</li></ul><p>当然，<strong>用 Git 同步的方案也有局限</strong>，包括有一定的学习成本，对纯新手不友好；多设备同时编辑容易产生冲突；以及需要另行手动备份存档等。</p><p>但瑕不掩瑜，Git 仍然是我在 Windows 桌面端和 Android 端同步 Obsidian 的首选。本文就为大家介绍我的具体实现方案。</p><p>（<strong>注：</strong>行文简洁起见，本文假定读者掌握命令行环境的基本操作，对于 Git 的功能和机制有初步了解。如果你不了解Git，那么本文食用起来可能会比较困难，不妨先通过<a href="https://www.liaoxuefeng.com/wiki/896043488029600">廖雪峰的 Git 教程</a>简单学习后再来尝试。）</p><h2>Windows 桌面端的准备工作</h2><h3>第一步：安装 Git</h3><p>在开始之前，请确保自己的 Windows 系统中已经安装了 Git。如果还没有安装，可以参考<a href="https://www.liaoxuefeng.com/wiki/896043488029600/896067074338496">廖雪峰的教程</a>。如果你已经安装了，那么可以跳过这一步。</p><h3>第二步：在 Git 托管平台中新建仓库</h3><p>接下来，我们在自己选用的 Git 托管平台上新建一个笔记专用仓库。</p><p>考虑到国内用户的访问便捷程度和中文支持，本文将主要使用国产服务 Gitee 演示（<a href="https://gitee.com/">官网注册链接</a>），并简单说明更为主流的 GitHub 平台的对应操作，</p><ul><li>如果使用 Gitee：在顶部导航条点击「+」>「新建仓库」，根据提示填写信息即可。</li><li>如果使用 GitHub：在顶部导航条点击「+」>「New Repository」，根据提示填写信息即可。</li></ul><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/09/28/61f5b3c159cda3f8f99ec3328995cdeb.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/09/28/61f5b3c159cda3f8f99ec3328995cdeb.png" referrerpolicy="no-referrer"></figure><h3>第三步：生成 SSH 密钥</h3><p>接着，我们需要生成一个 SSH 密钥（SSH Key），用于在本地和远程 Git 仓库同步时验证身份。</p><h4>方法一：自动配置</h4><p>为方便新手用户，我准备了一个配置脚本，按照如下步骤运行即可完成配置：</p><ol><li>在本地笔记仓库的根目录下创建一个空白的 txt（后缀为 <code>.txt</code>）文档；</li><li>将下面的代码复制粘贴到上面的空白文档中，将其中标注的用户名、邮箱等信息修改为你自己的相应信息，然后保存；</li><li>修改文档后缀为 <code>.sh</code> 并保存，双击执行脚本。</li></ol><pre class="language-shell"><code>#
titleLeft="【"
titleRight="】"
splitLine="====================================================="
#用户名
userName="这里改成你的用户名"
#邮箱
email="这里改成你的Email"
#模块项目名
projectName="ObsidianRepositorys"
#echo 域名：$&#123;titleLeft&#125;$&#123;domain&#125;$&#123;titleRight&#125;
echo 用户名：$&#123;titleLeft&#125;$&#123;userName&#125;$&#123;titleRight&#125;
echo 邮箱：$&#123;titleLeft&#125;$&#123;email&#125;$&#123;titleRight&#125;
echo PS：用户名非本人时，请将脚本中的userName和email修改为本人

#配置git用户名和邮箱
git config --global  user.name $&#123;userName&#125;
git config --global user.email $&#123;email&#125;
git config --global  --list 
echo "无需设置密码，直接点击enter或者y键确认即可"
ssh-keygen -t rsa -C "$&#123;email&#125;"

echo "copy下面的公钥添加到远程仓库"
#打印公钥
echo $&#123;splitLine&#125;
cat ~/.ssh/id_rsa.pub
echo $&#123;splitLine&#125;
#执行完毕之后不自动关闭窗口
echo 按任意键退出
read -n 1
echo 继续运行</code></pre><p><strong>注意：</strong></p><ol><li>如果你本地之前生成过 SSH，那么脚本会提示你是否覆盖，此时输入 <code>y</code> 回车即可。</li><li>如果操作中途不小心关掉了脚本窗口，不要慌，双击重新执行脚本即可。</li><li>执行过程中会出现如下图所示的四次提示确认步骤，简单起见，建议大家<strong>直接回车</strong>不设置参数（当然如果你明白这些步骤的具体含义，也可以设置需要的参数）。</li></ol><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/09/26/5890d693616616ce19b4e15154a45478.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/09/26/5890d693616616ce19b4e15154a45478.png" referrerpolicy="no-referrer"></figure><p>脚本执行完后，<strong>将分割线里面的内容复制出来保存好</strong>。后面会用到。</p><h4>方法二：手动配置</h4><p>如果你希望自己动手完成配置过程，下面介绍手动配置方法，这与前述脚本是等效的。</p><p>在本地笔记仓库的根目录下点击鼠标右键，选择 <strong>Git Bash</strong>：</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/09/28/e8dc6683e82f0a0f4a7a6bd1bfdb132b.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/09/28/e8dc6683e82f0a0f4a7a6bd1bfdb132b.png" referrerpolicy="no-referrer"></figure><p>在弹出的 Bash 窗口中，输入下面的命令<strong>配置用户名</strong>：</p><pre class="language-shell"><code>git config --global  user.name 你的用户名</code></pre><p>以及用下面的命令<strong>配置邮箱</strong>：</p><pre class="language-shell"><code>git config --global user.email 你的邮箱</code></pre><p>完成前两步后，可以用下面的命令检查<strong>是否配置成功</strong>：</p><pre class="language-shell"><code>git config --global  --list </code></pre><p>如下图所示，如果返回的结果正确显示了你输入的用户名和邮箱，说明配置是正确的：</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/09/28/747b64e705ff56751d1ed95e8126b99b.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/09/28/747b64e705ff56751d1ed95e8126b99b.png" referrerpolicy="no-referrer"></figure><p> </p><p>接着，输入下面的命令<strong>生成 SSH Key</strong>。参考上面脚本教程的截图，按四个回车即可。</p><pre class="language-shell"><code>ssh-keygen -t rsa -C "你的邮箱替换中文"</code></pre><p>最后，用如下命令<strong>显示生成的公钥</strong>，将其<strong>复制出来备用</strong>：</p><pre class="language-shell"><code>cat ~/.ssh/id_rsa.pub</code></pre><h3>第四步：上传 SSH 公钥</h3><p>下面，我们将生成的 SSH 公钥上传至 Git 托管平台。</p><ul><li><strong>对于 Gitee：</strong>点击导航栏右上角头像，选择「设置」，然后在侧边栏菜单选择「SSH 公钥」，填入上一步保存的公钥内容并保存确认。</li><li><strong>对于 GitHub：</strong>点击导航栏右上角头像，选择「Settings」，然后在侧边栏菜单选择「SSH and GPG keys」，填入上一步保存的公钥内容并保存确认。</li></ul><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/09/28/cd494a41d331643c00c6d1738bd39d63.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/09/28/cd494a41d331643c00c6d1738bd39d63.png" referrerpolicy="no-referrer"></figure><h3>创建本地仓库</h3><p>根据Gitee网页提示创建本地仓库</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/09/26/37bde3db137342b326215438813da7eb.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/09/26/37bde3db137342b326215438813da7eb.png" referrerpolicy="no-referrer"></figure><h3>上传Obsidian工作空间</h3><p>将整个Obsidian工作空间目录下的所有文件都放到本地仓库里面，效果参考下面截图。</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/09/26/a8cd7ca9889547290b4ac758d7a8e5ca.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/09/26/a8cd7ca9889547290b4ac758d7a8e5ca.png" referrerpolicy="no-referrer"></figure><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/09/26/15ec831a624cbc614879384d96ecc6aa.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/09/26/15ec831a624cbc614879384d96ecc6aa.png" referrerpolicy="no-referrer"></figure><h4>安装GitKraken</h4><p><a href="https://www.aliyundrive.com/s/MrTRdAjd2h2">https://www.aliyundrive.com/s/MrTRdAjd2h2</a><br>6.5.1安装完之后不要打开软件，打开安装目录。删除下面目录中的<strong>update.exe</strong>文件。</p><p>GitKraken是笔者平时使用的图形工具，你也可以安装你喜欢的Git图形工具，如SourceTree等。</p><pre class="language-null"><code>C:\Users\lenovo\AppData\Local\gitkraken</code></pre><p>使用下面路径的中的<strong>gitkraken.exe</strong>，作为快捷方式启动程序</p><pre class="language-null"><code>C:\Users\lenovo\AppData\Local\gitkraken\app-6.5.1</code></pre><p>使用GitKraken打开本地仓库，<strong>提交、推送</strong>即可。到目前为止，Windows上的准备工作都做完了</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/09/26/00a7e28f5f7bd06c3422e3b95c2a4331.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/09/26/00a7e28f5f7bd06c3422e3b95c2a4331.png" referrerpolicy="no-referrer"></figure><h2>Android准备</h2><blockquote><p>安装<strong>MGit</strong>客户端app<br>安装<strong>Obsidian</strong>客户端app<br><a href="https://wwa.lanzoui.com/b010t9vef">https://wwa.lanzoui.com/b010t9vef</a><br>密码:2yfq</p></blockquote><span class="ss-linkCard" link-card-href="https://play.google.com/store/apps/details?id=com.manichord.mgit"> </span><span class="ss-linkCard" link-card-href="https://play.google.com/store/apps/details?id=md.obsidian"> </span><p><strong>MGit</strong>是笔者能找到的，最符合个人需求的app。其他的如GitJournal等app多少有些小问题。如果你有更好用的app，欢迎在评论区分享。</p><ol><li>进入设置页面，配置远程仓库下手机的下载路径</li><li>进入设置页面，点击<strong>管理SSHKEY</strong></li><li>点击右上角的“+”生成sshKey</li><li>进入生成的文件，点击右上角的<strong>复制</strong>按钮。复制sshKey</li><li>参考前面的方法上传到Gitee</li><li>从Gitee复制ssh链接，填入远程地址。点击克隆。</li><li>成功之后，打开Obsidian。一般来说，Obsidian自动扫描到你克隆到手机的工作空间。如果没有扫描到，那么你就手动从Obsidian进入<strong>步骤1</strong>中设置的路径。手动打开<strong>工作空间</strong></li></ol><p> </p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/09/28/dd5023c1632a7d143571fa07d27314cd.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/09/28/dd5023c1632a7d143571fa07d27314cd.png" referrerpolicy="no-referrer"></figure><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/09/28/cb40697d52165ac965d48e022712886a.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/09/28/cb40697d52165ac965d48e022712886a.png" referrerpolicy="no-referrer"></figure><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/09/26/534c0e8e1e20a30f4ebc355a72e7bd10.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/09/26/534c0e8e1e20a30f4ebc355a72e7bd10.png" referrerpolicy="no-referrer"></figure><h2>同步成功</h2><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/09/26/24f28d81a3353976e0f1829326232094.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/09/26/24f28d81a3353976e0f1829326232094.png" referrerpolicy="no-referrer"></figure><h2>结语</h2><p>细心的朋友可能已经看出来了，就是Obsidian的工作空间在PC和手机上都是通用的。这方面要为Obsidian的开发团队点赞。<br>个人不建议在手机端编辑文档，屏幕太小影响体验和发挥。手机端只负责查阅即可，编辑还是放到PC端比较好。<br>如果大家有什么更好的建议，可以在评论区告诉我。</p><p> </p><p> </p></div><!----></div><div style="border:1px solid transparent;" data-v-6a669db8></div><div class="article-side sideTop" style="display:none;left:0;" data-v-7be936cf data-v-6a669db8><div class="download-guide-container" data-v-14f9065e data-v-7be936cf><div class="btn-wrapper" data-v-14f9065e><!----><button class="btn btn-view" data-v-14f9065e><i class="iconfont iconfont-phone" data-v-14f9065e></i></button></div><a href="https://sspai.com/s/JYjP" target="_blank" data-v-14f9065e><!----></a></div><div class="item-wrapper" data-v-7be936cf><button class="btn btn-charge" data-v-7be936cf><i class="iconfont" data-v-7be936cf></i></button><span class="count" data-v-7be936cf>4</span></div><div class="item-wrapper" data-v-7be936cf><button class="btn-mini btn-comment" data-v-7be936cf><i class="iconfont iconfont-comment" data-v-7be936cf></i></button><span class="count" data-v-7be936cf>10</span></div><div class="item-wrapper" data-v-7be936cf><span data-v-7be936cf><div role="tooltip" id="el-popover-538" aria-hidden="true" class="el-popover el-popper popper-share right ss-popper-dark-border" style="width:undefinedpx;display:none;"><!----><div class="article-side-share-btn"><a href="https://service.weibo.com/share/share.php?url=null?ref=weibo&title=%E3%80%90%E7%94%A8%20GIt%20%E5%9C%A8%20Android%20%E5%92%8C%20Windows%20%E9%97%B4%E5%90%8C%E6%AD%A5%20Obsidian%20%E6%95%B0%E6%8D%AE%E5%BA%93%E3%80%91*MateData*Author%EF%BC%9AAlex%E5%87%89%E9%A3%8E*link%EF%BC%9A%5B%5D()*Date%EF%BC%9A2021-09-17_%E5%91%A8%E4%BA%94*Tag%EF%BC%9A%23Obsidian*Not%EF%BC%88%E6%9D%A5%E8%87%AA%20%40%E5%B0%91%E6%95%B0%E6%B4%BEsspai%EF%BC%89%E5%85%A8%E6%96%87%EF%BC%9A&pic=https%3A%2F%2Fcdn.sspai.com%2F2021%2F09%2F26%2Fd64c211bc25e92fb48f82e681c6412cb.png%3FimageMogr2%2Fauto-orient%2Fquality%2F95%2Fthumbnail%2F!1420x708r%2Fgravity%2FCenter%2Fcrop%2F1420x708%2Finterlace%2F1&appkey=3196502474#" target="_blank"><i class="iconfont iconfont-weibo-simple right-16"></i></a><span><div role="tooltip" id="el-popover-1894" aria-hidden="true" class="el-popover el-popper" style="width:undefinedpx;display:none;"><!----><div style="text-align:center;"><div id="qr-code"></div><small class="qr-small">扫码分享</small></div></div><span class="el-popover__reference-wrapper"><i class="iconfont iconfont-wechat-simple right-16"></i></span></span><a href="https://twitter.com/share?text=%E3%80%90%E7%94%A8%20GIt%20%E5%9C%A8%20Android%20%E5%92%8C%20Windows%20%E9%97%B4%E5%90%8C%E6%AD%A5%20Obsidian%20%E6%95%B0%E6%8D%AE%E5%BA%93%E3%80%91*MateData*Author%EF%BC%9AAlex%E5%87%89%E9%A3%8E*link%EF%BC%9A%5B%5D()*Date%EF%BC%9A2021-09-17_%E5%91%A8%E4%BA%94*Tag%EF%BC%9A%23Obsidian*Not%EF%BC%88%E6%9D%A5%E8%87%AA%20%40%E5%B0%91%E6%95%B0%E6%B4%BEsspai%EF%BC%89%E5%85%A8%E6%96%87%EF%BC%9A&url=null" target="_blank" class="twitter"><i class="iconfont iconfont-twitter-simple right-16"></i></a></div></div><span class="el-popover__reference-wrapper"><button class="btn-mini btn-share" data-v-7be936cf><i class="iconfont iconfont-share" data-v-7be936cf></i></button></span></span></div><div class="item-wrapper" data-v-7be936cf><button class="btn-mini btn-collect" data-v-7be936cf><i class="iconfont iconfont-collect" data-v-7be936cf></i></button></div><!----></div><!---->  
</div>
            