
---
title: '有沒有支持跨平台的 AirDrop 呢？'
categories: 
 - 新媒体
 - 少数派 sspai
 - Matrix
headimg: 'https://cdn.sspai.com/2021/06/08/8e06ef129cebcd950eeb5fecbf996040.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1'
author: 少数派 sspai
comments: false
date: Tue, 08 Jun 2021 08:34:35 GMT
thumbnail: 'https://cdn.sspai.com/2021/06/08/8e06ef129cebcd950eeb5fecbf996040.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1'
---

<div>   
<div class="articleWidth-content" data-v-e1f0100a><div class="content wangEditor-txt minHeight" data-v-e1f0100a><h3><strong>Matrix 首页推荐</strong></h3><p><a href="https://sspai.com/matrix">Matrix</a> 是少数派的写作社区，我们主张分享真实的产品体验，有实用价值的经验与思考。我们会不定期挑选 Matrix 最优质的文章，展示来自用户的最真实的体验和观点。</p><p>文章代表作者个人观点，少数派仅对标题和排版略作修改。</p><hr><p>如果要我选最爱的 Apple 功能，那必定是 AirDrop。在接触 AirDrop 前，我一直用着笨笨的文件传输方法——以 QQ 作为中转，需要经历「添加好友-上传文件-下载文件」的复杂流程，既耗时、又费力。</p><p>那 AirDrop 有什么好？</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/06/08/8e06ef129cebcd950eeb5fecbf996040.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/06/08/8e06ef129cebcd950eeb5fecbf996040.png" referrerpolicy="no-referrer"><figcaption>简单的 AirDrop 操作</figcaption></figure><p>在《设计心理学》一书说过，「好的设计有两个重要特征：<strong>可视性</strong>（discoverability）及<strong>易通性</strong>（understanding）。」AirDrop 符合这两个特征：</p><ul><li>可视性：在入口位于点击分享后最显眼的地方。</li><li>易通性：选择 AirDrop 后，立刻出现目标设备选项，设计用意明显；设计用途就是分享、发送，没有其他功能。</li></ul><p>此外，同类竞品堆满各式各样的功能，Apple 却始终保持克制，一直在做减法；相较而言，AirDrop 操作逻辑更符合使用直觉，使用只需两步：分享文件、然后选择对象。</p><p>AirDrop 什么都好，易用、速度颇快（33Mbps+）；但谈起它，却始终绕不开<strong>仅限 Apple 设备使用</strong>的硬伤。所以作者群的 <a href="https://sspai.com/u/5ayuq8jn/updates" target="_blank">@陳川端</a> 有天提出疑惑，有沒有支持跨平台的 AirDrop 呢？</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/06/08/b7883b38a91f9321a097bc210baf75f3.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/06/08/b7883b38a91f9321a097bc210baf75f3.png" referrerpolicy="no-referrer"><figcaption>鸽子群截图</figcaption></figure><p>有个工具不但和 AirDrop 一样好用，还开源、全平台支持并且免费。它就是我们今天的主角——Snapdrop。</p><h2>开箱即用</h2><p>受 AirDrop 启发诞生，Snapdrop 功能和界面与 AirDrop 十分相像。Snapdrop 只保留了最核心特性：</p><ul><li>文件传输</li><li>开箱即用</li><li>跨平台，只要有浏览器便能用（Android、iOS、Windows、macOS、Linux）</li><li>离线使用</li></ul><p>只要两个设备在同一个局域网，并且同时打开 <a href="https://snapdrop.net/" target="_blank">snapdrop.net</a> 便能使用。无需任何设置，也不用下载客户端、捣弄端口。这是我看过最<strong>简单</strong>的文件传输方式之一。</p><p>你会获得一个暂时名称作为当前设备的识别码。在截图中，本机的识别码是 <code>Lavender Marten</code>，在局域网发现了台 iOS iPad 叫 <code>Gray Hyena</code>。巧合的是，名字组合规律是【颜色 + 动物】。前者是薰衣草貂，后者是灰色鬣狗，或许这就是程序员的情趣吧。</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/06/08/4a2e126260c8a31322515857a27299f8.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/06/08/4a2e126260c8a31322515857a27299f8.png" referrerpolicy="no-referrer"><figcaption>AirDrop 既视感</figcaption></figure><p>类似 AirDrop，点击设备图标选取发送对象。左键在 macOS 上会弹出 Finder 文件窗口，选中文件即可发送。</p><p>如果右键点击设备图标，则会唤出文字输入框，能发送文字到目标设备。还不快发送情话给你的心仪对象，展开轰轰烈烈的爱情？</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/06/08/30e58c0fd2b1887de5b5aa34dd94be81.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/06/08/30e58c0fd2b1887de5b5aa34dd94be81.png" referrerpolicy="no-referrer"><figcaption>土味情话大师</figcaption></figure><p>理论上，需要浏览器支持 WebRTC API 才能使用。Chrome、Firefox 在 2012 年的版本已经支持 WebRTC，市面主流浏览器都支持。现在应该没人还用 IE 了吧？</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/06/08/a99b8bcf493eebb91cd69fc679f2fa0f.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/06/08/a99b8bcf493eebb91cd69fc679f2fa0f.png" referrerpolicy="no-referrer"><figcaption>源：<a href="https://caniuse.com/rtcpeerconnection" target="_blank">Can I use ___ ?</a></figcaption></figure><h2>以 PWA 为载体</h2><p>在第一次用 Snapdrop 时，Chromium 内核浏览器（e.g. Chrome、Edge）会询问你是否要<strong>安装</strong> Snapdrop。PWA 有着轻量化的优势，占用空间小到可以忽略。</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/06/08/9a941a3f56665ab77a220ebbdc267ab5.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/06/08/9a941a3f56665ab77a220ebbdc267ab5.png" referrerpolicy="no-referrer"><figcaption>PWA 安装弹窗</figcaption></figure><p>在测试过程中，我还发现 Snapdrop 支持 PWA 一个重要的特性——离线使用。Snapdrop 网页会自动进行<strong>缓存</strong>。之后就算没有连接到互联网，就像一个安装好的 App 一般，你仍然能打开 Snapdrop，进行局域网文件传输。</p><p>另外它也支持<strong>系统通知</strong>，当授予通知权限后，每当有新的文件传输完成，便会以原生通知形式出现。</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/06/08/d7bf24682e4300822dc3e970078312c3.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/06/08/d7bf24682e4300822dc3e970078312c3.png" referrerpolicy="no-referrer"><figcaption>macOS 通知 Banner</figcaption></figure><h2>速度尚可</h2><p>这个速度和 AirDrop 相比，实在拉胯。AirDrop 能跑满 802.11n 的宽带（33 Mbps），Snapdrop 显然还差得远。不过，又不是不能用对吧？发送一些小文件非常好用。</p><figure class="table"><table><thead><tr><th>文件大小 / 类型</th><th>第一次测试用时</th><th>第二次测试用时</th><th>平均速度</th></tr></thead><tbody><tr><td>160MB 的 <code>.pkg</code> 文档</td><td>65 s</td><td>60 s</td><td>20.48 Mbps</td></tr><tr><td>50MB <code>.RAW</code> 格式照片</td><td>27 s</td><td>40 s</td><td>11.92 Mbps</td></tr><tr><td>1.6MB <code>.HEIC</code> 照片</td><td>2 s</td><td>1.3 s</td><td>7.76 Mbps</td></tr></tbody></table></figure><p>奇怪的是，从 iPhone 发送 <code>.HEIC</code> 照片到 macOS 电脑时，会自动转换成 <code>.JPEG</code>。 好像是 Safari 为了保证兼容性做的自动转换。</p><p>要避免格式转换，把照片存到 iOS 的文档 App，在选择文件的时候，别选照片，而是选文件。</p><h2>其他细节</h2><p>Snapdrop 在隐私方面让我颇为放心：</p><p>第一，它是<strong>开源</strong>的。</p><p>第二，Snapdrop <a href="https://github.com/RobinLinus/snapdrop/blob/master/docs/faq.md" target="_blank">承诺</a> 他们不会存储<strong>任何</strong>用户资料。</p><p>第三，技术上用户隐私得以保护。WebRTC 在文件传输时自行加密，防止其他人（包括 Snapdrop 团队）窥探用户文档。如果以上无法打动你，你甚至可以托管你的 Docker <a href="https://github.com/RobinLinus/snapdrop/blob/master/docs/local-dev.md" target="_blank">映像</a>，建立私人的 Snapdrop 网页。</p><p>虽然我觉得 PWA 已经足够好用，你仍然能使用开源社区为 Snapdrop 开发的<strong>第三方</strong>客户端。</p><ol><li>基于 Electron 的 <a href="https://github.com/alextwothousand/snapdrop-desktop" target="_blank">桌面端</a></li><li>安卓端：<a href="https://github.com/fm-sys/snapdrop-android" target="_blank">GitHub</a>｜<a href="https://play.google.com/store/apps/details?id=com.fmsys.snapdrop" target="_blank">Google Play</a></li><li><a href="https://github.com/Bellisario/node-snapdrop" target="_blank">Node</a> App</li></ol><p>至于传输原理，Snapshare 使用了 WebRTC 协议提供的 P2P<sup class="ss-footnote" href title="对等式网络（英語：peer-to-peer， 简称 P2P）是无中心服务器、依靠用户群（peers）交换信息的互联网体系，它的作用在于，减低以往网路传输中的节点，以降低资料遗失的风险。与有中心服务器的中央网络系统不同，对等网络的每个用户端既是一个节点，也有服务器的功能，任何一个节点无法直接找到其他节点，必须依靠其户群进行信息交流。摘自维基百科「对等网络」词条
" footnote-id="1">1</sup>功能。WebRTC 受 Apple、Google、Microsoft、Mozilla、Opera 支持，是 W3C 下的开源、免费标准。开发者利用简单的 API 接口，就能在浏览器开发端对端实时通信的网络应用。</p><p>WebRTC 定义了三个常用的 Javascript API：</p><ul><li><code>getUserMedia</code> 获取用户机器上的多媒体文档。</li><li><code>RTCPeerConnection</code> 建立 P2P 连接。负责信号处理、编码、端对端通信、安全、宽带管理。</li><li><code>RTCDataChannel</code> 双向传输数据。</li></ul><p>两个 peers 之间，不会「嘛哩嘛哩哄」神奇地便连接起来了。能看到原理图中，两个客户端之外，还有一个节点称作 Signaling 服务器。</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/06/08/01b7bc9eb71a5afbeadf6b5a613e86ca.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/06/08/01b7bc9eb71a5afbeadf6b5a613e86ca.png" referrerpolicy="no-referrer"></figure><p>说好的 P2P 去中心化，怎么冒出来一个服务器呢？这个 Signaling 服务器还不归 WebRTC 标准管。</p><p>Signaling 服务器的作用类似相亲里的<strong>媒人</strong>。一开始，两个客户端互不认识。他们需要一个中介人去介绍，才知道另一方的存在，而后使用 WebRTC 定义的 API 进行 P2P 连线及数据传输。就像相亲中，通过媒人相识，而后才能约出来吃饭。<s>没相亲过，应该是这样吧。（逃</s></p><p>两个客户端发现对方后，文档传输的过程确实是 P2P，不像使用公有云（e.g. 百度网盘、iCloud）一般依赖中央服务器上传下载。</p><h2>结语</h2><p>Snapdrop 是我目前找到最简单的跨平台文件传输方式，过去的文件传输类应用要不需要下载客户端，要不就得要用到命令行，学习成本不低。Snapdrop 可能传输速度比较容易受路由器等网络环境因素影响，却有着最容易上手的特性，非常适合一些日常场景中小型文件的传输。</p><p><strong>参考</strong>：</p><ol><li><a href="https://mark-lin.com/posts/20180926/">30-26之 WebRTC 的 P2P 即時通信與小範例</a></li><li><a href="https://mark-lin.com/posts/20180927/">30-27之 WebRTC 的 Signaling Server</a></li></ol><p>> 下载少数派 <a href="https://sspai.com/page/client">客户端 </a>、关注 <a href="https://sspai.com/s/J71e">少数派公众号 </a>，了解更妙的数字生活 🍃</p><p>> 想申请成为少数派作者？<a href="https://sspai.com/apply/writing" target="_blank">冲！</a></p></div><!----></div><div style="border:1px solid transparent;" data-v-e1f0100a></div><div class="article-side sideTop" style="display:none;left:0;" data-v-7be936cf data-v-e1f0100a><div class="download-guide-container" data-v-14f9065e data-v-7be936cf><div class="btn-wrapper" data-v-14f9065e><!----><button class="btn btn-view" data-v-14f9065e><i class="iconfont iconfont-phone" data-v-14f9065e></i></button></div><a href="https://sspai.com/s/JYjP" target="_blank" data-v-14f9065e><!----></a></div><div class="item-wrapper" data-v-7be936cf><button class="btn btn-charge" data-v-7be936cf><i class="iconfont" data-v-7be936cf></i></button><span class="count" data-v-7be936cf>46</span></div><div class="item-wrapper" data-v-7be936cf><button class="btn-mini btn-comment" data-v-7be936cf><i class="iconfont iconfont-comment" data-v-7be936cf></i></button><span class="count" data-v-7be936cf>53</span></div><div class="item-wrapper" data-v-7be936cf><span data-v-7be936cf><div role="tooltip" id="el-popover-9009" aria-hidden="true" class="el-popover el-popper popper-share right ss-popper-dark-border" style="width:undefinedpx;display:none;"><!----><div class="article-side-share-btn"><a href="https://service.weibo.com/share/share.php?url=null?ref=weibo&title=%E3%80%90%E6%9C%89%E6%B2%92%E6%9C%89%E6%94%AF%E6%8C%81%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%9A%84%20AirDrop%20%E5%91%A2%EF%BC%9F%E3%80%91%E5%A6%82%E6%9E%9C%E8%A6%81%E6%88%91%E9%80%89%E6%9C%80%E7%88%B1%E7%9A%84%E8%8B%B9%E6%9E%9C%E5%8A%9F%E8%83%BD%EF%BC%8C%E5%BF%85%E5%AE%9A%E6%98%AFAirDrop%E3%80%82%E5%9C%A8%E6%8E%A5%E8%A7%A6AirDrop%E5%89%8D%EF%BC%8C%E6%88%91%E4%B8%80%E7%9B%B4%E7%94%A8%E7%9D%80%E7%AC%A8%E7%AC%A8%E7%9A%84%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E6%96%B9%E6%B3%95%E2%80%94%E2%80%94%E4%BB%A5QQ%E4%BD%9C%E4%B8%BA%E4%B8%AD%E8%BD%AC%E3%80%82%E9%9C%80%E8%A6%81%E7%BB%8F%E5%8E%86%E3%80%8C%E6%B7%BB%E5%8A%A0%E5%A5%BD%E5%8F%8B-%EF%BC%88%E6%9D%A5%E8%87%AA%20%40%E5%B0%91%E6%95%B0%E6%B4%BEsspai%EF%BC%89%E5%85%A8%E6%96%87%EF%BC%9A&pic=https%3A%2F%2Fcdn.sspai.com%2F2021%2F06%2F08%2Faacf998bf34db2e9abdfe8638470f1b6.png%3FimageMogr2%2Fauto-orient%2Fquality%2F95%2Fthumbnail%2F!1420x708r%2Fgravity%2FCenter%2Fcrop%2F1420x708%2Finterlace%2F1&appkey=3196502474#" target="_blank"><i class="icon icon-article_weibo right-16"></i></a><span><div role="tooltip" id="el-popover-5412" aria-hidden="true" class="el-popover el-popper" style="width:undefinedpx;display:none;"><!----><div style="text-align:center;"><div id="qr-code"></div><small class="qr-small">扫码分享</small></div></div><i class="icon icon-article_weixin right-16"></i></span><a href="https://twitter.com/share?text=%E3%80%90%E6%9C%89%E6%B2%92%E6%9C%89%E6%94%AF%E6%8C%81%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%9A%84%20AirDrop%20%E5%91%A2%EF%BC%9F%E3%80%91%E5%A6%82%E6%9E%9C%E8%A6%81%E6%88%91%E9%80%89%E6%9C%80%E7%88%B1%E7%9A%84%E8%8B%B9%E6%9E%9C%E5%8A%9F%E8%83%BD%EF%BC%8C%E5%BF%85%E5%AE%9A%E6%98%AFAirDrop%E3%80%82%E5%9C%A8%E6%8E%A5%E8%A7%A6AirDrop%E5%89%8D%EF%BC%8C%E6%88%91%E4%B8%80%E7%9B%B4%E7%94%A8%E7%9D%80%E7%AC%A8%E7%AC%A8%E7%9A%84%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E6%96%B9%E6%B3%95%E2%80%94%E2%80%94%E4%BB%A5QQ%E4%BD%9C%E4%B8%BA%E4%B8%AD%E8%BD%AC%E3%80%82%E9%9C%80%E8%A6%81%E7%BB%8F%E5%8E%86%E3%80%8C%E6%B7%BB%E5%8A%A0%E5%A5%BD%E5%8F%8B-%EF%BC%88%E6%9D%A5%E8%87%AA%20%40%E5%B0%91%E6%95%B0%E6%B4%BEsspai%EF%BC%89%E5%85%A8%E6%96%87%EF%BC%9A&url=null" target="_blank" class="twitter"><i class="icon icon-article_twitter right-16"></i></a></div></div><button class="btn-mini btn-share" data-v-7be936cf><i class="iconfont iconfont-share" data-v-7be936cf></i></button></span></div><div class="item-wrapper" data-v-7be936cf><button class="btn-mini btn-collect" data-v-7be936cf><i class="iconfont iconfont-collect" data-v-7be936cf></i></button></div><!----></div><!---->  
</div>
            