
---
title: '网络串流与 iPad 牌 PC 外放'
categories: 
 - 新媒体
 - 少数派 sspai
 - Matrix
headimg: 'https://cdn.sspai.com/2021/05/31/8a1e8d80aedcff9f3dd1029b9c435151.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1'
author: 少数派 sspai
comments: false
date: Mon, 31 May 2021 15:45:23 GMT
thumbnail: 'https://cdn.sspai.com/2021/05/31/8a1e8d80aedcff9f3dd1029b9c435151.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1'
---

<div>   
<div class="articleWidth-content" data-v-e1f0100a><div class="content wangEditor-txt minHeight" data-v-e1f0100a><blockquote><p>将你的音频通过网络传输至iPad等具有串流能力的设备上</p></blockquote><p>最近新装了一台Windows PC，囊中羞涩，音响就先不考虑了，适逢桌上常年有台iPad Air，音质尚可，便拿来做PC外放了。</p><p>另也适用于一些其它场景，总结一下：</p><ol><li>将音频由音质更好的设备进行播放<ul><li>在你的iPad Pro上播放</li><li>在支持串流协议的高级网络音箱上播放</li></ul></li><li>某些限制场景下的音频转发<ul><li>没有蓝牙收发能力的台式机（正如没有音响的台式）</li></ul></li><li>远程播放<ul><li>网络广播</li><li>和好朋友一起分享音乐</li><li>一边工作一边收听其它来自房间的会议</li></ul></li></ol><p>基于Windows平台的串流服务端</p><p>一般地，串流服务端会捕获系统播放设备（麦克风/线路输入等）作为音频源</p><p>因而我们需要一个将音频输出（扬声器）转音频输入的插件，以供串流软件捕获做音频源</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/05/31/8a1e8d80aedcff9f3dd1029b9c435151.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/05/31/8a1e8d80aedcff9f3dd1029b9c435151.png" referrerpolicy="no-referrer"></figure><p><i>*Linux可不局限于音频输入设备做信号源</i></p><h2>材料</h2><ul><li><a href="https://vb-audio.com/Cable/">VB-Audio Virtual Cable Driver</a> - 音频输出转输入</li><li>串流服务端/接收端，这里我们选大名鼎鼎<a href="https://www.videolan.org/vlc/download-windows.html" target="_blank">VLC Media Player</a></li></ul><h2>开始</h2><p>1.下载&安装<a href="https://vb-audio.com/Cable/">VB-Audio Virtual Cable Driver</a>，安装成功则声音选项卡会出现一对镜像设备</p><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/05/31/2ccfc0b163c74740d4f57fee339be681.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/05/31/2ccfc0b163c74740d4f57fee339be681.png" referrerpolicy="no-referrer"></figure><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/05/31/ceec0bbfb41970f27e6d78578fe6ff8d.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/05/31/ceec0bbfb41970f27e6d78578fe6ff8d.png" referrerpolicy="no-referrer"></figure><p>2.切换播放设备，将信号导到刚刚创建的虚拟接口上</p><ul><li>跟随系统（Windows Media Player, Groove）</li></ul><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/05/31/0d20b6dfb4cf2c52fe5cd3b464ba5136.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/05/31/0d20b6dfb4cf2c52fe5cd3b464ba5136.png" referrerpolicy="no-referrer"></figure><ul><li>自定义播放设备（Adobe Premiere Pro, 网易云音乐, 腾讯会议）</li></ul><figure class="image ss-img-wrapper"><img src="https://cdn.sspai.com/2021/05/31/27e2a3b2a7dba843fb0f1ec21d2e6134.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2021/05/31/27e2a3b2a7dba843fb0f1ec21d2e6134.png" referrerpolicy="no-referrer"></figure><p>3.创建一个基于http协议的串流服务</p><p>图形化点来点去太麻烦了，我们直接一点，上脚本：</p><p><code>"C:\Program Files\VideoLAN\VLC\vlc.exe" -I dummy --dummy-quiet dshow:// :dshow-vdev=none :dshow-adev="CABLE Output (VB-Audio Virtual Cable)" :live-caching=300 :sout=#transcode&#123;vcodec=none,acodec=mp3,ab=128,channels=2,samplerate=44100,scodec=none&#125;:http&#123;mux=mp3,dst=:8080/&#125; :no-sout-all :sout-keep</code></p><ul><li>捕获设备：CABLE Output (VB-Audio Virtual Cable)</li><li>监听地址：0.0.0.0:8080</li><li>协议：http（通用性强）</li><li>编码：MP3</li></ul><p>4.在iPad端启动VLC Media Player，打开网络串流，填入串流服务器地址，<strong>开始播放！</strong></p><p><a href="http://192.168.1.6:8080/?/action=stream" target="_blank"><code>http://<serverip>:8080?/action=stream</code></a> </p><h2>拓展</h2><p>当你不想让其它人听到，或者只有一部分人听到，可以在服务器端做点限制</p><p>新增WIndows高级防火墙规则并指定作用域（IP和端口）</p><pre class="language-shell"><code>set ProgramPath="C:\program files\videolan\vlc\vlc.exe"
set ListenPort=8080
set AllowAddress="192.168.1.0/32"
:: 多个请用逗号隔开
netsh advfirewall firewall add rule name="VLC media player 8080" remoteip=%AllowAddress% dir=in protocol=TCP localport=%ListenPort% action=allow program=%ProgramPath% enable=yes profile=private</code></pre><pre class="language-shell"><code>:: 检查
netsh advfirewall firewall show rule name="VLC media player 8080" verbose
:: 删除
netsh advfirewall firewall del rule name="VLC media player 8080"</code></pre><h2>不足</h2><ul><li>实时播放（会有延迟，且取决于根据网络延迟，严重时会出现音画极不同步的情况）</li><li>单向播放（类似于广播）</li></ul><h2>鸣谢</h2><ul><li><a href="https://wiki.videolan.org/Documentation:Command_line/">VLC Wiki</a></li><li><a href="https://docs.microsoft.com/en-us/troubleshoot/windows-server/networking/netsh-advfirewall-firewall-control-firewall-behavior">Use netsh advfirewall firewall instead of netsh firewall to control Windows Firewall behavior</a></li></ul></div><!----></div><div style="border:1px solid transparent;" data-v-e1f0100a></div><div class="article-side sideTop" style="display:none;left:0;" data-v-7be936cf data-v-e1f0100a><div class="download-guide-container" data-v-14f9065e data-v-7be936cf><div class="btn-wrapper" data-v-14f9065e><!----><button class="btn btn-view" data-v-14f9065e><i class="iconfont iconfont-phone" data-v-14f9065e></i></button></div><a href="https://sspai.com/s/JYjP" target="_blank" data-v-14f9065e><!----></a></div><div class="item-wrapper" data-v-7be936cf><button class="btn btn-charge" data-v-7be936cf><i class="iconfont" data-v-7be936cf></i></button><span class="count" data-v-7be936cf>3</span></div><div class="item-wrapper" data-v-7be936cf><button class="btn-mini btn-comment" data-v-7be936cf><i class="iconfont iconfont-comment" data-v-7be936cf></i></button><span class="count" data-v-7be936cf>1</span></div><div class="item-wrapper" data-v-7be936cf><span data-v-7be936cf><div role="tooltip" id="el-popover-7562" aria-hidden="true" class="el-popover el-popper popper-share right ss-popper-dark-border" style="width:undefinedpx;display:none;"><!----><div class="article-side-share-btn"><a href="https://service.weibo.com/share/share.php?url=null?ref=weibo&title=%E3%80%90%E7%BD%91%E7%BB%9C%E4%B8%B2%E6%B5%81%E4%B8%8E%20iPad%20%E7%89%8C%20PC%20%E5%A4%96%E6%94%BE%E3%80%91%E5%B0%86%E4%BD%A0%E7%9A%84%E9%9F%B3%E9%A2%91%E9%80%9A%E8%BF%87%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E8%87%B3iPad%E7%AD%89%E5%85%B7%E6%9C%89%E4%B8%B2%E6%B5%81%E8%83%BD%E5%8A%9B%E7%9A%84%E8%AE%BE%E5%A4%87%E4%B8%8A%E6%9C%80%E8%BF%91%E6%96%B0%E8%A3%85%E4%BA%86%E4%B8%80%E5%8F%B0WindowsPC%EF%BC%8C%E5%9B%8A%E4%B8%AD%E7%BE%9E%E6%B6%A9%EF%BC%8C%E9%9F%B3%E5%93%8D%E5%B0%B1%E5%85%88%E4%B8%8D%E8%80%83%E8%99%91%E4%BA%86%EF%BC%8C%E9%80%82%E9%80%A2%E6%A1%8C%E4%B8%8A%E5%B8%B8%E5%B9%B4%E6%9C%89%E5%8F%B0iPad%EF%BC%88%E6%9D%A5%E8%87%AA%20%40%E5%B0%91%E6%95%B0%E6%B4%BEsspai%EF%BC%89%E5%85%A8%E6%96%87%EF%BC%9A&pic=&appkey=3196502474#" target="_blank"><i class="icon icon-article_weibo right-16"></i></a><span><div role="tooltip" id="el-popover-336" aria-hidden="true" class="el-popover el-popper" style="width:undefinedpx;display:none;"><!----><div style="text-align:center;"><div id="qr-code"></div><small class="qr-small">扫码分享</small></div></div><i class="icon icon-article_weixin right-16"></i></span><a href="https://twitter.com/share?text=%E3%80%90%E7%BD%91%E7%BB%9C%E4%B8%B2%E6%B5%81%E4%B8%8E%20iPad%20%E7%89%8C%20PC%20%E5%A4%96%E6%94%BE%E3%80%91%E5%B0%86%E4%BD%A0%E7%9A%84%E9%9F%B3%E9%A2%91%E9%80%9A%E8%BF%87%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E8%87%B3iPad%E7%AD%89%E5%85%B7%E6%9C%89%E4%B8%B2%E6%B5%81%E8%83%BD%E5%8A%9B%E7%9A%84%E8%AE%BE%E5%A4%87%E4%B8%8A%E6%9C%80%E8%BF%91%E6%96%B0%E8%A3%85%E4%BA%86%E4%B8%80%E5%8F%B0WindowsPC%EF%BC%8C%E5%9B%8A%E4%B8%AD%E7%BE%9E%E6%B6%A9%EF%BC%8C%E9%9F%B3%E5%93%8D%E5%B0%B1%E5%85%88%E4%B8%8D%E8%80%83%E8%99%91%E4%BA%86%EF%BC%8C%E9%80%82%E9%80%A2%E6%A1%8C%E4%B8%8A%E5%B8%B8%E5%B9%B4%E6%9C%89%E5%8F%B0iPad%EF%BC%88%E6%9D%A5%E8%87%AA%20%40%E5%B0%91%E6%95%B0%E6%B4%BEsspai%EF%BC%89%E5%85%A8%E6%96%87%EF%BC%9A&url=null" target="_blank" class="twitter"><i class="icon icon-article_twitter right-16"></i></a></div></div><button class="btn-mini btn-share" data-v-7be936cf><i class="iconfont iconfont-share" data-v-7be936cf></i></button></span></div><div class="item-wrapper" data-v-7be936cf><button class="btn-mini btn-collect" data-v-7be936cf><i class="iconfont iconfont-collect" data-v-7be936cf></i></button></div><!----></div><!---->  
</div>
            