
---
title: '巧用开源方案，0 成本实现验证码短信转发'
categories: 
 - 新媒体
 - 少数派 sspai
 - Matrix
headimg: 'https://cdn.sspai.com/2022/01/23/0fe4f0c5a28e4d344ed42f74bc2e3d20.JPG?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1'
author: 少数派 sspai
comments: false
date: Mon, 24 Jan 2022 13:22:19 GMT
thumbnail: 'https://cdn.sspai.com/2022/01/23/0fe4f0c5a28e4d344ed42f74bc2e3d20.JPG?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1'
---

<div>   
<div class="articleWidth-content" data-v-0b37afcb><div class="update-wrap" data-v-0b37afcb></div><div class="content wangEditor-txt minHeight" data-v-0b37afcb><p>为了能够用两个微信彻底分离工作和生活，又苦于 iPhone 不能双开微信，我开始使用 Android 手机作为工作备用机，无奈之下加入了双机党的阵营。</p><p>我有两个号码： A 和 B，因为号码 A 流量多，就把它留在了主力机上，号码 B 挪到了备用机。可大部分服务都是用号码 B 注册的，使用主力机时，时常因为各种原因，需要填写号码 B 收到的短信验证码，此时又得拿起备用机查看验证码。如此反复，真的令人非常不爽。</p><p>为此我开始寻找 Android 短信转发的解决方案，最终通过 SmsForwarder + Bark 解决了这个问题，经过一段时间的使用，效果非常不错。现在我把这个 Android 手机短信转发给 iPhone 的方案分享给大家，有需要的朋友可以作为参考。</p><figure class="image ss-img-wrapper image_resized" style="width:260px;"><img src="https://cdn.sspai.com/2022/01/23/0fe4f0c5a28e4d344ed42f74bc2e3d20.JPG?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2022/01/23/0fe4f0c5a28e4d344ed42f74bc2e3d20.JPG" referrerpolicy="no-referrer"><figcaption>短信转发至 iPhone 效果</figcaption></figure><h2>在 iPhone 中安装 Bark App</h2><p>🔗 下载地址：<a href="https://apps.apple.com/cn/app/id1403753865" target="_blank">App Store</a></p><p>Bark 是一款 Apple 生态内的自定义推送服务，它充分利用了 Apple 推送通知服务 (APNs) 进行工作，原理是将自定义推送内容通过 发送端 > Bark 服务端 > 苹果 APNs 服务器 > 你的设备 > Bark App 进行传递。由于完全依赖 Apple 推送通知服务，App 本身无需前台运行，几乎不会对 iPhone 的续航产生影响。</p><p>第一次打开 Bark App 时，会自动为你的设备生成 key ，复制 App 首页自动生成的第一个带有 key 参数的 URL 备用。</p><figure class="image ss-img-wrapper image_resized" style="width:260px;"><img src="https://cdn.sspai.com/2022/01/23/3b17b64f43158a9e957355f4a2d63066.JPEG?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2022/01/23/3b17b64f43158a9e957355f4a2d63066.JPEG" referrerpolicy="no-referrer"><figcaption>Bark App</figcaption></figure><h2>在 Android 手机中安装短信转发器 SmsForwarder</h2><p>🔗 下载地址：<a href="https://www.coolapk.com/apk/com.idormy.sms.forwarder" target="_blank">酷安</a></p><p>SmsForwarder 是我在酷安找到的<a href="https://github.com/pppscn/SmsForwarder" target="_blank">开源</a> Android 短信转发工具，它有一个简单直白的中文名称「短信转发器」，这款 App 在转发短信时，能设置转发模板，还能对短信内容设置多种筛选条件，可以利用钉钉、飞书、邮箱、企业微信、Server 酱、Telegram 等多种渠道进行推送。</p><p>打开「短信转发器」，依次点击「发送通道」-「添加发送通道」，选择「Bark」，填入上一步在 iPhone 端 Bark App 中生成的推送地址，点击「确定」保存设置。</p><figure class="image ss-img-wrapper image_resized" style="width:260px;"><img src="https://cdn.sspai.com/2022/01/23/b3d67c02a6964a93f1f58e37d5d4aba6.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2022/01/23/b3d67c02a6964a93f1f58e37d5d4aba6.png" referrerpolicy="no-referrer"><figcaption>将Bark设置为发送通道</figcaption></figure><p>返回 App 首页，点击「转发规则」-「添加短信转发」，设置好你自己的短信转发规则。比如：当你只想转发备用机的验证码短信时，可以将短信内容匹配关键字设置为「验证码」，这样只有包含验证码的短信才会被转发，其他诸如广告营销、公益宣传等内容的短信则不会被转发。此处也可以根据自己的需要添加其他规则。</p><figure class="image ss-img-wrapper image_resized" style="width:260px;"><img src="https://cdn.sspai.com/2022/01/23/fa77a7839dd1047afdbe3d8e82eb9521.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2022/01/23/fa77a7839dd1047afdbe3d8e82eb9521.png" referrerpolicy="no-referrer"><figcaption>设置短信转发规则</figcaption></figure><p>除了转发短信，SmsForwarder 还可以转发 Android 手机的未接来电和应用通知，因为与本文主题无关，感兴趣的朋友可以自行下载体验。</p><h2>为 SmsForwarder 设置应用权限 ⚠️</h2><p>出于续航因素考虑，Android 手机的后台策略都非常保守，致使 SmsForwarder 在后台运行时，容易被系统 kill 软件后台进程。为保证短信转发功能的正常运作，需要在手机系统中设置好 App 的自启动、后台运行、电池优化等必要权限。由于各品牌手机的设置方式存在差异，在此不做详细说明。</p><figure class="image ss-img-wrapper image_resized" style="width:300px;"><img src="https://cdn.sspai.com/2022/01/23/e847e20035f8bda4cf09c3c3dd0473dc.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2022/01/23/e847e20035f8bda4cf09c3c3dd0473dc.png" referrerpolicy="no-referrer"><figcaption>示例：realme UI 后台权限设置</figcaption></figure><p><br>出于隐私角度考虑，一些国内的定制系统会默认隐藏包含验证码的短信，第三方应用即使被授予短信权限，也无法读取到这类型的短信。因此需要在手机短信设置中关闭相关防护功能，此类短信才能被读取并转发至其他设备。</p><figure class="image ss-img-wrapper image_resized" style="width:300px;"><img src="https://cdn.sspai.com/2022/01/23/ec997fb02f0794bc27bb9d394a39bb6b.png?imageView2/2/w/1120/q/40/interlace/1/ignore-error/1" data-original="https://cdn.sspai.com/2022/01/23/ec997fb02f0794bc27bb9d394a39bb6b.png" referrerpolicy="no-referrer"><figcaption>realme UI 验证码安全保护</figcaption></figure><h2>将 Android 手机收到的验证码转发至 Mac</h2><p>根据同样的原理，你也可以在 Mac App Store 中搜索安装 <a href="https://apps.apple.com/cn/app/id1403753865" target="_blank">Bark</a>，生成推送地址后，在 SmsForwarder 中将其设置为第二个推送通道。这样你就可以在 iPhone 和 Mac 上同时收到来自 Android 手机的验证码短信，方便你在使用 Mac 时填写验证码。</p><h2>总结</h2><p>得益于Apple 推送通知服务的稳定性，无论是 WiFi 还是蜂窝数据，这一套短信转发方案几乎都没有延迟，使用起来非常的方便。缺点是两台设备必须都要联网才能实现转发和接收，而且只能从 Android 转发短信到 iPhone，反向无效。</p><p>如果对 Bark 提供的后端服务有隐私方面的顾虑，你也可以通过该项目在 <a href="https://github.com/Finb/bark-server" target="_blank">GitHub</a> 公开的后端代码自行搭建后端服务。除了本文中提到的 Bark，你还可以使用 <a href="https://github.com/easychen/pushdeer" target="_blank">PushDeer</a> 等其他类似的推送服务进行转发，工作原理和配置方法也是类似的。</p></div><div class="update-details-wrap" data-v-0b37afcb></div><!----></div><div style="border:1px solid transparent;" data-v-0b37afcb></div><div class="article-side sideTop" style="display:none;left:0;" data-v-7be936cf data-v-0b37afcb><div class="download-guide-container" data-v-14f9065e data-v-7be936cf><div class="btn-wrapper" data-v-14f9065e><!----><button class="btn btn-view" data-v-14f9065e><i class="iconfont iconfont-phone" data-v-14f9065e></i></button></div><a href="https://sspai.com/s/JYjP" target="_blank" data-v-14f9065e><!----></a></div><div class="item-wrapper" data-v-7be936cf><button class="btn btn-charge" data-v-7be936cf><i class="iconfont" data-v-7be936cf></i></button><span class="count" data-v-7be936cf>5</span></div><div class="item-wrapper" data-v-7be936cf><button class="btn-mini btn-comment" data-v-7be936cf><i class="iconfont iconfont-comment" data-v-7be936cf></i></button><span class="count" data-v-7be936cf>4</span></div><div class="item-wrapper" data-v-7be936cf><span data-v-7be936cf><div role="tooltip" id="el-popover-1156" aria-hidden="true" class="el-popover el-popper popper-share right ss-popper-dark-border" style="width:undefinedpx;display:none;"><!----><div class="article-side-share-btn"><a href="https://service.weibo.com/share/share.php?url=null?ref=weibo&title=%E3%80%90%E5%B7%A7%E7%94%A8%E5%BC%80%E6%BA%90%E6%96%B9%E6%A1%88%EF%BC%8C0%20%E6%88%90%E6%9C%AC%E5%AE%9E%E7%8E%B0%E9%AA%8C%E8%AF%81%E7%A0%81%E7%9F%AD%E4%BF%A1%E8%BD%AC%E5%8F%91%E3%80%91%E4%B8%BA%E4%BA%86%E8%83%BD%E5%A4%9F%E7%94%A8%E4%B8%A4%E4%B8%AA%E5%BE%AE%E4%BF%A1%E5%BD%BB%E5%BA%95%E5%88%86%E7%A6%BB%E5%B7%A5%E4%BD%9C%E5%92%8C%E7%94%9F%E6%B4%BB%EF%BC%8C%E5%8F%88%E8%8B%A6%E4%BA%8EiPhone%E4%B8%8D%E8%83%BD%E5%8F%8C%E5%BC%80%E5%BE%AE%E4%BF%A1%EF%BC%8C%E6%88%91%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8Android%E6%89%8B%E6%9C%BA%E4%BD%9C%E4%B8%BA%E5%B7%A5%E4%BD%9C%E5%A4%87%E7%94%A8%E6%9C%BA%EF%BC%8C%E6%97%A0%E5%A5%88%E4%B9%8B%E4%B8%8B%E5%8A%A0%E5%85%A5%E4%BA%86%E5%8F%8C%E6%9C%BA%E5%85%9A%E7%9A%84%E9%98%B5%E8%90%A5%EF%BC%88%E6%9D%A5%E8%87%AA%20%40%E5%B0%91%E6%95%B0%E6%B4%BEsspai%EF%BC%89%E5%85%A8%E6%96%87%EF%BC%9A&pic=https%3A%2F%2Fcdn.sspai.com%2F2022%2F01%2F23%2F86f5a255c00b6123ef7925633218b7e8.jpeg%3FimageMogr2%2Fauto-orient%2Fquality%2F95%2Fthumbnail%2F!1420x708r%2Fgravity%2FCenter%2Fcrop%2F1420x708%2Finterlace%2F1&appkey=3196502474#" target="_blank"><i class="iconfont iconfont-weibo-simple right-16"></i></a><span><div role="tooltip" id="el-popover-4107" aria-hidden="true" class="el-popover el-popper" style="width:undefinedpx;display:none;"><!----><div style="text-align:center;"><div id="qr-code"></div><small class="qr-small">扫码分享</small></div></div><span class="el-popover__reference-wrapper"><i class="iconfont iconfont-wechat-simple right-16"></i></span></span><a href="https://twitter.com/share?text=%E3%80%90%E5%B7%A7%E7%94%A8%E5%BC%80%E6%BA%90%E6%96%B9%E6%A1%88%EF%BC%8C0%20%E6%88%90%E6%9C%AC%E5%AE%9E%E7%8E%B0%E9%AA%8C%E8%AF%81%E7%A0%81%E7%9F%AD%E4%BF%A1%E8%BD%AC%E5%8F%91%E3%80%91%E4%B8%BA%E4%BA%86%E8%83%BD%E5%A4%9F%E7%94%A8%E4%B8%A4%E4%B8%AA%E5%BE%AE%E4%BF%A1%E5%BD%BB%E5%BA%95%E5%88%86%E7%A6%BB%E5%B7%A5%E4%BD%9C%E5%92%8C%E7%94%9F%E6%B4%BB%EF%BC%8C%E5%8F%88%E8%8B%A6%E4%BA%8EiPhone%E4%B8%8D%E8%83%BD%E5%8F%8C%E5%BC%80%E5%BE%AE%E4%BF%A1%EF%BC%8C%E6%88%91%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8Android%E6%89%8B%E6%9C%BA%E4%BD%9C%E4%B8%BA%E5%B7%A5%E4%BD%9C%E5%A4%87%E7%94%A8%E6%9C%BA%EF%BC%8C%E6%97%A0%E5%A5%88%E4%B9%8B%E4%B8%8B%E5%8A%A0%E5%85%A5%E4%BA%86%E5%8F%8C%E6%9C%BA%E5%85%9A%E7%9A%84%E9%98%B5%E8%90%A5%EF%BC%88%E6%9D%A5%E8%87%AA%20%40%E5%B0%91%E6%95%B0%E6%B4%BEsspai%EF%BC%89%E5%85%A8%E6%96%87%EF%BC%9A&url=null" target="_blank" class="twitter"><i class="iconfont iconfont-twitter-simple right-16"></i></a></div></div><span class="el-popover__reference-wrapper"><button class="btn-mini btn-share" data-v-7be936cf><i class="iconfont iconfont-share" data-v-7be936cf></i></button></span></span></div><div class="item-wrapper" data-v-7be936cf><button class="btn-mini btn-collect" data-v-7be936cf><i class="iconfont iconfont-collect" data-v-7be936cf></i></button></div><!----></div><!---->  
</div>
            