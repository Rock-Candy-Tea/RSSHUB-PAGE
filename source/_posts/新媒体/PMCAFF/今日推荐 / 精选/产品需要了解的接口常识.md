
---
title: '产品需要了解的接口常识'
categories: 
 - 新媒体
 - PMCAFF
 - 今日推荐 / 精选
headimg: 'https://img.pmcaff.com/FtWsRSBZwH1No9VFPL0PY8wm6hiN-picture'
author: PMCAFF
comments: false
date: Tue, 31 Aug 2021 10:27:47 GMT
thumbnail: 'https://img.pmcaff.com/FtWsRSBZwH1No9VFPL0PY8wm6hiN-picture'
---

<div>   
<pre><style>
#articleCont &#123;
  font-size: 16px;
  line-height: 1.6;
  color: #333;
  word-wrap: break-word;
&#125;
#articleCont :first-child &#123;
  margin-top: 0 !important;
&#125;
#articleCont h1,
#articleCont h2,
#articleCont h3,
#articleCont h4,
#articleCont h5,
#articleCont h6 &#123;
  margin: 40px 0 20px;
&#125;
#articleCont h1 &#123;
  font-size: 24px;
&#125;
#articleCont h2 &#123;
  font-size: 22px;
&#125;
#articleCont h3 &#123;
  font-size: 20px;
&#125;
#articleCont h4 &#123;
  font-size: 18px;
&#125;
#articleCont h5 &#123;
  font-size: 16px;
&#125;
#articleCont i &#123;
  font-style: italic;
&#125;
#articleCont p,
#articleCont div &#123;
  word-wrap: break-word;
  margin: 14px 0;
  text-align: justify;
&#125;
#articleCont blockquote &#123;
  border-left: 6px solid #ddd;
  padding: 5px 0 5px 10px;
&#125;
#articleCont blockquote p:last-child &#123;
  margin-bottom: 0;
&#125;
#articleCont .simditor-body blockquote :last-child &#123;
  margin-bottom: 0;
&#125;
#articleCont a &#123;
  color: #82b64a;
&#125;
#articleCont a:visited &#123;
  color: #82b64a;
&#125;
#articleCont a:hover &#123;
  color: #74a342;
&#125;
#articleCont img &#123;
  max-width: 100%;
  height: auto;
&#125;
#articleCont hr &#123;
  margin: 19px 0;
  border: none;
  border-top: solid 1px #ddd;
&#125;
#articleCont ol &#123;
  list-style-type: decimal;
&#125;
#articleCont ol li &#123;
  list-style-type: decimal;
&#125;
#articleCont ul &#123;
  list-style-type: disc;
  padding-left: 40px;
&#125;
#articleCont ul li &#123;
  list-style-type: disc;
&#125;
#articleCont table &#123;
  width: 100%;
  font-size: 12px;
  border-collapse: collapse;
  line-height: 1.7;
&#125;
#articleCont table thead &#123;
  background: #f9f9f9;
&#125;
#articleCont table th,
#articleCont table td &#123;
  border: solid 1px #ccc;
  text-align: left;
  vertical-align: top;
  padding: 2px 4px;
  height: 30px;
  min-width: 40px;
  box-sizing: border-box;
&#125;
#articleCont pre &#123;
  white-space: pre-wrap;
&#125;
</style><h2 style="text-align:justify;"><strong><img width="900" height="383" alt="0 (1).jpg" src="https://img.pmcaff.com/FtWsRSBZwH1No9VFPL0PY8wm6hiN-picture" coffee-w="900px" coffee-h="383px" coffee-format="jpeg" referrerpolicy="no-referrer"><br></strong></h2><h2 style="text-align:justify;"><strong>一、什么是接口</strong><br></h2><p style="text-align:justify;">接口的定义：API（Application Programming Interface,应用程序编程接口）是一些预先定义的函数，目的是提供应用程序与开发人员基于某软件或硬件得以访问一组例程的能力，而又无需访问源码，或理解内部工作机制的细节。</p><p style="text-align:justify;">要理解接口是什么，首先理解一下为什么要用接口？</p><p style="text-align:justify;">两个独立的系统，它们的数据或程序是独立的，这就使得它们无法直接访问对方的数据库或程序（两个独立的数据相当于两个独立的家庭，每个家庭肯定是不允许外人随便进入的，否则会发生偷窃等后果严重的事件）。但是某些业务场景下，独立的系统之间又必须相互共享数据或共用一套程序逻辑，如统一业务流程上的不同业务操作系统，下游系统的业务依赖于上游系统的数据。</p><p style="text-align:justify;">既然如此为什么不把它们设计成一个系统，这样不就没有上面的问题了吗？</p><p style="text-align:justify;">这是因为有的业务流程很长很复杂，如果设计成一个系统，整个系统变得很庞杂，不论是功能设计、开发维护都很难。因此一般都会把虽然有上下游业务关系但又有清晰边界的业务划分成独立的系统实现，如采购系统和仓储系统。此外，很多时候我们需要获取的数据是我们外部其他公司拥有的数据，更不可能设计成同一个系统了。</p><p style="text-align:justify;">基于以上两点：<strong><span style="color:rgb(217,33,66);">接口就是两个独立系统之间同步数据或访问对方程序的途径</span></strong>。</p><h2 style="text-align:justify;"><strong>二、如何设计接口</strong></h2><h3 style="text-align:justify;"><strong><span style="color:rgb(0,0,0);">1. 搞清楚是主动访问还是被动请求：</span></strong></h3><p style="text-align:justify;"><strong>a. 若是主动访问，有两种情况：</strong></p><p style="text-align:justify;">一是我方是数据的使用方，需要主动从对方获取数据；二是我方是数据的提供方，需要主动将数据同步给对方。</p><p style="text-align:justify;">主动访问时无需做接口，而是访问对方的接口，要搞清楚的问题是：我们需要在什么节点访问对方的接口？是用户触发某个操作的时候实时去访问？还是没有实时性要求，只是周期性地访问？</p><p style="text-align:justify;">若我方是数据的使用方且需要的数据是用户使用某个功能必须的数据，因此必须在用户操作时实时去访问对方的接口获取数据并展示给用户，典型的有我们注册某网站时获取验证码的功能。</p><p style="text-align:justify;">若我方是数据的使用方且需要的数据是一些跟用户实时操作无关的基础数据，如客服系统需要从其他业务系统获取用户的基础数据，以在系统中的某些功能下展示用户的信息（如客服在处理客诉等问题时，需要知道客户的一些详细信息，这些信息只有业务系统有）。这种情况下，一般会新增一个脚本定时（如两小时一次）访问对方的接口将数据获取过来存储到自己的数据库，在用到的时候直接从自己数据库获取并展示。</p><p style="text-align:justify;">若我方是数据的提供方且提供的数据是下游系统需要的实时要求高的数据则更多地用实时同步；若是基础数据，则选择周期性同步的方式。</p><p style="text-align:justify;"><strong>b. 若是被动请求，有两种情况：</strong></p><p style="text-align:justify;">一是我方是数据提供方，需要对方来获取数据；二是我方是数据使用方，需要对方主动将数据同步过来。</p><p style="text-align:justify;">被动请求需要提供接口供对方访问，此时要搞清楚：让对方来访问的时候，需要提供什么样的参数？根据他提供的参数我们需要返回什么数据？这些数据从哪里取值？</p><p style="text-align:justify;">若有一些数据的来源是本系统，其他系统需要使用这些数据，则可提供接口让其他系统通过访问接口获取这些数据。</p><p style="text-align:justify;">若我方是数据使用方且让对方将数据主动同步过来，此种场景典型如——我们是业务的下游，上游系统产生数据后，需要将数据同步到下游系统让流程继续进行，并且流程的及时性要求高，不能有延迟。这种情况下，只有上游系统知道什么节点产生了数据，因此只有等他产生数据后主动推送给下游系统，因为下游系统因无法知道数据生成的时间，也就无法及时去获取数据，这时最好的方式是让对方主动将数据同步过来。</p><h3 style="text-align:justify;"><span style="color:rgb(0,0,0);"><strong><span style="color:rgb(0,0,0);">2. 搞清楚数据交互的实时性要求</span></strong></span></h3><p style="text-align:justify;"><strong>a. 对于我方是数据使用方的情况，要根据业务的需要决定获取数据的实时性。</strong></p><p style="text-align:justify;">如上文所说，如果是用户使用功能时需要的数据就是即时性访问。如果是定期获取基础数据，根据我们对数据准确性的要求和对方数据变更的频率决定获取的周期。如我们对数据的准确性要求不是100%的要求，且对方的数据变更频率也不是很高，则周期可设计得长一些，如每天一次，每几个小时一次等。</p><p style="text-align:justify;"><strong>b. 对于我方是数据提供方的情况，则以对方的业务需要为准。</strong>但是对于获取数据的访问量大等特殊情况，应在需求中或评审中做好说明和交代，以帮助开发设计更满足需要的接口。</p><h3 style="text-align:justify;"><strong><span style="color:rgb(0,0,0);">3. 选择合适的接口方式</span></strong></h3><p style="text-align:justify;">结合接口的不同类型和实时性要求两方面，可以选择合适的接口实现方式：</p><p style="text-align:justify;"><strong><span style="color:rgb(217,33,66);">a. mq消息队列</span></strong></p><p style="text-align:justify;">是一个中间件，数据提供方将数据放到中间件，数据获取方从中间件中获取数据。针对向多个系统同步基础数据的需要，消息队列是最适合的方式。</p><p style="text-align:justify;">若选择这种同步方式，要注意的一点是：增量同步还是全量同步，若是增量同步，对方是增量获取还是全量获取？若是全量同步，在什么情况下，对方应该更新数据，什么情况下应该更新数据？</p><p style="text-align:justify;"><strong><span style="color:rgb(217,33,66);">b. otter同步</span></strong></p><p style="text-align:justify;">数据同步方直接访问数据获取方的数据表将数据写入对应的表中，这种方式实时性最高，若对数据的准确性要求很高，此方式是很好的数据同步方式。</p><p style="text-align:justify;"><strong><span style="color:rgb(217,33,66);">c. http</span></strong></p><p style="text-align:justify;">一般在功能设计中常用的接口是此种方式，双方通过http地址保持数据同步和通信。</p><p style="text-align:justify;">在设计具体的数据同步接口时，具体的方式产品经理不用关注，由开发根据需求设计合理的方式，然后产品可帮助开发一起确定所选方式是否满足业务需要。除非业务上有特殊要求，则在需求中可指定具体的方式。</p><h2 style="text-align:justify;"><strong>三、如何编写接口文档</strong></h2><p style="text-align:justify;">不同的接口使用场景，需要关注的点和交代清楚的规则不一样，以主动/被动+数据使用方/数据获取方的维度，有以下四种情况：</p><h3 style="text-align:justify;"><strong>1. 如果是向对方系统主动推送数据，则可按以下方式整理接口需求</strong></h3><p style="text-align:justify;"><img width="836" height="536" alt="图片" src="http://img.pmcaff.com/5984a8f4e30f2bf590be767c4218b814-picture?imageView2/0/format/jpg" coffee-w="836px" coffee-h="536px" coffee-format="webp" referrerpolicy="no-referrer"></p><h3 style="text-align:justify;"><strong>2. 如果是对方主动来获取数据，则可按以下方式整理接口需求</strong></h3><p style="text-align:justify;"><img width="837" height="577" alt="图片" src="http://img.pmcaff.com/4a614df59d7dd28b28a7a7a74b11c336-picture?imageView2/0/format/jpg" coffee-w="837px" coffee-h="577px" coffee-format="webp" referrerpolicy="no-referrer"></p><h3 style="text-align:justify;"><strong>3. 如果是被动接收对方推送的数据，则可按以下方式整理接口需求</strong></h3><p style="text-align:justify;"><img width="837" height="376" alt="图片" src="http://img.pmcaff.com/16c8a2267ca7447cb71756b13ef6ad98-picture?imageView2/0/format/jpg" coffee-w="837px" coffee-h="376px" coffee-format="webp" referrerpolicy="no-referrer"></p><h3 style="text-align:justify;"><strong>4. 如果主动从对方获取数据，则可按以下方式整理接口需求</strong></h3><p style="text-align:justify;"><img width="828" height="730" alt="图片" src="http://img.pmcaff.com/3fd2d1f82c7e9a796e000db61edc811e-picture?imageView2/0/format/jpg" coffee-w="828px" coffee-h="730px" coffee-format="webp" referrerpolicy="no-referrer"></p><p style="text-align:justify;">接口的开发肯定涉及两个系统，因此在评审前与对方产品对好文档是必须的，要保证双方开发拿到的文档标准是一样的，否则在开发过程中会出现双方约定不一致导致需要修改的情况。</p><p style="text-align:justify;">一般情况下，接口文档是由开发来参与编写的，但产品经理要了解接口的原理，以及接口的方式，对于开发和沟通，都能够有效的提高质量和效率。</p><p><b>有兴趣的朋友可以关注我的公众号：面经master</b></p><p><b>公众号会每日更新大厂产品面试真题~</b><br></p></pre>
  
</div>
            