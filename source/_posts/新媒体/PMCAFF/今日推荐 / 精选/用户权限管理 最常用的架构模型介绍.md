
---
title: '用户权限管理 最常用的架构模型介绍'
categories: 
 - 新媒体
 - PMCAFF
 - 今日推荐 / 精选
headimg: 'https://img.pmcaff.com/FnK57HTc_ta7h9Kp9akVUgkyJ-j7-picture'
author: PMCAFF
comments: false
date: Fri, 10 Dec 2021 11:21:06 GMT
thumbnail: 'https://img.pmcaff.com/FnK57HTc_ta7h9Kp9akVUgkyJ-j7-picture'
---

<div>   
<div><style>
#articleCont &#123;
  font-size: 16px;
  line-height: 1.6;
  color: #333;
  word-wrap: break-word;
&#125;
#articleCont :first-child &#123;
  margin-top: 0 !important;
&#125;
#articleCont h1,
#articleCont h2,
#articleCont h3,
#articleCont h4,
#articleCont h5,
#articleCont h6 &#123;
  margin: 40px 0 20px;
&#125;
#articleCont h1 &#123;
  font-size: 24px;
&#125;
#articleCont h2 &#123;
  font-size: 22px;
&#125;
#articleCont h3 &#123;
  font-size: 20px;
&#125;
#articleCont h4 &#123;
  font-size: 18px;
&#125;
#articleCont h5 &#123;
  font-size: 16px;
&#125;
#articleCont i &#123;
  font-style: italic;
&#125;
#articleCont p,
#articleCont div &#123;
  word-wrap: break-word;
  margin: 14px 0;
  text-align: justify;
&#125;
#articleCont blockquote &#123;
  border-left: 6px solid #ddd;
  padding: 5px 0 5px 10px;
&#125;
#articleCont blockquote p:last-child &#123;
  margin-bottom: 0;
&#125;
#articleCont .simditor-body blockquote :last-child &#123;
  margin-bottom: 0;
&#125;
#articleCont a &#123;
  color: #82b64a;
&#125;
#articleCont a:visited &#123;
  color: #82b64a;
&#125;
#articleCont a:hover &#123;
  color: #74a342;
&#125;
#articleCont img &#123;
  max-width: 100%;
  height: auto;
&#125;
#articleCont hr &#123;
  margin: 19px 0;
  border: none;
  border-top: solid 1px #ddd;
&#125;
#articleCont ol &#123;
  list-style-type: decimal;
&#125;
#articleCont ol li &#123;
  list-style-type: decimal;
&#125;
#articleCont ul &#123;
  list-style-type: disc;
  padding-left: 40px;
&#125;
#articleCont ul li &#123;
  list-style-type: disc;
&#125;
#articleCont table &#123;
  width: 100%;
  font-size: 12px;
  border-collapse: collapse;
  line-height: 1.7;
&#125;
#articleCont table thead &#123;
  background: #f9f9f9;
&#125;
#articleCont table th,
#articleCont table td &#123;
  border: solid 1px #ccc;
  text-align: left;
  vertical-align: top;
  padding: 2px 4px;
  height: 30px;
  min-width: 40px;
  box-sizing: border-box;
&#125;
#articleCont pre &#123;
  white-space: pre-wrap;
&#125;
</style><p style="text-align:justify;">近期论坛有好几个帖子都在问权限如何管理，给大家分享下吧。</p><h1>1. 角色权限管理</h1><p style="text-align:justify;"><b>说起用户权限管理，绕不开 RBAC模型，</b><br></p><p style="text-align:justify;">直接上图：</p><p style="text-align:justify;"><img alt="权限模型标准.png" src="https://img.pmcaff.com/FnK57HTc_ta7h9Kp9akVUgkyJ-j7-picture" width="1200" height="1200" coffee-w="2665px" coffee-h="1269px" coffee-format="png" referrerpolicy="no-referrer"></p><p style="text-align:justify;">RBAC（Role-Based Access Control，基于角色的访问控制），就是用户通过角色与权限（系统资源）进行关联</p><p style="text-align:justify;">简单地说，一个用户拥有若干角色，每一个角色拥有若干权限。这样，就构造成“用户-角色-权限（系统资源）”的授权模型。在这种模型中，用户与角色之间，角色与权限（系统资源）之间，一般是多对多的关系</p><p style="text-align:justify;"><br></p><p style="text-align:justify;"><b>我们可管理的权限（系统资源）分为功能权限、数据权限：</b></p><p style="text-align:justify;">功能权限，管理API和页面元素的可控与否、可见与否</p><p style="text-align:justify;">数据权限，管理数据表Key-Value的可控与否、可见与否</p><p style="text-align:justify;"><br></p><p style="text-align:justify;"><b>上述模型主要体现的是对系统资源的权限管理，接下来说说对人的复杂权限管理：</b></p><p style="text-align:justify;">对人的权限管理需求往往是权限继承、权限隔离等，涉及：</p><ul><li>公司体系结构（Company Architecture），例如集团公司的管理，涉及总部和子公司、股权往来公司、业务往来公司等</li><li>组织架构（Organization），例如部门和子部门、部门领导和员工等</li><li>域（Domain），例如中国域和欧洲域</li><li>多业态（Multiple formats），按照不同业态对角色进行分类，例如系统类角色、营销渠道类角色等</li></ul><p style="text-align:justify;">如何实现呢？（实现方式很多，这里仅简单举例）</p><ul><li>在RBAC模型中引入用户组的概念，为用户赋予用户组，为用户组赋予角色，可考虑将用户组按需关联至公司体系结构层、组织架构层、域层</li><li>在RBAC模型中引入角色类型的概念，可考虑将其按需关联至多业态层</li><li>引入角色上下级继承等</li></ul><p><br></p><p style="text-align:justify;"><b>RBAC模型是目前最常用的用户权限模型，但也有弊端，对权限管理粒度太细了，不一定所有业务场景都需要如此复杂的权限模型，酌情选用，也可以酌情调整模型</b></p><h1>2. 功能权限的管理</h1><p><b>前文说到，功能权限的管理，本质上是在管理系统资源，是在管理一个系统某个页面中的 API和页面元素，比方说一个按钮</b></p><p>我们有两种做法，</p><ul><li>一种是写死，即页面下有哪些API和元素，前端工程师直接写死</li><li>一种是配置，即允许用户自行可视化的配置这些元素</li></ul><p>如需配置，即可引入菜单管理</p><p><br></p><p><strong>菜单用来干嘛？</strong></p><ul><li><p>于系统来说，菜单是我们用来管理系统资源（按钮、页面图片、API等）的载体，通过对菜单和依附菜单的系统资源做权限管控，可以实现细粒度的用户权限管理。因此，菜单管理本身属于RBAC权限管理的一部分</p></li><li><p>于用户来说，菜单最基础的作用是导航，通过菜单，用户可以快速了解系统的功能模块划分、层级结构，也可以快速切换</p><p><br></p></li></ul><p><b>菜单管理如何实现？</b></p><p>直接上图：</p><p><img alt="菜单管理标准.png" src="https://img.pmcaff.com/FqMKvi9GfZwnko2ImkCfeNKzRvvB-picture" width="1200" height="788" coffee-w="1528px" coffee-h="788px" coffee-format="png" referrerpolicy="no-referrer"><br></p><p>菜单的管理：</p><ul><li>菜单名称</li><li>菜单编码，即菜单的唯一标识</li><li>菜单图标</li><li>所属应用，即该菜单属于哪个系统</li><li>父级菜单，即配置多级菜单</li><li>菜单状态，即停启用</li><li>跳转方式，即站内跳转和站外跳转，影响跳转路径的配置</li><li>跳转路径，即菜单的URL</li><li>打开方式，即跳转后的页面打开方式，在当前页打开，还是新页面</li></ul><p>菜单内资源的管理：</p><ul><li>资源名称，即该资源的名称，例如「新增用户」</li><li>资源路径，即该资源的调用路径，例如「新增用户」的路径是Add User API的地址</li><li>资源类型，即API，或页面元素<ul><li>页面元素，例如一个前端绿色小按钮静态图片</li></ul></li><li>资源关联，例如配置了一个Add User API，又配置了一个绿色的新增用户按钮图片，将其关联起来</li></ul><p>这样，我们就可以实现系统资源的可视化配置</p><h1>3. 数据权限的管理</h1><p><b>我们对于数据权限的管理需求，无非是某些数据某个人能看，而另一个不能看之类的。前文正好也讲到，实质上是在做数据表的Key-Value读写权限管理</b></p><p>这里就不上图了，</p><p>实现思路也不复杂，可考虑在角色引入</p><ul><li>支持选择数据表</li><li>支持选择数据表下的Key</li><li>支持选择数据表下的Key的Value</li><li>支持选择只读、读写</li><li>前端页面的逻辑，不要忘记反选哦，很多时候我们的需求就是除了某某之外，其他都能看</li></ul><p><b><br></b></p></div>
  
</div>
            