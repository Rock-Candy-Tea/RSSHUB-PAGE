
---
title: '揪出微信时间规则的猫腻'
categories: 
 - 新媒体
 - 人人都是产品经理
 - 热门文章
headimg: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2019/06/mD7m3K2LTqcugNCh4Pl0.png'
author: 人人都是产品经理
comments: false
date: Wed, 05 Jun 2019 00:00:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2019/06/mD7m3K2LTqcugNCh4Pl0.png'
---

<div>   
<blockquote><p>在使用微信的时候，我们是否会注意到iOS端/Andriod端上的时间显示规则的不同？在没有多大差异的用户体验背后，微信有着一套两端差异大、机制复杂的时间显示规则。</p></blockquote>
<p><img data-action="zoom" class="size-full wp-image-2425324 aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2019/06/mD7m3K2LTqcugNCh4Pl0.png" alt width="800" height="450" referrerpolicy="no-referrer"></p>
<p>由于工作的需要前段时间调研了下微信朋友圈以及会话页面时间显示规则，在这里总结分享给大家。</p>
<h2 id="toc-1">一、概述</h2>
<p>常规方式同一个app不同平台时间显示规则应该是一样的，但是细心的同学会发现微信出乎意料的用了两种显示规则。也可以看出微信两端是由多个且不同产品经理设计的（这是废话），所以这次主要调研的是微信app客户端的安卓和iOS平台，系统版本为v7.0.3。</p>
<p><img data-action="zoom" class="rich_pages aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2019/06/TCen2sqQWaoi4y9QEDyr.png" alt referrerpolicy="no-referrer"></p>
<h2 id="toc-2">二、常规显示规则</h2>
<p>先来说说常规app应用是怎么显示时间的。一般区分前后端，主要分为两种呈现方式。</p>
<p><strong>第一种</strong>是后端直接设计时间显示规则，前端直接显示。这样做优点就可以统一多个平台显示规则，而且灵活。后期需要修改显示规则只需要后段修改一下，即可保证前段app显示规则的同时调整，不需要发布应用包，但同时缺点对后端的压力也大。</p>
<p><strong>第二种</strong>是后端提供时间字段，由前端设计显示规则。这样做优点可以让多个平台显示不同的规则，同时也减少了后端的压力；但也有缺点，不够灵活后期修改需要发布应用包。微信用的就是第二种。当然时间显示规则设计后一般改动的几率会比较小，除非有错误或者影响到了用户的体验。</p>
<p>今天介绍的主要是会话模块和朋友圈模块的显示规则。会话模块指的是微信的第一个主页聊天页面，会话模块主要分为两处的时间显示，会话列表和聊天界面。</p>
<p><img data-action="zoom" class="rich_pages aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2019/06/3eKzObf02rDDx5DhfSZx.jpg" alt width="854" height="707" referrerpolicy="no-referrer"></p>
<p>相对的朋友圈模块指的是与朋友圈相关的页面的时间显示。主要是“发现”下面的朋友圈页面、未读消息页面、详情页面、评论回复以及相册页面。</p>
<p><img data-action="zoom" class="rich_pages aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2019/06/MCxuwfyoosv5eMzLosuq.jpg" alt referrerpolicy="no-referrer"></p>
<h2 id="toc-3">三、模块介绍</h2>
<h3>1.  会话模块</h3>
<p>首先会话模块指的就是聊天那个模块，我们主要调研了其两处的时间显示规则。</p>
<p><strong>（1）会话列表</strong></p>
<p>由于系统可以设置时间为24小时制和12小时制，且微信对这两种情况都做了调整，所以我将细分为24小时制和12小时制的规则。并且每个页面对比iOS和Android系统进行对比。</p>
<p>从调研结果来看，iOS的会话列表显示时间24时制时主要是展示最新一条消息的时间，如果没收到消息了，当天直接显示“时分”，而大于今天、小于等于昨天直接显示“昨天”，当大于昨天而小于等于一周时则显示“星期几”（一周是从接收最后一条消息开始算的），当大于一周后直接显示“年月日”。</p>
<p>12时制时，需要区分“时段”：</p>
<ul>
<li>0点到6点时为“凌晨”</li>
<li>6点到12点时为“上午”</li>
<li>12点到24点时为“下午”</li>
</ul>
<p>需要对每一天的时间进行划分时段显示，例如上午8:12，其他跟24时制的没什么区别。</p>
<p><img data-action="zoom" class="rich_pages aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2019/06/ICvFbLo3GJbDba5RHPf1.jpg" alt referrerpolicy="no-referrer"></p>
<p>对比Android系统，当设置为24小时制时跟 iOS的24时制没有太多区别，唯一不同的是iOS大于昨天而小于一周。这里的一周是从最后一条消息显示的时间开始计算环绕一周的，而安卓的大于昨天小于本周，这里的“本周”是从周一0:00开始算到周日的23:59分结束的，所以有本质的区别。</p>
<p>相比12小时制，安卓的更加细分“时段”：</p>
<ul>
<li>0点到6点为“凌晨”</li>
<li>6点到12点为“上午”</li>
<li>12点到14点为“中午”</li>
<li>14点到18点为“下午”</li>
<li>18点到24点为“晚上”</li>
</ul>
<p>“本周”和24时制的相同有区别与iOS，其他并没有太大差异。</p>
<p><img data-action="zoom" class="rich_pages aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2019/06/xm93UFuASOQSQt0Mm23r.jpg" alt referrerpolicy="no-referrer"></p>
<p><strong>（2）聊天页面</strong></p>
<p>即和好友对话的页面，往往这个页面需要显示更详细的时间。这个时间不是每一条消息都去统计，因为在快速聊天时统计每条消息的时间是没有多大意义的，所以在iOS平台每隔五分钟会统计一次。即当两人在不间断的聊天时，iOS每隔五分钟记录一次时间。其他就不展开细说了，详看表格。</p>
<p><img data-action="zoom" class="rich_pages aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2019/06/qIaaBrq7A19BZ9gO4fJY.jpg" alt referrerpolicy="no-referrer"></p>
<p>对比Android系统，有些奇特的是在连续群聊或者私聊的时候，并不能知道他隔多长时间统计一次，毫无规律可言。</p>
<p><img data-action="zoom" class="rich_pages aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2019/06/cM6CciS4TM0nSfEBaZwa.jpg" alt referrerpolicy="no-referrer"></p>
<h3>2. 朋友圈模块</h3>
<p>朋友圈模块指的是发现模块下的朋友圈模块。主要跟朋友圈相关的页面的时间规则，其中包括朋友圈页面、详细页面、相册页面、评论/回复和未读消息。当然朋友圈模块下的这些页面也分为24小时制和12小时制。</p>
<p>（1）朋友圈——统计计时法</p>
<p>由于朋友圈页面的显示方式不一样，所以我单独做了个介绍。</p>
<p>我给朋友圈页面这种显示方式取名为“统计计时法”（没想到其他更好的名字）从朋友圈发布成功后，开始计时直到永远，以一种统计的方式显示。</p>
<p>发布后的前120秒，都显示1分钟前；120秒到1小时内，都显示n分钟前；1小时到24小时内，都显示n小时前；大于24小时又小于48小时的情况需要判断，这个时间段是否属于昨天的范畴还是前天的范畴，属于昨天就显示“昨天”，属于前天就显示2天前；大于48小时后直接统计距离发布当天的相隔几天并直接显示n天前。</p>
<p>这里需要注意的是，第一我们常规统计到秒，但是微信只显示到分钟；第二不足2分钟按一分钟前显示，不满2小时按1小时前显示，以此类推。</p>
<p><img data-action="zoom" class="rich_pages aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2019/06/zbdpSHNf48yyctkj6zZv.jpg" alt referrerpolicy="no-referrer"></p>
<p>朋友圈这个页面，Android跟iOS规则是一致的。</p>
<p><img data-action="zoom" class="rich_pages aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2019/06/GEml0AcqrVV0MmlOhDFh.jpg" alt referrerpolicy="no-referrer"></p>
<p>（2）详情页面、相册页面、评论/回复和未读消息——定时计时法</p>
<p>“定时计时法”就是发布的显示时间是固定的，不会受当前变化的时间影响。当天也就是在发布朋友圈消息后到现在没有跨跃一天的情况下还要判断有没有跨越小时，没跨越就显示n分钟前，已跨越小时就直接显示时分。当跨越了一天，就显示“昨天”。当跨越了昨天且在今年内（没有跨越一年）就显示月日，跨越一年就显示年月日，以此类推。</p>
<p><img data-action="zoom" class="rich_pages aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2019/06/4XRh4nnRXPCCXAffBZ0y.jpg" alt referrerpolicy="no-referrer"></p>
<p>相对于Android，这几个页面相对比较简单。在发布朋友圈消息的当天直接显示“时分”，昨天就直接显示“昨天+时分”，大于昨天的都是直接显示“年月日+时分”。并且不用区分24或者12时制的显示</p>
<p><img data-action="zoom" class="rich_pages aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2019/06/nBR6yIsYRc4UxNlJ9CsJ.jpg" alt referrerpolicy="no-referrer"></p>
<h2 id="toc-4">四、总结</h2>
<p>时间的目的是为了清晰明确地记录改条信息的存在，可以让用户能通过时间快速定位到该条信息。而设计这个规则要结合用户使用习惯以及用户体验为前提，在不打扰到用户的前提之下又能快速定位到这条信息的“存在”。</p>
<p>微信，作为一个坐拥11亿月活设备的庞大平台，能清晰简单地展示这个时间是非常有必要的；但是反观现在的微信时间显示规则过于复杂并且两端差异过大，虽然对普通用户而言并没有太大的体验上的差异，但是对于开发者和管理者而言，过于复杂维护起来将是较大的成本。但复杂应该也有其存在的意义，我们也只能站在旁观者的角度去揣测他的方向，很难深入地去研究。</p>
<p> </p>
<p>作者：檐下风铃舞动，微信公众号：檐下风铃舞动（ID：yxflwd）</p>
<p>本文由 @檐下风铃舞动 原创发布于人人都是产品经理。未经许可，禁止转载</p>
<p>题图来自Unsplash，基于CC0协议</p>
<div class="support-author"><div class="support-title">给作者打赏，鼓励TA抓紧创作！</div><button class="button--pay" data-post-id="2424357" data-author="619159" data-avatar="https://static.woshipm.com/APP_U_201908_20190827091120_2873.jpeg"><svg width="13" height="16" class="svgIcon--use" viewBox="0 0 13 16"><path d="M9.113,4.571 C9.951,3.771 10.895,2.742 10.685,2.057 C10.475,1.485 10.056,0.799 9.427,0.571 C8.903,0.342 8.379,0.456 7.750,0.799 C7.540,0.342 7.016,0.114 6.596,-0.001 C5.863,-0.001 5.234,0.228 4.814,0.914 C4.080,0.571 3.451,0.685 2.927,1.028 C2.613,1.256 2.298,1.713 2.298,2.628 C2.298,3.542 3.137,4.228 3.766,4.685 C2.508,5.599 -0.218,7.885 -0.008,12.228 C-0.218,15.656 2.613,15.999 2.613,15.999 L10.371,15.999 C11.314,15.885 12.991,14.971 12.991,12.571 L12.991,12.228 C13.201,7.771 10.371,5.371 9.113,4.571 L9.113,4.571 ZM8.932,11.835 L6.940,11.835 L6.940,13.207 C6.940,13.435 6.731,13.549 6.521,13.549 C6.311,13.549 6.102,13.435 6.102,13.207 L6.102,11.835 L4.110,11.835 C3.900,11.835 3.795,11.606 3.795,11.378 C3.795,11.149 3.900,10.921 4.110,10.921 L6.102,10.921 L6.102,10.121 L4.949,10.121 C4.739,10.121 4.634,9.892 4.634,9.664 C4.634,9.435 4.739,9.206 4.949,9.206 L5.892,9.206 L4.739,7.950 C4.634,7.835 4.739,7.606 4.949,7.492 C5.158,7.378 5.368,7.264 5.473,7.378 L6.521,8.635 L7.674,7.264 C7.779,7.149 7.989,7.264 8.198,7.378 C8.408,7.492 8.408,7.721 8.408,7.835 L7.150,9.321 L8.094,9.321 C8.303,9.321 8.408,9.549 8.408,9.778 C8.408,10.007 8.303,10.235 8.094,10.235 L6.940,10.235 L6.940,11.035 L8.932,11.035 C9.142,11.035 9.247,11.264 9.247,11.493 C9.247,11.606 9.037,11.835 8.932,11.835 L8.932,11.835 Z"/></svg>
赞赏</button></div>                      
</div>
            