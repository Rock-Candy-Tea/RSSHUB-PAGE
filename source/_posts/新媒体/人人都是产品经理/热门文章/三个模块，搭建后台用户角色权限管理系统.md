
---
title: '三个模块，搭建后台用户角色权限管理系统'
categories: 
 - 新媒体
 - 人人都是产品经理
 - 热门文章
headimg: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/img/50.jpg'
author: 人人都是产品经理
comments: false
date: Sat, 09 Dec 2017 00:00:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/img/50.jpg'
---

<div>   
<img data-action="zoom" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/img/50.jpg" referrerpolicy="no-referrer"><blockquote><p>一个后台的用户角色权限系统总是可以大概划分为三个打的模块的：用户管理、角色管理、权限管理。本文作者将就此三个模块展开叙述，enjoy~</p></blockquote>
<p>
</p><h2 id="toc-1">一. 用户角色权限系统说明</h2>
<h3><strong>1. RBAC权限设计模型</strong></h3>
<p><strong>（1）RBAC</strong></p>
<p>（Role-Based Access Control，基于角色的访问控制），就是用户通过角色与权限进行关联，从而获得某些功能的使用权限。权限被赋予给角色，而不是用户，但是一个用户可以拥有若干个角色，当一个角色被赋予给某一个用户时，此用户就拥有了该角色所包含的功能权限。简单地说，一个用户拥有若干角色，每一个角色拥有若干功能权限。这样，就构造成“用户-角色-权限”的授权模型。在这种模型中，用户与角色之间，角色与权限之间，一般者是多对多的关系。如下图：</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2017/12/KwZECVpva9uQG9uW7QZv.png" alt width="800" height="251" referrerpolicy="no-referrer"></p>
<h3><strong>2. 三大模块搭建后台用户角色权限系统</strong></h3>
<p>如上所述，一个后台的用户角色权限系统总是可以大概划分为三个打的模块的：用户管理、角色管理、权限管理。用户管理往往随着行政部门划分或者随着业务线部门划分，对应部门或者小组内的用户有着基本相似的功能需求和权限等级；角色管理相对来讲更加固定，它往往是基于业务管理需求而预先在系统中设定好的角色标签，一般不会随意更改，更像是一个用户分组标签；权限管理内容相对更加庞杂和丰富，主要包含了目标、操作和许可权三个部分，当某一功能权限授权给用户时，也就相当于为该用户开通了可以操作某个目标功能的许可权。</p>
<p>角色权限系统属于策略设计的范畴，它的设计非常考验一个PM对业务的理解力以及对自己后台所有功能的熟悉程度。做角色权限系统之前一定要先深度了解业务流程以及后台的所有功能模块，在不了解的情况下，多向相关同事请教，避免角色权限系统设计过程中出差错和逻辑漏洞。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2017/12/DZ5QsD1gc4PRYb8wIMj2.png" alt width="796" height="556" referrerpolicy="no-referrer"></p>
<h2 id="toc-2">二. 用户角色权限系统建设的三大模块</h2>
<h3><strong>1.  用户管理</strong></h3>
<p>用户管理中的用户主要是功能系统的使用者，这些用户是一个一个的员工个体，这些个体往往从两个维度来进行划分：行政关系（部门架构）、业务部门（业务架构）。用户管理就是在此两个维度来给员工个体进行关联性的初步分群或者分组。按照行政部门或者按照业务线部门划分后，对应部门或者小组内的用户有着基本相似的系统功能使用需求和权限等级；</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2017/12/kEwgV3eiIH7s6rZF63u3.png" alt width="586" height="284" referrerpolicy="no-referrer"></p>
<p style="text-align: center;">注：上图例为按照行政关系划分的用户管理模式</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2017/12/CAq55d0Z3NwZlj8xKT92.png" alt width="450" height="524" referrerpolicy="no-referrer"></p>
<p style="text-align: center;">注：上图例为按照业务线关系划分的用户管理模式</p>
<h3><strong>2. 角色管理</strong></h3>
<p><strong>（1）角色管理</strong></p>
<p>角色往往是基于业务管理需求而预先在系统中设定好的固定标签，每个角色对应明确的系统权限，其所拥有的系统权限一般不会随意更改，并且角色也不会随着用户的被添加和被移除而进行改变，相较于用户管理而言更加稳定；</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2017/12/HVnoYiFOjXULSqhqN5W8.png" alt width="718" height="459" referrerpolicy="no-referrer"></p>
<p><strong>（2）自动赋权：用户自动进入角色</strong></p>
<p>如果角色与行政关系下的组织部门存在绑定关系，那么如果一个用户进入到该组织部门后，该用户会自动被加入到对应的角色中，并且拥有该角色所有的系统权限。如一个财务人员【小张】入职财务部后，那么该用户无需进行额外的授权即可在对应财务报表系统查看该部门员工可查看的财务数据报表和对应的操作权限（比如操作财务审批等）；</p>
<p><strong>（3）角色赋权：用户被添加进角色</strong></p>
<p>业务是不断创新和发展的，随着业务的发展，会有越来越多的新的角色被设置和创建，比如公司新启动了一个企业团餐项目，项目部横向的从各个部门找了多个员工组建项目团队，并且该项目的业务权限也只是授权给这批员工可查看和操作，那么，在此项目中，会产生一个新的角色 “ 财务1 ”，系统高级管理员会把从财务部门选中的财务【小张】添加到“ 财务1 ”这个角色中，那么【小张】即可获得查看企业团餐项目业务数据报表和操作的权限。这种权限的授予无法通过用户行政关系的自动绑定来实现；</p>
<p><strong>（4）角色继承：角色权限的继承</strong></p>
<p>权限可以是独有的，也可以是继承的。每个角色都有自己的权限集，角色继承其实也就是继承父系角色的权限，一般角色在继承其父系角色的全部权限的基础上增加拥有一些自己的权限。而系统角色继承往往存在于用户分级管理比较明确的团队或者公司；</p>
<p><strong>（5）角色互斥：角色包含的权限互斥</strong></p>
<p>角色互斥的业务背景：当一个业务流程由于风控的原因，需要将其操作给划分成分开的几个步骤时，需要给这几个不同的步骤授权不同的角色，并且这些角色之间需要进行互斥。比如大额财务报销审批流程，财务人员【小张】拥有了审批人权限后，就无法将审核确认的权限再授予小张，以此来规避一个人完成大额报销而带来的财务风险；</p>
<p><strong>（6）临时角色</strong></p>
<p>临时角色往往是针对特殊群体设置的，比如公司有特殊访问团队莅临，需要给这些特殊的客户一些临时身份来体验某些功能操作。那么把这些人添加到部门的组织架构中显然是不合适的，因为这些人只是临时的摆放者，不是企业员工；其次，这些客户需要体验的功能操作往往是横跨多个业务模块和产品线的（比较繁杂），一般公司并没有现成的固定角色符合拥有客户所需的全部操作权限，因此需要给这些客户开设临时角色，并且支持给临时角色最大的权限选择空间；</p>
<p><strong>（7）黑白名单</strong></p>
<h3><strong>3. 权限管理</strong></h3>
<p><strong>（1）权限管理</strong></p>
<p>权限管理更多是从功能菜单、功能操作、数据参数三个不同颗粒度等级来考量的。具体颗粒度的大小视公司结构和团队规模而定，如果不是业务属性一定要求将权限控制到非常精细的级别，其实就没有必要将权限的颗粒度拆分到具体某一项操作或者某一个按钮，毕竟后台产品的核心是业务管理平台，主要目标是辅助业务的管理和推进。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2017/12/wCt8P9TcS2yw0z9CQLlk.png" alt width="782" height="187" referrerpolicy="no-referrer"></p>
<p>注：如图为某一后台产品的部分截图，其中可见功能菜单页、功能操作按钮和数据字段。</p>
<p><strong>（2）功能菜单权限</strong></p>
<p>对于后台产品来讲，针对功能菜单来划分用户权限其实是比较粗颗粒度的一种管理方式，这种模式下用户一旦获得授权即可使用该菜单栏下的全部数据查看权限和功能操作权限；</p>
<p><strong>（3）功能操作权限</strong></p>
<p>功能操作层级的权限相对于功能菜单会更为深入，这种情况下，不同角色的用户可以进入同一菜单页后台查看相同的数据字段信息，但是他们可执行的功能操作不同；</p>
<p><strong>（4）数据字段权限</strong></p>
<p>数据字段层面是较细颗粒度的拆分，他会实现不同角色用户在进入同一菜单页后台时，可见的数据字段都有差异。比如销售人员进入某销售业绩管理后台时，可以看到自己的业绩提升数据，但是财务人员看到的是业务工单的费用字段，这些字段共存在一个菜单页中，只是受限于不同的角色权限而已。</p>
<h2 id="toc-3">三. 案例分析</h2>
<h3><strong>1. 促销活动权限系统权限对接</strong></h3>
<p>以某一促销活动的后台从无权限限制到接入用户角色权限管理系统为例，详情如下：</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2017/12/V7EEJ3TT1f2ivxxXLagG.png" alt width="791" height="250" referrerpolicy="no-referrer"></p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2017/12/SfYOGq9K7014Bm8N5FYt.png" alt width="761" height="382" referrerpolicy="no-referrer"></p>
<p style="text-align: center;">注：以上为某产品的促销活动管理后台截图</p>
<h3><strong>2. 促销活动后台接入权限系统前</strong></h3>
<p>在促销活动后台接入权限系统之前，几乎全部的系统权限都处于裸奔的状态，所有人业务线成员都可以查看该后台的运营活动内容和运营结果数据，并且可以执行相对敏感的操作。这种情况显然是存在一定的管理风险的，因此该后台系统需要对接权限管理系统进行系统化管理和风险控制；</p>
<h3><strong>3. 促销活动后台接入权限系统时</strong></h3>
<p>促销活动在接入权限管理系统过程中，需要拆解该功能模块的权限元素（到一定颗粒度），因此需要根据业务特征来判断需要拆分的颗粒度，是到功能菜单、功能操作还是数据字段的级别，明确拆分颗粒度之后，权限管理系统才可以给不同角色按照颗粒度授予权限；</p>
<h3><strong>4. 促销活动后台接入权限系统后</strong></h3>
<p>促销活动在接入权限管理系统过程后，当对应角色的用户再次登录这个后台时，首先后台会校验该用户的角色是否拥有该功能模块的权限，以及该角色权限对应的操作权限和数据字段权限，校验结果经服务端处理会在产品端展示给用户可见。这个时候，同一用户再该后台可见和可执行的操作与接入权限管理系统之前可能有很大的不同，这就是基于用户角色的权限管理系统带来的改变。</p>
<h2 id="toc-4">四. Q&A</h2>
<p><strong>1. 一个用户拥有多个角色，多角色之间如果存在互斥关系如何处理？</strong></p>
<p>如果一个用户已经被添加到某一角色范围下，那么，当给该用户添加一个与当前角色存在权限互斥关系的角色时，系统会进行互斥性判断，后面的角色就无法给该用户添加成功；</p>
<p><strong>2. 业务发展过程中，如何保证不同角色之间权限拆分清晰？</strong></p>
<p>随着业务的快速发展，一定会不断新增不同的角色和更多的功能模块，而且这些角色和功能权限之间的关系也会日益混乱，这个时候需要产品经理和业务方一起，及时的面对业务的发展变化，及时、快速的梳理业务调整范围，作出对应的改变；</p>
<p><strong>3. 用户权限管理系统核心难点是前期的产品设计吗？</strong></p>
<p>用户权限管理系统核最难的不是前期的产品设计，而是后续的运营维护，因为权限系统的结构往往不会随意变更，但是随着业务发展快速出现的角色和功能模块，为了防止角色和功能权限之间的关系变得混乱，在建立新的角色和分配权限的时候需要思路清晰且慎重调整。</p>
<p>完结~</p>
<p> </p>
<p>本文由 @阳明（刘同） & @云殊（张俊恒）原创发布于人人都是产品经理。未经许可，禁止转载</p>
<p>题图来自 unsplash，基于 CC0 协议</p>
<div class="support-author"><div class="support-title">给作者打赏，鼓励TA抓紧创作！</div><button class="button--pay" data-post-id="870272" data-author="167346" data-avatar="http://img.woshipm.com/WD_U_201611_20161121174905_9370.jpg"><svg width="13" height="16" class="svgIcon--use" viewBox="0 0 13 16"><path d="M9.113,4.571 C9.951,3.771 10.895,2.742 10.685,2.057 C10.475,1.485 10.056,0.799 9.427,0.571 C8.903,0.342 8.379,0.456 7.750,0.799 C7.540,0.342 7.016,0.114 6.596,-0.001 C5.863,-0.001 5.234,0.228 4.814,0.914 C4.080,0.571 3.451,0.685 2.927,1.028 C2.613,1.256 2.298,1.713 2.298,2.628 C2.298,3.542 3.137,4.228 3.766,4.685 C2.508,5.599 -0.218,7.885 -0.008,12.228 C-0.218,15.656 2.613,15.999 2.613,15.999 L10.371,15.999 C11.314,15.885 12.991,14.971 12.991,12.571 L12.991,12.228 C13.201,7.771 10.371,5.371 9.113,4.571 L9.113,4.571 ZM8.932,11.835 L6.940,11.835 L6.940,13.207 C6.940,13.435 6.731,13.549 6.521,13.549 C6.311,13.549 6.102,13.435 6.102,13.207 L6.102,11.835 L4.110,11.835 C3.900,11.835 3.795,11.606 3.795,11.378 C3.795,11.149 3.900,10.921 4.110,10.921 L6.102,10.921 L6.102,10.121 L4.949,10.121 C4.739,10.121 4.634,9.892 4.634,9.664 C4.634,9.435 4.739,9.206 4.949,9.206 L5.892,9.206 L4.739,7.950 C4.634,7.835 4.739,7.606 4.949,7.492 C5.158,7.378 5.368,7.264 5.473,7.378 L6.521,8.635 L7.674,7.264 C7.779,7.149 7.989,7.264 8.198,7.378 C8.408,7.492 8.408,7.721 8.408,7.835 L7.150,9.321 L8.094,9.321 C8.303,9.321 8.408,9.549 8.408,9.778 C8.408,10.007 8.303,10.235 8.094,10.235 L6.940,10.235 L6.940,11.035 L8.932,11.035 C9.142,11.035 9.247,11.264 9.247,11.493 C9.247,11.606 9.037,11.835 8.932,11.835 L8.932,11.835 Z"/></svg>
赞赏</button><div class="pay-num">4人打赏</div><div class="donation-list"><div class="donation-item"><img class="avatar" src="https://static.woshipm.com/TTW_USER_R_201706_20170602183114_5748.jpg?imageView2/1/w/80" height="32" width="32" referrerpolicy="no-referrer"></div><div class="donation-item"><img class="avatar" src="https://static.woshipm.com/TTW_USER_R_201706_20170602182623_4954.jpg?imageView2/1/w/80" height="32" width="32" referrerpolicy="no-referrer"></div><div class="donation-item"><img class="avatar" src="https://static.woshipm.com/TTW_USER_R_201706_20170602175152_1007.png?imageView2/1/w/80" height="32" width="32" referrerpolicy="no-referrer"></div><div class="donation-item"><img class="avatar" src="https://static.woshipm.com/TTW_USER_R_201706_20170602182437_5069.jpg?imageView2/1/w/80" height="32" width="32" referrerpolicy="no-referrer"></div></div></div>                      
</div>
            