
---
title: '如何设计电商订单产品？'
categories: 
 - 新媒体
 - 人人都是产品经理
 - 热门文章
headimg: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/PITJq9gOQkEfZvD2blAu.jpg'
author: 人人都是产品经理
comments: false
date: Mon, 13 Sep 2021 00:00:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/PITJq9gOQkEfZvD2blAu.jpg'
---

<div>   
<blockquote><p>编辑导语：订单系统连接了用户和商家，用户可以通过订单看到商品购买详情，商家则可以通过订单看到购买用户信息等。而整个订单系统囊括了许多模块，如订单生成、订单计算等。本篇文章里，作者就电商订单系统设计做了梳理和总结，一起来看一下。</p></blockquote>
<p><img data-action="zoom" class="size-full wp-image-5134392 aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/PITJq9gOQkEfZvD2blAu.jpg" alt width="900" height="420" referrerpolicy="no-referrer"></p>
<p>各位小伙伴好，本文是电商产品设计系列文章的第八篇，订单产品。在电商系统中，订单是连接用户和商家之间最重要的交易信息系统，本文就来讨论一下订单相关的内容。</p>
<h2 id="toc-1">一、订单的生成与状态</h2>
<h3>1. 下单过程</h3>
<p>电商下单的过程相信大家都不陌生，我们以从购物车下单为例，可以看到一次下单过程涉及的主要前端页面有购物车选择商品页、订单确认页、收银台支付页、订单详情页、订单列表页。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/59tUJWMhXQqeFg6Ag5pq.png" alt width="772" height="400" referrerpolicy="no-referrer"></p>
<p>可以看到，下单过程中重点有3个，分别是订单金额计算、库存校验、过程信息清晰展示。</p>
<p>商品金额计算包括商品价格、运费、优惠活动的计算。</p>
<p>库存校验主要判断库存是否足够、用户是否有购买限制、库存的锁定与扣减。</p>
<p>过程信息清晰展示包括优惠明细、子订单明细、商品主图/名称/规格/数量的展示、运费/优惠券/促销的展示。</p>
<p>其中订单详情包含了最多的信息，主要包括用户信息、基础信息、收货信息、商品信息、优惠信息、支付信息、物流信息、其他信息，包括的详细信息见下图：</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/k7y2Fap9W8LncBB9FmKr.png" alt width="755" height="416" referrerpolicy="no-referrer"></p>
<p>总结来看订单的下单过程如下：</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/umhCfk8oO6O5CTc4nsXL.png" alt width="767" height="422" referrerpolicy="no-referrer"></p>
<h3>2. 订单计算</h3>
<p>在下单过程中，金额的计算是流程中最重要也是用户最关心的部分，订单应付金额=商品金额（SKU金额合计）+运费-总优惠金额。</p>
<p>我们分别来看这几个值。商品金额即商品原价，不扣除任何优惠金额，但是注意和划线价进行区分。我们在购物时，可以在商品详情页查看商品的运费金额，商品详情页的运费是根据商品的运费模板来计算。</p>
<p>以下图为例，我们可以看到商品是满一件包邮，其他常见的包邮规则还有满XX元包邮，某一区域包邮等。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/uhRc9DUD7OiDTl0ZRAn8.png" alt width="753" height="511" referrerpolicy="no-referrer"></p>
<p>以下图的运费模板为例，我们可以配置的关键信息有计费方式、配送区域、指定区域的首费与续费，若想设置包邮将对应条件下的邮费设置为0即可。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/yrCsNEZsrSF42MvULZfJ.png" alt width="755" height="242" referrerpolicy="no-referrer"></p>
<p>实际生活中我们经常会发现有些商品特价促销，9.9包邮，而我们日常寄快递都需要6元及以上，他们是怎么做到这么低的价格包邮的呢？</p>
<p>实际当寄件具有规模效应后，实际运费能压到非常低的价格，一般作为物流公司大客户来进行议价。</p>
<p>影响议价的因素主要有单量、所在地区（如义务优势）、包装重量与大小等。我们从某商家论坛找到的数据显示日均单量的200单以上时，价格可以谈至1.5元左右一单，实际运费较低。</p>
<p>但是随着电商发展至今，我们我们发现越来越多的商品都有包邮的服务，现在很多小伙伴如果发现商品不包邮相信都会犹豫之后再下单，所以在包邮盛行的今日，越来越多的商家会将运费计入商品成本，从而提供包邮服务，降低用户下单决策成本。</p>
<p>订单的优惠来源包括促销活动、优惠券、积分抵扣、会员折扣等。当涉及多种优惠活动同时进行、不同商品参与不同促销互动时，优惠金额的计算详见后续章节。</p>
<p>订单计算完成后最后一步是订单支付，这一部分主要包括支付方式，目前主流的是使用第三方支付，如微信支付和支付宝支付，这部分的对接详见第三方支付API文档，这部分后续我也会单独写一篇文章介绍一下。</p>
<p>订单的支付主要包括直接支付父订单，或者选择部分子订单进行支付。</p>
<h3>3. 订单状态</h3>
<p>在一次完整的订单过程中，订单有非常多的状态，主要的订单状态包括待付款、待发货、待收货、已完成。</p>
<ul>
<li>待付款：用户提交订单，尚未支付的状态。由于待支付状态会锁定库存，所以一般会设置超时自动取消。</li>
<li>待发货：用户付款之后，等待商家发货。</li>
<li>待收货：商家已发货，等待用户收货。</li>
<li>交易成功：用户确认收货后，订单已完成交易。</li>
<li>交易关闭：付款之前取消订单，或售后完成后订单全额退款。</li>
<li>售后中：非订单状态，指订单有对应的进行中的售后单，如用户退换货、退款。</li>
</ul>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/fOHdno6jJiQQPAuXWHBT.png" alt width="500" height="419" referrerpolicy="no-referrer"></p>
<p>我们知道，订单状态决定相应服务体系，如“待收货”状态下是否可以确认收货、申请退款。同时，订单状态与售后状态相互独立，他们不是一个状态字段但是可以做关联。我们上述说的是订单的外部状态，即展示给用户查看的状态，而订单内部的状态指订单在仓库层相关的操作，这部分的操作对应的是“待发货”状态。</p>
<h2 id="toc-2">二、父子订单拆分</h2>
<h3>1. 父子订单</h3>
<p>当我们在在线商城购物时，经常会遇到商品属于不同卖家或因商品数量、重量等问题需要拆单的现象。这个时候我们通常会生成两种订单号，一种是拆单前订单的订单号，另一种是拆单后的订单后。</p>
<p>其中父订单用于记录用户这一次下多单的行为，还有合并支付。如果有跨商家优惠，父订单可以对应到相应的优惠，然后对各个商家进行分摊、子订单用于追踪发货物流、售后以及财务结算的依据，用于记录优惠信息。用户关心的是订单的订单状态、物流状态、售后状态、售后金额，这些都会以子订单为单位进行跟踪。</p>
<p>注意，在订单产品架构的设计中，如果使用了父子订单的设计，系统中并不是需要拆单的订单才有父子订单，而是所有的订单都需要生成父子订单。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/97Yu8cKhNQ9wBGaRMvvf.png" alt width="757" height="428" referrerpolicy="no-referrer"></p>
<h3>2. 订单拆单</h3>
<p>影响父子订单拆单的规则有多个，主要有平台的不同店铺商家、不同的发货仓库、品类特殊包装要求、物流因素、商品价值等。</p>
<p>根据拆单时间的不同，我们可以分为支付前与支付后的拆单，支付前主要是拆订单——拆成父子订单。支付后主要拆发货单——拆成子订单和多个包裹。</p>
<p>最好在下单过程中能拆好就拆好，避免后续判断。但是比如第三方商城订单、仓库发货限制等因素会导致生成订单后仍有需求拆单。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/5oVZfTHdSqPfYSTWBjAt.png" alt width="600" height="422" referrerpolicy="no-referrer"></p>
<h3>3. 优惠分摊</h3>
<p>订单支付时非常重要的一个环节就是计算优惠的分摊，即订单内所有商品参与一个活动后，活动优惠的金额分摊各个商品后的金额。</p>
<p>为什么要计算优惠分摊呢，主要作用有：</p>
<ol>
<li>使用优惠后计算每个商品实付金额，用于后续核算商品利润。</li>
<li>作财务上的结算用。</li>
<li>商品售后时计算应退商品金额。我们以一个实例来分析订单金额的计算：</li>
</ol>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/gIM5Qui5gs02cfRtgdAN.png" alt width="757" height="350" referrerpolicy="no-referrer"></p>
<p>子订单1中各商品分摊的优惠：</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/5pUzzr9W78UQjAczSpbK.png" alt width="752" height="456" referrerpolicy="no-referrer"></p>
<p>如果退回了子订单1中的商品1，此商品实付205.12元，若退全款则退款205.12元。除了退现金外，虚拟资产也要退回，例如积分、充值费用等。比如该商品若全额退款可退回1.03元——103个淘金币。若全额退款则部分情况下优惠券退回，部分退款则一般不退优惠券。</p>
<h2 id="toc-3">三、从下单到发货</h2>
<h3>1. 订单发货流程</h3>
<p>用户下单后，接下来就是安排发货。</p>
<p>根据商家体量的不同，发货方式也会有差异。小商家一般采用手动打包、线下跟踪。发货后，在商家后台填写物流信息；中小商家利用第三方ERP管理订单，统一发货，并自动回传物流信息；大商家或自营平台则有自己独立的ERP或独立的WMS，并且会有适合业务的定制化流程。</p>
<p>订单发货时首先涉及的是拆单，因为仓库都是根据订单为单位去进行发货，我们来梳理一下订单全流程中，拆单的过程：</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/pSxCzyqEXaJvRA5IxhEl.png" alt width="754" height="489" referrerpolicy="no-referrer"></p>
<p>第一次拆单拆的是订单，指用户同时从购物车提交订单，拆分生成多个子订单。第二次拆单是拆发货单，如果一个订单需要拆分成多个包裹发出，我们需要在调度层进行拆单，下发给仓库多个订单。</p>
<p>注意，这里一般不建议在仓库层拆单，因为在仓库层拆单不好监控。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/jpiRF19SnFi9rIPPn0Yv.png" alt width="500" height="600" referrerpolicy="no-referrer"></p>
<p>上图展示的是订单的前台显示状态，但是对应后台订单层订单发货的状态非常复杂，一个前台订单状态对应非常多后台发货相关步骤的流转，具体见下：</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/xc94WG6ZxXDs7Awi3nZo.png" alt width="757" height="584" referrerpolicy="no-referrer"></p>
<p>上面讲的是普通实物商品的常规发货流程，实际我们还会碰到其他的订单类型，不同业务有不同的订单，不同的订单有不同的订单流程。</p>
<p>实物商品中，最常见的是普通实物商品，走的是上述的常规订单流程。第二种是实物+服务的商品，比如售卖家电并提供上门安装调试服务。在这种情况下，实物子订单和安装服务子订单相互独立，在一个父订单下绑定，等后续安装服务完成后，订单状态才算完结。若客户不要求安装服务，则涉及到服务费用退款。</p>
<p>虚拟商品中，一种是纯线上的服务如话费充值、游戏充值，这种生成订单后，会调用第三方服务，完成发货。注意这种订单需要设置多久内允许取消。另一种是线上下单线下服务的，如OTA、O2O等，这种订单要确保用户享受到服务、进行财务结算，注意这种类型订单的退款流程。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/dBH3SEkaPq1mZBCdzGDS.png" alt width="754" height="450" referrerpolicy="no-referrer"></p>
<h3>2. 订单数据分析</h3>
<p>订单在交易的过程中，系统会记录订单的数据，便于数据分析指导之后的经营生产。我们需要从订单的流量、品类、交易三个维度进行分析。</p>
<p>首先是流量维度，即分析店铺、商品的访问与转化等数据。流量分析核心指标有：</p>
<ul>
<li>浏览量PV、访客数UV、跳失率、人均浏览量、老用户占比；</li>
<li>商品访客数、商品浏览量、加购人数·下单转化率、下单金额、下单数；</li>
<li>支付金额、支付用户数、支付转化率·客单价、整体转化率。</li>
</ul>
<p>流量的分析维度有整体、流量来源、核心页面。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/JFSdZAdOX2VoxVPczIlm.png" alt width="758" height="322" referrerpolicy="no-referrer"></p>
<p>其次是订单商品品类分析，分析核心指标有：</p>
<ul>
<li>商品访客数、商品浏览量、商品收藏人数、商品加购人数；</li>
<li>加购转化率、收藏转化率；</li>
<li>下单用户数、下单件数、下单金额、下单转化率；</li>
<li>支付用户数、支付件数、支付金额、支付转化率；</li>
<li>客单价、访客平均价值。</li>
</ul>
<p>品类分析维度有品类、商品、新品。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/60KnIPwyaMYVpYudIIsF.png" alt width="756" height="453" referrerpolicy="no-referrer"></p>
<p>最后是订单交易数据分析，其交易核心指标有：</p>
<ul>
<li>访客数、下单用户数、下单金额；</li>
<li>支付买家数、支付金额、客单价；</li>
<li>下单转化率、下单支付转化率、支付转化率；</li>
<li>商品成本、运费成本、确认收货金额。</li>
</ul>
<p>交易分析维度有整体、明细。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/xmeg1XLLAMQjB5SG2a4a.png" alt width="753" height="417" referrerpolicy="no-referrer"></p>
<h2 id="toc-4">四、总结</h2>
<p>总结一下本文内容，主要有三部分的内容：订单的生成、父子订单、订单的发货三部分。</p>
<ol>
<li>掌握订单生成：从用户提交订单，到支付、发货、收货的订单状态变化，订单信息结构，对于订单可以进行的操作等。</li>
<li>父子订单：父子订单的作用，优惠分摊规则与作用，如何计算订单金额。</li>
<li>订单发货：了解订单发货的过程，内部状态和外部状态的区别，多种订单类型（不同的业务场景，订单处理流程有区别），订单数据分析（交易、商品）。</li>
</ol>
<p>下图是整个订单的产品架构：</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/BwbTDxbuGbzrerZrbocF.png" alt width="755" height="398" referrerpolicy="no-referrer"></p>
<p>在电商系统中，订单是非常重要的模块，订单记录了关于本次交易的所有信息，包括商品信息、价格信息、支付信息、物流信息、收货信息等等，并且随着订单的变化其状态也在发生变化，我们需要将这些状态清晰的展示在前台，展示给用户。</p>
<p>关于仓库层的一些变化本文并未作详细讲解，后续我会单独写一篇文章探讨一下WMS系统相关的内容。</p>
<p>以上就是订单模块所有的内容了，下一期，我将分享在线支付模块相关的内容，尽请期待。</p>
<p> </p>
<p>作者：书丰，公众号：书丰产品记</p>
<p>本文由@书丰 原创发布于人人都是产品经理，未经许可，禁止转载。</p>
<p>题图来自 Unsplash，基于CC0协议</p>
<div class="support-author"><div class="support-title">给作者打赏，鼓励TA抓紧创作！</div><button class="button--pay" data-post-id="5133740" data-author="1029476" data-avatar="http://image.woshipm.com/wp-files/2021/06/u3eFxfDPgTsiB7tJu0sD.jpg"><svg width="13" height="16" class="svgIcon--use" viewBox="0 0 13 16"><path d="M9.113,4.571 C9.951,3.771 10.895,2.742 10.685,2.057 C10.475,1.485 10.056,0.799 9.427,0.571 C8.903,0.342 8.379,0.456 7.750,0.799 C7.540,0.342 7.016,0.114 6.596,-0.001 C5.863,-0.001 5.234,0.228 4.814,0.914 C4.080,0.571 3.451,0.685 2.927,1.028 C2.613,1.256 2.298,1.713 2.298,2.628 C2.298,3.542 3.137,4.228 3.766,4.685 C2.508,5.599 -0.218,7.885 -0.008,12.228 C-0.218,15.656 2.613,15.999 2.613,15.999 L10.371,15.999 C11.314,15.885 12.991,14.971 12.991,12.571 L12.991,12.228 C13.201,7.771 10.371,5.371 9.113,4.571 L9.113,4.571 ZM8.932,11.835 L6.940,11.835 L6.940,13.207 C6.940,13.435 6.731,13.549 6.521,13.549 C6.311,13.549 6.102,13.435 6.102,13.207 L6.102,11.835 L4.110,11.835 C3.900,11.835 3.795,11.606 3.795,11.378 C3.795,11.149 3.900,10.921 4.110,10.921 L6.102,10.921 L6.102,10.121 L4.949,10.121 C4.739,10.121 4.634,9.892 4.634,9.664 C4.634,9.435 4.739,9.206 4.949,9.206 L5.892,9.206 L4.739,7.950 C4.634,7.835 4.739,7.606 4.949,7.492 C5.158,7.378 5.368,7.264 5.473,7.378 L6.521,8.635 L7.674,7.264 C7.779,7.149 7.989,7.264 8.198,7.378 C8.408,7.492 8.408,7.721 8.408,7.835 L7.150,9.321 L8.094,9.321 C8.303,9.321 8.408,9.549 8.408,9.778 C8.408,10.007 8.303,10.235 8.094,10.235 L6.940,10.235 L6.940,11.035 L8.932,11.035 C9.142,11.035 9.247,11.264 9.247,11.493 C9.247,11.606 9.037,11.835 8.932,11.835 L8.932,11.835 Z"/></svg>
赞赏</button><div class="pay-num">2人打赏</div><div class="donation-list"><div class="donation-item"><img class="avatar" src="https://static.woshipm.com/TTW_USER_R_201706_20170602180716_3583.jpg?imageView2/1/w/80" height="32" width="32" referrerpolicy="no-referrer"></div><div class="donation-item"><img class="avatar" src="https://static.woshipm.com/TTW_USER_R_201706_20170602182746_4226.jpg?imageView2/1/w/80" height="32" width="32" referrerpolicy="no-referrer"></div></div></div>                      
</div>
            