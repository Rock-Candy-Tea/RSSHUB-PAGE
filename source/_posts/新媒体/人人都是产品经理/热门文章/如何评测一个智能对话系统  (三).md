
---
title: '如何评测一个智能对话系统  (三)'
categories: 
 - 新媒体
 - 人人都是产品经理
 - 热门文章
headimg: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2020/02/XKn13NJwfcSpNYY4lpi8.jpg'
author: 人人都是产品经理
comments: false
date: Mon, 24 Feb 2020 00:00:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2020/02/XKn13NJwfcSpNYY4lpi8.jpg'
---

<div>   
<blockquote><p>本文将把目光聚焦到分布式评测方法的具体实现细节上，为大家介绍评测系统标注数据的采样，标注问题的设计以及问题背后的技术原理。</p></blockquote>
<p><img data-action="zoom" class="size-full wp-image-3427344 aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2020/02/XKn13NJwfcSpNYY4lpi8.jpg" alt width="800" height="450" referrerpolicy="no-referrer"></p>
<h2 id="toc-1">一、评测标注任务的数据采集与问题设计</h2>
<p>在上一章中我们介绍了目前业界比较流行的智能对话评测方法，包括人工评测和自动评测。阐述了不同评测方法的优势与不足，并解释了人工评测在智能对话评测任务中的重要性和必要性。</p>
<p>之后，我们介绍了分布式的评测方法。即把一个问题分解成：语法质量；内容质量；内容关联度；逻辑关联度；情感强度；发散性六个不同的维度。并以这六个维度为思考角度，分别对一个对话系统的对话内容进行评判。</p>
<p>分布式的评测方法就是将问题拆分成多个维度，再分解为可操作的问题，分别进行回答。最后整理合并，计算出一个具有参考价值的结果。复杂的问题，答案往往是辩证的，而分布式统计的方法恰恰能够较好的处理信息庞大的复杂问题。</p>
<p>接下来，让我们将目光聚焦到分布式评测方法的具体实现细节上。笔者将在本章为大家介绍评测系统标注数据的采样，标注问题的设计以及问题背后的技术原理。</p>
<h3>1. 数据样本</h3>
<p>想要创建一个有效的评测标注任务，我们首先需要制作一组数据集，也就是用来评测对话系统的问题集（或者说是query集，因为输入内容不局限于疑问句）。</p>
<p>用于对话评测的query集往往是一套包含各种形式和类别的自然语句。目前各大NLP相关的竞赛和研究报告中，会有一些开源的数据集供研究者使用。不过，这些数据集多以英文为主。因而，我们需要有针对性的为评估任务整理一份中文样本数据集。</p>
<p>中国汉语可谓博大精深，客观的讲，一套简单的数据集不可能囊括所有汉语中的对话意图和语言使用场景。因此，理论上讲，样本的数据量一定是越多越好（用于训练语言模型的数据常在亿级以上）。</p>
<p>然而，为了便于评测标注任务的执行，我们希望标注的题目尽可能的少。（这样标注人员就可以在较短的时间完成标注）于是，以尽可能少的数据量囊括尽可能多的语言话题成了样本数据的重点和难点。</p>
<p>在这里，笔者将自己收集和整理样本数据的方法与大家分享，希望大家可以借鉴笔者的方法，整理属于自己的评测数据集。</p>
<p>由于数据保密的原因，笔者不便将数据内容在这里完全公开（感兴趣的朋友可搜索“NLPCC2019 – 开放领对话系统评测任务”，了解更多细节）。</p>
<p>当然，笔者所做的数据集并不一定是最好的，如果有更好的数据集也欢迎大家与笔者分享和交流。</p>
<h3>2. 数据采样及细节描述</h3>
<p><strong>数据源：</strong>来自真实的用户日志和互联网社交媒体上的公开数据</p>
<p><strong>获取方式：</strong>通过脚本筛选和人工标注的方式从亿级的原始数据中获取数据池</p>
<p><strong>话题分类：</strong></p>
<ul>
<li>通过百度开源信息获得百度中发帖数前200的贴吧</li>
<li>通过百度贴吧分类将200个贴吧分为22个类别</li>
<li>从22个类别中提取出16个话题和2个无话题类别</li>
</ul>
<p><strong>样本数据：</strong></p>
<ul>
<li>针对每个话题，从数据池中抽取100个问题，共计1600个问题</li>
<li>从数据池中收集16个话题之外的100个问题</li>
<li>样本数据集共计1700个问题</li>
</ul>
<p><strong>数据分配：</strong>1700个问题当中，有200题作为测试问题，其余1500题作为真实评测问题</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2020/02/NGPAsFFPF8P0A8ilT5lX.png" alt width="2550" height="1389" referrerpolicy="no-referrer"></p>
<h3>3. 标注选项</h3>
<p>有了评测的数据集，接下来我们还需要设计标注的具体任务。（annotation task）为了能够更加准确且高效的评测一个对话系统的表现，评测的标注任务需要秉持两个基本原则：客观和精简。</p>
<p>对话评测的底层方法论是从6个不同的维度分布式的评测一个对话系统，在评测的过程中，我们主要是在判断被评测的对话系统是否能够满足这6个维度的信息特征。为了能够更加直观的进行判断，我们将6个维度的评判分解成12个封闭式问题（True or False question）。封闭式的问题能够帮助评测者尽可能的避免主观思考的模式，相对快速的给出理性的评判。</p>
<p>以下是笔者针对对话评估任务设计的12个问题，以及相应的几个维度：</p>
<p><strong>语法质量：</strong></p>
<ul>
<li>回复是不是符合正确的语法</li>
<li>回复是不是有与上文内容相关或重叠的实体词</li>
<li>回复是不是明显的书面化表达</li>
</ul>
<p><strong>内容质量：</strong></p>
<ul>
<li>回复内容是不是不可以被接受（色情，暴力，辱骂，政治等）</li>
<li>回复内容是不是不含糊，不存在歧义</li>
<li>回复内容是不是信息量适当</li>
</ul>
<p><strong>内容关联度：</strong></p>
<ul>
<li>回复内容是不是看上去正确理解了上文意图</li>
</ul>
<p><strong>逻辑关联度：</strong></p>
<ul>
<li>回复内容是不是可以自然的与上文衔接</li>
</ul>
<p><strong>情感强度：</strong></p>
<ul>
<li>回复是不是有主观态度或明显的情绪表达</li>
<li>回复内容是不是会引人发笑</li>
</ul>
<p><strong>发散性：</strong></p>
<ul>
<li>回复是不是有发散，生成新的内容或实体</li>
<li>回复是不是能让用户知道接下来该说什么</li>
</ul>
<h3>4. 标注类型</h3>
<p>标注任务的类型包括基本标注和特殊标注。</p>
<p>一般情况下，在评测一个答案的时候，我们会有限判断其内容是否可以被接受。如果回复可以被接受，则继续从多个维度对这个回复进行评测。如果回复不可以被接受，则直接跳过其他问题，将这组问答对标为不合格。</p>
<p>我们将“回复是不是符合正确的语法“与“回复内容是不是不可以被接受”这两条评测问题整合到一起作为特殊标注类型，而所有其他的评测问题则都是基本标注类型。</p>
<h3>5. 技术理论依据</h3>
<p>虽然，上面提到的大多数评测标注问题都是在分布式对话评测方法的基础上而创建，我们依然需要有足够的技术理论作为参考和支持。</p>
<p>一方面，经典技术理论的支持可以使整个评测方法更具说服力，另一方面，我们可以通过技术理论中的数学模型，部分的实现一个对话系统的自动化评测。</p>
<p>在有效评判市场上智能对话类产品表现的同时，也具备了一定的科研价值。</p>
<p><strong>语法和内容质量：</strong>参考了常用的NLP评测方法理论，如PPL，BLEU和Distinct等。</p>
<p><strong>关联度和发散性：</strong>名词实体变化统计（NER）和LSTM深度学习算法针对多轮对话概率的计算。</p>
<p><strong>情感强度：</strong>基于情感分析（Sentiment Analysis）的一些算法和理论支持。</p>
<h2 id="toc-2">二、总结</h2>
<p>本章我们介绍了分布式对话系统评测方法的具体实现细节，包括数据的分类和采样，标注问题的设计和其背后的技术原理。我们详细阐述了获取标注数据，以及定位语言数据话题类型的方法。同时，我们还介绍了基于6个维度的信息特征而分解出来的12个封闭式问题。我们将数据与问题相互对应，就形成一份可操作，可统计的对话评测标注任务。</p>
<p>不同的对话系统有不同的侧重点，有的对话系统比较擅长单轮的问答对话，有的对话系统则在多轮对话的场景下有更好的表现。我将在接下来的两篇文章中，分别介绍如何使用分布式对话评测方法进行单轮对话系统的评测与多轮对话系统的评测。</p>
<p> </p>
<p>本文由 @单师傅 原创发布于人人都是产品经理，未经许可，禁止转载</p>
<p>题图来自 Unsplash ，基于 CC0 协议</p>
<div class="support-author"><div class="support-title">给作者打赏，鼓励TA抓紧创作！</div><button class="button--pay" data-post-id="3418546" data-author="334306" data-avatar="http://image.woshipm.com/wp-files/2019/08/eysxTVNOKUO1sZcF3IFy.png"><svg width="13" height="16" class="svgIcon--use" viewBox="0 0 13 16"><path d="M9.113,4.571 C9.951,3.771 10.895,2.742 10.685,2.057 C10.475,1.485 10.056,0.799 9.427,0.571 C8.903,0.342 8.379,0.456 7.750,0.799 C7.540,0.342 7.016,0.114 6.596,-0.001 C5.863,-0.001 5.234,0.228 4.814,0.914 C4.080,0.571 3.451,0.685 2.927,1.028 C2.613,1.256 2.298,1.713 2.298,2.628 C2.298,3.542 3.137,4.228 3.766,4.685 C2.508,5.599 -0.218,7.885 -0.008,12.228 C-0.218,15.656 2.613,15.999 2.613,15.999 L10.371,15.999 C11.314,15.885 12.991,14.971 12.991,12.571 L12.991,12.228 C13.201,7.771 10.371,5.371 9.113,4.571 L9.113,4.571 ZM8.932,11.835 L6.940,11.835 L6.940,13.207 C6.940,13.435 6.731,13.549 6.521,13.549 C6.311,13.549 6.102,13.435 6.102,13.207 L6.102,11.835 L4.110,11.835 C3.900,11.835 3.795,11.606 3.795,11.378 C3.795,11.149 3.900,10.921 4.110,10.921 L6.102,10.921 L6.102,10.121 L4.949,10.121 C4.739,10.121 4.634,9.892 4.634,9.664 C4.634,9.435 4.739,9.206 4.949,9.206 L5.892,9.206 L4.739,7.950 C4.634,7.835 4.739,7.606 4.949,7.492 C5.158,7.378 5.368,7.264 5.473,7.378 L6.521,8.635 L7.674,7.264 C7.779,7.149 7.989,7.264 8.198,7.378 C8.408,7.492 8.408,7.721 8.408,7.835 L7.150,9.321 L8.094,9.321 C8.303,9.321 8.408,9.549 8.408,9.778 C8.408,10.007 8.303,10.235 8.094,10.235 L6.940,10.235 L6.940,11.035 L8.932,11.035 C9.142,11.035 9.247,11.264 9.247,11.493 C9.247,11.606 9.037,11.835 8.932,11.835 L8.932,11.835 Z"/></svg>
赞赏</button></div>                      
</div>
            