
---
title: '讲案例谈体会，教你3步画好时序图'
categories: 
 - 新媒体
 - 人人都是产品经理
 - 最新文章
headimg: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/08/JwYMx10eojU2Q9BieBwQ.jpg'
author: 人人都是产品经理
comments: false
date: Tue, 31 Aug 2021 00:00:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/08/JwYMx10eojU2Q9BieBwQ.jpg'
---

<div>   
<blockquote><p>编辑导语：时序图可以有效地描述交互顺序，并帮助研发团队更清晰地理顺系统逻辑，做好流程分析，若利用得当，则可以一定程度上降低沟通成本，更快速地推进业务进行。本篇文章里，作者就时序图的构成与画法等方面做了总结，一起来看一下。</p></blockquote>
<p><img data-action="zoom" class="size-full wp-image-5117903 aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/08/JwYMx10eojU2Q9BieBwQ.jpg" alt width="900" height="420" referrerpolicy="no-referrer"></p>
<p>上次介绍了活动图，这次分享 UML 中，另一种流程分析利器——时序图。</p>
<p>以前每次要分析流程，我都会用活动图。直到有一次，我面对一个业务流程，画活动图，画来画去，总觉得哪里不对，但又表达不出来，感觉如鲠在喉。</p>
<p>后来，我想起时序图，用时序图把流程梳理了一遍，豁然开朗。</p>
<p>原来，<b>用不同的视图去描述同一个流程，能让我们看到自己未曾发现的问题。</b>就像看足球比赛，在多个不同位置的摄像镜头下，能看到球员更全面的表现。</p>
<p>此后，我用时序图甚至比活动图还多。</p>
<p>那么，它有啥特别之处，居然能替代活动图来分析流程？我们一起来看看。</p>
<h2 id="toc-1">一、解读时序图</h2>
<p><b>时序图，也叫序列图、顺序图，是 UML 中常用的动态视图，用于描述多个对象参与实现业务目标时，彼此之间按时间顺序进行交互的过程。</b></p>
<p>时序图，用来表达对象或角色之间交互的信息传递和时间顺序，特别方便。</p>
<p>每次梳理流程，跟开发沟通，我都会借助它来描述。</p>
<p>绘制时序图，将一个个对象和其交互动作列出来，可以直观反映出，每个对象对其他对象、或其自身做的交互动作，<b>让我们看到业务内部的运作、系统之间的互动，从而搞清楚业务规则、系统逻辑。</b></p>
<p>在《火球：UML 大战需求分析》一书中，作者总结特别好：“任何复杂的交互，都可以分解为<b>自己与自己</b>、<b>自己与别人</b>、<b>别人与别人</b>的多个简单交互”。</p>
<p>时序图正体现了这种逻辑，所以，它表达交互逻辑时，非常清晰简单。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/08/ED9oCM8cFwhyIvRyqJFC.png" alt width="619" height="599" referrerpolicy="no-referrer"></p>
<p style="text-align: center;">客户用 ATM 取款的时序图</p>
<p><b>作为产品经理，如果我们能掌握这一利器，用来分析业务、定义需求，与开发沟通，定能大大提高效率。</b></p>
<p>时序图常见的应用场景，是在支付领域。例如，微信支付的开发者文档，就用时序图来表达支付的实现逻辑。</p>
<p>这么好的工具，赶紧学一下吧。</p>
<h2 id="toc-2">二、时序图的构成</h2>
<p>时序图的常用元素很简单，分别有：对象（角色）、生命线、会话、消息（简单消息、返回消息）。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/08/CWOiUAOdxMhGqbQdfEsA.jpeg" alt width="615" height="346" referrerpolicy="no-referrer"></p>
<p style="text-align: center;">时序图的常用元素</p>
<h3>1. 对象</h3>
<p><b>对象，指与业务、产品或系统相关的人、事、物，可以是人、部门、系统等。</b></p>
<p>通常用<b>矩形</b>表示，画在时序图的顶部，对象名写在矩形内。</p>
<p>其中，参与交互过程的人，如用例图的参与者、参与完成业务目标的相关人员，通常称之为<b>角色</b>。</p>
<p>网上有的会把对象和角色分开来，我理解这些都是对象。只不过，在图形上，角色与用例图的参与者一样，用<b>火柴人</b>表示，比较好理解。</p>
<p>因为，UML 是在面向对象思想的指导下，来描述软件产品的分析与设计。面向对象，则将现实世界的人事物，看成一个个独立的个体，称之为<b>「 对象 」</b>。</p>
<p>它们又可以根据不同的需要，以不同的角度，被归纳在一起，这就是开发人员常说的<b>「 类 」</b>。</p>
<p>比如，西瓜、苹果、梨是不同的对象，它们可以归为一类——水果；苹果手机、华为手机、小米手机，可以归为手机。</p>
<p>对象的命名，一般格式为：<b>对象名：类名</b>，如「 李四：客户 」。</p>
<p>按照语法，冒号和类名是必需的，对象名是可选的。具体地说，「 李四：客户 」表示李四是客户的实例，即具体到某个客户的名字。</p>
<p><b>实践中，并不需要具体到实例，对象名可以不写。</b>我的做法是，直接写一类对象的名称，如某某系统、某某部门。</p>
<h3>2. 生命线</h3>
<p>每个对象下有一条垂直的虚线，这就是对象的生命线，从上往下，代表时间的先后顺序。</p>
<h3>3. 会话</h3>
<p>会话，也叫激活框，它代表在对象生命线上某个阶段执行的操作，以一个<b>偏窄的矩形</b>表示。</p>
<p>每一次会话，表示一次相对完整的交互过程。不过，怎样算一次会话，实践中有点难区分，需要多练习体会。</p>
<p>我常按照操作的完整度来画，有时甚至不画，有些专业的 UML 工具还能自动生成会话。</p>
<h3>4. 消息</h3>
<p><b>消息，表示对象之间发送的信息或做的事情。</b>消息，有的分为三种：同步消息、异步消息、返回消息。</p>
<p>从产品层面，并不需要规定技术的实现方式，是同步还是异步，这交给开发人员设计，会更为合理。</p>
<p>因此，我基本只用两种消息来表达：<b>简单消息、返回消息</b>。</p>
<p><b>1）简单消息</b></p>
<p>简单消息，用<b>箭头实线</b>，表示一个对象，向另一个对象发的信息，或做的事情。它不强调消息的类型，只表示交互，足以满足大部分情况。</p>
<p><b>2）返回消息</b></p>
<p>返回消息，用<b>箭头虚线</b>，表示一个对象，收到另一个对象的信息后，再向其返回的信息，或做的事情。</p>
<p>消息线上方的文字，则是注明传递的消息或执行的动作，一般用<b>动宾短语</b>。</p>
<p>这些对象间的交互消息，画在两个对象的生命线之间。对象自身做的事情，则画在自己的生命线上。</p>
<h3>5. 组合框</h3>
<p>现实业务、系统流程中，总会有特殊情况，不可能完全按时间顺序、一条线走完。</p>
<p>这时，就需要用到<b>组合框（frame）</b>来表示常见的特殊情况，如分支、循环、并行等。</p>
<p>遇到这些特殊情况时，就可以把相应的交互流程放入这个框中。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/08/mZauTH7y4BWZQIbRlx0T.png" alt width="621" height="707" referrerpolicy="no-referrer"></p>
<p style="text-align: center;">时序图三种常用的特殊结构</p>
<h2 id="toc-3">三、时序图的画法</h2>
<p>下面，还是以之前的 「 手机话费充值 APP 」 为例（案例详见《<a href="http://www.woshipm.com/pd/4775729.html">用例图这样画，3步让你做需求分析有理有据</a>》），来了解时序图如何用。</p>
<p>常用的画图工具，有 Visio、ProcessOn ，现在很多在线文档也支持 UML ，如腾讯文档、飞书云文档。</p>
<p>时序图的画法也很简单，一句话就能说完，可是要灵活掌握，还得多加练习。</p>
<p>首先，选定要展开分析的用例或目标；接着，分析都有哪些对象、角色参与了实现过程；然后，将它们在实现目标过程中，彼此之间的交互动作，按照时间轴的顺序列出来。</p>
<p>再简单点，就是<b>定目标、找对象、列消息</b>三步走。</p>
<h3>1. 定目标</h3>
<p><b>画时序图，与活动图一样，要指定某个用例，或目标展开。</b>这些动态视图，是用来描述在静态视图（如用例图）定义的结构下对象的行为。</p>
<p><b>本质上，它们都是在描述谁如何参与完成业务目标。</b></p>
<p>明确了用例或目标，才能保证绘制的流程，边界清晰，过程完整，不会越画越乱。</p>
<p>比如，我们用时序图来分析案例中「 充值话费 」用例的实现过程。这时，就别把「 支付金额 」用例的交互也画进去，把它们画在一起，会增加阅读难度，不利于沟通表达。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/08/6uBSI8phPWboLd0pL6xE.png" alt width="621" height="562" referrerpolicy="no-referrer"></p>
<p style="text-align: center;">案例中「 充值 APP」 的系统用例图</p>
<h3>2. 找对象</h3>
<p>之前的文章已经分析出，案例中，充值得有手机运营商支持；支付得对接微信支付、支付宝；协助用户处理未到账，还需要有运营人员介入。</p>
<p>整个充值 APP ，还应包括管理后台系统 ，才能完成相关的管理操作。</p>
<p>因此，先将它们列出来，每一竖列，表示一个对象或角色，每个对象有一条生命线。</p>
<p><b>为方便阅读，可将流程中最先发起消息的对象放在最左边；再将交互多的对象摆在附近，别隔太多对象，这样画出来的图会更清晰简洁。</b></p>
<h3>3. 列消息</h3>
<p>找到了对象，就可以列出对象间的交互消息。为了方便你回顾 「 充值话费 」用例的实现过程，咱们先上之前已经得出的活动图。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/08/RfYd5iTm6tLMX7voiW5Q.png" alt width="619" height="418" referrerpolicy="no-referrer"></p>
<p style="text-align: center;">充值 APP 「 充值话费 」用例活动图</p>
<p>工作中，我们把流程弄明白后，就可以边理边画，将对象间的交互，<b>从最先发起的消息，一个个从上往下依次列出。</b></p>
<p><b>有些消息有带参数的，可以在描述文字后注明。</b>如下图的第 7 步，充值 APP 生成并提交订单至管理后台，可以在括号里写上订单有哪些字段信息（如订单号、手机号码、购买时间等）。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/08/7zCmVKP2HjIgRkLOB3w2.png" alt width="621" height="752" referrerpolicy="no-referrer"></p>
<p style="text-align: center;">充值 APP 「 充值话费 」用例对象交互时序图</p>
<p>在 UML 中，时序图的消息是没有序号的。使用中，我发现为每个消息加上序号，比较方便描述与阅读，一直习惯这么用。</p>
<p>「 充值话费 」用例的流程中，刚好有一个<b>并行流程</b>，即上图的第 16 至 20 步。</p>
<p>管理后台在返回支付结果时，还需同步向手机运营商发起充值请求，这是常见的并行流程。</p>
<p>因此，将其画在组合框中，表示这里面上下两部分交互是同时进行的，不分先后。</p>
<p>从这里不难看出，分支一多，时序图会比较难画，也不好理解。</p>
<p>确实，时序图不太适合表达多分支的复杂流程。因此，<b>我们用时序图更多是描述主干流程，复杂的分支可单独抽取出来画，也可以用文字说明。</b></p>
<h3>4. 经验之谈</h3>
<p>看到上面的泳道活动图和时序图，你可能会想，它们俩还挺像的，工作中究竟用哪个呢？</p>
<p><b>它们都用于描述不同对象之间的动作。不过，泳道活动图，更侧重于表达谁做了什么事；而时序图，除了强调流程中交互的消息和顺序，还表达谁对谁做了什么事。</b></p>
<p><b>我的体会是，遇到强调消息传递、时间顺序的，用时序图；遇到流程比较复杂、分支比较多的，用活动图。</b></p>
<p>还可以<b>多尝试两种都画，通过不同视角来观察同一个流程，会让我们的理解更加全面、深刻。</b></p>
<p>实践中，时序图，常用于表达系统的接口请求与反馈消息，更偏向技术实现。</p>
<p>作为产品经理，我们可以从产品视角、操作层面，用它来表达业务流程、产品流程。</p>
<p>这样，开发人员也很好理解，便于他们进行系统设计。</p>
<h2 id="toc-4">四、总结</h2>
<p>信息量还是不少，我给你总结下。</p>
<p><b>时序图，用来描述多个对象参与实现业务目标时，彼此之间按时间顺序进行交互的过程。</b>常见的应用场景，是在支付领域。</p>
<p><b>用好时序图，能帮我们，搞清楚业务规则、系统逻辑，提高工作效率。</b></p>
<h3>1. 画时序图的方法</h3>
<ol>
<li><strong>定目标，指定用例或业务目标展开分析；</strong></li>
<li><strong>找对象，找出参与实现目标的对象/角色；</strong></li>
<li><strong>列消息，按时间顺序列出对象的交互消息。</strong></li>
</ol>
<h3>2. 画时序图的经验</h3>
<ul>
<li><strong>给交互消息加序号，方便阅读沟通；</strong></li>
<li><strong>触发交互的对象画在最左，交互频繁的走近些；</strong></li>
<li><strong>同一个流程，画不同视图，理解更全面、深刻。</strong></li>
</ul>
<p>时序图，是我分析流程的最爱，有段时间我经常用它，突然灵感闪现，发现了它的高阶玩法，与数据分析结合（感兴趣可看下方的系列文章）。</p>
<p>多加练习吧，相信它也会是你的好帮手！</p>
<p><strong>UML 需求分析系列文章：</strong></p>
<ul>
<li><a href="http://www.woshipm.com/pd/3450015.html">做产品，为什么要画这些图？</a></li>
<li><a href="http://www.woshipm.com/pd/4775729.html">用例图这样画，3步让你做需求分析有理有据</a></li>
<li><a href="http://www.woshipm.com/pd/4855016.html">手把手教你画活动图，再无难搞的流程分析</a></li>
<li><a href="http://www.woshipm.com/data-analysis/4420955.html">B端数据分析玩法，巧用时序图定埋点，订单时长看系统性能</a></li>
</ul>
<p> </p>
<p>作者：四月；公众号：四月喃哗</p>
<p>本文由 @四月 原创发布于人人都是产品经理。未经许可，禁止转载。</p>
<p>题图来自Unsplash，基于CC0协议。</p>
<div class="support-author"><div class="support-title">给作者打赏，鼓励TA抓紧创作！</div><button class="button--pay" data-post-id="5116059" data-author="1044723" data-avatar="http://image.woshipm.com/wp-files/2020/02/DoaNjP7lW5uvz4YwKW03.jpeg"><svg width="13" height="16" class="svgIcon--use" viewBox="0 0 13 16"><path d="M9.113,4.571 C9.951,3.771 10.895,2.742 10.685,2.057 C10.475,1.485 10.056,0.799 9.427,0.571 C8.903,0.342 8.379,0.456 7.750,0.799 C7.540,0.342 7.016,0.114 6.596,-0.001 C5.863,-0.001 5.234,0.228 4.814,0.914 C4.080,0.571 3.451,0.685 2.927,1.028 C2.613,1.256 2.298,1.713 2.298,2.628 C2.298,3.542 3.137,4.228 3.766,4.685 C2.508,5.599 -0.218,7.885 -0.008,12.228 C-0.218,15.656 2.613,15.999 2.613,15.999 L10.371,15.999 C11.314,15.885 12.991,14.971 12.991,12.571 L12.991,12.228 C13.201,7.771 10.371,5.371 9.113,4.571 L9.113,4.571 ZM8.932,11.835 L6.940,11.835 L6.940,13.207 C6.940,13.435 6.731,13.549 6.521,13.549 C6.311,13.549 6.102,13.435 6.102,13.207 L6.102,11.835 L4.110,11.835 C3.900,11.835 3.795,11.606 3.795,11.378 C3.795,11.149 3.900,10.921 4.110,10.921 L6.102,10.921 L6.102,10.121 L4.949,10.121 C4.739,10.121 4.634,9.892 4.634,9.664 C4.634,9.435 4.739,9.206 4.949,9.206 L5.892,9.206 L4.739,7.950 C4.634,7.835 4.739,7.606 4.949,7.492 C5.158,7.378 5.368,7.264 5.473,7.378 L6.521,8.635 L7.674,7.264 C7.779,7.149 7.989,7.264 8.198,7.378 C8.408,7.492 8.408,7.721 8.408,7.835 L7.150,9.321 L8.094,9.321 C8.303,9.321 8.408,9.549 8.408,9.778 C8.408,10.007 8.303,10.235 8.094,10.235 L6.940,10.235 L6.940,11.035 L8.932,11.035 C9.142,11.035 9.247,11.264 9.247,11.493 C9.247,11.606 9.037,11.835 8.932,11.835 L8.932,11.835 Z"/></svg>
赞赏</button></div>                      
</div>
            