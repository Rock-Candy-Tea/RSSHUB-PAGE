
---
title: '智能预警：如何自动化识别异常数据？了解下产品化设计'
categories: 
 - 新媒体
 - 人人都是产品经理
 - 最新文章
headimg: 'https://image.yunyingpai.com/wp/2022/04/cctfQ7LW8jV7Bxmejbz9.png'
author: 人人都是产品经理
comments: false
date: Tue, 12 Apr 2022 00:00:00 GMT
thumbnail: 'https://image.yunyingpai.com/wp/2022/04/cctfQ7LW8jV7Bxmejbz9.png'
---

<div>   
<div class="bpp-post-content">
<blockquote><p>编辑导语：<em>产品设计</em>最难的地方不在于“设计”，而在于“决策”。因为决策的依据来源于“场景——用户——需求”,但对业务的认知局限会导致其信息理解上的偏差。本篇文章带你了解异常判定下的产品设计。</p></blockquote>
<p><img data-action="zoom" class="size-full wp-image-785385 aligncenter" src="https://image.yunyingpai.com/wp/2022/04/cctfQ7LW8jV7Bxmejbz9.png" alt referrerpolicy="no-referrer"></p>
<p>“今天和朋友们聊聊数据分析、数据产品设计中经常面临的场景：异常判定，并看看如何进行预警相关的产品设计。”</p>
<p>关于BI系统，之前分享过阿里的Quick BI，微信公众平台的看板设计，以及数据图表相关设计。今天和大家聊聊常见的场景：异常数据的识别，以及预警相关功能的产品化设计。</p>
<h2 id="toc-1">一、场景概述</h2>
<p>我们在做数据分析的时候，有一个重要的环节，就是发现目前运行数据的异常，然后基于异常寻找原因、提出意见和建议。</p>
<p>如果是人工判断异常数据的话，往往通过恰当的可视化图形就能很好地发现，比如下面数据走势的异常：</p>
<p><img data-action="zoom" class="rich_pages wxw-img aligncenter" title="智能预警：如何自动化识别异常数据？了解下产品化设计" src="https://image.yunyingpai.com/wp/2022/04/h89T1ztoUfQyWqsJneS6.png" alt="智能预警：如何自动化识别异常数据？了解下产品化设计" width="987" height="213" referrerpolicy="no-referrer"></p>
<p>或者下面的数据关系的异常，通过回归曲线很容易发现右下角的异常点。</p>
<p><img data-action="zoom" class="rich_pages wxw-img aligncenter" title="智能预警：如何自动化识别异常数据？了解下产品化设计" src="https://image.yunyingpai.com/wp/2022/04/TeFFU64JrZ0N7izWRbpo.jpeg" alt="智能预警：如何自动化识别异常数据？了解下产品化设计" width="687" height="493" referrerpolicy="no-referrer"></p>
<p>但是对于机器而言，想要识别异常数据，就比较麻烦了。这就是咱们今天将重点展开讨论的内容：如何通过系统化的规则或者算法，识别异常数据。</p>
<p>由于数据的类型多种多样，我们针对不同数据类型分别展开。</p>
<h2 id="toc-2">二、时序异常数据识别</h2>
<p>时间序列相关的异常判定，应该是我们最常见的异常识别情景。尤其是在数据产品中，我们关注的大部分内容都是和时间序列有关系。</p>
<p><img data-action="zoom" class="rich_pages wxw-img aligncenter" title="智能预警：如何自动化识别异常数据？了解下产品化设计" src="https://image.yunyingpai.com/wp/2022/04/oeVRETtB0Ja3o9xQatdu.png" alt="智能预警：如何自动化识别异常数据？了解下产品化设计" width="656" height="346" referrerpolicy="no-referrer"></p>
<p>大家可以仔细回想一下你平时看到的数据监控看板等等，无论形态如何，基本都涉及了时间维度。但凡涉及时间维度，那么异常的识别都是基于时间来识别的，且识别的是最新一段时间是否异常（用最新数据鉴定历史数据异常并没有任何业务意义）。</p>
<p>了解了上面的内容，下面我们聊聊都有哪些时序异常数据的识别方法。</p>
<h3>1. 基于固定数值</h3>
<p>这个比较好理解，就是直接按照固定的数值进行异常判定。逻辑简单、容易实现与理解。</p>
<p><img data-action="zoom" class="rich_pages wxw-img aligncenter" title="智能预警：如何自动化识别异常数据？了解下产品化设计" src="https://image.yunyingpai.com/wp/2022/04/cFKh3LBbKkgAwtv4bknY.png" alt="智能预警：如何自动化识别异常数据？了解下产品化设计" width="808" height="337" referrerpolicy="no-referrer"></p>
<p>比如上图中，我们设定固定数值是[3800-5600]，在这个区间范围内的数据，我们认为是正常数据；低于或者高于该区间的数据，认为是异常数据。</p>
<p>固定数值判断异常的方法，核心在于如何取合理区间的上下限。如果有明确的业务红线，可以将业务红线设为上下限；如果没有业务限制，可以使用分位数进行取值，比如历史5%-95%分位认为是正常的。</p>
<p>对于一个发展比较稳定业务而言，设定固定的绝对数值是没啥问题的。但是对于一个快速发展期的业务，很明显，固定数值并不适用。</p>
<p><strong><img data-action="zoom" class="rich_pages wxw-img aligncenter" title="智能预警：如何自动化识别异常数据？了解下产品化设计" src="https://image.yunyingpai.com/wp/2022/04/G1sbzPO3pEtOz6CeC4Rc.png" alt="智能预警：如何自动化识别异常数据？了解下产品化设计" width="665" height="282" referrerpolicy="no-referrer"></strong></p>
<p>随着时间的变化，合理的区间也相应发生了变化。这种情况不适合用固定数值进行异常判定，而是需要相对值。</p>
<h3>2. 基于相对数值</h3>
<p>上面讲到了固定数值方法的缺点。因此，我们考虑相对数值的方法。提到相对值，主要就是同比和环比（关于同比和环比可参考历史文章）。</p>
<p><img data-action="zoom" class="rich_pages wxw-img aligncenter" title="智能预警：如何自动化识别异常数据？了解下产品化设计" src="https://image.yunyingpai.com/wp/2022/04/IPR7bkHK1hffDBUz2M1O.png" alt="智能预警：如何自动化识别异常数据？了解下产品化设计" width="660" height="302" referrerpolicy="no-referrer"></p>
<p>由于同比通常的定义指的是与去年同期比较，因此针对单天，我们往往是与上周进行对比。如此，上周的数值就是基准值，再增加一个波动区间范围即可。比如上周二的新增用户数200，波动范围设定[-10%，10%]，那么本周二如果新增用户数在180-220则认为是正常的；超出该范围则判定异常。</p>
<p>该方法也有明显的缺点。如果上周二就是一个异常值（假设数值异常低），而本周二数据是恢复正常了。那么根据相对值得判定逻辑，很容易把本周二判定为「异常高」。这是点对点对比的缺点。</p>
<h3>3. 基于统计分布</h3>
<p>如何能避免单个异常点对后续判断的影响呢？这里就可以基于统计分布进行规则建立。</p>
<p><img data-action="zoom" class="rich_pages wxw-img aligncenter" title="智能预警：如何自动化识别异常数据？了解下产品化设计" src="https://image.yunyingpai.com/wp/2022/04/c7oYDJBQBuvv3r5DvW2a.jpeg" alt="智能预警：如何自动化识别异常数据？了解下产品化设计" width="742" height="355" referrerpolicy="no-referrer"></p>
<p>这里我们可以采取 <em><strong>均值±标准差×3</strong></em>的方式。这里的均值可以采取当天之前一段时间的均值，比如90天、30天；标准差也选取相应时间段的标准差；倍数可以基于情况设置。</p>
<p>由于均值是一段时间内的均值，不是某一个具体点。因此通过这种方式，能消除异常数据对于后续的异常判定。</p>
<h3>4. 基于时序模型</h3>
<p>最后，还可以基于时间序列模型进行异常判定。</p>
<p>在统计模型中，有一类模型是专门针对时间序列进行建模的，用以预测未来一段时间的数据走势。我们可以建立相应的ARMA模型等，基于实际值和预测值的差异，判定是否异常。</p>
<p><img data-action="zoom" class="rich_pages wxw-img aligncenter" title="智能预警：如何自动化识别异常数据？了解下产品化设计" src="https://image.yunyingpai.com/wp/2022/04/LsmDPxHkRwhB5ZnlXkvj.jpeg" alt="智能预警：如何自动化识别异常数据？了解下产品化设计" width="598" height="454" referrerpolicy="no-referrer"></p>
<p>关于时间序列模型，我们这里就不展开了，后续会专门针对时间序列统计模型详细分享相关基础知识。</p>
<h2 id="toc-3">三、预警功能产品化设计</h2>
<p>最后，我们一起看看预警功能的产品设计，这里主要以神策为例，看看预警功能的设计思路。</p>
<h3>1. 预警设置</h3>
<p>神策将预警功能和事件分析进行了结合，在做事件分析相关功能时，可以直接添加「预警」，进行预警配置。</p>
<p><img data-action="zoom" class="rich_pages wxw-img aligncenter" title="智能预警：如何自动化识别异常数据？了解下产品化设计" src="https://image.yunyingpai.com/wp/2022/04/jUGr7L7WT0b91bUngEAv.jpeg" alt="智能预警：如何自动化识别异常数据？了解下产品化设计" width="864" height="236" referrerpolicy="no-referrer"></p>
<p>下面是点击「预警」后的配置界面：</p>
<p><img data-action="zoom" class="rich_pages wxw-img aligncenter" title="智能预警：如何自动化识别异常数据？了解下产品化设计" src="https://image.yunyingpai.com/wp/2022/04/mFRNeSW0snizWRAwEZ6F.png" alt="智能预警：如何自动化识别异常数据？了解下产品化设计" width="760" height="390" referrerpolicy="no-referrer"></p>
<p>配置基本信息中包括了规则名称、监控指标、维度等；预警设置中包括监控时间粒度、监控时间、预警方式、触发规则、通知方式等。</p>
<h3>2. 预警触发规则</h3>
<p>预警配置中，最核心的一步就是进行预警规则的设置了。神策支持了两种预警方式：智能预警和自定义预警。</p>
<p><img data-action="zoom" class="rich_pages wxw-img aligncenter" title="智能预警：如何自动化识别异常数据？了解下产品化设计" src="https://image.yunyingpai.com/wp/2022/04/2MX0PJSEJJOuk35gLvC2.png" alt="智能预警：如何自动化识别异常数据？了解下产品化设计" width="833" height="333" referrerpolicy="no-referrer"></p>
<p>这里的智能预警并未明示具体的逻辑，我猜主要就是基于统计分布和时序模型进行的所谓智能预警。而自定义预警主要包括了对比特定值（即固定值）以及历史某期（即相对值）进行预警规则设置。</p>
<p>当然，自定义预警的阈值是用户自行填写的，没有给出提示。</p>
<h3>3. 预警通知</h3>
<p>预警的通知配置，也是整个预警功能中必不可少的一部分。这里主要支持三种方式：系统通知、企业群通知、邮件通知。</p>
<p><img data-action="zoom" class="rich_pages wxw-img aligncenter" title="智能预警：如何自动化识别异常数据？了解下产品化设计" src="https://image.yunyingpai.com/wp/2022/04/iXS0bqvoXaFH6653sUxn.png" alt="智能预警：如何自动化识别异常数据？了解下产品化设计" width="467" height="283" referrerpolicy="no-referrer"></p>
<p>关于时序预警相关的方法，以及产品化的介绍，就分享这些。这里强调一点，虽然数据看板的时序数据占了大多数，但是仍然有非时序的数据呈现。关于非时序的异常数据该如何鉴定异常呢？这个我们后面找时间再详细分享。</p>
<p>另外，后面有机会聊聊，BI系统如何在异常判断的基础上，进行智能化分析。</p>
<h3>#专栏作家#</h3>
<p>NK冬至，公众号：首席数据科学家，人人都是产品经理专栏作家。在金融领域、电商领域有丰富数据及产品经验。擅长数据分析、数据产品等相关内容。</p>
<p>本文原创发布于人人都是产品经理。未经许可，禁止转载。</p>
<p>题图来自Unsplash，基于CC0协议。</p>
</div>
<div class="support-author"><div class="support-title">给作者打赏，鼓励TA抓紧创作！</div><button class="button--pay" data-post-id="5390321" data-author="188996" data-avatar="https://static.woshipm.com/APP_U_202107_20210717103519_3911.jpeg"><svg width="13" height="16" class="svgIcon--use" viewBox="0 0 13 16"><path d="M9.113,4.571 C9.951,3.771 10.895,2.742 10.685,2.057 C10.475,1.485 10.056,0.799 9.427,0.571 C8.903,0.342 8.379,0.456 7.750,0.799 C7.540,0.342 7.016,0.114 6.596,-0.001 C5.863,-0.001 5.234,0.228 4.814,0.914 C4.080,0.571 3.451,0.685 2.927,1.028 C2.613,1.256 2.298,1.713 2.298,2.628 C2.298,3.542 3.137,4.228 3.766,4.685 C2.508,5.599 -0.218,7.885 -0.008,12.228 C-0.218,15.656 2.613,15.999 2.613,15.999 L10.371,15.999 C11.314,15.885 12.991,14.971 12.991,12.571 L12.991,12.228 C13.201,7.771 10.371,5.371 9.113,4.571 L9.113,4.571 ZM8.932,11.835 L6.940,11.835 L6.940,13.207 C6.940,13.435 6.731,13.549 6.521,13.549 C6.311,13.549 6.102,13.435 6.102,13.207 L6.102,11.835 L4.110,11.835 C3.900,11.835 3.795,11.606 3.795,11.378 C3.795,11.149 3.900,10.921 4.110,10.921 L6.102,10.921 L6.102,10.121 L4.949,10.121 C4.739,10.121 4.634,9.892 4.634,9.664 C4.634,9.435 4.739,9.206 4.949,9.206 L5.892,9.206 L4.739,7.950 C4.634,7.835 4.739,7.606 4.949,7.492 C5.158,7.378 5.368,7.264 5.473,7.378 L6.521,8.635 L7.674,7.264 C7.779,7.149 7.989,7.264 8.198,7.378 C8.408,7.492 8.408,7.721 8.408,7.835 L7.150,9.321 L8.094,9.321 C8.303,9.321 8.408,9.549 8.408,9.778 C8.408,10.007 8.303,10.235 8.094,10.235 L6.940,10.235 L6.940,11.035 L8.932,11.035 C9.142,11.035 9.247,11.264 9.247,11.493 C9.247,11.606 9.037,11.835 8.932,11.835 L8.932,11.835 Z"/></svg>
赞赏</button></div>                      
</div>
            