
---
title: '干货：电商归因模型技术方案'
categories: 
 - 新媒体
 - 人人都是产品经理
 - 最新文章
headimg: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/P9uCDumqHiEiWbEPGMAn.jpg'
author: 人人都是产品经理
comments: false
date: Tue, 07 Sep 2021 00:00:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/P9uCDumqHiEiWbEPGMAn.jpg'
---

<div>   
<blockquote><p>编辑导语：当下线上流量红利见顶，企业进入了存量时代，因此若想保持增长，精细化运营则必不可少。而利用电商归因模型可以帮助提高流量转化率，优化活动运营。本篇文章里，作者就电商归因模型的应用目的、具体类型与实际操作方法做了总结，一起来看一下。</p></blockquote>
<p><img data-action="zoom" class="size-full wp-image-5127007 aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/P9uCDumqHiEiWbEPGMAn.jpg" alt width="900" height="420" referrerpolicy="no-referrer"></p>
<h2 id="toc-1">一、电商归因目的</h2>
<p>对于电商平台来说，当流量进入时，我们需要引导其完成购买任务，以实现流量价值最大化，在互联网红利消耗殆尽之时，流量会越来越贵，我们需要精细化运营每一份流量。</p>
<p>我们在做各种banner活动、Feed流推荐优化、活动页等进行效果评估，无法知道该位置最终产生了多少收益，也就很难针对该位置进行有效的改进。</p>
<p>如果进行单因数AB测试进行改版的效果评估，那也会存在如下2个问题：</p>
<ol>
<li>单因素变量控制并不容易做到完全可控，如果产品处在增长期，产品增长本身就是一个影响因子，很容易忽略此类因素的影响。</li>
<li>评估方式低效，如果 2 天内只控制 1 个坑位变动，那么评估 20 个坑位内容改变就需要 40 天时间，这样的效率任何企业都无法接受。</li>
</ol>
<p>因此，我们希望用数据分析中归因的方式解决坑位运营中评估的问题。</p>
<p>我们引入电商坑位归因的概念，把每一笔的成交都归给转化路径中不同的坑位。根据坑位的曝光转化价值来评判坑位的好与坏。把宝贵的流量尽可能都引导到转化率更高的坑位，以此达到精细化运营的效果。当然有了这个坑位价值评判的机制后各个坑位的改版也能准确的评估，真正做到了数据驱动增长。</p>
<h2 id="toc-2">二、归因类型简介</h2>
<ol>
<li>首次触点模型：多个「待归因事件」对同一个「目标转化事件」作出贡献时，认为第一个「待归因事件」功劳为 100%。</li>
<li>末次触点归因：多个「待归因事件」对同一个「目标转化事件」作出贡献时，认为最后一个「待归因事件」功劳为 100%。</li>
<li>线性归因：多个「待归因事件」对同一个「目标转化事件」作出贡献时，认为每个「待归因事件」平均分配此次功劳。</li>
<li>位置归因：多个「待归因事件」对同一个「目标转化事件」作出贡献时，认为第一个和最后一个「待归因事件」各占 40% 功劳，其余「待归因事件」平分剩余的 20% 功劳。</li>
<li>时间衰减归因：多个「待归因事件」对同一个「目标转化事件」作出贡献时，认为越靠近「目标转化事件」做出的贡献越大。</li>
</ol>
<p>对于电商平台来说，末次触点归因是比较适合电商站内销售归因的。</p>
<p>虽然用末次触点归因实现方案上比简单，但是直接将价值100%归因给购买或者转化之前最后一次接触的渠道，而完全不考虑整个过程中消费者到底接触过多少个触点。转化之前发生了太多的事情，该模型完全忽视了漏斗上层和中层部分的行为对转化的影响。</p>
<p>因此我们公司融合首次触点归因和末次触点归因，计算用户进入一级流量入口后再到完成的完整购物链接行为。</p>
<p>一级流量流入的定义为：各个入口之间无法进行跳转，只能通过切换tab进行跳转或者返回初始位置后重新点击进入。这样我们就可以基于购物的完整链接的最外层进行销售归因，并且也能知道用户购物的完整路径，同时保证销售归因后各个入口坑位的销售额之和等于当日的销售额。</p>
<p>使用这种融合归因方式，也可能知道中间步骤的转化率。比如活动会场页和商品详情页的相关推荐，虽然对电商平台整体进行销售归因时，不会计算活动会场页各个模型的销售，也不会计算商品详情页的相关推荐。</p>
<p>但是由于我们记录了用户进入一级流量入口后的详细路径，因此我们单独研究活动会场页和商品详情页的效率时，也是可以计算得到各个模块的销售来进行对比分析。但是切记不能和一级流量入口的销售混合在一起看，这样会导致销售归因发生重复。</p>
<p><img data-action="zoom" class=" wp-image-5126984 aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/c09NoZ344FymXsqoyxLU.jpeg" alt width="603" height="250" referrerpolicy="no-referrer"></p>
<p style="text-align: center;"><strong>用户购物路径模拟图</strong></p>
<h2 id="toc-3">三、电商归因实现方案</h2>
<p>对于电商归因我们进行了三个方面的归因，包括：曝光归因、点击归因、销售归因。</p>
<p>即归因出所有的商品曝光来自哪里，所有的商品点击来自哪里，所有的销售来自哪里。这样就可以追踪各个流量入口的曝光链路归因指标。比如各个流量入口的商品曝光点击率、商品点击支付率、商品曝光价值等等核心监控指标来评价各个流量入口的效率。</p>
<p>电商归因准确的前提是埋点日志的完整性，因为我们是通过需要归因的事件往前找到用户的购买路径，这样的好出是大大减少计算量，也基本解决的归因的问题。因此用户行为日志的完整记录才能真实还原用户的购买路径，否则就可能导致归因出错，最终造成错误的评价数据。</p>
<p>首先需要在埋点体系中引入PageId的概念，PageId的作用是每当用户产生一次跳转行为进入一个新页面时，为这个页面赋予一个新的PageId；而当用户点击返回时，不会产生新的PageId。</p>
<p>PageId是越靠近的当前时间的页面浏览的行为越大，且不会重复，类似于自增ID的实现逻辑。PageId的实现当然是写入埋点SDK当中，这样保证所有的埋点事件都带上PageId，并且也无需开发同步每次单独写逻辑。</p>
<p>然后根据埋点日志去还原用户的行为路径，全程都可以仅仅使用SQL逻辑就能计算完成。</p>
<p>首先要确定所有要归因的end事件（末端事件），包括商品曝光、商品点击、商品加购成功（加购后可以通过server的订单表判断用户是否完成了付款，也达到了销售的归因目的）。</p>
<p>然后在确定所有归因head事件（首端事件），即之前就定义的好的各个一级流量入口。我们平台比较特殊，是工具类App同时拥有电商业务，这样一级流量入口会比较多，但是可以枚举完成的，不仅仅包括常规电商App的流量入口，还可以在各个工具页面嵌入电商入口，这样复杂性要强于一般的电商App。</p>
<p>我们的埋点日志都会记录用户发生各个行为的本地时间，用end事件时间去找最接近的这个时间的head事件，直接用SQL的left jon关联日志表就能完成计算。这样在首尾2段时间内的所有埋点日志行为就是我们需要日志。</p>
<p>然后筛选出这些日志中的所有点击事件，过滤掉其他无效事件。再对所有剩下的日志进行排序，按照本地时间排序，这样就得到了一条完整的用户有效行为的路径记录。对于这部分数据我们就可以进行存储使用了，这部分数据为归因后用户完整链路记录数据。</p>
<p>再基于PageId过滤掉同个页面相同PageId的事件，保留本地时间最晚的那一条事件记录。这样就得到了用户进入一级流量入口后真正进行末端事件的有效路劲。这部分数据也需要存储记录，并且这个部分真正归因完成的用户行为路径，此时的得到各个一级流量入口就行归因得到此末端事件的来源。</p>
<p>通过这样计算后就了解各个一级流量入口的商品曝光点击情况，也能知道销售情况。利用这些数据就能衡量各个流量入口的效率情况，也同样也可以中间承载页面的效率如何。就能帮助产品运营更好的改善各个功能以及迭代各式各样的活动。</p>
<p><img data-action="zoom" class=" wp-image-5126978 aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/xlgCTprSoqZ6ld5JfjpM.jpeg" alt width="529" height="502" referrerpolicy="no-referrer"></p>
<p style="text-align: center;"><strong>用户进行一次加购的路径还原</strong></p>
<p>通过上述方法的计算，我们最终得到的用户加过链路步骤为：【1，2，9，10，11】，并且入口事件【1】就此次加购事件的归因来源。</p>
<p>另外再来举个商品详情页相关推荐的例子，下图所示的用户行为最终得到的链路步骤为：【1，2，9，10，11，12】，由于我们是完整保留用户的路径，因此我也只能这次加购事件不仅来源于1，也有一部分功能功能来于11，也就是商品详情页的推荐，因此我们也能计算出商品详情页的推荐效率如何，后续算法团队迭代模型时也能根据这个数据来衡量优化的好与坏。</p>
<p><img data-action="zoom" class=" wp-image-5126981 aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/09/v6UaX8kDDxTnyBCWxQ1r.jpeg" alt width="527" height="489" referrerpolicy="no-referrer"></p>
<p style="text-align: center;"><strong>商品详情页之间的横跳类型用户路径</strong></p>
<h2 id="toc-4">四、总结</h2>
<p>通过以上方案得到电商归因模型数据，可以大大提高运营同学的运营效率，不再是盲人过河似地凭感觉去优化各个坑位和活动，已经可以通过数据清晰公平地判断运营每一次迭代的结果。</p>
<p>但是仅仅根据坑位归因决定坑位价值，容易出现短期偏见，即追求短期利益，比如在一款内容产品中镶嵌一些游戏元素，可以让用户停留更久、数据表现更好。</p>
<p>但从长期来看，这种行为破坏了整个产品的价值定位，因为内容产品原本提供的是内容并不是游戏，产品也不并是为了追求用户停留时长而是为了实现价值。这是两者都存在的短期偏见。</p>
<p>因此不能仅仅根据坑位归因后的销售转化价值来评价坑位，还需要综合考虑产品价值定位、战略发展等因素，才能围绕长期目标进行健康发展。</p>
<p> </p>
<p>作者：杭州阿坤，母婴电商行业数据分析师兼数据产品经理；致力于研究电商行业的数据驱动增长，以及数据产品从0到1的搭建；“数据人创作者联盟”成员</p>
<p>本文由@一个数据人的自留地 原创发布于人人都是产品经理。未经许可，禁止转载</p>
<p>题图来自Unsplash，基于CC0协议</p>
<div class="support-author"><div class="support-title">给作者打赏，鼓励TA抓紧创作！</div><button class="button--pay" data-post-id="5125864" data-author="49446" data-avatar="http://image.woshipm.com/wp-files/2021/01/BAIehBwWocU4qhB1kvhw.jpeg"><svg width="13" height="16" class="svgIcon--use" viewBox="0 0 13 16"><path d="M9.113,4.571 C9.951,3.771 10.895,2.742 10.685,2.057 C10.475,1.485 10.056,0.799 9.427,0.571 C8.903,0.342 8.379,0.456 7.750,0.799 C7.540,0.342 7.016,0.114 6.596,-0.001 C5.863,-0.001 5.234,0.228 4.814,0.914 C4.080,0.571 3.451,0.685 2.927,1.028 C2.613,1.256 2.298,1.713 2.298,2.628 C2.298,3.542 3.137,4.228 3.766,4.685 C2.508,5.599 -0.218,7.885 -0.008,12.228 C-0.218,15.656 2.613,15.999 2.613,15.999 L10.371,15.999 C11.314,15.885 12.991,14.971 12.991,12.571 L12.991,12.228 C13.201,7.771 10.371,5.371 9.113,4.571 L9.113,4.571 ZM8.932,11.835 L6.940,11.835 L6.940,13.207 C6.940,13.435 6.731,13.549 6.521,13.549 C6.311,13.549 6.102,13.435 6.102,13.207 L6.102,11.835 L4.110,11.835 C3.900,11.835 3.795,11.606 3.795,11.378 C3.795,11.149 3.900,10.921 4.110,10.921 L6.102,10.921 L6.102,10.121 L4.949,10.121 C4.739,10.121 4.634,9.892 4.634,9.664 C4.634,9.435 4.739,9.206 4.949,9.206 L5.892,9.206 L4.739,7.950 C4.634,7.835 4.739,7.606 4.949,7.492 C5.158,7.378 5.368,7.264 5.473,7.378 L6.521,8.635 L7.674,7.264 C7.779,7.149 7.989,7.264 8.198,7.378 C8.408,7.492 8.408,7.721 8.408,7.835 L7.150,9.321 L8.094,9.321 C8.303,9.321 8.408,9.549 8.408,9.778 C8.408,10.007 8.303,10.235 8.094,10.235 L6.940,10.235 L6.940,11.035 L8.932,11.035 C9.142,11.035 9.247,11.264 9.247,11.493 C9.247,11.606 9.037,11.835 8.932,11.835 L8.932,11.835 Z"/></svg>
赞赏</button></div>                      
</div>
            