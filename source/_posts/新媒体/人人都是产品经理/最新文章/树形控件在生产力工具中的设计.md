
---
title: '树形控件在生产力工具中的设计'
categories: 
 - 新媒体
 - 人人都是产品经理
 - 最新文章
headimg: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/cttZFM9KPGGiXouCU8bg.jpg'
author: 人人都是产品经理
comments: false
date: Sat, 12 Jun 2021 00:00:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/cttZFM9KPGGiXouCU8bg.jpg'
---

<div>   
<blockquote><p>导语：树形控件是种常见的设计模式，几乎与图形化用户界面同时诞生，通过结构化的组织方式逐级展示内容，让整体信息架构一目了然，非常适合以网页或桌面端为载体的 B 端产品和生产力工具，比如电脑文件管理系统。</p></blockquote>
<p><img data-action="zoom" class="aligncenter size-full wp-image-4691517" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/cttZFM9KPGGiXouCU8bg.jpg" alt width="900" height="420" referrerpolicy="no-referrer"></p>
<h2 id="toc-1">一、使用场景</h2>
<p>树形控件通常有以下 4 种表现形式：</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/CV87ZZlleZZCt50crz6x.jpg" alt width="703" height="613" referrerpolicy="no-referrer"><br>
可以把它们进一步总结为 2 个使用场景：</p>
<ol>
<li>查看为主，编辑为辅</li>
<li>编辑为主，查看为辅</li>
</ol>
<p>其中，树列表、思维导图在 2 个场景中都有应用，而树导航和树选择多以查看为主。不同的使用场景，在设计上会有不同取舍。</p>
<h2 id="toc-2">二、交互设计</h2>
<p>结合树形控件的使用场景，对其的操作也如此分类。显然，「查看为主」时，对查看类操作的体验要求更高，而「编辑为主」时则相反。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/W6xqu1MlUlQ3WkxZLfWp.jpg" alt width="698" height="244" referrerpolicy="no-referrer"></p>
<h3>1. 新增节点</h3>
<p>以新增节点为例，不同场景下用户有不同的诉求：</p>
<ul>
<li>查看为主：快速建出一个节点，以进行后续操作</li>
<li>编辑为主：快速搭建出整棵树的结构</li>
</ul>
<p><strong>1）查看为主</strong></p>
<p>可以考虑鼠标悬停到节点出现相关操作。</p>
<p>但此时较难预测的是用户到底是想增加一个子节点还是同级节点。一个完备的解法就是让用户选择。但实际业务中，此处可能还要选择节点类型，比如语雀要选择文档还是表格。所以「节点类型 x 层级选项」有可能导致选项过多。此时可以有两种处理方式：</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/gonvZt25tyf8MIo9q6mC.jpg" alt width="702" height="322" referrerpolicy="no-referrer"></p>
<p>针对第一种方法，我们需要额外思考一个问题：新建的子节点应该放在第一位还是最后一位？</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/lOfpxMX8QuAvIRV9s9kR.png" alt width="698" height="214" referrerpolicy="no-referrer"><br>
我的第一反应是第一位，因为它离操作区域最近，从操作到反馈都很自然，也避免目录发生大幅度滚动，所以在语雀目录中是这样设计的。但是实际也有很多用户反馈希望是最后一个子节点，类似于1，2，3…… 的顺序从老到新排列。</p>
<p>我没有办法去验证如果真的是加为最后一个子节点，会不会又有另一波反馈声音。后来我发现思维导图新增子节点就是新增在末尾，以及绝大多数产品也是加在末尾，所以下次我大概会选择放在最后试试。或者索性选择上述第二种方法来避免这个问题。</p>
<p>此外，界面上还需要提供一种方式，允许用户创建最顶层的一级节点。当界面较大时，可以放置在顶部，让用户更易发现。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/pgNgHmDJFjfBTeS9lEJm.png" alt width="403" height="314" referrerpolicy="no-referrer"></p>
<p><strong style="font-size: 16px;">2）编辑为主</strong></p>
<p>相较于上述方法，可以给出更明确直接的界面操作和添加位置示意或快捷键。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/RYF30o3nN3ufCpNzUJs8.png" alt width="567" height="512" referrerpolicy="no-referrer"></p>
<p>语雀在进行目录改版时，本想统一「阅读页面」和「编排目录页面」的交互方式——采用「查看为主」的添加方式，却忽略了两个页面的用户诉求不一样。此时这里其实还可以借鉴思维导图的创建方式，使用Enter/Tab 键快速添加节点。</p>
<h3>2. 修改节点属性</h3>
<p>结合实际业务，节点可能有不同属性，比如名称、类型、状态、优先级等。「查看为主」时，修改操作使用不多，可以考虑放入「…」中。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/LZLMB4j392p1Ue8RiDm3.png" alt width="268" height="215" referrerpolicy="no-referrer"></p>
<p>而「编辑为主」时，除了单个节点修改属性方便，还需要考虑连续修改多个属性，甚至是批量修改。如下图，树列表可以支持连续修改属性节点。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/Vd2xUOpjS1bOsPflpeLG.png" alt width="472" height="224" referrerpolicy="no-referrer"></p>
<p>如下图，思维导图可以通过多选然后在格式面板统一修改属性。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/pBD8WjqRVq546NCseOji.png" alt width="900" height="577" referrerpolicy="no-referrer"></p>
<h3>3. 调整结构</h3>
<p>树形控件最有价值的部分就是其所表达的层级关系，常用调整结构的操作总结如下：</p>
<ul>
<li>拖拽调整：适用于小范围调整结构顺序</li>
<li>非拖拽调整：适用于需要跨屏调整结构顺序</li>
</ul>
<p>无论采用那种方式，都遵循以下设计原则：</p>
<blockquote><p>所见即所得</p>
<p>高效精准</p></blockquote>
<p><strong>1）拖拽调整</strong></p>
<p>简单而言，设计上要解决以下问题：</p>
<p>A. 如何让用户知道可以拖拽？</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/F77ZP4zGDtrILT6lpdYd.jpg" alt width="700" height="273" referrerpolicy="no-referrer"></p>
<p>B. 如何让用户知道可以怎么拖拽到哪里？</p>
<p>可以在拖拽中采用「插入位置符号」暗示用户，通常是一条彩色线条。应尽可能增加「插入位置符号」出现的机率，减少用户的困惑。设计时可以考虑上下左右两个方向的拖拽运动分别可以触发什么结果。</p>
<p><img data-action="zoom" class="content_image aligncenter" title="树形控件在生产力工具中的设计" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/24poyhvNqUIbgVQUBwZu.png" alt="树形控件在生产力工具中的设计" width="199" height="158" referrerpolicy="no-referrer"></p>
<p>比如按以下方式简单把拖拽规则分为 3 大类：</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/TLQzZr2jvIGO0bd8bRCy.png" alt width="697" height="209" referrerpolicy="no-referrer"></p>
<p>当然在「插入位置符号」尽可能多出现的同时，也要让其出现的位置符合用户预期且易理解。比如向左移动「非末尾子节点」，如果强行给以一个符合逻辑的响应，「插入位置符号」可能离当前光标很远，甚至在屏幕外，且放手后可能引起目录结构较大变化，那么不如选择此时拖拽无响应。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/Lot6f2RxAnvPaqKBrmMF.png" alt width="603" height="303" referrerpolicy="no-referrer"></p>
<p>这里再介绍「把一个节点调整为另一个的子节点」的两种拖拽规则，分别适用于不同场景。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/oAG5DBNIXAyrybKVn47j.jpg" alt width="701" height="291" referrerpolicy="no-referrer"></p>
<p>C. 如何让用户快速拖拽到目标位置？</p>
<p>当用户掌握了拖拽规则后，就需要帮助用户快速实现自己的调整目标。拖拽过程中注意以下几点：</p>
<ul>
<li>被拖拽节点可以半透明显示，以尽量少遮挡树形控件，方便用户定位目标位置。</li>
<li>被拖拽节点的原始位置可以以较弱的视觉效果展示，提示用户节点从哪里被拖拽。</li>
<li>整棵树的结构不要发生变化，以免原先确定的目标位置发生位移。</li>
<li>结构层级较深时，通过辅助示意帮助用户确定会将节点拖拽到哪一层级。</li>
</ul>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/39jaRFPjURSbHI5IbwGc.png" alt width="797" height="246" referrerpolicy="no-referrer"></p>
<p>D. 如何让用户确定拖拽结果满足自己的期望？</p>
<p>当以上问题都解决后，这个也许就不成问题。当然也可以增加二次确认的微交互。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/7hTbVM6varMz2sE3HrKK.jpg" alt width="698" height="265" referrerpolicy="no-referrer"></p>
<p><strong>2）非拖拽调整</strong></p>
<p>调整结构也可以通过非拖拽的方式完成。拖拽是一种直观，但不轻松的操作，尤其是当树很庞大需跨屏拖拽时。此时可以增加按钮操作，直接指定目标位置，精确且快速。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/xTZz10fE1mFYhX9LrBSn.png" alt width="697" height="285" referrerpolicy="no-referrer"></p>
<p>当「编辑为主」时，调整结构也需要考虑批量操作。如下图，支持多选节点同时调整，被调整结构的节点有可能在原处于不同分支的不同等级，批量调整后会成为同一个字节的同级节点。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/vvRDqAzldApP1nC3Qtcj.png" alt width="697" height="165" referrerpolicy="no-referrer"></p>
<h3>4. 删除节点</h3>
<p>不让用户疑惑：我的内容去哪儿了？</p>
<p>删除是个比较慎重的操作，所以此处应该询问用户是只删除本节点，还是本节点及其下所有节点。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/g7MSNdjf4y06YCJJZ5MY.png" alt width="400" height="159" referrerpolicy="no-referrer"></p>
<p>如果只删除本节点，首先本节点需要从树形控件中消失，以代表删除成功，然后其子节点可以上移一级，保证用户不会误以为内容丢失。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/3f2okBsjaqL5eylLaqfZ.png" alt width="650" height="212" referrerpolicy="no-referrer"></p>
<h3>5. 缩放视图</h3>
<p>查看时，思维导图可视化效果更好。针对思维导图，需要考虑视图的放大缩小，适应视口/真实大小切换。比如下图语雀思维导图的「缩放视图」功能（不过这个设计把回到中心和适应画布藏的有点深）。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/Xct98peasmrHLSTqQsao.png" alt width="697" height="311" referrerpolicy="no-referrer"></p>
<h3>6. 折叠层级</h3>
<p>当树形控件庞大时，需要能够快速折叠/展开层级，包括全部层级或者某一层级。如果是一棵「私人树」，记住用户折叠的展示层级，并且在下次进来时仍旧保持。如果是一棵「公开树」，可以增加默认展开设置，比如下图语雀中编排目录的操作。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/gBsjjjpvJTGcJDSq4pgc.png" alt width="699" height="190" referrerpolicy="no-referrer"></p>
<p>值得注意的是，折叠层级和缩放视图的操作都应该提供快捷键，会比通过界面操作更加高效，也不会打断查看过程。可以想象一下你正在一个会议中展示一张思维导图，在界面上操作「缩放视图」耗费更多时间，也会在夺走走观众的注意力。</p>
<p>附上常见查看操作快捷键，仅供参考：</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/qu6hJrdgxqKojXgC3UGr.jpg" alt width="408" height="309" referrerpolicy="no-referrer"></p>
<p>上述部分快捷键会和浏览器自带快捷键冲突，使用时需要覆盖浏览器快捷键。</p>
<h3>7. 搜索和筛选</h3>
<p>当节点数量很多时，树形控件应该支持搜索查找节点，搜索关键词可以高亮显示；或按条件筛选展示节点及其上级节点路径。</p>
<p>使用列表时，还有一个常见的操作是「排序」，但是整棵树「排序」和树形控件本身的层级顺序是相矛盾的。所以「树列表」基本没有「排序」功能。</p>
<p>参考资料：</p>
<ul>
<li>https://blog.ngkaho.info/ux-design/filetree/</li>
<li>https://zhuanlan.zhihu.com/p/59354929</li>
<li>https://zhuanlan.zhihu.com/p/27055366</li>
<li>https://developer.apple.com/design/human-interface-guidelines/macos/windows-and-views/outline-views/</li>
</ul>
<p> </p>
<p>作者：付凯文，蚂蚁集团产品经理。</p>
<p>本文由 @Ant Design 原创发布于人人都是产品经理，未经许可，禁止转载。</p>
<p>题图来自Unsplash，基于 CC0 协议</p>
<div class="support-author"><div class="support-title">给作者打赏，鼓励TA抓紧创作！</div><button class="button--pay" data-post-id="4691073" data-author="1275742" data-avatar="http://image.woshipm.com/wp-files/2021/05/qQzaYS0DiYKZrsomCZyR.jpg"><svg width="13" height="16" class="svgIcon--use" viewBox="0 0 13 16"><path d="M9.113,4.571 C9.951,3.771 10.895,2.742 10.685,2.057 C10.475,1.485 10.056,0.799 9.427,0.571 C8.903,0.342 8.379,0.456 7.750,0.799 C7.540,0.342 7.016,0.114 6.596,-0.001 C5.863,-0.001 5.234,0.228 4.814,0.914 C4.080,0.571 3.451,0.685 2.927,1.028 C2.613,1.256 2.298,1.713 2.298,2.628 C2.298,3.542 3.137,4.228 3.766,4.685 C2.508,5.599 -0.218,7.885 -0.008,12.228 C-0.218,15.656 2.613,15.999 2.613,15.999 L10.371,15.999 C11.314,15.885 12.991,14.971 12.991,12.571 L12.991,12.228 C13.201,7.771 10.371,5.371 9.113,4.571 L9.113,4.571 ZM8.932,11.835 L6.940,11.835 L6.940,13.207 C6.940,13.435 6.731,13.549 6.521,13.549 C6.311,13.549 6.102,13.435 6.102,13.207 L6.102,11.835 L4.110,11.835 C3.900,11.835 3.795,11.606 3.795,11.378 C3.795,11.149 3.900,10.921 4.110,10.921 L6.102,10.921 L6.102,10.121 L4.949,10.121 C4.739,10.121 4.634,9.892 4.634,9.664 C4.634,9.435 4.739,9.206 4.949,9.206 L5.892,9.206 L4.739,7.950 C4.634,7.835 4.739,7.606 4.949,7.492 C5.158,7.378 5.368,7.264 5.473,7.378 L6.521,8.635 L7.674,7.264 C7.779,7.149 7.989,7.264 8.198,7.378 C8.408,7.492 8.408,7.721 8.408,7.835 L7.150,9.321 L8.094,9.321 C8.303,9.321 8.408,9.549 8.408,9.778 C8.408,10.007 8.303,10.235 8.094,10.235 L6.940,10.235 L6.940,11.035 L8.932,11.035 C9.142,11.035 9.247,11.264 9.247,11.493 C9.247,11.606 9.037,11.835 8.932,11.835 L8.932,11.835 Z"/></svg>
赞赏</button></div>                      
</div>
            