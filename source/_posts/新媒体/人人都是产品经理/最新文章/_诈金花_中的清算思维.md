
---
title: '_诈金花_中的清算思维'
categories: 
 - 新媒体
 - 人人都是产品经理
 - 最新文章
headimg: 'https://image.yunyingpai.com/wp/2022/01/o5yHfjAXUEQQOLtD4elT.jpg'
author: 人人都是产品经理
comments: false
date: Mon, 10 Jan 2022 00:00:00 GMT
thumbnail: 'https://image.yunyingpai.com/wp/2022/01/o5yHfjAXUEQQOLtD4elT.jpg'
---

<div>   
<blockquote><p>编辑导语：所谓清算，是支付指令的交换和计算，其中的核心便是清分过程；承载清分过程及记账过程的就是清算系统，协助了利益分配的完成。本篇文章中作者从游戏出发，解密一下游戏中隐藏的“支付清算思维”。感兴趣的朋友们快来看看吧。</p></blockquote>
<p><img data-action="zoom" class="size-full wp-image-736634 aligncenter" src="https://image.yunyingpai.com/wp/2022/01/o5yHfjAXUEQQOLtD4elT.jpg" alt referrerpolicy="no-referrer"></p>
<p>很多人在团建或者日常休闲娱乐时都会选择玩一些纸牌游戏，比如我们今天的主人公“诈金花”，它就是一款这样的多人纸牌游戏。</p>
<p>游戏过程中需要考验玩家的胆略和智慧，每人三张牌，张张有玄机。三张牌会组成一下情况，相较之下定输赢。</p>
<p>从上到下每类越来越小，同类之下再比较。</p>
<ul>
<li>豹子（AAA最大，222最小）</li>
<li>同花顺（AKQ最大，A23最小）</li>
<li>同花（AKQ最大，352最小）</li>
<li>顺子（AKQ最大，A23最小）</li>
<li>对子（AAK最大，223最小）</li>
<li>单张（AKJ最大，352最小）</li>
</ul>
<p>当然这是一个博弈的过程，因为全程大家不知道对方是什么牌，就跟斗地主一样，开始先在桌面投递基础筹码，然后过程中需要不断的循环下注，以致桌面的筹码越来越多，最终胜者的收益也会越来越诱人。</p>
<p>但是游戏过程中会有人因为担心更大风险选择“不跟”而退出，这个过程可能牌小诈走牌大，是实力、勇气和智谋的较量，是冒险家的游戏。最后胜者通吃，拿走桌面所有的筹码……</p>
<p>不过今天我们不玩游戏，而是玩点不一样的<strong>支付</strong>，解密一下这个游戏中隐藏的“<strong>支付清算思维</strong>”。</p>
<h2 id="toc-1">一、陈老师的“金花局中局”</h2>
<p>元旦期间陈老师约了4位朋友一起炸金花，组成了一个“5人金花局”。</p>
<p>在我拿出纸牌即将开始的一瞬间，突然眼前一道白光，大脑一阵眩晕，待我清醒后，我竟然到了一个大大的房间里，站在一个白板前，下面做了很多大佬，乔布斯、张小龙、俞军、梁宁等，他们都直勾勾的盯着我……</p>
<p>只见后面显示屏上有一行大字<strong>“陈天宇宙“支付奥妙”全球演讲巡演-深圳站”</strong>。</p>
<p>我是见过大世面的，调整懵逼神态以后，在白板上写下了一行字“<strong>为诈金花设计一套清算体系</strong>”，然后就开始了我的演讲。</p>
<h3>1. 清算账户设定</h3>
<p>一共有5个人参与游戏，为每个人设定一个游戏清算账户，并且设定一个中间待清算账户。</p>
<p><img data-action="zoom" class="rich_pages wxw-img aligncenter" title="“诈金花”中的清算思维" src="http://image.woshipm.com/wp-files/2022/01/vmGjhJJjsKy4bdUMcgp5.png" alt="“诈金花”中的清算思维" width="601" height="408" referrerpolicy="no-referrer"></p>
<h3>2. 清算货币设定</h3>
<p>玩游戏我们可以选择一些物件作为代理货币，比如花生或者纸牌等，然后约定这些物品短期的货币信用，仅在游戏中有效；并且约定游戏代理货币和真实货币之间的汇率，比如1：10。</p>
<p><img data-action="zoom" class="rich_pages wxw-img aligncenter" title="“诈金花”中的清算思维" src="http://image.woshipm.com/wp-files/2022/01/MkY1mp14a1ORbjX2TVjk.png" alt="“诈金花”中的清算思维" width="599" height="168" referrerpolicy="no-referrer"></p>
<h3>3. 发行和分配游戏货币</h3>
<p>游戏期初陈老师作为央行角色决定发行100个花生作为游戏的全量货币，并且每人发放20个花生作为游戏基础筹码。</p>
<p><img data-action="zoom" class="rich_pages wxw-img aligncenter" title="“诈金花”中的清算思维" src="http://image.woshipm.com/wp-files/2022/01/Bo3g4FQwoTwf8ZMW9jXX.png" alt="“诈金花”中的清算思维" width="601" height="412" referrerpolicy="no-referrer"></p>
<p>这样我们就为游戏设定了一个桌面的清算系统，该清算系统采用实时<strong>多边净额清算模式</strong>。</p>
<p>我们下注，追加砝码往桌子上扔花生的过程就是以花生为支付货币，支付筹码并且请求实时清算的过程，经过桌面清算以后我们可以实时看到桌面筹码总数量的变化，这个总数量就是本局当前的<strong>待清算总额。</strong></p>
<p>游戏每个场景的清算过程如下：</p>
<p><strong>（1）开局下注清算</strong></p>
<p>好了这是一个新的开局，每人获得了三张牌，牌的点数如图，并且往桌子上投递1个花生做为期初筹码。</p>
<p>此时经过桌面清算系统的实时清算我们可以看到当前待清算筹码总量为5个花生，也就是50元人民币，大家都垂涎欲滴摩拳擦掌，如饿狼一般盯着这笔象征着“一次呷哺呷哺单人套餐还可以加一个鸡腿”的巨大的财富。</p>
<p><img data-action="zoom" class="rich_pages wxw-img aligncenter" title="“诈金花”中的清算思维" src="http://image.woshipm.com/wp-files/2022/01/PicAaVjwpDEpoD2LsKNi.png" alt="“诈金花”中的清算思维" width="599" height="409" referrerpolicy="no-referrer"></p>
<p>这时桌面每个清算账户放一起我们可以理解为是诈金花游戏的<strong>资金池，</strong>该资金池总货币体量是100个头寸。</p>
<p>而每次花生在不同清算账户之间的流转我们可以理解为是<strong>资金的流动性，</strong>流动性实现了不同清算账户之间资金的划拨但并不改变整个资金池的货币体量。</p>
<p>而每次资金的流动也就是支付，我们可以认为是一次<strong>支付清算。</strong></p>
<p>而每个人的用来投递花生以及数手里或者桌面花生的手可以认为是<strong>支付系统</strong>。</p>
<p><strong>（2）追加砝码清算</strong></p>
<p>在这个过程中，大家可以选择追加砝码看不看别人的牌，下一位就需要追加不下于前者的砝码，并且选择看还是不看；如果看牌的话牌小者就会出局，那么本局已经投递的砝码就打水漂了。</p>
<p>这个游戏的过程大家可以认为就是我们的经济活动中的交易场景，经过一阵厮杀较量以后筹码分布成了如下局面，但没到最终输赢难分，战事非常胶着。</p>
<p><img data-action="zoom" class="rich_pages wxw-img aligncenter" title="“诈金花”中的清算思维" src="http://image.woshipm.com/wp-files/2022/01/DIWKoJIMbYHjf6NA0NsL.png" alt="“诈金花”中的清算思维" width="600" height="409" referrerpolicy="no-referrer"></p>
<p>以上过程我们可以称为<strong>单局“局中”实时清算过程</strong>。</p>
<p><strong>（3）个体间的拆借清算</strong></p>
<p>这时候经过一阵厮杀，王八手里没有花生了，也就是没有筹码了，但是此时他战至正酣，不忍退出，就向在座的手里有花生的发起了拆借诉求；最终以60元人民币购买了陈老师6个花生，完成了资产拆借。</p>
<p><img data-action="zoom" class="rich_pages wxw-img aligncenter" title="“诈金花”中的清算思维" src="http://image.woshipm.com/wp-files/2022/01/hefaKX9CHId3q8Kp3Ulv.png" alt="“诈金花”中的清算思维" width="600" height="409" referrerpolicy="no-referrer"></p>
<p><strong>（4）单局“局末”多边净清算</strong></p>
<p>到了陈老师喊牌了，陈老师不忍心让大家都倾家荡产，追加了5砝码后选择开牌。</p>
<p><img data-action="zoom" class="rich_pages wxw-img aligncenter" title="“诈金花”中的清算思维" src="http://image.woshipm.com/wp-files/2022/01/qKGWB9EXaSL1x4b9iWvr.png" alt="“诈金花”中的清算思维" width="600" height="412" referrerpolicy="no-referrer"></p>
<p>这时本局以陈老师豹子牌点最大而获胜，获得了桌面全部筹码，不好意思桌面的所有牌都归我了。</p>
<p><img data-action="zoom" class="rich_pages wxw-img aligncenter" title="“诈金花”中的清算思维" src="http://image.woshipm.com/wp-files/2022/01/8UfzY5syhh32pNsRNKxB.png" alt="“诈金花”中的清算思维" width="601" height="413" referrerpolicy="no-referrer"></p>
<p><strong>（5）全局多边净额清算</strong></p>
<p>天色已晚，大家都困了，这时候协商不玩了，改日再战，这时候开始进行多边清算了。</p>
<p>以每个人手里的花生基数为清算依据，每个人需要支付人民币购买他人的花生以获得20枚期初的花生数量，或者卖出手里的花生获得人民币以实现期初的20枚花生，清算后大家手里的花生又回到了期初的20，只不过这次清算是需要进行人民币进行清偿推动的。</p>
<p><img data-action="zoom" class="rich_pages wxw-img aligncenter" title="“诈金花”中的清算思维" src="http://image.woshipm.com/wp-files/2022/01/2o7nLmpggKq8Lk8BVugJ.png" alt="“诈金花”中的清算思维" width="601" height="410" referrerpolicy="no-referrer"></p>
<p>以上的清算过程存在一些小的错误，感兴趣的可以找出，并在留言处回复讨论，这个过程就是<strong>对账的过程</strong>，那么就需要对账系统来实现了。</p>
<h2 id="toc-2">二、游戏总结</h2>
<h3>1. 清算系统模型</h3>
<p>如果要设计一套支付清算系统，那么从上面我们可以看出至少需要有如下的<strong>子系统和元素组成、清算账户、支付系统、交易系统，货币体系、交易场景</strong>等。</p>
<p><img data-action="zoom" class="rich_pages wxw-img aligncenter" title="“诈金花”中的清算思维" src="http://image.woshipm.com/wp-files/2022/01/UYlPOOSlAvHiNLNNOGC1.png" alt="“诈金花”中的清算思维" width="600" height="399" referrerpolicy="no-referrer"></p>
<ul>
<li><strong>清算基础</strong>：我们可以从上面看出清算的基础就是清算账户账户，对整个过程提供账户资金头寸管理以及实现资金的支付清算</li>
<li><strong>清算模式</strong>：上面我们用到了实时多边净额清算模式，除此之外还有实时全额清算模式，实时双边清算模式</li>
</ul>
<h2 id="toc-3">三、如梦清醒会心一笑</h2>
<p>此时天塌地陷紫金锤，游龙出海惊天变，一阵天动地摇之后；有一道白光……这时候陈老师一个琅跄差点打翻了牌桌上的茶杯……</p>
<p>说时迟那时快之间张三上来扶住了我说到“陈老师怎么了，是不是又起早写文章有点低血糖啊”。</p>
<p>此时我稍作镇定，会心一笑“哈哈 哈哈 没事 今日必定大胜 开牌……”。</p>
<p>新年的钟声敲响了，屋外已经飘起片片雪花，投眼望去依然灯火通明，每一个窗户透出的灯光里白雾下可能都是我们对2022年幸福的期许……</p>
<h2 id="toc-4">四、思考</h2>
<p>还有什么游戏中也有支付思维呢？</p>
<p>什么样的支付模型呢？</p>
<p>比如斗地主，升级，魔兽世界等等，欢迎在评论区留言解密。</p>
<h3>#专栏作家#</h3>
<p>陈天宇宙，微信公众号：陈天宇宙，人人都是产品经理专栏作家。多平台支付领域专栏作者，十年资深产品；天使投资人；专注为10万支付产品经理和支付机构以及企业提供深度支付内容和服务！</p>
<p>本文原创发布于人人都是产品经理。未经许可，禁止转载。</p>
<p>题图来自Unsplash，基于CC0协议。</p>
<div class="support-author"><div class="support-title">给作者打赏，鼓励TA抓紧创作！</div><button class="button--pay" data-post-id="5281554" data-author="94217" data-avatar="https://static.woshipm.com/APP_U_202107_20210704124456_8487.jpeg"><svg width="13" height="16" class="svgIcon--use" viewBox="0 0 13 16"><path d="M9.113,4.571 C9.951,3.771 10.895,2.742 10.685,2.057 C10.475,1.485 10.056,0.799 9.427,0.571 C8.903,0.342 8.379,0.456 7.750,0.799 C7.540,0.342 7.016,0.114 6.596,-0.001 C5.863,-0.001 5.234,0.228 4.814,0.914 C4.080,0.571 3.451,0.685 2.927,1.028 C2.613,1.256 2.298,1.713 2.298,2.628 C2.298,3.542 3.137,4.228 3.766,4.685 C2.508,5.599 -0.218,7.885 -0.008,12.228 C-0.218,15.656 2.613,15.999 2.613,15.999 L10.371,15.999 C11.314,15.885 12.991,14.971 12.991,12.571 L12.991,12.228 C13.201,7.771 10.371,5.371 9.113,4.571 L9.113,4.571 ZM8.932,11.835 L6.940,11.835 L6.940,13.207 C6.940,13.435 6.731,13.549 6.521,13.549 C6.311,13.549 6.102,13.435 6.102,13.207 L6.102,11.835 L4.110,11.835 C3.900,11.835 3.795,11.606 3.795,11.378 C3.795,11.149 3.900,10.921 4.110,10.921 L6.102,10.921 L6.102,10.121 L4.949,10.121 C4.739,10.121 4.634,9.892 4.634,9.664 C4.634,9.435 4.739,9.206 4.949,9.206 L5.892,9.206 L4.739,7.950 C4.634,7.835 4.739,7.606 4.949,7.492 C5.158,7.378 5.368,7.264 5.473,7.378 L6.521,8.635 L7.674,7.264 C7.779,7.149 7.989,7.264 8.198,7.378 C8.408,7.492 8.408,7.721 8.408,7.835 L7.150,9.321 L8.094,9.321 C8.303,9.321 8.408,9.549 8.408,9.778 C8.408,10.007 8.303,10.235 8.094,10.235 L6.940,10.235 L6.940,11.035 L8.932,11.035 C9.142,11.035 9.247,11.264 9.247,11.493 C9.247,11.606 9.037,11.835 8.932,11.835 L8.932,11.835 Z"/></svg>
赞赏</button></div>                      
</div>
            