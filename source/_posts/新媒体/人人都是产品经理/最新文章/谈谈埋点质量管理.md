
---
title: '谈谈埋点质量管理'
categories: 
 - 新媒体
 - 人人都是产品经理
 - 最新文章
headimg: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/04/je0gM3px435NYuXlOZ59.jpg'
author: 人人都是产品经理
comments: false
date: Sun, 25 Apr 2021 00:00:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/04/je0gM3px435NYuXlOZ59.jpg'
---

<div>   
<blockquote><p>编辑导语：作为一种常用的数据采集方法，数据埋点无疑在产品正常运营过程中起着至关重要的作用，埋点质量管理也就显得尤为重要。那么，在埋点过程中，有哪些常见的质量问题？我们又应当采取哪些措施来预防这些问题呢？</p></blockquote>
<p><img data-action="zoom" class="size-full wp-image-4491215 aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/04/je0gM3px435NYuXlOZ59.jpg" alt width="900" height="420" referrerpolicy="no-referrer"></p>
<p>如今互联网人对于数据的使用可畏常态化，虽然有的是日常工作，有的只是几次需求，但无论对与数据有多少依赖，在数据的使用或解读上，以下情况大家应该都会遇到一二。</p>
<ul>
<li>团队来了一位新同学，想分析某个功能的数据情况，但感觉无从下手。便问老员工这个功能对应的埋点、那个页面对应的参数，得到的不是口口相传就是看着聊天记录中的文档地址。面对着黑压压一片的埋点信息，内心估计已经开始神兽奔腾了；</li>
<li>新版本上线后进行效果分析，发现埋点出现纰漏，此时若是重要数据，需要紧急找人发版，时间紧张又担惊受怕；若此时是一般数据，开发同学的回复大概率是：“和下个版一起迭代”，时隔半年一年再进行分析，这段数据波动的原因估计也没人能说清了；</li>
<li>测试同学拿着协作的埋点文档，测试过程中发现不是字段对应错误就是信息维护不全，解读起来麻烦不说，如果碰到大版本还需要进行埋点回归，不仅测试过程中工作量大，还有漏测的风险。</li>
</ul>
<p>埋点数据作为日常数据最重要的三大来源之一（包括业务数据和对外合作数据），其重要性不言而喻。上能影响推荐、AB实验、数据分析的准确；下能影响仓库的结构设计和日常维护成本。当前数据更是作为资产被各家公司所重视。想象一下到年终盘点时，面对一团“剪不断，理还乱”的数据，会是一种什么心情。</p>
<p>笔者通过对最近接手的埋点质量项目的一些经验总结，希望通过这篇文章给大家分享一下心得体会。</p>
<h2 id="toc-1">一、埋点质量问题有哪些？</h2>
<p>埋点过程整体链路环节较长，囊括的角色也相对较多。出了问题排查难度大，周期长，而且涉及团队配合问题也不好把控，下面我们来总结一下哪些环节容易出问题导致埋点质量问题。</p>
<p><img data-action="zoom" class="rich_pages aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/04/X9arhffiQedRvZOFnRXv.png" width="514" height="407" referrerpolicy="no-referrer"></p>
<p>如果在数据产出阶段不进行把控，等到了应用阶段就会出现数据不完整、数据重复、数据不一致、数据不匹配等数据问题。所以解决埋点质量问题要做到“预防为主、防治结合、综合治理”的方针，下面我们来看下如何进行埋点质量管理。</p>
<h2 id="toc-2">二、如何进行埋点质量管理？</h2>
<p>要开展埋点质量的管理，笔者认为可以从以下三个角度开始执行：意识、制度&流程、工具。</p>
<h3>1. 意识</h3>
<p>这里所谓的意识更多的是一种价值观、信念或者说是一种行为“动机”，是每个同学做事对自我要求的一项软性标准，类似于“道德”。</p>
<p>可能读到这大家觉得有些浮夸，怎么管理个埋点都上升到道德层面了。别着急，继续往下看。</p>
<p>对于执行层，无论是分析师或埋点产品必须要对出自自己手中的需求要负责，时刻意识到，埋点需求是整条数据链路的源头，并且用户实时发生数据拥有着不可回溯性。如果要是从源头开始“错、缺、乱”，那后续的环节不仅增加了成本，同时这部分数据也“白白流失”了。</p>
<p>而对于高层管理者，在任职期间要适当地给予数据治理一些侧重，无论是在人力上还是时间上。</p>
<p>让自己或自己的上级领导提升一些基础建设的意识，磨刀不一定会误砍柴功。用产品进行向上管理固然重要，毕竟是一个看的见、用得到并且能“体会”价值的载体。如果只在乎表面光鲜，那背后的“千疮百孔”要何时才能有机会修补。</p>
<p>任何一个组织创建时都需要有一个文化或者信念，在做事的时候可以时刻提醒自己。所以在质量管理的第一个重要角度是意识。</p>
<h3>2. 制度&流程</h3>
<p>上面讲述了意识层面上的统一，下面开始说的就是行为上的规范。所谓无规矩不成方圆，任何一件事有一个良好的规范去执行，那出错的概率就会比每个人自由发挥低很多。</p>
<p>这里所说的制度包括两个方面：角色流程和采集规范。</p>
<p><strong>1）角色流程</strong></p>
<p>埋点从需求产出开始要经历埋点开发、数据上报、数据采集、数据清洗、数据入库最终到业务应用，涉及的人员包括埋点产品&分析师、开发、测试、采集工程师、仓库工程师等。</p>
<p>各个环节能有机组合就需要一个良好的配合制度，既能保证工作有条不紊，同时又避免了权责混乱导致的问题无法及时响应。</p>
<p><strong>2）采集规范</strong></p>
<p><strong>① 文档规范</strong></p>
<p>文档规范要求负责埋点的同学列清相关需求点，包括：所需要的事件信息、统计位置、打点逻辑、上报时机。甚至还可能有失败后如何处理、失败原因、变更历史等相关内容，细化的需求文档有利于降低其他环节同学的理解偏差，也便于埋点使用时了解前因后果及错误信息。</p>
<p><strong>② 接入规范</strong></p>
<p>是指业务开发同学在使用埋点组件时要严格遵守组件方提供SDK的使用规则，例如通用事件内扩展字段的埋点位置、上报时机等。切不可根据“自我经验”进行更改优化。</p>
<p><strong>③ 命名规范</strong></p>
<p>命名规范适用于埋点信息的命名，包括事件ID、事件参数以及实际的参数值，做到以下原则：</p>
<ol>
<li>方便解读；</li>
<li>不要有特殊字符，不要采用系统关键字或预置关键字进行命名；</li>
<li>字段不易过长；</li>
<li>版本前后字段映射统一等。</li>
</ol>
<p>无法挨个维护的的参数值可以采用SPM或SCM模型来制定采集规范。</p>
<p>SPM叫超级位置模型，最早是受到土地户籍制度启发而设计的位置系统，目的应用于页面的统计、追踪页面的来源等场景，通常在埋点时作为埋点参数上报到数据后台。其编码形式采用A.B.C.D四层级进行组合，分别代表了业务、页面、页面区块、区块内的点位。</p>
<p><img data-action="zoom" class="rich_pages aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/04/m5JTl0upZSvua9LD6TMm.png" width="179" height="388" referrerpolicy="no-referrer"></p>
<p>我们以小红书的商城首页举例：</p>
<p>业务：商城（shop_center）</p>
<p>页面：首页（home_page）</p>
<p>页面区块：变美季（beauty）</p>
<p>区块内点位：3</p>
<p>SPM模型命名澳大利亚·秋冬必备神级修复的位置内容就可以写成：shop_center.home_page.beauty.3</p>
<p>在统计数据时可以通过该参数知道这个模块的位置的流量大小情况。</p>
<p>SCM叫超级内容模型，用来标识唯一一块内容的模型，在埋点时SCM模型的数据作为埋点参数上报到数据后台，其编码形式和SPM一样也是通过A.B.C.D四个层级进行编码，只不过四个层级记录的信息与SPM有所差别，分别是：内容来源、投放算法、算法版本以及对应的人群。</p>
<p>还以上面的内容为例：</p>
<p>内容来源（content_source）:shop</p>
<p>投放算法（algorithm）：cf</p>
<p>算法版本（version）：3.3</p>
<p>对应人群（crowd）：woman</p>
<p>该条内容：澳大利亚·秋冬必备神级修复的内容情况如：shop.cf.3.3.woman</p>
<p>可以统计不同位置下该条内容所展示的信息和流量情况SPM和SCM作为两种不同的编码规范，我觉得可以根据自己的需要进行相关的改良，比如更改层级或更改定义等。</p>
<h3>3. 工具</h3>
<p><strong>1) 埋点模型</strong></p>
<p>埋点模型采用的是事件模型，事件模型描述了一个人做某件事情所需要的几个重点要素：时间（when）、地点（where）、人物（who）、途径（how）、结果（what）。</p>
<p>例如：小明4月3号早上9点用小米手机在京东买了一个iPhone12，转译到埋点语言就是：</p>
<p><img data-action="zoom" class="rich_pages aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/04/tEzqjPaCAwrC953C8blz.png" width="515" height="513" referrerpolicy="no-referrer"></p>
<p style="text-align: center;">以上设备信息均为虚拟信息，仅作参考</p>
<p>实现以上信息采集的埋点方式当前行业内有：代码埋点、无埋点。</p>
<p><strong>① 代码埋点</strong></p>
<p>代码埋点是根据具体埋点需求进行数据采集的方式，这也是用户行为数据最早的采集方式。</p>
<p>代码埋点可支持客户端埋点和服务端埋点。客户端埋点主要采集用户行为，服务端埋点更多采集的是业务数据。</p>
<p>优点：</p>
<ol>
<li>埋点可以做到按需采集、减少无效的信息上报；</li>
<li>事件触发方式可以自定义，降低端上的资源消耗。</li>
</ol>
<p>缺点：</p>
<ol>
<li>新增埋点周期较长，需要跟随版本迭代；</li>
<li>管理成本较高，造成系统代码“冗余”；</li>
<li>采集数据有“缺失”，只能获取到上线之后的数据。</li>
</ol>
<p><strong>② 无埋点</strong></p>
<p>无埋点是识别端上各区块元素，对其进行全面的采集。</p>
<p>优点：</p>
<ol>
<li>新版本上线也可看到历史数据；</li>
<li>前端埋点成本低，管理成本低；</li>
<li>埋点范围覆盖相对较广。</li>
</ol>
<p>缺点：</p>
<ol>
<li>数据冗余过剩；</li>
<li>对应用开发的元素命名和开发规范要求严格；</li>
<li>不能进行自定义数据的采集；</li>
<li>服务端压力较大。</li>
</ol>
<p>为了埋点数据全&准的两个准则，一般可以采取两种方式组合的方式。重点业务、非重点页面采用代码埋点，重点页面非重点业务采用无埋点。合理分配两种埋点策略做到不丢不漏在合理的维护成本范围内，尽可能多而全的采集。</p>
<p><strong>2）埋点平台</strong></p>
<p>虽然有了意识上的“统一“、制度上的规范，但我相信依旧有一些团队在沿用公用文档维护埋点信息。</p>
<p>文档化维护方式在信息量小的时候问题还不凸显，但当面对成百上千的埋点就会出现埋点信息维护不全、查找困难、测试同学面对“海量”的上报数据头晕眼花极容易漏测、实际上报与需求不符无法及时发现等问题。</p>
<p>所以埋点质量的最后一个环节就需要通过平台化来进行辅助管理，主要管理的方向有以下几个方向：</p>
<ol>
<li>元数据管理完善、可溯源，提升查询效率；</li>
<li>自动化测试+人工校验、降低漏测风险；</li>
<li>质量监控，提升对错误埋点的发现效率；</li>
<li>引入埋点流程、辅助进行“团队管理”。</li>
</ol>
<p><strong>① 元数据的完善</strong></p>
<p>元数据管理主要包含以下内容：事件基础信息、业务组织架构、当前开发状态、操作日志及变动日志。</p>
<ol>
<li>事件基础信息：事件ID&名称、参数ID&名称、参数值ID&名称，统计口径、上报时机、版本、需求地址等。</li>
<li>业务组织架构：事件归属的页面、功能层级结构等信息。</li>
<li>当前开发状态：该事件所处的流转状态，包括：需求中、需求完成、开发中、开发完成、测试中、测试上线、灰度、正式上线。</li>
<li>操作日志及变动日志：记录系统上所有人员对于元数据的操作日志以及该事件历史版本变动日志等。</li>
</ol>
<p>有了完备的元数据信息，还需要提供完善的筛选和查找机制，让埋点使用人员可以方便管理和查询。</p>
<p>同时平台可以根据埋点组件规范和埋点信息自动生成一段代码给到业务开发同学，即降低了代码埋点的开发成本，也降低了出错的概率。</p>
<p><strong>② 自动化测试</strong></p>
<p>对于测试而言，有了完善元数据后埋点平台可以提供：</p>
<ul>
<li><strong>自动化的测试功能</strong>：可以根据实际上报的数据明细自动比对元数据模块下维护的信息内容，在每次测试任务中都会自动提醒哪些事件不符合规范，极大的提高了测试效率，加上后期的人工校验，也会降低漏测的概率。</li>
<li><strong>规范的数据展示方式以及详细的信息记录</strong>：传统的测试方式一边需要对着文档、一边需要看着一条巨长的上报数据来找到需要比对的信息来确认埋点是否准确。平台完全可以结构化上报数据，隐藏无关维度信息，并根据上报内容关键字（事件或参数信息）自动去元数据内进行数据查询，埋点同学每次测试任务只需要了解版本需求范围即可。</li>
</ul>
<p><strong>③ 质量监控</strong></p>
<p>即使测试通过了，埋点数据就一定让人放心了么？肯定不是的。上线后面对大样本使用，用户App什么样的机型都有，甚至会被篡改一些信息。</p>
<p>为了能让最终上报的数据减少错误，埋点平台可以提供质量管理模块，具体监控策略可以根据数据质量评估标准通用的5项准则：完整性、及时性、唯一性、稳定性、准确性进行设定。</p>
<p><img data-action="zoom" class="rich_pages aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/04/1CBJzj4zosZvc1MCCJzO.png" width="516" height="376" referrerpolicy="no-referrer"></p>
<p><strong>④ 引入埋点流程辅助</strong></p>
<p>管理整个埋点平台使用流程，可以根据上面2.制度&流程的角色流程进行划分和管理。上线前每个环节由相关负责人员进行确认，多层确认机制可以保证埋点信息的完善和准确，也为后续管理上带来了极大的便利性。埋点平台功能框架参考如下：</p>
<p><img data-action="zoom" class="rich_pages aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/04/sE8e6M57R7omrMgCEAbu.png" width="516" height="224" referrerpolicy="no-referrer"></p>
<h2 id="toc-3">三、写在最后</h2>
<p>数据质量问题在业务发展到一定阶段都会遇到，就像升职以后需要管理团队一样，不同级别面临的问题不一样，所需要采用的手段也不一样。</p>
<p>希望本篇文章可以让那些即将面临这个问题或已经身在其中的小伙伴能有一部分可借鉴的地方。因篇幅问题，涉及SDK、埋点设计以及平台搭建的部分都没法详细展开描述，如果对此感兴趣或有疑问的同学欢迎一起交流。</p>
<p> </p>
<p>作者：一个数据人的自留地；公众号：一个数据人的自留地</p>
<p>本文由@一个数据人的自留地 授权发布于人人都是产品经理。未经许可，禁止转载</p>
<p>题图来自Unsplash，基于CC0协议。</p>
<div class="support-author"><div class="support-title">给作者打赏，鼓励TA抓紧创作！</div><button class="button--pay" data-post-id="4480612" data-author="49446" data-avatar="http://image.woshipm.com/wp-files/2021/01/BAIehBwWocU4qhB1kvhw.jpeg"><svg width="13" height="16" class="svgIcon--use" viewBox="0 0 13 16"><path d="M9.113,4.571 C9.951,3.771 10.895,2.742 10.685,2.057 C10.475,1.485 10.056,0.799 9.427,0.571 C8.903,0.342 8.379,0.456 7.750,0.799 C7.540,0.342 7.016,0.114 6.596,-0.001 C5.863,-0.001 5.234,0.228 4.814,0.914 C4.080,0.571 3.451,0.685 2.927,1.028 C2.613,1.256 2.298,1.713 2.298,2.628 C2.298,3.542 3.137,4.228 3.766,4.685 C2.508,5.599 -0.218,7.885 -0.008,12.228 C-0.218,15.656 2.613,15.999 2.613,15.999 L10.371,15.999 C11.314,15.885 12.991,14.971 12.991,12.571 L12.991,12.228 C13.201,7.771 10.371,5.371 9.113,4.571 L9.113,4.571 ZM8.932,11.835 L6.940,11.835 L6.940,13.207 C6.940,13.435 6.731,13.549 6.521,13.549 C6.311,13.549 6.102,13.435 6.102,13.207 L6.102,11.835 L4.110,11.835 C3.900,11.835 3.795,11.606 3.795,11.378 C3.795,11.149 3.900,10.921 4.110,10.921 L6.102,10.921 L6.102,10.121 L4.949,10.121 C4.739,10.121 4.634,9.892 4.634,9.664 C4.634,9.435 4.739,9.206 4.949,9.206 L5.892,9.206 L4.739,7.950 C4.634,7.835 4.739,7.606 4.949,7.492 C5.158,7.378 5.368,7.264 5.473,7.378 L6.521,8.635 L7.674,7.264 C7.779,7.149 7.989,7.264 8.198,7.378 C8.408,7.492 8.408,7.721 8.408,7.835 L7.150,9.321 L8.094,9.321 C8.303,9.321 8.408,9.549 8.408,9.778 C8.408,10.007 8.303,10.235 8.094,10.235 L6.940,10.235 L6.940,11.035 L8.932,11.035 C9.142,11.035 9.247,11.264 9.247,11.493 C9.247,11.606 9.037,11.835 8.932,11.835 L8.932,11.835 Z"/></svg>
赞赏</button></div>                      
</div>
            