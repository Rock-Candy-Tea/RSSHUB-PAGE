
---
title: '层层剖析促销系统的优惠规则'
categories: 
 - 新媒体
 - 人人都是产品经理
 - 最新文章
headimg: 'https://image.yunyingpai.com/wp/2022/08/BoGgS9asFLUY6xRWEASr.png'
author: 人人都是产品经理
comments: false
date: Wed, 10 Aug 2022 00:00:00 GMT
thumbnail: 'https://image.yunyingpai.com/wp/2022/08/BoGgS9asFLUY6xRWEASr.png'
---

<div>   
<blockquote><p>编辑导语：对于商家来说，免不了要做促销活动。那么在促销活动中需要注意什么？本文从促销系统、促销优惠分类、共享互斥规则等八个方面分析了促销系统的优惠规则，希望对你有所帮助。</p></blockquote>
<p><img data-action="zoom" class="size-full wp-image-848899 aligncenter" src="https://image.yunyingpai.com/wp/2022/08/BoGgS9asFLUY6xRWEASr.png" alt referrerpolicy="no-referrer"></p>
<p>本文是理论+实战的输出，带你从多角度层层剖析促销系统规则，你将会获得：</p>
<ol>
<li>促销活动分类的依据是什么。</li>
<li>共享互斥规则关系如何构建。</li>
<li>门槛计算方式，平行和递进的优缺点。</li>
</ol>
<h2 id="toc-1">一、促销系统</h2>
<h3>1. 什么是促销</h3>
<ul>
<li>促销是：营销者向消费者传递产品的优惠信息引导消费者购买其产品的一种形式。</li>
<li>促销本质上来说是营销者和消费者之间的沟通活动，营销者通过优惠信息传达给消费者，消费者通过实际消费反馈信息给予营销者。</li>
</ul>
<h3>2. 促销的作用</h3>
<ul>
<li>对于运营者来看是一种运营工具，作用是帮助运营者完成其对用户的拉新、转化、促活、留存、传播的目的，完成对商品入市推广、销量提升、客单价提高、滞销库存清理的目的。</li>
<li>对于系统层面来看促销就是营销中心，提供一个个营销能力。因为营销中心对系统层来说只是一个名称而已，不区分促销和营销，统称营销。对于运营来说营销和促销是不同的，营销可能是内容营销，广告营销，促销就是优惠促销。</li>
</ul>
<p>本文所研究的范围是促销优惠，包括促销活动和促销优惠券。</p>
<h3>3. 促销优惠有哪些？</h3>
<p>常规的促销优惠有折扣，满减，满赠，加价购，商品券，代金券，等等。</p>
<h3>4. 该章节目的</h3>
<p>让我们清晰知道促销活动的边界是什么？哪些是促销活动哪些不是促销活动。通过促销活动的定义让我们知道了大的范围。</p>
<p>这些优惠都是一个个相互独立的规则，但是在运营层面却是有一些场景上的重叠，比如一个商品享受折扣能否再次享受满减？诸如此类如何让运营场景更灵活却又保障了商品金额和优惠的平衡呢？</p>
<p>我们通过一整套规则，让原本散乱的活动变成合理且有序。可以理解为一个个活动是未加工前状态，散乱粗糙，通过多个步骤加工，最终有序输出合理且生效的活动优惠。</p>
<p><strong>流程如下：每个环节在下文会逐个分析。</strong></p>
<p><img data-action="zoom" class="aligncenter" src="https://image.yunyingpai.com/wp/2022/08/jytS4I730siNOl7QosMF.jpg" alt width="400" height="544" referrerpolicy="no-referrer"></p>
<h2 id="toc-2">二、促销优惠分类</h2>
<p>在促销定义中我们发现促销活动的本质是优惠，在我们实际运营中优惠的方式有很多种，有在单品上打折优惠比如限时折扣，满足一定门槛进行优惠，等等。不同的活动运营效果也是不同。</p>
<p>根据促销活动优惠作用商品不同我们分为如下几类：（目前市面上通用方法，比如某东，某赞，等）</p>
<ul>
<li><b>单品类：</b>在商品原价基础上进行直接减少金额。比如折扣，特价，商品券，等。</li>
<li><b>总价类：</b>在商品小计金额基础上进行减免优惠。比如满减，满赠，等。</li>
<li><b>订单类</b>：在订单金额基础上再进行优惠。比如红包，积分优惠，支付优惠，等</li>
<li><b>支付后：</b>支付订单后提供优惠。比如消费有礼，等，</li>
<li><b>配送类</b>：该分类是针对配送费优惠，如减配送费活动，配送费券等。</li>
</ul>
<p>在我们系统中，我们额外增加了配送优惠分类，因为配送优惠是优惠配送费并不是优惠商品金额，这是两条并行关系。</p>
<p>在我们自己分类过程中由于规则范围较为宽泛有些活动仍无法准确进行分类，比如第二杯半价到底是单品类还是总价类呢？站在不同角度来看都是合理。所以在技术框架设计时应该要灵活支持活动分类调整，便于适用场景变更。</p>
<p><b>有很多朋友有疑问优惠券算是促销活动吗？</b></p>
<p>需要看优惠券的使用场景，大多数是促销活动。我们需要看优惠券规则，比如优惠券A是商品券针对商品打折，减优惠，这就是促销活动。券和活动这两种叫法是系统层面名称，对于运营来说都是活动只不过表现形式不同而已，本质还是优惠。如果优惠券是免排队券这就不是促销活动，因为这是一种权益没有提供优惠。</p>
<p><b>本章节目的：</b>通过对促销活动的分类，把原本独立的活动进行分类规整，便于下一步分析促销活动之间的共享互斥关系判断。</p>
<h2 id="toc-3">三、共享互斥规则</h2>
<p>共享互斥规则是控制一个商品参与多个活动时，可以生效几个活动。不同分类的规则也是不同，但是总体来看，是分类与分类之间以及分类之内的共享互斥关系共同组成一套完成的共享互斥关系。</p>
<p><img data-action="zoom" class="aligncenter" src="https://image.yunyingpai.com/wp/2022/08/lX5XLSLkL3mHynDARzVP.jpg" alt width="600" height="219" referrerpolicy="no-referrer"></p>
<ol>
<li><b>不同分类之间的共享互斥关系：</b>可以配置共享互斥关系。不同类型之间不存在逻辑冲突且符合运营场景，所以不同类之间支持共享，比如A商品享参与折扣依然可以参与满减。</li>
<li><b>分类组内的互斥共享关系：</b>分类组内互斥不可以共享。（市面上多数资料如此）</li>
</ol>
<p>但是经过我们仔细的分析以及实践经验，<b>我们的总结是：</b></p>
<ol>
<li>单品类组内互斥</li>
<li>配送费组内互斥</li>
<li>总价组内可以共享</li>
<li>订单类组内可以共享</li>
<li>支付后默认共享</li>
</ol>
<p>这里的互斥共享我们说一个前提，就是<b>同一商品可以理解为是一件商品，</b>这个前提容易被忽略但是非常重要，同一商品单品内只可以参与一个活动。不同单品依然可以参与多个活动。</p>
<p>举例说明：</p>
<ul>
<li>A商品特价2元，A商品4折，这个是可以取一个参与，无法共享只能互斥。</li>
<li>A商品特价2元，B商品4折，可以共享，因为是不同商品参与不同折扣。</li>
</ul>
<p>配送费组内互斥这个比较好理解，因为配送费是额外的费用，避免配送费被击穿，所以当有多个配送费优惠时只生效一个优惠。</p>
<p><strong>也许你会疑问为什么网上很多文章的同一商品总价类也是互斥，我们却可以共享呢？</strong></p>
<p>因为多数资料设计如此，很多平台也是这样设计，但是追求根本发现目的是平台强管控，运营希望卖的更多，商家担心成本击穿所以有了这个规则。但是逻辑上是可以实现，比如用户享受满减就不能享受满赠了吗？依然可以。</p>
<p>所以我们针对这类是弱管控，规则交给商家自行配置，但是我们会有默认值避免商家出现该情况。</p>
<p><b>总结如下：</b></p>
<ul>
<li><b>同一商品参与单品类活动不可以共享叠加，其余均可以配置共享还是互斥。</b></li>
<li><b>配送优惠同时只可以生效一种，防止配送费优惠击穿。</b></li>
</ul>
<p>具体分类组内的互斥共享关系可以依据你们各自生态的业务自行调整，我们的方案只是我们的实践经验仅供参考。</p>
<p><b>本章节目的</b>：通过不断分析输出活动规则之间的共享互斥关系这也确定了整体活动的共享互斥基调，这里值得好好研究尤其是不同分类之间的关系以及同一商品的定义，在这里在多说一句同一商品是商品数量为1的商品。</p>
<h2 id="toc-4">四、命中规则：</h2>
<h3>1. 命中规则的作用是什么？</h3>
<p>同一个商品参与多个单品类活动，比如7折，和特价5元，这个商品只能参与一个活动，那具体生效哪个活动呢？这个时候就需要通过命中规则来控制了，如果说共享互斥规则决定能不能，那命中规则就决定了谁和谁。</p>
<h3>2. 促销命中规则如何设计？</h3>
<p>首先强调一点：促销命中规则的设计方案完全没有标准答案，纯粹取决于业务的需求，只需要根据业务确认好的逻辑进行设计即可。</p>
<ul>
<li>优惠金额不同情况：生效优惠金额最大的活动类型。</li>
<li>优惠金额相同情况：我们的实际场景是按照如下进行判断。</li>
</ul>
<p><img data-action="zoom" class="aligncenter" src="https://image.yunyingpai.com/wp/2022/08/I6Vmmdr3U7zN20CLjGMK.png" alt width="600" height="439" referrerpolicy="no-referrer"></p>
<h2 id="toc-5">五、计算顺序</h2>
<p>我们根据促销活动在交易流程中体现的顺序进行划分。</p>
<ol>
<li>促销活动最先体现在单品优惠，</li>
<li>其次是总价类优惠</li>
<li>支付类在提交订单页</li>
<li>支付后享受权益</li>
</ol>
<p>按照交易环节中的顺序我们定义为生效顺序。</p>
<p>即同一商品参与多个活动分类的生效顺序，前提是同一商品，不同商品无需顺序可以平行生效。</p>
<p>POS顺序由于是人工点击触发自行选择顺序，只要不违背我们互斥定义均可以自行选择顺序生效。</p>
<p><img data-action="zoom" class="aligncenter" src="https://image.yunyingpai.com/wp/2022/08/VWUZJ1wlCN7uemucAPcH.jpg" alt width="600" height="60" referrerpolicy="no-referrer"></p>
<h2 id="toc-6">六、计算方式</h2>
<p>对于一笔订单中生效的活动有不同的触发计算方式，主流的是平行式计算和阶梯式计算，我们来剖析其中各自优劣势可根据您的业态自行选择。</p>
<h3>1. 平行式</h3>
<p><b>同一类型规则不分优先级并行计算，不同类型之间仍然是递进式。</b></p>
<p>平行式规则出现的原因：随着营销规则不断创新和丰富，优惠方式越来越多样化，规则体系愈加繁琐。在有多个优惠方式叠加的情况下，因无法快速、直接地感知到最终优惠力度，从而对部分消费者的购物体验造成了影响。因此需要对规则化繁为简，简化不同规则之间的逻辑关系，增强系统的效率和稳定性，降低消费者决策成本，提升平台促销效果。</p>
<h3>2. 递进式</h3>
<p><b>上一级优惠后的金额判断是否满足下一级活动门槛，若满足则可以生效使用。</b></p>
<p>当有多个同一类型的促销规则同时有效的情况下，需要先判断不同规则的优先级。然后按顺序逐级计算优惠门槛，即根据上一层级优惠扣减后的金额来判断是否满足下一层级的优惠门槛，规则越多，计算层级就越多。</p>
<p><img data-action="zoom" class="aligncenter" src="https://image.yunyingpai.com/wp/2022/08/BxQairHKtroQYl2AxwWR.jpg" alt width="600" height="388" referrerpolicy="no-referrer"></p>
<h3>3. 递进式和平行式区别</h3>
<p><b>（1）逻辑区别：</b><b>同一类型有多个规则时，递进式是串行计算，平行式是平行计算</b></p>
<p>递进式的多个规则必须预先设定明确的优先级，系统按优先级顺序计算，根据上一层级优惠扣减后的金额来判断是否满足下一层级的优惠门槛，满足门槛再计算下一集优惠，一级级计算下去。</p>
<p>平行式在同一类型的规则中，多个规则都是以基准价来分别计算，没有优先级关系，最后将每种规则计算出的优惠金额相加得出总优惠金额，再以基准价减去总优惠金额得出所有规则叠加后的优惠后金额。</p>
<p><b>（2）系统运算速度：</b><b>平行式计算速度大于递进式</b></p>
<p>因为平行式是平行计算，安排商品触发门槛一次性全部触发计算时间短，递进式需要计算完上一级之后然后再根据残值计算下一级门槛，每一次都是多次判断门槛，规则较多时计算时间耗时长。</p>
<p><b>（3）让利幅度区别：平行式优惠大于递进式</b></p>
<p>平行式要求商家在设置活动时对规则的把控以及优惠力度计算精细，要整体把控平行式触发的多个活动优惠进行整体评估成本和优惠这样才能保障用户平行式触发时优惠不被击穿，对使用者要求较高。</p>
<p>递进式对使用者要求较低只要每个优惠规则按照成本和优惠幅度计算即可，因为每个规则都是按照各自规则门槛触发生效优惠。</p>
<p>简单说：平行式不仅要看单个活动的优惠力度还要看着整体看满足条件后的其他活动力度优惠，整体把控。递进式只要看单个活动的优惠规则即可。</p>
<p><b>（4）消费者体验：平行式对消费者凑单更加简单</b></p>
<p>递进式规则下，消费者需要判断各级优惠的触发门槛，了解规则的优先级，优先级不同，结果完全不同，但当促销规则较多时，消费者很难清楚了解其优先级，很难计算如何凑单。</p>
<p>而平行式规则下，只要找到同一类型促销规则中门槛最高那个就行，能满足最高门槛的规则就一定能满足所有规则。</p>
<h3>4. 总结如下</h3>
<ul>
<li>如果您的业态活动较少，使用者弱管控，建议您使用递进式规则。</li>
<li>如果您的业态活动规则较多同时需要满足更高的用户体验，建议您使用平行式规则。</li>
</ul>
<h3>5. 我们的实践：我们选用的是递进式规则</h3>
<p>因为我们的商家运营能力薄弱无法整体把握优惠力度，而且设置同享的规则一般不超过5个，综合考虑我们使用递进式。使用递进式在前端交互以及计算算力上确实增加了不少取舍工作。如果您的业态无要求，建议采用平行式规则这样会让您在开发过程中更加平顺，懂得都懂。</p>
<h2 id="toc-7">七、优惠分摊</h2>
<p>将参与活动优惠的金额分摊到具体参与商品上。</p>
<p><b>商品分摊公式：商品优惠金额 = 总优惠金额×（商品金额 / 参与商品价格总和）</b></p>
<p>注意点：</p>
<ol>
<li>商品参与上一级优惠后的金额作为下一级优惠价格比例分摊。（比如A商品参与7折后，折扣金额30，则继续参与满100减10，则基准以30参与满减）</li>
<li>存在多个商品时，按照从小到大金额顺序排列依次计算，避免某一个金额较大时进行四舍五入将其他商品优惠进行分摊。</li>
<li>最后一件商品的优惠金额=优惠总金额-其他优惠金额。</li>
</ol>
<p>举例说明：花花同学购买A，B，C三个商品，价格分别是10，20，30，现参与满50减10活动，按照优惠分摊金额该是如何计算呢？</p>
<p><img data-action="zoom" class="aligncenter" src="https://image.yunyingpai.com/wp/2022/08/ywIFinLzeOM6pO7037JB.png" alt width="600" height="211" referrerpolicy="no-referrer"></p>
<h2 id="toc-8">八、如何配置</h2>
<p>调研发现部分商家是针对活动类型进行配置，部分是针对具体活动ID进行配置，在我个人来看其实并没有好坏之分，只要是满足符合当下自己公司发展的业态需要即可。</p>
<p><b>类型和ID的优劣势：</b></p>
<ul>
<li>活动类型配置：使用更加简单，便于理解，但是指定活动共享互斥时无法保证。</li>
<li>活动ID配置：支持多种不同方案的运营，但是活动配置时以及理解成本偏高。</li>
<li>我们选择的是活动ID进行配置，灵活高效。</li>
</ul>
<p>以上是我们针对促销系统优惠计算规则的理解，若有不同理解欢迎交流~</p>
<p> </p>
<p>本文由@帅气滴呼呼 原创发布于人人都是产品经理，未经许可，禁止转载。</p>
<p>题图来自Unsplash，基于CC0协议</p>
<div class="support-author"><div class="support-title">给作者打赏，鼓励TA抓紧创作！</div><button class="button--pay" data-post-id="5559827" data-author="943742" data-avatar="https://static.qidianla.com/woshipm_def_head_3.jpg"><svg width="13" height="16" class="svgIcon--use" viewBox="0 0 13 16"><path d="M9.113,4.571 C9.951,3.771 10.895,2.742 10.685,2.057 C10.475,1.485 10.056,0.799 9.427,0.571 C8.903,0.342 8.379,0.456 7.750,0.799 C7.540,0.342 7.016,0.114 6.596,-0.001 C5.863,-0.001 5.234,0.228 4.814,0.914 C4.080,0.571 3.451,0.685 2.927,1.028 C2.613,1.256 2.298,1.713 2.298,2.628 C2.298,3.542 3.137,4.228 3.766,4.685 C2.508,5.599 -0.218,7.885 -0.008,12.228 C-0.218,15.656 2.613,15.999 2.613,15.999 L10.371,15.999 C11.314,15.885 12.991,14.971 12.991,12.571 L12.991,12.228 C13.201,7.771 10.371,5.371 9.113,4.571 L9.113,4.571 ZM8.932,11.835 L6.940,11.835 L6.940,13.207 C6.940,13.435 6.731,13.549 6.521,13.549 C6.311,13.549 6.102,13.435 6.102,13.207 L6.102,11.835 L4.110,11.835 C3.900,11.835 3.795,11.606 3.795,11.378 C3.795,11.149 3.900,10.921 4.110,10.921 L6.102,10.921 L6.102,10.121 L4.949,10.121 C4.739,10.121 4.634,9.892 4.634,9.664 C4.634,9.435 4.739,9.206 4.949,9.206 L5.892,9.206 L4.739,7.950 C4.634,7.835 4.739,7.606 4.949,7.492 C5.158,7.378 5.368,7.264 5.473,7.378 L6.521,8.635 L7.674,7.264 C7.779,7.149 7.989,7.264 8.198,7.378 C8.408,7.492 8.408,7.721 8.408,7.835 L7.150,9.321 L8.094,9.321 C8.303,9.321 8.408,9.549 8.408,9.778 C8.408,10.007 8.303,10.235 8.094,10.235 L6.940,10.235 L6.940,11.035 L8.932,11.035 C9.142,11.035 9.247,11.264 9.247,11.493 C9.247,11.606 9.037,11.835 8.932,11.835 L8.932,11.835 Z"/></svg>
赞赏</button></div>                      
</div>
            