
---
title: '数据分析——因子分析怎么用？'
categories: 
 - 新媒体
 - 人人都是产品经理
 - 最新文章
headimg: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/05/FIP222f6xwjybrz95W2U.jpg'
author: 人人都是产品经理
comments: false
date: Wed, 12 May 2021 00:00:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/05/FIP222f6xwjybrz95W2U.jpg'
---

<div>   
<blockquote><p>编辑导语：作为多元统计分析里的降维方法之一，因子分析可以应用于多个场景、如调研、数据建模等场景之中。本篇文章里，作者就对因子分析做了详细介绍，对其原理逻辑、用途及代码实现过程进行了相关展示，让我们来看一下。</p></blockquote>
<p><img data-action="zoom" class="size-full wp-image-4547098 aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/05/FIP222f6xwjybrz95W2U.jpg" alt width="900" height="420" referrerpolicy="no-referrer"></p>
<p>数据分析中，主成分分析（PCA）是被大家熟知的数据降维方法。而因子分析和主成分分析是非常相似的两种方法，他们都属于多元统计分析里的降维方法。但因子分析最大的优点就是：<strong>对新的因子能够进行命名和解释，使因子具有可解释性</strong><strong>。</strong></p>
<p>因此，因子分析可以作为「需要满足可解释性数据建模」的前期数据降维的方法。下文会介绍因子分析的原理逻辑、用途以及Python代码的实现过程。</p>
<h2 id="toc-1">一、什么是因子分析？</h2>
<p>因子分析的起源是这样的，1904年英国的一个心理学家发现学生的英语、法语和古典语成绩非常有相关性，他认为这三门课程背后有一个共同的因素驱动，最后将这个因素定义为“语言能力”。基于这个想法，发现很多相关性很高的因素背后有共同的因子驱动，从而定义了因子分析。</p>
<p>因子分析在经济学、心理学、语言学和社会学等领域经常被用到，一般会探索出背后的影响因素如：语言能力、智力、理解力等。这些因素都是无法直接计算，而是基于背后的调研数据所推算出的公共因子。</p>
<p>因此概括下，因子分析就是将<strong>存在某些相关性的变量提炼为较少的几个因子，用这几个因子去表示原本的变量，也可以根据因子对变量进行分类</strong>。</p>
<p>举个例子。学生有语文、英语、历史、数学、物理、化学六门成绩，通过因子分析会发现这六门课由两个公共因子驱动，前三门是由“文科”因子，后三门是“理科”因子；从而可以计算每个学生的文科得分和理科得分来评估他在两个方面的表现。</p>
<h2 id="toc-2">二、因子分析可以解决什么问题？</h2>
<h3>1. 在多变量场景下，挖掘背后影响因子</h3>
<p>比如在企业和品牌调研中，消费者会调查很多问题来评估企业品牌。对这些问题通过因子分析可以刻画出背后少量的潜在影响因素，比如服务质量、商品质量等等。</p>
<h3>2. 用于数学建模前的降维</h3>
<p>因子分析和主成分分析都可用于降维。但因子分析的优点是，因子作为新的解释变量去建模，有更好的解释性。</p>
<p>因此对于有些需要业务解释的数据建模，可以在建模前通过因子分析提取关键因子，再用因子得分为解释变量，通过回归或者决策树等分类模型去建模。</p>
<h2 id="toc-3">三、算法实现步骤</h2>
<p>首先需要注意的是，和主成分分析一样，两种方法的目的都是降维，所以两种方法的前提假设都是：特征之间不是完全互相交互。</p>
<p>因子分析是寻找不线性相关的“变量”的线性组合来表示原始变量，这些“变量”称为因子，如下图中的F就是因子，X是原始变量，eps是原始变量不可被公共因子表示的部分。</p>
<p><img data-action="zoom" class=" aligncenter" title="数据分析—因子分析怎么用？" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/05/8URe5nVmBa8jEfHqybIo.png" alt="数据分析—因子分析怎么用？" width="490" height="178" referrerpolicy="no-referrer"></p>
<p>以上的公式还需要满足：</p>
<ol>
<li>要求因子的数据小于原始变量的数量，即m≤p；</li>
<li>因子F之间是相互独立且方差为1；</li>
<li>因子F和eps之间的相关性为0，eps之间相关性为0。</li>
</ol>
<p>因此，因子分析的过程就是实现以下几个目的的过程：</p>
<ol>
<li>求解方程中的因子F的系数；</li>
<li>给予因子F实际的解释；</li>
<li>展示原始特征和公共因子之间的关系，从而实现降维和特征分类等目的。</li>
</ol>
<p>求解方程的过程，就是分析变量的相关系数矩阵，从而找到少数几个随机变量去描述所有变量。又因为求解的不唯一性，最后通常会对因子的载荷矩阵做一次正交旋转，目的是为了方便理解每个因子的意义。</p>
<p><strong>汇总一下：对于因子分析的实操可以提炼为以下几个步骤。</strong></p>
<p><strong>1）充分性检验</strong></p>
<ul>
<li><strong>目的：</strong>检验变量之间是否存在相关性，从而判断是否适合做因子分析；</li>
<li><strong>方法：</strong>抽样适合性检验（KMO检验）或者 巴特利特检验（Bartlett’s Test）。</li>
</ul>
<p><img data-action="zoom" class=" aligncenter" title="数据分析—因子分析怎么用？" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/05/i2B5yi1JDN33FqxmkDIa.png" alt="数据分析—因子分析怎么用？" width="468" height="219" referrerpolicy="no-referrer"></p>
<p><strong>2）选择因子个数</strong></p>
<ul>
<li><strong>目的：</strong>通过数据定义最合适的潜在公共因子个数，这个决定后面的因子分析效果；</li>
<li><strong>方法：</strong>Kaiser”s准则 或者 累积贡献率原则。</li>
</ul>
<p><img data-action="zoom" class=" aligncenter" title="数据分析—因子分析怎么用？" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/05/OF1tVZWEcD5QJ43cW9eL.png" alt="数据分析—因子分析怎么用？" width="527" height="112" referrerpolicy="no-referrer"></p>
<p><strong>3）提取公共因子并做因子旋转</strong></p>
<p>提取公共因子就是上面提到的求解函数的过程，一般求解方法有：主成分法、最大似然法、残差最小法等等。</p>
<p>因子旋转的原因是提取公共因子的解有很多，而因子旋转后因子载荷矩阵将得到重新分配，可以使得旋转后的因子更容易解释。常用的方法是方差最大法。</p>
<p><strong>4）对因子做解释和命名</strong></p>
<ul>
<li><strong>目的：</strong>解释和命名其实是对潜在因子理解的过程；这一步非常关键，需要非常了解业务才可。这也是我们使用因子分析的主要原因。</li>
<li><strong>方法：</strong>根据因子载荷矩阵发现因子的特点。</li>
</ul>
<p><strong>5）计算因子得分</strong></p>
<p>对每一样本数据，得到它们在不同因子上的具体数据值，这些数值就是因子得分。</p>
<h2 id="toc-4">四、案例讲解</h2>
<p>数据集介绍：美国洛杉矶2000年街区普查数据，共有110个街区，15个变量，变量具体情况见下表。</p>
<p>想分析影响不同街区下人口分布的潜在因子。</p>
<p><img data-action="zoom" class=" aligncenter" title="数据分析—因子分析怎么用？" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/05/bOc8TCiJlNxWhGI0jsdI.png" alt="数据分析—因子分析怎么用？" width="531" height="167" referrerpolicy="no-referrer"></p>
<h3>1. 第一步：数据预处理和分析</h3>
<p>新增“人口密度”特征，删除特征人口量、面积、经度和维度。</p>
<p>import pandas as pd</p>
<p>import numpy as np</p>
<p>LA_data = pd.read_csv(‘LA.Neighborhoods.csv’)</p>
<p>#新增人口密度，去掉人口量、面积、经度和维度</p>
<p>LA_data[‘density’] = LA_data[‘Population’]/LA_data[‘Area’]</p>
<p>LA_data_final = LA_data.drop([‘Population’,’Area’,’Longitude’,’Latitude’],axis=1)</p>
<p>LA_data_final_feat = LA_data_final.drop([‘LA_Nbhd’],axis=1)</p>
<p><img data-action="zoom" class=" aligncenter" title="数据分析—因子分析怎么用？" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/05/B84juIwKIJCjdaxB0a4K.png" alt="数据分析—因子分析怎么用？" width="811" height="277" referrerpolicy="no-referrer"></p>
<h3>2. 第二步：因子分析——充分性检验</h3>
<p>巴特利特P值小于0.01，KMO值大于0.6；说明此数据适合做因子分析。</p>
<p><img data-action="zoom" class=" aligncenter" title="数据分析—因子分析怎么用？" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/05/NepO6fgjSTkiwacqjmud.png" alt="数据分析—因子分析怎么用？" width="813" height="195" referrerpolicy="no-referrer"></p>
<h3>3. 第三步：因子个数确定</h3>
<p>特征值大于1的因子数有2个，且两个因子的累计方差有68%；因此确定因子个数为2个。</p>
<p>from factor_analyzer import FactorAnalyzer</p>
<p>fa = FactorAnalyzer(LA_data_final_feat.shape[1]+1, rotation=None)</p>
<p>fa.fit(LA_data_final_feat)</p>
<p>ev, v = fa.get_eigenvalues() # 计算特征值和特征向量</p>
<p>var=fa.get_factor_variance()#给出方差贡献率</p>
<p><img data-action="zoom" class="rich_pages js_insertlocalimg aligncenter" title="数据分析—因子分析怎么用？" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/05/rzqgORnsVufgFdDHRGkD.png" alt="数据分析—因子分析怎么用？" width="809" height="245" referrerpolicy="no-referrer"></p>
<h3>4. 第四步：做因子分析</h3>
<p>调用因子分析函数，并得到因子载荷矩阵；从载荷矩阵可以看到，第一个因子和收入、有房家庭比例、复员军人比例及欧裔比例成正相关；第二个因子和非裔比例成正相关，反而和收入及有房比例等成负相关。</p>
<p>fa = FactorAnalyzer(2, rotation=”varimax”)fa.fit(LA_data_final_feat)# 输出载荷矩阵df_loading=pd.DataFrame(fa.loadings_,index=LA_data_final_feat.columns.tolist())df_loading</p>
<p><img data-action="zoom" class=" aligncenter" title="数据分析—因子分析怎么用？" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/05/YQ4PpV1vd16QRB3TTbVq.png" alt="数据分析—因子分析怎么用？" width="814" height="372" referrerpolicy="no-referrer"></p>
<h3>5. 第五步：计算因子得分</h3>
<p>其中因子1得分越大表示：收入、有房家庭比例、复员军人比例及欧裔比例更高；因子2得分高表示：非裔人群比例更高。</p>
<p><img data-action="zoom" class=" aligncenter" title="数据分析—因子分析怎么用？" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/05/4WxpuAVIJbJa9P85482X.png" alt="数据分析—因子分析怎么用？" width="811" height="386" referrerpolicy="no-referrer"></p>
<p>综上，以上就是本文要介绍的全部内容。</p>
<p>因子分析在互联网数据分析场景下用到的比较少，主要原因就是很多人不知道怎么用？不知道用到哪里？希望看完文章的你能初步了解因子分析，能知道下面几个问题的答案（不记得就回头看上面的介绍分享哦）。</p>
<ul>
<li>什么是因子分析？</li>
<li>因子分析可以解决什么问题？</li>
<li>因子分析的算法逻辑和分析流程是什么？</li>
<li>Python代码如何实现？</li>
</ul>
<p> </p>
<p>作者：须臾即永恒；公众号：须臾即永恒；</p>
<p>本文由 @须臾即永恒 原创发布于人人都是产品经理。未经许可，禁止转载</p>
<p>题图来自Unsplash，基于CC0协议</p>
<div class="support-author"><div class="support-title">给作者打赏，鼓励TA抓紧创作！</div><button class="button--pay" data-post-id="4545137" data-author="1184791" data-avatar="http://image.woshipm.com/wp-files/2021/01/lLKJOeasNjQsH7xsd3Dy.jpeg"><svg width="13" height="16" class="svgIcon--use" viewBox="0 0 13 16"><path d="M9.113,4.571 C9.951,3.771 10.895,2.742 10.685,2.057 C10.475,1.485 10.056,0.799 9.427,0.571 C8.903,0.342 8.379,0.456 7.750,0.799 C7.540,0.342 7.016,0.114 6.596,-0.001 C5.863,-0.001 5.234,0.228 4.814,0.914 C4.080,0.571 3.451,0.685 2.927,1.028 C2.613,1.256 2.298,1.713 2.298,2.628 C2.298,3.542 3.137,4.228 3.766,4.685 C2.508,5.599 -0.218,7.885 -0.008,12.228 C-0.218,15.656 2.613,15.999 2.613,15.999 L10.371,15.999 C11.314,15.885 12.991,14.971 12.991,12.571 L12.991,12.228 C13.201,7.771 10.371,5.371 9.113,4.571 L9.113,4.571 ZM8.932,11.835 L6.940,11.835 L6.940,13.207 C6.940,13.435 6.731,13.549 6.521,13.549 C6.311,13.549 6.102,13.435 6.102,13.207 L6.102,11.835 L4.110,11.835 C3.900,11.835 3.795,11.606 3.795,11.378 C3.795,11.149 3.900,10.921 4.110,10.921 L6.102,10.921 L6.102,10.121 L4.949,10.121 C4.739,10.121 4.634,9.892 4.634,9.664 C4.634,9.435 4.739,9.206 4.949,9.206 L5.892,9.206 L4.739,7.950 C4.634,7.835 4.739,7.606 4.949,7.492 C5.158,7.378 5.368,7.264 5.473,7.378 L6.521,8.635 L7.674,7.264 C7.779,7.149 7.989,7.264 8.198,7.378 C8.408,7.492 8.408,7.721 8.408,7.835 L7.150,9.321 L8.094,9.321 C8.303,9.321 8.408,9.549 8.408,9.778 C8.408,10.007 8.303,10.235 8.094,10.235 L6.940,10.235 L6.940,11.035 L8.932,11.035 C9.142,11.035 9.247,11.264 9.247,11.493 C9.247,11.606 9.037,11.835 8.932,11.835 L8.932,11.835 Z"/></svg>
赞赏</button><div class="pay-num">1人打赏</div><div class="donation-list"><div class="donation-item"><img class="avatar" src="https://static.woshipm.com/TTW_USER_R_201706_20170602183320_2116.jpg?imageView2/1/w/80" height="32" width="32" referrerpolicy="no-referrer"></div></div></div>                      
</div>
            