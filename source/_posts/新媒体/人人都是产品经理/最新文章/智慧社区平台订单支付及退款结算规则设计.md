
---
title: '智慧社区平台订单支付及退款结算规则设计'
categories: 
 - 新媒体
 - 人人都是产品经理
 - 最新文章
headimg: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/hwHueInTRVJtzt7QLf6b.jpg'
author: 人人都是产品经理
comments: false
date: Tue, 15 Jun 2021 00:00:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/hwHueInTRVJtzt7QLf6b.jpg'
---

<div>   
<blockquote><p>编辑导语：如今随着科技的不断发展，人们日常的生活也开始变得智能化，智慧生态逐渐进入到各种领域，从买菜到小区物业等等，如今很多都变得更加智能方便；本文作者分享了关于智慧社区平台订单支付及退款结算规则设计，我们一起来了解一下。</p></blockquote>
<p><img data-action="zoom" class="aligncenter size-full wp-image-4709641" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/hwHueInTRVJtzt7QLf6b.jpg" alt width="900" height="420" referrerpolicy="no-referrer"></p>
<p>笔者现就职于一家房产集团旗下科技公司，整体负责公司各产品线；公司主营智慧社区项目，在当地小有规模，智慧社区平台包括物业管理系统、社区电商平台、社区IOT系统、居家养老系统、社区政务系统、二手房交易平台等6大系统。</p>
<p>各系统后台独立，为了方便小区业主，让用户在同一个APP上能享受物业服务缴费、线上购物、扫码充电、会员缴费等等功能，需在用户端设计不同的支付结算方式。</p>
<p>本文主要分享社区电商系统、物业管理系统、社区IOT系统的订单支付及退款结算规则设计。</p>
<h2 id="toc-1">一、平台支付及结算业务需求分析</h2>
<h3>1. 物业管理系统支付结算需求</h3>
<p>物业系统为SaaS模式，B/S架构，使用平台公有云服务器，单独数据库分区，使用角色为平台合作的付费物业企业，支付结算需求包括：</p>
<ul>
<li>物业费、车位管理费、电梯费等费项需根据后台账单生成支付订单，且用户支付后直接结算至物业企业帐户，不做分成；</li>
<li>代收水电费需对接远程水电表设备，用户可在线预充费用，并随时查看余额，用户充值金额结算至物业企业帐户，并定期结算给当地水、电主管部门；</li>
<li>业主报修工单支付费用需按照材料费、工时费区分账单，直接结算至物业企业帐户，且平台收取3%的服务费；</li>
<li>物业结算金额需满足“T+1”到账，即次日（工作日）到账；</li>
<li>所有订单支持后台手动操作退款。</li>
</ul>
<h3>2. 社区电商平台支付结算需求</h3>
<p>社区电商模式以整合社区周边商家为社区居民提供便捷的O2O服务为主，入驻商家包括社区周边零售商和服务商。</p>
<p>零售服务场景主要是方便社区居民在线选购社区周边商品，提供线上下单，线下送货上门服务，基于之前的业务拓展，支持平台配送、快递物流、到店自提、商家送货上门4种配送方式，其中平台配送是整合物业服务人员进行社区周边的送货上门服务。</p>
<p>综合各种配送方式及业务场景，支付结算需满足以下需求：</p>
<ul>
<li>订单支付金额需”T+7″直接结算至商家帐户；</li>
<li>支持单笔订单直接分润，分润结算方包括平台分润、代理商分润、物业分润、商家结算；</li>
<li>部分商品支持7天无理由退货；</li>
<li>已完成订单支持单个商品退货退款；</li>
<li>平台配送费支付到平台帐户，并按月结算给配送人员；</li>
<li>快递物流、商家送货上门的订单配送费直接结算到商家；</li>
<li>到店自提不收取配送费；</li>
</ul>
<p>预约服务场景主要满足社区居民在线预购社区周边服务，支付结算需满足以下需求：</p>
<ul>
<li>订单支付金额需在服务完成后“T+1”直接结算至商家帐户；</li>
<li>支持单笔订单直接分润，分润结算方包括平台分润、代理商分润、物业分润、商家结算；</li>
<li>用户在服务未开始前申请退款，可全额退款，上门后退款需扣除上门服务费；</li>
<li>服务完成后不支持退款；</li>
<li>服务单到期未预约服务时，自动全额退款给用户；</li>
</ul>
<h3>3. 社区IOT系统支付结算需求</h3>
<p>社区IOT系统对接设备包括：社区一卡通、门禁、楼宇对讲、停车道闸、电动车充电桩等等；涉及到支付业务的有社区一卡通、电动车充电桩。</p>
<p>社区一卡通支付及结算需满足以下需求：</p>
<ul>
<li>一卡通需同时满足门禁卡、储值卡功能；</li>
<li>可应用的支付场景包括：缴物业费、水电费、维修费等，社区内及周边购物消费刷卡，线上支付扣款；</li>
</ul>
<p>电动车充电桩支付及结算需求：</p>
<ul>
<li>按照充电时间预付费，付费金额结算至平台；</li>
<li>不满预订时间结束充电时，自动计算退款金额，原路退回；</li>
<li>安装独立电表，电费由平台定时结算给物业；</li>
</ul>
<h3>4. 积分、优惠券、付费会员支付及结算需求</h3>
<p>包括以下需求：</p>
<ul>
<li>以上各个支付场景，用户都可使用积分抵现，抵现金额由平台让利给商家及用户，随订单支付金额一同由平台结算给商家，实时核销；</li>
<li>优惠券分为平台优惠券及店铺优惠券，统一由平台审核发放，可用于支付抵现；</li>
<li>平台优惠券抵现金额由平台补贴，随订单支付金额一同结算给商家，实时核销；</li>
<li>店铺优惠券抵现金额，直接由店铺让利优惠给用户，实时核销；</li>
<li>用户可购买付费会员，享受会员特权；</li>
</ul>
<h2 id="toc-2">二、结算规则设计及注意事项</h2>
<p>由以上需求内容可以看出，各系统的结算场景、结算流程，包括结算对象都存在不一致，但C端支付入口在同一应用端，这就需要在后台针对不同的业务流程设置不同的结算规则。</p>
<p>笔者对标了国内多个提供聚合支付及分账服务的平台，综合考虑对接成本及费率，最终选择了某平台作为对接方。</p>
<p>结算规则设计及注意事项如下：</p>
<h3>1. 物业缴费</h3>
<ul>
<li>支付方式：线上-支付宝、线上-微信、线下-支付宝、线下-微信、现金、银行卡刷卡、一卡通；</li>
<li>分账对象：物业企业（第三方支付平台扣除支付费率）；</li>
<li>分账方式：直接分账；</li>
<li>账单生成：根据费项设置的规则在物业管理系统后台生成账单后，同步到业主APP；</li>
</ul>
<p><img data-action="zoom" class="aligncenter size-full wp-image-4709648" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/cCXSMDbAr4MGp2Y5PrIX.png" alt width="1447" height="726" referrerpolicy="no-referrer"></p>
<ul>
<li>到账周期：T+1；</li>
<li>退款方式：由物业系统后台手动操作单账单退款；</li>
</ul>
<p>注意事项：为了保证客户资金安全及平台免责，由第三方支付机构与企业直接签约，且提供单独的对账后台，便于企业查账，线下支付则直接结算至企业银行卡账号，系统只做账单记录。</p>
<h3>2. 电商购物（包括使用积分、优惠券结算）</h3>
<ul>
<li>支付方式：线上-支付宝、线上-微信；</li>
<li>分账对象：平台、代理商、物业、商家共4方分账；</li>
<li>分账方式：资管平台分账；</li>
<li>到账周期：订单完成日起T+7；</li>
<li>账单结算及退款规则：平台配送方式包括快递物流、平台快送（类似美团骑士）、到店自提、商家送货上门，每种方式用户需支付的配送费不等，需分别计算，且需考虑用户使用积分、优惠券抵现及退款时是否选择全部商品退款等结算情景，总结分析订单状态及配送方式不同，共包含以下6种用例；</li>
</ul>
<p><strong>Case1：订单状态=待发货，配送方式=快递物流/商家送货上门</strong></p>
<p>计算规则：</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/kyaK3JaU7g6MtcxR8AVw.png" alt width="1130" height="235" referrerpolicy="no-referrer"></p>
<p>示例：</p>
<p>设置店铺抽成比例5%；<br>
用户甲下单商品总额为30元，配送方式为快递物流，物流费5元，使用平台优惠券抵扣10元，积分抵扣1元，则下单后，用户需支付24元（24=30+5-10-1）；商家收到结算总额为33.25元(33.25=（30+5）*（1-0.05）)；平台结算金额为-9.25元（-9.25=-10*0.95-1*0.95+24*0.05），负值，平台需结算给商家。发生退款后，用户可收到的退款总额为24元，+积分+优惠券；商家退款总额为33.25元；平台退款总额为-9.25元，负值，商家需退款给平台。</p>
<p><strong>Case2：订单状态=待发货，配送方式=平台快送</strong></p>
<p>计算规则：</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/JGiXEBlIiCFbGrC2lTFp.png" alt width="1131" height="227" referrerpolicy="no-referrer"></p>
<p>示例：</p>
<p>设置店铺抽成比例5%；<br>
用户甲下单商品总额为30元，配送方式为小慧快送，物流费5元，使用店铺优惠券抵扣10元，积分抵扣1元，则下单后，用户需支付24元（24=30+5-10-1）；商家收到结算总额为19元（19=（30-10）*（1-0.05））；平台收到的结算金额为5元（5=5-1+（20*0.05））元，正数，用户结算给平台。发生退款后，用户可收到的退款总额为24元，+积分+优惠券；商家退款总额为19元；平台退款总额为5元，正数，平台退款给用户。</p>
<p><strong>Case3：订单状态=已完成，配送方式=快递物流/商家送货上门，退款商品=全部订单商品</strong></p>
<p>计算规则：</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/UHT3ULF5Gzl9s2KpnoXW.png" alt width="1133" height="233" referrerpolicy="no-referrer"></p>
<p>示例：</p>
<p>设置店铺抽成比例5%；<br>
用户甲下单商品总额为30元，配送方式为快递物流，物流费5元，使用平台优惠券抵扣10元，积分抵扣1元，则下单后，用户需支付24元（24=30+5-10-1）；商家收到结算总额为33.25元(33.25=（30+5）*（1-0.05）)；平台结算金额为-9.25元（-9.25=-10*0.95-1*0.95+24*0.05），负值，平台需结算给商家。发生退款后，用户可收到的退款总额为19元（19=24-5），+积分+优惠券；商家退款总额为28.5元（28.5=33.25-5*0.95)；平台退款总额为-9.5元(-9.5=-9.25-5*0.05)，负值，商家需退款给平台。</p>
<p><strong>Case4：订单状态=已完成，配送方式=平台快送，退款商品=全部订单商品</strong></p>
<p>计算规则：</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/X6IEYbGTsvzwthxtc6Sw.png" alt width="1123" height="219" referrerpolicy="no-referrer"></p>
<p>示例：</p>
<p>设置店铺抽成比例5%；<br>
用户甲下单商品总额为30元，配送方式为小慧快送，物流费5元，使用店铺优惠券抵扣10元，积分抵扣1元，则下单后，用户需支付24元（24=30+5-10-1）；商家收到结算总额为19元（19=（30-10）*（1-0.05））；平台收到的结算金额为5元（5=5-1+（20*0.05）），正数，用户结算给平台。发生退款后，用户可收到的退款总额为19元（19=24-5），+积分+优惠券；商家退款总额为19元；平台需退款总额为0元（0=5-5）元，为零，平台无需退款。</p>
<p><strong>Case5：订单状态=已完成，配送方式=快递物流/商家送货上门，退款商品=部分商品，部分商品总额/订单商品总额=α（保留三位小数）</strong></p>
<p>计算规则：</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/VIuxSZaLiRHnQapGb3LN.png" alt width="1121" height="233" referrerpolicy="no-referrer"></p>
<p>示例：</p>
<p>设置店铺抽成比例5%；<br>
用户甲下单商品总额为30元，配送方式为快递物流，物流费5元，使用平台优惠券抵扣10元，积分抵扣1元，则下单后，用户需支付24元（24=30+5-10-1）；商家收到结算总额为33.25元(33.25=（30+5）*（1-0.05）)；平台结算金额为-9.25元（-9.25=-10*0.95-1*0.95+24*0.05），负值，平台需结算给商家。用户申请退款商品总额为20元,α=20/30=0.667，则用户可收到的退款总额为12.66元（12.66=20-1*0.667-10*0.667），退回积分667；商家退款总额为19元（19=20*0.95）；平台退款总额为-6.34元（-10*0.667-1*0.667+20*0.05），负值，商家需退款给平台。</p>
<p><strong>Case6：条件：订单状态=已完成，配送方式=平台快送，退款商品=部分商品，部分商品总额/订单商品总额=α（保留三位小数）</strong></p>
<p>计算规则：</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/06/4oXEnuMp7tcfYZLUUwYQ.png" alt width="685" height="136" referrerpolicy="no-referrer"></p>
<p>示例：</p>
<p>设置店铺抽成比例5%；用户甲下单商品总额为30元，配送方式为小慧快送，物流费5元，使用店铺优惠券抵扣10元，积分抵扣1元，则下单后：用户需支付24元（24=30+5-10-1）；商家收到结算总额为19元（19=（30-10）*（1-0.05））；平台收到的结算金额为5元（5=5-1+（20*0.05）），正数，用户结算给平台。用户申请退款商品总额为20元,α=20/30=0.667，则用户可收到的退款总额为12.66元（12.66=20-1*0.667-10*0.667），退回积分667；商家退款总额为12.66元（12.66=（20-10*0.667）*0.95）；平台需退款总额为0元（0=-1*0.667+(20-10*0.667)*0.05），为零，平台无需退款。</p>
<h3>3. 购买服务</h3>
<ul>
<li>支付方式：线上-支付宝、线上-微信；</li>
<li>分账对象：平台、代理商、物业、商家共4方分账；</li>
<li>分账方式：资管平台分账；</li>
<li>到账周期：服务完成日起T+1；</li>
<li>账单结算及退款规则：用户下单成功后，支付金额预存在第三方支付机构的资管平台，服务商家按照订单完成服务后，资金由资管平台T+1结算至商家帐户。服务订单完成前可申请退款，完成后不支持退款。</li>
</ul>
<h3>4. 一卡通支付</h3>
<ul>
<li>支付方式：线下刷卡支付；</li>
<li>分账对像：物业或商家；</li>
<li>分账方式：线下定期结算；</li>
<li>注意事项：一卡通需在商务局完成备案，并且是定向使用金额，接受商务局监管。</li>
</ul>
<h2 id="toc-3">三、结语</h2>
<p>以上内容为设计公司智慧社区项目各个系统结算规则时个人的心得体会，涉及的支付及结算场景较多，在系统上线后做此分享，以积累经验、学习交流。</p>
<p>随着产品的迭代升级结算方式会不断优化，后续如由新的心得会再次分享。欢迎交流经验，指出问题。</p>
<p> </p>
<p>本文由@正文 原创发布于人人都是产品经理，未经许可，禁止转载</p>
<p>题图来自Unsplash，基于CC0协议</p>
<div class="support-author"><div class="support-title">给作者打赏，鼓励TA抓紧创作！</div><button class="button--pay" data-post-id="4433082" data-author="1225398" data-avatar="http://image.woshipm.com/wp-files/2021/06/GMIs1bep3K2VPiOEfVs5.jpg"><svg width="13" height="16" class="svgIcon--use" viewBox="0 0 13 16"><path d="M9.113,4.571 C9.951,3.771 10.895,2.742 10.685,2.057 C10.475,1.485 10.056,0.799 9.427,0.571 C8.903,0.342 8.379,0.456 7.750,0.799 C7.540,0.342 7.016,0.114 6.596,-0.001 C5.863,-0.001 5.234,0.228 4.814,0.914 C4.080,0.571 3.451,0.685 2.927,1.028 C2.613,1.256 2.298,1.713 2.298,2.628 C2.298,3.542 3.137,4.228 3.766,4.685 C2.508,5.599 -0.218,7.885 -0.008,12.228 C-0.218,15.656 2.613,15.999 2.613,15.999 L10.371,15.999 C11.314,15.885 12.991,14.971 12.991,12.571 L12.991,12.228 C13.201,7.771 10.371,5.371 9.113,4.571 L9.113,4.571 ZM8.932,11.835 L6.940,11.835 L6.940,13.207 C6.940,13.435 6.731,13.549 6.521,13.549 C6.311,13.549 6.102,13.435 6.102,13.207 L6.102,11.835 L4.110,11.835 C3.900,11.835 3.795,11.606 3.795,11.378 C3.795,11.149 3.900,10.921 4.110,10.921 L6.102,10.921 L6.102,10.121 L4.949,10.121 C4.739,10.121 4.634,9.892 4.634,9.664 C4.634,9.435 4.739,9.206 4.949,9.206 L5.892,9.206 L4.739,7.950 C4.634,7.835 4.739,7.606 4.949,7.492 C5.158,7.378 5.368,7.264 5.473,7.378 L6.521,8.635 L7.674,7.264 C7.779,7.149 7.989,7.264 8.198,7.378 C8.408,7.492 8.408,7.721 8.408,7.835 L7.150,9.321 L8.094,9.321 C8.303,9.321 8.408,9.549 8.408,9.778 C8.408,10.007 8.303,10.235 8.094,10.235 L6.940,10.235 L6.940,11.035 L8.932,11.035 C9.142,11.035 9.247,11.264 9.247,11.493 C9.247,11.606 9.037,11.835 8.932,11.835 L8.932,11.835 Z"/></svg>
赞赏</button></div>                      
</div>
            