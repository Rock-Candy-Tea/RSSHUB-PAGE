
---
title: '如何从0到1规划和设计风控决策引擎'
categories: 
 - 新媒体
 - 人人都是产品经理
 - 最新文章
headimg: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/02/N2FzNIS2o75fLUskGAoo.jpg'
author: 人人都是产品经理
comments: false
date: Sat, 26 Feb 2022 00:00:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/02/N2FzNIS2o75fLUskGAoo.jpg'
---

<div>   
<blockquote><p>编辑导语：决策引擎是风控运营、风控策略重要的工具，本文从产品介绍、规划、设计详细描述了一款金融风险决策引擎产品从0到1的诞生，并且对风控决策引擎做出了未来展望，一起来看一下吧。</p></blockquote>
<p><img data-action="zoom" class="size-full wp-image-5333711 aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/02/N2FzNIS2o75fLUskGAoo.jpg" alt width="900" height="420" referrerpolicy="no-referrer"></p>
<h2 id="toc-1">一、产品介绍</h2>
<p>在消费金融业务场景中，决策引擎扮演的角色重要性不言而喻。作为风控的大脑，决策引擎承载的是风控业务的专家经验，基于变量和模型的输入，经过复杂的决策流逻辑运算，最终输出决策结果。决策引擎产品提供可视化操作，支持判断逻辑的多种组合，流程链路配置，支持0开发部署上线，使得策略迭代速度能够得到最大的优化。</p>
<p>决策引擎是风控运营、风控策略同学的工作台。一款优秀的决策引擎产品不仅能帮助风控策略人员全生命周期管理决策，快速迭代策略，实现高效能的规则管理，灵活的流程配置，还能降低开发人员的维护成本，释放开发人效。</p>
<p>笔者在金融行业的从业经历中，经历过从1到100的决策引擎的优化迭代，也经历过从0到1决策引擎的规划和起步。本文重点介绍如何从0到1规划和落地一款风险决策引擎。</p>
<h2 id="toc-2">二、产品规划</h2>
<p>决策引擎要从0到1落地，一方面需要产品经理要具备很强的风控业务sense，能深入理解风险决策全流程，掌握决策组件的构成机制；另一方面，需要掌握如何打造决策引擎的MVP（最小可行性产品）的1.0版本，以及规划到2.0以及3.0版本。</p>
<p>我们先来了解下 金融信贷风控业务的主流程（各公司不同产品决策流程会有细微差异，但基本主干一致）：</p>
<p><img data-action="zoom" class="origin_image zh-lightbox-thumb aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/02/LQ4kOSsud4uX6Qkn8CBg.png" width="1004" referrerpolicy="no-referrer"></p>
<p>决策引擎最底层的抽象就是利用系统配置出可执行的决策流。决策流的组成结构可抽象成：<b>变量</b>：最小的原子组件，也称指标，比如 年龄，性别，放款金额，逾期天数，信用分等。</p>
<ul>
<li><b>规则</b>：规则由变量经过组合加上阈值逻辑后形成，一般有单变量规则和多变量规则，比如某条单变量准入规则：年龄 < 18 或者 年龄 > 55 则拒绝</li>
<li><b>规则集</b>：规则集是一系列规则的集合，或者叫一个决策节点，比如我们会把多个准入规则集合在一起称为 准入规则集，或者反欺诈规则集</li>
<li><b>决策流</b>：决策流是根据决策节点（规则集）按照先后顺序或者分流顺序连接而成的一个决策模块。比如 申请决策流包括准入规则集，反欺诈规则集等，授信决策流模块包括额度规则集等。一般消费分期业务还有 支付决策流等。</li>
</ul>
<p>很明显，决策引擎的MVP，即1.0版本要实现以上流程和组件的可配置化，跑通风险主流程。</p>
<p><b>第一阶段：构建决策引擎MVP</b></p>
<p>功能模块包括：指标管理 + 规则配置 + 决策流配置</p>
<p>在实现以上功能模块后，基本上可以形成业务主流程闭环，投产使用。在具体的业务需求上，我们规划出后续几个阶段的功能模块。</p>
<p><strong>第二阶段：支持更多组件和灵活配置</strong></p>
<p>功能模块包括：组件管理（规则+评分卡+模型） + SQL代码配置规则</p>
<p><b>第三阶段：完善数据和监控服务</b></p>
<p>功能模块包括：名单管理 + 征信源管理 + 决策监控</p>
<p><b>第四阶段：抽象公用，支持更多产品线</b></p>
<p>功能模块包括：产品管理 + 决策流配置 + 决策流复用</p>
<p><b>基于以上四个阶段的规划，基本形成了一个自用决策引擎，能满足绝大多数风险业务的需求。</b></p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/02/A3rMurWUAb82pRBcECGM.png" alt width="1155" height="308" referrerpolicy="no-referrer"></p>
<h2 id="toc-3">三、产品设计</h2>
<p>基于以上四个阶段的迭代后，最终呈现的是一个相对完整的决策引擎产品，包括：</p>
<p>指标管理，组件管理，决策流配置，数据管理，决策监控，权限管理，产品管理</p>
<p>各个功能模块的主要功能点如下：</p>
<h3>1. 指标管理</h3>
<p><b>由业务方根据实际业务提出相应需求，后端开发完成后，在引擎内部进行配置、测试、组合新指标等管理功能。指标管理分为 指标维护，指标测试，指标搜索功能模块。</b></p>
<p><b>指标维护：</b></p>
<p>1） 展示所有目前库中指标，可以根据指标名称、征信源、指标分类来搜索指标</p>
<p>点击指标名可以看到指标的开发逻辑；</p>
<p>2） 新增指标：进入指标编辑页面，填写下表信息及开发逻辑；</p>
<p>3） 编辑指标：进入指标编辑页面，对已有信息进行编辑；</p>
<p>4） 上线指标：确认指标无误后，点击上线，规则等可以正常使用；</p>
<p>5） 下线指标：下线后，线上有使用此指标的的规则将失效；在使用中的字段，点击下线后需要提示警告；</p>
<p>注：</p>
<p>1） 指标会在后续规则管理中编辑时使用，如后台无相应字段，规则无法正常使用。</p>
<p>2） 变量类型为选项：INT/FLOAT/STRING/ARRAY等。</p>
<p>3） 默认值：在变量开发时约定每个字段的默认值。</p>
<p>4） 变量分类：对变量进行分类，可以选择多个，搜索时可以根据分类挑选。</p>
<p>5） 是否依赖征信源：变量是否用到征信源，如有选择征信源名称。</p>
<p>6） 是否使用中：在线上的策略中是否有用到这个字段，此项不可编辑。</p>
<p><b>指标测试：</b></p>
<p>1） 输入测试：选取所需要测试的指标，输入所依赖的数据源内容，获取字段结果；</p>
<p>2） 批量测试：随机从线上数据中获取数据，批量获取字段结果；</p>
<p><b>指标搜索：</b></p>
<p>1） 根据指标名称可以搜索相应指标，采用联想搜索</p>
<p>2） 根据分类可以搜索类别下所有字段</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/02/RDmqBBVoSAmQOz5xiLsT.png" alt width="1551" height="575" referrerpolicy="no-referrer"></p>
<h3>2. 规则管理</h3>
<p>将指标根据逻辑进行组合成规则，再将规则组合成以下内容：</p>
<p>规则、规则表、评分卡、复杂模型、决策树</p>
<p>测试完成后在决策流中使用。</p>
<p><b>1）</b><b>组件管理</b></p>
<p><b>规则</b>：根据指标，选择表达式、指定条件值，得到输出的决策结果（规则决策结果为True/False）：</p>
<ul>
<li>页面式：通过网页实现拖拽式操作</li>
<li>脚本式：为熟悉代码的操作人员预留脚本编辑规则的空间。</li>
</ul>
<p>数学、文本表达式：>,<,=,>=,<=,!=,in, not in ,contain, not contain, isnull , isnotnull（后续可根据业务需求添加）</p>
<p>逻辑表达式：&, || （后续可根据业务需求添加）</p>
<p>操作页面：</p>
<p>（1） 输入规则代号、名称、注释保存；（每个代号都是唯一）；</p>
<p>（2） 编辑规则逻辑：选择指标，选择表达式，输入条件值；选择逻辑关系，增加条件；（选择时通过关键字搜索或通过下拉框，选择相应指标）</p>
<p>（3） 测试：输入对应指标值，点击测试获取测试结果；</p>
<p>（4） 测试完成后，点击发布，将组件生效；</p>
<p>（5） 测试中如果遇到问题，需要展示错误原因（例：某字段输入值不正确）</p>
<p><b>规则配置页面：</b></p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/02/5IdhpsgdU963rNiYR9uk.png" alt width="1162" height="716" referrerpolicy="no-referrer"></p>
<p><b>规则生成代码编辑页面：</b></p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/02/xzz8XuO0HWx4S7arawa4.png" alt width="1246" height="631" referrerpolicy="no-referrer"></p>
<p><b>2）</b><b>规则表：根据规则，选择逻辑关系，得到输出的决策结果（可以为多个结果，文本、数值等）：</b></p>
<p>逻辑关系：&, ||，contain, not contain</p>
<p>（1） 输入规则表代号、名称、注释保存；（每个代号都是唯一）；</p>
<p>（2） 先配置兜底结果（默认值）；</p>
<p>（3） 点击新增一行条件，在左侧选取规则，选择逻辑关系，右侧配置指定输出参数；（选择时通过关键字搜索或通过下拉框，选择相应指标）</p>
<p>（4） 测试：输入对应指标值（规则中用到的值），点击测试获取测试结果（所有出参部分）；</p>
<p>（5） 测试完成后，点击发布，将组件生效；</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/02/zo2iJ8LGGDiLtU3nEQcY.png" alt width="1321" height="663" referrerpolicy="no-referrer"></p>
<p><b>3）</b><b>评分卡：根据字段，选择表达式、指定条件值，得到输出的决策结果（仅评分）：</b></p>
<p>数学、文本表达式：>,<,=,>=,<=,!=,in, not in ,contain, not contain, isnull , isnotnull,</p>
<p>逻辑表达式：&, ||</p>
<p>（1） 输入评分代码，名称和注释。（每个代号都是唯一）；</p>
<p>（2） 选择增加“评分项”，填写此项权重；</p>
<p>（3） 编辑左侧选择指标，表达式，在右侧输入Score；（选择时通过关键字搜索或通过下拉框，选择相应指标）</p>
<p>（4） 整体评分卡（整体评分如何计算：最终得分 = 评分项1 * 权重1 + 评分项2 * 权重2 +…）和每个单一的评分项，均可以测试，点击评分项，测试单独评分项，显示此项内指标；点击空白处，测试整个评分卡，显示所有指标；</p>
<p>（5） 测试完成后，点击发布，将组件生效；</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/02/HHFvJf1HaC6XA1SxhXhg.png" alt width="1304" height="702" referrerpolicy="no-referrer"></p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/02/yIuJm5ycaMhyRVrYaehe.png" alt width="1075" height="713" referrerpolicy="no-referrer"></p>
<h3>3. 决策流</h3>
<p>将规则、规则表、评分卡、模型等进行串联，形成决策流，实现对贷前、贷中、贷后或运营的全流程处理。</p>
<p>（1） 绘制决策流图，设置节点；</p>
<p>（2） 在节点中配置规则、规则表、评分卡等组件；（选择时通过关键字搜索或通过下拉框，选择相应组件）</p>
<p>（3） 在节点中允许配置：A/B Test（设置命中比例）、命中但不执行决策结果、控制征信源启用；</p>
<p>（4） 允许复制决策流，复制的决策流包含所有使用内容；</p>
<p>（5） 点击发布前对决策流整体流程进行在测试环境进行测试，确保流程没有任何问题，后进行预发布。</p>
<p>（6） 点击预发布，查看发布后结果，无问题正式发布上线；</p>
<p>（7） 选择节点时，可以查看到其所用到规则、规则表、评分卡等组件，点击相应组件可以直接去到对应的组件页面</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/02/9V0y8EWeF4hNiYkGD3l6.png" alt width="1280" height="660" referrerpolicy="no-referrer"></p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/02/Jb7JddBwMw3rCZGLLgu3.png" alt width="1218" height="685" referrerpolicy="no-referrer"></p>
<p><b>版本管理</b></p>
<p>规则、规则集、评分卡等组件和决策流，在测试完成后都需要进行发布生效。</p>
<p>（1） 预发布：在正式发布前，有一道预发布，决策会同时运行线上正式版本和预发布的版本，待观察预发布版本无问题后，点击正式发布，替换线上版本。</p>
<p>（2） 版本回退：保留之前版本，点击发布，允许旧版本替换现有线上版本</p>
<p>（3） 可以新增一个版本，也可以编辑当前版本，但编辑当前版本保存后自动会生成新的版本；</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/02/dSndUaZiq8geLNzBJFWx.png" alt width="1053" height="567" referrerpolicy="no-referrer"></p>
<h3>4. 数据管理</h3>
<p>数据管理分为 名单管理和外部数据源管理两个功能模块</p>
<p><b>1）</b><b>名单管理</b></p>
<p>在页面中维护（新增、删除、修改）客户名单，分黑、白、灰3类。支持名单的新增，修改，上传，查看来源，禁用以及修改记录。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/02/RywkFGMByZYv11RAcACp.png" alt width="1088" height="733" referrerpolicy="no-referrer"></p>
<p><b>2）</b><b>外部数据管理</b></p>
<p>管理外部数据源，控制数据源是否调用，以及调用节点</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/02/j8fMyKWx0UTE0A0SuLva.png" alt width="1090" height="444" referrerpolicy="no-referrer"></p>
<h3>5. 决策监控</h3>
<p>针对线上使用内容，进行数据监控，并可以进行报警。</p>
<p>1、 监控线上决策内容是否报错，如有问题，按小时颗粒度进行报警；</p>
<p>2、 监控征信源数据是否异常；如：开关关闭，仍有调用；</p>
<p>3、 可以选取对应的决策流节点，选择时间端，查的策略命中情况；</p>
<h3>6. 权限管理</h3>
<p>权限管理是通用的模块，业内比较成熟，一般产品会基于用户，角色，资源三个维度来设计权限管理模块。满足风控决策引擎如下功能即可：</p>
<p>设置管理员、用户、设置权限组（角色），对相关用户或组配置相对应的页面（资源）权限。</p>
<p>1、 管理员：最大的使用权限, systemadmin</p>
<p>2、 用户：普通使用人员，可单独配置相应权限；</p>
<p>3、 角色（权限组）： 根据组配置相应权限，下属用户能直接获取相应权限；</p>
<h3>7. 产品管理</h3>
<p><b>对产品进行区分，每个产品有单独的决策流分支，对所属规则、字段进行组合配置。</b></p>
<p>1）维护产品（新增、删除、修改产线名称）</p>
<p>2）维护事件（新增、删除、修改事件类型）</p>
<p>3）产品下只能看到本产品下的事件。但允许复制产品下事件至另一产品下，保留本事件下所有内容。</p>
<p><b>总结一下 决策引擎的功能模块</b>：</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/02/4GnhlP3QsZQCbuPYRBjk.png" alt width="1074" height="588" referrerpolicy="no-referrer"></p>
<h2 id="toc-4">四、发展展望</h2>
<p>金融风控决策引擎产品的前身来自于规则引擎，是规则引擎在金融场景的应用。金融场景决策引擎的鼻祖当属FICO推出的Blaze，在互联网金融出现前，传统金融机构几乎清一色使用的是商用的Blaze产品。</p>
<p>随着互联网金融，金融科技，大数据，实时场景的到来，Blaze已经不能满足多样化个性化风控场景的需求，各家大厂纷纷自研决策引擎，比如美团的Zeus规则引擎，蚂蚁的智能风控引擎AlphaRisk，携程Argis风控引擎等，都是业界优秀的决策引擎产品，值得每一个风险/数据产品经理 研究。</p>
<p>在开源社区也涌现出很多开源优秀的规则引擎产品，比如drools，urule，radar等，一般中小型公司会直接参考开源引擎，在此基础上二次开发来满足自身风控业务的需求。业界自研加上开源支持，让决策引擎产品不断发展完善。</p>
<p>金融风控只是规则引擎的一个应用场景，风险领域或广义上的大安全领域还包含 交易风控，内容风控，流量风控。多种复杂的业务风控场景都需要一款规则引擎来进行策略的快速迭代。</p>
<p>未来随着更多场景的应用，规则引擎也会不断进化，展望下更高阶的规则引擎，未来可能的两个发展方向：</p>
<ul>
<li><b>实时化</b>：大数据发展，计算能力的发展，将提升现有决策引擎的算力和处理时效</li>
<li><b>智能化</b>：在现有的风控决策引擎上融入了自言语言处理平台、流计算平台、实时预警、深度学习、可视化科学计算等，比如风控规则的自动探索生成。</li>
</ul>
<p>智能规则引擎或许在不远的将来会引领人们走向一种新的思维模式与编程行为，一切皆规则，人们要做的事情就是把能够采集到的业务数据直接扔给智能决策引擎，剩下的，就让智能决策引擎自己去处理吧。</p>
<p> </p>
<p>本文由 @乘风随行 原创发布于人人都是产品经理，未经许可，禁止转载。</p>
<p>题图来自Unsplash，基于CC0协议</p>
<div class="support-author"><div class="support-title">给作者打赏，鼓励TA抓紧创作！</div><button class="button--pay" data-post-id="5323958" data-author="42115" data-avatar="http://image.woshipm.com/wp-files/2015/06/Koala28.jpg"><svg width="13" height="16" class="svgIcon--use" viewBox="0 0 13 16"><path d="M9.113,4.571 C9.951,3.771 10.895,2.742 10.685,2.057 C10.475,1.485 10.056,0.799 9.427,0.571 C8.903,0.342 8.379,0.456 7.750,0.799 C7.540,0.342 7.016,0.114 6.596,-0.001 C5.863,-0.001 5.234,0.228 4.814,0.914 C4.080,0.571 3.451,0.685 2.927,1.028 C2.613,1.256 2.298,1.713 2.298,2.628 C2.298,3.542 3.137,4.228 3.766,4.685 C2.508,5.599 -0.218,7.885 -0.008,12.228 C-0.218,15.656 2.613,15.999 2.613,15.999 L10.371,15.999 C11.314,15.885 12.991,14.971 12.991,12.571 L12.991,12.228 C13.201,7.771 10.371,5.371 9.113,4.571 L9.113,4.571 ZM8.932,11.835 L6.940,11.835 L6.940,13.207 C6.940,13.435 6.731,13.549 6.521,13.549 C6.311,13.549 6.102,13.435 6.102,13.207 L6.102,11.835 L4.110,11.835 C3.900,11.835 3.795,11.606 3.795,11.378 C3.795,11.149 3.900,10.921 4.110,10.921 L6.102,10.921 L6.102,10.121 L4.949,10.121 C4.739,10.121 4.634,9.892 4.634,9.664 C4.634,9.435 4.739,9.206 4.949,9.206 L5.892,9.206 L4.739,7.950 C4.634,7.835 4.739,7.606 4.949,7.492 C5.158,7.378 5.368,7.264 5.473,7.378 L6.521,8.635 L7.674,7.264 C7.779,7.149 7.989,7.264 8.198,7.378 C8.408,7.492 8.408,7.721 8.408,7.835 L7.150,9.321 L8.094,9.321 C8.303,9.321 8.408,9.549 8.408,9.778 C8.408,10.007 8.303,10.235 8.094,10.235 L6.940,10.235 L6.940,11.035 L8.932,11.035 C9.142,11.035 9.247,11.264 9.247,11.493 C9.247,11.606 9.037,11.835 8.932,11.835 L8.932,11.835 Z"/></svg>
赞赏</button></div>                      
</div>
            