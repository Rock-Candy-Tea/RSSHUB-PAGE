
---
title: '5000字详解性能需求'
categories: 
 - 新媒体
 - 人人都是产品经理
 - 最新文章
headimg: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/01/CSus4iUBp8knBqBiX4Lo.jpg'
author: 人人都是产品经理
comments: false
date: Wed, 19 Jan 2022 00:00:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/01/CSus4iUBp8knBqBiX4Lo.jpg'
---

<div>   
<blockquote><p>编辑导语：一件产品的完成，最重要的一环便是它的性能，好产品的性能必定是被人们所需要的。这篇文章详细阐述了产品性能需求的重要性，推荐想要了解性能要求的童鞋阅读。</p></blockquote>
<p><img data-action="zoom" class="size-full wp-image-5295159 aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/01/CSus4iUBp8knBqBiX4Lo.jpg" alt width="900" height="420" referrerpolicy="no-referrer"></p>
<p>我刚工作时，和政府部门做了个产品，功能就是个表单录入，录入完保存到系统。拿去给用户演示，一切很完美。</p>
<p>但是当开始试运行时，出现了问题——单据录入完成后，保存无反应。</p>
<p>后来一看是用户在每次会同时录入很多条内容，在保存100条数据要30s才能保存成功。500条数据直接保存失败。</p>
<p>当然，这是我的问题，忽略了对性能的要求。</p>
<p>性能的重要性不必细说，有些数据表明：近80%的用户反馈应用响应时间慢、点击没反应等性能问题。</p>
<p>一般在公司里会有专门的测试人员对系统进行性能测试，而对于性能的标准，具体性能指标多少合适，测试同学是不清楚的。</p>
<p>这个时候就需要产品狗们提出性能要求，给测试同学作参考。</p>
<p>接下来我们说说性能需求咋提以及性能指标。</p>
<p>文章较长，建议收藏吃灰~</p>
<h2 id="toc-1">一、性能需求什么时候提</h2>
<p>性能需求属于非功能需求，一般在需求文档内需要有单独模块对性能做说明。</p>
<p><img data-action="zoom" class="aligncenter size-full wp-image-741825" src="https://image.yunyingpai.com/wp/2022/01/M1ljHuKL21g5ACcZ5XmC.jpg" alt referrerpolicy="no-referrer"></p>
<p>在写需求文档的时候就可以把性能需求一起规定好，在需求评审时也要评审下性能需求，让各方达成一致。</p>
<p>研发同学在做技术设计时考虑进来，避免在项目后期，出现重大性能问题。</p>
<p>测试同学在准备测试用例时，把性能也提前规划进来，提前准备好测试方案。</p>
<p>另外性能测试也会占用一定的项目时间，需要在制定项目计划时，把性能测试的时间也纳入计划中。</p>
<h2 id="toc-2">二、性能需求怎么提</h2>
<p>性能需求是指对系统性能进行规范化描述，提出明确、合理的性能指标要求。</p>
<p>主要分为2个方面：</p>
<h3>1.系统整体性能需求</h3>
<p>主要指标包括</p>
<ul>
<li>在线用户数数量：如支持在线用户数200w</li>
<li>平稳运行时间：如7×24h</li>
<li>平均响应时间：如页面打开时间低于2s。（对于一些主要页面可以在做单独性能要求）</li>
<li>CPU：CPU使用率＜75%</li>
</ul>
<h3>2.不同功能/接口性能需求</h3>
<p>由于不同功能、不同接口的使用频率、重要程度不同，我们可以对不同功能、不同接口单独提出性能需求。</p>
<p>可以从下边几个标准来确定需要单独明确的功能/接口</p>
<ul>
<li>高频：系统中高频率使用的功能，高频调用的接口，像刷动态</li>
<li>关键：系统中不能出现问题的功能，像登录、注册、支付</li>
<li>特色：系统中的亮点功能，产品的卖点，比如处方合理性审核系统、风险监控系统，还有像交友的在线匹配功能。</li>
<li>涉及大量数据：比如说报表查询。</li>
</ul>
<p>举个“登录”功能的例子：</p>
<p>并发用户数500，响应时间2s，TPS到500/s，CPU不得超过75%。</p>
<p>下边我们详细说说性能指标以及性能指标的标准</p>
<h2 id="toc-3">三、常见的性能指标有哪些</h2>
<p>主要有响应时间、并发数、吞吐量、CPU等，对于App需要关注FPS、启动时间、耗电量等。</p>
<p>我们一个个看看：</p>
<h3>1. 响应时间——最直观的表现</h3>
<blockquote><p>“系统应该让用户知道发生了什么，在适当的时间内做出适当的反馈。”尼尔森可用性十原则——状态可见性</p></blockquote>
<p>在尼尔森可用性十原则中的“状态可见性原则”提到的“适当的时间”就可以理解为响应时间。</p>
<p>站在用户角度描述就是点击一下按钮，系统在页面上给出反馈的时间。这个反馈时间是用户最能直观感受到的，也是对用户体验影响最大的地方。</p>
<p><img data-action="zoom" class="aligncenter wp-image-741829" src="https://image.yunyingpai.com/wp/2022/01/aZ7TVk7OP7FFJuYuy31y.jpg" alt width="600" height="291" referrerpolicy="no-referrer"></p>
<p>当响应时间＞5秒后，74%的PC端用户、50%以上的App用户会选择放弃操作，30%的用户会选择卸载应用，33%以上的用户会转身使用竞品。</p>
<p>吓人不？</p>
<p>我们接着看下响应时间的定义：提交请求和返回该请求的响应之间使用的时间。主要由网络传输时间和业务处理、数据处理时间组成。</p>
<p><img data-action="zoom" class="aligncenter wp-image-741831" src="https://image.yunyingpai.com/wp/2022/01/rK0H206R1wg9v6k38QsN.jpg" alt width="600" height="236" referrerpolicy="no-referrer"></p>
<p>而对于产品来说，需要关注的是页面响应时间，就算接口处理完成，数据传到客户端上了，在前端也需要解析出来，也会消耗一定时间。</p>
<p>响应时间多长才能满足要求呢？</p>
<p>之前有个2-5-10原则，而现在随着技术、硬件的更新换代，响应时间也有了1-3-5标准。</p>
<p><img data-action="zoom" class="aligncenter wp-image-741832" src="https://image.yunyingpai.com/wp/2022/01/rNZ5rk81ZisjdWWycXkM.jpg" alt width="600" height="256" referrerpolicy="no-referrer"></p>
<p>即1s内用户完全可以接受，3s内用户觉得还可以，5s用户就会开始焦躁不安。</p>
<p>当然这只是个通用标准，不是个固定标准。我们在提出需求时，可以结合业务重要性、数据量大小、使用频次来做综合考虑。</p>
<p>举个例子：导出excel报表。对于很多B端产品，这是个刚需、高频的功能。</p>
<p>我们可以这样提出性能要求：</p>
<ul>
<li>1万条数据，导出完成用时3s。</li>
<li>3万条数据，导出完成用时5s。</li>
<li>10万条数据，导出完成用时8s。</li>
</ul>
<p>我从网上找到一些响应时间参考指标，大家可以看下：</p>
<ul>
<li>互联网企业：500毫秒以下，例如淘宝业务10毫秒左右。</li>
<li>金融企业：1秒以下为佳，部分复杂业务3秒以下。</li>
<li>保险企业：3秒以下为佳。</li>
<li>制造业：5秒以下为佳。</li>
</ul>
<h3>2. 并发用户数——笼统也直观的指标</h3>
<p>并发用户数的定义是每秒同时向服务器提交请求的用户总数量。</p>
<p>关于并发用户数有2个理解：</p>
<ol>
<li>多个用户同一时间做不同操作，比如多个用户有发动态的，有刷动态的。</li>
<li>多个用户同一时间做同一个操作，比如多个用户一起发动态。</li>
</ol>
<p>对于这2个理解，在性能需求上可以分开提，比如：</p>
<ul>
<li>系统支持并发用户数500</li>
<li>发布动态：支持300人并发发布动态。</li>
</ul>
<p>有几种并发用户数评估方法，大家可以看下：</p>
<p>1）公式1：</p>
<p><img data-action="zoom" class="rich_pages wxw-img aligncenter" title="5000字详解性能需求" src="https://image.yunyingpai.com/wp/2022/01/AH9RUZLDfll6dmLhgPOq.png" alt="5000字详解性能需求" referrerpolicy="no-referrer"></p>
<p>n：平均每天的访问用户数。App可以直接用日活代替。</p>
<p>L：一天内用户从登录到退出的平均时间，可以理解为平均用户使用时长。</p>
<p>T：考察时间长度，一天内多长时间有用户在使用系统。</p>
<p>举个例子:</p>
<p>App日活是10w，用户平均使用时长是10min，用户每天活跃时间大约是从早上10点到晚上10点。</p>
<p>公式里的n=10w，L=10min，T=12h</p>
<p>C=（10w×10min）/12h，时间单位统一成秒</p>
<p>C=（10w×10×60）/（12×3600）≈1388人/秒</p>
<p>峰值C’=1388×3×根号1388≈1500人/秒</p>
<p>提需求时可以以峰值并发用户数为准</p>
<p>2）公式2：</p>
<p>C=（用户总量/统计时间）*影响因子</p>
<p>影响因子一般为3</p>
<p>比如App的每天晚上8点-10点用户最活跃，且活跃用户有8w。</p>
<p>8w/2h×3≈33人/秒</p>
<p>3）公式3：</p>
<p>根据80~20原则：80%的请求在20%的时间内产生。然后结合PV一起算（注意不是UV，因为一个用UV产生多个PV）</p>
<p>比如1天的PV有100w</p>
<p>先算80%的PV：100w×80%=80w</p>
<p>20%的时间：24h×20%=4.8，换算出秒，就是4.8×3600=17280秒</p>
<p>并发数就是：80w/17280=46人/秒</p>
<p>如果是B端私有化部署的产品，一般使用人数比较固定，我们可以从企业人员数量做评估：用户数量×比例，比例可以视具体情况而定，一般取8%-20%。</p>
<p>当然这些都是评估方法，得出的具体数据量只是做个参考。</p>
<h3>3. 吞吐量——衡量系统处理能力的重要指标。</h3>
<p>吞吐量是指单位时间内系统能处理的请求数量，体现着系统处理请求的能力。</p>
<p>吞吐量的量化指标有：TPS（每秒事务数）、QPS（每秒查询数）</p>
<p>TPS：是指事务数/秒。一个事务是指服务器发送请求，服务器做出反应的过程。</p>
<p>整体过程就是：用户做出操作>>请求服务器>>服务器处理>>服务器处理完成返回到用户。</p>
<p>每秒能完成多少个流程就是多少个TPS</p>
<p>简单理解：就是登录一次算一个事务，每秒能完成2个登录事务，就是2个TPS。</p>
<p>QPS：是指每秒查询率。指一台服务器每秒能够响应的查询次数。</p>
<p>QPS 基本类似于 TPS，不同的是：在完成一个事务时，会存在多次查询服务器，所以应该是TPS≤QPS。</p>
<p>另外TPS、QPS响应时间与并发用户数有关系，对应的公式是：</p>
<p>TPS=并发用户数/平均响应时间。</p>
<p>当性能测试完，测试说500TPS，我们要有个大约概念，如果响应时间按1s算，那并发数就是500。</p>
<p>一般的标准有：</p>
<ul>
<li>互联网电子商务：10000TPS~100000TPS,例如天猫5万TPS</li>
<li>互联网中型网站：100TPS~500TPS</li>
<li>互联网小型网站: 50TPS~100TPS</li>
</ul>
<h3>4. CPU</h3>
<p>CPU指标主要指的CPU利用率。</p>
<p>程序在运行的时候，会使用CPU做处理计算。就会占用CPU的空间，如果占用过多，系统就会出现卡顿、无响应的情况。</p>
<p>CPU标准：</p>
<ul>
<li>CPU＜20％的利用率为资源空闲</li>
<li>在20％～60％之间表示资源使用稳定</li>
<li>在60％～80％之间表示资源使用饱和</li>
</ul>
<p>当＞75%时，就需要关注了。</p>
<p>对于web端，一般指服务器的CPU。而对于移动端，常指手机的CPU 。</p>
<p>App的CPU一般在20-40%，最多不能超过75%，如果长时间cpu利用率过高，就会产生发烫、闪退。</p>
<h3>5. 内存</h3>
<p>内存主要是运行处理CPU发出的指令，在内存里处理完毕后，再反馈给CPU。</p>
<p>在网络上或者硬盘上加载的资源，一定会通过内存交换，可以理解为：页面加载出来的图片、文字会暂时存到内存里的，处理完成后就删掉。</p>
<p>内存和CPU类似，资源都是有限的，如果占用过多，会出现卡顿或闪退的现象。</p>
<p>内存常内存使用率做为指标，一般＜70%。</p>
<h3>6. 磁盘吞吐量</h3>
<p>磁盘吞吐量是指单位时间内通过磁盘的数据量，主要是每秒的读、写请求大小。</p>
<p>一般用磁盘繁忙率来确定性能，磁盘繁忙率要＜70%。</p>
<p>这个指标了解即可。</p>
<h3>7. 网络吞吐量</h3>
<p>是指有每秒有多少兆流量进出，一般情况下不能超过设备最大传输能力的70%。</p>
<p>这个指标了解即可。</p>
<h3>8. 错误率</h3>
<p>错误率=(失败事务数/事务总数)*100%。</p>
<p>在一定并发下，循环调用某个接口，会出现接口报错的情况。错误率正常情况下要为0。</p>
<p>在高并发的情况下错误率一般要低于0.6%，就是成功率要高于99.4%。</p>
<p>这个指标了解即可。</p>
<p>像CPU、内存、磁盘、网络是指服务器的资源利用率，主要是对公司内部来说。</p>
<p>性能测试的同学对于这些指标的标准都很清楚，对于我们产品，需要明白这些定义与具体标准即可，性能需求提不提问题都不大。</p>
<h2 id="toc-4">四、移动端需要关注的性能指标</h2>
<h3>1. FPS</h3>
<p>FPS是指每秒显示的帧数，主要用来体现出app的流畅度。</p>
<p>App的FPS一般＞24帧/秒，最好是60帧/秒。</p>
<p>FPS的越高并不意味着越流畅，FPS低也不意味着页面卡。</p>
<p>还需要关注帧率的稳定性。如果一直都是低帧率，卡顿现象感受不明显，如果帧率忽高忽低，就会有明显的掉帧、卡顿现象。</p>
<p>对于游戏类app帧率要求较高，对于非游戏类app，我认为只要能保证没有明显的卡顿现象就可以了。</p>
<h3>2. 耗电量</h3>
<p>在App中，CPU处理、蓝牙、定位、传感器、GPU（图形处理）都会加快耗电量。</p>
<p>对于不同的App单位时间耗电量是不同的，耗电量的标准可以通过对比得出：</p>
<ul>
<li>与历史版本间进行对比。如果新版本与上一个版本单位时间内耗电量相差过多，则需要优化。</li>
<li>与竞品对比，如果比竞品多了10%以上的耗电量，也需要优化。</li>
</ul>
<h3>3. App启动时间</h3>
<p>在说响应时间的时候，我们提到1-3-5原则，5s的时候用户已经开始焦虑了。</p>
<p>而App的启动时间，是用户感知到的第一个时间段，直接影响用户对App的首要体验，第一次留不住，让用户再回来就更难了。</p>
<p>App的响应时间标准是最大不能超过5s。</p>
<p>如果启动时间过长，该优化就优化。</p>
<p>当然也可以对于历史版本与竞品进行对比，看看自家App的水平在哪。像支付宝，启动时间是秒开。</p>
<p>性能指标一般就以上这些，大家需要理解下。</p>
<h2 id="toc-5">五、性能需求达不到怎么办</h2>
<p>一般性能测试同学在测试完成后，会给出对应的性能测试报告，我们可以通过解读性能报告的内容来判断是否需要优化性能。</p>
<p>在我的工作经历中，很多时候会出现性能不达标的情况，如果性能需求不满足，我们可以按照以下方式确定：</p>
<h3>1. 重新分析指标合不合理</h3>
<p>一般在评估时会对性能要求过高，需要重新定义性能指标再做判断。</p>
<h3>2. 判断实际性能与性能需求是否相差太多</h3>
<p>如果相差不大，可以先发版，延期处理性能问题。</p>
<p>如果相差太大，不能接受，就要与研发沟通，确定是否有优化方案、优化方案内容、优化是否会导致延期。</p>
<p>如果会引起延期，就要和领导反馈，以及同步各方。</p>
<h2 id="toc-6">六、如何从产品设计上提高性能</h2>
<p>性能问题归根到底是技术问题，而为了达到更好的性能指标，达到最好的用户体验，我们也可以从产品设计上整点花样。</p>
<ol>
<li>采用tab页的方式：同一个页面数据过多时，使用tab页分开加载。</li>
<li>分页加载：一次加载10条/20条等。</li>
<li>尽量不采用全屏加载的方式，使用懒加载、预加载。</li>
<li>懒加载：比如图片先展示缩略图，然后点击查看原图。</li>
<li>预加载：提前把内容加载好，用户进入到页面时，可以直接看。有些app的开屏广告就是提前预加载好，用户下次点击进入时可以直接观看。</li>
<li>连接超时后进行情感化提示：设置超时时间10s，当超时后，通过有趣的方式提示用户。</li>
<li>“欺骗”用户：在页面显示操作成功，但是后端还在处理。微信发朋友圈时，就算在断网的情况下也是可以发布出来，但是就自己能看到，等联网后才能成功发布出来。</li>
</ol>
<p>上边的几种方式虽然是和技术相关的，但是这些是直接影响产品用户体验，还是需要我们产品提出。</p>
<p>另外对于缓解用户的焦虑感，可以使用有趣、好玩的加载动画，分散用户的注意力。</p>
<p>也可以采用进度条来体现系统处理的进度。对于处理时间确实很长的，给用户个大约用时，让用户有个心理预期。</p>
<h2 id="toc-7">七、总结</h2>
<p>性能需求是个容易忽视，却无比重要的地方。如果你一直忽略性能需求，下次的需求文档里一定要写上。</p>
<p>如果你不提，一上线系统卡成狗，你是产品，就是你的锅。</p>
<p> </p>
<p>本文由 @王大鹿 原创发布于人人都是产品经理。未经许可，禁止转载</p>
<p>题图来自Unsplash，基于CC0协议</p>
<div class="support-author"><div class="support-title">给作者打赏，鼓励TA抓紧创作！</div><button class="button--pay" data-post-id="5292959" data-author="321700" data-avatar="https://static.woshipm.com/APP_U_201909_20190929161942_9254.jpeg"><svg width="13" height="16" class="svgIcon--use" viewBox="0 0 13 16"><path d="M9.113,4.571 C9.951,3.771 10.895,2.742 10.685,2.057 C10.475,1.485 10.056,0.799 9.427,0.571 C8.903,0.342 8.379,0.456 7.750,0.799 C7.540,0.342 7.016,0.114 6.596,-0.001 C5.863,-0.001 5.234,0.228 4.814,0.914 C4.080,0.571 3.451,0.685 2.927,1.028 C2.613,1.256 2.298,1.713 2.298,2.628 C2.298,3.542 3.137,4.228 3.766,4.685 C2.508,5.599 -0.218,7.885 -0.008,12.228 C-0.218,15.656 2.613,15.999 2.613,15.999 L10.371,15.999 C11.314,15.885 12.991,14.971 12.991,12.571 L12.991,12.228 C13.201,7.771 10.371,5.371 9.113,4.571 L9.113,4.571 ZM8.932,11.835 L6.940,11.835 L6.940,13.207 C6.940,13.435 6.731,13.549 6.521,13.549 C6.311,13.549 6.102,13.435 6.102,13.207 L6.102,11.835 L4.110,11.835 C3.900,11.835 3.795,11.606 3.795,11.378 C3.795,11.149 3.900,10.921 4.110,10.921 L6.102,10.921 L6.102,10.121 L4.949,10.121 C4.739,10.121 4.634,9.892 4.634,9.664 C4.634,9.435 4.739,9.206 4.949,9.206 L5.892,9.206 L4.739,7.950 C4.634,7.835 4.739,7.606 4.949,7.492 C5.158,7.378 5.368,7.264 5.473,7.378 L6.521,8.635 L7.674,7.264 C7.779,7.149 7.989,7.264 8.198,7.378 C8.408,7.492 8.408,7.721 8.408,7.835 L7.150,9.321 L8.094,9.321 C8.303,9.321 8.408,9.549 8.408,9.778 C8.408,10.007 8.303,10.235 8.094,10.235 L6.940,10.235 L6.940,11.035 L8.932,11.035 C9.142,11.035 9.247,11.264 9.247,11.493 C9.247,11.606 9.037,11.835 8.932,11.835 L8.932,11.835 Z"/></svg>
赞赏</button></div>                      
</div>
            