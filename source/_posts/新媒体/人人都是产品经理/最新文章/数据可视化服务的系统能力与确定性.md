
---
title: '数据可视化服务的系统能力与确定性'
categories: 
 - 新媒体
 - 人人都是产品经理
 - 最新文章
headimg: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/08/Fd3195zdvNLgcGoSYV92.jpg'
author: 人人都是产品经理
comments: false
date: Fri, 20 Aug 2021 00:00:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/08/Fd3195zdvNLgcGoSYV92.jpg'
---

<div>   
<blockquote><p>编辑导读：当你说你要做一个产品，你需要的是建设一套系统能力。产品上线后，要持续地提供用户可以依赖的确定性，才能让人留恋和依赖。本文作者以数据可视化产品为例，分析其系统能力与确定性，一起来看看吧。</p></blockquote>
<p><img data-action="zoom" class="size-full wp-image-5083360 aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/08/Fd3195zdvNLgcGoSYV92.jpg" alt width="900" height="420" referrerpolicy="no-referrer"></p>
<p>接着梁宁系列课程的思考，这节课讲的是产品的系统能力，在课后她留的作业是：</p>
<ul>
<li>挑选一个你最熟悉的产品，说说它应该给用户提供怎样的确定性满足？这个产品做到了吗？如果没有，你觉得问题在哪？</li>
<li>持续的满足就会依赖，不确定的感觉就是伤害。你可以说说，你有没有确定性被伤害的时候？</li>
</ul>
<p>在写作业之前，我们先学习一下梁宁在这节课的名词解释：</p>
<ul>
<li><strong>当你说你要做一个产品，你需要的是建设一套系统能力；</strong></li>
<li><strong>确定性很重要。人生如此不确定，所以当你看到有一个东西非常确定的时候，是让人留恋与依赖的。持续地提供用户可以依赖的确定性，这个是关键；</strong></li>
</ul>
<p>今天我们围绕着梁宁布置的作业，那就从“系统能力”、“确定性”两个方面来探讨一下数据可视化产品（更确切的说是“数据可视化服务”）。</p>
<h2 id="toc-1">一、如何进行数据服务？数据可视化产品的系统能力</h2>
<p>其实在<a href="http://www.woshipm.com/data-analysis/1907934.html" target="_blank" rel="noopener">《数据可视化如何实现？》</a>一文中就介绍过数据产品的系统，主要分为：<strong>数据存储层</strong>、<strong>数据计算层</strong>、<strong>数据展示层</strong>（如下图所示）。当时仅对系统的各个层级进行了名词解释，但作为一个整体的系统各个层级之间又是怎么工作来进行数据服务呢？</p>
<p><img data-action="zoom" class=" aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/08/2xBSv1fCy6MiDmBwORIb.png" referrerpolicy="no-referrer"></p>
<p>作为业务人员，数据可视化产品对他们最直观的服务就是数据的图表化展示，我们单从字面的意思来看，整个系统由两部分组成：<strong>用于业务场景的数据</strong>+<strong>将数据</strong><strong>图表化的能力</strong>。</p>
<h3>1. 用于业务场景的数据</h3>
<p>在企业实际的工作场景中，数据分散在不同的存储中，比如日志数据、埋点数据、服务端数据等。但这些数据如果不经过加工，几乎不可能满足业务的需要，所以这里就要提到<strong>数据仓库</strong>。在BI工具中，可视化的数据来源于<strong>数据集</strong>（你可以理解为一张满足业务方一处分析需求，涵盖其所有指标、维度的数据表），而数据集就是直接引用或聚合计算数据仓库内的数据表。</p>
<p>再说一说数据仓库内的数据表，或许你也听过ods、dwd、dws、adm这些数仓层级结构，其实除了这些技术性的内容，数据仓库还有一点需要了解：其需要数据仓库工程师<strong>按照业务结构创建</strong>。而在企业的实际工作场景下，工程师创建数据仓库则依赖于数据产品整理的数据映射表（又称<strong>datamapping</strong>，即将某业务中指标[含指标定义]、维度[指标按照该字段聚合查看]关联的表格）通过系统已有的数据整理并建模（数据映射表里的指标可能需要通过多张表的字段，通过复杂的数学计算得到），完成一张或多张满足分析需求的数据表存储在数据仓库里。</p>
<p><img data-action="zoom" class="rich_pages wxw-img aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/08/zm5YvV034p72avMmFYoY.png" referrerpolicy="no-referrer"></p>
<h3>2. 将数据图表化的能力</h3>
<p>这里我们数据可视化产品来制作仪表盘的实现方式为例，这里能力有两部分：一部分是后端能力，另一部分是前端能力。体验过 Tableau 或者相似产品的朋友应该清楚创建仪表盘的整个过程：</p>
<p><img data-action="zoom" class="rich_pages wxw-img aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/08/hvS14mpHV01zfgJwIKTw.png" referrerpolicy="no-referrer"></p>
<p>通过该过程就可以明显的看出“数据连接”、“生成数据集”就是<strong>后端能力</strong>的一部分，<strong>数据连接</strong>，即通过 JDBC 等接口将数据库（含数据仓库）与我们的数据可视化产品连接起来，这是生成数据集的前提条件。<strong>生成数据集</strong>，即为了满足后面的可视化需要，通过数据查询语言（一般是 sql 语言）将连接的数据库内的一张或多张数据表聚合生成一张大宽表（里面包含分析需要的指标、维度，与数据产品之前整理的数据映射表字段一致，或者是其子集）。既然需要创建仪表盘，一定是业务经常需要的查看的，所以这里的数据一定要保证能够随着时间而进行周期性的更新，这里就得提到<strong>调度模块</strong>了。所谓调度，就是通过任务执行的定时设置，来实现数据集的定时更新。</p>
<p>“创建图表和仪表盘”就是<strong>前端能力</strong>了，即将后端传来的数据在图标上展示出来。一些大公司或者专业的可视化系统企业会自己开发自己的<strong>图表组件</strong>，如 Tableau 。而国内的百度（Echart）、阿里（AntV）也开源了自己的图表组件，前端同学可以此二次开发实现可视化展示。</p>
<h2 id="toc-2">二、如何更好的数据服务？数据可视化产品的确定性</h2>
<h3>1. 加载速率</h3>
<p>数据产品与那些诸如 C 端、系统后台产品等在数据侧的最大不同点就是<strong>数据量的多少</strong>，有时候一张数据看板需要查询的数据就可能有上亿条数据。用户愿意等多久才不会躁动？数据查询执行时间是否超出公司系统的限制？这时候数据加载的时长就要受到用户、甚至系统的限制了。</p>
<p>为了提升加载速率，第一步通常是跟业务侧的同学沟通，把没有的分析砍掉来<strong>减少初始的数据量</strong>，如按日方式的细粒度查询方式能否改成按周/月的高汇总度的查询，来减少数据存储（不过，通过这种方式成功的可能性也不高）。第二步就得从数据侧入手了，如果非点查询而是<strong>汇总查询</strong>（举个例子，有10w用户，我需要随机展示单个用户的标签信息，这就是点查询。如果我只看这10w用户整体的标签信息分布，这就是汇总查询），那我们可以把<strong>数据存储在 clickhouse</strong> 里，在汇总查询下速率会更快。那如果是点查询，可以将 Spark 替换 MR 来操作数据集，这样查询效率更快但是内存消耗也越大，所以财大气粗的公司可以多买一些计算资源。第三步就要从<strong>看板设计</strong>侧入手了，比如在时间筛选器中限制日期的跨度选择，也可以将一张仪表盘的图表数量减少，来降低单张看板查询的时间（后面有机会再单独介绍一下单张看板的设计）。</p>
<h3>2. 数据准确性</h3>
<p>经常看一些数据报告的朋友应该清楚，比结论更重要的就是数据准确定，如果数据都不准确那得到的结论就一点价值都没了，数据可视化产品亦要遵守此规则。这里的数据准确性并非仅狭义里指的<strong>数据是否错误</strong>，还包括<strong>数据是否正常执行</strong>（如果因为数据无法生产，我昨日的数据对的不是昨日，而是前天的数据，那这也是一种错误）、<strong>数据是否出现异常</strong>（如出现空值等）、<strong>数据是否存在二义性</strong>（也可以称为数据孤岛，就是相同的指标在不同的业务部门数据源是否一致？规则是否一致？如果这些都不能保证，那不同的业务部门就被不能很好的交流了）。</p>
<p>数据错误、数据异常、数据执行中断可以通过调度系统里的监控模块进行监控，数据产品经理也可以给大数据开发工程师提供一些方案，如出现空数据、空值，或者相关指标与前一次执行的数据结果差异变化超过某个阈值，就会提醒相应的数仓同学来确认一下问题。针对一些画像标签数据，还可以采用数据注入的方式来验证一下画像标签是否准确。</p>
<p>数据二义性就需要数据仓库工程师统一管理公司所有业务线的数据，保证相同的指标其数据源、口径都是一致的。另一方面，这样做也可以有助于一些指标在公司范围内进行推广。</p>
<p>今天就说到这里，如果内容对你有帮助的话，欢迎分享或收藏。如果你有其他的观点欢迎在下方留言讨论~</p>
<h3>#专栏作家#</h3>
<p>兮兮，微信公众号：孤身旅人（ID：gushenlvren），人人都是产品经理专栏作家。关注人工智能、toB产品、大文娱等领域。</p>
<p>本文原创发布于人人都是产品经理。未经许可，禁止转载。</p>
<p>题图来自 Unsplash，基于 CC0 协议</p>
<div class="support-author"><div class="support-title">给作者打赏，鼓励TA抓紧创作！</div><button class="button--pay" data-post-id="5080271" data-author="122520" data-avatar="http://image.woshipm.com/wp-files/2018/10/kUlDQ7SJodEY0J5mwdCF.jpeg"><svg width="13" height="16" class="svgIcon--use" viewBox="0 0 13 16"><path d="M9.113,4.571 C9.951,3.771 10.895,2.742 10.685,2.057 C10.475,1.485 10.056,0.799 9.427,0.571 C8.903,0.342 8.379,0.456 7.750,0.799 C7.540,0.342 7.016,0.114 6.596,-0.001 C5.863,-0.001 5.234,0.228 4.814,0.914 C4.080,0.571 3.451,0.685 2.927,1.028 C2.613,1.256 2.298,1.713 2.298,2.628 C2.298,3.542 3.137,4.228 3.766,4.685 C2.508,5.599 -0.218,7.885 -0.008,12.228 C-0.218,15.656 2.613,15.999 2.613,15.999 L10.371,15.999 C11.314,15.885 12.991,14.971 12.991,12.571 L12.991,12.228 C13.201,7.771 10.371,5.371 9.113,4.571 L9.113,4.571 ZM8.932,11.835 L6.940,11.835 L6.940,13.207 C6.940,13.435 6.731,13.549 6.521,13.549 C6.311,13.549 6.102,13.435 6.102,13.207 L6.102,11.835 L4.110,11.835 C3.900,11.835 3.795,11.606 3.795,11.378 C3.795,11.149 3.900,10.921 4.110,10.921 L6.102,10.921 L6.102,10.121 L4.949,10.121 C4.739,10.121 4.634,9.892 4.634,9.664 C4.634,9.435 4.739,9.206 4.949,9.206 L5.892,9.206 L4.739,7.950 C4.634,7.835 4.739,7.606 4.949,7.492 C5.158,7.378 5.368,7.264 5.473,7.378 L6.521,8.635 L7.674,7.264 C7.779,7.149 7.989,7.264 8.198,7.378 C8.408,7.492 8.408,7.721 8.408,7.835 L7.150,9.321 L8.094,9.321 C8.303,9.321 8.408,9.549 8.408,9.778 C8.408,10.007 8.303,10.235 8.094,10.235 L6.940,10.235 L6.940,11.035 L8.932,11.035 C9.142,11.035 9.247,11.264 9.247,11.493 C9.247,11.606 9.037,11.835 8.932,11.835 L8.932,11.835 Z"/></svg>
赞赏</button></div>                      
</div>
            