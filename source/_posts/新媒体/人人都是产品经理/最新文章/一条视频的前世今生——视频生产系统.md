
---
title: '一条视频的前世今生——视频生产系统'
categories: 
 - 新媒体
 - 人人都是产品经理
 - 最新文章
headimg: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/03/QeYorVclCRsAwfKPL5xh.jpg'
author: 人人都是产品经理
comments: false
date: Wed, 09 Mar 2022 00:00:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/03/QeYorVclCRsAwfKPL5xh.jpg'
---

<div>   
<blockquote><p>编辑导语：短视频目前十分受用户的欢迎，在未来的视频大时代里，能够很好运用视频生产工具，也是个不错的技能。本文分析了视频生产系统的前世今生，详细的介绍了视频生产系统的知识点，希望可以给你带来帮助。推荐对视频生产系统感兴趣的用户阅读。</p></blockquote>
<p><img data-action="zoom" class="size-full wp-image-5347663 aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/03/QeYorVclCRsAwfKPL5xh.jpg" alt width="900" height="420" referrerpolicy="no-referrer"></p>
<h2 id="toc-1">一、视频的构成</h2>
<h3>1. 视频构成</h3>
<p>在线视频通常是由两部分构成即画面和音频两个部分，画面部分是我们通常看到的视频画面和字幕，音频部分我们称之为音轨。以上这三个便是视频的基本组成要素。</p>
<p>在线视频相对于本地视频而言，由于多了线上播放的属性，因此会对视频本身增加如防盗版、流畅性、播放属性的说明文件，通过说明文件的指导才能让线上播放器完成基本的播放过程。</p>
<ul>
<li>防盗版使用的说明文件：在目前版权意识越发成熟的今天，如Netflix等网站会对视频进行加密处理，通过将视频切割成一个个拆条内容，在生产出来一份播放顺序说明，播放器会根据播放说明中的排序进行每个拆条内容的加载。</li>
<li>播放说明：对于某些特殊形式的视频（如19年在国内开始火热的互动视频），整体组成的形式便是一个播放说明书+一堆视频组成的形式，这个时候在生产的过程中需要对生产侧生产视频播放说明书，这样在用户消费时，播放器才能知道用户互动的过程中需要出现什么互动选项，各选项对应的视频是什么。</li>
</ul>
<p>因此在线视频主要的组成部分是两大部分，其一是音视频本身，其二是播放说明。</p>
<h3>2. 编码概念</h3>
<p>这里的编码主要讲述的是视频编码，编码主要是通过合成压缩技术，将原始文件按照工程文件的要求，先将多个音视频素材合成为一个视频，再通过文件转换的方式将原视频压缩成新视频（包含格式、帧率、清晰度、音频等信息）。</p>
<p>在线视频在视频合成完成以后，由于前文提到的版权保护因素，所以会再次切割成很多小段混乱排序，同时需要生产出来一份播放说明书，用以视频播放。</p>
<p>同时由于国际化逐步拓展，用户对于视频质量需要日益显著，因此为了能够让播放器播放多语言的音轨和字幕，编码还需要对字幕、音频进行重新的编码。</p>
<h3>3. 主流编码标准</h3>
<p>这里的主流编码标准主要是针对于在线视频中的视频、音频、字幕进行梳理。</p>
<ul>
<li>视频编码标准：我们常见的如.avi、MPEG、MKV、IMAX等均是常见的视频编码方式，伴随着在线视频发展，厂商为了提供播放流畅度更高且占用带宽更少的视频格式，VP X、H26L（当前主流是H265、H264标准）等在线视频标准逐步走上舞台，这种方式的视频恰好满足了在线视频4大需求：</li>
<li>开播快</li>
<li>流畅度高</li>
<li>低带宽成本</li>
<li>防盗版</li>
</ul>
<p>音频编码标准：通常情况下，音频编码在在线视频领域中主要应用于存在独立音轨的情况，一般为了提供用户接近于影院感受的消费体验和在多语言版本视频应用中降低整体编码成本。我们常见的音频文件编码通常分为4维度</p>
<ul>
<li>音频流的码率=采样率值×采样大小值×声道数 bps</li>
<li>采样率：通常文件采样率多为44.1KHz</li>
<li>采样值：根据编码方式有特定的采样值，一般情况下CD的采样值为16bit的采样大小。</li>
<li>声道数：一条音轨中含有多少个声道，声道可以具像化理解为印象有多少个发音单元，其中每个发音单元播放音轨中一条声道。因此说，声道数越多，声音的立体感越丰富。</li>
</ul>
<p>字幕编码标准：字幕通常情况下需要进行编码的有两种情况，其一是识别字幕并将字幕压制进视频画面内；其二是作为独立外挂字幕文件存在。</p>
<p>通常情况下，正常字幕制作基本上srt格式基本满足需求，如果遇到高规则字幕（如综艺出现的花字）则需要ass格式的字幕文件。</p>
<p>在线视频中，外挂字幕为了防盗版的需求（一般字幕的翻译成本约为影视内容采购成本的10%），外挂字幕在编码环节中会将字幕格式重新进行编码，转变为xml、web_vtt等格式进行用于消费的分发。</p>
<h3>4. 生产流程构建</h3>
<p>让视频生产系统收到原视频视频以后，一般情况下会根据用户消费与运营管理的需求，定义相应的视频生产策略。目前广泛的视频平台中，主要以版权内容和用户内容作为主要区分点。</p>
<h2 id="toc-2">二、版权内容</h2>
<p>版权内容主要是平台版权采购、自制内容，这部分内容制作相对专业，资金投入相对较高，常见的包括如长视频里的电影、电视剧、综艺、动漫、纪录片，短视频中的微剧（如Quibi里面的内容、抖音付费微剧等……）。</p>
<p>这部分内容的盈利模式一般是通过用户付费、广告植入、版权分销三种模型进行盈利，其中用户付费、广告植入总占比超出60%。因此面对这类型的视频，生产需求便需要非常精细灵活以方便提升消费体验扩大付费规模。</p>
<h3>1. 业务需求</h3>
<p>一般情况下，版权内容的制作基本是是由平台编辑进行处理的，因此对于编辑而言，提升制作效率便成为了最大的需求。</p>
<p>面对高昂的内容制作/采购成本，除了提供基础的体验之外，高规格视频的选项和领先于全平台的上线速度便成为了视频付费中的主要生产难点。因此我们可以发现业务对于视频生产的需求主要有以下4点：</p>
<p>从效率上看：</p>
<ul>
<li>视频操作效率高：编辑器要设计合理</li>
<li>视频返工成本低：二次制作保留工程文件、保留广电审核通过的视频……</li>
<li>制作时占用本地资源少：全线上合成</li>
</ul>
<p>从吸引付费角度看：</p>
<ul>
<li>高规格码流：编码标准需要支持高级码流如HDR、HRD10等、需要有一套完整的质量检测环节不断校验是否超越竞品。</li>
<li>高速上线的能力：同样的资源需要优先上线；紧急资源保证按时上线。</li>
</ul>
<h3>2. 场景覆盖</h3>
<p>版权视频由于是内容自制和版权采购的模式，因此视频在整体的视频生产中主要设计的场景有以下5点：</p>
<ol>
<li>视频入库：一般是两种入库场景，其一是片方给出视频文件入库；其二是平台购买直播版权直播过程中进行收录，直播结束后上线。</li>
<li>视频处理：内部编辑会根据广电要求进行合规剪辑制作，通过线上或本地化操作，将可以使用的视频文件提交到多码流生产系统。</li>
<li>多码流、音轨、字幕生产：在消费端我们可以切换语言、字幕、清晰度等版本。</li>
<li>质量审核：由于视频主要是用于吸引用户付费，因此上线的视频需要经过质量审核才能完成上线观看。</li>
<li>质量评定：一般通过通用型算法对视频内容进行分析得到相对准确的综合分数，再通过人工质量检测的方式对现有编码服务进行提升。同时获取竞品视频内容加以比对分析。</li>
</ol>
<h3>3. 流程建设</h3>
<p>结合以上场景和业务需求，我们可以发现从视频入库角度而言直播收录和片方共计是两种模式，后续的视频处理；多码流、音轨、字幕生产可以按照一套流程（字幕稍微存在一点区别）、质量审核和质量评定也是可以通过一套流程进行。</p>
<p>因此在流程设计中可以将视频处理、视频生产、质量审核、质量评定抽象为通用流程，同时将直播收录方式入库的视频进行特殊的处理。</p>
<p>通用流程：</p>
<p>根据业务需求和场景覆盖，我们可以清楚了解到在视频整体入库制作环节中，需要的关键路径包含视频、音频、字幕三类的流程建设。如我们线上看到Netflix视频成产流程可参考如下流程图：</p>
<p>视频流程：</p>
<p><img data-action="zoom" class="aligncenter" src="https://image.yunyingpai.com/wp/2022/03/kXui3d8ezLbx8tp6LXfm.jpg" alt width="508" height="1000" referrerpolicy="no-referrer"></p>
<p>直播收录入库：</p>
<p><img data-action="zoom" class="aligncenter" src="https://image.yunyingpai.com/wp/2022/03/RXTvYqImiAjuVN7yzpG2.jpg" alt width="478" height="500" referrerpolicy="no-referrer"></p>
<p>流程结合：</p>
<p><img data-action="zoom" class="aligncenter" src="https://image.yunyingpai.com/wp/2022/03/SIBmJr7HvgJ1fGLNmEGW.jpg" alt width="500" height="440" referrerpolicy="no-referrer"></p>
<p>在原有基础上增加直播收录入库编码流程。</p>
<h3>4. 用户内容</h3>
<p>用户内容主要解释为用户自行生产的内容，包括常见的直接拍摄、套用魔法表情拍摄、剪辑制作等。这些内容一般为纯UGC平台的内容主题，也可以成为PPC平台的内容补充。</p>
<p><strong>（1）用户需求</strong></p>
<p>对于生产系统而言，用户需求相对比较明确即生产质量高、上线速度快这两点。</p>
<ol>
<li>生产质量：用户希望色彩、清晰度等线上发布的版本高于本地预览的版本。由于带宽等费用影响，因此通常情况下在编码环节会对视频进行一定的压缩，质量上在经过压缩以后尽量保持与原视频相差不多，整体消费体验接近于原视频。对于用户自行生产的视频，由于用户制作难度、线上系统成本考量，通常情况下用户视频不会考虑做外挂字幕、多音轨等。</li>
<li>上线速度：用户视频上传到发布需要经过线上生产、安全审核两个关键环节。由于目前安全审核均为在线审核，因此在生产环节需要迅速生产出来一路极速视频码流（现在通常是720p，有时候会有360p替代）进入到机器审核再过渡到人工审核。</li>
</ol>
<p><strong>（2）成本核算</strong></p>
<p>通常情况下，平台在面对用户自主上传视频会进行成本核算。视频上传、生产、分发、消费中主要的成本在于带宽成本及服务器编解码成本。</p>
<p>通常情况下，需要用户arpu>天均每条视频的成本（主要是带宽+存储+编码）。通过这样的方式，可以计算出通用视频编解码标准，在面对大up主的情况，因为大up视频内容提供的价值更高，所以往往会提供如HDR、4k等码流生产。</p>
<p><strong>（3）流程建设</strong></p>
<p>由于用户视频相对版权视频而言，对于运营操作、订阅付费没有非常强的需求，因此整体流程会相对简单处理。具体可以参考：</p>
<p><img data-action="zoom" class="aligncenter" src="https://image.yunyingpai.com/wp/2022/03/PkV2XYpOdzY08WiD4612.jpg" alt width="500" height="340" referrerpolicy="no-referrer"></p>
<h2 id="toc-3">三、发布器</h2>
<p>发布器作为平台、用户制作视频的第一步，承担着非常重要的职责。通常情况下发布器做出来的视频内容会被当作原始内容存储在平台中，后续进行二创、多码流转码等操作。</p>
<h2 id="toc-4">四、质量专题</h2>
<p>音视频在编码过程中会经常出现由于压缩导致画面、音频质量变低的问题，因此在整体音视频生产环节中的最后一步就是要关注音画质量问题。</p>
<p>一般况下，质量问题主要会经过2个大步骤，其一是针对于需要用户付费进行观看的版权视频，这部分在上线前需要进行质量审核，其二是所有视频上线以后需要进行质量检测。</p>
<h3>1. 质量审核</h3>
<p>一般情况下需要质量审核通过后才能上线的内容，通常是用户需要付费才能够观看的内容，如爱优腾三家视频网站的会员内容，如抖音的付费课程等等。这部分内容的上线逻辑主要是先生产出来视频平台中可以播放的麻溜，第一步通过算法对视频进行质量分析并给出问题标注，第二步是运营人员会浏览一遍视频，确认ok才会执行上线的操作。</p>
<h3>2. 质量检测</h3>
<p>质量检测的意义在于对已经上线的视频进行音画检测，一般情况下是分为3个步骤，第一步是机器检测，第二步是第一次人工检测，第三步是第二次人工检测。</p>
<p>机器检测主要是针对视频和音频两个方面进行检测，视频视频方面检测的主要涵盖了丢帧、画面马赛克、黑影等、帧率、码率、模糊等，一般情况下各大视频网站有一套共用或者自研的检测算法，如arges分数。音频检测主要是对噪音、卡带音等做相应的检测。</p>
<p>一般视频检测中给出来的位置具体为视频的分、秒、帧；音频检测主要给出来的是分、秒、毫秒。通过机器检测基本可以帮助人工寻找到问题位置，后续人工会根据这些位置进行判断，做进一步处理（重新编码、暂时下线等）。</p>
<h2 id="toc-5">五、主流视频平台生产流程</h2>
<p>在整个流程中，我们可以显著发现，音视频编解码这种底层服务是可以复用的，CDN分发流程也是也可以进行复用。在整体的生产质量检测流程和算法都可以进行复用，为了降低系统建设成本，本着服务复用的原则，那么视频生产流程如下：</p>
<p><img data-action="zoom" class="aligncenter" src="https://image.yunyingpai.com/wp/2022/03/BBSugbNDYokeQgAGSFIy.jpg" alt width="500" height="301" referrerpolicy="no-referrer"></p>
<p>通过以上方式，融合各种业务视频生产场景，后续可以通过上层工具或者平台，兼容新业务拓展。</p>
<p> </p>
<p>作者：大橘子-视频产品，微信公众号：薛慧卿</p>
<p>本文由 @大橘子-视频产品 原创发布于人人都是产品经理，未经许可，禁止转载</p>
<p>题图来自 Unsplash，基于 CC0 协议</p>
<div class="support-author"><div class="support-title">给作者打赏，鼓励TA抓紧创作！</div><button class="button--pay" data-post-id="5346738" data-author="186152" data-avatar="http://image.woshipm.com/wp-files/2021/02/JVTk3InqKKM26VLEAcqM.jpeg"><svg width="13" height="16" class="svgIcon--use" viewBox="0 0 13 16"><path d="M9.113,4.571 C9.951,3.771 10.895,2.742 10.685,2.057 C10.475,1.485 10.056,0.799 9.427,0.571 C8.903,0.342 8.379,0.456 7.750,0.799 C7.540,0.342 7.016,0.114 6.596,-0.001 C5.863,-0.001 5.234,0.228 4.814,0.914 C4.080,0.571 3.451,0.685 2.927,1.028 C2.613,1.256 2.298,1.713 2.298,2.628 C2.298,3.542 3.137,4.228 3.766,4.685 C2.508,5.599 -0.218,7.885 -0.008,12.228 C-0.218,15.656 2.613,15.999 2.613,15.999 L10.371,15.999 C11.314,15.885 12.991,14.971 12.991,12.571 L12.991,12.228 C13.201,7.771 10.371,5.371 9.113,4.571 L9.113,4.571 ZM8.932,11.835 L6.940,11.835 L6.940,13.207 C6.940,13.435 6.731,13.549 6.521,13.549 C6.311,13.549 6.102,13.435 6.102,13.207 L6.102,11.835 L4.110,11.835 C3.900,11.835 3.795,11.606 3.795,11.378 C3.795,11.149 3.900,10.921 4.110,10.921 L6.102,10.921 L6.102,10.121 L4.949,10.121 C4.739,10.121 4.634,9.892 4.634,9.664 C4.634,9.435 4.739,9.206 4.949,9.206 L5.892,9.206 L4.739,7.950 C4.634,7.835 4.739,7.606 4.949,7.492 C5.158,7.378 5.368,7.264 5.473,7.378 L6.521,8.635 L7.674,7.264 C7.779,7.149 7.989,7.264 8.198,7.378 C8.408,7.492 8.408,7.721 8.408,7.835 L7.150,9.321 L8.094,9.321 C8.303,9.321 8.408,9.549 8.408,9.778 C8.408,10.007 8.303,10.235 8.094,10.235 L6.940,10.235 L6.940,11.035 L8.932,11.035 C9.142,11.035 9.247,11.264 9.247,11.493 C9.247,11.606 9.037,11.835 8.932,11.835 L8.932,11.835 Z"/></svg>
赞赏</button></div>                      
</div>
            