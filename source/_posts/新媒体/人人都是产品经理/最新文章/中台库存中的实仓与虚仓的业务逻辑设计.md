
---
title: '中台库存中的实仓与虚仓的业务逻辑设计'
categories: 
 - 新媒体
 - 人人都是产品经理
 - 最新文章
headimg: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/10/MHxngrNSjFs0F1Qc3ead.jpg'
author: 人人都是产品经理
comments: false
date: Tue, 19 Oct 2021 00:00:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/10/MHxngrNSjFs0F1Qc3ead.jpg'
---

<div>   
<blockquote><p>编辑导语：实仓与虚仓是针对系统开发而言的，在商城中台库存管理，实仓与虚仓的业务逻辑该怎么设计？作者从以下几个方面来分析二者之间的关系，并总结了一些需要注意的问题，一起来看看。</p></blockquote>
<p><img data-action="zoom" class="size-full wp-image-5181716 aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/10/MHxngrNSjFs0F1Qc3ead.jpg" alt width="900" height="420" referrerpolicy="no-referrer"></p>
<p>实仓和虚仓的概念是针对系统开发本身而言的。简单来说，核算成本的仓库可以称之为实仓，不核算成本的可称之为虚仓。虚仓在系统中主要过渡的作用。</p>
<p>在中台系统中，虚仓即等于库存的分配池，在同个仓库组中单个商品的库存，实仓库存之和=虚仓库存之和。</p>
<p>那么在商城中台库存管理中，实仓与虚仓的业务逻辑该怎么设计呢？需要考虑以下问题：</p>
<h2 id="toc-1">一、如何控制各个商店的销售库存（商品职能）</h2>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/10/8dI3g5A5UrF6uXGq551Y.jpg" alt width="785" height="245" referrerpolicy="no-referrer"></p>
<p>场景：实仓a，b，c初始库存都是0，需要为实仓a，b，c都采购100，即需要3个采购入库通知单，实仓分别为a，b，c。</p>
<p>在上述场景中虚仓如何分配库存呢？此时，就需要用到“分配池分配策略”控制库存进入虚仓的比例。</p>
<p>假设3个采购入库通知单都把库存放入虚仓a，此时，实仓a，b，c都有100库存，虚仓a有300库存。</p>
<p>商店x，商店y，商店z同时销售商品，商店x可用分配池范围：虚仓a；商店y可用分配池范围：虚仓b，商店z可用分配池范围：虚仓c。</p>
<p>此时，库存都在虚仓a，商店y和商店z就无货可卖怎么办？在这里需要插入说明“移仓”的必要性，即移仓可以对同个仓库组中的虚仓进行库存调整。</p>
<p>假设从虚仓a，移动50库存到虚仓b，移动20库存到虚仓c，此时，虚仓a库存=230，虚仓b库存=50，虚仓c库存=20。</p>
<p>那是不是意味着商店x可销售库存为230，商店y可销售库存为50，商店z可销售库存为20呢？但事实并不是这样，我们需要制定库存同步策略来控制中台往各个平台同步库存的数量。</p>
<p>假设，商店x，虚仓a同步比例=90%，警戒数=10，保留数=5，此时同步数量=230*0.9=207。销售一段时间之后，虚仓a中库存减少到了10（即到达设置的警戒数），此时同步数量=（可用库存数-保留数）*同步比例=（10-5）*0.9=4.5，扣除小数点，同步平台库存=4；当虚仓a可用数=6时，同步数量=（6-5）*0.9=0.9，小于1，同步平台库存=0。</p>
<h2 id="toc-2">二、实仓与虚仓的对应关系</h2>
<p>实仓与虚仓不是一一对应关系，一个订单适配到一个虚仓库存，发货实仓可能是拥有订单商品的某一个实仓。比如订单购买商品a，实仓a和实仓b都有商品a的库存，订单适配到虚仓a，实仓a和实仓b都有可能发货，中台需要有算法会适配最优（距离最优，物流费用最优等）的实仓发货。</p>
<h2 id="toc-3">三、虚仓的库存调拨</h2>
<p>如果，商店x销量好，可以将虚仓a，b，c设置到商店档案的可用分配池范围中，设置商店x，虚仓b同步比例=90%，警戒数=5，保留数=2，设置商店x，虚仓c同步比例=100%，警戒数=2，保留数=1，同步数量=230*0.9+50*0.9+20*1=272。</p>
<p>举例，现在开一家新店：商店p，可用分配池范围：虚仓e。此时，虚仓e，库存为0，公司又不再采购该怎么办？这里则需要说到调拨，即是将库存从一个实仓调拨到另一个实仓的单据。这需要明确4个点：调出实仓、调入实仓、调出虚仓，以及分配策略（即分配池分配策略）。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/10/6sqnyQ7SC3gSL06Xgvql.jpg" alt width="611" height="489" referrerpolicy="no-referrer"></p>
<h2 id="toc-4">四、货物库存的流通</h2>
<p>对于货物流通而言，中台的实仓=发货门店，采购动作在门店系统（大多数为新零售系统）。</p>
<p>场景假设，实仓a=门店a，实仓b=门店b，实仓c=门店c</p>
<p>门店库存同步到中台，分2种类型：全量和增量。全量：实仓a库存=同步库存；增量：实仓a库存=实仓a当前库存+同步库存。举例：</p>
<p>当前时间实仓a有库存0，全量同步库存100，同步之后，实仓a有库存100；</p>
<p>当前时间实仓a有库存100，增量同步库存50，同步之后，实仓a有库存100+50=150；同理增量同步库存为-50，同步之后，实仓a有库存150+（-50）=150-50=100。</p>
<p> </p>
<p>本文由 @渣渣 原创发布于人人都是产品经理，未经许可，禁止转载</p>
<p>题图来自 Unsplash，基于 CC0 协议</p>
<div class="support-author"><div class="support-title">给作者打赏，鼓励TA抓紧创作！</div><button class="button--pay" data-post-id="5180709" data-author="755624" data-avatar="http://image.woshipm.com/wp-files/2021/04/vHau8U29pPMybqWuh6ZH.jpg"><svg width="13" height="16" class="svgIcon--use" viewBox="0 0 13 16"><path d="M9.113,4.571 C9.951,3.771 10.895,2.742 10.685,2.057 C10.475,1.485 10.056,0.799 9.427,0.571 C8.903,0.342 8.379,0.456 7.750,0.799 C7.540,0.342 7.016,0.114 6.596,-0.001 C5.863,-0.001 5.234,0.228 4.814,0.914 C4.080,0.571 3.451,0.685 2.927,1.028 C2.613,1.256 2.298,1.713 2.298,2.628 C2.298,3.542 3.137,4.228 3.766,4.685 C2.508,5.599 -0.218,7.885 -0.008,12.228 C-0.218,15.656 2.613,15.999 2.613,15.999 L10.371,15.999 C11.314,15.885 12.991,14.971 12.991,12.571 L12.991,12.228 C13.201,7.771 10.371,5.371 9.113,4.571 L9.113,4.571 ZM8.932,11.835 L6.940,11.835 L6.940,13.207 C6.940,13.435 6.731,13.549 6.521,13.549 C6.311,13.549 6.102,13.435 6.102,13.207 L6.102,11.835 L4.110,11.835 C3.900,11.835 3.795,11.606 3.795,11.378 C3.795,11.149 3.900,10.921 4.110,10.921 L6.102,10.921 L6.102,10.121 L4.949,10.121 C4.739,10.121 4.634,9.892 4.634,9.664 C4.634,9.435 4.739,9.206 4.949,9.206 L5.892,9.206 L4.739,7.950 C4.634,7.835 4.739,7.606 4.949,7.492 C5.158,7.378 5.368,7.264 5.473,7.378 L6.521,8.635 L7.674,7.264 C7.779,7.149 7.989,7.264 8.198,7.378 C8.408,7.492 8.408,7.721 8.408,7.835 L7.150,9.321 L8.094,9.321 C8.303,9.321 8.408,9.549 8.408,9.778 C8.408,10.007 8.303,10.235 8.094,10.235 L6.940,10.235 L6.940,11.035 L8.932,11.035 C9.142,11.035 9.247,11.264 9.247,11.493 C9.247,11.606 9.037,11.835 8.932,11.835 L8.932,11.835 Z"/></svg>
赞赏</button></div>                      
</div>
            