
---
title: '从0到1搭建B端账务系统'
categories: 
 - 新媒体
 - 人人都是产品经理
 - 最新文章
headimg: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/12/Dd0gvdLcn4mKgN6GXquj.jpg'
author: 人人都是产品经理
comments: false
date: Mon, 13 Dec 2021 00:00:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/12/Dd0gvdLcn4mKgN6GXquj.jpg'
---

<div>   
<blockquote><p>编辑导语：账务系统的搭建在实践中并没有标准统一的方法，需要依据每家公司的实际情况进行评估，并灵活地搭建。账务系统是用于会计核算，并处理账务的一个系统。本文阐述如何从0到1搭建B端账务系统，一起来看看。</p></blockquote>
<p><img data-action="zoom" class="size-full wp-image-5249860 aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/12/Dd0gvdLcn4mKgN6GXquj.jpg" alt width="900" height="420" referrerpolicy="no-referrer"></p>
<p>我们知道账务系统是用会计核算的理念来设计，生成、记录并处理账务，提供账户余额、授信的系统。本文阐述的账务系统集中在对外部账（即客户账）的实时处理。</p>
<p>账务系统的搭建在落实到实践的过程中，并没有标准统一的方法，需要根据公司本身的业务以及需要达到的目的灵活地搭建。</p>
<h2 id="toc-1">一、理解业务</h2>
<p>笔者是做海外面向B端发卡业务的，我们把具体的业务抽象出来这边做个简单汇总，方便我们接下来分析怎么去搭建账户系统，读者在实践中同样要完整地理解自己公司的业务后再去制定方案。</p>
<h3>1. 发卡</h3>
<p>我们会向企业发卡，卡类型有借记卡和信用卡，每家公司支持发多卡。借记卡不可透支，每张卡有单独的余额，消费金额不可超过卡片余额；信用卡可透支，向一家公司下发的所有信用卡共享公司授信的总额度。</p>
<h3>2. 入账</h3>
<p>借记卡充值或信用卡还款。</p>
<h3>3. 消费</h3>
<p>持卡人持借记卡或信用卡消费。</p>
<h3>4. 转账</h3>
<p>分两种，一种是借记卡卡内余额转到同公司的另一张借记卡，再有就是借记卡余额转出到外部。</p>
<h3>5. 其他</h3>
<p>除以上的大家经常需要处理的业务外，不同公司会有不同的业务场景，但实践过程中基本都可以参照以上的场景的账务处理逻辑。如果业务场景中需要用到账户冻结，或账户内金额/额度冻结，自行增加即可，本文不会再详细展开。</p>
<h2 id="toc-2">二、账户&分录</h2>
<p>充分了解了公司业务后，我们就可以着手制定我们的账户和分录。</p>
<h3>1. 账户</h3>
<p>对标会计科目，账户会更细分指定到每个具体客户，即科目和账户的关系为一对多的关系。由于账务系统通常更关心外部账（即用户账），所以我们需要的科目并不多，我们先讨论最基本的：银行存款、用户存款、客户授信。</p>
<p>因为上面我提到过，我们的业务是每张借记卡有独立的余额，而信用卡则是一家企业公用一个授信额度，仅仅是通过卡的介质把额度消费掉。那么我们可以建立科目和账户的对应关系如下：</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/12/wjjwtNB2qmGICICmsiqW.png" alt width="734" height="161" referrerpolicy="no-referrer"></p>
<h3>2. 分录</h3>
<p>我们按照上面抽象出来的业务逐个看下分录怎么做：</p>
<p><strong>（1）发卡</strong></p>
<p>向企业下发借记卡：不需要记录分录，但是需要在发卡前建立好这张借记卡对应的账户。账户的命名方式各种各样，有时候为了更好从业务角度理解账户名，我们可以建一些规则，比如第一个字节用1表示借记卡，第二个字节用1表示特定的发卡行等等，都可以根据大家自己的喜好来命名。</p>
<p>向企业下发信用卡：不需要记录分录，但是需要在给予公司授信前建立好该公司总授信额对应的账户。</p>
<p><strong>（2）入账</strong></p>
<p>借记卡充值：</p>
<ul>
<li>借：银行存款</li>
<li>贷：用户存款（充值的借记卡）</li>
</ul>
<p>信用卡还款：</p>
<ul>
<li>借：银行存款</li>
<li>贷：客户授信（还款的企业）</li>
</ul>
<p><strong>（3）消费</strong></p>
<p>持卡人持借记卡消费：</p>
<ul>
<li>借：用户存款（消费的借记卡）</li>
<li>贷：发卡行备付金账户</li>
</ul>
<p>持卡人持信用卡消费：</p>
<ul>
<li>借：客户授信（消费的信用卡所属公司的授信账户）</li>
<li>贷：发卡行备付金账户</li>
</ul>
<p><strong>（4）转账</strong></p>
<p><strong>内部转账</strong>：卡内余额同公司内转账：</p>
<ul>
<li>借：用户存款（转账的借记卡）</li>
<li>贷：用户存款（转入的借记卡）</li>
</ul>
<p><strong>外部转账</strong>：卡内余额转出公司外部，首先扣除用户的借记卡余额。有时候用户的借记卡余额虽然扣除了，但本身转账不一定发生，或者为了业务方便统计转账总金额，我们会引入一个中转账户（对应负债类科目）——待转出账户，当然如果大家业务上不需要，可以不引入。</p>
<ul>
<li>借：用户存款（转账的借记卡）</li>
<li>贷：待转出账户</li>
</ul>
<p>从转账渠道发起转账后：</p>
<ul>
<li>借：待转出账户</li>
<li>贷：转账渠道账户</li>
</ul>
<p><strong>（5）其他</strong></p>
<p>以上四种场景的分录包含了虚拟账户的入账、出账，有业务上的独立账户，也有共享账户，还引入了中间账户，其他的业务场景都可以参照以上的分录来处理。</p>
<h2 id="toc-3">三、后台交互逻辑</h2>
<p>然后我们来看下账务系统怎么跟交易系统合作完成一笔交易。</p>
<p>在B端场景中给卡设置一些限额，或者给卡上锁终止后续交易都是非常常见的，我们要尽量把这些限制和账务系统区分开来，账务系统更关心账户的余额和分录。我们抽象出来有一项服务叫卡中心，卡中心专门负责处理卡状态、商户黑名单、卡限额等逻辑。</p>
<p><img data-action="zoom" class="aligncenter" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2021/12/3esGTKAPkDaLIBCgZMmd.png" alt width="655" height="644" referrerpolicy="no-referrer"></p>
<p>这里先记账后返回交易结果保证了交易与记账的一致性。</p>
<h2 id="toc-4">四、对账</h2>
<p>最后我们来看下对账，下面列的三种应该可以覆盖大家的业务场景了。</p>
<p><strong>（1）外部系统交易对账</strong></p>
<p>与外部系统有定期的核对，保证双方中任务一方不存在比另一方多单或少单。</p>
<p><strong>（2）交易系统与账务系统对账</strong></p>
<p>确保期间内交易系统中所有订单在账务系统中都有对应的分录产生和处理，实践中一般我们会记录每一笔分录，以及处理该分录对应的账户余额的变动。</p>
<p><strong>（3）账务系统内部自查</strong></p>
<p>确保期间内账务系统中每笔分录处理正确。实现方法可以是对所有账户，检查上期余额加上本期发生额是否等于账户期末余额。</p>
<p>以上三项中，第一项一般所有的公司都会有相应的对账策略，第二项和第三项可以酌情考虑是否制定相应的对账策略。</p>
<p> </p>
<p>本文由 @西门吹雪 原创发布于人人都是产品经理，未经作者许可，禁止转载。</p>
<p>题图来自Unsplash，基于CC0协议。</p>
<div class="support-author"><div class="support-title">给作者打赏，鼓励TA抓紧创作！</div><button class="button--pay" data-post-id="5248227" data-author="1164655" data-avatar="http://image.woshipm.com/wp-files/2021/06/wQVQVWENKq8DFRSzhQ9p.jpg"><svg width="13" height="16" class="svgIcon--use" viewBox="0 0 13 16"><path d="M9.113,4.571 C9.951,3.771 10.895,2.742 10.685,2.057 C10.475,1.485 10.056,0.799 9.427,0.571 C8.903,0.342 8.379,0.456 7.750,0.799 C7.540,0.342 7.016,0.114 6.596,-0.001 C5.863,-0.001 5.234,0.228 4.814,0.914 C4.080,0.571 3.451,0.685 2.927,1.028 C2.613,1.256 2.298,1.713 2.298,2.628 C2.298,3.542 3.137,4.228 3.766,4.685 C2.508,5.599 -0.218,7.885 -0.008,12.228 C-0.218,15.656 2.613,15.999 2.613,15.999 L10.371,15.999 C11.314,15.885 12.991,14.971 12.991,12.571 L12.991,12.228 C13.201,7.771 10.371,5.371 9.113,4.571 L9.113,4.571 ZM8.932,11.835 L6.940,11.835 L6.940,13.207 C6.940,13.435 6.731,13.549 6.521,13.549 C6.311,13.549 6.102,13.435 6.102,13.207 L6.102,11.835 L4.110,11.835 C3.900,11.835 3.795,11.606 3.795,11.378 C3.795,11.149 3.900,10.921 4.110,10.921 L6.102,10.921 L6.102,10.121 L4.949,10.121 C4.739,10.121 4.634,9.892 4.634,9.664 C4.634,9.435 4.739,9.206 4.949,9.206 L5.892,9.206 L4.739,7.950 C4.634,7.835 4.739,7.606 4.949,7.492 C5.158,7.378 5.368,7.264 5.473,7.378 L6.521,8.635 L7.674,7.264 C7.779,7.149 7.989,7.264 8.198,7.378 C8.408,7.492 8.408,7.721 8.408,7.835 L7.150,9.321 L8.094,9.321 C8.303,9.321 8.408,9.549 8.408,9.778 C8.408,10.007 8.303,10.235 8.094,10.235 L6.940,10.235 L6.940,11.035 L8.932,11.035 C9.142,11.035 9.247,11.264 9.247,11.493 C9.247,11.606 9.037,11.835 8.932,11.835 L8.932,11.835 Z"/></svg>
赞赏</button></div>                      
</div>
            