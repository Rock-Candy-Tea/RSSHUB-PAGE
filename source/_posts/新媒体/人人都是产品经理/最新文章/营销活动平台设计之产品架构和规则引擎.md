
---
title: '营销活动平台设计之产品架构和规则引擎'
categories: 
 - 新媒体
 - 人人都是产品经理
 - 最新文章
headimg: 'https://image.yunyingpai.com/wp/2021/12/8JaNZeRX9ts45IUXiQhF.jpg'
author: 人人都是产品经理
comments: false
date: Tue, 28 Dec 2021 00:00:00 GMT
thumbnail: 'https://image.yunyingpai.com/wp/2021/12/8JaNZeRX9ts45IUXiQhF.jpg'
---

<div>   
<blockquote><p>编辑导语：站在产品运营的角度，营销活动的重要性不言而喻，那么如何通过平台型的营销设计促进活动增长呢？本文作者依托于产品的核心内容，分析了平台的整体架构以及核心设计中的规则引擎，一起来看看吧！</p></blockquote>
<p><img data-action="zoom" class="size-full wp-image-731291 aligncenter" src="https://image.yunyingpai.com/wp/2021/12/8JaNZeRX9ts45IUXiQhF.jpg" alt referrerpolicy="no-referrer"></p>
<p>前一篇给大家讲了下营销活动平台大概的背景情况，以及在产品建设过程中所遇到的问题。今天这篇文章主要讲下产品核心内容，分为两部分：</p>
<ol>
<li>平台的整体架构</li>
<li>核心设计-规则引擎</li>
</ol>
<h2 id="toc-1">一、平台的整体架构</h2>
<h3>1. 产品架构</h3>
<p>首先说下产品架构，详细的产品架构图考虑包含公司信息，暂不对外。从交互分层来看，营销系统的架构图如下：</p>
<p><img data-action="zoom" class="aligncenter" src="http://image.woshipm.com/wp-files/2021/12/dQs8D7YZ0GBNO9DSiuXW.png" alt width="362" height="284" referrerpolicy="no-referrer"></p>
<p><strong>（1）表现层</strong></p>
<p>主要是前端活动页面。</p>
<p><strong>（2）交互层</strong></p>
<p>主要是活动玩法，例如抽奖、答题等，与参与用户产生交互；也包括触达形式，例如短信、push等。</p>
<p><strong>（3）公共规则层</strong></p>
<p>底层的规则引擎，包括通用的逻辑，条件策略库（判断是否新人、是否已参加活动、完成某特定路径推荐其他内容等）、动作集合库（点击抽奖触发抽奖流程、扫码关注触发等）。</p>
<p><strong>（4）权益层</strong></p>
<p>活动奖品，例如现金红包、视频权益、优惠券等等。</p>
<h3>2. 纵观全局，聚焦核心</h3>
<p>我们都知道，每一个活动链条是由上游的活动目标用户以及下游的权益奖品所形成的闭环。例如新人（活动目标用户）通过落地页引导，参加新人有礼活动，满足条件即发放5元现金红包（权益奖品）。其中还有很多规则处理，例如判断新人条件，活动逻辑，奖品发放接口，与已有支付接口对接，活动数据转化监控等等。整个活动链条的流程很简单，我们也很清楚。</p>
<p>但任何一个产品开始之前，需要思考其上下游，是否构成闭环等，所建设的产品处在哪一环，需要解决哪些问题，也就是上一篇所提到的产品的边界。</p>
<p>该营销活动平台解决的核心：通过活动引擎快速完成活动创建及营销。</p>
<p><img data-action="zoom" class="aligncenter" src="http://image.woshipm.com/wp-files/2021/12/2z09cVrwjPP8KrKWufX3.png" alt width="484" height="243" referrerpolicy="no-referrer"></p>
<p>如上图所示，活动营销平台解决的闭环路径：创建活动-配置活动规则-选择投放渠道-活动数据监控-资产消耗监控-系统性能监控，活动监控数据反哺活动模板设计及系统设计。</p>
<p><strong>（1）活动中心</strong></p>
<p>根据活动需求选择对应的模板，例如九宫格抽奖、签到、答题等。</p>
<p><strong>（2）活动配置</strong></p>
<p>根据活动规则配置本次活动的逻辑，例如抽奖活动：抽奖次数发放、中奖概率、奖品概率、是否关联任务等。</p>
<p><strong>（3）渠道投放</strong></p>
<p>主要是Push、落地页、微信、H5等等。</p>
<p><strong>（4）效果洞察</strong></p>
<p>主要是活动数据统计类，参与人数、参与次数、活动转化用户（漏斗图）、奖品使用转化等。</p>
<p><strong>（5）资损监控</strong></p>
<p>主要用于监控参加用户数与发放奖品数，是否出现超发、漏发情况。</p>
<p><strong>（6）系统监控</strong></p>
<p>比较侧重于系统性能，承载压力，活动峰值点的并发压力监控。</p>
<h3>3. 产品拓展性</h3>
<p>整理清楚产品核心能力，同时就需要考虑到产品可扩展性，也就是我们说的低耦合高内聚。可以大致分为以下两点：</p>
<p><strong>（1）产品上下游结合的能力</strong></p>
<p>上文提到活动上游是用户群体，针对于活动用户，营销活动本身应该支持基础用户管理，例如用户基础信息、参与记录、奖品记录等，这些信息作为规则输入因子，主要用于活动研判逻辑。附加功能可以支持标签用户，用于活动场景分发，针对指定用户群投放活动。</p>
<p>其次是考虑到大客户产品，会保留20%定制化服务。大客户都有自己的用户数据库，且他们的用户数据比我们本身产品所提供的用户管理更加完善，例如有经分系统，大数据用户中心等等。这时我们提供的是通用用户接口，通过接口方式获取活动目标用户群体，由于用户数据比较敏感，大多是客户提供数据接口，我们获取数据，其接口加密方式，用户存储方式是需要强设计的，保证大客户数据敏感性要求。</p>
<p>其实就是产品兼容向上和向下的能力，放在整条营销产品线，活动也只是其中一环。</p>
<p><strong>（2）微服务模块设计</strong></p>
<p>通用型产品也可以通过模块配置组合成不同的产品提供给不同需求的客户群体。相应的，对于各模块的设计要求更高，不仅是产品设计，包括技术设计上，都要求低耦合性。产品侧需要不断去对每一个功能模块做加减法，及时做好产品迭代，及时满足市面上80%的客户需求。技术侧在设计上需要降低各功能及接口之间的强关联性。</p>
<h2 id="toc-2">二、核心设计-规则引擎</h2>
<h3>1. 为什么要做规则引擎</h3>
<p>业务代码中往往包含了大量的case，case by case 到处都是条件的判断和选择，当这些if-else/switch等条件不停增加，代码就开始变得难以维护，同样也会产生以下问题：</p>
<ul>
<li>无法直观表达现有业务逻辑，新人入手困难。</li>
<li>新增&改动逻辑困难，极难扩展；通用处理成本高。</li>
<li>每次变更逻辑时都需要经历一次完整的研发-测试-发布-回测-灰度，效率低成本高。</li>
</ul>
<p><strong>隔离这部分无法避免的业务决策逻辑，让逻辑变得清晰可独立维护。</strong></p>
<h3>2. 规则引擎定义</h3>
<p>抽象业务逻辑判断过程：数据流输入=》按照规则（逻辑判断当黑盒处理）=》输出相应结果、</p>
<p>规则引擎就是通过<strong>接受动态数据流入</strong>，<strong>根据内部的规则</strong>，<strong>得出决策结果的处理器。</strong>以抽离业务逻辑保证其独立维护和动态更新。</p>
<p><strong>输入：</strong>各种条件的具体值，例如用户id、属性值、手机号。</p>
<p><strong>输出：</strong>决策的结果可能是bool（逻辑出的值，ture/false），可能是具体值，这些结果值又可以作为新的一组数据产生决策。</p>
<p>规则引擎服务通常是在核心的规则引擎之上，增加了一些执行时门面服务（门面模式可以用来封装系统的底层实现，隐藏系统的复杂性，提供一组更加简单易用、更高层的接口）、可视化规则创建、多种规则引擎支持、更加系统的规则管理体、调用逻辑流程、附加数据支持等服务。</p>
<p><img data-action="zoom" class="aligncenter" src="http://image.woshipm.com/wp-files/2021/12/Z6sma8vthvRLDFFBaa2A.png" alt width="438" height="331" referrerpolicy="no-referrer"></p>
<h3>3. 规则引擎应用的场景</h3>
<p>通俗来讲，规则引擎就是将重复且标准化的业务场景，抽象成简单或负责的逻辑，通过输入数据，经过规则研判，输出对应结果。</p>
<p>常用的应用场景：风控系统、分发&推荐场景、资金决策场景、数据标签场景、活动场景等等。在这块不一一展开，<strong>我们重点讲一下在活动场景中的应用。</strong></p>
<p><strong>（1）抽奖</strong></p>
<p>不同的人&不同的场景对应不同的奖池（不同的中奖概率、不同的奖品集合），常见玩法：转盘、九宫格、砸金蛋等。</p>
<p><strong>（2）任务</strong></p>
<p>任务领取规则、任务完成指标动态可配（不同的人不同的任务，指标条件可动态配置&组合），常见玩法：答题、游戏类活动。</p>
<p><strong>玩法串联：</strong>事件与用户路径匹配。由源事件匹配所有需要关联（串联）的事件，根据用户参与活动进行时间过滤及部分动态计算得出要触发的事件及对应的触发值。比如：抽奖和任务也可以串联玩法，完成任务获得抽奖次数，增加抽奖概率等。</p>
<p>eg：用户进入活动后【<strong>根据一定规则指派任务，目标用户参与抽奖】</strong>，用户达成<strong>【若干组合指标，满足是当月有消费记录】</strong>后任务完成，由于任务完成<strong>【根据用户已收激励给予用户抽奖机会（几次）或直接奖励，并根据参与状态判断决定是否发放私信留存】，</strong> 用户拿到抽奖机会后进行抽奖<strong>【由于是新用户，将面向现金等奖品池进行抽奖，中奖概率高】，</strong>抽中随机现金奖品，<strong>【根据用户特征计算出用户受用的红包金额-奖品中奖概率】，</strong>发放奖励。</p>
<p>ps：【】内都是可以配置的内容规则。</p>
<p><strong>（3）通用激励模型</strong></p>
<p>不同的用户特征对应不同的激励程度（不同的人在不同的场景下，对于奖励的感知程度都是不同的，例如新用户与老用户奖品）。常见玩法：签到打卡，砍价、拼团。</p>
<p><strong>（4）通用触达模型</strong></p>
<p>差异化文案内容。常见玩法：答题测试、个人年终报告等等。</p>
<p>了解了规则引擎在活动场景的应用，我们平时可以看看常用的活动逻辑，思考是否可以将某个流程规则化。因为产品源于生活。</p>
<p>参考资料：</p>
<p>https://zhuanlan.zhihu.com/p/371831214</p>
<p> </p>
<p>本文由 @SLJwu 原创发布于人人都是产品经理。未经许可，禁止转载。</p>
<p>题图来自 Unsplash，基于CC0协议</p>
<div class="support-author"><div class="support-title">给作者打赏，鼓励TA抓紧创作！</div><button class="button--pay" data-post-id="5254243" data-author="781237" data-avatar="http://image.woshipm.com/wp-files/2018/11/EmfxIdyGYnGI3reNQsPn.jpg"><svg width="13" height="16" class="svgIcon--use" viewBox="0 0 13 16"><path d="M9.113,4.571 C9.951,3.771 10.895,2.742 10.685,2.057 C10.475,1.485 10.056,0.799 9.427,0.571 C8.903,0.342 8.379,0.456 7.750,0.799 C7.540,0.342 7.016,0.114 6.596,-0.001 C5.863,-0.001 5.234,0.228 4.814,0.914 C4.080,0.571 3.451,0.685 2.927,1.028 C2.613,1.256 2.298,1.713 2.298,2.628 C2.298,3.542 3.137,4.228 3.766,4.685 C2.508,5.599 -0.218,7.885 -0.008,12.228 C-0.218,15.656 2.613,15.999 2.613,15.999 L10.371,15.999 C11.314,15.885 12.991,14.971 12.991,12.571 L12.991,12.228 C13.201,7.771 10.371,5.371 9.113,4.571 L9.113,4.571 ZM8.932,11.835 L6.940,11.835 L6.940,13.207 C6.940,13.435 6.731,13.549 6.521,13.549 C6.311,13.549 6.102,13.435 6.102,13.207 L6.102,11.835 L4.110,11.835 C3.900,11.835 3.795,11.606 3.795,11.378 C3.795,11.149 3.900,10.921 4.110,10.921 L6.102,10.921 L6.102,10.121 L4.949,10.121 C4.739,10.121 4.634,9.892 4.634,9.664 C4.634,9.435 4.739,9.206 4.949,9.206 L5.892,9.206 L4.739,7.950 C4.634,7.835 4.739,7.606 4.949,7.492 C5.158,7.378 5.368,7.264 5.473,7.378 L6.521,8.635 L7.674,7.264 C7.779,7.149 7.989,7.264 8.198,7.378 C8.408,7.492 8.408,7.721 8.408,7.835 L7.150,9.321 L8.094,9.321 C8.303,9.321 8.408,9.549 8.408,9.778 C8.408,10.007 8.303,10.235 8.094,10.235 L6.940,10.235 L6.940,11.035 L8.932,11.035 C9.142,11.035 9.247,11.264 9.247,11.493 C9.247,11.606 9.037,11.835 8.932,11.835 L8.932,11.835 Z"/></svg>
赞赏</button></div>                      
</div>
            