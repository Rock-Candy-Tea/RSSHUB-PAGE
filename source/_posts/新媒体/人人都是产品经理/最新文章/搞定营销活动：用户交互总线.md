
---
title: '搞定营销活动：用户交互总线'
categories: 
 - 新媒体
 - 人人都是产品经理
 - 最新文章
headimg: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/04/upf1BPKuEXtFkCxlEBAx.jpg'
author: 人人都是产品经理
comments: false
date: Tue, 12 Apr 2022 00:00:00 GMT
thumbnail: 'https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/04/upf1BPKuEXtFkCxlEBAx.jpg'
---

<div>   
<blockquote><p>编辑导语：在营销活动中，虽然不同玩法的串联可以搭建出一个活动，但是为了更好的用户体验，还应该注意玩法与玩法之间的交互。需要有一个集中的“总线”来负责用户的整体交互，那应该怎么做呢？一起来看一下吧。</p></blockquote>
<p><img data-action="zoom" class="aligncenter size-full wp-image-5391839" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/04/upf1BPKuEXtFkCxlEBAx.jpg" alt width="900" height="420" referrerpolicy="no-referrer"></p>
<p>之前说完了玩法之间的解耦、玩法之间的串联，已经基本解决了功能上50%的问题，基本可以完备地搭建一个活动出来，但是离一个好的活动还是有差距的，主要是对于用户体验上和活动效果方面上，本篇要讲的就是如何从后端角度处理用户参与活动过程中的交互问题。</p>
<p>系统架构设计或功能抽象时，为了扩展性等原因把系统能力进行了割裂，每个玩法都能独立存在，可以动态关联，系统架构设计层面是优秀的。</p>
<p>但这样搭建出来的活动，没整体处理交互反馈的话是有伤用户体验的，一定程度上来说用户感受到的还是一个拼图式的活动，每个玩法处理各自的交互，联动性对用户感知不强烈、玩法和玩法之间的交互可能存在冲突等，整体性不够强。</p>
<p><img data-action="zoom" class="origin_image zh-lightbox-thumb aligncenter" title="搞定营销活动-用户交互总线" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/04/OU78ucM0BwgYWEG2OxgS.jpeg" alt="搞定营销活动-用户交互总线" width="789" height="273" referrerpolicy="no-referrer"></p>
<p>我们整个系统产出的活动应该是完整的而非割裂的，每次定制处理成本又太高，放弃玩法编排就又退回到了原地，所以为了更好的用户交互体验，以及活动交互逻辑开发成本的缩减，我们需要一个集中的“总线”来负责用户的整体交互。</p>
<h2 id="toc-1">一、解决方案</h2>
<h3>1. 问题分析</h3>
<p>交互总线的职责是：“集中处理用户交互过程中的事件反馈，负责交互的整体感”。</p>
<p>对于事件进行分类，按照来源来看主要分为：</p>
<ul>
<li>既定的活动交互规则（玩法自身、玩法间）</li>
<li>运营操作触达</li>
</ul>
<p>按照表现形式可以分为：toast、弹窗、活动内通知、私信、push……</p>
<p>按照时机分又基本可以分为：</p>
<ul>
<li>实时触达（被动接受）</li>
<li>交互时触发（主动触发）</li>
</ul>
<p>本质上这些动作都属于活动同用户间的“互动中的反馈”，我们只需要抓清楚触动的本质就可以啦，然后对于“反馈”出现的场景、形式、时机进行分析，然后归纳抽象就可以了。</p>
<p><img data-action="zoom" class="origin_image zh-lightbox-thumb aligncenter" title="搞定营销活动-用户交互总线" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/04/phi3Qi0SDXLQMOLEKQWQ.jpeg" alt="搞定营销活动-用户交互总线" width="761" height="285" referrerpolicy="no-referrer"></p>
<h3>2. 定位确定</h3>
<p>交互总线集中负责了一个活动对于用户交互过程中的反馈，拿它必然是一个“切面”般的存在，所有交互的反馈都由这里发生。</p>
<p>也就是说，玩法和业务事件总线提供了集成好的功能呈现、交互总线提供了统一的用户交互反馈，这两块围绕用户参与的上下文对用户提供好的用户体验。</p>
<p><img data-action="zoom" class="origin_image zh-lightbox-thumb aligncenter" title="搞定营销活动-用户交互总线" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/04/Jy0s4c9XVVeaMEhCRSo7.jpeg" alt="搞定营销活动-用户交互总线" width="839" height="255" referrerpolicy="no-referrer"></p>
<h3>3. 抽象一下</h3>
<p>先确定上下文：我们是在活动领域处理用户参与时的交互反馈问题，核心的处理的对象是<strong>反馈</strong>，要解决的问题主要是交互过程中反馈不统一、过多or过少、无法集中管理、维护成本相对较高的问题。</p>
<p>对于运营者来说，反馈是一种活动交互规则，需要被配置管理、触发。</p>
<p>对于用户，可以被主动推送，也可以在进入活动的时候主动拉取，然后这些反馈有自己具体的内容，具有不同的表现形式、接受用户，反馈之间存在优先级或者互斥逻辑等等，总体来看反馈可以大致抽象为如下情况：</p>
<p><img data-action="zoom" class="origin_image zh-lightbox-thumb aligncenter" title="搞定营销活动-用户交互总线" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/04/9l3wTpmudTEvfgp06KBM.jpeg" alt="搞定营销活动-用户交互总线" width="566" height="334" referrerpolicy="no-referrer"></p>
<p>所以只需要落地一个能够生成&维护反馈、统一处理反馈之间关系的服务即可。</p>
<h3>4. 运行视图</h3>
<p>先大体看一下整体的运行时视图，后面详细说一下如何完成交互反馈之间的统一处理。</p>
<p><img data-action="zoom" class="origin_image zh-lightbox-thumb aligncenter" title="搞定营销活动-用户交互总线" src="https://cors.zfour.workers.dev/?http://image.woshipm.com/wp-files/2022/04/3iZeKDgojmblSFaAmS2f.jpeg" alt="搞定营销活动-用户交互总线" width="776" height="683" referrerpolicy="no-referrer"></p>
<p>首先交互总线的事件来源可以是某个异步事件，比如说任务完成、助力成功等，还可以是用户的一次点击或者界面打开，再或者运营集中发的触达召回等。</p>
<p>在接收到事件后，我们需要创建事件本身交互反馈及事件相关连的交互反馈，比如说任务完成会有 toast 提示，任务完成后加抽奖机会会有一个刷新动作或者特效。</p>
<p>取到对应的反馈之后，灌到现有 buffer 中，或者直接走后续的流程，然后对事件按照规则进行标准化处理。如果存在 buffer 同当前的其他事件进行合并或者舍弃处理，并同当前的前端交互序列作融合，确定当前 buffer 的最终序列等待被消费。</p>
<p>最终可被消费的序列可以通过 server 长链接主动 push 给用户，或者在用户发生交互时带给用户。</p>
<h3>5. 消费规则</h3>
<p>整个总线的消费规则的维护是整个实现中最复杂的部分，通常消费队列的消费方式可以分为拉取和推送两种。</p>
<p>拉取通常的逻辑是取用户在上次交互和本次交互之间产生的交互的反馈行为，而推送通常为定时&定量的消耗逻辑，并且反馈的消费要支持多维度处理。</p>
<p>比如说只消费某个玩法相关的，只消费本次互动相关的，所以反馈有一个很重要的业务处理特征，这块实现起来可以非常复杂也可以非常简单，主要看面临的业务场景，通常来说活动维度稍微包装一下规则就可以了，并不会膨胀到非常复杂。</p>
<p>举个相对常规的例子大家可以简单的感受一下：</p>
<ul>
<li>消费方式：拉取、推送（定时、定量）、拉取&推送（定时、定量）</li>
<li>特征集合：合并特征、优先级、舍弃标示、反馈标签</li>
</ul>
<p>很多简单的活动是没有很强烈的反馈诉求的，这时候我们只需要一套简单的默认时序规则或者无特殊规则就可以啦。</p>
<p>这部分的规则设计实践和业务场景强相关，我们只要能保证规则能灵活插拔就足够了，有想交流的可以单独细聊。</p>
<h2 id="toc-2">二、 写在最后</h2>
<p>本篇就先暂时写到这里，中间涉及的很多技术细节没有仔细说。</p>
<p>比如 DSL 的定义、文本的生成方式、存储到底是 redis 还是 mysql ，再或者是 SDK 提供服务，还是个 rpc 对外，又或者是 buffer 的计数机制、推送机制、性能和数据一致性保证等等。</p>
<p>可以根据公司的技术选型和业务场景具体来定，有相关疑惑的可以单聊。</p>
<p>本篇描述的思路其实不仅仅是活动场景可以使用，一些通知系统或者触达系统等都是这种思路来处理问题。</p>
<p> </p>
<p>本文由 @邹志全 原创发布于人人都是产品经理。未经许可，禁止转载。</p>
<p>题图来自Unsplash，基于CC0协议。</p>
<div class="support-author"><div class="support-title">给作者打赏，鼓励TA抓紧创作！</div><button class="button--pay" data-post-id="5391188" data-author="1378222" data-avatar="https://static.qidianla.com/woshipm_def_head_1.jpg"><svg width="13" height="16" class="svgIcon--use" viewBox="0 0 13 16"><path d="M9.113,4.571 C9.951,3.771 10.895,2.742 10.685,2.057 C10.475,1.485 10.056,0.799 9.427,0.571 C8.903,0.342 8.379,0.456 7.750,0.799 C7.540,0.342 7.016,0.114 6.596,-0.001 C5.863,-0.001 5.234,0.228 4.814,0.914 C4.080,0.571 3.451,0.685 2.927,1.028 C2.613,1.256 2.298,1.713 2.298,2.628 C2.298,3.542 3.137,4.228 3.766,4.685 C2.508,5.599 -0.218,7.885 -0.008,12.228 C-0.218,15.656 2.613,15.999 2.613,15.999 L10.371,15.999 C11.314,15.885 12.991,14.971 12.991,12.571 L12.991,12.228 C13.201,7.771 10.371,5.371 9.113,4.571 L9.113,4.571 ZM8.932,11.835 L6.940,11.835 L6.940,13.207 C6.940,13.435 6.731,13.549 6.521,13.549 C6.311,13.549 6.102,13.435 6.102,13.207 L6.102,11.835 L4.110,11.835 C3.900,11.835 3.795,11.606 3.795,11.378 C3.795,11.149 3.900,10.921 4.110,10.921 L6.102,10.921 L6.102,10.121 L4.949,10.121 C4.739,10.121 4.634,9.892 4.634,9.664 C4.634,9.435 4.739,9.206 4.949,9.206 L5.892,9.206 L4.739,7.950 C4.634,7.835 4.739,7.606 4.949,7.492 C5.158,7.378 5.368,7.264 5.473,7.378 L6.521,8.635 L7.674,7.264 C7.779,7.149 7.989,7.264 8.198,7.378 C8.408,7.492 8.408,7.721 8.408,7.835 L7.150,9.321 L8.094,9.321 C8.303,9.321 8.408,9.549 8.408,9.778 C8.408,10.007 8.303,10.235 8.094,10.235 L6.940,10.235 L6.940,11.035 L8.932,11.035 C9.142,11.035 9.247,11.264 9.247,11.493 C9.247,11.606 9.037,11.835 8.932,11.835 L8.932,11.835 Z"/></svg>
赞赏</button></div>                      
</div>
            