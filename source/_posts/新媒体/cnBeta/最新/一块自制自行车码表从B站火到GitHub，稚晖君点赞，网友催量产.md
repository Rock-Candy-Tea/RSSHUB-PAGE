
---
title: '一块自制自行车码表从B站火到GitHub，稚晖君点赞，网友催量产'
categories: 
 - 新媒体
 - cnBeta
 - 最新
headimg: 'https://p5.itc.cn/q_70/images03/20210723/3328eb355760465c92565e1efd7305d6.gif'
author: cnBeta
comments: false
date: Fri, 23 Jul 2021 05:44:07 GMT
thumbnail: 'https://p5.itc.cn/q_70/images03/20210723/3328eb355760465c92565e1efd7305d6.gif'
---

<div>   
<strong>民间又有高手“出没”：一位“技术宅”自制的自行车码表在B站火了，短短几天引来 20多万人围观！</strong>速度、距离、时间、卡路里、航向显示的记录功能自不用多提，还可显示经纬度和海拔。<br>
 <p style="text-align: left;">丰色 发自 凹非寺</p><p style="text-align: left;">量子位 报道</p><p style="text-align:center"><img src="https://p5.itc.cn/q_70/images03/20210723/3328eb355760465c92565e1efd7305d6.gif" referrerpolicy="no-referrer"></p><p style="text-align: left;">它还配有 <strong>离线地图</strong>，可显示你的 <strong>实时位置与骑行轨迹</strong>：</p><p style="text-align:center"><img src="https://static.cnbetacdn.com/article/2021/0723/913a36c75522ce9.gif" referrerpolicy="no-referrer"></p><p style="text-align: left;">在汽车、 <strong>高铁</strong>上也能测速！</p><p style="text-align:center"><img src="https://p1.itc.cn/q_70/images03/20210723/f28e81895b264a02a4eea9cffa092b44.gif" referrerpolicy="no-referrer"></p><p style="text-align: left;">切换界面查看电量、骑行记录、GPS定位、传感器等系统数据，相当丝滑：</p><p style="text-align:center"><img src="https://p2.itc.cn/q_70/images03/20210723/05911d57e2d94c8880afbba6842f8bcd.gif" referrerpolicy="no-referrer"></p><p style="text-align: left;">再看细节上， <strong>UI设计</strong>可是比市面上不少码表都要高级！ （佳明：你直接报我身份证得了）</p><p style="text-align: left;">这要是告诉我它是某个大牌而非自制的 （除了壳很明显以外），我可能都信了。</p><p style="text-align: left;">网友们也是纷纷respect，称赞它打爆那些溢价离谱的码表：</p><p style="text-align: left;">“完成度离谱”，是不是很想要链接？</p><p style="text-align: left;">好家伙，连 <strong>稚晖君</strong>都被吸引过来了 （后来佳明也现身评论区“自黑”，见后文）：</p><p style="text-align: left;">诶？ 稚晖君的真·自行车 和这个码表是不是可以搭配使用？</p><p style="text-align:center"><a target="_blank" href="https://static.cnbetacdn.com/article/2021/0723/5097b9b6bf6fe46.png"><img data-original="https://static.cnbetacdn.com/article/2021/0723/5097b9b6bf6fe46.png" src="https://static.cnbetacdn.com/thumb/article/2021/0723/5097b9b6bf6fe46.png" referrerpolicy="no-referrer"></a></p><p style="text-align: left;">除了在B站上很火，这个码表项目也登上了今日GitHub热榜：</p><p style="text-align: left;">而据网友粗略估算这个码表的硬件成本大概 <strong>不到300</strong>，如此优秀的它，是如何DIY出来的呢？</p><p style="text-align: left;">如何DIY一个自行车码表</p><p style="text-align: left;">X-TRACK软件架构示意图如下：由HAL、Framework 和 APP 三层组成，Framework为核心。</p><p style="text-align:center"><img src="https://static.cnbetacdn.com/article/2021/0723/ad2311cf45f9f71.png" referrerpolicy="no-referrer"></p><p style="text-align: left;"><strong>HAL层</strong>负责底层芯片驱动和传感器原始数据获取；</p><p style="text-align: left;"><strong>Framework</strong>又包括三个模块，分别负责图形渲染、页面生命周期管理和消息分发处理。</p><p style="text-align: left;">其中消息框架模块提供数据的分发和处理。</p><p style="text-align: left;">ps. 地图软件为GPXSee。</p><p style="text-align: left;">实现主要有 <strong>7</strong>步：</p><p style="text-align: left;">1、首先是 <strong>硬件设计</strong>。</p><p style="text-align: left;">用AD （Altium Designer）进行PCB板线路设计：</p><p style="text-align:center"><a target="_blank" href="https://static.cnbetacdn.com/article/2021/0723/d85bf664957a598.jpeg"><img data-original="https://static.cnbetacdn.com/article/2021/0723/d85bf664957a598.jpeg" src="https://static.cnbetacdn.com/thumb/article/2021/0723/d85bf664957a598.jpeg" referrerpolicy="no-referrer"></a></p><p style="text-align: left;">电路图和PCB文件也可以在GitHub详细查看。</p><p style="text-align: left;">2、然后就是被大家纷纷夸赞的UI设计：</p><p style="text-align: left;">设计软件是Adobe AI。</p><p style="text-align:center"><a target="_blank" href="https://static.cnbetacdn.com/article/2021/0723/275ae914f40f6c5.png"><img data-original="https://static.cnbetacdn.com/article/2021/0723/275ae914f40f6c5.png" src="https://static.cnbetacdn.com/thumb/article/2021/0723/275ae914f40f6c5.png" referrerpolicy="no-referrer"></a></p><p style="text-align: left;">3、接着在3ds MAX上进行外壳设计：</p><p style="text-align:center"><a target="_blank" href="https://static.cnbetacdn.com/article/2021/0723/cc5c18e118fb740.png"><img data-original="https://static.cnbetacdn.com/article/2021/0723/cc5c18e118fb740.png" src="https://static.cnbetacdn.com/thumb/article/2021/0723/cc5c18e118fb740.png" referrerpolicy="no-referrer"></a></p><p style="text-align: left;">4、再然后就是软件设计了：</p><p style="text-align: left;">编程语言为C++：</p><p style="text-align:center"><a target="_blank" href="https://static.cnbetacdn.com/article/2021/0723/13087f073cf2b88.png"><img data-original="https://static.cnbetacdn.com/article/2021/0723/13087f073cf2b88.png" src="https://static.cnbetacdn.com/thumb/article/2021/0723/13087f073cf2b88.png" referrerpolicy="no-referrer"></a></p><p style="text-align: left;">5、再使用模拟器直接在PC上模拟效果。</p><p style="text-align:center"><img src="https://static.cnbetacdn.com/article/2021/0723/3350a0858e6cb1b.gif" referrerpolicy="no-referrer"></p><p style="text-align: left;">码表的图形界面采用了免费开源的GUI图形库 <strong>LVGL</strong>。</p><p style="text-align: left;">成品使用了许多LVGL提供的基础控件，例如在地图页面的轨迹显示中使用了line控件，地图显示使用了image控件，在表盘页面的页面切换选择，使用了button控件。</p><p style="text-align: left;">6、调试调试，没问题就可进行编译下载。</p><p style="text-align: left;">这里用的是 <strong>Keil</strong>。</p><p style="text-align:center"><a target="_blank" href="https://static.cnbetacdn.com/article/2021/0723/68c784ea59ab374.png"><img data-original="https://static.cnbetacdn.com/article/2021/0723/68c784ea59ab374.png" src="https://static.cnbetacdn.com/thumb/article/2021/0723/68c784ea59ab374.png" referrerpolicy="no-referrer"></a></p><p style="text-align: left;">7、最后，将最终程序烧录到单片机 (AT32F403ACGU7)上运行，再连上ST-Link进行调试。</p><p style="text-align: left;">成功！</p><p style="text-align:center"><img src="https://p2.itc.cn/q_70/images03/20210723/bfe7b93494e543bfb60dfadbc8e27a72.gif" referrerpolicy="no-referrer"></p><p style="text-align: left;"><strong>另外可能很多人不知道</strong>，UP主用的这个AT32系列MCU是 <strong>国产</strong>‍设计 （重庆雅特力），可替代意法半导体STM32F103系列，主频更高、RAM更大。</p><p style="text-align: left;">全部硬件配置如下：</p><p style="text-align:center"><a target="_blank" href="https://static.cnbetacdn.com/article/2021/0723/6dc431cafdef370.png"><img data-original="https://static.cnbetacdn.com/article/2021/0723/6dc431cafdef370.png" src="https://static.cnbetacdn.com/thumb/article/2021/0723/6dc431cafdef370.png" referrerpolicy="no-referrer"></a></p><p style="text-align: left;">内存有 <strong>32GB</strong>，存下一个1GB多的北京地图不是事儿。</p><p style="text-align: left;">另外，除了开头提到的功能以外，它还支持地图缩放、计步功能、导出标准GPX格式的轨迹、RTC自动根据GPS校准、掉电自动保存数据 (JSON格式文件)、不过续航为4小时 (持续工作，始终亮屏)……</p><p style="text-align:center"><a target="_blank" href="https://static.cnbetacdn.com/article/2021/0723/4a62bdb0f70b29f.png"><img data-original="https://static.cnbetacdn.com/article/2021/0723/4a62bdb0f70b29f.png" src="https://static.cnbetacdn.com/thumb/article/2021/0723/4a62bdb0f70b29f.png" referrerpolicy="no-referrer"></a></p><p style="text-align: left;">整个设计的硬件和软件部分都 <strong>已开源</strong>。</p><p style="text-align: left;">连“竞品”佳明都来点赞</p><p style="text-align: left;">怎么样？学会（废）了吗？</p><p style="text-align: left;">不少围观群众觉得这样一个 <strong>UI颜值爆表、功能丰富</strong>的自行车码表如果真的能有厂商合作生产的话，那还有 <strong>佳明</strong>这些产品什么事儿 ？</p><p style="text-align: left;">有人在评论区@Garmin佳明，没想到还真把它引过来了：这下好了， <strong>连“竞品”都给X-TRACK点赞</strong>。</p><p style="text-align: left;">有人还算了一笔账，在某宝按<a data-link="1" href="https://c.duomai.com/track.php?k=iRyUSQzUycwRHdo1Ddm0DZpVXZmkDN2ITPklWYmYDO5IDNy0DZp9VZ0l2cmUmchdHdm92cGJTJjZkMl42Yu02bj5SZy9GdzRnZvN3byNWat5yd3dnRyU" target="_blank">教程</a>买这些<a data-link="1" href="https://microsoft.pvxt.net/Xx07X" target="_blank">配件</a>一共需要 <strong>不到300元</strong>，比佳明上千的价格是便宜不少 （虽然续航能力低一点）。</p><p style="text-align:center"><a target="_blank" href="https://static.cnbetacdn.com/article/2021/0723/a15a163683413be.png"><img data-original="https://static.cnbetacdn.com/article/2021/0723/a15a163683413be.png" src="https://static.cnbetacdn.com/thumb/article/2021/0723/a15a163683413be.png" referrerpolicy="no-referrer"></a></p><p style="text-align: left;"><strong>催量产的网友真的非常非常多</strong>，不过真要商业化的话，除了续航能力，有 <strong>自行车骑行爱好者</strong>认为还需支持ant+、踏频、心率、功率设备的连接、防尘防水等功能，以及考虑现在的屏幕在阳光下的能见度等问题。</p><p style="text-align: left;">不知道未来，X-TRACK还会不会被继续增加或改进呢？</p><p style="text-align: left;">毕竟毕业于 <strong>电子信息专业</strong>的UP主说自己也算半个自行车爱好者。</p><p style="text-align: left;">最后，除了这个梦幻般的自行车码表，他还用STM32自制过智能手表、航模遥控器 （被网友称赞可以直接拿来卖的程度）。</p><p style="text-align:center"><a target="_blank" href="https://static.cnbetacdn.com/article/2021/0723/803281b1c9187a9.png"><img data-original="https://static.cnbetacdn.com/article/2021/0723/803281b1c9187a9.png" src="https://static.cnbetacdn.com/thumb/article/2021/0723/803281b1c9187a9.png" referrerpolicy="no-referrer"></a></p><p style="text-align: left;">视频链接：</p><p style="text-align: left;">https://www.bilibili.com/video/BV1GB4y1K7VV</p><p style="text-align: left;">开源地址：</p><p style="text-align: left;">https://github.com/FASTSHIFT/X-TRACK</p><p style="text-align: left;">软件设计介绍：</p><p style="text-align: left;">https://mp.weixin.qq.com/s/rCtmW7tawr7zRIuMK1l5Iw</p>   
</div>
            