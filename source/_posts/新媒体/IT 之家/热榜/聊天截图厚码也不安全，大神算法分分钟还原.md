
---
title: '聊天截图厚码也不安全，大神算法分分钟还原'
categories: 
 - 新媒体
 - IT 之家
 - 热榜
headimg: 'https://img.ithome.com/newsuploadfiles/2022/2/4c2f354d-ad15-425b-81d3-dda650c38f7b.png'
author: IT 之家
comments: false
date: Thu, 17 Feb 2022 05:21:08 GMT
thumbnail: 'https://img.ithome.com/newsuploadfiles/2022/2/4c2f354d-ad15-425b-81d3-dda650c38f7b.png'
---

<div>   
<p data-vmark="9586">讲个恐怖的故事。早上跟同事在微信闲谈，聊起了一位女同事最近的变化。结果他反手就把文字打上马赛克，截图丢进了群里：</p><p style="text-align: center;" data-vmark="203f"><img src="https://img.ithome.com/newsuploadfiles/2022/2/4c2f354d-ad15-425b-81d3-dda650c38f7b.png" w="1080" h="768" alt="打上马赛克的聊天截图" title="聊天截图厚码也不安全，大神算法分分钟还原" width="1080" height="583" referrerpolicy="no-referrer"></p><p data-vmark="d017">还欠欠儿地补了一刀：“@XXX，他说你坏话了呦~”万万没想到，这位同事气势汹汹地走了过来，竟然直接点出了“秘密文字”的内容。当时的我是这样的：</p><p style="text-align: center;" data-vmark="2a34"><img src="https://img.ithome.com/newsuploadfiles/2022/2/8cf22f75-4841-41fa-a472-8ef3a5fe9374.png" w="448" h="472" alt title="聊天截图厚码也不安全，大神算法分分钟还原" width="448" height="472" referrerpolicy="no-referrer"></p><p data-vmark="15d5">见状，这位老师补充道：</p><blockquote><p data-vmark="03ea">都什么年代了，以为打马赛克我就认不出来了？分分钟还原好吧！</p></blockquote><p data-vmark="d7d1">…… 好奇如我，马上对这个技术展开了一番“调查”。（PS：聊天原图在文末揭晓）</p><h2 data-vmark="6a9a">如何还原打了马赛克的文字？</h2><p data-vmark="2271">还别说，国外一家公司的首席研究员 Dan Petro（下文简称 Dan），这两天就发布了这么一篇帖子。</p><p data-vmark="55ea">他直接点出了重点：</p><blockquote><p data-vmark="6671">打马赛克（像素化），是一种非常不好、不安全，而且会泄露敏感数据的方法。</p></blockquote><p data-vmark="c3fd">为了验证他的说法，Dan 亲自下场写了一个名为 Unredacter 的工具。然后现场演示了一下，这个工具是如何一点一点把打了马赛克的文字还原的：</p><p style="text-align: center;" data-vmark="81bb"><img src="https://img.ithome.com/newsuploadfiles/2022/2/db9e1488-16b5-42c8-96f2-e1ac169c77cf.gif" w="707" h="398" alt="一点一点把打了马赛克的文字还原" title="聊天截图厚码也不安全，大神算法分分钟还原" width="707" height="398" referrerpolicy="no-referrer"></p><p data-vmark="614a">从上面的示例中，不难看出，即便原文打了厚厚的一层马赛克，在这个工具面前依旧像“裸奔”一样。或许你会说，这玩意儿操作起来会很复杂吧？不不不。非常之简单，仅仅是 2 个步骤：</p><ul class=" list-paddingleft-2"><li><p data-vmark="b93a">用 npm install 安装依赖项</p></li><li><p data-vmark="0f6f">用 npm start 来启动</p></li></ul><p style="text-align: center;" data-vmark="c2fe"><img src="https://img.ithome.com/newsuploadfiles/2022/2/4b7e2021-79c0-4103-a6e5-efa677149661.png" w="880" h="488" alt="2 个步骤" title="聊天截图厚码也不安全，大神算法分分钟还原" width="880" height="455" referrerpolicy="no-referrer"></p><p data-vmark="f657">虽然在 Dan 之前，已经有类似的工具存在了，例如 Depix。但一个非常现实的问题就是，Depix 还原的文字，从视觉效果上并不是很好：</p><p style="text-align: center;" data-vmark="f29d"><img src="https://img.ithome.com/newsuploadfiles/2022/2/99877dba-86b7-4993-93d3-e1be80764257.png" w="1080" h="504" alt="Depix" title="聊天截图厚码也不安全，大神算法分分钟还原" width="1080" height="383" referrerpolicy="no-referrer"></p><p data-vmark="8f17">Depix 还原出来的文字，有些地方的还是糊糊的。因此，国外 Jumpsec Lab 的一位研究员指出了这个问题，并且还附上了一道比较有意思的挑战：如果你破解了密码，请联系我们。</p><p style="text-align: center;" data-vmark="9f19"><img src="https://img.ithome.com/newsuploadfiles/2022/2/2ed39783-1c79-4616-83ca-3227e01feca5.png" w="1080" h="153" alt="Depix" title="聊天截图厚码也不安全，大神算法分分钟还原" width="1080" height="116" referrerpolicy="no-referrer"></p><p data-vmark="ffde">这样的挑战便引起了 Dan 极大的兴趣，这也就是他开发 Unredacter 的原因。于是，在 Unredacter 的加持下，Dan 顺利攻破了这项挑战：</p><p style="text-align: center;" data-vmark="4d50"><img src="https://img.ithome.com/newsuploadfiles/2022/2/e62a2928-bbe6-472d-8948-9a5836132ac7.gif" w="600" h="338" alt="Dan 顺利攻破了这项挑战" title="聊天截图厚码也不安全，大神算法分分钟还原" width="600" height="338" referrerpolicy="no-referrer"></p><p data-vmark="43c5">而后 Dan 联系上了这位研究员，在邮件的回复中，也证实了 Dan 的结果是正确的：</p><p style="text-align: center;" data-vmark="941b"><img src="https://img.ithome.com/newsuploadfiles/2022/2/2fc5770a-8d18-4d5c-bbb2-a8d4c59485bc.png" w="1080" h="364" alt="回复邮件" title="聊天截图厚码也不安全，大神算法分分钟还原" width="1080" height="276" referrerpolicy="no-referrer"></p><p data-vmark="3d30">不仅如此，Dan 还介绍说，像类似用涂抹方式来打的马赛克，无论是在 GiMP、Photoshop 或者其它编辑器中，结果都是一样的。因此，他的破解方法应当是具备一定的通用性。</p><p data-vmark="e84e">当然，生活中我们或多或少都会有“打码”的需求，既然马赛克不安全，那有没有更好的方式呢？Dan 对此的答复是：<span class="accentTextColor">用黑色条来遮挡</span>。</p><p style="text-align: center;" data-vmark="66c6"><img src="https://img.ithome.com/newsuploadfiles/2022/2/b5ec0cdc-e4df-4af3-b19b-d7a01c877735.png" w="1080" h="357" alt="用黑色条遮挡" title="聊天截图厚码也不安全，大神算法分分钟还原" width="1080" height="271" referrerpolicy="no-referrer"></p><h2 data-vmark="7f30">还有还原打了马赛克的图片</h2><p data-vmark="e044">其实“还原马赛克”这件事，AI 界早就有所研究。例如杜克大学提出的 PLUSE 便是其中之一，还登顶了 CVPR。但它修复的并不是文字，而是人像，例如：</p><p style="text-align: center;" data-vmark="fb9a"><img src="https://img.ithome.com/newsuploadfiles/2022/2/4a47b58c-70a3-46e1-952c-d5ef197a8ac8.png" w="1080" h="546" title="聊天截图厚码也不安全，大神算法分分钟还原" width="1080" height="415" referrerpolicy="no-referrer"></p><p style="text-align: center;" data-vmark="28f0"><img src="https://img.ithome.com/newsuploadfiles/2022/2/0338e2a5-cf09-463b-bf60-10a395a11d39.png" w="1080" h="541" alt="修复人像" title="聊天截图厚码也不安全，大神算法分分钟还原" width="1080" height="411" referrerpolicy="no-referrer"></p><p data-vmark="c35d">从原理角度来看，它本质上是生成对抗网络 （GAN）。PLUSE 主要是根据模糊的马赛克像素，“画”出新的一张张不存在的人脸，再压缩回马赛克状态跟原图比一比，把相似的版本拿出来展示。</p><p data-vmark="9490">当然，这项技术也并非完美，也有翻车的时候。例如网友就拿马里奥试了试，结果……</p><p style="text-align: center;" data-vmark="4d7f"><img src="https://img.ithome.com/newsuploadfiles/2022/2/9e11a67b-526c-43a3-88ca-a17ff54cc306.png" w="470" h="241" alt="修复马赛克" title="聊天截图厚码也不安全，大神算法分分钟还原" width="470" height="241" referrerpolicy="no-referrer"></p><p data-vmark="c7dc">Emmm…… 这“味道”，不一般。</p><h2 data-vmark="2327">One More Thing</h2><p data-vmark="0218">最后，来揭晓一下开头故事的答案。</p><p style="text-align: center;" data-vmark="ea2d"><img src="https://img.ithome.com/newsuploadfiles/2022/2/3830f4ce-63a6-43f0-879a-5350264be834.png" w="824" h="590" alt="开头故事的答案" title="聊天截图厚码也不安全，大神算法分分钟还原" width="824" height="587" referrerpolicy="no-referrer"></p><p data-vmark="bc32">着实是个惨痛的教训了……</p><p style="text-align: center;" data-vmark="dca7"><img src="https://img.ithome.com/newsuploadfiles/2022/2/b8030ccb-5f9e-44a4-9a19-bb7fb8169eee.gif" w="750" h="394" alt title="聊天截图厚码也不安全，大神算法分分钟还原" width="750" height="394" referrerpolicy="no-referrer"></p><p data-vmark="3f63">项目地址：</p><p data-vmark="ef15"><span class="link-text-start-with-http">https://github.com/bishopfox/unredacter</span></p><p data-vmark="793c">参考链接：</p><p data-vmark="2ed1">[1]<span class="link-text-start-with-http">https://bishopfox.com/blog/unredacter-tool-never-pixelation</span></p><p data-vmark="faca">[2]<span class="link-text-start-with-http">https://labs.jumpsec.com/can-depix-deobfuscate-your-data/</span></p><p data-vmark="11dc">[3]<span class="link-text-start-with-http">https://arxiv.org/abs/2003.03808</span></p>
          
</div>
            