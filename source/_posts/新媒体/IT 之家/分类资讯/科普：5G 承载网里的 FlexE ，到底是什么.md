
---
title: '科普：5G 承载网里的 FlexE ，到底是什么'
categories: 
 - 新媒体
 - IT 之家
 - 分类资讯
headimg: 'https://img.ithome.com/newsuploadfiles/2021/7/6bb4faf7-f0a2-4e6d-933c-5f7683192a4c.png'
author: IT 之家
comments: false
date: Fri, 30 Jul 2021 08:42:28 GMT
thumbnail: 'https://img.ithome.com/newsuploadfiles/2021/7/6bb4faf7-f0a2-4e6d-933c-5f7683192a4c.png'
---

<div>   
<p>进入 5G 时代，我们学习传输网知识，经常会看到“Flex”这个前缀。比如说，FlexE、FlexO、FlexHaul、Flex Grid、FlexXXX……</p><p>那么，Flex 到底是什么意思？</p><p><img src="https://img.ithome.com/newsuploadfiles/2021/7/6bb4faf7-f0a2-4e6d-933c-5f7683192a4c.png" w="447" h="163" title="科普：5G 承载网里的 FlexE ，到底是什么" width="447" height="163" referrerpolicy="no-referrer"></p><p>没错，Flex 是英语 Flexible 的缩写，意思就是“灵活的，可变动的，柔韧的”。</p><p><img src="https://img.ithome.com/newsuploadfiles/2021/7/d3fdd996-18e0-4028-8879-fcf74e67b395.png" w="443" h="81" title="科普：5G 承载网里的 FlexE ，到底是什么" width="443" height="81" referrerpolicy="no-referrer"></p><p>那 FlexE 的 E，又是什么呢？</p><p>E，就是我们耳熟能详的“以太网（Ethernet）”。</p><p>大家学计算机网络，第一课应该就会介绍以太网。什么 CSMA/CD（载波监听多路访问及冲突检测）、总线型拓扑、100BASE-T，不知道大家还有没有印象？</p><p><img src="https://img.ithome.com/newsuploadfiles/2021/7/149c5c25-acec-4d0b-ad1d-6fd5e9e5ec04.jpg" w="500" h="500" title="科普：5G 承载网里的 FlexE ，到底是什么" width="500" height="500" referrerpolicy="no-referrer"></p><p>最早的以太网，诞生于上世纪 70 年代。</p><p>一个名叫 Bob Metcalfe 的哈佛博士，利用自己在夏威夷大学 Aloha 项目（世界上最早的无线电计算机通信网）学习时受到的启发，在施乐公司（Xerox）帕洛阿尔托研究中心，和另一名同事 David Boggs，共同设计并实现了世界上第一个以太网。</p><p><img src="https://img.ithome.com/newsuploadfiles/2021/7/4d161e99-89ac-409b-96c9-56c5ac4a6e68.jpg" w="300" h="392" title="科普：5G 承载网里的 FlexE ，到底是什么" width="300" height="392" referrerpolicy="no-referrer"></p><p>Bob Metcalfe，以太网之父</p><p>后来，1982 年，Xerox 与 DEC 及 Intel 组成 DIX 联盟，共同发表了 Ethernet Version 2（EV2）的规格，并将它投入商用市场，且被普遍使用。</p><p><img src="https://img.ithome.com/newsuploadfiles/2021/7/5b5be52a-3adb-4cc9-9cf6-da533938a439.jpg" w="409" h="231" title="科普：5G 承载网里的 FlexE ，到底是什么" width="409" height="231" referrerpolicy="no-referrer"></p><p>没错，就是那个卖打印机的施乐</p><p>这个 EV2，就是受 IEEE 承认的 10BASE5。10 代表速度是 10Mbps，BASE 代表传输信号调制方式为基带调制，5 代表传输距离 500 米。</p><p>以太网诞生之后，得到了快速的发展，逐渐从最开始的总线式以太网（也叫经典以太网），演变为交换式以太网。</p><p><img src="https://img.ithome.com/newsuploadfiles/2021/7/3a036038-8630-496a-8bad-446a08b2580d.png" w="955" h="387" title="科普：5G 承载网里的 FlexE ，到底是什么" width="955" height="332" referrerpolicy="no-referrer"></p><p>以太网的速率，从最开始的 1Mbps，10Mbps，100Mbps，慢慢衍生出了 1Gbps，10Gbps，100Gbps……</p><p>以太网的传输介质，也从早期的同轴电缆，变成了双绞线（80 年代末出现），再到后面的光纤（90 年代中后期出现）。</p><p><img src="https://img.ithome.com/newsuploadfiles/2021/7/fcfd5a1f-6bd7-4eac-8ce9-8a0bb77713e7.jpg@s_2,w_820,h_582" w="1080" h="766" title="科普：5G 承载网里的 FlexE ，到底是什么" srcset="https://img.ithome.com/newsuploadfiles/2021/7/fcfd5a1f-6bd7-4eac-8ce9-8a0bb77713e7.jpg 2x" width="1080" height="582" referrerpolicy="no-referrer"></p><p>以太网演进（点击可看大图）</p><p><img src="https://img.ithome.com/newsuploadfiles/2021/7/fc38b386-d50e-465a-8d82-9e19cc08a996.png" w="1080" h="251" title="科普：5G 承载网里的 FlexE ，到底是什么" width="1080" height="191" referrerpolicy="no-referrer"></p><p>在 OSI 七层模型里面，以太网是数据链路层和物理层的技术。在 TCP/IP 模型中，是网络接口层。</p><p><img src="https://img.ithome.com/newsuploadfiles/2021/7/e2527726-4cb1-43ea-a687-8fcb76eeec8d.jpg" w="790" h="520" title="科普：5G 承载网里的 FlexE ，到底是什么" width="790" height="520" referrerpolicy="no-referrer"></p><p>回过头来，我们再看看光。</p><p>进入 2010 年代之后，人们开始发现，光传输设备的发展，渐渐无法跟上需求。</p><p>一方面，光通信场景较多，UNI（用户网络接口）可能出现多种情况，而底层光传输链路接口和模块是固定的，难以应对这些变化。例如，光传输设备只有三个 40G 通道，而我们的业务是 100G 的。</p><p>另一方面，高速率光模块的价格太高，一时半会降不下来。行业需要寻找更低成本的解决方案，例如，1 个 400G 光模块的价格，比 4 个 100G 加起来还高。那么，是不是可以通过绑定多个低速率的方式，实现高速率？</p><p>于是，人们开始思考，Ethernet 接口的速率，和光传输的能力速率，能不能解除匹配关系。这个，就是我们常说的“解耦”。</p><p><img src="https://img.ithome.com/newsuploadfiles/2021/7/375b1312-68d3-4a41-a6de-fe9083450021.jpg" w="781" h="414" title="科普：5G 承载网里的 FlexE ，到底是什么" width="781" height="414" referrerpolicy="no-referrer"></p><p>为了实现这个愿望，2016 年，OIF（光互联论坛）推出了 FlexE。</p><p><img src="https://img.ithome.com/newsuploadfiles/2021/7/aed564d4-03db-4ea7-b55e-a6929053235b.png" w="318" h="152" title="科普：5G 承载网里的 FlexE ，到底是什么" width="318" height="152" referrerpolicy="no-referrer"></p><p>FlexE 的作用，有点像一个“超级变速齿轮”。</p><p><img src="https://img.ithome.com/newsuploadfiles/2021/7/1a79bbe0-6daf-47a3-a962-f6edbd6c8641.gif" w="374" h="280" title="科普：5G 承载网里的 FlexE ，到底是什么" width="374" height="280" referrerpolicy="no-referrer"></p><p>它在传统以太网架构的基础上，引入了全新的 FlexE Shim 层，实现 MAC（介质访问控制子层，属于数据链路层）和 PHY（物理层）的解耦。</p><p><img src="https://img.ithome.com/newsuploadfiles/2021/7/b31f5c41-9bab-4125-bd86-35cf2c61792d.png" w="982" h="494" title="科普：5G 承载网里的 FlexE ，到底是什么" width="982" height="413" referrerpolicy="no-referrer"></p><p>上层和下层的数据流速率，不再强制绑定。</p><p>FlexE 的架构，如下图所示：</p><p><img src="https://img.ithome.com/newsuploadfiles/2021/7/81cdf01b-32a3-4efc-8057-7b9d7beda470.png" w="849" h="263" title="科普：5G 承载网里的 FlexE ，到底是什么" width="849" height="254" referrerpolicy="no-referrer"></p><p>FlexE Client</p><p>对应于网络的各种用户接口（UNI），与现有 IP/ETH 网络中的传统业务接口一致。可根据带宽需求灵活配置，例如 10G、40G、100G、200G、n*25G。</p><p>FlexE Group</p><p>本质上就是 IEEE 802.3 标准定义的各种以太网物理层（PHY）。</p><p>FlexE Shim</p><p>FlexE Shim 是整个 FlexE 的核心。</p><p>它把 FlexE Group 中的每个 100GE PHY 划分为 20 个 Slot (时隙) 的数据承载通道，每个 PHY 所对应的这一组 Slot 被称为一个 Sub-calendar，其中每个 Slot 所对应的带宽为 5Gbps。</p><p><img src="https://img.ithome.com/newsuploadfiles/2021/7/2f2aa67d-a40f-48b6-afae-38644f46f6de.png" w="1080" h="317" title="科普：5G 承载网里的 FlexE ，到底是什么" width="1080" height="241" referrerpolicy="no-referrer"></p><p>FlexE 帧结构（来源:《灵活以太网技术白皮书》）</p><p>FlexE Client 原始数据流中的以太网帧，以 Block 原子数据块 (为 64/66B 编码的数据块) 为单位进行切分，这些原子数据块可以通过 FlexE Shim 实现在 FlexE Group 中的多个 PHY 与时隙之间的分发。</p><p>由于 FlexE Group 的 100GE PHY 中每个 Slot 带宽为 5Gbps 粒度，FlexE Client 理论上也可以按照 5Gbps 速率颗粒度进行任意数量的组合设置，支持更加灵活的多速率承载。</p><p>（注意，最开始的 FlexE 版本，每个 slot 带宽是 5Gbps。后来的 FlexE 版本，又推出了其它大小。）</p><p>FlexE 的功能，简单来说，就是三个：捆绑、子速率、通道化。</p><p>捆绑 (Bonding)</p><p>捆绑，就是多根小水管，绑起来，给一个大数据流用。</p><p><img src="https://img.ithome.com/newsuploadfiles/2021/7/4a091d87-d18c-4029-98a7-9f8cefa0e2cb.png" w="893" h="358" title="科普：5G 承载网里的 FlexE ，到底是什么" width="893" height="329" referrerpolicy="no-referrer"></p><p>多路 PHY 一起工作，支持更高速率。</p><p>例如，4 路 100GE PHY 实现 400G MAC 速率。</p><p>子速率 (Sub-Rate)：</p><p>子速率，就是一根或多根大水管，给一个小数据流用。</p><p><img src="https://img.ithome.com/newsuploadfiles/2021/7/d1be9276-58dc-4d2a-800f-7ed189844bc0.png" w="898" h="353" title="科普：5G 承载网里的 FlexE ，到底是什么" width="898" height="322" referrerpolicy="no-referrer"></p><p>单一低速率 MAC 数据流共享一路或者多路 PHY，并通过特殊定义的 Error Control Block 实现降速工作。</p><p>例如，在 100G PHY 上仅仅承载 75G MAC 数据流。</p><p>通道化 (Channelization)：</p><p>通道化，是一根或多根大水管，给若干小数据流（或大数据流）用。</p><p><img src="https://img.ithome.com/newsuploadfiles/2021/7/8c215aa6-420f-4f6c-8b9f-dfb7260bc025.png" w="870" h="368" title="科普：5G 承载网里的 FlexE ，到底是什么" width="870" height="347" referrerpolicy="no-referrer"></p><p>多路低速率 MAC 数据流共享一路或者多路 PHY。</p><p>例如，在 100G PHY 上承载 10G、40G、50G 的三路 MAC 数据流。或者，在两路 100G PHY 上复用承载 125G 的 MAC 数据流。</p><p>来几个动图，看得更明白一些：</p><p><img src="https://img.ithome.com/newsuploadfiles/2021/7/a2b9e8da-d0bd-422f-b6f5-5bc1f41be75a.gif" w="639" h="412" title="科普：5G 承载网里的 FlexE ，到底是什么" width="639" height="412" referrerpolicy="no-referrer"></p><p>通道化</p><p><img src="https://img.ithome.com/newsuploadfiles/2021/7/a42bf381-0e24-4e67-9b0f-69cf5b0298fc.gif" w="640" h="275" title="科普：5G 承载网里的 FlexE ，到底是什么" width="640" height="275" referrerpolicy="no-referrer"></p><p>通道化</p><p><img src="https://img.ithome.com/newsuploadfiles/2021/7/de37e5aa-483e-4c77-b4f1-9807161773f9.gif" w="640" h="275" title="科普：5G 承载网里的 FlexE ，到底是什么" width="640" height="275" referrerpolicy="no-referrer"></p><p>通道化 + 捆绑</p><p>总而言之，FlexE 在不同基础设施条件下，实现了对不同业务带宽的支持。这就是所谓的“灵活性（Flexible）”。</p><p>基于 FlexE 通道化功能，运营商可以在现有线路上，构建端到端的管道。这些管道的服务等级可以不同。</p><p>大家应该也想到了网络切片。是的，Flex 也能够满足网络切片的需求。</p><p><img src="https://img.ithome.com/newsuploadfiles/2021/7/9cb05b68-8fc2-4f86-9682-41dc1916ff9d.png" w="666" h="490" title="科普：5G 承载网里的 FlexE ，到底是什么" width="666" height="490" referrerpolicy="no-referrer"></p><p>基于 FlexE 的 5G 网络切片（来源:《灵活以太网技术白皮书》）</p><p>FlexE 在现有技术标准和设备的基础上，做了一些“小改动”，就实现了灵活的速率，更大的带宽，以及通道隔离。可以说是既省钱又好用。这样的技术，自然而然受到了大家的欢迎。目前，OIF 已经将标准发展到了 2.1 版本。</p><p>现在，FlexE 已经是公认的 5G 承载网关键技术之一，也是第三代以太网技术的核心。</p><p><img src="https://img.ithome.com/newsuploadfiles/2021/7/6e50eb9a-e68f-4c8a-9bcd-69a825949ed4.jpg@s_2,w_820,h_403" w="910" h="447" title="科普：5G 承载网里的 FlexE ，到底是什么" srcset="https://img.ithome.com/newsuploadfiles/2021/7/6e50eb9a-e68f-4c8a-9bcd-69a825949ed4.jpg 2x" width="910" height="403" referrerpolicy="no-referrer"></p><p>三代以太网</p>
          
</div>
            