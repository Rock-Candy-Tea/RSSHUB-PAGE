
---
title: '微软图像算法被 MIT 硕士破解，轻松还原加密图片（已开源）'
categories: 
 - 新媒体
 - IT 之家
 - 分类资讯
headimg: 'https://img.ithome.com/newsuploadfiles/2021/12/305523ba-49df-4b81-8534-a747a3ba7853.png'
author: IT 之家
comments: false
date: Wed, 22 Dec 2021 07:04:55 GMT
thumbnail: 'https://img.ithome.com/newsuploadfiles/2021/12/305523ba-49df-4b81-8534-a747a3ba7853.png'
---

<div>   
<p data-vmark="3712">微软号称“永不会被逆向”的图像加密算法，现在被 MIT 一位硕士小哥轻松破解了。</p><p data-vmark="3d8a"><span class="accentTextColor">只用几行代码，原本被加密为一串数字的图片便“原形毕露”</span>，可以看清其大致轮廓。</p><p data-vmark="3730">要知道，谷歌、Facebook、Twitter 等大平台对图像加密，用的都是微软这一方法。</p><p data-vmark="c9b2">如今这么轻松就能逆向？让人细思极恐啊。</p><p data-vmark="11ee"><img src="https://img.ithome.com/newsuploadfiles/2021/12/305523ba-49df-4b81-8534-a747a3ba7853.png" w="1080" h="777" title="微软图像算法被 MIT 硕士破解，轻松还原加密图片（已开源）" width="1080" height="590" referrerpolicy="no-referrer"></p><p data-vmark="b7f8">而无独有偶，此前苹果号称不会被逆向的图像加密算法，也曾被“破解”。</p><p data-vmark="531f">前不久，Facebook 搞出了让用户上传果照保护隐私的“清奇方法”，用到的也是类似原理。</p><p data-vmark="9ea1">这不禁让人深思，Facebook 上传的果照，还安全吗……</p><p data-vmark="07f7">目前<span class="accentTextColor">这一方法已经在 GitHub 上开源</span>。</p><h2 data-vmark="7590">利用泄露编译码破解</h2><p data-vmark="c7c8">小哥破解的是微软在 2009 年时提出的<span class="accentTextColor">图像加密算法 PhotoDNA</span>，是业内最具代表性、最早出现的技术之一。</p><p data-vmark="690d">这一方法是微软与达特茅斯学院 Hany Farid 教授共同研发，以识别删除网络上流传的儿童受害的照片。</p><p data-vmark="18e4"><img src="https://img.ithome.com/newsuploadfiles/2021/12/5ce701e2-8a9b-4f3e-ae7a-b8a7f012e944.png" w="1080" h="206" title="微软图像算法被 MIT 硕士破解，轻松还原加密图片（已开源）" width="1080" height="156" referrerpolicy="no-referrer"></p><p data-vmark="3cc1">通过将图片数据打乱混合、重新创建一个哈希值（hash values），它可以给每张照片匹配一个独特的“数字指纹”。</p><p data-vmark="b870">由此，系统只需将已经标记为儿童被侵害图片的哈希值与其他图片的值对比，一旦找到相同的数字串，便可判别其为非法图片。</p><p data-vmark="413f">这种手段一方面可以很好保护用户的隐私，同时还能快速甄别出网络上流传的违规图片。</p><p data-vmark="78e8">但其关键就在于：<span class="accentTextColor">该方法不可逆向，否则所有图片信息其实都在“裸奔”</span>。</p><p data-vmark="73ca">为此，微软一直未透露 PhotoDNA 的算法细节。</p><p data-vmark="c0ad">不过随着前段时间苹果 NeuralHash 算法被逆向，一个可计算 PhotoDNA 哈希值的编译库也被泄露了。</p><p data-vmark="0fba">在此基础上，MIT 的这位小哥提出了名为“<span class="accentTextColor">Ribosome （核糖体）</span>”的逆向方法。</p><p data-vmark="5ffe">它将 PhotoDNA 看作一个黑盒，然后用机器学习的方法攻击哈希函数。</p><p data-vmark="f0ac">因为编译库已经被泄露，所以可以生成图像与哈希值对应的数据集。</p><p data-vmark="3688">在这一数据集上训练神经网络后，该方法便能根据哈希值来逆向图像了。</p><p data-vmark="be53">小哥表示，PhotoDNA 的哈希值是 144 元素的字节向量，他使用了类似于 DCGAN 和 Fast Style Transfer 的神经网络，在缩小卷积步长后使用残差块，从而转换出 100×100 的图像来。</p><p data-vmark="3c1f">在开源项目中，小哥已经上传了 4 个预训练模型。</p><p data-vmark="d0dc">现在只需通过一行训练命令，就能实现从哈希值到图像的转换。</p><pre class="brush:javascript;toolbar:false">python infer.py [--model MODEL] [--output OUTPUT] hash</pre><p data-vmark="5475">具体结果如何？</p><p data-vmark="40fe">小哥在不同数据集上都试验了一下，可以看出<span class="accentTextColor">大部分情况下都能还原出图像轮廓</span>。</p><p data-vmark="cd1d"><img src="https://img.ithome.com/newsuploadfiles/2021/12/4530a0ed-f66c-4d9c-9b7b-093b19985565.png" w="1080" h="1130" title="微软图像算法被 MIT 硕士破解，轻松还原加密图片（已开源）" width="1080" height="858" referrerpolicy="no-referrer"></p><p data-vmark="ce00">而且先验越好，结果就会越好。比如在 CelebA 人脸数据集中，还原人脸的效果明显最好（第二行第一个），而它在还原别的图像时，也会倾向于给出类似于人像的结果（如第一行第一个）。</p><p data-vmark="4c36">不过此方法也有失败的时候，比如 Reddit 数据集中，有些生成图像会存在伪影。</p><h2 data-vmark="d3b5">One More Thing</h2><p data-vmark="7fd3">事实上，除了微软之外，还有不少科技巨头都在用哈希算法来加密图像。</p><p data-vmark="b410">比如我们前文提到的苹果。</p><p data-vmark="7801">前段时间，他们推出了一种叫做 NeuralHash 的加密技术来远程扫描用户照片，以此来控制虐童照片的传播。</p><p data-vmark="f155">彼时苹果一再强调该技术的安全性和隐私性。</p><p data-vmark="1c30">但是不到半个月的时间，该方法就被一位程序员破解，还被另一位英特尔的工程师发现了 bug。</p><p data-vmark="18c0"><img src="https://img.ithome.com/newsuploadfiles/2021/12/a41c6d65-8b14-4793-b583-576cc50039e3.png" w="1080" h="587" title="微软图像算法被 MIT 硕士破解，轻松还原加密图片（已开源）" width="1080" height="446" referrerpolicy="no-referrer"></p><p data-vmark="703b">前段时间，Facebook 声称要让用户上传果照保护隐私，用到的也是这种方法。</p><p data-vmark="6460">Facebook 表示，他们会将你自己上传果照的哈希值标记，如果在网上发现了相同的数值，就会对该图片做删除处理。</p><p data-vmark="8930">但随着这类方法不断被成功逆向，其安全系数或许还有待人们考证。</p><p data-vmark="7549"><strong>参考链接：</strong></p><p data-vmark="179f">[1]<span class="link-text-start-with-http">https://www.anishathalye.com/2021/12/20/inverting-photodna/</span></p><p data-vmark="cd82">[2]<span class="link-text-start-with-http">https://github.com/anishathalye/ribosome</span></p><p data-vmark="5f4f">[3]<span class="link-text-start-with-http">https://www.reddit.com/r/MachineLearning/comments/rkrcyh/p_inverting_photodna_with_machine_learning/</span></p>
          
</div>
            