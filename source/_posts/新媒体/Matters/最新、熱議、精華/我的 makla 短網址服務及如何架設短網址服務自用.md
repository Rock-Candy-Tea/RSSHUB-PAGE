
---
title: '我的 mak.la 短網址服務及如何架設短網址服務自用'
categories: 
 - 新媒体
 - Matters
 - 最新、熱議、精華
headimg: 'https://assets.matters.news/embed/86b47f49-66bb-4d01-90c7-bc15d94fb717.jpeg'
author: Matters
comments: false
date: Thu, 20 Jan 2022 10:24:56 GMT
thumbnail: 'https://assets.matters.news/embed/86b47f49-66bb-4d01-90c7-bc15d94fb717.jpeg'
---

<div>   
<p>我自製了一個自用的短網址服務，稱為 mak.la，由於是自己的網址，所以網址後要甚麼路徑都是我決定，任用。例如：</p><ul><li><a href="https://mak.la/git" rel="noopener noreferrer" target="_blank">mak.la/git</a> 連結至我的 Beginning Git Version Control 代碼版本管理電子書。</li><li><a href="http://mak.la/colors" rel="noopener noreferrer" target="_blank">mak.la/colors</a> 連結至 <a href="https://matters.news/@makzan/css-%E7%9A%84-147-%E5%80%8B%E6%9C%89%E5%90%8D%E5%AD%97%E7%9A%84%E9%A1%8F%E8%89%B2%E5%8F%8A-rebecca-purple-%E7%9A%84%E7%94%B1%E4%BE%86-bafyreiavhfucwaag6mnk62yks4wuh4jysi62xftamilhs77tgh3mqo6hhe" rel="noopener noreferrer" target="_blank">147 種 CSS 有名字顏色</a>的顏色列表。</li><li><a href="https://mak.la/connect4" rel="noopener noreferrer" target="_blank">mak.la/connect4</a> 連結至我和學生們玩的無重力四連環。（話說，用 Google Spreadsheet 作為即時連線遊戲很不錯，多人連線，可以聊天，可以開 Sheet 分房玩）</li><li><a href="https://mak.la/wp" rel="noopener noreferrer" target="_blank">mak.la/wp</a> 連結至 WordPress 的 PHP 匯入流程圖。</li></ul><p>要達至這個短網址跳轉功能，我用上 Netlify 靜態寄存服務，其中 _redirects 功能做跳轉，配合 GitHub 儲存以方便隨時隨地修改。我的整個短網址列表存放於 GitHub 的私人程式庫，以防至一些臨時用的私隱度較高的網址外流。</p><h2>Netlify 靜態網站寄存</h2><p>這個服務使用 <a href="https://www.netlify.com/" rel="noopener noreferrer" target="_blank">Netlify</a> 的靜態網站寄存服務。它們的免費版足夠我們使用。</p><figure class="image"><img src="https://assets.matters.news/embed/86b47f49-66bb-4d01-90c7-bc15d94fb717.jpeg" data-asset-id="86b47f49-66bb-4d01-90c7-bc15d94fb717" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>靜態網站寄存，即只放置瀏覽器讀取的檔案，如 HTML、CSS、JavaScript、圖片等，而沒有伺服器端程式運行。</p><p>但 Netlify 提供了更多的服務，例如我們一會用到的 _redirects 功能、有限度免費用再計費的表格儲存、伺服器端執行函數等。</p><h2>_redirects 跳轉</h2><p>純靜態網站，若想做到網址後任何字符都統一連入一段還輯代碼執行，純 HTML/CSS 是不夠的。還需要伺服器端配合才行。而 Netlify 就提供了一個名為 _redirects 的設定檔，可以從伺服器端做到跳轉，從而能夠實現一般純靜態網站寄存服務無法完成的功能，又不需要專門搭建伺服器。</p><p>在網站跟目錄，我們放置一個名為 _redirects 的檔案，不用有副檔名。當中的內容為一行一筆跳轉記錄。例如：</p><pre class="ql-syntax" spellcheck="false">/example    https://example.com
/mz        https://makzan.net
</pre><figure class="image"><img src="https://assets.matters.news/embed/01d538d0-9b66-4ba3-bc56-a12053de0ed2.png" data-asset-id="01d538d0-9b66-4ba3-bc56-a12053de0ed2" referrerpolicy="no-referrer"><figcaption><span>網站目錄下的 _redirects 檔案</span></figcaption></figure><p>注意，只是一個 _redirects 文件會出現發佈失敗，所以最少也加一個檔案，例如 index.html 等。</p><p>當此目錄放上 Netlify 後，就可以做到跳轉效果。例如我們可以直接以手動更新的形式，拖放整個資料夾來生成此靜態跳轉網站。不過我建議建立一個 GitHub 程式庫。當然，也可以先拖放資料夾來測試，之後再連接 Git。</p><figure class="image"><img src="https://assets.matters.news/embed/4f1e9fff-616f-411a-93be-1f7a558774cb.png" data-asset-id="4f1e9fff-616f-411a-93be-1f7a558774cb" referrerpolicy="no-referrer"><figcaption><span>建立新網站，選擇 Deploy manually 手動發佈。</span></figcaption></figure><p><br></p><figure class="image"><img src="https://assets.matters.news/embed/b5783670-16b6-4f44-8e8d-be8b9a1cc14c.png" data-asset-id="b5783670-16b6-4f44-8e8d-be8b9a1cc14c" referrerpolicy="no-referrer"><figcaption><span>拖拉資料夾來發佈網站</span></figcaption></figure><p>發佈後，便可以通過網址＋/example 來跳轉至 example.com 了。</p><p>例如：<a href="https://stupefied-darwin-bcaa44.netlify.app/example" rel="noopener noreferrer" target="_blank">https://stupefied-darwin-bcaa44.netlify.app/example</a></p><figure class="image"><img src="https://assets.matters.news/embed/e69a282a-fa99-4c76-a03b-64ec3ff0f3df.jpeg" data-asset-id="e69a282a-fa99-4c76-a03b-64ec3ff0f3df" referrerpolicy="no-referrer"><figcaption><span>新增網站完成介面</span></figcaption></figure><h2>設定網址</h2><p>等等，這網址比我們目標跳轉的網址還長，這叫甚麼短網址呢！嗯，所以，接下來要花點錢買個足夠短的網址了。</p><p>首先，可以為我們 Netlify 上的網站改一個更易記的網址，在 Site Settings 網站設定，Domain Management 域名管理，有個 Options 選項，可以將那難記的 stupefied-darwin-bcaa44.netlify.app 改成其他，例如改成 short-url-example.netlify.app 等。</p><figure class="image"><img src="https://assets.matters.news/embed/c312066e-5d4c-4c51-ab50-67e720f075fa.jpeg" data-asset-id="c312066e-5d4c-4c51-ab50-67e720f075fa" referrerpolicy="no-referrer"><figcaption><span>設定網站名稱</span></figcaption></figure><p><br></p><hr><h2>我使用 Mak.la，網址夠短</h2><p>我買了 mak.la 這個短網址作為入口。</p><p><a href="https://en.wikipedia.org/wiki/.la" rel="noopener noreferrer" target="_blank">.la</a> 原本是 Lao 老撾的頂級域名，但由於美國洛杉磯會有公司使用 .LA 域名，另外亦會有中文「啦」字尾的域名使用情況，例如十多年前我曾製作 note.something.la 記事啦。</p><p>而 mak.la 中的 "LA"，我個人解讀為 Link Archives 連結庫的意思。結果，我購入了 mak.la 網址，要價每年 35 USD。</p><h2>買網址：選擇一個短網址</h2><p>如果未有網址，可以直接在 Netlify 上購買，一條龍服務。在上方選擇 Domains，添加，然後測試一下有哪些既心宜又足夠短又未被人使用的域名。</p><p>例如我測試了makla.la 可以購買。直接在 Netlify 上購買的好處是 DNS 也可以直接托管。</p><figure class="image"><img src="https://assets.matters.news/embed/62f0387a-9a42-4527-8bb6-e125bb1dec7a.jpeg" data-asset-id="62f0387a-9a42-4527-8bb6-e125bb1dec7a" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><h2>已有網址，搬過去 Netlify 使用</h2><p>而如果已經有其他網址用，也可以在 Netlify 中添加，同樣在在 Site Settings 網站設定，Domain Management 域名管理，選擇 Add Custom Domain 添加網址，填上希望使用的網址，便生成以下待設定 DNS 的記錄。</p><figure class="image"><img src="https://assets.matters.news/embed/732a9d44-2c14-4d24-a78e-be45384b4098.jpeg" data-asset-id="732a9d44-2c14-4d24-a78e-be45384b4098" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>按 Check DNS configuration 可以得出設定詳情，回到自己的域名名稱服務商並按指示設定便可：</p><figure class="image"><img src="https://assets.matters.news/embed/8110b977-c83e-41f6-a8e7-0501b5e9a986.jpeg" data-asset-id="8110b977-c83e-41f6-a8e7-0501b5e9a986" referrerpolicy="no-referrer"><figcaption><span>添加現有網址的 A 及 CNAME 域名記錄</span></figcaption></figure><hr><p><strong>小結：這個短網址服務的一大要素，是能否買到足夠短又不貴的網址呢。</strong></p><hr><h2>把代碼放 Github</h2><p>我的 _redirects 檔案是放在 GitHub 上的，方便隨時登入隨時更新這個檔案來建立新的連接。更新 GitHub 後，Netlify 會自動將更新發佈，新修改若 5 秒後便上線可用。</p><figure class="image"><img src="https://assets.matters.news/embed/dc14fba0-d465-4ff3-a2b3-40e0741d99c7.jpeg" data-asset-id="dc14fba0-d465-4ff3-a2b3-40e0741d99c7" referrerpolicy="no-referrer"><figcaption><span>自動發佈記錄</span></figcaption></figure><p>若已建立 Netlify 網站，可以在 Site Settings > Build & deploy 設定 Link site to Git。</p><figure class="image"><img src="https://assets.matters.news/embed/2579abf7-f5cc-4b91-bd2d-7c78d46e2ed7.jpeg" data-asset-id="2579abf7-f5cc-4b91-bd2d-7c78d46e2ed7" referrerpolicy="no-referrer"><figcaption><span>已有網站連結</span></figcaption></figure><p>而如果是全新建立，則可以直接新建立時選擇匯入（Import an existing project），再連結 GitHub 帳號選擇 Git 代碼庫。</p><figure class="image"><img src="https://assets.matters.news/embed/79327b45-7591-409c-9d0c-312839144188.png" data-asset-id="79327b45-7591-409c-9d0c-312839144188" referrerpolicy="no-referrer"><figcaption><span>新網站直接從 Git 匯入</span></figcaption></figure><p>這樣，每次更改，只需要直接在 GitHub 上的編輯器改動即可。</p><figure class="image"><img src="https://assets.matters.news/embed/0bd9c0d4-7f92-4d5d-95e9-3888020a6e7d.jpeg" data-asset-id="0bd9c0d4-7f92-4d5d-95e9-3888020a6e7d" referrerpolicy="no-referrer"><figcaption><span>直接在 GitHub 上的編輯器修改 _redirects 添加記錄</span></figcaption></figure><h2>大功告成</h2><p>祝你可以買到一個平靚正的短網址！</p><p>— 麥麥寫的 <a href="https://mak.la/matters" rel="noopener noreferrer" target="_blank">麥誠 Makzan</a>，2022-01-20。</p>  
</div>
            