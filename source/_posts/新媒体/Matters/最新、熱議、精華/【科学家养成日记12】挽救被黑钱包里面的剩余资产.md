
---
title: '【科学家养成日记#12】挽救被黑钱包里面的剩余资产'
categories: 
 - 新媒体
 - Matters
 - 最新、熱議、精華
headimg: 'https://assets.matters.news/embed/a2965544-2a33-46fe-adff-7b2239b6f845.png'
author: Matters
comments: false
date: Mon, 21 Feb 2022 02:07:44 GMT
thumbnail: 'https://assets.matters.news/embed/a2965544-2a33-46fe-adff-7b2239b6f845.png'
---

<div>   
<p>今天看到Matters上一篇帖子说自己的钱包被黑，账号上的币被转走，钱包里剩下一些NFT，问大家是否有办法转走?</p><p>一般钱包被黑，大几率是黑客掌握了钱包的私钥，所以如果你把ETH转进去作为转走剩余资产的GAS，很大可能转进去就被黑客程序自动转走</p><p>要想把剩余资产转走，就需要用到Flashbot，在同一个区块里面完成转币进去，同时转资产去另外一个钱包的操作。</p><figure class="image"><img src="https://assets.matters.news/embed/a2965544-2a33-46fe-adff-7b2239b6f845.png" data-asset-id="a2965544-2a33-46fe-adff-7b2239b6f845" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p><br></p><h2>怎么用Flashbot挽救钱包里面的NFT呢?</h2><p>这里要用到脚哥script money的flashbot工具（<a href="https://github.com/script-money/ens-claim-flashbot-example" rel="noopener noreferrer" target="_blank" class="keychainify-checked">https://github.com/script-money/ens-claim-flashbot-example</a> ）</p><p>源代码里面授权ERC721那部分有个小bug，所以就用我fork的代码进行NFT转移</p><h3>设置</h3><pre class="ql-syntax" spellcheck="false">git clone https://github.com/ericet/ens-claim-flashbot-example.git
cp .env.example .env
yarn install
</pre><p>打开.env文件，添加所需信息</p><figure class="image"><img src="https://assets.matters.news/embed/0e43d338-a497-49ee-bcd2-da0758fec767.png" data-asset-id="0e43d338-a497-49ee-bcd2-da0758fec767" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p><br></p><h3>NFT授权</h3><p>添加好后，保存并打开/src/index.ts，修改ERC721的合约地址（需要转移的NFT的合约地址）</p><figure class="image"><img src="https://assets.matters.news/embed/0cddbb7f-61de-414f-be0f-3d1fcc28eca2.png" data-asset-id="0cddbb7f-61de-414f-be0f-3d1fcc28eca2" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p><br></p><p>修改后，运行</p><p><code>yarn start</code></p><p>程序就会给将给要执行转移的钱包NFT授权</p><figure class="image"><img src="https://assets.matters.news/embed/d0b051a6-25e9-466c-93ce-fb2e1e6e5685.png" data-asset-id="d0b051a6-25e9-466c-93ce-fb2e1e6e5685" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p><br></p><h3>转移NFT</h3><p>注释掉NFT授权那段(75-76), 取消注释NFT转移那段(80-82), 并且修改一下NFT_ADDRESS那里的NFT合约地址(需要转移的NFT的合约地址)和TOKENIDS（NFT的ID）</p><figure class="image"><img src="https://assets.matters.news/embed/9ae4099a-ce2f-43dd-b5aa-f4f3f0206fa1.png" data-asset-id="9ae4099a-ce2f-43dd-b5aa-f4f3f0206fa1" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p><br></p><p>修改好后，运行</p><p><code>yarn run</code></p><p>等待交易成功，你的</p><figure class="image"><img src="https://assets.matters.news/embed/d7444df5-4f39-42be-9e6e-5cb6a591388f.png" data-asset-id="d7444df5-4f39-42be-9e6e-5cb6a591388f" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p><br></p><p>最终链上的记录:</p><figure class="image"><img src="https://assets.matters.news/embed/b72369dc-f406-4348-94e9-ab077262d37b.png" data-asset-id="b72369dc-f406-4348-94e9-ab077262d37b" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p><br></p><p>可以看到3个操作是在同一个区块里面完成的，这样如果钱包被黑客监控，他们也不可能在同一个区块里把你的币劫走</p><p>上面只介绍了转移NFT，程序还支持转移代币，领取空投并转移，等等</p><p>想了解的可以看看index.ts里面的注释</p><p>源代码来自脚哥的github: <a href="https://github.com/script-money/ens-claim-flashbot-example" rel="noopener noreferrer" target="_blank" class="keychainify-checked">https://github.com/script-money/ens-claim-flashbot-example</a></p><p>研究一下是否能改成页面操作，降低一下门槛</p>  
</div>
            