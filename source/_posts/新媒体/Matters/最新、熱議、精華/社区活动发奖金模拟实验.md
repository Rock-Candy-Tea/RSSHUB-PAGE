
---
title: '社区活动发奖金模拟实验'
categories: 
 - 新媒体
 - Matters
 - 最新、熱議、精華
headimg: 'https://assets.matters.news/embed/173d868a-29a2-4d32-bfb2-2cf605446db2.png'
author: Matters
comments: false
date: Tue, 12 Oct 2021 21:04:51 GMT
thumbnail: 'https://assets.matters.news/embed/173d868a-29a2-4d32-bfb2-2cf605446db2.png'
---

<div>   
<p>受<a class="mention" href="https://matters.news/@thumbb13555" target="_blank" data-display-name="碼農日常大小事-裏" data-user-name="thumbb13555" data-id="VXNlcjo1NzI3NA">﻿<span>@碼農日常大小事-裏</span>﻿</a> <a class="mention" href="https://matters.news/@baoshin" target="_blank" data-display-name="鑫大叔" data-user-name="baoshin" data-id="VXNlcjo1OTc0OA">﻿<span>@鑫大叔</span>﻿</a> 启发，也搞个一次性投币玩玩</p><p><strong>1 投币对象</strong></p><figure class="image"><img src="https://assets.matters.news/embed/173d868a-29a2-4d32-bfb2-2cf605446db2.png" data-asset-id="173d868a-29a2-4d32-bfb2-2cf605446db2" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>新一期Top10 读者</p><p><br></p><p><strong>2 获取投币对象liker id</strong></p><p>投币之前，根据用户id获取liker id。获取liker id代码如下：</p><pre class="ql-syntax">query &#123;
  user (
    input: &#123;
      userName: "potato_pepper"
    &#125;) &#123;
    displayName
    userName
    likerId
  &#125;
&#125;
</pre><p><br></p><p>⚠️ 不是每个用户id和liker id保持一致的，这是特殊案例：</p><figure class="image"><img src="https://assets.matters.news/embed/c66dbbe8-65c1-4c61-8b7a-530e6639e224.png" data-asset-id="c66dbbe8-65c1-4c61-8b7a-530e6639e224" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p><strong>3 计算投币金额</strong></p><p><a class="mention" href="https://matters.news/@sabaahprin" target="_blank" data-display-name="雞毛的小事" data-user-name="sabaahprin" data-id="VXNlcjo1MzIyNw">﻿<span>@雞毛的小事</span>﻿</a> <a class="mention" href="https://matters.news/@star2light19" target="_blank" data-display-name="星星點燈" data-user-name="star2light19" data-id="VXNlcjo2MDkwNQ">﻿<span>@星星點燈</span>﻿</a> 长期霸榜Top 3，得了263（<a class="mention" href="https://matters.news/@smog_again" target="_blank" data-display-name="鬼撞墙" data-user-name="smog_again" data-id="VXNlcjoxOTIxNQ">﻿<span>@鬼撞墙</span>﻿</a> 制定一下263要投给谁。。。）</p><p><a class="mention" href="https://matters.news/@rustle" target="_blank" data-display-name="穿林" data-user-name="rustle" data-id="VXNlcjo2MTIwMQ">﻿<span>@穿林</span>﻿</a> <a class="mention" href="https://matters.news/@ch847009" target="_blank" data-display-name="志工爺爺" data-user-name="ch847009" data-id="VXNlcjo0NjY3Ng">﻿<span>@志工爺爺</span>﻿</a> <a class="mention" href="https://matters.news/@crossch999" target="_blank" data-display-name="爆栗鹹鹹姊" data-user-name="crossch999" data-id="VXNlcjo1NTQyOA">﻿<span>@爆栗鹹鹹姊</span>﻿</a> <a class="mention" href="https://matters.news/@tingting1123" target="_blank" data-display-name="射手媽咪婷婷" data-user-name="tingting1123" data-id="VXNlcjoyMDQyMw">﻿<span>@射手媽咪婷婷</span>﻿</a> <a class="mention" href="https://matters.news/@nk980710" target="_blank" data-display-name="白鼬筆寬麵" data-user-name="nk980710" data-id="VXNlcjo2MDc1OA">﻿<span>@白鼬筆寬麵</span>﻿</a> <a class="mention" href="https://matters.news/@BloomingBloom" target="_blank" data-display-name="无法" data-user-name="BloomingBloom" data-id="VXNlcjoxNzcwNw">﻿<span>@无法</span>﻿</a> <a class="mention" href="https://matters.news/@vincent797" target="_blank" data-display-name="雲遜83" data-user-name="vincent797" data-id="VXNlcjo1NjM3NA">﻿<span>@雲遜83</span>﻿</a> 长期霸榜Top 10， 得了63</p><p><a class="mention" href="https://matters.news/@thumbb13555" target="_blank" data-display-name="碼農日常大小事-裏" data-user-name="thumbb13555" data-id="VXNlcjo1NzI3NA">﻿<span>@碼農日常大小事-裏</span>﻿</a> <a class="mention" href="https://matters.news/@baoshin" target="_blank" data-display-name="鑫大叔" data-user-name="baoshin" data-id="VXNlcjo1OTc0OA">﻿<span>@鑫大叔</span>﻿</a> 热心讲解代码，得了36</p><p>按照以上规则算钱，得到发钱列表如下：</p><figure class="image"><img src="https://assets.matters.news/embed/cbab67c2-d604-47ce-a965-12e05dc5d962.png" data-asset-id="cbab67c2-d604-47ce-a965-12e05dc5d962" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p><strong>4 根据发钱列表，生成发钱链接</strong></p><pre class="ql-syntax">payer_list_str = ""
like_list_str = ""

for index, item in send_df[['likerId', 'likeCoin']].iterrows():
  payer_list_str += item.likerId + ","
  like_list_str += str(item.likeCoin) + ","

payer_list_str = payer_list_str[:-1]
like_list_str = like_list_str[:-1]

pay_url = "https://like.co/in/widget/pay?to=%s&amount=%s"%(payer_list_str, like_list_str)
</pre><p><br></p><p>根据以上发钱链接生成代码，得到一次性发钱链接：</p><p><a href="https://like.co/in/widget/pay?to=sabaahprin,star2light19,cheok97,ch84700909307,crossch999,tingting1123,nk980710,artofhappiness,vincent797,thumbb13555,baoshin&amount=263,263,63,63,63,63,63,63,63,36,36" target="_blank">https://like.co/in/widget/pay?to=sabaahprin,star2light19,cheok97,ch84700909307,crossch999,tingting1123,nk980710,artofhappiness,vincent797,thumbb13555,baoshin&amount=263,263,63,63,63,63,63,63,63,36,36</a></p><p><br></p><p><strong>5 验证发钱链接是否有效</strong></p><p>复制粘贴链接进浏览器，有效长这样：</p><figure class="image"><img src="https://assets.matters.news/embed/da583e48-6c4e-4651-9150-72244c17742c.jpeg" data-asset-id="da583e48-6c4e-4651-9150-72244c17742c" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>无效长这样：</p><figure class="image"><img src="https://assets.matters.news/embed/5832f629-2b1c-41a7-9c47-53d37b7b2902.png" data-asset-id="5832f629-2b1c-41a7-9c47-53d37b7b2902" referrerpolicy="no-referrer"><figcaption><span>错误示范</span></figcaption></figure><p><strong>6 double check没有算错钱</strong></p><p>看看发钱总数对不对嘛</p><pre class="ql-syntax">send_df.likeCoin.sum()
</pre><p><br></p><p><strong>7 按Sign In 投币</strong></p><p>检查无误后，小心翼翼发钱，不要手抖。。。。。。</p><figure class="image"><img src="https://assets.matters.news/embed/e37fdf90-723a-43b8-adb9-bbc79d792224.png" data-asset-id="e37fdf90-723a-43b8-adb9-bbc79d792224" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>交易完成后，可以去big dipper查看，但是这样发钱没有邮件提示。。。。。。。。。</p><figure class="image"><img src="https://assets.matters.news/embed/831068c4-534e-4236-8509-91dfdba316d0.png" data-asset-id="831068c4-534e-4236-8509-91dfdba316d0" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p><br></p><p><br></p><p><br></p>  
</div>
            