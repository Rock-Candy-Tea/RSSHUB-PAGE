
---
title: 'Web 3.0 Discord 資安手冊'
categories: 
 - 新媒体
 - Matters
 - 最新、熱議、精華
headimg: 'https://assets.matters.news/embed/071b070e-c94f-48fa-b095-0146992e09ee.png'
author: Matters
comments: false
date: Tue, 30 Aug 2022 13:43:29 GMT
thumbnail: 'https://assets.matters.news/embed/071b070e-c94f-48fa-b095-0146992e09ee.png'
---

<div>   
<blockquote>近期許多NFT Discord遭駭，故本人特別寫篇文章，希望減少未來類似事件發生的機率。本文將會持續更新。<br class="smart">本文轉載自Medium，特別感謝Matters的Content Manager張育軒大大推薦我這個平台。<br class="smart"></blockquote><h2>前言</h2><p>智能合約寫得再嚴謹，Discord被攻擊，項目照樣破發。相信大家親眼目睹過很多次，在此就不舉例了。被駭的原因普遍是Mod缺乏資安知識。在Web3的世界，駭客手中拿著AK，而一堆人連頭盔都沒戴就輕裝上陣。若不想成為那個被打成蜂窩的可憐人，請乖乖看完這篇文章並取得你的防具。</p><p>註：本文不探討hacker及cracker的區別，為方便解說，文中所指駭客皆指社會大眾普遍認知的駭客。<br class="smart">文中有少部分和資安無關，但會造成社群混亂和困擾，所以仍應盡量避免。<br class="smart"></p><p>本文會就下面目錄，詳細分析各種安全威脅的預防、處理及善後流程。</p><pre class="ql-syntax" spellcheck="false">伺服器設置缺失
    伺服器設定
        伺服器驗證等級過低
        管理所需的2FA要求未開啟
        未設置進群驗證    
身分組設定
        權限
            管理頻道
            管理身分組
            管理webhooks
            管理伺服器
            踢出成員
            對成員停權
            禁言成員
            提及@everyone、@here和所有身分組
            管理訊息
            管理活動
            管理者
            允許任何人@mention這個身分組
        位階
            順序錯誤
    頻道設定
        權限未同步
個人Discord帳號設定缺失
    email驗證
    手機驗證
    2FA(Two Factor Authentication)
管理失當    
停權/踢出/禁言
社交工程(social engineering)
    偽裝項目管理員
    偽裝metamask官方
    偽裝Discord官方
釣魚連結
    free Nitro
    假官網
木馬程式（Trojan）
    下載不明檔案
高危機器人
    惡意授權
    盜版collab.land
    機器人被駭
    QR Code
token盜取
    javascript拖曳
spamming
    spamming attack
    token spamming attack
邀請連結置換
    server vanity url
如何預防
事件發生時處理方式
善後
</pre><h2>伺服器驗證等級過低</h2><figure class="image"><img src="https://assets.matters.news/embed/071b070e-c94f-48fa-b095-0146992e09ee.png" data-asset-id="071b070e-c94f-48fa-b095-0146992e09ee" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>如圖，一般伺服器預設是最上面那個<strong>無</strong>，社群伺服器預設為<strong>低。<br class="smart"></strong>這功能是伺服器的第一道防線。我建議一律調成最高，可以防止大部分的selfbot。<br class="smart">一般Discord官方認定合法的bot，如mee6，稱為bot。而selfbot指的是調用Discord API，將帳號自動化的程式。本文中如提及bot都是指合法的bot，selfbot會以selfbot特別區別。<br class="smart">selfbot不一定會為你伺服器帶來資安風險，有些selfbot的目的只是當伺服器舉辦抽獎時，自動點表情符號抽獎；又或者自動發言刷經驗值。雖說如此，有selfbot在伺服器中對社群發展還是很不健康。<br class="smart">另外，上圖中<strong>必須成為此伺服器的成員要超過10分鐘</strong>隱含的意思是，加入未滿10分鐘的成員無法點擊emoji，代表也無法通過mee6的進群驗證，可以特別提醒成員等待需10分鐘後再驗證（雖然我想各位到處肝白單這個應該蠻熟了）。<br class="smart">溫馨小提醒：不要碰selfbot，如果你是項目方或Mod <strong>絕 對 不 能 碰<br class="smart"></strong>1.官方封帳</p><figure class="image"><img src="https://assets.matters.news/embed/42c32792-58de-4838-93f9-a26f9775da59.png" data-asset-id="42c32792-58de-4838-93f9-a26f9775da59" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>因selfbot違反Discord的使用者規範（TOS, Terms of Service），官方對selfbot一向抓很嚴，抓到就是同IP全部一起封，而且無論是不是誤鎖，申訴通常不會有回應。上圖是官方對selfbot的定義。<br class="smart">更棒的是，如果你是項目方，而你的伺服器沒有設定其他管理者，被封後整個伺服器完全無法維護和管理，新增bot、修改頻道名稱，甚至刪除伺服器都做不到，只能眼睜睜的看著伺服器凋亡。<br class="smart">另外，推廣selfbot很可能影響伺服器。Discord對推廣selfbot的伺服器也是0容忍，被抓到不只你遭殃，伺服器和成員的帳號也會一起被封。<br class="smart">下圖是我以前寫selfbot自動抓寶可夢結果被封，官方寄來的信。<br class="smart">我被封了20幾個帳號= =，現在金盆洗手，不碰黑魔法了。</p><figure class="image"><img src="https://assets.matters.news/embed/f4f3a45c-3d42-4b52-9f17-dafa972281a0.png" data-asset-id="f4f3a45c-3d42-4b52-9f17-dafa972281a0" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>2.項目方封你<br class="smart">很多項目方都發現有自動聊天的selfbot，有些優質的項目會在規定中明文禁止selfbot。<br class="smart">3.帳號被盜<br class="smart">要使用selfbot會需要你的<a href="https://matters.news/@xeift/web-3-0-discord-%E8%B3%87%E5%AE%89%E6%89%8B%E5%86%8A-bafyreiewbonovtax7h25gjp35m6lkmryfgl4dg7vamvudyu6zt6apnpyni#4d61" rel="noopener noreferrer" target="_blank"><strong>token</strong></a>。網路上很多現成的selfbot會盜取你的token。此外，有些selfbot還是木馬（稍後會提到），除了你的Discord帳號外，其他社群媒體帳號和註記詞，攻擊者也會一併盜取。即使程式沒問題，在雲端（如repl.it）運行時，token往往沒放進環境變數，等於把自己的密碼貼在網路上供大家欣賞。</p><h2>管理所需的2FA要求未開啟</h2><p>相信我，先開起來就對了，後面會花很多篇幅詳細解釋2FA。</p><h2>未設置進群驗證</h2><p>進群驗證的目的當然是為了防止selfbot和低能兒。<br class="smart">最簡單的驗證方式如下，對mee6的驗證訊息按下emoji，mee6會自動assign身分組。</p><figure class="image"><img src="https://assets.matters.news/embed/6144bd8f-650c-4b9e-be82-26bf903b6bd0.png" data-asset-id="6144bd8f-650c-4b9e-be82-26bf903b6bd0" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>由於很多selfbot會點遍伺服器中所有emoji，嘗試進入伺服器，因此mee6驗證強度已不足了，目前普遍使用下圖的Captcha bot，能有效防止selfbot。</p><figure class="image"><img src="https://assets.matters.news/embed/9069c9d1-f559-4f0a-9e4c-af91794d51de.png" data-asset-id="9069c9d1-f559-4f0a-9e4c-af91794d51de" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p><strong>captcha</strong>即<strong>C</strong>ompletely <strong>A</strong>utomated <strong>P</strong>ublic <strong>T</strong>uring test to tell <strong>C</strong>omputers and <strong>H</strong>umans <strong>A</strong>part，「全自動區分電腦和人類的公開圖靈測試」，我相信沒人知道captcha的英文和中文在供三小，所以我直接放圖。</p><figure class="image"><img src="https://assets.matters.news/embed/3eba1b67-ed5d-450f-8dff-70b27f3556cd.jpeg" data-asset-id="3eba1b67-ed5d-450f-8dff-70b27f3556cd" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p><strong>以下所有權限都不是一般成員該有的，請從一般成員的身分組中移除這些權限<br class="smart">另外，為方便管理，若該身分組沒有特殊權限需求，請不要勾選權限，維持預設即可。</strong></p><h2>管理頻道</h2><p>白話文：建立、刪除、編輯所有頻道<br class="smart">威脅：所有頻道遭到刪除</p><h2>管理身分組</h2><p>白話文：建立身分組，編輯、刪除比自己最高身分組低的身分組<strong><br class="smart">威脅：將有管理身分組指派給自己，將Mod權限降級（位階設定失當的情況下）<br class="smart">請特別注意，此權限威脅性與管理者相當，非必要不要授予此權限，授予前請檢查位階設置是否正確。</strong></p><h2>管理webhooks</h2><p>白話文：建立、刪除、編輯webhooks<br class="smart">威脅：散佈任意釣魚連結、假mint網站</p><p>webhook是啥？就是下面這東西<br class="smart">長的很像一般的bot對吧？你可以把webhook當成功能很少的bot。<br class="smart">差別在於，webhook只能從外部被呼叫，一般的bot可以使用各種指令並讀取伺服器中的各種資訊，Discord的webhook只能發送訊息，當然webhook也可以改頭像。</p><figure class="image"><img src="https://assets.matters.news/embed/a35402be-8d4f-40ef-8fa9-55a75e7229c0.png" data-asset-id="a35402be-8d4f-40ef-8fa9-55a75e7229c0" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><figure class="image"><img src="https://assets.matters.news/embed/63e8d075-65ea-418f-b723-c8665f0e2354.png" data-asset-id="63e8d075-65ea-418f-b723-c8665f0e2354" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>下圖就是Rare Bears及SUI被駭後Webhook的攻擊應用。</p><figure class="image"><img src="https://assets.matters.news/embed/842eb925-cb10-4627-961c-6ce171a669f7.png" data-asset-id="842eb925-cb10-4627-961c-6ce171a669f7" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><figure class="image"><img src="https://assets.matters.news/embed/101d05d0-5b4f-4e97-9c15-f0c922b0f0b1.png" data-asset-id="101d05d0-5b4f-4e97-9c15-f0c922b0f0b1" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><h2>管理伺服器</h2><p>白話文：如題<br class="smart">威脅：攻擊者可以亂改伺服器名稱和調整伺服器驗證等級，也能撤銷邀請連結。</p><figure class="image"><img src="https://assets.matters.news/embed/36e38f08-8ef9-40ba-88eb-f92f0ed802e6.png" data-asset-id="36e38f08-8ef9-40ba-88eb-f92f0ed802e6" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><h2>踢出成員</h2><p>白話文：把成員踢出伺服器，只要成員有邀請連結就能隨時加回伺服器。<br class="smart">威脅：踢出任何比攻擊者最高身分組位階還低的任何人（除了伺服器擁有者外），簡而言之項目會血流成河。</p><h2>對成員停權</h2><p>白話文：永久將成員從伺服器停權，解除停權前成員無法再次加入伺服器。我覺得這中文翻的很爛。總之就是ban的意思。和<strong>踢出成員</strong>一樣，差別在於無法重新加入伺服器。<br class="smart">威脅：同<strong>踢出成員</strong>，一樣會血流成河，流量大到可以拿去水力發電。</p><p>如下圖，官方還搞了個雷神索爾的gif</p><figure class="image"><img src="https://assets.matters.news/embed/25f69632-4c52-4019-aff4-35f1b5d62aa9.png" data-asset-id="25f69632-4c52-4019-aff4-35f1b5d62aa9" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><h2>禁言成員</h2><p>白話文：如圖<br class="smart">威脅：所有成員被禁言</p><figure class="image"><img src="https://assets.matters.news/embed/925e0d65-38ee-4f82-9e29-05e0f0ff05b0.png" data-asset-id="925e0d65-38ee-4f82-9e29-05e0f0ff05b0" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><h2>提及@everyone、@here和所有身分組</h2><p>白話文：讓大家狂噴通知，@here會提及所有該頻道上線的成員，@everyone會提及所有成員，包含未上線的成員。<br class="smart">威脅：很吵。</p><h2>管理訊息</h2><p>白話文：刪除/釘選訊息<br class="smart">威脅：所有訊息被刪除</p><h2>管理活動</h2><p>白話文：建立、刪除、編輯活動<br class="smart">威脅：替換成假的mint網站</p><figure class="image"><img src="https://assets.matters.news/embed/74e424fd-a9ae-4ff3-b85f-19db128f7d4c.png" data-asset-id="74e424fd-a9ae-4ff3-b85f-19db128f7d4c" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><h2>管理者</h2><p>白話文：除了比攻擊者最高身分組還高的身分組動不了外，可以做到任何事。<br class="smart">威脅：伺服器頻道刪光、成員被禁言、散布假mint官網、項目破發。</p><h2>允許任何人@mention這個身分組</h2><p>白話文：同<strong>提及@everyone、@here和所有身分組。<br class="smart"></strong>威脅：很吵</p><h2>順序錯誤</h2><p>Discord的身分組有位階之分，即使你擁有管理者權限，仍只能操作比你最高身分組低階的身分組。Discord會將你暱稱的顏色設為你最高階身分組的顏色。</p><p>威脅1：機器人身分組高於Mod身分組<br class="smart">威脅2：任意身分組高於管理身分組，且該身分組擁有管理身分組權限</p><p>1.假設今天機器人被駭，Mod完全無能為力，只有伺服器擁有者一人有權限能處理。<br class="smart">2.攻擊者可以透過新增/移除身分組的方式為自己提升至<strong>管理者</strong>權限，並<strong>把Mod身分組拔光</strong>，這種情況Mod一樣束手無策。</p><p>除此之外，當然還有其他可能的狀況。最好的方法就是一開始就確保設定沒有缺失。若真的遇到了，請盡速聯絡有權限的人協助處理。</p><h2>權限未同步</h2><p>這裡的未同步是指預設身分組的權限未與頻道身分組的權限同步。<br class="smart">許多時候，大家預設身分組的地方設置的很嚴謹，頻道身分組權限卻設的一塌糊塗，資安風險也就由此產生。<br class="smart">舉例來說，nice身分組的預設權限全部都是關閉的。</p><figure class="image"><img src="https://assets.matters.news/embed/b8f709ff-fd6b-433d-83ae-c364be60d9c4.png" data-asset-id="b8f709ff-fd6b-433d-83ae-c364be60d9c4" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>而在cmd頻道，nice身分組卻擁有所有權限。</p><figure class="image"><img src="https://assets.matters.news/embed/a4e51bfb-db18-430a-b7f2-8da926927a42.png" data-asset-id="a4e51bfb-db18-430a-b7f2-8da926927a42" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>很多人都會忽略頻道權限設置，導致的結果就是攻擊者雖然沒有所有頻道的權限，但可在特定頻道為所欲為。</p><p>另外，設置權限時請不要像下圖這樣搞，很不優雅，維護起來也很累。</p><figure class="image"><img src="https://assets.matters.news/embed/a9e64665-8b76-4239-8d2a-b13736f11f25.png" data-asset-id="a9e64665-8b76-4239-8d2a-b13736f11f25" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>看到❌和✔️之間那可愛的斜線了嗎？<br class="smart">/代表預設，也就是頻道權限會跟隨伺服器身分組的設定。<br class="smart">設定伺服器權限的步驟應為：<br class="smart">1.設定伺服器身分組權限<br class="smart">2.設定類別權限<br class="smart">3.設定頻道權限<br class="smart">處理2和3時請善用可愛的斜線和<strong>同步權限</strong>功能，沒有要修改的權限請用斜線。</p><figure class="image"><img src="https://assets.matters.news/embed/9aab53e3-193c-4b47-98e3-479c5ba5b279.png" data-asset-id="9aab53e3-193c-4b47-98e3-479c5ba5b279" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><h2><span>email驗證</span></h2><p>驗證你的email信箱，才能加入大部分伺服器，我想這大家已經已經知道了。<br class="smart">冷知識：沒驗證信箱的，未來帳號隨時可能被鎖。</p><h2>手機驗證</h2><p>驗證手機號碼，現在大部分項目都把伺服器驗證等級調成最高，這也是必備的。</p><h2>2FA(Two Factor Authentication)</h2><p>2FA的中文是雙因素驗證，相信有用過交易所都應該蠻熟的。2FA的2指的是有別於密碼外，額外的第二層驗證。有些交易所使用的是手機簡訊驗證，Discord使用的則是Google Authenticator。<strong>所有Mod都應該開啟2FA，</strong>這能有效提升帳號安全性，如同防彈背心一樣。但這並不代表你可以亂點連結，防彈背心只是防流彈，即使開了2FA，你token被盜一樣涼了。先不說2FA，正常情況下，使用email和密碼在新的IP登入時，Discord會傳email到你信箱，要求授權新位置的登入，如果沒授權就無法登入。而token登入可以繞過email驗證和2FA。至於為啥官方把token放在local，我也不知道。社群已經吵這個吵了好幾年了，官方死都不改= =。</p><figure class="image"><img src="https://assets.matters.news/embed/36ebfa70-0150-43b2-8b8d-e6cb471578be.png" data-asset-id="36ebfa70-0150-43b2-8b8d-e6cb471578be" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><h2>停權/踢出/禁言</h2><p>管理項目時，對scam的請直接停權，FUD的踢出，起爭執的解決完衝突視情況禁言。<br class="smart">被停權的對象，直到解除為止都無法加入該伺服器。<br class="smart">如果遇到在每個頻道都貼scam連結的，停權+刪除24小時內所有訊息是最好的方法。Mod應清楚這些動作的使用時機。</p><figure class="image"><img src="https://assets.matters.news/embed/83d788f7-a11d-433b-9856-52e19fd8359a.png" data-asset-id="83d788f7-a11d-433b-9856-52e19fd8359a" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><h2>偽裝項目管理員</h2><p>騙你註記詞或Discord帳號。<br class="smart">別理私訊。</p><h2>偽裝metamask官方</h2><p>騙你註記詞。<br class="smart">別理私訊。</p><h2>偽裝Discord官方</h2><p>騙你Discord帳號。<br class="smart">別理私訊。</p><h2>free Nitro</h2><p>nuff say</p><figure class="image"><img src="https://assets.matters.news/embed/ce1574f4-eb7d-480a-9b00-38a714372d31.png" data-asset-id="ce1574f4-eb7d-480a-9b00-38a714372d31" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><figure class="image"><img src="https://assets.matters.news/embed/dfe616f5-3bae-4200-8137-b80d511626a7.jpeg" data-asset-id="dfe616f5-3bae-4200-8137-b80d511626a7" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><h2>假官網</h2><p>騙你錢包授權。<br class="smart">別理私訊。</p><h2>下載不明檔案</h2><p>本人親身經歷，有個自稱設計師的freelancer要我幫他發NFT，以保密協定為由，傳了個格式特殊的檔案，實際上是木馬。當然我沒事，用虛擬機開過了。<br class="smart">套句粗俗點的話</p><blockquote>trojan will kill your cat, eat your dog and make love to your wife.</blockquote><h2>惡意授權</h2><p>授權給盜版的bot會讓攻擊者取得你帳號的所有權限。<br class="smart">隨意授權有去無回，授權前請比對是否為官方bot。</p><h2>盜版collab.land</h2><p>騙你助記詞或錢包授權。<br class="smart">點下去你的NFT就和你say goodbye了。</p><h2>機器人被駭</h2><p>雖然這不太常發生，如果發生了絕對血流成河。真的發生時請至設定中找到<strong>已授權的應用程式</strong>並取消該bot的授權，並立刻踢出bot。<br class="smart">更：我錯了，前陣子CaptchaBot跟TicketTool都出事了……</p><h2>QR Code</h2><p>攻擊者可能會以合作/徵才等名義要求你掃QR Code驗證。有些還會配合盜版的機器人，實際上你掃的就是下面這個。掃了以後攻擊者就擁有該帳號所有權限，如下圖。</p><figure class="image"><img src="https://assets.matters.news/embed/b677e8f4-130a-4339-a91c-8739e470fa01.png" data-asset-id="b677e8f4-130a-4339-a91c-8739e470fa01" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>下圖為Demi CCIE向Dyno官方求證是否為盜版機器人的結果</p><figure class="image"><img src="https://assets.matters.news/embed/b3cb5c61-2e45-4c07-aaae-ba05b7415b76.png" data-asset-id="b3cb5c61-2e45-4c07-aaae-ba05b7415b76" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><h2>javascript拖曳</h2><p>javascript是種程式語言，網頁的各種酷功能就是用javascript寫的。<br class="smart">當然很多危險的程式也是用js寫的。<br class="smart">以下是朋友遇到的真實事件。<br class="smart">起因是攻擊者假冒Sekira項目方，找我朋友擔任Mod，開出不錯的薪水，如下圖。</p><figure class="image"><img src="https://assets.matters.news/embed/ef72f202-d107-4d5b-907d-b4abda7c1d09.png" data-asset-id="ef72f202-d107-4d5b-907d-b4abda7c1d09" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>接著項目方要求我朋友照著以下影片方式操作，取得白單碼。</p><p>影片中可以看到，將網頁上的物件拖曳至書籤列，之後會自動跳轉至Discord。<br class="smart">其實這個行為就是在執行攻擊者的程式，用開發人員工具檢查那個物件，可以發現他執行了javascript，如下圖。</p><figure class="image"><img src="https://assets.matters.news/embed/6183bf19-99cf-475b-8029-aa702920b439.png" data-asset-id="6183bf19-99cf-475b-8029-aa702920b439" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>乍看之下程式碼沒啥問題，唯一可疑的是那串編碼過的字串。<br class="smart">於是我用工具去解碼base64。<br class="smart">看到下圖左方解碼結果，相信寫過js API的各位應該很熟悉。如果你不知道API是啥的話，簡單來說解碼出來的那段程式，會執行那個.txt裡面的程式。</p><figure class="image"><img src="https://assets.matters.news/embed/6c660069-1f71-49c9-b86d-ff85ed40e869.png" data-asset-id="6c660069-1f71-49c9-b86d-ff85ed40e869" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>.txt檔裡面的程式會盜你的token<br class="smart">如果你真的很想看看那個txt的內容，這裡是雲端連結，請自取。<br class="smart"><a href="https://drive.google.com/file/d/11SiUpyN_qsjdeT7uFFLB0ATdtZCgo7J_/view?usp=sharing" rel="noopener noreferrer" target="_blank">https://drive.google.com/file/d/11SiUpyN_qsjdeT7uFFLB0ATdtZCgo7J_/view?usp=sharing</a></p><figure class="image"><img src="https://assets.matters.news/embed/1d0de585-e841-448c-b77e-9258349fdcf5.png" data-asset-id="1d0de585-e841-448c-b77e-9258349fdcf5" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>另外，稍微解釋一下token是什麼，和如何查看你的token。token中文翻譯叫權杖，簡單來說就是帳號密碼合一，由亂碼組成的字串。擁有帳號的token就等同擁有該帳號完整的存取權，也能執行很多自動化的程式。token會隨著密碼而改變，密碼變更後，舊有的token會失效，這點我在2FA的地方提過了。<br class="smart">要查看你的token，在Discord網頁版按下F12開啟開發人員工具，找到Application分頁，點左邊的storage找到https://discord.com，再從右邊用你的老花眼找到token，找到以後把token給我，我就可以用你的帳號加一些色色的群（誤）。總之，如果你用的工具會需要和你要token，最好清楚自己在做什麼。</p><figure class="image"><img src="https://assets.matters.news/embed/4da15db2-a61b-407a-8139-bbba8cab6e20.png" data-asset-id="4da15db2-a61b-407a-8139-bbba8cab6e20" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><h2>spamming attack</h2><p>用selfbot惡意洗頻，除了很煩以外其實還好，停權+刪除24小時內訊息就完事了。預防方式就是把伺服器驗證等級調到最高，使用captcha進群驗證。如果前面你有認真讀的話應該知道怎麼處理。舉個例子，之前狐蒙群有個小粉紅在吵政治，後來惱羞就用selfbot洗一排台獨去死還啥的。</p><h2>token spamming attack</h2><p>這個比較棘手一點，攻擊者會用selfbot大量發送token，Discord程式會判定該伺服器在進行騙取token的活動，並封鎖該伺服器。這個無法可防，預防方式和上面一樣，但有心人真的要攻擊也擋不了，加上Discord官方消極的處理方式，要恢復受攻擊的伺服器很難。</p><h2>server vanity url</h2><p>在講這攻擊方式前，我們要先了解伺服器邀請制度。<br class="smart">有很多種方式可以產生邀請連結邀請別人。<br class="smart">下圖是在頻道建立邀請。</p><figure class="image"><img src="https://assets.matters.news/embed/c8128fcc-ba73-42f6-9072-828377d041b4.png" data-asset-id="c8128fcc-ba73-42f6-9072-828377d041b4" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>下圖則是在伺服器上點右鍵邀請其他人。</p><figure class="image"><img src="https://assets.matters.news/embed/c4bef509-cd5a-428c-ac5a-247173b666e4.png" data-asset-id="c4bef509-cd5a-428c-ac5a-247173b666e4" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>上面兩者所產生的邀請連結都可以自訂邀請時間和最大使用次數等等，如下圖。</p><figure class="image"><img src="https://assets.matters.news/embed/67e42c86-edab-471c-94bd-03be069c6175.png" data-asset-id="67e42c86-edab-471c-94bd-03be069c6175" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>上面2者產生的邀請連結屬於個人邀請連結，而我們要討論的是伺服器個性化網址。伺服器個性化網址要伺服器boost達到等級3才能解鎖。</p><figure class="image"><img src="https://assets.matters.news/embed/3a7faafe-abad-4778-b762-2047a230b281.png" data-asset-id="3a7faafe-abad-4778-b762-2047a230b281" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>伺服器個性網址的設定介面如下圖。</p><figure class="image"><img src="https://assets.matters.news/embed/350a0296-a628-474f-a52f-2823804e45e5.png" data-asset-id="350a0296-a628-474f-a52f-2823804e45e5" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>那麼，為何個性化網址會有資安風險？<br class="smart">正常情況下是很安全的，但如果你開開關關這個功能就不是了。<br class="smart">舉個栗子🌰，前陣子Gucci Discord點邀請連結進去卻是假的。<br class="smart">原因是Gucci原本開了伺服器個性網址，後來又關了。伺服器個性網址的機制是，可以取任何名字，只要不與現存的網址衝突即可。假設Gucci當時的伺服器個性網址是https://discord.gg/gucci，當Gucci的Mod關閉這功能時，攻擊者馬上創一個假的伺服器，將伺服器boost到等級3，並把伺服器個性網址改成https://discord.gg/gucci。如此一來，往後使用者點這個邀請連結，進入的就會是假的Discord，連上假的mint網站，ETH被騙光光。<br class="smart">預防方式：<br class="smart">1.一開始就不要開伺服器個性網址<br class="smart">2.如果已經開了，就不要關<br class="smart">處理方式：<br class="smart">如果已經發生了，請在Twitter、Instagram等其他社群媒體發布公告，請大家協助刪除之前發布的原邀請網址，並提醒大家小心詐騙。</p><h2>如何預防</h2><p>Mod應有完善的資安觀念，<strong>定時</strong>檢查頻道權限。</p><h2>事件發生時處理方式</h2><p>1.先查看審核日誌確認受到攻擊的原因（Mod帳號被盜？伺服器權限設定失當？）。<br class="smart">2.如果你是伺服器擁有者或者是Mod且權限夠，馬上停掉所有身分組的管理權限。如果你權限不夠請聯絡伺服器擁有者處理。如果你是帳號被盜的那個，請嘗試改掉你的密碼和開啟2FA（你早就應該開了= =）。由於改密碼會重置token，攻擊者持有的舊token也就沒用了。<br class="smart">3.刪除攻擊者發布的釣魚連結、假mint網站。</p><h2>善後</h2><p>1.查看審核日誌，確認攻擊者做的變更已復原，特別是webhook，請全部刪掉。<br class="smart">2.重新檢查身分組、頻道權限。<br class="smart">3.發布公告，和成員解釋事件始末。<br class="smart">4.加強資安觀念，把本文6000多字全部背起來。</p><blockquote>已經到底啦=w=Congrats！你現在是Discord資安大佬了，應徵項目Mod時可以和項目方說你讀過這篇文章，說不定馬上就被錄取了呢（笑）我認為這些知識是每個Moderator都該具備的。如果你是Mod，這篇文的內容你應該刻在腦子裡；如果你是項目方，可以抽考看看你的Mod到底知不知道這些知識，如果一問三不知可以直接炒了（誤）。如果你的身分不是上面兩者，你也應該熟讀本文，保護好自己，並分享給你認識的項目方好朋朋。阿…你說你上面有看沒有懂？沒問題！你付ETH，我幫你弄到好，讓你省去吸收這些知識的時間UwU。</blockquote><blockquote>在本文撰寫時，正好Rare Bears和Aiyah Verse被駭，頻道全噴光。這就是資安防護的重要性，也就是為什麼一堆項目願意花大筆ETH找我的原因。</blockquote><blockquote>大家可能不知道我是誰，簡單自我介紹一下我是Xeift，19歲單身，。興趣是下西洋棋（很菜）和看動漫，平常偶而啃啃台灣/日本文學，目前努力自學javascript、solidity和日文中。學測成績廢到笑，一拿到答案卡直接當六合彩簽。多益860還算堪用。有多年Discord管理經驗，也是Discord bot開發者，我寫的NFT bot在34個項目的Discord上運行。目前在各NFT項目和社群，如台灣DAO，擔任Mod和資安防護的部分。有些項目方想實現一些酷功能也會找我寫客製化bot。</blockquote><blockquote>合作或有任何疑問歡迎透過以下管道找我，平常很忙，回覆訊息若有延遲請見諒。不接Mod，目前大多以顧問的角色親自處理和解答Discord相關問題。要割韭菜的項目請不要找我，價格再高我都不會接，我已經推掉好幾個合作。我只為打算付出心力認真經營的項目方做事。</blockquote><figure class="image"><img src="https://assets.matters.news/embed/0eb7c215-a67b-4313-9567-a42457a6fe5d.png" data-asset-id="0eb7c215-a67b-4313-9567-a42457a6fe5d" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><blockquote>Discord: Xeift#1230<br class="smart">Facebook: <a href="https://www.facebook.com/xeift" rel="noopener noreferrer" target="_blank">https://www.facebook.com/xeift</a><a href="https://www.facebook.com/xeiftGitHub:" rel="noopener noreferrer" target="_blank"><br class="smart"></a>GitHub: <a href="https://github.com/Xeift/" rel="noopener noreferrer" target="_blank">https://github.com/Xeift/</a><a href="https://github.com/Xeift/Telegram:" rel="noopener noreferrer" target="_blank"><br class="smart"></a>Telegram: <a href="https://t.me/Xeift" rel="noopener noreferrer" target="_blank">https://t.me/Xeift</a><a href="https://t.me/XeiftTwitter:" rel="noopener noreferrer" target="_blank"><br class="smart"></a>Twitter: <a href="https://twitter.com/Xeift1" rel="noopener noreferrer" target="_blank">https://twitter.com/Xeift1</a><a href="https://twitter.com/Xeift1Email:" rel="noopener noreferrer" target="_blank"><br class="smart"></a>Email: Xeift@yandex.com<br class="smart">ENS: xeift.eth</blockquote>  
</div>
            