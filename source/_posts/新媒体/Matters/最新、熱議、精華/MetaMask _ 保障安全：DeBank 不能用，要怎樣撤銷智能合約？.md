
---
title: 'MetaMask _ 保障安全：DeBank 不能用，要怎樣撤銷智能合約？'
categories: 
 - 新媒体
 - Matters
 - 最新、熱議、精華
headimg: 'https://assets.matters.news/embed/20127f95-5ca2-4c58-86be-86650008fab9.png'
author: Matters
comments: false
date: Mon, 30 May 2022 12:48:23 GMT
thumbnail: 'https://assets.matters.news/embed/20127f95-5ca2-4c58-86be-86650008fab9.png'
---

<div>   
<p>很多時候當 MetaMask 錢包被盜，都會說「去 <a href="https://debank.com/" rel="noopener noreferrer" target="_blank">DeBank</a> 啦！」例如這裡的 <a href="https://www.abmedia.io/20220120-how-to-rovoke-permission-of-dapp" rel="noopener noreferrer" target="_blank">教學</a> 就是寫 DeBank 網站的事。但現時到 DeBank，會看到搞 DeBank Approval 這一部份經已轉移到 <a href="https://rabby.io/" rel="noopener noreferrer" target="_blank">Rabby</a>，難道又要轉用新服務（雖然是來自 DeBank 同一集團）？它會不會有 bug 呢？就算沒有 bug 安裝多一個瀏覽器擴充功能也超麻煩的。為免擔心和懶，所以我找一下 MetaMask 官方有沒有 <a href="https://metamask.zendesk.com/hc/en-us/articles/4446106184731-How-to-revoke-smart-contract-allowances-token-approvals" rel="noopener noreferrer" target="_blank">教學</a>。</p><figure class="image"><img src="https://assets.matters.news/embed/20127f95-5ca2-4c58-86be-86650008fab9.png" data-asset-id="20127f95-5ca2-4c58-86be-86650008fab9" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><hr><h2>斷開 Dapp V.S. 撤銷 Smart Contract</h2><p>智能合約許可 ( Smart Contract Allowances ) 涉及容許你的 Dapps 代替你去操作及移動錢包內的代幣。例如使用 DEX 就是要做智能合約許可，讓他們在你交易時收取手續費（不收手續費他們吃風咩）。所以雖然這些都是 Smart Contract，但是不需要趕盡殺絕。</p><p>撤銷（智能合約）許可 ( Revoking an approval/allowance ) 代表 Dapps 無法再訪問你錢包及移動內裡的東西。</p><p>將你的錢包與 Dapps 斷開 ( Disconnecting your wallet ) 代表這隻 Dapp 不能確認及傳送交易，即是不能暗中發動交易及查看過住活動。</p><p>以下將深入介紹兩者的空要性。</p><hr><h2><strong>將 MetaMask 與 Dapp 斷開連接並不能確保你的代幣是安全的！</strong></h2><p>當人們說 Revoke 撤銷許可時，他們的意思是在智能合約級別。 而 Dapp Disconnect 斷開連接並不包括智能合約。</p><p>將 MetaMask 連接到 Dapp（主要）容許該 Dapp：</p><ol><li>查看你的地址</li><li>要求你確認並從該地址發送交易。</li></ol><p>當 Dapp 要求你進行交易時，你會看到「Approve」/「Deny」提示，代表你不確認就無法發送任何內容。</p><p>將 MetaMask 與 Dapp 斷開連接並沒有什麼壞處（對你的私隱有好處），但<strong>它會給你一種虛假的安全感</strong>。因為還有另一種你互動過的合約為你做鏈上處理。</p><ul><li>前端 / 網站 / 錢包層級的事 = 廣東話「表面嗰浸」（表面看到對應幕後發生的事）</li><li>幕後 = 後端 / 智能合約 / 代幣 = 你通常看不到的 = 實際的背後運作方式</li></ul><p>了解背後運作方式非常有幫助，例如：</p><ol><li>表面上發送 ETH 時，你只需將 1 ETH 發送到收件人地址。</li><li>實際上發送代幣時，你是向代幣的合約地址發送 0 ETH 並包含「向收件人地址發送 1 個代幣」的說明。而當你swap/mint/sell/stake/farm 其實都是在做同樣的操作。</li><li>當合約需要移動代幣以執行某項操作時，你必須首先「批准」該合約地址才可以操作/移動這些代幣。而<strong>你可以容許那個地址移動 1 個代幣或「無限」數量的代幣</strong>。為了不麻煩及節省交易費用，通常使用「無限」金額代替不停批准這個動作。</li><li>但是這樣<strong>那個合約地址就可以「無限移動」移動你的代幣</strong>。正常是不會這樣的，但是惡意合約或升級後加入惡意就會這樣。</li></ol><p>正是發送代幣的批准行動有可能導致你的資產被盜，<strong>所以結論是你不止要 DISCONNECT，還要 REVOKE！</strong></p><hr><h2>如何 Disconnect</h2><p>之前有 <a href="https://matters.news/@daisy/199183-%E9%98%BF%E7%91%AA%E7%B7%9A%E4%B8%8A%E5%B7%A5%E4%BD%9C%E5%9D%8A-nft-%E6%9C%89%E8%81%BD%E6%9C%89%E8%B3%BA-traveloggers-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E7%9A%84%E5%8A%9F%E8%83%BD-nft-%E5%AE%89%E5%85%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A0%85-bafyreieu477jdujwx3xwkhx7nnww2oqy66kvhuiigwjmwcfcnvsvwap5gy" rel="noopener noreferrer" target="_blank">寫過</a>，但過於簡單，所以再寫一下。</p><p>1. 點 MetaMask 右上角三個點點，再選「Connected sites」。</p><figure class="image"><img src="https://assets.matters.news/embed/e039d604-7fa4-4bef-bd88-e3aa7f07de4d.png" data-asset-id="e039d604-7fa4-4bef-bd88-e3aa7f07de4d" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>2. 選擇不需要的，點「Disconnect」。</p><figure class="image"><img src="https://assets.matters.news/embed/37cfdff0-b7ff-459f-ba28-1fbce9ac9de4.png" data-asset-id="37cfdff0-b7ff-459f-ba28-1fbce9ac9de4" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>3. 在 Are you sure 畫面再點 Disconnect 即可。</p><figure class="image"><img src="https://assets.matters.news/embed/002af5b4-bb1d-4514-8b03-3ad4500e536f.png" data-asset-id="002af5b4-bb1d-4514-8b03-3ad4500e536f" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><h2>如何 Revoke</h2><p><a href="https://etherscan.io/tokenapprovalchecker" rel="noopener noreferrer" target="_blank">Etherscan</a>、<a href="https://bscscan.com/tokenapprovalchecker" rel="noopener noreferrer" target="_blank">BscScan</a>、<a href="https://polygonscan.com/tokenapprovalchecker" rel="noopener noreferrer" target="_blank">Polygonscan</a>、<a href="https://cronoscan.com/tokenapprovalchecker" rel="noopener noreferrer" target="_blank">Cronoscan</a>、<a href="https://hecoinfo.com/tokenapprovalchecker" rel="noopener noreferrer" target="_blank">Hecoinfo</a>…原來有相對而言比較官方的 Revoke 不用第三者的，以下使用 Polygonscan 作示範。</p><p>1. 到 Polygonscan 輸入錢包地址。</p><figure class="image"><img src="https://assets.matters.news/embed/a45239b0-6de7-4eaa-9a4b-0248ccb7c234.png" data-asset-id="a45239b0-6de7-4eaa-9a4b-0248ccb7c234" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p> 2. 看到一些經已授權了的合約，例如我打算 Revoke 下面 Wrapped Ether 的合約，因為未連接錢包，按右手邊的「Revoke」是無法做任何事的。先點「Connect to Web3」。</p><figure class="image"><img src="https://assets.matters.news/embed/f78deded-db55-41e6-98e5-ac6b2c20ced8.png" data-asset-id="f78deded-db55-41e6-98e5-ac6b2c20ced8" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>3. 彈出 MetaMask 視窗，選擇帳戶再點「下一頁」。</p><figure class="image"><img src="https://assets.matters.news/embed/b06a793d-b398-4fb1-b542-6ff0766d1063.png" data-asset-id="b06a793d-b398-4fb1-b542-6ff0766d1063" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>4. 點「連線」。</p><figure class="image"><img src="https://assets.matters.news/embed/5189cf4c-f213-4669-bb0e-372a02b03f5b.png" data-asset-id="5189cf4c-f213-4669-bb0e-372a02b03f5b" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>5. 成功連接錢包後「Revoke」就可以按下去啦。</p><figure class="image"><img src="https://assets.matters.news/embed/59820685-0786-49c8-945e-d299fe8d5f49.png" data-asset-id="59820685-0786-49c8-945e-d299fe8d5f49" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>6. 出現 Revoke Approval 視窗，點「Revoke」就搞定了。</p><figure class="image"><img src="https://assets.matters.news/embed/320a9b22-d5b8-4f69-8930-7c1dafa6135f.png" data-asset-id="320a9b22-d5b8-4f69-8930-7c1dafa6135f" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>此外你也可以到 <a href="https://rabby.io/" rel="noopener noreferrer" target="_blank">Rabby</a>、<a href="https://revoke.cash/" rel="noopener noreferrer" target="_blank">Revoke</a>, <a href="https://app.unrekt.net/" rel="noopener noreferrer" target="_blank">Unrekt</a> 或 <a href="https://approved.zone/" rel="noopener noreferrer" target="_blank">approved.zone</a> 做 Revoke。</p><h2>保護 MetaMask 安全</h2><p> 綜合而言最好做到這幾點： </p><ol><li>定時定候 Disconnect 與 Revoke</li><li>Disconnect 與 Revoke 當然是好，但是 Approve 時也要留神</li><li>玩一些新東西時，最好開啟一個全新的錢包</li><li>用硬件錢包</li></ol>  
</div>
            