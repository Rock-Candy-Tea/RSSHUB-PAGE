
---
title: '华为天才少年造出自动驾驶单车，图纸已开源，硬件成本一万，B站老板：重新定义「自行」车'
categories: 
 - 新媒体
 - 36kr
 - 资讯
headimg: 'https://img.36krcdn.com/20210609/v2_f272e487a95e4ac5897cbc31519c64ea_img_000'
author: 36kr
comments: false
date: Wed, 09 Jun 2021 10:47:53 GMT
thumbnail: 'https://img.36krcdn.com/20210609/v2_f272e487a95e4ac5897cbc31519c64ea_img_000'
---

<div>   
<p>编者按：本文来自<a class="project-link" data-id="3968527" data-name="微信" data-logo="https://img.36krcdn.com/20200916/v2_811751a081924fa9af8741ce120bd7bf_img_png" data-refer-type="2" href="https://36kr.com/projectDetails/3968527" target="_blank">微信</a>公众号<a href="https://mp.weixin.qq.com/s/PMHtrd1tNa-hLZJulEcvZw">“量子位”（ID:QbitAI）</a>，作者：鱼羊 金磊，36氪经授权发布。</p> 
<p>果然高手在民间。</p> 
<p>谁能料到，一辆自行车的硬核打开方式，竟是大火的自动驾驶。</p> 
<p>踢开脚撑，金鸡独立、稳如泰山：</p> 
<p><img src="https://img.36krcdn.com/20210609/v2_f272e487a95e4ac5897cbc31519c64ea_img_000" data-img-size-val="661,369" referrerpolicy="no-referrer"></p> 
<p>单侧加个板砖？小场面：</p> 
<p><img src="https://img.36krcdn.com/20210609/v2_69e781a516c84ee19c9abc20d7f2c42e_img_000" data-img-size-val="661,369" referrerpolicy="no-referrer"></p> 
<p>毕竟，它是连高难度“杂技姿势”都能hold住的自行车：</p> 
<p><img src="https://img.36krcdn.com/20210609/v2_b2874aae1107422ab485c56a2b1c0b71_img_000" data-img-size-val="661,369" referrerpolicy="no-referrer"></p> 
<p>没事走两步？</p> 
<p>可以有，还是会自己拐弯的那种：</p> 
<p><img src="https://img.36krcdn.com/20210609/v2_c25692b8992f48a283ae4457acc922e2_img_000" data-img-size-val="651,333" referrerpolicy="no-referrer"></p> 
<p>避障、上路，毫无压力：</p> 
<p><img src="https://img.36krcdn.com/20210609/v2_d8aae16666ab4d16a60ac5b6d085d058_img_000" data-img-size-val="651,333" referrerpolicy="no-referrer"></p> 
<p>甚至还配备了<a class="project-link" data-id="132410" data-name="特斯拉" data-logo="https://img.36krcdn.com/20200729/v2_e76e3d3d44c440138f072b13bc84a6dc_img_000" data-refer-type="2" href="https://36kr.com/projectDetails/132410" target="_blank">特斯拉</a>都没有的激光雷达。</p> 
<p>这就是B站“野生钢铁侠”稚晖君耗时4个月时间（基本只是周末），打造出的全新项目XUAN（轩）。</p> 
<p><img src="https://img.36krcdn.com/20210609/v2_91719528bdfb454da4e8391cfb7bc2ba_img_000" data-img-size-val="1080,612" referrerpolicy="no-referrer"></p> 
<p>短短几天，播放量超过150W，硬核、复杂程度之高，直接看呆一众网友。</p> 
<p>来感受一下这个画风。</p> 
<p><img src="https://img.36krcdn.com/20210609/v2_f58e501c906f48e5a018b58913f18fec_img_000" data-img-size-val="1080,259" referrerpolicy="no-referrer"></p> 
<p>连B站老板陈睿都被吸引而来：</p> 
<p><img src="https://img.36krcdn.com/20210609/v2_ee59cd422c1e4e08aa19edf5329ce024_img_000" data-img-size-val="1080,168" referrerpolicy="no-referrer"></p> 
<p>甚至业内人士也直呼：</p> 
<blockquote> 
 <p>任何一个部分拿出来都是一篇本科毕业论文。</p> 
 <p>还有实物，硕士毕业绰绰有余……</p> 
</blockquote> 
<p><img src="https://img.36krcdn.com/20210609/v2_76819f6f2f1a47e7bf951a39d2f08065_img_000" data-img-size-val="1080,193" referrerpolicy="no-referrer"></p> 
<p>稚晖君到底是如何打造的这么一台“<a class="project-link" data-id="331494" data-name="赛博" data-logo="https://img.36krcdn.com/20201106/v2_5de952dcb0764108900e679f0cfcb2e7_img_000" data-refer-type="2" href="https://36kr.com/projectDetails/331494" target="_blank">赛博</a>朋克”自行车？</p> 
<p>接下来，让我们<a class="project-link" data-id="81906" data-name="一起" data-logo="https://img.36krcdn.com/20210601/v2_2bbe1c6ad79748b3be29e04d8999edac_img_000" data-refer-type="1" href="https://www.36dianping.com/space/4772100123" target="_blank">一起</a><a class="project-link" data-id="104448" data-name="一探究竟" data-logo="https://img.36krcdn.com/20200729/v2_e192c32f7cd2478780d14d4f53444ae6_img_000" data-refer-type="2" href="https://36kr.com/projectDetails/104448" target="_blank">一探究竟</a>（经授权）。</p> 
<p>（你可能还很关心它的价格，别着急，我们文末揭晓答案~）</p> 
<h2>把自行车做成自动驾驶，共分几步？</h2> 
<p>稚晖君选择的自行车，是大家非常熟知的死飞（Fixed Gear）。</p> 
<p>（没错，就是漂移玩家的最爱）</p> 
<p>这种自行车的一大特点，便是结构简单、没有刹车。</p> 
<p>于是，稚晖君先对死飞进行了一个CAD建模的工作。</p> 
<p><img src="https://img.36krcdn.com/20210609/v2_ecf6e7c660724f2ba09edc67a2023452_img_000" data-img-size-val="640,360" referrerpolicy="no-referrer"></p> 
<p>建模工作完成之后，便<a class="project-link" data-id="95377" data-name="得到" data-logo="https://img.36krcdn.com/20200929/v2_fcdf767846d041309970adf0877fc666_img_000" data-refer-type="2" href="https://36kr.com/projectDetails/95377" target="_blank">得到</a>了一辆虚拟自行车。</p> 
<p>此后的所有改造工作，便可以在计算机上完成。</p> 
<p>整体来看，XUAN的诞生一共分为三大步：</p> 
<p><strong>硬件改造：</strong>因为自行车是一个欠驱动系统，所以先要做的就是让它站稳，然后跑起来。这一步将涉及一套复杂的自动控制系统。</p> 
<p><strong>智能化：</strong>毕竟自动驾驶嘛，“工具人”就得被抹去。因此，这一步便是搭载一整套传感器组成的<a class="project-link" data-id="374856" data-name="感知网" data-logo="https://img.36krcdn.com/20200916/v2_811751a081924fa9af8741ce120bd7bf_img_png" data-refer-type="2" href="https://36kr.com/projectDetails/374856" target="_blank">感知网</a>络，以及一个算力足够强大的计算芯片作大脑。</p> 
<p><strong>软件和算法：</strong>最后一步，便是在上述的硬件基础上，开发、实现一套感知和控制算法。稚晖君称之为“注入灵魂”。</p> 
<p><img src="https://img.36krcdn.com/20210609/v2_e5c36857909b47f4a7a7d9f17f3bc42e_img_000" data-img-size-val="800,394" referrerpolicy="no-referrer"></p> 
<p>Step by Step，先来看下第一个大问题。</p> 
<h2>自行车怎么自己保持平衡？</h2> 
<p>在骑自行车的时候，前后方向的平衡，靠得是2个轮子的支撑和地面摩擦力。</p> 
<p>而左右方向上，运动过程中靠的是龙头的左右调节，获取转向的加速度，以此抵消重力的影响。像这样：</p> 
<p><img src="https://img.36krcdn.com/20210609/v2_a39bf34f4421434a96e6a98df3649b39_img_000" data-img-size-val="640,360" referrerpolicy="no-referrer"></p> 
<p>那么在静止状态下呢？</p> 
<p>稚晖君给出的思路便是——角动量守恒。</p> 
<p>简单来说，当车子在重力作用下发生倾倒，就用动量轮来产生一个相反力矩，抵消掉重力力矩。</p> 
<p>具体而言，稚晖君在这辆死飞座位下方安装了一个无刷电机，目的是驱动一个金属的动量轮。</p> 
<p><img src="https://img.36krcdn.com/20210609/v2_9cbd9bc4752d415eb66cc038a5382070_img_000" data-img-size-val="1080,492" referrerpolicy="no-referrer"></p> 
<p>而在座位后方，他也安装了一个无刷电机，这个目的则是靠摩擦力来驱动后轮，让自行车整体前后运动。</p> 
<p><img src="https://img.36krcdn.com/20210609/v2_34e65ceb969a4513983e9f8c8d5554a4_img_000" data-img-size-val="1080,507" referrerpolicy="no-referrer"></p> 
<p>稚晖君本是想用3D打印来完成这两个零件的加工，但碍于材料硬度和刚性不足，所以金属材料成为了此次的首选。</p> 
<p>（所幸，稚晖君<a class="project-link" data-id="72045" data-name="朋友家" data-logo="https://img.36krcdn.com/20200729/v2_0a17822ed5c24f8aa725ad4b2a3a90d0_img_000" data-refer-type="2" href="https://36kr.com/projectDetails/72045" target="_blank">朋友家</a>里“有厂”，问题迎刃而解）</p> 
<p>而后，便是快乐的组装环节：</p> 
<p><img src="https://img.36krcdn.com/20210609/v2_cc76b79cb8c24aa0897e7dd685498633_img_000" data-img-size-val="640,360" referrerpolicy="no-referrer"></p> 
<p>OK，自行车的平衡问题，就此解决。</p> 
<h2>自行车的“机器大脑”</h2> 
<p>硬件框架有了，想让自行车能跑起来，甚至能认路，下一步就是上“脑子”。</p> 
<p>跟人类相似，机器人也分“大脑”和“小脑”。</p> 
<p>简单来说，小脑用来控制实时行动；大脑则负责耗费算力、高时延的感知和决策。</p> 
<p>这一回，稚晖君给自行车上的“小脑”是ESP32。</p> 
<p>ESP32是一种低成本、低功耗的单片机控制器，集成Wi-Fi和双模蓝牙。</p> 
<p><img src="https://img.36krcdn.com/20210609/v2_3e9b446bee3e4caf826fe344ade9894f_img_000" data-img-size-val="1080,628" referrerpolicy="no-referrer"></p> 
<p>基于FreeRTOS（一个开源嵌入式实时操作系统），稚晖君搭建了小脑的RPC通信框架，用来实现传感器的数据处理，以及电机的控制算法。</p> 
<p>“大脑”则是昇腾310。这是昇腾系列的边缘计算芯片，基于达芬奇架构，最高能够提供22TOPs的算力。</p> 
<p><img src="https://img.36krcdn.com/20210609/v2_950cfb117074424d82b751f591417ba8_img_000" data-img-size-val="1080,578" referrerpolicy="no-referrer"></p> 
<p>大脑的算法开发，主要基于昇腾AI栈和ROS（机器人操作系统）实现。</p> 
<p>于是，在深度相机、激光雷达等传感器的帮助之下，这辆自行车能够检测出周围的物体，实现避障和跟随：</p> 
<p><img src="https://img.36krcdn.com/20210609/v2_5cbddee8150d434f843437d5e402dec5_img_000" data-img-size-val="273,152" referrerpolicy="no-referrer"></p> 
<p>还能够机智地识别地形，给自己规划路径：</p> 
<p><img src="https://img.36krcdn.com/20210609/v2_68d34689c0dd4049a532e77f905955af_img_000" data-img-size-val="640,360" referrerpolicy="no-referrer"></p> 
<h2>自行车的“机器心脏”</h2> 
<p>当然啦，“成精”的自行车，不仅要有头脑，还要有一颗强劲的“心脏”来驱动它工作。</p> 
<p>而XUAN的“心脏”来自稚晖君的另一个项目，Ctrl-FOC矢量控制驱动器。</p> 
<p>这是一个超迷你双通道无刷电机驱动器，单路最大驱动电流能超过100A。</p> 
<p>值得一提的是，稚晖君的这一FOC驱动器有两个版本的设计方案，其中一个版本，电路设计为上下叠板设计，将逻辑单元和功率单元分开。也就是说，只需要替换掉驱动电路，就可以匹配更大功率的电机。</p> 
<p>具体到XUAN这个项目，下图中这么大点的驱动器，最终实现了两路共100A的无刷电机FOC控制，还驱动了车头60kg扭力舵机和散<a class="project-link" data-id="50589" data-name="热风" data-logo="https://img.36krcdn.com/20200729/v2_90c7160b4cc1486ea6f089003a7d900b_img_000" data-refer-type="2" href="https://36kr.com/projectDetails/50589" target="_blank">热风</a>扇。</p> 
<p><img src="https://img.36krcdn.com/20210609/v2_1484dcb4d2d04d62b25f643ff4c26317_img_000" data-img-size-val="838,494" referrerpolicy="no-referrer"></p> 
<h2>最后，注入灵魂</h2> 
<p>万事俱备，但想要上路，至此还少了一点炼丹的灵魂——调参。</p> 
<p>稚晖君表示，这辆自动驾驶自行车的控制代码中，有超过50个重要参数，包括控制周期、反馈矩阵、PID增益、滤波器截止频率等等。</p> 
<p>此外，电机的功率、重心的分布等物理参数，也都会对最终的效果造成影响。</p> 
<p>稍有不慎，那自行车就不是稳如老狗那画风了……</p> 
<p><img src="https://img.36krcdn.com/20210609/v2_ff538f1c0088471598b5ee208d2d98a6_img_000" data-img-size-val="640,360" referrerpolicy="no-referrer"></p> 
<p>在数学建模之后，稚晖君还采用了游戏引擎Unity作为仿真环境，像正经自动驾驶研发那样，先在仿真环境里让自行车跑了个踏实。</p> 
<p><img src="https://img.36krcdn.com/20210609/v2_44736fa1f5b940abaeb716833e504527_img_000" data-img-size-val="640,360" referrerpolicy="no-referrer"></p> 
<p>总之，让一辆自行车成熟起来，自己上路，够不容易的。</p> 
<p>就有网友表示：</p> 
<blockquote> 
 <p>人傻了，毕业设计题目是自行车自平衡系统设计，做到调参就不会了。</p> 
</blockquote> 
<p><img src="https://img.36krcdn.com/20210609/v2_0091d1cff6ad42b0b18102455980c8da_img_000" data-img-size-val="1080,229" referrerpolicy="no-referrer"></p> 
<p>不过，受限于整车功率，目前这辆自行车还不能载人。</p> 
<p>另外，也有网友提出，用动量轮来控制平衡属于某种意义上的作弊。对此，稚晖君回应：现在的龙头传动结构设计不太合理，之后会尝试只用龙头控制平衡。</p> 
<p><img src="https://img.36krcdn.com/20210609/v2_d137fe32c200431482c2ce9917f953ca_img_000" data-img-size-val="1080,329" referrerpolicy="no-referrer"></p> 
<h2>为什么要造XUAN？</h2> 
<p>有关“栈溢出工程师”、“野生钢铁侠”稚晖君，想来关注B站科技区的小伙伴们已经很熟悉了。</p> 
<p>稚晖君本名彭志辉，2018年毕业于电子科技大学，2020年通过“天才少年计划”加入<a class="project-link" data-id="25167" data-name="华为" data-logo="https://img.36krcdn.com/20200729/v2_7c7826d711824e758a8e1511c9d7eecc_img_000" data-refer-type="2" href="https://36kr.com/projectDetails/25167" target="_blank">华为</a>。</p> 
<p>他的视频向来以硬核著称，比如从手画PCB到写C++代码全部一人搞定的<a href="http://mp.weixin.qq.com/s?__biz=MzIzNjc1NzUzMw==&mid=2247539109&idx=1&sn=539036e35bd78d0b8ca27c8fa9ef58ef&chksm=e8d0eed7dfa767c1ae86718f299e4a18c1b41475f44632071516e6bf8e47b0ef0eb7bd6724dc&scene=21#wechat_redirect">套娃小电视</a>。</p> 
<p>辣么这次，稚晖君又是怎么萌发了打造一辆自动驾驶自行车的念头的呢？</p> 
<p>理由有些“暴力”……</p> 
<blockquote> 
 <p>骑车不小心摔了，脸刹着地……</p> 
</blockquote> 
<p><img src="https://img.36krcdn.com/20210609/v2_99c76423559441319db5219fbfae6b2a_img_000" data-img-size-val="1080,729" referrerpolicy="no-referrer"></p> 
<p>稚晖君表示，“这事不能就这么过去了”，于是乎：</p> 
<p><img src="https://img.36krcdn.com/20210609/v2_d5cb94ded9d848acb1fa2656ebea21c9_img_000" data-img-size-val="872,280" referrerpolicy="no-referrer"></p> 
<p>（心疼稚晖君几秒）</p> 
<p>当然，稚晖君本人也在视频中表示，其实很早就有设计这种自行车的想法。</p> 
<p>最初是因为看到清华大学的那项自行车研究，可以跟随人类，敏捷避开障碍物。</p> 
<p>其背后的类脑芯片“天机”，也于2019年8月<a href="http://mp.weixin.qq.com/s?__biz=MzIzNjc1NzUzMw==&mid=2247526517&idx=1&sn=7c8899f34c92120bc68a0a25f9282317&chksm=e8d0df07dfa756117bc9f5f8e36f734fbd080eee7bb5c5e6f19d8c3c030af4424edc795ec44c&scene=21#wechat_redirect">登上Nature封面</a>。</p> 
<p><img src="https://img.36krcdn.com/20210609/v2_54bcc5ee4b8541bdb1e0daec33643cc6_img_000" data-img-size-val="600,337" referrerpolicy="no-referrer"></p> 
<p>好奇的小伙伴肯定会问了，二者有何区别？</p> 
<p><a class="project-link" data-id="397416" data-name="量子位" data-logo="https://img.36krcdn.com/20200729/v2_ac002e38e2904e0280dae679728d9e3e_img_000" data-refer-type="2" href="https://36kr.com/projectDetails/397416" target="_blank">量子位</a>替你们问完了哈~</p> 
<p>首先，是原理不太一样。</p> 
<p>清华的自行车模仿的是人类行为，没有使用动量控制，而稚晖君的“轩”则涉及到了动量控制。</p> 
<p>此外，在龙头方面，稚晖君表示在改进过后，也可以实现清华的控制方式（移动过程使用龙头平衡，静止状态使用动量平衡）。</p> 
<p>但最核心的一个区别就是，清华打造的自行车背后，核心是类脑芯片。</p> 
<p>对此，稚晖君表示：</p> 
<blockquote> 
 <p>他们的工作很厉害，我这个无法类比，只是受他们启发做了个类似的应用。</p> 
</blockquote> 
<p>为了体现跟清华工作的区别，稚晖君本人还在项目名字上下点了功夫。</p> 
<p>XUAN里的“U”，代表的意思是unNATURAL，“正经翻译”就是——没上过Nature……</p> 
<p><span style="letter-spacing: 0px;">这个项目一如既往地开源了，如果你也想复刻一下……</span></p> 
<p>哦对了，是时候该揭晓XUAN的造价了——据大神本人不完全统计，超3万元。</p> 
<p>不过，稚晖君也表示：</p> 
<blockquote> 
 <p>最终硬件成本来算的话应该不到一万，就激光雷达贵一点，主要还是试错成本。</p> 
</blockquote> 
<p>以及，划重点，不售卖哈~</p> 
<p><strong>视频连接：</strong></p> 
<p><span style="letter-spacing: 0px;">https://www.bilibili.com/video/BV1fV411x72a</span></p> 
<p><strong>项目连接：</strong></p> 
<p><span style="letter-spacing: 0px;">https://github.com/peng-zhihui/XUAN-Bike/tree/main/Hardware/XUAN%E5%8A%A0%E5%B7%A5%E4%BB%B6</span></p> 
<p><strong>参考链接：</strong></p> 
<p>https://zhuanlan.zhihu.com/p/147659820[2]https://www.bilibili.com/video/BV11V41127pq</p>  
</div>
            