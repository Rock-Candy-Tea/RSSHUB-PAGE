
---
title: '酒店用机器学习，预测哪些客人会放鸽子'
categories: 
 - 新媒体
 - 36kr
 - 资讯
headimg: 'https://img.36krcdn.com/20210330/v2_c59bf5f633c5478ca9d746cbc8eb9ba2_img_000'
author: 36kr
comments: false
date: Tue, 30 Mar 2021 08:08:34 GMT
thumbnail: 'https://img.36krcdn.com/20210330/v2_c59bf5f633c5478ca9d746cbc8eb9ba2_img_000'
---

<div>   
<p>编者按：本文来自<a class="project-link" data-id="3968527" data-name="微信" data-logo="https://img.36krcdn.com/20200916/v2_811751a081924fa9af8741ce120bd7bf_img_png" data-refer-type="2" href="https://36kr.com/projectDetails/3968527" target="_blank">微信</a>公众号<a href="https://mp.weixin.qq.com/s/Upuqor2EUj8V71NUwF-B4A">“HyperAI超神经”（ID:HyperAI）</a>，作者：神经小兮，36氪经授权发布。</p> 
<h3 label="二级标题" style><strong>内容提要：</strong></h3> 
<p>如今，大数据已经被各行各业所应用，酒店行业也不例外。充分利用大数据，使得酒店能够预测市场需求变化，进行智能化决策分析，改善经营状况。</p> 
<p>如今， 各大 OTA（Online Travel Agency）平台极大地方便了人们的出行，酒店住宿、景点门票等，只需要动动手指就可以轻松完成预订。</p> 
<p><img src="https://img.36krcdn.com/20210330/v2_c59bf5f633c5478ca9d746cbc8eb9ba2_img_000" data-img-size-val="640,525" referrerpolicy="no-referrer"></p> 
<p label="图片描述" classname="img-desc" class="img-desc" style>国内外酒店民宿预订平台，多达数十种</p> 
<p>为了吸引更多用户预订，这些平台会鼓励商家设定较为宽松的取消预订政策，比如可随时免费取消，或限时免费取消等。</p> 
<p>全球客房销售量最大的网上酒店预订网站 Booking（缤客网），就凭借可免费取消的优势，深受广大驴友喜爱。</p> 
<p>不过，对于用户来说，「免费取消」非常 nice，但对酒店来说，就很头大了。订单临时被取消，通常会给酒店带来以下损失：</p> 
<ul class=" list-paddingleft-2"> 
 <li><p>被取消房间无法及时出售，酒店损失收入；</p></li> 
 <li><p>酒店降低价格出售被取消房间，减少了利润</p></li> 
 <li><p>为了尽快订出这些房间，酒店需要增加额外的宣传、分销渠道的费用；</p></li> 
</ul> 
<p>在用户可以随时放酒店鸽子的情况下，酒店有没有什么办法，尽可能减少损失呢？</p> 
<p>一位葡萄牙业务分析师（Business Analyst，简称 BA，这一职位相当于 IT 公司的产品经理） Manuel Banza，有超过 5 年的酒店管理从业经验。他利用公开的欧洲酒店预订平台数据，发现了更容易取消订单的用户特点，以帮助酒店及时进行止损。</p> 
<h2 label="一级标题" style> 从近 12 万条酒店预订数据中，发现规律</h2> 
<p>作为一名数据科学爱好者，Manuel Banza 从数据科学和机器学习入手。</p> 
<p>他首先对一个「酒店预订需求数据集」（Hotel booking demand）进行了全面分析。该数据集包含了普通酒店和度假酒店共 32 个维度的数据，具体包括：</p> 
<p>用户国籍、预订时间、住宿时间、成人和儿童或婴儿的数量、订单最终是否取消、用户在此次订单之前共取消订单次数等信息。</p> 
<p>Hotel Booking Demand </p> 
<h3 label="二级标题" style>酒店预订需求数据集</h3> 
<p>发布机构：葡萄牙里斯本大学</p> 
<p>包含数量：共 119390 条数据，32 个维度</p> 
<p>数据格式：csv</p> 
<p>数据大小：16.9 MB（压缩文件 1.3 MB）</p> 
<p>地址：https://hyper.ai/datasets/14866</p> 
<p><img src="https://img.36krcdn.com/20210330/v2_ce7b6de6b49f42e0948d90ca1899ec6f_img_000" data-img-size-val="1080,348" referrerpolicy="no-referrer"></p> 
<p label="图片描述" classname="img-desc" class="img-desc" style>部分数据展示</p> 
<p>通过统计，Manuel Banza 发现一年时间里，取消酒店订单的用户真不少。</p> 
<p>2018 年 OTA 平台 Booking 上的预订订单中，有 49.8％ 的用户取消了订单；在 HRS Group 上，这一比例甚至高达 66%。整体来看，多家平台在 2018 年平均预订订单取消率达到 39.6%。</p> 
<p><img src="https://img.36krcdn.com/20210330/v2_5f1b24f08b2449a89b3c45282e812f8f_img_000" data-img-size-val="883,464" referrerpolicy="no-referrer"></p> 
<p label="图片描述" classname="img-desc" class="img-desc" style>各类预订渠道被取消的订单比例</p> 
<p>接着，作者对数据进行了探索性分析，有以下几个发现：</p> 
<ul class=" list-paddingleft-2"> 
 <li><p>普通酒店和度假酒店相比，订单更容易被客人取消；</p></li> 
 <li><p>春节和夏季的取消比例更大，而冬季的取消比例最低；</p></li> 
 <li><p>各种预订渠道中，用户在 OTA 平台下单最多，同时 OTA 平台上被取消订单的也最多；</p></li> 
 <li><p>用户预订时间越早，不确定性越大，取消的概率越大</p></li> 
</ul> 
<p>作者表示，预订时间是分析酒店收益表现时，最重要的指标之一。分析结果表明，提前 1 年以上预订的取消概率最高，为 57.14%；一周内预订取消概率最低，为 7.73%。</p> 
<p><img src="https://img.36krcdn.com/20210330/v2_e1b08f15f0f94b5a8a66fa0b0ef7dea0_img_000" data-img-size-val="1080,564" referrerpolicy="no-referrer"></p> 
<p label="图片描述" classname="img-desc" class="img-desc" style>预订提前的天数（横轴）与取消订单概率（纵轴）成正比</p> 
<p label="图片描述" classname="img-desc" class="img-desc" style>看来，计划越早越赶不上变化啊</p> 
<h2 label="一级标题" style> 机器学习模型：预测谁最可能「放鸽子」</h2> 
<p>对数据集进行全面分析后，作者开始建立预测订单取消的模型。</p> 
<h3 label="二级标题" style>第一步：数据清洗</h3> 
<p>首先，对数据集中缺失的值进行处理。如果该变量是数字变量，则必须用该特征的均值替换这些缺失值；如果该变量是分类特征，则必须用常数替换。</p> 
<p>然后删除 reservation_status（预订状态，该变量代表订单是否被取消，0 为未取消，1 为取消），因为这是机器学习模型将要预测的值。</p> 
<h3 label="二级标题" style>第二步：选择最佳模型</h3> 
<p>在开始为数据测试最佳算法之前，将数据集按 8:2 的比例分开。之后将用 80％ 的数据来训练模型，并将 20％ 的数据作为验证集。</p> 
<p>在数据科学领域，预测订单取消是一个监督分类问题，也叫做二元分类。因此，作者选取了几个现有的二分类模型如 LightGBM，CatBoost、XGBoost 及 H2O 等，进行训练及对比，最终选出了实验结果最佳的模型 CatBoost。</p> 
<p>通过 CatBoost 预测结果，发现以下几点：</p> 
<ul class=" list-paddingleft-2"> 
 <li><p>如果用户的国籍是葡萄牙，则取消订单的可能性很高。不过，对于团体订票来说，酒店一般不会事先得到每个人的国籍信息。如果订单被取消，大多数酒店都会将其国籍默认为酒店所在的国家。所以，这项信息只作为参考，并不一定准确；</p></li> 
 <li><p>与至少提出一个特殊要求的用户相比，未提出任何特殊要求的用户，取消订单的可能性更高；</p></li> 
 <li><p>lead_time（预订时间与入驻时间间隔天数）值越低，预订被取消的可能性就越低（这一点预测结果与之前数据分析结果相一致）。</p></li> 
</ul> 
<p><img src="https://img.36krcdn.com/20210330/v2_7be1e5d5d68a4507ac23132d99f25694_img_000" data-img-size-val="1000,450" referrerpolicy="no-referrer"></p> 
<p label="图片描述" classname="img-desc" class="img-desc" style>葡萄牙人气酒店欧洲之星博物馆，店内以考古展览为特色</p> 
<p label="图片描述" classname="img-desc" class="img-desc" style>上线多个 OTA 平台，支持在线预订及免费取消</p> 
<p>CatBoost 模型在验证集上的表现：</p> 
<p><img src="https://img.36krcdn.com/20210330/v2_dc79b10140424a4cb9beb777c4cfb0bc_img_000" data-img-size-val="908,132" referrerpolicy="no-referrer"></p> 
<p>在整个「酒店预订需求」数据集上的表现：</p> 
<p><img src="https://img.36krcdn.com/20210330/v2_e764d2318ccc4ee8b5fd1336bf123098_img_000" data-img-size-val="924,144" referrerpolicy="no-referrer"></p> 
<h2 label="一级标题" style> 酒店：在取消之前，让我先抢救一波</h2> 
<p>使用这一<a class="project-link" data-id="287244" data-name="预测模型" data-logo="https://img.36krcdn.com/20201106/v2_e02056052b134abda7bdfef2b8f34948_img_000" data-refer-type="2" href="https://36kr.com/projectDetails/287244" target="_blank">预测模型</a>，酒店就可以提前获知哪些用户可能取消订单，及时采取补救措施。</p> 
<p>比如，提前联系取消可能性较大的用户，通过沟通，让他们尽可能更早地取消，给酒店预留更多的时间出售房间。</p> 
<p>或者，也可以与有取消倾向的用户联系，向其介绍酒店的优点，给出一些入住奖励，力挽狂澜挽留他们。</p> 
<p>机器学习，帮酒店先下手为强</p> 
<p>新闻来源：</p> 
<p>https://www.linkedin.com/pulse/u-hotel-booking-cancellations-using-machine-learning-manuel-banza</p>  
</div>
            