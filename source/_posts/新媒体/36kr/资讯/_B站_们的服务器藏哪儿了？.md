
---
title: '_B站_们的服务器藏哪儿了？'
categories: 
 - 新媒体
 - 36kr
 - 资讯
headimg: 'https://img.36krcdn.com/20210715/v2_abd3f8e597b240d2a5c5abfec9c46213_img_000'
author: 36kr
comments: false
date: Thu, 15 Jul 2021 23:35:23 GMT
thumbnail: 'https://img.36krcdn.com/20210715/v2_abd3f8e597b240d2a5c5abfec9c46213_img_000'
---

<div>   
<p>在7月13日晚上11点左右，B站突然宕机。随后，“B站崩了”话题冲上<a class="project-link" data-id="38685" data-name="微博" data-logo="https://img.36krcdn.com/20210302/v2_f2cb7018ead34f4f9712a4e4fe4fc982_img_000" data-refer-type="2" href="https://36kr.com/projectDetails/38685" target="_blank">微博</a>热搜榜第一。一时间谣言四起，有的说是因为B站大楼服务器着火了，有的说服务器被攻击了。 </p> 
<p class="image-wrapper"><img data-img-size-val src="https://img.36krcdn.com/20210715/v2_abd3f8e597b240d2a5c5abfec9c46213_img_000" referrerpolicy="no-referrer"></p> 
<p class="image-wrapper"><img data-img-size-val src="https://img.36krcdn.com/20210715/v2_b1e1fd1683254a0b980d053a3f75e79c_img_000" referrerpolicy="no-referrer"></p> 
<p>虽然当晚23点57分有@上海消防微博通报辟谣，B站官微自身也就“部分服务器机房发生故障造成无法访问”致歉。 </p> 
<p>但到7月14日0点30分左右，B站网页端和移动端大部分功能才恢复正常，视频播放和直播功能可正常使用，但个人收藏、动态、消息等功能尚未恢复。 </p> 
<p>直到14日凌晨2点15分左右，B站所有功能均恢复正常。但宕机三小时才恢复，对于B站这个拥有2亿多的月活App来说，也是个可以载入史册的事故了，以至于第二天晚上B站宣布给所有注册用户赠送一天的大会员。 </p> 
<p>但B站的宕机事件，也把“大厂服务器”问题拉到了台前。 </p> 
<p>为什么服务器会宕机呢？ </p> 
<p>一般是两种，自身原因和外界原因。 </p> 
<p>自身原因很好理解了，服务器就是更高级一点的电脑，是电脑就会有内存和CPU，即使大公司会有很多服务器，但内存和CPU的运算能力总归是有上限的。 </p> 
<p>同一时间服务的请求越多，内存消耗量就越大。一旦在同一个时间需要服务处理的数据超出服务器空间限制，造成资源耗尽，就会导致服务器宕机。 </p> 
<p>当然正常运算时也会可能出现宕机，但服务器的稳定性极高，这种情况出现概率极小。 </p> 
<p>外部原因就好解释了，一个是网络攻击，通过恶意病毒植根大量用户的电脑设备，制造伪装成多个虚假IP地址，然后对服务器在短时间内发起大量请求，来使服务器宕机。 </p> 
<p>另一个就是如机房断电、机房温度过高，或者这次B站宕机谣言里说服务器起火，都会导致服务器宕机。 </p> 
<p>而这么多的服务器宕机原因，最后造成的结果，除了最直接的服务器宕机之外，还会导致服务器丢失大量数据，如果服务器服务的用户和企业众多，那么还会给企业带来巨量的经济损失。 </p> 
<p>比如2019年10月22日，亚马逊遭人为攻击，部分宕机，导致客户网站濒临崩溃；2018年3月2日深夜，<a class="project-link" data-id="8432" data-name="阿里云" data-logo="https://img.36krcdn.com/20210714/v2_7a12d63dcfc34d72b15c799eb4320e74_img_000" data-refer-type="1" href="https://www.36dianping.com/space/4469601233" target="_blank">阿里云</a>突然出现宕机故障，导致华北区域众多网站和App都无法正常使用；2018年，<a class="project-link" data-id="24961" data-name="腾讯" data-logo="https://img.36krcdn.com/20201201/v2_016524a9a477434cb3584e1558f3257a_img_000" data-refer-type="2" href="https://36kr.com/projectDetails/24961" target="_blank">腾讯</a>云出现重大故障，广州区域部分用户出现资源访问失败、控制台登录异常等情况。 </p> 
<p>那么解答了这么多关于服务器的基础问题后，核心问题来了，既然服务器的安全这么重要，大企业都会把自家的服务器放在哪里呢？ </p> 
<h2 label="一级标题" style><strong>腾讯：贵州·贵安</strong></h2> 
<p class="image-wrapper"><img data-img-size-val src="https://img.36krcdn.com/20210715/v2_f906820566e4437ca4e225987f10ed25_img_000" referrerpolicy="no-referrer"></p> 
<p>在贵州贵安的山洞隧道里，藏匿着腾讯的贵安七星绿色数据中心。这个数据中心被称“全国最安全的大数据中心”。 </p> 
<p>这个位于贵安新区马场镇川心村栖凤坡山体内的隧道数据中心，总占地面积约为770亩，隧洞面积超过3万平方米。 </p> 
<p class="image-wrapper"><img data-img-size-val src="https://img.36krcdn.com/20210715/v2_5ce56a775c6a40149cb82b251f56193b_img_000" referrerpolicy="no-referrer"></p> 
<p>内部总共有5横1竖，6个隧道，5个横向的隧道中，一个是油库动力隧道外，其余都是IT设备洞，长度都超过220米，而竖向的隧道则是为了起到通风和隧道间联系的作用，并且每条隧道上方都有竖井，总共11个，来用于通风散热。 </p> 
<p>据腾讯对安全性方面的解释，数据中心隐藏在群山当中，建成后的外景没有明显标识，同时所有核心设备都处于洞内，日常运行时没有人值守。 </p> 
<p>并且还具备战时防护能力，可防相应级别常规武器和核武器的打击。里面还有网络、主机、业务3级云安全布防，并且还应用了人脸识别、安防机器人这些人工智能技术，甚至还部署了无人机入侵防控系统。 </p> 
<p>无独有偶的是，<a class="project-link" data-id="25167" data-name="华为" data-logo="https://img.36krcdn.com/20200729/v2_7c7826d711824e758a8e1511c9d7eecc_img_000" data-refer-type="2" href="https://36kr.com/projectDetails/25167" target="_blank">华为</a>和<a class="project-link" data-id="526044" data-name="富士康" data-logo="https://img.36krcdn.com/20201117/v2_578568dd8cd745bebfb03a8a6eb61082_img_000" data-refer-type="2" href="https://36kr.com/projectDetails/526044" target="_blank">富士康</a>也在贵安新区建设了自家的数据中心。 </p> 
<p>比如华为，甚至就将自家的七星湖数据中心，建在腾讯的数据中心隔壁的山头上，两个山头相隔不到百米。占地大约有1600亩， 服务器大概60万台，用来存储华为在170个国家的管理数据。 </p> 
<p class="image-wrapper"><img data-img-size-val src="https://img.36krcdn.com/20210715/v2_2a21d522637f41e1bfd8b773d0f24c48_img_000" referrerpolicy="no-referrer"></p> 
<p>而且计划将在贵州贵安还有更多大型知名企业，如高通、电信、移动、联通、现代汽车、<a class="project-link" data-id="26918" data-name="中兴通讯" data-logo="https://img.36krcdn.com/20201021/v2_a8669f783e1940448cbe56c4ae36d440_img_000" data-refer-type="2" href="https://36kr.com/projectDetails/26918" target="_blank">中兴通讯</a>等等。 </p> 
<p>贵州到底有什么好呢？ </p> 
<p>贵安新区大数据办编撰的《贵安新区绿色数据中心》里提到，贵州的年均气温14℃到16℃，夏季平均气温低于25℃，植被覆盖率80%以上，没有恶劣天气。常年温度比较平均，不会过高过低，这也使得贵州的气候很适宜服务器运维。 </p> 
<p>同时贵州所处位置为稳定的地质带，不会发生地震、火山或洪水等其他自然灾害。 </p> 
<p>更重要的是，由于服务器运行需要空调等散热设施进行大量散热，所以电能消耗是数据中心运维成本中最大一笔开销。 而贵州有丰富的电能，再加上当地政府大力优惠政策，最低电价0.35元/度，而数据中心建成当时，全国数据中心聚集省份工业用电价格显示，全国均价是0.77元/千瓦时，便宜了近一半。 </p> 
<p>山体稳定，温度恒温适宜，电价又便宜，难怪腾讯为首的这么多公司会选择贵州建造数据中心。 </p> 
<h2 label="一级标题" style><strong>阿里：杭州·千岛湖</strong></h2> 
<p>前面的腾讯、华为是将服务器放在山里，那么与腾讯同属中国互联网企业“二极”的阿里，则是将自家服务器放在湖里。 </p> 
<p class="image-wrapper"><img data-img-size-val src="https://img.36krcdn.com/20210715/v2_bf177be033574ce5b47814274f764a00_img_000" referrerpolicy="no-referrer"></p> 
<p>这是阿里的千岛湖数据中心，2015年9月正式运营，总建筑面积30000平方米，共11层，可容纳至少5万台设备。 </p> 
<p>数据中心在服务器运行时，会通过管道，将湖水从35米深的湖底抽取上来，来给服务器降温，降温后还未结束，湖水还会流到2.5公里之外的青溪新城中轴溪，成为城市景观的一部分，直到水温在环境中自然冷却后，重新回到千岛湖内。 </p> 
<p class="image-wrapper"><img data-img-size-val src="https://img.36krcdn.com/20210715/v2_60e611eb5e914bb9993dbc7c2c19a152_img_000" referrerpolicy="no-referrer"></p> 
<p>由于千岛湖地区年平均气温只有17度，这种方式，让数据中心90%的时间都不依赖湖水之外的制冷能源，只用深层湖水制冷，比传统的空调制冷方式要节约能耗超过八成，全年下来可减少碳排放一万多吨标煤。 </p> 
<p>而且千岛湖还有一个作用，除了被阿里当作数据中心的“降温器”，还是<a class="project-link" data-id="25288" data-name="农夫山泉" data-logo="https://img.36krcdn.com/20210320/v2_1a48fdf34c18494f8aee99760477c5d9_img_000" data-refer-type="2" href="https://36kr.com/projectDetails/25288" target="_blank">农夫山泉</a>的水库之一，可能我们喝的农夫山泉的水就曾流经过阿里的服务器机房哦。 </p> 
<h2 label="一级标题" style><strong>微软：苏格兰·奥克尼群岛</strong></h2> 
<p>山河湖海，山河湖都有了，就差海了。 </p> 
<p>没错，大名鼎鼎的<a class="project-link" data-id="3967413" data-name="微软" data-logo="https://img.36krcdn.com/20200916/v2_811751a081924fa9af8741ce120bd7bf_img_png" data-refer-type="2" href="https://36kr.com/projectDetails/3967413" target="_blank">微软</a>公司，就将自家的服务器设备放到了深海里。 </p> 
<p class="image-wrapper"><img data-img-size-val src="https://img.36krcdn.com/20210715/v2_d7fed6f8b7ff4ad5abdd664075ef03e1_img_000" referrerpolicy="no-referrer"></p> 
<p>微软将把数据中心放在深海底的项目称之为Natick计划。 </p> 
<p>Natick是取自美国一座小城市的名字。这个“水下数据中心计划”最初是从2014年开始筹备，直到2015年8月才进行实体实验。 </p> 
<p>第一次实验里，近300台台式电脑计算能力的服务器，被装入了一个重达17吨的钢制密封舱内，然后在舱内舱外各安装了一台冷热交换器。 </p> 
<p>冷热交换器里面装满淡水，通过内外淡水交替循环来散热。 </p> 
<p>第一次测试成功后，微软在2018年又再一次实验，这次他们就选择了苏格兰附近的<a class="project-link" data-id="226036" data-name="奥克" data-logo="https://img.36krcdn.com/20201107/v2_fec789a293504efca7cf04602784dba3_img_000" data-refer-type="2" href="https://36kr.com/projectDetails/226036" target="_blank">奥克</a>尼群岛。 </p> 
<p class="image-wrapper"><img data-img-size-val src="https://img.36krcdn.com/20210715/v2_4304aa81cd054655af8fcd7306abbda5_img_000" referrerpolicy="no-referrer"></p> 
<p>这一整个数据中心包含了864台服务器和27.6PB（大概可以存500万部高清电影）的存储设备，就这样被整体沉入35米深的海底。 </p> 
<p>为什么微软会选择将数据中心放进海里呢？ </p> 
<p>除了本身深海可以降温，还因为微软的海底数据中心是模块化概念的，而全世界有一半以上的人口都居住在海岸线20公里以内，所以将数据中心分块放置在沿海城市的海域中，可以大大降低数据传输的时延。 </p> 
<p>其次，一个数据中心模块从规划到落地部署只需要90天，比在陆地上建立数据中心要快很多，且据微软表示，水下数据中心的故障率仅为陆地数据中心的八分之一，运维成本非常低。 </p> 
<p>目前一个数据中心模块，可以在水下持续运行5年免维，在使用寿命结束后，还可以再进行回收利用。 </p> 
<p>但由于Natick计划目前还是一项应用研究项目，没有完全转成商用，所以远不及我们国内企业几个完全成熟的方案更加使用。 </p> 
<h2 label="一级标题" style><strong>脸书：北极圈·瑞典·吕勒奥</strong></h2> 
<p>山河湖海都全了，是不是还得来点更极端的？ </p> 
<p>这就要属“蜥蜴人”扎佬的facebook了。 </p> 
<p class="image-wrapper"><img data-img-size-val src="https://img.36krcdn.com/20210715/v2_790e4a086fee4afa9fc7670f8325ffb6_img_000" referrerpolicy="no-referrer"></p> 
<p>Facebook的Node Pole数据中心，位于瑞典吕勒奥镇边沿的森林中。 而吕勒奥镇位于波罗的海北岸，离北极圈只有100公里，所以这是一个冰天雪地再走远点可以看到北极熊的地方。 </p> 
<p>Node Pole数据中心从2013年开始运行，在2017年6月份才向外界公开。从图片可以看到，它的外部由数以千计的矩形金属板组成，长300米宽100米，差不多四个足球场大，周围则是大片的松林、湖泊和群岛。 </p> 
<p>这个也是Facebook首次在美国以外的地区开设数据中心，是欧洲最大的数据中心之一。 </p> 
<p class="image-wrapper"><img data-img-size-val src="https://img.36krcdn.com/20210715/v2_939f37111bf9495597eaaac3de80e6f0_img_000" referrerpolicy="no-referrer"></p> 
<p>内部来看，就像《银翼杀手》中的场景：金属色的狭长的走廊嗡嗡作响，服务器蓝光闪烁，风扇高速运转，像是高速运行的银色怪兽。 </p> 
<p>至于选择这个北极圈的小镇作为数据中心的地点，是因为吕勒奥镇自1961年以来，全年超过30度的时间加起来，不超过一天。而在冬天，平均气温都在零下20度。 </p> 
<p>这个数据中心可以充分利用瑞典的寒冷气候，冷空气被过滤器和雾化器处理后，再像水一样“冲洗”服务器，服务器产生的大量热空气再和进来的冷空气循环交换，进行自然冷却。 </p> 
<p class="image-wrapper"><img data-img-size-val src="https://img.36krcdn.com/20210715/v2_3621e8a0c7ec457bbc85f3d489d25c53_img_000" referrerpolicy="no-referrer"></p> 
<p>而且瑞典还拥有大量的、廉价的和可靠的电力能源。在大约一个世纪之前，瑞典为帮助国内的钢铁、造纸等工业发展修建了水电大坝，但随着部分产业的衰落，这里的电用不完了，这些富余的电能就可以被利用。 </p> 
<p>而且据称它是有史以来最高效节能的计算设施。一般来说，普通的数据中心平均消耗3瓦特的能量，2瓦特用于电力和冷却，剩余的1瓦特用于计算。相比之下，Node Pole数据中心的这个比率仅为1.04：1，比一般数据中心环保两倍左右。 </p> 
<p>希望能看到服务器送上火星的那天。 </p> 
<p>本文来自<a class="project-link" data-id="3968527" data-name="微信" data-logo="https://img.36krcdn.com/20200916/v2_811751a081924fa9af8741ce120bd7bf_img_png" data-refer-type="2" href="https://36kr.com/projectDetails/3968527" target="_blank">微信</a>公众号 <a target="_blank" rel="noopener noreferrer" href="http://mp.weixin.qq.com/s?__biz=Mzg5MTU1MjE3Mg==&mid=2247520464&idx=2&sn=6a0aa49a2eba5ac7ee2bb36e296cad12&chksm=cfc97813f8bef105f96fa4e4f80d2693a9a2daee1153bc59100209c244bdc31a3f8061ecf2ba&scene=27#wechat_redirect">“锌财经”（ID：xincaijing）</a>，作者：梅浩宇，编辑：大风，36氪经授权发布。</p>  
</div>
            