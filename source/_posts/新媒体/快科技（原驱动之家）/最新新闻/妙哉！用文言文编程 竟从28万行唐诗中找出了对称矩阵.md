
---
title: '妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵'
categories: 
 - 新媒体
 - 快科技（原驱动之家）
 - 最新新闻
headimg: 'https://icons.mydrivers.com/2021/news/ayun72890.png'
author: 快科技（原驱动之家）
comments: false
date: Sun, 28 Mar 2021 12:32:33 GMT
thumbnail: 'https://icons.mydrivers.com/2021/news/ayun72890.png'
---

<div>   
<p align="center"><a href="http://click.aliyun.com/m/1000253340/" target="_blank" rel="nofollow"><img src="https://icons.mydrivers.com/2021/news/ayun72890.png" width="600" height="74" referrerpolicy="no-referrer"></a>
           </p><p>你能看出来，这首诗妙在哪里吗？</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210328/f24642cf-92d1-4c52-a3fc-a68533f13fce.png" target="_blank"><img alt="妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵" h="278" src="https://img1.mydrivers.com/img/20210328/Sf24642cf-92d1-4c52-a3fc-a68533f13fce.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>其实，横着读是一首诗，竖着读还是这首诗！</p>
<p style="text-align: center"><img alt="妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵" h="360" src="https://img1.mydrivers.com/img/20210328/9bffeb2b-634a-4f63-b115-e92be8728fec.png" style="border: black 1px solid" w="368" referrerpolicy="no-referrer"></p>
<p>而且，这首诗可不是乱编的，其中的诗句都来自《全唐诗》，读起来也颇有意境。</p>
<p>创造这个奇妙组合的，不是文学研究大师，而是一位程序员小哥。</p>
<p>他用计算机，找出了所有符合规律的古诗，还在Github上开源了代码。</p>
<p>就连README文件，也颇具个性：</p>
<p>余所用之程序，當以gcc編譯之如是gcc -O3 mgsq5.c -o mgsq5</p>
<p>等一下。这个风格好像很熟悉？</p>
<p>没错，这位程序员，正是之前开发了火遍全网的文言文编程语言的Huang Lingdong。</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210328/67a403c6-2449-47ec-9371-8d058410c7c4.png" target="_blank"><img alt="妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵" h="136" src="https://img1.mydrivers.com/img/20210328/S67a403c6-2449-47ec-9371-8d058410c7c4.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a><br>
△ 文言文编程的“Hello，World”</p>
<p>他用数学中的3阶幻方（九宫格）作比，把符合这种规律的诗命名为“唐诗幻方”。</p>
<p>然而，这首诗真正的玄妙之处，还不止在这里。</p>
<p><strong>玄妙之处</strong></p>
<p>这首诗，初看只是横竖都能读，但如果把其中汉字编码成数字再看的话，会发现：</p>
<p>原来，这是个对称矩阵！</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210328/20f025fd-00c7-4d0d-bb17-5cd53bc09c53.png" target="_blank"><img alt="妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵" h="273" src="https://img1.mydrivers.com/img/20210328/S20f025fd-00c7-4d0d-bb17-5cd53bc09c53.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>不过，他遍历了全唐诗里所有五言诗共二十八万七千句后，也只能得出两个这样的幻方。</p>
<p>除了“风月清江夜”以外，还只有一个，不过意境上差了许多，不能令他满意。</p>
<p style="text-align: center"><img alt="妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵" h="360" src="https://img1.mydrivers.com/img/20210328/2948c505-cc7e-4f16-9ceb-53125736cee8.png" style="border: black 1px solid" w="366" referrerpolicy="no-referrer"></p>
<p>在135600行七言唐诗中，符合这个规律的七言“幻方”，更是一个都没有。</p>
<p>他只能退而求其次，只寻找奇数项对称的，即每句第1、3、5、7个字对称，偶数行用空行代替。</p>
<p>放宽标准后倒是能找出不少，但再想从其中挑选符合音韵格律、意思上还通顺的，就不多了。</p>
<p>最后，他选择了其中一个还稍微过得去的做例子，把空行中的字也加上，也能写成对称矩阵：</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210328/cee50883-d404-4c0c-8da0-c3326633481c.png" target="_blank"><img alt="妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵" h="276" src="https://img1.mydrivers.com/img/20210328/Scee50883-d404-4c0c-8da0-c3326633481c.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>这位小哥，是在研究传统文化时，从古代的洛书和璇玑图中获得的灵感。</p>
<p style="text-align: center"><img alt="妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵" h="440" src="https://img1.mydrivers.com/img/20210328/21626416-90a7-46c1-916f-eb15fa363ab0.png" style="border: black 1px solid" w="440" referrerpolicy="no-referrer"></p>
<p style="text-align: center">△洛书</p>
<p>洛书写成数字就是三阶幻方，特点是每一行、每一列及对角线中的数字之和都相等。</p>
<p style="text-align: center"><img alt="妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵" h="206" src="https://img1.mydrivers.com/img/20210328/9e1b93e2-6139-4594-bc56-3cc7829ee6aa.png" style="border: black 1px solid" w="208" referrerpolicy="no-referrer"></p>
<p>文字没有求和这种操作，如果按照程序员思维，那就是字符串拼接起来相等。</p>
<p>就这样，得出了要寻找的目标：第n行和第n列的文字相同。</p>
<p>璇玑图中共841个字，按顺读、逆读、横读、斜读、蛇行读、交叉读、换行读、换列读、间句读都能成诗，总共包含了7958首诗。</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210328/f6ef1bf1-6491-4772-9772-baf380471d84.png" target="_blank"><img alt="妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵" h="543" src="https://img1.mydrivers.com/img/20210328/Sf6ef1bf1-6491-4772-9772-baf380471d84.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>其中的关键之处在于，按照不同顺序读，其文字都能组成有意义的诗句。他自认没有古人作诗的才华，就想到从唐诗中寻找符合条件的诗句。</p>
<p>而且是用现代人的方法——编程来解决。</p>
<p><strong>以“暴力”治之</strong></p>
<p>这位小哥，先是想到了用“八皇后问题”的计算机解法，来找出符合要求的唐诗。</p>
<p>八皇后问题，简单来说是这样的：</p>
<p>8 x 8的国际象棋棋盘上，摆放8个不同的皇后，使其不能互相攻击，即处在同一行、同一列、同一斜线上，求解摆放方法。</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210328/1f20ccab-bb3c-4d0d-864a-618b609ef3c4.png" target="_blank"><img alt="妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵" h="606" src="https://img1.mydrivers.com/img/20210328/S1f20ccab-bb3c-4d0d-864a-618b609ef3c4.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>这个问题，可以用到一种名为“回溯法”的算法来求解，原理如图：</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210328/e1dcdc5e-587b-4421-81be-4962bdb3d7a4.png" target="_blank"><img alt="妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵" h="373" src="https://img1.mydrivers.com/img/20210328/Se1dcdc5e-587b-4421-81be-4962bdb3d7a4.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>如果用回溯法来找“幻方”，计算机需要先随机“找出半句诗”，再挨个儿往后面搜索合适的诗句。</p>
<p>例如，计算机先从13万行唐诗中，随机找出诗句“风月清江夜”：</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210328/4b02db5d-428b-4323-aa6d-df473e65a21e.png" target="_blank"><img alt="妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵" h="103" src="https://img1.mydrivers.com/img/20210328/S4b02db5d-428b-4323-aa6d-df473e65a21e.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>根据对称矩阵的原理，第二句诗的开头，就应该以“月”为首：</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210328/f13b1ac7-9382-40da-afc1-e05b71b523f1.png" target="_blank"><img alt="妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵" h="163" src="https://img1.mydrivers.com/img/20210328/Sf13b1ac7-9382-40da-afc1-e05b71b523f1.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>（以月开头的诗句，应该还是有不少的，像月上柳梢头）</p>
<p>以此类推，第三句诗的开头，就应该以“清夜”为首：</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210328/440068de-722e-4c87-a237-1782fa5d375a.png" target="_blank"><img alt="妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵" h="227" src="https://img1.mydrivers.com/img/20210328/S440068de-722e-4c87-a237-1782fa5d375a.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>（以清夜开头的诗句，就少了许多）</p>
<p>而第四句诗的开头，就应该以“江山归”打头：</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210328/e4022f7f-58c5-4e1d-8589-4007f76cc8e8.png" target="_blank"><img alt="妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵" h="284" src="https://img1.mydrivers.com/img/20210328/Se4022f7f-58c5-4e1d-8589-4007f76cc8e8.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>（江山归开头的诗……可选范围应该更少了）</p>
<p>最后一句诗的开头，就必须与前4句诗的结尾完全一致，“夜深来客”：</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210328/a99e3137-6b8d-4397-9467-d3c9b7b459e2.png" target="_blank"><img alt="妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵" h="350" src="https://img1.mydrivers.com/img/20210328/Sa99e3137-6b8d-4397-9467-d3c9b7b459e2.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>难度逐渐变成地狱级……</p>
<p>在这几步操作中，要是有任何一步无法满足条件，就得全部推倒重来。</p>
<p>这样的话，最初的第一步，就显得尤为重要：从什么类型的诗句开始遍历，才能最快地找到答案？</p>
<p>他为此用上了启发式搜索，从已知问题信息入手，对这些空格进行评估，找到限制条件最多、即最容易“下笔”的那个位置，再从这个位置开始找诗。</p>
<p>具体写成代码求解的话，就是利用递归法的结构。</p>
<p>同时，用上剪枝法，缩小剩下位置的查找范围。</p>
<p>也就是说，要用到约束函数，在扩展节点处剪去不满足约束条件的子树；再用限界函数，剪去得不到最优解的子树。</p>
<p style="text-align: center"><img alt="妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵" h="203" src="https://img1.mydrivers.com/img/20210328/ec5f82bd-0021-403e-8435-b56c28f87feb.png" style="border: black 1px solid" w="400" referrerpolicy="no-referrer"></p>
<p>这样一来，就能降低问题复杂度。</p>
<p>然而在运行代码时，作者却发现，这样做效率并不高。</p>
<p>这种方法，虽然可以求解“N”皇后问题，却不太适合求汉字矩阵。</p>
<p>因为，要填进格子里的，可不止8个皇后，每一格可以填的汉字，就有5000+种选择！</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210328/3bd18509-d565-4ce7-9e64-80fb4993d815.png" target="_blank"><img alt="妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵" h="365" src="https://img1.mydrivers.com/img/20210328/S3bd18509-d565-4ce7-9e64-80fb4993d815.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>采用递归法的话，计算机在填上前面的汉字时，实际上就缩小了剩下汉字可以搜查的范围。</p>
<p>如果没有找到最初那个合适的字，往往搜到一半后，能用的诗句就没了，又得重新再猜，效率不升反降。</p>
<p>越想越烦躁，这位小哥干脆一拍大腿：不如暴力搜索！</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210328/1dccc3c4-ce84-486c-b284-9513916cb33f.jpg" target="_blank"><img alt="妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵" h="279" src="https://img1.mydrivers.com/img/20210328/S1dccc3c4-ce84-486c-b284-9513916cb33f.jpg" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>当然，也不是普通的暴力搜索。</p>
<p>会有两个搜索条件：</p>
<p>其一，以五言诗为例，第五列的前4个字，和第五行的前4个字，内容是否完全一样？如果不一样，就扔掉。</p>
<p style="text-align: center"><img alt="妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵" h="398" src="https://img1.mydrivers.com/img/20210328/eee1f845-7845-450b-b2c9-1629b0c9dcae.jpg" style="border: black 1px solid" w="395" referrerpolicy="no-referrer"></p>
<p>△ 第五行和第五列的前4个字</p>
<p>其二，这首诗是不是对称矩阵？不是的话，就扔掉。</p>
<p style="text-align: center"><img alt="妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵" h="244" src="https://img1.mydrivers.com/img/20210328/f3ab51ac-d758-4638-9db6-cbf886547124.png" style="border: black 1px solid" w="243" referrerpolicy="no-referrer"></p>
<p>利用C语言写好后，不用1小时就能跑出所有的“对称诗”。</p>
<p>作者表示，自己并非文学研究的专家，也不是算法专家，因此，这种方法可能并不是最好的办法。</p>
<p>诸君若有更好的求解思路，可以来找他玩耍~</p>
<p><strong>作者介绍</strong></p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210328/22719888-984d-4aeb-ab8a-387d8cb3cac8.png" target="_blank"><img alt="妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵" h="600" src="https://img1.mydrivers.com/img/20210328/S22719888-984d-4aeb-ab8a-387d8cb3cac8.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>作者Huang Lingdong，在发布文言文编程语言时还在卡耐基梅隆大学上本科。现在已毕业，在母校的Studio for Creative Inquiry做研究助理，为博物馆和学校等组织开发交互媒体项目。</p>
<p>这位小哥热爱编程和传统文化，还开发过写诗IDE，能自动检查平仄等格律规则，内置韵书和康熙字典做参考。</p>
<p>还能通过机器学习分析用户作品，并与《全唐诗》中的诗句做比对，看你写的诗像哪位诗人的风格。</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210328/1aaf8c09-c601-42d4-9b42-2945b788a464.png" target="_blank"><img alt="妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵" h="516" src="https://img1.mydrivers.com/img/20210328/S1aaf8c09-c601-42d4-9b42-2945b788a464.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>除了诗词古文，他对传统美术也颇有研究，开发过无限生成随机山水画的工具，和多款中文字体。</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210328/68af4d8f-2531-4a63-898c-924a8c967d48.png" target="_blank"><img alt="妙哉！用文言文编程 竟从28万行唐诗中找出了对称矩阵" h="298" src="https://img1.mydrivers.com/img/20210328/S68af4d8f-2531-4a63-898c-924a8c967d48.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a><br>
△就是不知道为什么山水画里有个电线杆</p>

           
           
<p class="end"> - THE END -</p> 
            
 <p class="bqian"><a href="https://news.mydrivers.com/tag/biancheng.htm"><i>#</i>编程</a><a href="https://news.mydrivers.com/tag/wenyanwen.htm"><i>#</i>文言文</a></p>
<p class="url">
     <span>原文链接：<a href="https://mp.weixin.qq.com/s/RMgVslAafkTZIPK7H40ppg">量子位</a></span>
<span>责任编辑：随心</span>
</p>
        
</div>
            