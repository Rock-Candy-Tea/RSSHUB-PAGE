
---
title: '用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了'
categories: 
 - 新媒体
 - 快科技（原驱动之家）
 - 最新新闻
headimg: 'https://img1.mydrivers.com/img/20210523/Sd2ea7aae-1e6b-4475-b270-5660c06994f4.png'
author: 快科技（原驱动之家）
comments: false
date: Sun, 23 May 2021 12:38:47 GMT
thumbnail: 'https://img1.mydrivers.com/img/20210523/Sd2ea7aae-1e6b-4475-b270-5660c06994f4.png'
---

<div>   
<p>又到了考（bao）验（lu）阅（nian）历（ling）的时候了。</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210523/d2ea7aae-1e6b-4475-b270-5660c06994f4.png" target="_blank"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="291" src="https://img1.mydrivers.com/img/20210523/Sd2ea7aae-1e6b-4475-b270-5660c06994f4.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>盆友，你可识得此物？</p>
<p>在80年代90年代，可是有不少宝贵的代码数据，都是存储在这样的载体之中的，比如DOS版的仙剑1。</p>
<p style="text-align: center"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="450" src="https://img1.mydrivers.com/img/20210523/effd9f53-ec11-4ff8-a2ab-0e3c27d86809.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></p>
<p>辣么，如果现在有一张存储古早代码的软盘到了你手里，你该如何解开其中的历史秘密？要知道，在今天，你可能连读取软盘的设备都很难找到……</p>
<p>要是再磕了碰了，那就更完蛋了。</p>
<p style="text-align: center"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="228" src="https://img1.mydrivers.com/img/20210523/7b1b51cb-1709-47a8-bfe8-865a39a8e211.png" style="border: black 1px solid" w="221" referrerpolicy="no-referrer"></p>
<p>最近，vsftpd作者、Google Project Zero创始人Chris Evans大佬就遇到了这样的难题：</p>
<p>在和Phil Pemberton一起恢复存储在软盘中的几个古早游戏代码时，他们发现，部分软盘出现了不同程度的损坏，以致于直接用Greaseweazle这样的设备是无法读取的。</p>
<p style="text-align: center"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="198" src="https://img1.mydrivers.com/img/20210523/8a6313f5-def8-4cec-88e2-c3e30751a5d4.png" style="border: black 1px solid" w="320" referrerpolicy="no-referrer"><br>
△Greaseweazle F7 Plus</p>
<p>怎么办？大佬决心要搞出一个船新的方案，抢救宝贵历史代码。</p>
<p>设备也简单，就用万能的示波器。</p>
<p>没错，就是那种用来测试电路、显示波形的仪器。</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210523/af480727-3f1f-4bad-8ef8-7b3a40135683.png" target="_blank"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="397" src="https://img1.mydrivers.com/img/20210523/Saf480727-3f1f-4bad-8ef8-7b3a40135683.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>恢复出来的游戏代码竟然还能玩，而且界面显示清晰：</p>
<p style="text-align: center"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="353" src="https://img1.mydrivers.com/img/20210523/a8f23c0c-716b-40dd-ac01-f15c53079eb8.png" style="border: black 1px solid" w="400" referrerpolicy="no-referrer"></p>
<p>这波操作，看得网友直呼：数据考古不要太酷。</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210523/6c67fdad-788c-4bca-9440-cf7deb3b72ba.png" target="_blank"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="81" src="https://img1.mydrivers.com/img/20210523/S6c67fdad-788c-4bca-9440-cf7deb3b72ba.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p><strong>手敲0和1，100%恢复古早代码</strong></p>
<p>软盘通常以模拟信号的方式存储数据。</p>
<p>这里面存储的模拟信号，用的是最原始的FM调制（频率调制）。</p>
<p>也就是说，它所存储的信号0和1，分别会以不同的波形频率表示。</p>
<p style="text-align: center"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="171" src="https://img1.mydrivers.com/img/20210523/9e5a343b-a784-4b4f-9ff9-cbd0c5ffcdd3.png" style="border: black 1px solid" w="320" referrerpolicy="no-referrer"><br>
△这代表的是00101100</p>
<p>以下面这段波形为例，单位周期下，在信号为0时，输出的频率是比较慢的；而当信号变成1时，频率就会突然变快。</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210523/b8b480b0-2961-4a5a-8c6e-317254040a3d.png" target="_blank"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="337" src="https://img1.mydrivers.com/img/20210523/Sb8b480b0-2961-4a5a-8c6e-317254040a3d.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>因此，只需要找到周期规律，就能判断一个周期里，信号代表的是0还是1。</p>
<p>但也不能仅仅看峰值来判断信号是否为1。例如，在这个周期里，就出现了一个“假峰值”，然而人工解读的结果还是0。</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210523/58c7d8b3-18c3-4635-ad6a-6f55c1a44f8c.png" target="_blank"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="337" src="https://img1.mydrivers.com/img/20210523/S58c7d8b3-18c3-4635-ad6a-6f55c1a44f8c.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>因为这个峰值其实是一个噪音，信号的整体趋势仍然是下降的，波形的频率本质上并没有变化。（但信号为1时，波形会呈现一个完整的周期，起始点和终点的值是非常接近的）</p>
<p>有网友给出了简单的判断方法：一个周期过去，如果信号值变化很大，则代表0；如果信号值几乎不变，则代表1。</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210523/a8c75602-c355-4dc3-8ae0-9e4629c27740.png" target="_blank"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="337" src="https://img1.mydrivers.com/img/20210523/Sa8c75602-c355-4dc3-8ae0-9e4629c27740.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>据Chris Evans介绍，代表0的正弦波信号，是8μs一个周期；而代表1的正弦波信号，则是4μs一个周期。</p>
<p>这种情况下，用Greaseweazle等“现代设备”直接读取数据，会出现一个问题。</p>
<p>如果软盘中的数据，由于各种外部原因（时间久远、使用次数过多）出现了损坏，那么仅凭机器，是无法从这些带有大量噪音的数据中完成解读的。</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210523/a9fad442-e663-44b9-b4aa-ce0f568faf04.png" target="_blank"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="329" src="https://img1.mydrivers.com/img/20210523/Sa9fad442-e663-44b9-b4aa-ce0f568faf04.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a><br>
△就像这样，有一个扇区出现了问题</p>
<p>但人却可以轻易看出这些数据中的“规律”，从而判断信号的状态。</p>
<p>因此，用示波器将软盘中传输的模拟信号展示出来，再由人工进行解读，会是个更好的方法。</p>
<p>于是Evans和Pemberton将示波器直接连上了软盘驱动器的测试点，看看软盘到底都输出了些什么信号。</p>
<p>其中，输入信号会呈现一正一负两个波形，用来消除一部分噪声。</p>
<p style="text-align: center"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="640" src="https://img1.mydrivers.com/img/20210523/135f512f-1ec7-41bc-bf75-420fa5d2f0d3.png" style="border: black 1px solid" w="480" referrerpolicy="no-referrer"></p>
<p>从各种“年代久远”的软盘解读出的信号来看，难怪Greaseweazle这些设备读不出来……（连人也得仔细分辨一会儿）</p>
<p style="text-align: center"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="559" src="https://img1.mydrivers.com/img/20210523/66361183-5eb1-417a-9692-4cdc8674c8b0.png" style="border: black 1px solid" w="448" referrerpolicy="no-referrer"></p>
<p>接下来，就是处理这些神奇的波形了。</p>
<p>为了更好地处理噪音、绘制信号图像，Evans和Pemberton还用上了Audacity来处理模拟信号。</p>
<p>Audacity是一个免费开源的音频分析和编辑工具，能够快速放大和检查波形，还具有多功能低通滤波器，以及直接绘图的功能。</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210523/249e5993-e627-45b6-99d4-446558c3b750.png" target="_blank"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="383" src="https://img1.mydrivers.com/img/20210523/S249e5993-e627-45b6-99d4-446558c3b750.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>另外，Audacity也支持CSV文件的导入。</p>
<p>Evans和他的小伙伴还利用这样的音频工具搞出了新的衍生玩法……</p>
<p>比如将速度放慢100倍，听一听软盘记录的声音（软盘每转一次时间为0.2秒，该样本为20秒）：</p>
<p>软盘录音方式.wav来自量子位00:0000:28</p>
<p>恢复出来的数据，效果还不错。</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210523/00e0b711-4ed0-4c1f-bda6-d47fbf79ba78.png" target="_blank"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="169" src="https://img1.mydrivers.com/img/20210523/S00e0b711-4ed0-4c1f-bda6-d47fbf79ba78.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>但上面这些，还只能用于数据比较正常的信号。</p>
<p>对于软盘本身有轻微损坏的信号，想要恢复就变得更困难了。</p>
<p><strong>软盘坏了怎么办？</strong></p>
<p>要是软盘上有划痕，这部分的信号就会变得非常难以辨认。</p>
<p style="text-align: center"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="400" src="https://img1.mydrivers.com/img/20210523/f1aef7e3-9485-49d8-9021-09350aa72693.png" style="border: black 1px solid" w="300" referrerpolicy="no-referrer"></p>
<p>这是Evans和Pemberton还原的其中一个凹痕的信号，显然中间那部分，信号振幅（图中信号的强度）丢失得非常厉害，还自带噪音。</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210523/12bb0099-6145-478e-89c6-6a264e5903c0.png" target="_blank"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="329" src="https://img1.mydrivers.com/img/20210523/S12bb0099-6145-478e-89c6-6a264e5903c0.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>其中一种方法是，多用几种不同的软盘驱动器试试。</p>
<p>先用MF504C软盘驱动器过滤一下噪音：</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210523/6b11068b-36ab-45fb-8550-8f999e48955f.png" target="_blank"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="329" src="https://img1.mydrivers.com/img/20210523/S6b11068b-36ab-45fb-8550-8f999e48955f.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>好像效果不大。</p>
<p>换上另一个TEAC软盘驱动器后，显示的信号更加给力了，但强度还是很小：</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210523/a2d35c5e-bfcb-49a0-b9f3-75732444c748.png" target="_blank"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="329" src="https://img1.mydrivers.com/img/20210523/Sa2d35c5e-bfcb-49a0-b9f3-75732444c748.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>用肉眼分辨的话，难度还是太高了。</p>
<p>鉴于此，Evans和Pemberton又换上了TEC软盘驱动器，效果好多了，峰值也变得清晰可辨。</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210523/b751b39a-505f-4774-a833-72f838c5854a.png" target="_blank"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="329" src="https://img1.mydrivers.com/img/20210523/Sb751b39a-505f-4774-a833-72f838c5854a.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>除此之外，应对这类信号振幅丢失的情况，还有另一种方法：手工绘制修复。</p>
<p>由于峰值缺失得实在太厉害，只能通过人为修复，绘制部分峰值信号，来解决强度过低的问题。</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210523/66b7c880-5c37-46fa-a2f1-729569c989b6.png" target="_blank"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="337" src="https://img1.mydrivers.com/img/20210523/S66b7c880-5c37-46fa-a2f1-729569c989b6.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>但无论如何，这些信号都可以被修复。</p>
<p>据作者介绍，上面这些办法100%可以恢复软盘中的数据。</p>
<p>除非真的出现了不可抗力。</p>
<p>例如，软盘的一部分被损坏得很彻底：</p>
<p style="text-align: center"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="400" src="https://img1.mydrivers.com/img/20210523/0be1688e-fca0-451c-921c-39bc4eb133c6.png" style="border: black 1px solid" w="300" referrerpolicy="no-referrer"></p>
<p>这种情况下，软盘数据就彻底没办法恢复了。</p>
<p>所以，家里有“上古宝物”的小伙伴，一定要保护好自己的软盘！</p>
<p><strong>关于作者</strong></p>
<p>这个项目的作者之一，是最受欢迎的Linux发行版FTP服务器程序vsftpd作者、著名黑客Chris Evans。</p>
<p>他毕业于牛津大学，毕业后进入甲骨文工作，其后又在谷歌工作了9年时间，是Chrome浏览器安全团队和谷歌黑客团队Project Zero的创建者。</p>
<p>据报道，Project Zero团队由谷歌内部顶尖安全工程师组成，使命是找出全球范围内高价值的安全漏洞，并将其彻底消除。</p>
<p>2015年，特斯拉把这位黑客大神揽入麾下，负责领导安全工作。2016年，Evans从特斯拉离职。</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210523/d707f7c4-66c1-437b-b405-65bab545f3bd.png" target="_blank"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="300" src="https://img1.mydrivers.com/img/20210523/Sd707f7c4-66c1-437b-b405-65bab545f3bd.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>Evans还是漏洞赏金平台HackerOne的成立顾问。</p>
<p>现在，据老哥自己说，他处在“半退休”状态。</p>
<p style="text-align: center"><a href="https://img1.mydrivers.com/img/20210523/1abe110a-5946-4711-ba3c-7e3fb54af653.png" target="_blank"><img alt="用示波器恢复软盘里的游戏 这个程序员大神的操作太硬核了" h="284" src="https://img1.mydrivers.com/img/20210523/S1abe110a-5946-4711-ba3c-7e3fb54af653.png" style="border: black 1px solid" w="600" referrerpolicy="no-referrer"></a></p>
<p>最后的最后，你是否也对80年代的游戏代码长啥样产生了好奇？</p>
<p>Evans表示，这些恢复出来的源代码已经交给游戏原作者，是否开源就要看原作者的意思了，如果你感兴趣，不妨蹲个后续~</p>
<p>不过，此前量子位还介绍过另一个从21张软盘中被“抢救”出来的红白机游戏，代码已在GitHub上开源：</p>

           
           
<p class="end"> - THE END -</p> 
            
 <p class="bqian"><a href="https://news.mydrivers.com/tag/youxi.htm"><i>#</i>游戏</a></p>
<p class="url">
     <span>原文链接：<a href="https://mp.weixin.qq.com/s/b2kO244zDfR3SeSyK7U9Tg">量子位</a></span>
<span>责任编辑：随心</span>
</p>
        
</div>
            